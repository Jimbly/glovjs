{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/gl-mat3/create.js","node_modules/gl-mat3/fromMat4.js","node_modules/gl-mat4/copy.js","node_modules/gl-mat4/create.js","node_modules/gl-mat4/invert.js","node_modules/gl-mat4/multiply.js","node_modules/gl-mat4/perspective.js","node_modules/gl-mat4/transpose.js","src/client/glov/camera2d.js","src/client/glov/edit_box.js","src/client/glov/effects.js","src/client/glov/engine.js","src/client/glov/font.js","src/client/glov/geom.js","src/client/glov/input.js","src/client/glov/local_storage.js","src/client/glov/mat43.js","src/client/glov/particles.js","src/client/glov/selection_box.js","src/client/glov/shaders.js","src/client/glov/simple_menu.js","src/client/glov/sound_manager.js","src/client/glov/sprite_animation.js","src/client/glov/sprites.js","src/client/glov/textures.js","src/client/glov/transition.js","src/client/glov/ui.js","src/client/glov/ui_test.js","src/client/glov/vmath.js","src/client/img/font/04b03_8x1.json","src/client/img/font/04b03_8x2.json","src/client/img/font/palanquin32.json","src/client/main.js","src/client/particle_data.js","src/client/shims/assert.js","src/client/wrapper.js","src/common/util.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","create","out","Float32Array","fromMat4","copy","invert","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","multiply","b","b0","b1","b2","b3","perspective","fovy","aspect","near","far","Math","tan","nf","transpose","virtualToCanvas","set","setAspectFixed","setAspectFixed2","zoom","setNormalized","x0","y0","x1","y1","w","h","xScale","yScale","htmlPos","htmlSize","physicalToVirtual","physicalDeltaToVirtual","virtualToPhysical","tick","startup","engine","round","data","screen_width","screen_height","render_width","render_height","render_viewport_w","render_viewport_h","render_offset_x","render_offset_y","reapply","dst","src","pa","pixel_aspect","inv_aspect","inv_desired_aspect","margin","_margin","_margin2","x","y","factor","inv_factor","window","devicePixelRatio","width","height","viewport","_margin3","setViewport","glov_input","glov_ui","camera2d","focuslog","GlovUIEditBox","params","this","z","Z","UI","button_width","type","text","placeholder","initial_focus","applyParams","got_focus_in","got_focus_out","elem","input","submitted","new_text","value","focusSteal","isFocusedPeek","keyDownEdge","KEYS","TAB","keyDown","SHIFT","focusPrev","focusNext","focused","focusCheck","document","activeElement","focus","blur","ESC","setText","focusCanvas","_this","updateFocus","this_frame_edit_boxes","push","getElem","textContent","form","createElement","setAttribute","addEventListener","ev","preventDefault","appendChild","span","pos","style","left","top","size","eatAllKeyboardInput","SUBMIT","prototype","grayScaleMatrix","sepiaMatrix","negativeMatrix","saturationMatrix","hueMatrix","brightnessAddMatrix","brightnessScaleMatrix","additiveMatrix","contrastMatrix","applyCopy","applyPixelyExpand","applyGaussianBlur","applyColorMatrix","geom","shaders","textures","vec2","vec4","v4set","shader_data","vp_copy","vp","fp","pixely_expand","gaussian_blur","color_matrix","getShader","key","shader","gl","FRAGMENT_SHADER","VERTEX_SHADER","inited","clip_space","copy_uv_scale","shader_params_default","shader_params_color_matrix","shader_params_gaussian_blur","shader_params_pixely_expand","quad_geom","semantic","POSITION","FLOAT","QUADS","colorMatrix","sampleRadius","Gauss","orig_pixel_size","saturationScale","is","angle","cos","s","sin","brightnessOffset","scale","additiveRGB","contrastScale","applyEffect","effect","view_w","view_h","target_w","target_h","bind","bindArray","texs","draw","source","setSamplerState","filter_min","LINEAR","filter_mag","wrap_s","CLAMP_TO_EDGE","wrap_t","resx","resy","hblur","captureFramebuffer","vblur","final_viewport","clear_color","clearColor","clear","COLOR_BUFFER_BIT","max_size","min_size","inputTexture0","res","matrix","mout","setGlobalMatrices","updateMatrices","postprocessingAllow","getFrameTimestamp","getFrameIndex","getFrameDt","getFrameDtActual","setState","addTickFunc","getTemporaryTexture","assert","effects","glov_font","font_info_palanquin32","local_storage","mat3FromMat4","mat4Copy","mat4Invert","mat4Mul","mat4Transpose","mat4Perspective","asin","min","max","PI","sqrt","sprites","glov_transition","mat3","mat4","vec3","v3mulMat4","v3normalize","v4copy","canvas","glov_particles","sound_manager","clear_bits","game_width","game_height","defines","ZFAR","fov_y","fov_x","mat_projection","mat_view","mat_m","mat_vp","mat_mv","mat_mvp","mat_mv_inv_transform","light_diffuse","light_dir_vs","light_ambient","light_dir_ws","font","app_state","pico8_colors","fps_style","outline_width","outline_color","color","_mat_view","mat_temp","mat_model","postprocessing_reset_version","postprocessing","get","allow","undefined","global_timer","global_frame_index","this_frame_time","this_frame_time_actual","after_loading_state","is_loading","new_state","mspf","mspf_update_time","Date","now","mspf_frame_count","show_fps","do_borders","do_viewport_postprocess","need_repos","app_tick_functions","cb","temporary_textures","resetEffects","temp","list","idx","pop","destroy","xywh","_tex","createForCapture","tex","override_sampler","do_filter_linear","do_wrap","copyTexImage","NEAREST","REPEAT","last_tick","requestAnimationFrame","dt","hidden","webkitHidden","rise","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","enable","BLEND","DEPTH_TEST","error","ul","lr","viewport2","view_height","font_size","floor","getElementById","drawRect","BORDERS","ii","drawSizedAligned","FPSMETER","font_height","ALIGN","HRIGHT","toFixed","render","endFrame","TurbulenzEngine","pixely","viewport_postprocess","depthFunc","LEQUAL","CULL_FACE","cullFace","BACK","m","location","search","match","forEach","v","slice","ambient","mvp","mv_inv_trans","view","projection","DEPTH_BUFFER_BIT","defaultFilters","font_info_04b03x2","font_info_04b03x1","info","texture","ui_sprites","bindSounds","button_click","rollover","onResize","state","loading","load_count","innerText","visibility","glov_engine","intColorFromVec4Color","vec4ColorFromIntColor","styleColored","styleAlpha","clamp","v4clone","v4scale","COLOR_MODE","SINGLE","GRADIENT","HLEFT","HCENTER","HMASK","VTOP","VCENTER","VBOTTOM","VMASK","HFIT","HWRAP","HCENTERFIT","HVCENTER","HVCENTERFIT","GlovFontDefaultStyle","glow_xoffs","glow_yoffs","glow_inner","glow_outer","glow_color","colorUR","colorLR","colorLL","color_mode","GlovFontStyle","font_shaders","buildVec4ColorFromIntColor","glov_font_default_style","font_style","fields","ret","_f","colorAlpha","alpha","tech_params","tech_params_dirty","temp_color","createTechniqueParameters","param0","outlineColor","glowColor","glowParams","tex0","techParamsSet","param","tpv","techParamsGet","GlovFont","font_info","texture_name","load","url","noFilter","font_aa","char_infos","char_info","sc","_ii","_char_info","xpad","yoffs","replacement_character","infoFromChar","default_style","applied_style","drawSized","drawScaled","_x","_y","align","x_size","y_size","getStringWidth","indent","drawScaledWrapped","word_cb","wrapLinesScaled","applyStyle","xsc","x_advance","calcXAdvance","charCodeAt","len","word_start","word_x0","linenum","space_info","space_size","hard_wrap","newx","char_w","tabsize","word_width","ysc","_this2","num_lines","xoffs","word","y2","x2","font_texel_scale","y_offset","avg_scale_font","camera_xscale","camera_yscale","avg_scale_combined","tile_state","delta_per_source_pixel","spread","delta_per_dest_pixel","padding1","padding4","outer_scaled","value2","padding_in_font_space","z_advance","rel_x_scale","rel_y_scale","char_scale","xsc2","ysc2","pad_scale","tile_width","tile_height","u0","u1","v0","v1","queueraw","outline","glow","font_aa_outline_glow","font_aa_outline","font_aa_glow","determineShader","fontShadersInit","_len","arguments","args","Array","_key","Function","apply","concat","ceil","gl_byte_size","5120","5121","5122","5123","5126","bound_geom","bound_array_buf","bound_index_buf","quad_index_buf","quad_index_buf_len","deleteBuffer","handle","bindBuffer","ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER","attrib_enabled","enableVertexAttribArray","bits","disable_mask","enable_mask","disableVertexAttribArray","_n","getQuadIndexBuf","quad_count","createBuffer","arr","Uint16Array","vidx","bufferData","STATIC_DRAW","Geom","_format","verts","idxs","mode","TRIANGLES","format","stride","elem_count","used_attribs","fmt","sem","gltype","count","byte_size","vert_count","vbo","orig_mode","ibo","ibo_owned","ibo_size","update","num_verts","DYNAMIC_DRAW","bufferSubData","subarray","dispose","bound_attribs","offset","normalized","vertexAttribPointer","drawElements","UNSIGNED_SHORT","pointerLocked","pointerLockEnter","pointerLockExit","eatAllInput","mousePos","mouseWheel","mouseOver","mouseDown","mousePosIsTouch","isTouchDown","numTouches","keyUpEdge","padGetAxes","padButtonDown","padButtonDownEdge","padButtonUpEdge","mouseUpEdge","mouseDownEdge","drag","abs","v2add","v2copy","v2lengthSq","v2set","v2scale","v2sub","UP_EDGE","DOWN_EDGE","DOWN","TOUCH_AS_MOUSE","MAP_ANALOG_TO_DPAD","ANY","POINTERLOCK","BACKSPACE","ENTER","RETURN","CTRL","ALT","SPACE","PAGEUP","PAGEDOWN","END","HOME","LEFT","UP","RIGHT","INS","DEL","String","fromCharCode","pad_codes","A","SELECT","B","CANCEL","X","Y","LB","LEFT_BUMPER","RB","RIGHT_BUMPER","LT","LEFT_TRIGGER","RT","RIGHT_TRIGGER","START","LEFT_STICK","RIGHT_STICK","ANALOG_UP","ANALOG_LEFT","ANALOG_DOWN","ANALOG_RIGHT","key_state","pad_states","gamepad_data","mouse_pos","last_mouse_pos","mouse_pos_is_touch","mouse_over_captured","mouse_down","mouse_wheel","input_eaten_kb","input_eaten_mouse","touches","touch_mode","getJSON","TouchData","touch","button","delta","total","cur_pos","start_pos","release","start_time","dispatched","pointerLockElement","mozPointerLockElement","webkitPointerLockElement","pointerlock_touch_id","touch_data","requestPointerLock","exitPointerLock","ignored","event","stopPropagation","onKeyUp","keyCode","target","tagName","onKeyDown","F12","F5","F6","temp_delta","onMouseMove","no_stop","setJSON","offsetX","offsetY","layerX","layerY","any_movement","movementX","movementY","onMouseDown","resume","touch_id","onMouseUp","no_click","onWheel","wheelDelta","touch_pos","onTouchChange","cancelable","ct","seen","new_count","old_count","last_touch","identifier","clientX","clientY","released_touch","id","_touch","_touch2","_canvas","passive_param","opts","Object","defineProperty","passive","removeEventListener","mozRequestPointerLock","webkitRequestPointerLock","mozExitPointerLock","webkitExitPointerLock","DEADZONE","DEADZONE_SQ","NUM_STICKS","PAD_THRESHOLD","getGamepadData","gpd","timestamp","sticks","updatePadState","ps","gamepadUpdate","gamepads","navigator","webkitGamepads","getGamepads","webkitGetGamepads","numGamePads","gamepad","buttons","numButtons","_typeof","axes","pair","magnitude","endFrameTickMap","map","keys","keycode","touches_save","over_save","eaten_mouse_save","mousePosParam","check_pos","checkPos","Infinity","pos_param","Boolean","stickindex","padindex","sub","padButtonDownInternal","padcode","padButtonDownEdgeInternal","padButtonUpEdgeInternal","ANALOG_MAP","padButtonShared","fn","max_click_dist","max_dist","click","peek","storage_prefix","local_storage_sim","lsd","localStorage","test","JSON","stringify","def","parse","mat43","m43identity","m43mul","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","b4","b5","b6","b7","b8","preloadParticleData","v2lerp","v2mul","v3add","v4lerp","v4mul","blend_map","BLEND_ALPHA","additive","BLEND_ADDITIVE","particle_data","defs","part_name","particles","part_def","normalizeValue","isArray","normalizeValueVec","vec","normalizeParticle","particle_manager","norm","blend","color_track","size_track","accel","rot","rot_vel","lifespan","kill_time_accel","_e","_arr","findParticle","name","normalizeEmitter","part_map","part_idx","particle","vel","emit_rate","emit_time","emit_initial","normalizeDef","system_lifespan","emitters","instValue","random","instValueVec","temp_color2","temp_size","temp_size2","ParticleSystem","parent","def_in","age","kill_hard","kill_soft","part_sets","part_set","parts","_ii2","_def","emitter","countdown","started","stopped","part","age_norm","dts","weight","_ii3","_weight","queueraw4","dt_orig","tickParticle","init_dt","emitter_def","num","emitParticle","remaining_dt","emit_dt","tickPartSet","_ii4","tickEmitter","ParticleManager","systems","system","_key2","glov_markup","cloneShallow","merge","nearSame","selbox_font_style_default","selbox_font_style_selected","selbox_font_style_down","selbox_font_style_disabled","default_display","style_default","style_selected","style_disabled","style_down","no_background","no_buttons","centered","bounce","tab_stop","use_markup","color_gray50","color_grayD0","color_white","SELBOX_BOUNCE_TIME","GlovMenuItem","field","value_min","value_max","value_inc","tag","exit","prompt_int","prompt_string","no_sound","slider","no_controller_exit","plus_minus","disabled","GlovSelectionBox","items","is_dropdown","transient_focus","display","scroll_height","entry_height","button_height","auto_reset","dropdown_visible","selected","was_clicked","was_right_clicked","is_focused","dummy_focus_check","selbox_dummy","mouse_mode","last_mousex","last_mousey","bounce_time","expected_frame_index","item","tag_or_index","list_height","do_scroll","yret","pos_changed","was_focused","gained_focus_forward","old_sel","num_non_disabled_selections","eff_sel","gained_focus","bg_height","getHeight","page_size","S","W","sel_changed","_item","pad","color0","setMouseOver","drawHBox","menu_header","font_style_focused","font_style_normal","y_save","x_save","scroll_pos","eff_width","buffer","min_scroll_pos","old_scroll_pos","sa","max_scroll_pos","overscroll","begin","_item2","entry_disabled","image_set","is_mouseover","mpos","show_selection","menu_selected","menu_down","ms","menu_entry","bounce_amt","did_tab","text_y","str","tab_idx","indexOf","pre","post","w1","w2","md","print","_md","xx","zz","end","playUISound","last_id","bound_prog","ATTR0","ATTR1","COLOR","COLOR_0","ATTR2","TEXCOORD","TEXCOORD_0","ATTR3","NORMAL","ATTR4","TEXCOORD_1","findAll","re","exec","globals","error_fp","error_vp","vp_attr_regex","uniform_regex","sampler_regex","type_size","Shader","createShader","programs","attributes","samplers","found","Number","isNaN","uniforms","type_name","split","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","console","getShaderInfoLog","uniformSetValue","unif","uniform2fv","uniform3fv","uniform4fv","uniformMatrix3fv","uniformMatrix4fv","link","prog","createProgram","attachShader","bindAttribLocation","linkProgram","valid","getProgramParameter","LINK_STATUS","getProgramInfoLog","useProgram","getUniformLocation","glob","filter","_name","uniform1i","diff","jj","_jj","_globals","join","selection_box","color101010C8","GlovSimpleMenu","sel_box","edit_index","index","menu_item","force","internal","exit_index","selbox_enabled","no_notches","slider_width","slider_x","run","grabbed","buttons_width","button_x","buttonText","no_focus","minus_over","button_mouseover","plus_over","execItem","allow_left_right","D","wasRightClicked","isSelected","DEFAULT_FADE_RATE","sounds","num_loading","SoundManager","listenerTransform","soundDeviceParameters","linearDistance","soundDevice","WebGLSoundDevice","auto_oggs","auto_mp3s","sound_on","music_on","channels","createSource","position","relative","pitch","channel","last_played","fade_rate","current_loop","music","looping","current_volume","target_volume","base","loadSound","preferred_ext","tryLoad","ext","createSound","onload","sound","isSupported","max_fade","fade_amt","gain","soundname","volume","last_played_time","play","stop","transition","DEFAULT","FADE_OUT","FADE_IN","FADE","GlovSpriteAnimation","frame","time","anim","anim_idx","frames","times","loop","clone","getFrame","queuefn","queuesprite","clip","nextHighestPowerOfTwo","sprite_vshader","sprite_fshader","sprite_dual_fshader","sprite_shader_params","last_uid","sprite_queue","sprite_freelist","SpriteData","shader_params","uid","spriteDataAlloc","cmpSprite","x3","y3","sprite","uvs","origin","dx","dy","cosr","sinr","ch","cw","sh","sw","bias","zoom_level","mipped_texels","z_start","z_end","xy","wh","gd_h","scissor","SCISSOR_TEST","disable","diffTextures","texsa","texsb","batch_state","sprite_geom","sprite_buffer","sprite_buffer_len","sprite_buffer_batch_start","sprite_buffer_idx","last_blend_mode","last_bound_shader","MAX_VERT_COUNT","batches","commit","start","commitAndFlush","batch","ONE","bufferSpriteData","c1","c2","c3","c4","u2","v2","depthMask","sort","new_length","buildRects","ws","hs","rects","total_w","total_h","tex_w","tex_h","widths","heights","Sprite","layers","uidata","drawDualTint","color1","findTexForReplacement","aniso","max_aniso","aniso_enum","default_filter_min","default_filter_mag","R8","RGB8","RGBA8","mag","isPowerOfTwo","bound_unit","bound_tex","handle_loading","handle_error","setUnit","unit","activeTexture","TEXTURE0","bindHandle","bindTexture","unbindHandle","eff_handle","Texture","loaded","load_fail","TEXTURE_2D","createTexture","updateData","loadURL","texParameteri","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","TEXTURE_WRAP_T","mipmaps","texParameterf","Uint8Array","texImage2D","internal_type","gl_type","Image","texSubImage2D","generateMipmap","img","did_done","done","fail","onerror","crossOrigin","copyTexImage2D","RGB","deleteTexture","cname","lastIndexOf","toLowerCase","search_key","compare_key","LINEAR_MIPMAP_LINEAR","LUMINANCE","UNSIGNED_BYTE","RGBA","ext_anisotropic","getExtension","TEXTURE_MAX_ANISOTROPY_EXT","getParameter","MAX_TEXTURE_MAX_ANISOTROPY_EXT","queue","fade","splitScreen","pixelate","randomTransition","easeOut","unit_vec","pow","transitions","IMMEDIATE","REMOVE","CONTINUE","transition_pixelate","GlovTransition","func","capture","accum_time","transitionCapture","trans","immediate","TRANSITION_FINAL","_trans","destroyTexture","trans_idx","TRANSITION_RANGE","force_end","setTimeout","splice","glovTransitionFadeFunc","fade_time","initial","ms_since_start","progress","glovTransitionSplitScreenFunc","border_width","slide_window","border_color","v_half","border_grow_progress","render_scale","transition_pixelate_texture","transitionPixelateCapture","glovTransitionPixelateFunc","gd_width","partial_progress","pixel_scale","param1","texSizeX","texSizeY","fade_time_scale","makeColorSet","drawBox","isFocused","panel","drawTooltip","buttonShared","buttonTextDraw","buttonImage","modalDialog","createEditBox","menuUp","drawCircle","drawHollowCircle","drawLine","drawCone","scaleSizes","setFontHeight","MODAL","TOOLTIP","DEBUG","glov_edit_box","glov_sprites","lerp","MODAL_DARKEN","menu_fade_params_default","saturation","brightness","fallback_darken","regular","down","doBlurEffect","desaturate_xform","desaturate_tmp","doDesaturateEffect","button_img_size","modal_width","modal_y0","modal_title_scale","panel_pixel_scale","tooltip_width","tooltip_pad","color_button","color_panel","modal_font_style","button_focused","touch_changed_focus","last_frame_button_mouseover","frame_button_mouseover","modal_dialog","modal_stealing_focus","menu_up","menu_fade_params","menu_up_time","last_frame_edit_boxes","dom_elems","dom_elems_issued","button_keys","focused_last_frame","focused_this_frame","focused_key_not","focused_key","focused_key_prev1","focused_key_prev2","_font","loadUISprite","only_override","override","button_regular","white","ok","cancel","yes","no","N","dynamic_text_elem","_elem","_sound_manager","_sounds","coords","my_w","my_h","tooltip","tooltip_w","tooltip_y0","eff_tooltip_pad","drawSizedWrapped","no_touch_mouseover","touch_twice","tooltip_above","colors","sprite_name","_buttonShared","shrink","img_rect","_buttonShared2","img_w","img_h","img_origin","img_scale","draw_param","rotation","title","modalDialogRun","eff_button_width","text_w","eff_font_height","eff_button_keys","pressed","bad_frames","edit_box","unrun","removeChild","pp_this_frame","mx","my","Mx","My","spreadTechParams","drawCircleInternal","tu1","tv1","tu2","tv2","circle","CIRCLE_SIZE","midp","j","d","filter_max","hollow_circle","LINE_W","line","LINE_SIZE","tangx","tangy","w0","cone","CONE_SIZE","_dx","_dy","dCircle","_font_height","runFontTest","glov_simple_menu","glov_selection_box","demo_menu","demo_menu_up","demo_result","edit_box1","edit_box2","test_select1","test_select2","init","column_width","line_height","getSelectedItem","OK","Cancel","COLOR_RED","COLOR_GREEN","COLOR_WHITE","COLOR_INVISIBLE","font_style_outline","font_style_glow","font_style_shadow","font_style_both","font_size2","font_style_both2","font_style_outline2","font_style_glow2","v2abs","v2addScale","v2distSq","v2normalize","v3addScale","v3copy","v3cross","v3determinant","v3dot","v3distSq","v3div","v3floor","v3lengthSq","v3scale","v3sub","v3zero","v4mulAdd","v4zero","mn","zero_vec","identity_mat3","identity_mat4","xaxis","yaxis","zaxis","it","imageW","imageH","main","glov_local_storage","glov_sprite_animation","glov_ui_test","BACKGROUND","SPRITES","PARTICLES","UI_TEST","flags","flagGet","dflt","flagToggle","flagSet","perfTestSprites","subc","_idx","createSprite","createAnimation","color_red","color_yellow","sprite_size","initGraphics","test_tint","animation","idle_left","idle_right","game_bg","last_particles","color_sprite","character","bounds","font_test_idx","button_spacing","playMusic","createSystem","explosion","testInit","part0","max_parts","exp","msg","equal","debug","file","debugmsg","resizeCanvas","css_to_real","clientWidth","clientHeight","contextNames","getContext","alert","easeInOut","easeIn","defaults","mix","sign","round100","round1000","fract","titleCase","lineCircleIntersect","va","obj","dest","hasOwnProperty","tol","toUpperCase","EPSILON","p1","p2","pCircle","radius","dp","bb4ac","mu1","mu2"],"mappings":"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","file":"wrapper.bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","module.exports = create\n\n/**\n * Creates a new identity mat3\n *\n * @alias mat3.create\n * @returns {mat3} a new 3x3 matrix\n */\nfunction create() {\n  var out = new Float32Array(9)\n  out[0] = 1\n  out[1] = 0\n  out[2] = 0\n  out[3] = 0\n  out[4] = 1\n  out[5] = 0\n  out[6] = 0\n  out[7] = 0\n  out[8] = 1\n  return out\n}\n","module.exports = fromMat4\n\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @alias mat3.fromMat4\n * @param {mat3} out the receiving 3x3 matrix\n * @param {mat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\nfunction fromMat4(out, a) {\n  out[0] = a[0]\n  out[1] = a[1]\n  out[2] = a[2]\n  out[3] = a[4]\n  out[4] = a[5]\n  out[5] = a[6]\n  out[6] = a[8]\n  out[7] = a[9]\n  out[8] = a[10]\n  return out\n}\n","module.exports = copy;\n\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nfunction copy(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n};","module.exports = create;\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\nfunction create() {\n    var out = new Float32Array(16);\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n};","module.exports = invert;\n\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nfunction invert(out, a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15],\n\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32,\n\n        // Calculate the determinant\n        det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n    if (!det) { \n        return null; \n    }\n    det = 1.0 / det;\n\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n\n    return out;\n};","module.exports = multiply;\n\n/**\n * Multiplies two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nfunction multiply(out, a, b) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n    // Cache only the current line of the second matrix\n    var b0  = b[0], b1 = b[1], b2 = b[2], b3 = b[3];  \n    out[0] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[1] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[2] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[3] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[4]; b1 = b[5]; b2 = b[6]; b3 = b[7];\n    out[4] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[5] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[6] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[7] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[8]; b1 = b[9]; b2 = b[10]; b3 = b[11];\n    out[8] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[9] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[10] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[11] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[12]; b1 = b[13]; b2 = b[14]; b3 = b[15];\n    out[12] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[13] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[14] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[15] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n    return out;\n};","module.exports = perspective;\n\n/**\n * Generates a perspective projection matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nfunction perspective(out, fovy, aspect, near, far) {\n    var f = 1.0 / Math.tan(fovy / 2),\n        nf = 1 / (near - far);\n    out[0] = f / aspect;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = f;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = (far + near) * nf;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = (2 * far * near) * nf;\n    out[15] = 0;\n    return out;\n};","module.exports = transpose;\n\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nfunction transpose(out, a) {\n    // If we are transposing ourselves we can skip a few steps but have to cache some values\n    if (out === a) {\n        var a01 = a[1], a02 = a[2], a03 = a[3],\n            a12 = a[6], a13 = a[7],\n            a23 = a[11];\n\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a01;\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a02;\n        out[9] = a12;\n        out[11] = a[14];\n        out[12] = a03;\n        out[13] = a13;\n        out[14] = a23;\n    } else {\n        out[0] = a[0];\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a[1];\n        out[5] = a[5];\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a[2];\n        out[9] = a[6];\n        out[10] = a[10];\n        out[11] = a[14];\n        out[12] = a[3];\n        out[13] = a[7];\n        out[14] = a[11];\n        out[15] = a[15];\n    }\n    \n    return out;\n};","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint no-shadow:off */\n\nconst engine = require('./engine.js');\n\nconst { round } = Math;\n\nexport const data = new Float32Array(9); // x0, y0, x1, y1, x_scale, y_scale, css_to_real\n\nlet screen_width;\nlet screen_height;\n// Note: render_* not used by FRVR at this time\nlet render_width;\nlet render_height;\nexport let render_viewport_w;\nexport let render_viewport_h;\nexport let render_offset_x;\nexport let render_offset_y;\n\nfunction reapply() {\n  if (render_width) {\n    data[4] = render_width / (data[2] - data[0]);\n    data[5] = render_height / (data[3] - data[1]);\n    data[7] = (data[2] - data[0]) / render_viewport_w;\n    data[8] = (data[3] - data[1]) / render_viewport_h;\n  } else {\n    data[4] = screen_width / (data[2] - data[0]);\n    data[5] = screen_height / (data[3] - data[1]);\n  }\n}\n\n// To get to coordinates used by OpenGL / canvas\nexport function virtualToCanvas(dst, src) {\n  dst[0] = (src[0] - data[0]) * data[4];\n  dst[1] = (src[1] - data[1]) * data[5];\n}\n\n// Sets the 2D \"camera\" used to translate sprite positions to screen space.  Affects sprites queued\n//  after this call\nexport function set(x0, y0, x1, y1) {\n  data[0] = x0;\n  data[1] = y0;\n  data[2] = x1;\n  data[3] = y1;\n  reapply();\n}\n\n// Drawing area 0,0-w,h\n// But keep the aspect ratio of those things drawn to be correct\n// This may create a padding or margin on either top and bottom or sides of the screen\n// User users constant values in this range for consistent UI on all devices\nexport function setAspectFixed(w, h) {\n  let pa = engine.render_width ? 1 : engine.pixel_aspect;\n  let inv_aspect = h / pa / w;\n  let inv_desired_aspect;\n  if (render_width) {\n    inv_desired_aspect = render_height / render_width;\n  } else {\n    inv_desired_aspect = screen_height / screen_width;\n  }\n  if (inv_aspect > inv_desired_aspect) {\n    let margin = (h / pa / inv_desired_aspect - w) / 2;\n    set(-margin, 0, w + margin, h);\n  } else {\n    let margin = (w * pa * inv_desired_aspect - h) / 2;\n    set(0, -margin, w, h + margin);\n  }\n}\n\n// Primary drawing area at least W x H\n// But keep the aspect ratio of those things drawn to be correct\n// Similar to setAspectFixed() but keeps (0,0) in the upper left (all padding\n//   is added to right and bottom)\n// Requires users to use camera2d.w()/ and camera2d.h() to determine reasonable\n//   UI positioning\nexport function setAspectFixed2(w, h) {\n  let pa = engine.render_width ? 1 : engine.pixel_aspect;\n  let inv_aspect = h / pa / w;\n  let inv_desired_aspect;\n  if (render_width) {\n    inv_desired_aspect = render_height / render_width;\n  } else {\n    inv_desired_aspect = screen_height / screen_width;\n  }\n  if (inv_aspect > inv_desired_aspect) {\n    let margin = h / pa / inv_desired_aspect - w;\n    set(0, 0, w + margin, h);\n  } else {\n    let margin = w * pa * inv_desired_aspect - h;\n    set(0, 0, w, h + margin);\n  }\n}\n\nexport function zoom(x, y, factor) {\n  let inv_factor = 1.0 / factor;\n  set(x - (x - data[0]) * inv_factor, y - (y - data[1]) * inv_factor, x + (data[2] - x) * inv_factor, y + (data[3] - y) * inv_factor);\n}\n\nexport function setNormalized() {\n  set(0, 0, 1, 1);\n}\n\nexport function x0() {\n  return data[0];\n}\nexport function y0() {\n  return data[1];\n}\nexport function x1() {\n  return data[2];\n}\nexport function y1() {\n  return data[3];\n}\nexport function w() {\n  return data[2] - data[0];\n}\nexport function h() {\n  return data[3] - data[1];\n}\nexport function xScale() {\n  return data[4];\n}\nexport function yScale() {\n  return data[5];\n}\n\nexport function htmlPos(x, y) {\n  if (render_width) {\n    return [100 * (((x - data[0]) / data[7] + render_offset_x) / screen_width), 100 * (((y - data[1]) / data[8] + render_offset_y) / screen_height)];\n  } else {\n    return [100 * (x - data[0]) / (data[2] - data[0]), 100 * (y - data[1]) / (data[3] - data[1])];\n  }\n}\nexport function htmlSize(w, h) {\n  if (render_width) {\n    return [100 * w / data[7] / screen_width, 100 * h / data[8] / screen_height];\n  } else {\n    return [100 * w / (data[2] - data[0]), 100 * h / (data[3] - data[1])];\n  }\n}\n\nexport function physicalToVirtual(dst, src) {\n  if (render_width) {\n    dst[0] = (src[0] * data[6] - render_offset_x) * data[7] + data[0];\n    dst[1] = (src[1] * data[6] - render_offset_y) * data[8] + data[1];\n  } else {\n    dst[0] = src[0] * data[6] / data[4] + data[0];\n    dst[1] = src[1] * data[6] / data[5] + data[1];\n  }\n}\n\nexport function physicalDeltaToVirtual(dst, src) {\n  if (render_width) {\n    dst[0] = src[0] * data[6] * data[7];\n    dst[1] = src[1] * data[6] * data[8];\n  } else {\n    dst[0] = src[0] * data[6] / data[4];\n    dst[1] = src[1] * data[6] / data[5];\n  }\n}\n\n// To get to coordinates used by mouse events\nexport function virtualToPhysical(dst, src) {\n  if (render_width) {\n    dst[0] = (render_offset_x + (src[0] - data[0]) / data[7]) / data[6];\n    dst[1] = (render_offset_y + (src[1] - data[1]) / data[8]) / data[6];\n  } else {\n    dst[0] = (src[0] - data[0]) * data[4] / data[6];\n    dst[1] = (src[1] - data[1]) * data[5] / data[6];\n  }\n}\n\nexport function tick() {\n  data[6] = window.devicePixelRatio || 1; /* css_to_real */\n  screen_width = engine.width;\n  screen_height = engine.height;\n  let viewport = [0, 0, screen_width, screen_height];\n  if (engine.render_width) {\n    // Note: render_* not used by FRVR at this time\n    render_width = engine.render_width;\n    render_height = engine.render_height;\n    // Find an offset so this rendered viewport is centered while preserving aspect ratio, just like setAspectFixed\n    let pa = engine.pixel_aspect;\n    let inv_aspect = render_height / pa / render_width;\n    let inv_desired_aspect = screen_height / screen_width;\n    if (inv_aspect > inv_desired_aspect) {\n      let margin = (render_height / inv_desired_aspect - render_width * pa) / 2 * screen_height / render_height;\n      render_offset_x = round(margin);\n      render_offset_y = 0;\n      render_viewport_w = round(screen_width - margin * 2);\n      render_viewport_h = screen_height;\n    } else {\n      let margin = (render_width * inv_desired_aspect - render_height / pa) / 2 * screen_width / render_width;\n      render_offset_x = 0;\n      render_offset_y = round(margin);\n      render_viewport_w = screen_width;\n      render_viewport_h = round(screen_height - margin * 2);\n    }\n    viewport[2] = render_width;\n    viewport[3] = render_height;\n  } else {\n    render_width = render_height = 0;\n    render_offset_x = 0;\n    render_offset_y = 0;\n  }\n\n  reapply();\n\n  // let screen_width = engine.width;\n  // let screen_height = engine.height;\n  // let screen_aspect = screen_width / screen_height;\n  // let view_aspect = game_width / game_height;\n  // if (screen_aspect > view_aspect) {\n  //   let viewport_width = game_height * screen_aspect;\n  //   let half_diff = (viewport_width - game_width) / 2;\n  //   viewportRectangle = [-half_diff, 0, game_width + half_diff, game_height];\n  // } else {\n  //   let viewport_height = game_width / screen_aspect;\n  //   let half_diff = (viewport_height - game_height) / 2;\n  //   viewportRectangle = [0, -half_diff, game_width, game_height + half_diff];\n  // }\n\n  engine.setViewport(viewport);\n}\n\nexport function startup() {\n  set(0, 0, engine.width, engine.height);\n  tick();\n}","/* eslint-env jquery */\n/*global Z: false */\n\nconst glov_input = require('./input.js');\nconst glov_ui = require('./ui.js');\nconst camera2d = require('./camera2d.js');\n\nconst { focuslog } = require('./ui.js');\n\nclass GlovUIEditBox {\n  constructor(params) {\n    this.x = 0;\n    this.y = 0;\n    this.z = Z.UI; // actually in DOM, so above everything!\n    this.w = glov_ui.button_width;\n    this.type = 'text';\n    // this.h = glov_ui.button_height;\n    // this.font_height = glov_ui.font_height;\n    this.text = '';\n    this.placeholder = '';\n    this.initial_focus = false;\n    this.applyParams(params);\n\n    this.got_focus_in = false;\n    this.got_focus_out = false;\n    this.elem = null;\n    this.input = null;\n    this.submitted = false;\n  }\n  applyParams(params) {\n    if (!params) {\n      return;\n    }\n    for (let f in params) {\n      this[f] = params[f];\n    }\n  }\n  getText() {\n    return this.text;\n  }\n  setText(new_text) {\n    if (this.input) {\n      this.input.value = new_text;\n    }\n    this.text = new_text;\n  }\n  focus() {\n    glov_ui.focusSteal(this);\n  }\n\n  updateFocus() {\n    if (this.got_focus_out) {\n      if (glov_ui.isFocusedPeek(this)) {\n        glov_input.keyDownEdge(glov_input.KEYS.TAB); // eat the TAB\n        if (glov_input.keyDown(glov_input.KEYS.SHIFT)) {\n          glov_ui.focusPrev(this);\n        } else {\n          glov_ui.focusNext(this);\n        }\n      }\n      this.got_focus_out = false;\n    }\n    if (this.got_focus_in) {\n      glov_input.keyDownEdge(glov_input.KEYS.TAB); // eat the TAB\n      glov_ui.focusSteal(this);\n      this.got_focus_in = false;\n    }\n    let focused = glov_ui.focusCheck(this);\n    if (focused && this.input && document.activeElement !== this.input) {\n      this.input.focus();\n    }\n    if (!focused && this.input && document.activeElement === this.input) {\n      this.input.blur();\n    }\n\n    if (focused && glov_input.keyDownEdge(glov_input.KEYS.ESC)) {\n      if (this.text) {\n        this.setText('');\n      } else {\n        glov_ui.focusCanvas();\n      }\n    }\n    return focused;\n  }\n\n  run(params) {\n    this.applyParams(params);\n    let focused = this.updateFocus();\n\n    glov_ui.this_frame_edit_boxes.push(this);\n    let elem = glov_ui.getElem();\n    if (elem !== this.elem) {\n      if (elem) {\n        // new DOM element, initialize\n        elem.textContent = '';\n        let form = document.createElement('form');\n        let input = document.createElement('input');\n        input.setAttribute('type', this.type);\n        input.setAttribute('placeholder', this.placeholder);\n        input.setAttribute('tabindex', 2);\n        input.addEventListener('focusin', ev => {\n          focuslog('EditBox:focusin', this);\n          this.got_focus_in = true;\n          ev.preventDefault();\n        }, true);\n        input.addEventListener('focusout', ev => {\n          focuslog('EditBox:focusout', this);\n          this.got_focus_out = true;\n          ev.preventDefault();\n        }, true);\n        form.addEventListener('submit', ev => {\n          ev.preventDefault();\n          this.submitted = true;\n        }, true);\n        form.appendChild(input);\n        let span = document.createElement('span');\n        span.setAttribute('tabindex', 3);\n        form.appendChild(span);\n        elem.appendChild(form);\n        input.value = this.text;\n        this.input = input;\n        if (this.initial_focus) {\n          input.focus();\n        }\n      } else {\n        this.input = null;\n      }\n      this.submitted = false;\n      this.elem = elem;\n    } else {\n      if (this.input) {\n        this.text = this.input.value;\n      }\n    }\n    if (elem) {\n      let pos = camera2d.htmlPos(this.x, this.y);\n      elem.style.left = `${pos[0]}%`;\n      elem.style.top = `${pos[1]}%`;\n      let size = camera2d.htmlSize(this.w, this.h);\n      elem.style.width = `${size[0]}%`;\n    }\n\n    if (focused) {\n      // keyboard input is handled by the INPUT element, but allow mouse events to trickle\n      glov_input.eatAllKeyboardInput();\n    }\n\n    if (this.submitted) {\n      this.submitted = false;\n      return this.SUBMIT;\n    }\n    return null;\n  }\n  unrun() {\n    // remove from DOM or hide\n    this.elem = null;\n    this.input = null;\n  }\n}\nGlovUIEditBox.prototype.SUBMIT = 'submit';\n\nexport function create(params) {\n  return new GlovUIEditBox(params);\n}","\nconst engine = require('./engine.js'); // Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n// Some code from Turbulenz: Copyright (c) 2012-2013 Turbulenz Limited\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst geom = require('./geom.js');\nconst shaders = require('./shaders.js');\nconst textures = require('./textures.js');\n\nconst { vec2, vec4, v4set } = require('./vmath.js');\n\nconst shader_data = {\n  vp_copy: {\n    vp: '#pragma WebGL\\nprecision highp float;\\n\\nvarying vec2 interp_texcoord;\\nattribute vec2 POSITION;\\n\\nuniform vec2 copy_uv_scale;\\nuniform vec4 clip_space;\\n\\nvoid main()\\n{\\n  interp_texcoord = POSITION * copy_uv_scale;\\n  gl_Position = vec4(POSITION * clip_space.xy + clip_space.zw, 0, 1);\\n}'\n  },\n  copy: {\n    fp: '#pragma WebGL\\n\\nprecision highp float;\\nprecision highp int;\\n\\nvarying vec2 interp_texcoord;\\n\\nuniform sampler2D inputTexture0;\\nvoid main()\\n{\\n  gl_FragColor = texture2D(inputTexture0, interp_texcoord);\\n}\\n'\n  },\n  pixely_expand: {\n    fp: '// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\\n// Released under MIT License: https://opensource.org/licenses/MIT\\n#pragma WebGL\\n\\nprecision mediump float;\\nprecision mediump int;\\n\\nvarying highp vec2 interp_texcoord;\\nuniform sampler2D inputTexture0; // source\\nuniform sampler2D inputTexture1; // hblur\\nuniform sampler2D inputTexture2; // hblur+vblur\\nuniform vec4 orig_pixel_size;\\n\\n// 1D Gaussian.\\nfloat Gaus(float pos, float scale) {\\n  return exp2(scale*pos*pos);\\n}\\n\\nconst float SHADE = 0.75;\\nconst float EASING = 1.25;\\n\\n#define DO_WARP\\n#ifdef DO_WARP\\n// Display warp.\\n// 0.0 = none\\n// 1.0/8.0 = extreme\\nconst vec2 WARP=vec2(1.0/32.0,1.0/24.0);\\n\\n// Distortion of scanlines, and end of screen alpha.\\nvec2 Warp(vec2 pos){\\n  pos=pos*2.0-1.0;\\n  pos*=vec2(1.0+(pos.y*pos.y)*WARP.x,1.0+(pos.x*pos.x)*WARP.y);\\n  return pos*0.5+0.5;\\n}\\n#else\\n#define Warp(v) v\\n#endif\\n\\nfloat easeInOut(float v) {\\n  float va = pow(v, EASING);\\n  return va / (va + pow((1.0 - v), EASING));\\n}\\n\\nfloat easeIn(float v) {\\n  return 2.0 * easeInOut(0.5 * v);\\n}\\n\\nfloat easeOut(float v) {\\n  return 2.0 * easeInOut(0.5 + 0.5 * v) - 1.0;\\n}\\n\\nvoid main()\\n{\\n  vec2 texcoords = Warp(interp_texcoord);\\n  vec2 intcoords = (floor(texcoords.xy * orig_pixel_size.xy) + 0.5) * orig_pixel_size.zw;\\n  vec2 deltacoords = (texcoords.xy - intcoords) * orig_pixel_size.xy; // -0.5 ... 0.5\\n  // for horizontal sampling, map [-0.5 .. -A .. A .. 0.5] -> [-0.5 .. 0 .. 0 .. 0.5];\\n  float A = 0.25;\\n  float Ainv = (0.5 - A) * 2.0;\\n  float uoffs = clamp((abs(deltacoords.x) - A) / Ainv, 0.0, 1.0) * orig_pixel_size.z;\\n  uoffs *= sign(deltacoords.x);\\n  vec2 sample_coords = vec2(intcoords.x + uoffs, intcoords.y);\\n  // sample_coords = intcoords;\\n  vec3 color = texture2D(inputTexture1, sample_coords).rgb;\\n  vec3 color_scanline = texture2D(inputTexture2, texcoords.xy + vec2(0.0, 0.5 * orig_pixel_size.w)).rgb * SHADE;\\n  // color_scanline = vec3(0);\\n\\n  // float mask = Gaus(deltacoords.y, -12.0);\\n  float mask = easeOut(2.0*(0.5 - abs(deltacoords.y)));\\n  // float mask = abs(deltacoords.y) > 0.25 ? 0.0 : 1.0;\\n  color = mix(color_scanline, color, mask);\\n  // color = vec3(mask);\\n\\n#ifdef DO_WARP\\n  // vignette\\n  float dist = min(1.0, 100.0 * min(0.5 - abs(texcoords.x - 0.5), 0.5 - abs(texcoords.y - 0.5)));\\n  color *= dist;\\n#endif\\n\\n  gl_FragColor = vec4(color, 1.0);\\n  // gl_FragColor = vec4(color_scanline, 1.0);\\n  // gl_FragColor = vec4(sample_coords, 0.0, 1.0);\\n}\\n'\n  },\n  gaussian_blur: {\n    fp: '#pragma WebGL\\n\\nprecision highp float;\\nprecision highp int;\\n\\nvarying vec2 interp_texcoord;\\n\\nvec4 _ret_0;\\nvec4 _TMP2;\\nvec4 _TMP1;\\nvec2 _c0022;\\nvec2 _c0024;\\nuniform vec2 sampleRadius;\\nuniform sampler2D inputTexture0;\\nuniform float Gauss[9];\\n\\nvoid main()\\n{\\n  vec2 uv = interp_texcoord;\\n  vec2 step = sampleRadius;\\n  gl_FragColor =\\n    ((texture2D(inputTexture0, uv - step * 3.0) + texture2D(inputTexture0, uv + step * 3.0)) * 0.085625 +\\n    (texture2D(inputTexture0, uv - step * 2.0) + texture2D(inputTexture0, uv + step * 2.0)) * 0.12375 +\\n    (texture2D(inputTexture0, uv - step * 1.0) + texture2D(inputTexture0, uv + step * 1.0)) * 0.234375 +\\n    texture2D(inputTexture0, uv) * 0.3125) * 0.83333333333333333333333333333333;\\n}\\n'\n  },\n  // bloom_merge: {\n  //   fp: fs.readFileSync(`${__dirname}/shaders/effects_bloom_merge.fp`, 'utf8'),\n  // },\n  // bloom_threshold: {\n  //   fp: fs.readFileSync(`${__dirname}/shaders/effects_bloom_threshold.fp`, 'utf8'),\n  // },\n  color_matrix: {\n    fp: '#pragma WebGL\\n\\nprecision highp float;\\n\\nvarying vec2 interp_texcoord;\\n\\nuniform vec4 colorMatrix[3];\\nuniform sampler2D tex0;\\n\\nvoid main()\\n{\\n  vec4 _color;\\n  vec4 _mutc;\\n  _color = texture2D(tex0, interp_texcoord);\\n  _mutc = _color;\\n  _mutc.w = 1.0;\\n  vec3 _r0019;\\n  _r0019.x = dot(colorMatrix[0], _mutc);\\n  _r0019.y = dot(colorMatrix[1], _mutc);\\n  _r0019.z = dot(colorMatrix[2], _mutc);\\n  _mutc.xyz = _r0019;\\n  _mutc.w = _color.w;\\n  gl_FragColor = _mutc;\\n}'\n  }\n  // distort: {\n  //   fp: fs.readFileSync(`${__dirname}/shaders/effects_distort.fp`, 'utf8'),\n  // },\n};\n\nfunction getShader(key) {\n  let elem = shader_data[key];\n  if (!elem.shader) {\n    if (elem.fp) {\n      elem.shader = shaders.create(gl.FRAGMENT_SHADER, elem.fp);\n    } else {\n      elem.shader = shaders.create(gl.VERTEX_SHADER, elem.vp);\n    }\n  }\n  return elem.shader;\n}\n\nlet inited = false;\nlet clip_space = vec4(2, 2, -1, -1);\nlet copy_uv_scale = vec2(1, 1);\nlet shader_params_default = {\n  clip_space,\n  copy_uv_scale\n};\n// let shader_params_distort;\nlet shader_params_color_matrix;\n// let shader_params_bloom;\n// let shader_params_bloom_merge;\nlet shader_params_gaussian_blur;\nlet shader_params_pixely_expand;\nlet quad_geom;\nfunction startup() {\n  inited = true;\n\n  quad_geom = geom.create([[shaders.semantic.POSITION, gl.FLOAT, 2, false]], new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]), null, geom.QUADS); // TODO: use gl.TRIANGLE_STRIP instead, save index buffer binding\n\n  // shader_params_distort = {\n  //   clip_space,\n  //   copy_uv_scale,\n  //   strength: vec2(0, 0),\n  //   transform: new Float32Array([0, 0, 0, 0, 0, 0]),\n  //   invTransform: vec4(0, 0, 0, 0),\n  // };\n\n  shader_params_color_matrix = {\n    clip_space,\n    copy_uv_scale,\n    colorMatrix: new Float32Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])\n  };\n\n  // shader_params_bloom = {\n  //   clip_space,\n  //   copy_uv_scale,\n  //   bloomThreshold: 0,\n  //   thresholdCuttoff: 0,\n  // };\n\n  // shader_params_bloom_merge = {\n  //   clip_space,\n  //   copy_uv_scale,\n  //   bloomIntensity: 0,\n  //   bloomSaturation: 0,\n  //   originalIntensity: 0,\n  //   originalSaturation: 0,\n  // };\n\n  // Gaussian Blur effect (also used by bloom)\n  shader_params_gaussian_blur = {\n    clip_space,\n    copy_uv_scale,\n    sampleRadius: vec2(1, 1),\n    Gauss: new Float32Array([0.93, 0.8, 0.7, 0.6, 0.5, 0.4, 0.3, 0.2, 0.1])\n  };\n\n  shader_params_pixely_expand = {\n    clip_space,\n    copy_uv_scale,\n    orig_pixel_size: vec4()\n  };\n}\n\nexport function grayScaleMatrix(dst) {\n  dst[0] = 0.2126;\n  dst[1] = 0.2126;\n  dst[2] = 0.2126;\n  dst[3] = 0.7152;\n  dst[4] = 0.7152;\n  dst[5] = 0.7152;\n  dst[6] = 0.0722;\n  dst[7] = 0.0722;\n  dst[8] = 0.0722;\n  dst[9] = dst[10] = dst[11] = 0;\n}\n\nexport function sepiaMatrix(dst) {\n  dst[0] = 0.393;\n  dst[1] = 0.349;\n  dst[2] = 0.272;\n  dst[3] = 0.769;\n  dst[4] = 0.686;\n  dst[5] = 0.534;\n  dst[6] = 0.189;\n  dst[7] = 0.168;\n  dst[8] = 0.131;\n  dst[9] = dst[10] = dst[11] = 0;\n}\n\nexport function negativeMatrix(dst) {\n  dst[0] = dst[4] = dst[8] = -1;\n  dst[1] = dst[2] = dst[3] = dst[5] = dst[6] = dst[7] = 0;\n  dst[9] = dst[10] = dst[11] = 1;\n}\n\nexport function saturationMatrix(dst, saturationScale) {\n  let is = 1 - saturationScale;\n  dst[0] = is * 0.2126 + saturationScale;\n  dst[1] = is * 0.2126;\n  dst[2] = is * 0.2126;\n  dst[3] = is * 0.7152;\n  dst[4] = is * 0.7152 + saturationScale;\n  dst[5] = is * 0.7152;\n  dst[6] = is * 0.0722;\n  dst[7] = is * 0.0722;\n  dst[8] = is * 0.0722 + saturationScale;\n  dst[9] = dst[10] = dst[11] = 0;\n}\n\nexport function hueMatrix(dst, angle) {\n  ////\n  //// Uncomment to calculate new coeffecients should luminance\n  //// values 0.2126 0.7152 0.0722 change.\n  //let lumR = 0.2126;\n  //let lumG = 0.7152;\n  //let lumB = 0.0722;\n  ////\n  //let r23 = Math.sqrt(2 / 3);\n  //let r12 = 1 / Math.sqrt(2);\n  //let r13 = 1 / Math.sqrt(3);\n  //let r16 = 1 / Math.sqrt(6);\n  //let M = [r23, 0, r13, -r16, r12, r13, -r16, -r12, r13, 0, 0, 0];\n  //let zx = (r23 * lumR) - (r16 * lumG) - (r16 * lumB);\n  //let zy =                (r12 * lumG) - (r12 * lumB);\n  //let zz = (r13 * lumR) + (r13 * lumG) + (r13 * lumB);\n  //let x = zx / zz;\n  //let y = zy / zz;\n  //let C = [1, 0, x, 0, 1, y, 0, 0, 1, 0, 0, 0];\n  //m43mul(M, M, C);\n  //console.log(\"Pre transform = \", M);\n  //let E = [1, 0, -x, 0, 1, -y, 0, 0, 1, 0, 0, 0];\n  //let N = [r23, -r16, -r16, 0, r12, -r12, r13, r13, r13, 0, 0, 0];\n  //m43mul(N, E, N);\n  //console.log(\"Post transform = \", N);\n  ////\n  //// Final matrix is then: m43Mul(Pre, [c, s, 0, -s, c, 0, 0, 0, 1, 0, 0, 0, ], Post);\n  //// for c = cos(angle), s = sin(angle)\n  ////\n  //let out = \"\";\n  //out += \"let c = Math.cos(angle);\\n\";\n  //out += \"let s = Math.sin(angle);\\n\";\n  //out += \"dst[0] = (\" + (N[0]*M[0]+N[3]*M[1]) + \" * c) + (\" + (N[3]*M[0]-N[0]*M[1]) + \" * s) + \" + lumR+\";\\n\";\n  //out += \"dst[1] = (\" + (-lumR)               + \" * c) + (\" + (N[4]*M[0]-N[1]*M[1]) + \" * s) + \" + lumR+\";\\n\";\n  //out += \"dst[2] = (\" + (-lumR)               + \" * c) + (\" + (N[5]*M[0]-N[2]*M[1]) + \" * s) + \" + lumR+\";\\n\";\n  //out += \"dst[3] = (\" + (-lumG)               + \" * c) + (\" + (N[3]*M[3]-N[0]*M[4]) + \" * s) + \" + lumG+\";\\n\";\n  //out += \"dst[4] = (\" + (N[1]*M[3]+N[4]*M[4]) + \" * c) + (\" + (N[4]*M[3]-N[1]*M[4]) + \" * s) + \" + lumG+\";\\n\";\n  //out += \"dst[5] = (\" + (-lumG)               + \" * c) + (\" + (N[5]*M[3]-N[2]*M[4]) + \" * s) + \" + lumG+\";\\n\";\n  //out += \"dst[6] = (\" + (-lumB)               + \" * c) + (\" + (N[3]*M[6]-N[0]*M[7]) + \" * s) + \" + lumB+\";\\n\";\n  //out += \"dst[7] = (\" + (-lumB)               + \" * c) + (\" + (N[4]*M[6]-N[1]*M[7]) + \" * s) + \" + lumB+\";\\n\";\n  //out += \"dst[8] = (\" + (N[2]*M[6]+N[5]*M[7]) + \" * c) + (\" + (N[5]*M[6]-N[2]*M[7]) + \" * s) + \" + lumB+\";\\n\";\n  //console.log(out);\n  let c = Math.cos(angle);\n  let s = Math.sin(angle);\n  dst[0] = 0.7874 * c + -0.3712362230889293 * s + 0.2126;\n  dst[1] = -0.2126 * c + 0.20611404610069642 * s + 0.2126;\n  dst[2] = -0.2126 * c + -0.9485864922785551 * s + 0.2126;\n  dst[3] = -0.7152 * c + -0.4962902913954023 * s + 0.7152;\n  dst[4] = 0.2848 * c + 0.08105997779422341 * s + 0.7152;\n  dst[5] = -0.7152 * c + 0.6584102469838492 * s + 0.7152;\n  dst[6] = -0.0722 * c + 0.8675265144843316 * s + 0.0722;\n  dst[7] = -0.0722 * c + -0.28717402389491986 * s + 0.0722;\n  dst[8] = 0.9278 * c + 0.290176245294706 * s + 0.0722;\n  dst[9] = dst[10] = dst[11] = 0;\n}\n\nexport function brightnessAddMatrix(dst, brightnessOffset) {\n  dst[0] = dst[4] = dst[8] = 1;\n  dst[1] = dst[2] = dst[3] = dst[5] = dst[6] = dst[7] = 0;\n  dst[9] = dst[10] = dst[11] = brightnessOffset;\n}\n\nexport function brightnessScaleMatrix(dst, scale) {\n  dst[0] = dst[4] = dst[8] = scale;\n  dst[1] = dst[2] = dst[3] = dst[5] = dst[6] = dst[7] = 0;\n  dst[9] = dst[10] = dst[11] = 0;\n}\n\nexport function additiveMatrix(dst, additiveRGB) {\n  dst[0] = dst[4] = dst[8] = 1;\n  dst[1] = dst[2] = dst[3] = dst[5] = dst[6] = dst[7] = 0;\n  dst[9] = additiveRGB[0];\n  dst[10] = additiveRGB[1];\n  dst[11] = additiveRGB[2];\n}\n\nexport function contrastMatrix(dst, contrastScale) {\n  dst[0] = dst[4] = dst[8] = contrastScale;\n  dst[1] = dst[2] = dst[3] = dst[5] = dst[6] = dst[7] = 0;\n  dst[9] = dst[10] = dst[11] = 0.5 * (1 - contrastScale);\n}\n\n// effect: { shader, params, texs }\nfunction applyEffect(effect, view_w, view_h) {\n  let viewport = engine.viewport;\n  let target_w = viewport[2];\n  let target_h = viewport[3];\n  view_w = view_w || target_w;\n  view_h = view_h || target_h;\n\n  // Set values for parameters used by all effects\n  clip_space[0] = 2.0 * view_w / target_w;\n  clip_space[1] = 2.0 * view_h / target_h;\n  // clip_space[2] = -1.0;\n  // clip_space[3] = -1.0;\n  // copy_uv_scale[0] = target_w / effect.coord_source.width;\n  // copy_uv_scale[1] = target_h / effect.coord_source.height;\n\n  shaders.bind(getShader('vp_copy'), getShader(effect.shader), effect.params);\n  textures.bindArray(effect.texs);\n  quad_geom.draw();\n}\n\n// // TODO: Update for RTBBCTT and port to new GLOV.js\n// function applyBloomTODO(params) {\n//   let source = params.source;\n//   let blur1 = params.blurTarget1;\n//   let blur2 = params.blurTarget2;\n//   let dest = params.destination;\n//   if (!source || !dest || !blur1 || !blur2 || !blur1.colorTexture0 ||\n//     !blur2.colorTexture0 || blur1 === blur2 || blur1 === dest ||\n//     source === blur1.colorTexture0 || source === dest.colorTexture0) {\n//     return false;\n//   }\n//\n//   let effectParams = this.effectParams;\n//   let techparams;\n//\n//   // Threshold copy.\n//   techparams = this.bloomThresholdParameters;\n//   effectParams.technique = this.bloomThresholdTechnique;\n//   effectParams.params = techparams;\n//\n//   techparams.bloomThreshold = (params.bloomThreshold !== undefined) ? params.bloomThreshold : 0.65;\n//   techparams.thresholdCutoff = Math.exp((params.thresholdCutoff !== undefined) ? params.thresholdCutoff : 3);\n//   techparams.inputTexture0 = source;\n//   effectParams.destination = blur1;\n//   this.applyEffect(effectParams);\n//\n//   // Gaussian blur.\n//   techparams = this.gaussianBlurParameters;\n//   effectParams.technique = this.gaussianBlurTechnique;\n//   effectParams.params = techparams;\n//\n//   let sampleRadius = (params.blurRadius || 20);\n//   techparams.sampleRadius[0] = sampleRadius / source.width;\n//   techparams.sampleRadius[1] = 0;\n//   techparams.inputTexture0 = blur1.colorTexture0;\n//   effectParams.destination = blur2;\n//   this.applyEffect(effectParams);\n//\n//   techparams.sampleRadius[0] = 0;\n//   techparams.sampleRadius[1] = sampleRadius / source.height;\n//   techparams.inputTexture0 = blur2.colorTexture0;\n//   effectParams.destination = blur1;\n//   this.applyEffect(effectParams);\n//\n//   // Merge.\n//   techparams = this.bloomMergeParameters;\n//   effectParams.technique = this.bloomMergeTechnique;\n//   effectParams.params = techparams;\n//\n//   techparams.bloomIntensity = (params.bloomIntensity !== undefined) ? params.bloomIntensity : 1.2;\n//   techparams.bloomSaturation = (params.bloomSaturation !== undefined) ? params.bloomSaturation : 1.2;\n//   techparams.originalIntensity = (params.originalIntensity !== undefined) ? params.originalIntensity : 1.0;\n//   techparams.originalSaturation = (params.originalSaturation !== undefined) ? params.originalSaturation : 1.0;\n//   techparams.inputTexture0 = source;\n//   techparams.inputTexture1 = blur1.colorTexture0;\n//   effectParams.destination = dest;\n//   this.applyEffect(effectParams);\n//\n//   return true;\n// }\n\nexport function applyCopy(params) {\n  if (!inited) {\n    startup();\n  }\n  applyEffect({\n    shader: 'copy',\n    params: shader_params_default,\n    texs: [params.source]\n  });\n}\n\nexport function applyPixelyExpand(params) {\n  if (!inited) {\n    startup();\n  }\n  let source = params.source;\n  source.setSamplerState({\n    filter_min: gl.LINEAR,\n    filter_mag: gl.LINEAR,\n    wrap_s: gl.CLAMP_TO_EDGE,\n    wrap_t: gl.CLAMP_TO_EDGE\n  });\n\n  // do horizontal blur for primary lines\n  let resx = source.width;\n  let resy = source.height;\n  let sampleRadius = (params.hblur || 0.25) / resx;\n  shader_params_gaussian_blur.sampleRadius[0] = sampleRadius;\n  shader_params_gaussian_blur.sampleRadius[1] = 0;\n  applyEffect({\n    shader: 'gaussian_blur',\n    params: shader_params_gaussian_blur,\n    texs: [source]\n  }, resx, resy);\n  let hblur = engine.captureFramebuffer(null, resx, resy, true, false);\n\n  // do seperable gaussian blur for scanlines (using horizontal blur from above)\n  sampleRadius = (params.vblur || 0.75) / resy;\n  shader_params_gaussian_blur.sampleRadius[0] = 0;\n  shader_params_gaussian_blur.sampleRadius[1] = sampleRadius;\n  applyEffect({\n    shader: 'gaussian_blur',\n    params: shader_params_gaussian_blur,\n    texs: [hblur]\n  }, resx, resy);\n  let vblur = engine.captureFramebuffer(null, resx, resy, true, false);\n\n  // combine at full res\n  v4set(shader_params_pixely_expand.orig_pixel_size, source.width, source.height, 1 / source.width, 1 / source.height);\n\n  engine.setViewport(params.final_viewport);\n  if (params.clear_color) {\n    gl.clearColor(params.clear_color[0], params.clear_color[1], params.clear_color[2], params.clear_color[3]);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n  }\n\n  applyEffect({\n    shader: 'pixely_expand',\n    params: shader_params_pixely_expand,\n    texs: [source, hblur, vblur]\n  });\n}\n\nexport function applyGaussianBlur(params) {\n  if (!inited) {\n    startup();\n  }\n  let source = params.source;\n  source.setSamplerState({\n    filter_min: gl.LINEAR,\n    filter_mag: gl.LINEAR,\n    wrap_s: gl.CLAMP_TO_EDGE,\n    wrap_t: gl.CLAMP_TO_EDGE\n  });\n  let max_size = params.max_size || 512;\n  let min_size = params.min_size || 128;\n\n  // Quick shrink down to 512->256->128 (or other specified min/max size)\n  let inputTexture0 = source;\n\n  let viewport = engine.viewport;\n  let res = max_size;\n  while (res > viewport[2] || res > viewport[3]) {\n    res /= 2;\n  }\n\n  while (res > min_size) {\n    applyEffect({\n      shader: 'copy',\n      params: shader_params_default,\n      texs: [inputTexture0]\n    }, res, res);\n    inputTexture0 = engine.captureFramebuffer(null, res, res, true, false);\n    res /= 2;\n  }\n\n  // Do seperable blur\n  let sampleRadius = (params.blur || 1) / res;\n  shader_params_gaussian_blur.sampleRadius[0] = sampleRadius;\n  shader_params_gaussian_blur.sampleRadius[1] = 0;\n  applyEffect({\n    shader: 'gaussian_blur',\n    params: shader_params_gaussian_blur,\n    texs: [inputTexture0]\n  }, res, res);\n  let blur = engine.captureFramebuffer(null, res, res, true, false);\n\n  shader_params_gaussian_blur.sampleRadius[0] = 0;\n  shader_params_gaussian_blur.sampleRadius[1] = sampleRadius;\n  applyEffect({\n    shader: 'gaussian_blur',\n    params: shader_params_gaussian_blur,\n    texs: [blur]\n  });\n\n  return true;\n}\n\nexport function applyColorMatrix(params) {\n  if (!inited) {\n    startup();\n  }\n  let source = params.source;\n  source.setSamplerState({\n    filter_min: gl.LINEAR,\n    filter_mag: gl.LINEAR,\n    wrap_s: gl.CLAMP_TO_EDGE,\n    wrap_t: gl.CLAMP_TO_EDGE\n  });\n\n  let matrix = params.colorMatrix;\n  let mout = shader_params_color_matrix.colorMatrix;\n\n  mout[0] = matrix[0];\n  mout[1] = matrix[3];\n  mout[2] = matrix[6];\n  mout[3] = matrix[9];\n  mout[4] = matrix[1];\n  mout[5] = matrix[4];\n  mout[6] = matrix[7];\n  mout[7] = matrix[10];\n  mout[8] = matrix[2];\n  mout[9] = matrix[5];\n  mout[10] = matrix[8];\n  mout[11] = matrix[11];\n\n  applyEffect({\n    shader: 'color_matrix',\n    params: shader_params_color_matrix,\n    texs: [source]\n  });\n\n  return true;\n}\n\n// // TODO: Update for RTBBCTT and port to new GLOV.js\n// export function applyDistortTODO(params) {\n//   let source = params.source;\n//   let dest = params.destination;\n//   let distort = params.distortion;\n//   if (!source || !dest || !distort || !dest.colorTexture0 ||\n//     source === dest.colorTexture0 || distort === dest.colorTexture0) {\n//     return false;\n//   }\n//\n//   // input transform.\n//   //  a b tx\n//   //  c d ty\n//   let a;\n//   let b;\n//   let c;\n//   let d;\n//   let tx;\n//   let ty;\n//\n//   let transform = params.transform;\n//   if (transform) {\n//     // transform col-major.\n//     a = transform[0];\n//     b = transform[2];\n//     tx = transform[4];\n//     c = transform[1];\n//     d = transform[3];\n//     ty = transform[5];\n//   } else {\n//     a = d = 1;\n//     b = c = 0;\n//     tx = ty = 0;\n//   }\n//\n//   let effectParams = this.effectParams;\n//   let techparams = this.distortParameters;\n//   effectParams.technique = this.distortTechnique;\n//   effectParams.params = techparams;\n//\n//   // TODO: Cache 'transform', 'invTransform', etc in the code below\n//   techparams.transform[0] = a;\n//   techparams.transform[1] = b;\n//   techparams.transform[2] = tx;\n//   techparams.transform[3] = c;\n//   techparams.transform[4] = d;\n//   techparams.transform[5] = ty;\n//\n//   // Compute inverse transform to use in distort texture displacement..\n//   let idet = 1 / (a * d - b * c);\n//   let ia = techparams.invTransform[0] = (idet * d);\n//   let ib = techparams.invTransform[1] = (idet * -b);\n//   let ic = techparams.invTransform[2] = (idet * -c);\n//   let id = techparams.invTransform[3] = (idet * a);\n//\n//   // Compute max pixel offset after transform for normalisation.\n//   let x1 = ((ia + ib) * (ia + ib)) + ((ic + id) * (ic + id));\n//   let x2 = ((ia - ib) * (ia - ib)) + ((ic - id) * (ic - id));\n//   let x3 = ((-ia + ib) * (-ia + ib)) + ((-ic + id) * (-ic + id));\n//   let x4 = ((-ia - ib) * (-ia - ib)) + ((-ic - id) * (-ic - id));\n//   let xmax = 0.5 * Math.sqrt(Math.max(x1, x2, x3, x4));\n//\n//   let strength = (params.strength || 10);\n//   techparams.strength[0] = strength / (source.width * xmax);\n//   techparams.strength[1] = strength / (source.height * xmax);\n//\n//   techparams.inputTexture0 = source;\n//   techparams.distortTexture = distort; // linear / repeat\n//   effectParams.destination = dest;\n//   this.applyEffect(effectParams);\n//\n//   return true;\n// }","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\n/* eslint-env browser */\n/* global Z:false */\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst effects = require('./effects.js');\nconst glov_font = require('./font.js');\nconst font_info_palanquin32 = require('../img/font/palanquin32.json');\nconst geom = require('./geom.js');\nconst input = require('./input.js');\nconst local_storage = require('./local_storage.js');\nconst mat3FromMat4 = require('gl-mat3/fromMat4');\nconst mat4Copy = require('gl-mat4/copy');\nconst mat4Invert = require('gl-mat4/invert');\nconst mat4Mul = require('gl-mat4/multiply');\nconst mat4Transpose = require('gl-mat4/transpose');\nconst mat4Perspective = require('gl-mat4/perspective');\nconst { asin, cos, min, max, PI, sin, sqrt } = Math;\nconst shaders = require('./shaders.js');\nconst sprites = require('./sprites.js');\nconst textures = require('./textures.js');\nconst glov_transition = require('./transition.js');\nconst glov_ui = require('./ui.js');\nconst { mat3, mat4, vec3, vec4, v3mulMat4, v3normalize, v4copy } = require('./vmath.js');\n\nlet canvas;\nexport let glov_particles;\nexport let sound_manager;\n\nexport let width;\nexport let height;\nexport let pixel_aspect = 1;\nlet clear_bits;\n\nexport let game_width;\nexport let game_height;\n\nexport let render_width;\nexport let render_height;\n\nexport let defines = {};\n\nexport const ZFAR = 10000;\nexport const fov_y = 45 * PI / 180;\nexport let fov_x = 1;\n\nexport let mat_projection = mat4();\nexport let mat_view = mat4();\nlet mat_m = mat4();\nlet mat_vp = mat4();\nlet mat_mv = mat4();\nlet mat_mvp = mat4();\nlet mat_mv_inv_transform = mat3();\n\nexport let light_diffuse = vec3(0.75, 0.75, 0.75);\nlet light_dir_vs = vec3(0, 0, 0);\nlet light_ambient = vec3(0.25, 0.25, 0.25);\nexport let light_dir_ws = vec3(-1, -2, -3);\n\nexport let font;\nexport let app_state = null;\nexport const pico8_colors = [vec4(0, 0, 0, 1), vec4(0.114, 0.169, 0.326, 1), vec4(0.494, 0.145, 0.326, 1), vec4(0.000, 0.529, 0.328, 1), vec4(0.671, 0.322, 0.212, 1), vec4(0.373, 0.341, 0.310, 1), vec4(0.761, 0.765, 0.780, 1), vec4(1.000, 0.945, 0.910, 1), vec4(1.000, 0.000, 0.302, 1), vec4(1.000, 0.639, 0.000, 1), vec4(1.000, 0.925, 0.153, 1), vec4(0.000, 0.894, 0.212, 1), vec4(0.161, 0.678, 1.000, 1), vec4(0.514, 0.463, 0.612, 1), vec4(1.000, 0.467, 0.659, 1), vec4(1.000, 0.800, 0.667, 1)];\n\nexport let fps_style = glov_font.style({\n  outline_width: 2, outline_color: 0x00000080,\n  color: 0xFFFFFFff\n});\n\nexport function setGlobalMatrices(_mat_view) {\n  mat4Copy(mat_view, _mat_view);\n  mat4Mul(mat_vp, mat_projection, mat_view);\n  v3normalize(light_dir_ws, light_dir_ws);\n  v3mulMat4(light_dir_vs, light_dir_ws, mat_view);\n}\n\nlet mat_temp = mat4();\nexport function updateMatrices(mat_model) {\n  // PERFTODO: depending on rendering path, only some of these are needed (m + vp or just mvp)\n  mat4Copy(mat_m, mat_model);\n\n  mat4Mul(mat_mv, mat_view, mat_model);\n  mat4Mul(mat_mvp, mat_projection, mat_mv);\n  // TODO: Can expand and simplify all of this, especially below\n  mat4Invert(mat_temp, mat_mv);\n  mat4Transpose(mat_temp, mat_temp);\n  mat3FromMat4(mat_mv_inv_transform, mat_temp);\n}\n\n// *Maybe* don't need this logic anymore, postprocessing has been improved to be\n// efficient on all devices.\nconst postprocessing_reset_version = '2';\nexport let postprocessing = local_storage.get('glov_no_postprocessing') !== postprocessing_reset_version;\nexport function postprocessingAllow(allow) {\n  local_storage.set('glov_no_postprocessing', allow ? undefined : postprocessing_reset_version);\n  postprocessing = allow;\n}\n\nlet global_timer = 0;\nexport function getFrameTimestamp() {\n  return global_timer;\n}\n\nlet global_frame_index = 0;\nexport function getFrameIndex() {\n  return global_frame_index;\n}\n\nlet this_frame_time = 0;\nexport function getFrameDt() {\n  return this_frame_time;\n}\n\n// Wall time, may contain large jumps, may be 0 or negative\nlet this_frame_time_actual = 0;\nexport function getFrameDtActual() {\n  return this_frame_time_actual;\n}\n\nlet after_loading_state = null;\nexport let is_loading = true;\nexport function setState(new_state) {\n  if (is_loading) {\n    after_loading_state = new_state;\n  } else {\n    app_state = new_state;\n  }\n}\n\nlet mspf = 1000;\nlet mspf_update_time = Date.now();\nlet mspf_frame_count = 0;\nlet show_fps = true;\n\nlet do_borders = true;\nlet do_viewport_postprocess = false;\nlet need_repos = 0;\n\nlet app_tick_functions = [];\nexport function addTickFunc(cb) {\n  app_tick_functions.push(cb);\n}\n\nlet temporary_textures = {};\n\nfunction resetEffects() {\n  for (let key in temporary_textures) {\n    let temp = temporary_textures[key];\n    // Release unused textures\n    while (temp.list.length > temp.idx) {\n      temp.list.pop().destroy();\n    }\n    if (!temp.idx) {\n      delete temporary_textures[key];\n    } else {\n      temp.idx = 0;\n    }\n  }\n}\n\nexport let viewport = vec4(0, 0, 1, 1);\nexport function setViewport(xywh) {\n  v4copy(viewport, xywh);\n  gl.viewport(xywh[0], xywh[1], xywh[2], xywh[3]);\n}\n\nexport function getTemporaryTexture(w, h) {\n  let key = w ? `${w}_${h}` : 'screen';\n  let temp = temporary_textures[key];\n  if (!temp) {\n    temp = temporary_textures[key] = { list: [], idx: 0 };\n  }\n  if (temp.idx >= temp.list.length) {\n    let tex = textures.createForCapture();\n    temp.list.push(tex);\n  }\n  let tex = temp.list[temp.idx++];\n  tex.override_sampler = null; // in case the previous user set it\n  return tex;\n}\n\nexport function captureFramebuffer(tex, w, h, do_filter_linear, do_wrap) {\n  if (!w && render_width) {\n    w = render_width;\n    h = render_height;\n  }\n  if (!tex) {\n    tex = getTemporaryTexture(w, h);\n  }\n  if (w) {\n    tex.copyTexImage(viewport[0], viewport[1], w, h);\n  } else {\n    tex.copyTexImage(0, 0, width, height);\n  }\n  tex.setSamplerState({\n    filter_min: do_filter_linear ? gl.LINEAR : gl.NEAREST,\n    filter_mag: do_filter_linear ? gl.LINEAR : gl.NEAREST,\n    wrap_s: do_wrap ? gl.REPEAT : gl.CLAMP_TO_EDGE,\n    wrap_t: do_wrap ? gl.REPEAT : gl.CLAMP_TO_EDGE\n  });\n  return tex;\n}\n\nlet last_tick = Date.now();\nfunction tick() {\n  let now = Date.now();\n  requestAnimationFrame(tick);\n  this_frame_time_actual = now - last_tick;\n  let dt = min(max(this_frame_time_actual, 1), 250);\n  this_frame_time = dt;\n  last_tick = now;\n  global_timer += dt;\n  ++global_frame_index;\n\n  ++mspf_frame_count;\n  if (now - mspf_update_time > 1000) {\n    mspf = (now - mspf_update_time) / mspf_frame_count;\n    mspf_frame_count = 0;\n    mspf_update_time = now;\n    // if (show_fps && fps_elem) {\n    //   fps_elem.innerText = `${(1000 / mspf).toFixed(0)}fps (${mspf.toFixed(1)} ms/f)`;\n    // }\n  }\n\n  if (document.hidden || document.webkitHidden) {\n    resetEffects();\n    return;\n  }\n\n  width = canvas.width;\n  height = canvas.height;\n\n  let rise = width / height * sin(fov_y / 2) / cos(fov_y / 2);\n  fov_x = 2 * asin(rise / sqrt(rise * rise + 1));\n  mat4Perspective(mat_projection, fov_y, width / height, 0.7, ZFAR);\n  gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n  gl.enable(gl.BLEND);\n  gl.enable(gl.DEPTH_TEST);\n  textures.bind(0, textures.textures.error);\n\n  camera2d.tick();\n  camera2d.setAspectFixed(game_width, game_height);\n\n  sound_manager.tick(dt);\n  input.tick();\n  glov_ui.tick(dt);\n\n  if (need_repos) {\n    --need_repos;\n    let ul = [];\n    camera2d.virtualToPhysical(ul, [0, 0]);\n    let lr = [];\n    camera2d.virtualToPhysical(lr, [game_width - 1, game_height - 1]);\n    let viewport2 = [ul[0], ul[1], lr[0], lr[1]];\n    let view_height = viewport2[3] - viewport2[1];\n    // default font size of 16 when at height of game_height\n    let font_size = Math.min(256, Math.max(2, Math.floor(view_height / 800 * 16)));\n    document.getElementById('fullscreen').style['font-size'] = `${font_size}px`;\n  }\n\n  if (do_borders) {\n    // Borders\n    glov_ui.drawRect(camera2d.x0(), camera2d.y0(), camera2d.x1(), 0, Z.BORDERS, pico8_colors[0]);\n    glov_ui.drawRect(camera2d.x0(), game_height, camera2d.x1(), camera2d.y1(), Z.BORDERS, pico8_colors[0]);\n    glov_ui.drawRect(camera2d.x0(), 0, 0, game_height, Z.BORDERS, pico8_colors[0]);\n    glov_ui.drawRect(game_width, 0, camera2d.x1(), game_height, Z.BORDERS, pico8_colors[0]);\n  }\n\n  for (let ii = 0; ii < app_tick_functions.length; ++ii) {\n    app_tick_functions[ii](dt);\n  }\n  if (app_state) {\n    app_state(dt);\n  }\n  if (show_fps) {\n    camera2d.setAspectFixed(game_width, game_height);\n    font.drawSizedAligned(fps_style, camera2d.x0(), camera2d.y0(), Z.FPSMETER, glov_ui.font_height, glov_font.ALIGN.HRIGHT, camera2d.w(), 0, `FPS: ${(1000 / mspf).toFixed(1)} (${mspf.toFixed(0)}ms/f)`);\n  }\n\n  glov_particles.tick(dt); // *after* app_tick, so newly added/killed particles can be queued into the draw list\n  glov_transition.render(dt);\n\n  // Above is queuing, below is actual drawing\n\n  gl.viewport(viewport[0], viewport[1], viewport[2], viewport[3]);\n  // gl.scissor(0, 0, viewport[2] - viewport[0], viewport[3] - viewport[1]);\n  gl.clear(clear_bits);\n\n  sprites.draw();\n\n  glov_ui.endFrame();\n\n  if (render_width) {\n    let source = captureFramebuffer();\n    let clear_color = [0, 0, 0, 1];\n    let final_viewport = [camera2d.render_offset_x, camera2d.render_offset_y, camera2d.render_viewport_w, camera2d.render_viewport_h];\n    if (do_viewport_postprocess) {\n      effects.applyPixelyExpand({ source, final_viewport, clear_color });\n    } else {\n      if (clear_color) {\n        gl.clearColor(clear_color[0], clear_color[1], clear_color[2], clear_color[3]);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n      }\n      setViewport(final_viewport);\n      // gl.scissor(0, 0, width, height);\n      effects.applyCopy({ source });\n    }\n  }\n\n  input.endFrame();\n  resetEffects();\n}\n\nexport function startup(params) {\n  // globals for leftover Turbulenz bits\n  window.TurbulenzEngine = null;\n  window.assert = assert;\n\n  canvas = params.canvas;\n  assert(gl);\n  canvas.focus();\n  game_width = params.game_width || 1280;\n  game_height = params.game_height || 960;\n  if (params.pixely === 'strict') {\n    render_width = game_width;\n    render_height = game_height;\n    if (params.viewport_postprocess) {\n      do_viewport_postprocess = true;\n    }\n  } else {\n    render_width = undefined;\n    render_height = undefined;\n  }\n  pixel_aspect = params.pixel_aspect || 1;\n\n  gl.depthFunc(gl.LEQUAL);\n  // gl.enable(gl.SCISSOR_TEST);\n  gl.enable(gl.CULL_FACE);\n  gl.cullFace(gl.BACK);\n  gl.clearColor(0, 0.1, 0.2, 1);\n\n  // Use &D=WIREFRAME to set the WIREFRAME define\n  let m = document.location.search.match(/D=[^&]+/gu);\n  if (m) {\n    m.forEach(v => {\n      defines[v.slice(2)] = true;\n    });\n  }\n\n  textures.startup();\n  geom.startup();\n  shaders.startup({\n    light_diffuse,\n    light_dir_vs,\n    ambient: light_ambient,\n    mat_m: mat_m,\n    mat_vp: mat_vp,\n    mvp: mat_mvp,\n    mv_inv_trans: mat_mv_inv_transform,\n    view: mat_view,\n    projection: mat_projection\n  });\n  camera2d.startup();\n  sprites.startup();\n  input.startup(canvas);\n\n  // eslint-disable-next-line no-bitwise\n  clear_bits = gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT;\n\n  /* eslint-disable global-require */\n  glov_particles = require('./particles.js').create();\n\n  if (params.pixely && params.pixely !== 'off') {\n    textures.defaultFilters(gl.NEAREST, gl.NEAREST);\n  } else {\n    textures.defaultFilters(gl.LINEAR, gl.LINEAR);\n  }\n\n  sound_manager = require('./sound_manager.js').create();\n\n  const font_info_04b03x2 = require('../img/font/04b03_8x2.json');\n  const font_info_04b03x1 = require('../img/font/04b03_8x1.json');\n  if (params.font) {\n    font = glov_font.create(params.font.info, params.font.texture);\n  } else if (params.pixely === 'strict') {\n    font = glov_font.create(font_info_04b03x1, 'font/04b03_8x1');\n  } else if (params.pixely) {\n    font = glov_font.create(font_info_04b03x2, 'font/04b03_8x2');\n  } else {\n    font = glov_font.create(font_info_palanquin32, 'font/palanquin32');\n  }\n  glov_ui.startup(font, params.ui_sprites);\n  glov_ui.bindSounds(sound_manager, { // TODO: Allow overriding?\n    button_click: 'button_click',\n    rollover: 'rollover'\n  });\n\n  camera2d.setAspectFixed(game_width, game_height);\n\n  function onResize() {\n    // This used to be here, but it breaks mobile devices / edit boxes\n    //canvas.focus();\n\n    // For the next 10 frames, make sure font size is correct\n    need_repos = 10;\n  }\n  window.addEventListener('resize', onResize, false);\n  onResize();\n\n  if (params.state) {\n    setState(params.state);\n  }\n  if (params.do_borders !== undefined) {\n    do_borders = params.do_borders;\n  }\n  if (params.show_fps !== undefined) {\n    show_fps = params.show_fps;\n  }\n\n  requestAnimationFrame(tick);\n}\n\nfunction loading() {\n  let load_count = textures.load_count + sound_manager.loading() /* + models.load_count */;\n  document.getElementById('loading_text').innerText = `Loading (${load_count})...`;\n  if (!load_count) {\n    let elem = document.getElementById('loading');\n    elem.style.visibility = 'hidden';\n    is_loading = false;\n    app_state = after_loading_state;\n  }\n}\napp_state = loading;\n\nwindow.glov_engine = exports;","/* eslint no-bitwise:off */\n/* eslint complexity:off */\n/* eslint no-shadow:off */\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\n\nconst { floor, max, round } = Math;\nconst shaders = require('./shaders.js');\nconst sprites = require('./sprites.js');\nconst textures = require('./textures.js');\nconst { clamp, vec4, v4clone, v4scale } = require('./vmath.js');\n\n/*\n\nfont_style = glov_font.style(null, {\n  color: 0xFFFFFFff,\n  outline_width: 0,\n  outline_color: 0x00000000,\n  glow_xoffs: 0,\n  glow_yoffs: 0,\n  glow_inner: 0,\n  glow_outer: 0,\n  glow_color: 0x000000ff,\n});\n\n */\n\n// typedef struct FontCharInfo {\n//   int c;\n//   float x0;\n//   float y0;\n//   int w;\n//   int h;\n//   int imgIdx;\n// } FontCharInfo;\n\n// typedef struct FontInfo {\n//   AS_NAME(CharInfo) FontCharInfo **char_infos;\n//   int font_size;\n//   float x0;\n//   float y0;\n//   int imageW;\n//   int imageH;\n//   int spread;\n// } FontInfo;\n\nexport const COLOR_MODE = {\n  SINGLE: 0,\n  GRADIENT: 1\n};\n\nexport const ALIGN = {\n  HLEFT: 0,\n  HCENTER: 1,\n  HRIGHT: 2,\n  HMASK: 3,\n\n  VTOP: 0 << 2,\n  VCENTER: 1 << 2,\n  VBOTTOM: 2 << 2,\n  VMASK: 3 << 2,\n\n  HFIT: 1 << 4,\n  HWRAP: 1 << 5, // only for glovMarkup*, not drawSizedAligned below, use drawSizedWrapped below instead\n\n  HCENTERFIT: 1 | 1 << 4,\n  HVCENTER: 1 | 1 << 2, // to avoid doing bitwise ops elsewhere\n  HVCENTERFIT: 1 | 1 << 2 | 1 << 4 // to avoid doing bitwise ops elsewhere\n};\n\n// typedef struct GlovFontStyle\n// {\n//   // These members will never be changed (safe to initialize with GlovFontStyle foo = {1.0, 0xfff, etc};\n//   float outline_width;\n//   U32 outline_color;\n//   // Glow: can be used for a dropshadow as well\n//   //   inner can be negative to have the glow be less opaque (can also just change the alpha of the glow color)\n//   //   a glow would be e.g. (0, 0, -1, 5)\n//   //   a dropshadow would be e.g. (3.25, 3.25, -2.5, 5)\n//   float glow_xoffs;\n//   float glow_yoffs;\n//   float glow_inner;\n//   float glow_outer;\n//   U32 glow_color;\n//   U32 color; // upper left, or single color\n//   U32 colorUR; // upper right\n//   U32 colorLR; // lower right\n//   U32 colorLL; // lower left\n//   GlovFontColorMode color_mode;\n// } GlovFontStyle;\n\n/* Default GlovFontStyle:\n  font_style = {\n    outline_width: 0, outline_color: 0x00000000,\n    glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 0, glow_color: 0x00000000,\n    color: 0xFFFFFFff\n  };\n\n  font_style = {\n    outline_width: 0, outline_color: 0x00000000,\n    glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 0, glow_color: 0x00000000,\n    // Color gradient: UL, UR, LR, LL\n    color: 0xFFFFFFff, colorUR: 0xFFFFFFff, colorLR: 0x000000ff, colorLL: 0x000000ff,\n    color_mode: glov_font.COLOR_MODE.GRADIENT,\n  };\n*/\n\nfunction GlovFontDefaultStyle() {\n  // Empty constructor\n}\nGlovFontDefaultStyle.prototype.outline_width = 0;\nGlovFontDefaultStyle.prototype.outline_color = 0x00000000;\nGlovFontDefaultStyle.prototype.glow_xoffs = 0;\nGlovFontDefaultStyle.prototype.glow_yoffs = 0;\nGlovFontDefaultStyle.prototype.glow_inner = 0;\nGlovFontDefaultStyle.prototype.glow_outer = 0;\nGlovFontDefaultStyle.prototype.glow_color = 0x00000000;\nGlovFontDefaultStyle.prototype.color = 0xFFFFFFff;\nGlovFontDefaultStyle.prototype.colorUR = 0;\nGlovFontDefaultStyle.prototype.colorLR = 0;\nGlovFontDefaultStyle.prototype.colorLL = 0;\nGlovFontDefaultStyle.prototype.color_mode = COLOR_MODE.SINGLE;\n\nclass GlovFontStyle extends GlovFontDefaultStyle {}\n\nexport const font_shaders = {};\n\nexport function intColorFromVec4Color(v) {\n  return (v[0] * 255 | 0) << 24 | (v[1] * 255 | 0) << 16 | (v[2] * 255 | 0) << 8 | (v[3] * 255 | 0);\n}\n\nexport function vec4ColorFromIntColor(v, c) {\n  v[0] = (c >> 24 & 0xFF) / 255;\n  v[1] = (c >> 16 & 0xFF) / 255;\n  v[2] = (c >> 8 & 0xFF) / 255;\n  v[3] = (c & 0xFF) / 255;\n}\n\nfunction buildVec4ColorFromIntColor(c) {\n  return vec4((c >> 24 & 0xFF) / 255, (c >> 16 & 0xFF) / 255, (c >> 8 & 0xFF) / 255, (c & 0xFF) / 255);\n}\n\nexport const glov_font_default_style = new GlovFontStyle();\n\nexport function style(font_style, fields) {\n  let ret = new GlovFontStyle();\n  if (font_style) {\n    for (let f in font_style) {\n      ret[f] = font_style[f];\n    }\n  }\n  for (let f in fields) {\n    ret[f] = fields[f];\n  }\n  return ret;\n}\n\nexport function styleColored(font_style, color) {\n  return style(font_style, {\n    color\n  });\n}\n\nfunction colorAlpha(color, alpha) {\n  alpha = clamp(round((color & 0xFF) * alpha), 0, 255);\n  return color & 0xFFFFFF00 | alpha;\n}\n\nexport function styleAlpha(font_style, alpha) {\n  return style(font_style, {\n    color: colorAlpha((font_style || glov_font_default_style).color, alpha),\n    outline_color: colorAlpha((font_style || glov_font_default_style).outline_color, alpha),\n    glow_color: colorAlpha((font_style || glov_font_default_style).glow_color, alpha)\n  });\n}\n\nlet tech_params = null;\nlet tech_params_dirty = false;\nlet temp_color = null;\n\nfunction createTechniqueParameters() {\n  if (tech_params) {\n    return;\n  }\n\n  tech_params = {\n    param0: vec4(),\n    outlineColor: vec4(),\n    glowColor: vec4(),\n    glowParams: vec4(),\n    tex0: null\n  };\n  if (!temp_color) {\n    temp_color = vec4();\n  }\n}\n\nfunction techParamsSet(param, value) {\n  let tpv = tech_params[param];\n  // not dirty, if anything changes, we need a new object!\n  if (!tech_params_dirty) {\n    if (tpv[0] !== value[0] || tpv[1] !== value[1] || tpv[2] !== value[2] || tpv[3] !== value[3]) {\n      // clone\n      tech_params = {\n        param0: v4clone(tech_params.param0),\n        outlineColor: v4clone(tech_params.outlineColor),\n        glowColor: v4clone(tech_params.glowColor),\n        glowParams: v4clone(tech_params.glowParams)\n      };\n      tech_params_dirty = true;\n      tpv = tech_params[param];\n    } else {\n      // identical, do nothing\n      return;\n    }\n  }\n  if (tech_params_dirty) {\n    // just set\n    tpv[0] = value[0];\n    tpv[1] = value[1];\n    tpv[2] = value[2];\n    tpv[3] = value[3];\n    // return;\n  }\n}\n\nfunction techParamsGet() {\n  tech_params_dirty = false;\n  return tech_params;\n}\n\nclass GlovFont {\n  constructor(font_info, texture_name) {\n    assert(font_info.font_size !== 0); // Got lost somewhere\n\n    this.texture = textures.load({\n      url: `img/${texture_name}.png`,\n      filter_min: font_info.noFilter ? gl.NEAREST : gl.LINEAR,\n      filter_mag: font_info.noFilter ? gl.NEAREST : gl.LINEAR\n    });\n    this.textures = [this.texture];\n\n    this.font_info = font_info;\n    this.shader = font_shaders.font_aa;\n\n    // Calculate inverse scale\n    for (let ii = 0; ii < font_info.char_infos.length; ++ii) {\n      let char_info = font_info.char_infos[ii];\n      char_info.scale = 1 / (char_info.sc || 1);\n    }\n\n    // build lookup\n    this.char_infos = [];\n    for (let ii = 0; ii < font_info.char_infos.length; ++ii) {\n      let char_info = font_info.char_infos[ii];\n      this.char_infos[font_info.char_infos[ii].c] = char_info;\n      char_info.xpad = char_info.xpad || 0;\n      char_info.yoffs = char_info.yoffs || 0;\n    }\n    this.replacement_character = this.infoFromChar(0xFFFD);\n    if (!this.replacement_character) {\n      this.replacement_character = this.infoFromChar(63); // '?'\n    }\n\n    this.default_style = new GlovFontStyle();\n    this.applied_style = new GlovFontStyle();\n\n    createTechniqueParameters();\n  }\n\n  // General draw functions return width\n  // Pass NULL for style to use default style\n  // If the function takes a color, this overrides the color on the style\n  drawSizedColor(style, x, y, z, size, color, text) {\n    return this.drawSized(styleColored(style, color), x, y, z, size, text);\n  }\n  drawSized(style, x, y, z, size, text) {\n    return this.drawScaled(style, x, y, z, size / this.font_info.font_size, size / this.font_info.font_size, text);\n  }\n\n  drawSizedAligned(style, _x, _y, z, size, align, w, h, text) {\n    let x_size = size;\n    let y_size = size;\n    let width = this.getStringWidth(style, x_size, text);\n    if (align & ALIGN.HFIT && width > w) {\n      let scale = w / width;\n      x_size *= scale;\n      width = w;\n      // Additionally, if we're really squishing things horizontally, shrink the font size\n      // and offset to be centered.\n      if (scale < 0.5) {\n        if ((align & ALIGN.VMASK) !== ALIGN.VCENTER && (align & ALIGN.VMASK) !== ALIGN.VBOTTOM) {\n          // Offset to be roughly centered in the original line bounds\n          _y += (y_size - y_size * scale * 2) / 2;\n        }\n        y_size *= scale * 2;\n      }\n    }\n    let height = y_size;\n    let x;\n    let y;\n    switch (align & ALIGN.HMASK) {\n      case ALIGN.HCENTER:\n        x = _x + (w - width) / 2;\n        if (this.font_info.noFilter) {\n          x |= 0; // ensure integral\n        }\n        break;\n      case ALIGN.HRIGHT:\n        x = _x + w - width;\n        break;\n      case ALIGN.HLEFT:\n        x = _x;\n        break;\n      default:\n        x = _x;\n    }\n    switch (align & ALIGN.VMASK) {\n      case ALIGN.VCENTER:\n        y = _y + (h - height) / 2;\n        if (this.font_info.noFilter) {\n          y |= 0; // ensure integral\n        }\n        break;\n      case ALIGN.VBOTTOM:\n        y = _y + h - height;\n        break;\n      case ALIGN.VTOP:\n        y = _y;\n        break;\n      default:\n        y = _y;\n    }\n\n    return this.drawScaled(style, x, y, z, x_size / this.font_info.font_size, y_size / this.font_info.font_size, text);\n  }\n\n  // returns height\n  drawSizedColorWrapped(style, x, y, z, w, indent, size, color, text) {\n    return this.drawScaledWrapped(styleColored(style, color), x, y, z, w, indent, size / this.font_info.font_size, size / this.font_info.font_size, text);\n  }\n  drawSizedWrapped(style, x, y, z, w, indent, size, text) {\n    return this.drawScaledWrapped(style, x, y, z, w, indent, size / this.font_info.font_size, size / this.font_info.font_size, text);\n  }\n\n  wrapLines(w, indent, size, text, word_cb /*(x, int linenum, const char *word)*/) {\n    return this.wrapLinesScaled(w, indent, size / this.font_info.font_size, text, word_cb);\n  }\n\n  infoFromChar(c) {\n    let ret = this.char_infos[c];\n    if (ret) {\n      return ret;\n    }\n    if (c > 127) {\n      // no char info, and non-ascii, non-control code\n      return this.replacement_character;\n    }\n    return null;\n  }\n\n  getCharacterWidth(style, x_size, c) {\n    assert(typeof c === 'number');\n    this.applyStyle(style);\n    let char_info = this.infoFromChar(c);\n    let xsc = x_size / this.font_info.font_size;\n    let x_advance = this.calcXAdvance(xsc);\n    if (char_info) {\n      return (char_info.w + char_info.xpad) * xsc * char_info.scale + x_advance;\n    }\n    return 0;\n  }\n\n  getStringWidth(style, x_size, text) {\n    this.applyStyle(style);\n    let ret = 0;\n    let xsc = x_size / this.font_info.font_size;\n    let x_advance = this.calcXAdvance(xsc);\n    for (let ii = 0; ii < text.length; ++ii) {\n      let c = text.charCodeAt(ii);\n      let char_info = this.infoFromChar(c);\n      if (!char_info) {\n        char_info = this.infoFromChar(13);\n      }\n      if (char_info) {\n        ret += (char_info.w + char_info.xpad) * xsc * char_info.scale + x_advance;\n      }\n    }\n    return ret;\n  }\n\n  wrapLinesScaled(w, indent, xsc, text, word_cb /* word_cb(x, int linenum, const char *word) */) {\n    let len = text.length;\n    let s = 0;\n    let word_start = 0;\n    let word_x0 = 0;\n    let x = word_x0;\n    let linenum = 0;\n    let space_info = this.infoFromChar(32); // ' '\n    let space_size = (space_info ? space_info.w + space_info.xpad : this.font_info.font_size) * xsc;\n    let hard_wrap = false;\n    let x_advance = this.calcXAdvance(xsc);\n\n    do {\n      let c = s < len ? text.charCodeAt(s) : 0;\n      let newx = x;\n      let char_w;\n      if (c === 9) {\n        // '\\t') {\n        let tabsize = xsc * this.font_info.font_size * 4;\n        newx = (floor(x / tabsize) + 1) * tabsize;\n        char_w = tabsize;\n      } else {\n        let char_info = this.infoFromChar(c);\n        if (!char_info) {\n          char_info = this.infoFromChar(10);\n        }\n        if (char_info) {\n          char_w = (char_info.w + char_info.xpad) * xsc * char_info.scale + x_advance;\n          newx = x + char_w;\n        }\n      }\n      if (newx >= w && hard_wrap) {\n        // flush the word so far!\n        if (word_cb) {\n          word_cb(word_x0, linenum, text.slice(word_start, s));\n        }\n        word_start = s;\n        word_x0 = indent;\n        x = word_x0 + char_w;\n        linenum++;\n      } else {\n        x = newx;\n      }\n      if (!(c === 32 /*' '*/ || c === 0 || c === 10 /*'\\n'*/)) {\n        s++;\n        c = s < len ? text.charCodeAt(s) : 0;\n      }\n      if (c === 32 /*' '*/ || c === 0 || c === 10 /*'\\n'*/) {\n          hard_wrap = false;\n          // draw word until s\n          if (x > w) {\n            // maybe wrap\n            let word_width = x - word_x0;\n            if (word_width > w) {\n              // not going to fit, split it up!\n              hard_wrap = true;\n              // recover and restart at word start\n              s = word_start;\n              x = word_x0;\n              continue;\n            } else {\n              word_x0 = indent;\n              x = word_x0 + word_width;\n              linenum++;\n            }\n          }\n          if (word_cb) {\n            word_cb(word_x0, linenum, text.slice(word_start, s));\n          }\n          word_start = s + 1;\n          if (c === 10 /*'\\n'*/) {\n              x = indent;\n              linenum++;\n            } else {\n            x += space_size;\n          }\n          word_x0 = x;\n          if (c === 32 /*' '*/ || c === 10 /*'\\n'*/) {\n              s++; // advance past space\n            }\n        }\n    } while (s < len);\n    ++linenum;\n    return linenum;\n  }\n\n  drawScaledWrapped(style, x, y, z, w, indent, xsc, ysc, text) {\n    if (text === null || text === undefined) {\n      text = '(null)';\n    }\n    this.applyStyle(style);\n    let num_lines = this.wrapLinesScaled(w, indent, xsc, text, (xoffs, linenum, word) => {\n      let y2 = y + this.font_info.font_size * ysc * linenum;\n      let x2 = x + xoffs;\n      this.drawScaled(style, x2, y2, z, xsc, ysc, word);\n    });\n    return num_lines * this.font_info.font_size * ysc;\n  }\n\n  calcXAdvance(xsc) {\n    // Assume called: applyStyle(style);\n\n    // scale all supplied values by this so that if we swap in a font with twice the resolution (and twice the spread)\n    //   things look almost identical, just crisper\n    let font_texel_scale = this.font_info.font_size / 32;\n    // As a compromise, -2 bias here seems to work well\n    let x_advance = xsc * font_texel_scale * max(this.applied_style.outline_width - 2, 0);\n    // As a compromise, there's a -3 bias in there, so it only kicks in under extreme circumstances\n    x_advance = max(x_advance, xsc * font_texel_scale * max(this.applied_style.glow_outer - this.applied_style.glow_xoffs - 3, 0));\n    return x_advance;\n  }\n\n  //////////////////////////////////////////////////////////////////////////\n  // Main implementation\n\n  drawScaled(style, _x, y, z, xsc, ysc, text) {\n\n    let x = _x;\n    let font_info = this.font_info;\n    // Debug: show expect area of glyphs\n    // require('./engine.js').glov_ui.drawRect(_x, y,\n    //   _x + xsc * font_info.font_size * 20, y + ysc * font_info.font_size,\n    //   1000, [1, 0, 1, 0.5]);\n    y += (font_info.y_offset || 0) * ysc;\n    let tex = this.texture;\n    let texs = this.textures;\n    if (text === null || text === undefined) {\n      text = '(null)';\n    }\n    const len = text.length;\n    if (xsc === 0 || ysc === 0) {\n      return 0;\n    }\n\n    this.applyStyle(style);\n\n    const avg_scale_font = (xsc + ysc) * 0.5;\n    const camera_xscale = camera2d.data[4];\n    const camera_yscale = camera2d.data[5];\n    let avg_scale_combined = (xsc * camera_xscale + ysc * camera_yscale) * 0.5;\n    // avg_scale_combined *= glov_settings.render_scale;\n\n    // scale all supplied values by this so that if we swap in a font with twice the resolution (and twice the spread)\n    //   things look almost identical, just crisper\n    let x_advance = this.calcXAdvance(xsc);\n    let font_texel_scale = font_info.font_size / 32;\n    let tile_state = 0;\n\n    let applied_style = this.applied_style;\n\n    // Calculate anti-aliasing values\n    let delta_per_source_pixel = 0.5 / font_info.spread;\n    let delta_per_dest_pixel = delta_per_source_pixel / avg_scale_combined;\n    let value = vec4(1 / delta_per_dest_pixel, // AA Mult and Outline Mult\n    -0.5 / delta_per_dest_pixel + 0.5, // AA Add\n    // Outline Add\n    -0.5 / delta_per_dest_pixel + 0.5 + applied_style.outline_width * font_texel_scale * avg_scale_combined, 0 // Unused\n    );\n    if (value[2] > 0) {\n      value[2] = 0;\n    }\n    let padding1 = max(1, applied_style.outline_width * font_texel_scale * avg_scale_combined);\n    let padding4 = vec4();\n    const outer_scaled = applied_style.glow_outer * font_texel_scale;\n    padding4[0] = max(outer_scaled * xsc - applied_style.glow_xoffs * font_texel_scale * xsc, padding1);\n    padding4[2] = max(outer_scaled * xsc + applied_style.glow_xoffs * font_texel_scale * xsc, padding1);\n    padding4[1] = max(outer_scaled * ysc - applied_style.glow_yoffs * font_texel_scale * ysc, padding1);\n    padding4[3] = max(outer_scaled * ysc + applied_style.glow_yoffs * font_texel_scale * ysc, padding1);\n\n    techParamsSet('param0', value);\n    let value2 = vec4(0, // filled later\n    0, // filled later\n    // Glow mult\n    1 / ((applied_style.glow_outer - applied_style.glow_inner) * delta_per_source_pixel * font_texel_scale), -(0.5 - applied_style.glow_outer * delta_per_source_pixel * font_texel_scale) / ((applied_style.glow_outer - applied_style.glow_inner) * delta_per_source_pixel * font_texel_scale));\n    if (value2[3] > 0) {\n      value2[3] = 0;\n    }\n\n    let padding_in_font_space = vec4();\n    v4scale(padding_in_font_space, padding4, 1 / avg_scale_font);\n    for (let ii = 0; ii < 4; ++ii) {\n      if (padding_in_font_space[ii] > font_info.spread) {\n        // Not enough buffer\n        let sc = font_info.spread / padding_in_font_space[ii];\n        padding4[ii] *= sc;\n        padding_in_font_space[ii] *= sc;\n      }\n    }\n\n    // Choose appropriate z advance so that character are drawn left to right (or RTL if the glow is on the other side)\n    const z_advance = applied_style.glow_xoffs < 0 ? -0.0001 : 0.0001;\n\n    // For non-1:1 aspect ration rendering, need to scale our coordinates' padding differently in each axis\n    let rel_x_scale = xsc / avg_scale_font;\n    let rel_y_scale = ysc / avg_scale_font;\n\n    for (let i = 0; i < len; i++) {\n      const c = text.charCodeAt(i);\n      if (c === 9) {\n        // '\\t'.charCodeAt(0)) {\n        let tabsize = xsc * font_info.font_size * 4;\n        x = (((x - _x) / tabsize | 0) + 1) * tabsize + _x;\n      } else {\n        let char_info = this.infoFromChar(c);\n        if (!char_info) {\n          char_info = this.infoFromChar(13);\n        }\n        if (char_info) {\n          let char_scale = char_info.scale;\n          let xsc2 = xsc * char_scale;\n          let ysc2 = ysc * char_scale;\n          let pad_scale = 1 / char_scale;\n          let tile_width = tex.width;\n          let tile_height = tex.height;\n          // Lazy update params here\n          if (char_scale !== tile_state) {\n            value2[0] = -applied_style.glow_xoffs * font_texel_scale * pad_scale / tile_width;\n            value2[1] = -applied_style.glow_yoffs * font_texel_scale * pad_scale / tile_height;\n            techParamsSet('glowParams', value2);\n          }\n\n          let u0 = (char_info.x0 - padding_in_font_space[0] * pad_scale) / tile_width;\n          let u1 = (char_info.x0 + char_info.w + padding_in_font_space[2] * pad_scale) / tile_width;\n          let v0 = (char_info.y0 - padding_in_font_space[1] * pad_scale) / tile_height;\n          let v1 = (char_info.y0 + char_info.h + padding_in_font_space[3] * pad_scale) / tile_height;\n\n          let w = char_info.w * xsc2 + (padding4[0] + padding4[2]) * rel_x_scale;\n          let h = char_info.h * ysc2 + (padding4[1] + padding4[3]) * rel_y_scale;\n\n          sprites.queueraw(texs, x - rel_x_scale * padding4[0], y - rel_y_scale * padding4[2] + char_info.yoffs * ysc2, z + z_advance * i, w, h, u0, v0, u1, v1, buildVec4ColorFromIntColor(applied_style.color), this.shader, techParamsGet());\n\n          x += (char_info.w + char_info.xpad) * xsc2 + x_advance;\n        }\n      }\n    }\n    return x - _x;\n  }\n\n  determineShader() {\n    let outline = this.applied_style.outline_width && this.applied_style.outline_color & 0xff;\n    let glow = this.applied_style.glow_outer > 0 && this.applied_style.glow_color & 0xff;\n    if (outline) {\n      if (glow) {\n        this.shader = font_shaders.font_aa_outline_glow;\n      } else {\n        this.shader = font_shaders.font_aa_outline;\n      }\n    } else if (glow) {\n      this.shader = font_shaders.font_aa_glow;\n    } else {\n      this.shader = font_shaders.font_aa;\n    }\n  }\n\n  applyStyle(style) {\n    if (!style) {\n      style = this.default_style;\n    }\n    // outline\n    vec4ColorFromIntColor(temp_color, style.outline_color);\n    techParamsSet('outlineColor', temp_color);\n\n    // glow\n    vec4ColorFromIntColor(temp_color, style.glow_color);\n    techParamsSet('glowColor', temp_color);\n\n    // everything else\n    this.applied_style.outline_width = style.outline_width;\n    this.applied_style.outline_color = style.outline_color;\n    this.applied_style.glow_xoffs = style.glow_xoffs;\n    this.applied_style.glow_yoffs = style.glow_yoffs;\n    this.applied_style.glow_inner = style.glow_inner;\n    this.applied_style.glow_outer = style.glow_outer;\n    this.applied_style.glow_color = style.glow_color;\n    this.applied_style.color = style.color;\n    this.applied_style.colorUR = style.colorUR;\n    this.applied_style.colorLR = style.colorLR;\n    this.applied_style.colorLL = style.colorLL;\n    this.applied_style.color_mode = style.color_mode;\n\n    if (this.applied_style.color_mode === COLOR_MODE.SINGLE) {\n      this.applied_style.colorUR = this.applied_style.colorLL = this.applied_style.colorLR = this.applied_style.color;\n    }\n\n    this.determineShader();\n  }\n}\n\nfunction fontShadersInit() {\n  if (font_shaders.font_aa) {\n    return;\n  }\n  font_shaders.font_aa = shaders.create(gl.FRAGMENT_SHADER, 'precision lowp float;\\n\\nvarying vec2 interp_texcoord;\\nvarying lowp vec4 interp_color;\\nvec4 _ret_0;\\nuniform sampler2D tex0;\\nuniform vec4 param0;\\nvoid main()\\n{\\n  float texture0 = texture2D(tex0,interp_texcoord).r;\\n  float res = clamp(texture0 * param0.x + param0.y, 0.0, 1.0);\\n  gl_FragColor = vec4(interp_color.rgb, interp_color.a * res);\\n}\\n');\n  font_shaders.font_aa_glow = shaders.create(gl.FRAGMENT_SHADER, 'precision lowp float;\\n\\nvarying vec2 interp_texcoord;\\nvarying lowp vec4 interp_color;\\nvec4 _ret_0;\\nuniform sampler2D tex0;\\nuniform vec4 param0;\\nuniform vec4 glowColor;\\nuniform vec4 glowParams;\\nvoid main()\\n{\\n  float texture0=texture2D(tex0,interp_texcoord).r;\\n  // Glow\\n  vec2 glowCoord = interp_texcoord + glowParams.xy;\\n  float textureGlow = texture2D(tex0, glowCoord).r;\\n  float t = clamp(textureGlow * glowParams.z + glowParams.w, 0.0, 1.0);\\n  vec4 outcolor = vec4(glowColor.xyz, t * glowColor.w);\\n  // Main body\\n  t = clamp(texture0 * param0.x + param0.y, 0.0, 1.0);\\n  gl_FragColor = mix(outcolor, interp_color, t);\\n}\\n');\n  font_shaders.font_aa_outline = shaders.create(gl.FRAGMENT_SHADER, 'precision lowp float;\\n\\nvarying highp vec2 interp_texcoord;\\nvarying lowp vec4 interp_color;\\nvec4 _ret_0;\\nuniform sampler2D tex0;\\nuniform vec4 param0;\\nuniform vec4 outlineColor;\\nvoid main()\\n{\\n  float texture0=texture2D(tex0,interp_texcoord).r;\\n  // Outline\\n  vec4 outcolor = vec4(outlineColor.xyz, 0);\\n  outcolor.w = clamp(texture0 * param0.x + param0.z, 0.0, 1.0);\\n  outcolor.w = outcolor.w * outlineColor.w;\\n  // outcolor = mix(outcolor, outlineColor, outcolor.w); // Makes a blackish border\\n  // Main body\\n  float t = clamp(texture0 * param0.x + param0.y, 0.0, 1.0);\\n  gl_FragColor = mix(outcolor, interp_color, t);\\n}\\n');\n  font_shaders.font_aa_outline_glow = shaders.create(gl.FRAGMENT_SHADER, 'precision lowp float;\\n\\nvarying highp vec2 interp_texcoord;\\nvarying lowp vec4 interp_color;\\nvec4 _ret_0;\\nuniform sampler2D tex0;\\nuniform vec4 param0;\\nuniform vec4 outlineColor;\\nuniform vec4 glowColor;\\nuniform vec4 glowParams;\\nvoid main()\\n{\\n  float texture0=texture2D(tex0,interp_texcoord).r;\\n  // Glow\\n  vec2 glowCoord = interp_texcoord + glowParams.xy;\\n  float textureGlow = texture2D(tex0, glowCoord).r;\\n  float t = clamp(textureGlow * glowParams.z + glowParams.w, 0.0, 1.0);\\n  vec4 outcolor = vec4(glowColor.xyz, t * glowColor.w);\\n  // vec4outclor = t * glowColor.xyz;\\n  // Outline\\n  t = clamp(texture0 * param0.x + param0.z, 0.0, 1.0);\\n  t = t * outlineColor.w;\\n  outcolor = mix(outcolor, outlineColor, t);\\n  // Main body\\n  t = clamp(texture0 * param0.x + param0.y, 0.0, 1.0);\\n  gl_FragColor = mix(outcolor, interp_color, t);\\n}\\n');\n}\n\nexport function create(...args) {\n  fontShadersInit();\n  return new GlovFont(...args);\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint no-bitwise:off */\n\nconst assert = require('assert');\nconst { ceil, max } = Math;\n\nexport const QUADS = 7;\n\nconst gl_byte_size = {\n  0x1400: 1, // GL_BYTE\n  0x1401: 1, // GL_UNSIGNED_BYTE\n  0x1402: 2, // GL_SHORT\n  0x1403: 2, // GL_UNSIGNED_SHORT\n  0x1406: 4 // GL_FLOAT\n};\n\n// let unit_buf;\n// let unit_buf_len = 0;\n\nlet bound_geom;\n\nlet bound_array_buf = null;\nlet bound_index_buf = null;\n\nlet quad_index_buf;\nlet quad_index_buf_len = 0;\n\nfunction deleteBuffer(handle) {\n  if (!handle) {\n    return;\n  }\n  if (bound_array_buf === handle) {\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n    bound_array_buf = null;\n  }\n  if (bound_index_buf === handle) {\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n    bound_index_buf = null;\n  }\n  gl.deleteBuffer(handle);\n}\n\nlet attrib_enabled = 0;\nfunction enableVertexAttribArray(bits) {\n  if (bits === attrib_enabled) {\n    return;\n  }\n  let disable_mask = attrib_enabled & ~bits;\n  let enable_mask = ~attrib_enabled & bits;\n  attrib_enabled = bits;\n\n  if (disable_mask) {\n    let n = 0;\n    do {\n      if (disable_mask & 1) {\n        gl.disableVertexAttribArray(n);\n      }\n      n++;\n      disable_mask >>= 1;\n    } while (disable_mask);\n  }\n\n  if (enable_mask) {\n    let n = 0;\n    do {\n      if (enable_mask & 1) {\n        gl.enableVertexAttribArray(n);\n      }\n      n++;\n      enable_mask >>= 1;\n    } while (enable_mask);\n  }\n}\n\n// function bindUnitBuf(arr_idx, len) {\n//   if (len > unit_buf_len) {\n//     deleteBuffer(unit_buf);\n//     unit_buf = gl.createBuffer();\n//     unit_buf_len = max(ceil(unit_buf_len * 1.5), len);\n//     gl.bindBuffer(gl.ARRAY_BUFFER, unit_buf);\n//     bound_array_buf = unit_buf;\n//     let arr = new Uint8Array(unit_buf_len * 4);\n//     for (let ii = 0; ii < unit_buf_len * 4; ++ii) {\n//       arr[ii] = 255;\n//     }\n//     gl.bufferData(gl.ARRAY_BUFFER, arr, gl.STATIC_DRAW);\n//   } else {\n//     if (bound_array_buf !== unit_buf) {\n//       gl.bindBuffer(gl.ARRAY_BUFFER, unit_buf);\n//       bound_array_buf = unit_buf;\n//     }\n//   }\n//   gl.vertexAttribPointer(arr_idx, 4, gl.UNSIGNED_BYTE, true, 0, 0);\n// }\n\n// Verts should be ordered counter-clockwise from the upper left\nfunction getQuadIndexBuf(quad_count) {\n  assert(quad_count <= 16384);\n  // If not, need to split into multiple vertex and index buffers (fairly easy),\n  //   or use the OES_element_index_uint extension (trivial, but probably slower, maybe not supported on mobile?)\n  if (quad_count * 6 > quad_index_buf_len) {\n    if (!quad_index_buf) {\n      quad_index_buf = gl.createBuffer();\n    }\n    quad_index_buf_len = max(ceil(quad_index_buf_len * 1.5), quad_count * 6);\n    if (bound_index_buf !== quad_index_buf) {\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, quad_index_buf);\n      bound_index_buf = quad_index_buf;\n    }\n    let arr = new Uint16Array(quad_index_buf_len);\n    let vidx = 0;\n    for (let ii = 0; ii < quad_index_buf_len;) {\n      arr[ii++] = vidx + 1;\n      arr[ii++] = vidx + 3;\n      arr[ii++] = vidx++; // 0\n      arr[ii++] = vidx++; // 1\n      arr[ii++] = vidx++; // 2\n      arr[ii++] = vidx++; // 3\n    }\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, arr, gl.STATIC_DRAW);\n  }\n  return quad_index_buf;\n}\n\n// _format is [shader.semantic.foo, gl.FLOAT/UNSIGNED_BYTE/etc, count, normalized]\nfunction Geom(_format, verts, idxs, mode) {\n  this.mode = mode || gl.TRIANGLES;\n  this.format = _format;\n  this.stride = 0;\n  this.elem_count = 0;\n  this.used_attribs = 0;\n  for (let ii = 0; ii < _format.length; ++ii) {\n    let fmt = _format[ii];\n    let sem = fmt[0];\n    let gltype = fmt[1];\n    let count = fmt[2];\n    this.used_attribs |= 1 << sem;\n    let byte_size = gl_byte_size[gltype];\n    assert(byte_size);\n    fmt[3] = fmt[3] || false;\n    fmt[4] = byte_size;\n    this.stride += count * byte_size;\n    this.elem_count += count;\n  }\n  this.vert_count = verts.length / this.elem_count;\n  if (verts.length) {\n    this.vbo = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.vbo);\n    bound_array_buf = this.vbo;\n    gl.bufferData(gl.ARRAY_BUFFER, verts, gl.STATIC_DRAW);\n  }\n  this.orig_mode = mode;\n  if (idxs) {\n    this.ibo = gl.createBuffer();\n    this.ibo_owned = true;\n    this.ibo_size = idxs.length;\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibo);\n    bound_index_buf = this.ibo;\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, idxs, gl.STATIC_DRAW);\n  } else if (mode === QUADS) {\n    assert(this.vert_count % 4 === 0);\n    let quad_count = this.vert_count / 4;\n    // PERFTODO: Use GL_QUADS_OES extension\n    this.ibo = getQuadIndexBuf(quad_count);\n    this.ibo_owned = false;\n    this.ibo_size = quad_count * 6;\n    this.mode = gl.TRIANGLES;\n  } else {\n    this.ibo = null;\n    this.ibo_owned = false;\n  }\n}\n\nGeom.prototype.update = function (verts, num_verts) {\n  assert(this.orig_mode === QUADS);\n  if (num_verts > this.vert_count) {\n    if (bound_geom === this) {\n      bound_geom = null;\n    }\n    deleteBuffer(this.vbo);\n    // Note: matching size, ignoring num_verts\n    this.vert_count = verts.length / this.elem_count;\n    this.vbo = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.vbo);\n    bound_array_buf = this.vbo;\n    gl.bufferData(gl.ARRAY_BUFFER, verts, gl.DYNAMIC_DRAW);\n  } else {\n    // Fits\n    if (bound_array_buf !== this.vbo) {\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.vbo);\n      bound_array_buf = this.vbo;\n    }\n    gl.bufferSubData(gl.ARRAY_BUFFER, 0, verts.subarray(0, num_verts * this.elem_count));\n    // gl.bufferData(gl.ARRAY_BUFFER, verts, gl.DYNAMIC_DRAW);\n  }\n  let quad_count = num_verts / 4;\n  this.ibo = getQuadIndexBuf(quad_count);\n  this.ibo_size = quad_count * 6;\n};\n\nGeom.prototype.dispose = function () {\n  if (this.ibo_owned) {\n    deleteBuffer(this.ibo);\n  }\n  this.ibo = null;\n  deleteBuffer(this.vbo);\n  this.vbo = null;\n};\n\nlet bound_attribs = function () {\n  let r = [];\n  for (let ii = 0; ii < 16; ++ii) {\n    r.push({\n      vbo: null,\n      offset: 0\n    });\n  }\n  return r;\n}();\nGeom.prototype.bind = function () {\n  if (bound_geom !== this) {\n    bound_geom = this;\n    let vbo = this.vbo;\n\n    let offset = 0;\n    for (let ii = 0; ii < this.format.length; ++ii) {\n      let fmt = this.format[ii];\n      let count = fmt[2];\n      let byte_size = fmt[4];\n      if (bound_attribs[ii].vbo === vbo) {//  && bound_attribs[ii].offset = offset\n        // already bound\n      } else {\n        if (bound_array_buf !== vbo) {\n          gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\n          bound_array_buf = vbo;\n        }\n        let sem = fmt[0];\n        let gltype = fmt[1];\n        let normalized = fmt[3];\n        gl.vertexAttribPointer(sem, count, gltype, normalized, this.stride, offset);\n        bound_attribs[ii].vbo = bound_array_buf;\n        // bound_attribs[ii].offset = offset;\n      }\n      offset += count * byte_size;\n    }\n    // if (!used[1]) { // COLOR\n    //   used_attribs |= 1 << shader.semantics.COLOR;\n    //   bindUnitBuf(1, this.vert_count);\n    // }\n    enableVertexAttribArray(this.used_attribs);\n\n    if (this.ibo && bound_index_buf !== this.ibo) {\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibo);\n      bound_index_buf = this.ibo;\n    }\n  }\n};\nGeom.prototype.draw = function () {\n  this.bind();\n  assert(this.ibo); // else: gl.drawArrays(this.mode, ... this.ibo_size, gl.UNSIGNED_SHORT, 0);\n  gl.drawElements(this.mode, this.ibo_size, gl.UNSIGNED_SHORT, 0);\n};\n\nexport function create(...args) {\n  return new Geom(...args);\n}\n\nexport function startup() {\n  // Nothing for now.\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n// Some code from Turbulenz: Copyright (c) 2012-2013 Turbulenz Limited\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* global navigator */\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst local_storage = require('./local_storage.js');\nconst glov_engine = require('./engine.js');\nconst { abs, min, sqrt } = Math;\nconst { vec2, v2add, v2copy, v2lengthSq, v2set, v2scale, v2sub } = require('./vmath.js');\n\nconst UP_EDGE = 0;\nconst DOWN_EDGE = 1;\nconst DOWN = 2;\n\n// per-app overrideable options\nconst TOUCH_AS_MOUSE = true;\nconst MAP_ANALOG_TO_DPAD = true;\n\nexport const ANY = -2;\nexport const POINTERLOCK = -1;\n\nexport const KEYS = {\n  BACKSPACE: 8,\n  TAB: 9,\n  ENTER: 13,\n  RETURN: 13,\n  SHIFT: 16,\n  CTRL: 17,\n  ALT: 18,\n  ESC: 27,\n  SPACE: 32,\n  PAGEUP: 33,\n  PAGEDOWN: 34,\n  END: 35,\n  HOME: 36,\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40,\n  INS: 45,\n  DEL: 46\n};\n(function () {\n  for (let ii = 1; ii <= 12; ++ii) {\n    KEYS[`F${ii}`] = 111 + ii;\n  }\n  for (let ii = 48; ii <= 90; ++ii) {\n    // 0-9;A-Z\n    KEYS[String.fromCharCode(ii)] = ii;\n  }\n})();\nexport const pad_codes = {\n  A: 0,\n  SELECT: 0, // GLOV name\n  B: 1,\n  CANCEL: 1, // GLOV name\n  X: 2,\n  Y: 3,\n  LB: 4,\n  LEFT_BUMPER: 4,\n  RB: 5,\n  RIGHT_BUMPER: 5,\n  LT: 6,\n  LEFT_TRIGGER: 6,\n  RT: 7,\n  RIGHT_TRIGGER: 7,\n  BACK: 8,\n  START: 9,\n  LEFT_STICK: 10,\n  RIGHT_STICK: 11,\n  UP: 12,\n  DOWN: 13,\n  LEFT: 14,\n  RIGHT: 15,\n  ANALOG_UP: 20,\n  ANALOG_LEFT: 21,\n  ANALOG_DOWN: 22,\n  ANALOG_RIGHT: 23\n};\n\nlet canvas;\nlet key_state = {};\nlet pad_states = []; // One map per gamepad to pad button states\nlet gamepad_data = []; // Other tracking data per gamepad\nlet mouse_pos = vec2();\nlet last_mouse_pos = vec2();\nlet mouse_pos_is_touch = false;\nlet mouse_over_captured = false;\nlet mouse_down = [];\nlet mouse_wheel = 0;\n\nlet input_eaten_kb = false;\nlet input_eaten_mouse = false;\n\nlet touches = {}; // `m${button}` or touch_id -> TouchData\n\nexport let touch_mode = local_storage.getJSON('touch_mode', false);\n\nfunction TouchData(pos, touch, button) {\n  this.delta = vec2();\n  this.total = 0;\n  this.cur_pos = pos.slice(0);\n  this.start_pos = pos.slice(0);\n  this.release = false;\n  this.touch = touch;\n  this.button = button;\n  this.start_time = Date.now();\n  this.dispatched = false;\n  this.state = DOWN_EDGE;\n}\n\nexport function pointerLocked() {\n  return document.pointerLockElement || document.mozPointerLockElement || document.webkitPointerLockElement;\n}\nlet pointerlock_touch_id = `m${POINTERLOCK}`;\nexport function pointerLockEnter() {\n  let touch_data = touches[pointerlock_touch_id];\n  if (touch_data) {\n    v2copy(touch_data.start_pos, mouse_pos);\n    touch_data.release = false;\n  } else {\n    touch_data = touches[pointerlock_touch_id] = new TouchData(mouse_pos, false, POINTERLOCK);\n    touch_data.state = DOWN; // No DOWN_EDGE for this\n  }\n  return canvas.requestPointerLock && canvas.requestPointerLock();\n}\nexport function pointerLockExit() {\n  let touch_data = touches[pointerlock_touch_id];\n  if (touch_data) {\n    v2copy(touch_data.cur_pos, mouse_pos);\n    touch_data.state = null; // no UP_EDGE for this\n    touch_data.release = true;\n  }\n  document.exitPointerLock();\n}\n\nfunction ignored(event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\n\nfunction onKeyUp(event) {\n  let code = event.keyCode;\n  if (event.target.tagName !== 'INPUT') {\n    event.stopPropagation();\n    event.preventDefault();\n  }\n\n  if (code === KEYS.ESC && pointerLocked()) {\n    pointerLockExit();\n  }\n  key_state[code] = UP_EDGE;\n}\n\nfunction onKeyDown(event) {\n  let code = event.keyCode;\n  if (code !== KEYS.F12 && code !== KEYS.F5 && code !== KEYS.F6 && event.target.tagName !== 'INPUT') {\n    event.stopPropagation();\n    event.preventDefault();\n  }\n  // console.log(`${event.code} ${event.keyCode}`);\n  key_state[code] = DOWN_EDGE;\n}\n\nlet temp_delta = vec2();\nfunction onMouseMove(event, no_stop) {\n  if (touch_mode) {\n    local_storage.setJSON('touch_mode', false);\n    touch_mode = false;\n  }\n  if (event.target.tagName !== 'INPUT' && !no_stop) {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n  if (event.offsetX !== undefined) {\n    mouse_pos[0] = event.offsetX;\n    mouse_pos[1] = event.offsetY;\n  } else {\n    mouse_pos[0] = event.layerX;\n    mouse_pos[1] = event.layerY;\n  }\n  mouse_pos_is_touch = false;\n\n  let any_movement = false;\n  if (pointerLocked()) {\n    if (event.movementX || event.movementY) {\n      v2set(temp_delta, event.movementX, event.movementY);\n      any_movement = true;\n    }\n  } else {\n    v2sub(temp_delta, mouse_pos, last_mouse_pos);\n    if (temp_delta[0] || temp_delta[1]) {\n      any_movement = true;\n    }\n  }\n  if (any_movement) {\n    for (let button = POINTERLOCK; button < mouse_down.length; ++button) {\n      if (mouse_down[button] || button === POINTERLOCK && pointerLocked()) {\n        let touch_data = touches[`m${button}`];\n        if (touch_data) {\n          v2add(touch_data.delta, touch_data.delta, temp_delta);\n          touch_data.total += abs(temp_delta[0]) + abs(temp_delta[1]);\n          v2copy(touch_data.cur_pos, mouse_pos);\n        }\n      }\n    }\n  }\n  v2copy(last_mouse_pos, mouse_pos);\n}\n\nfunction onMouseDown(event) {\n  onMouseMove(event); // update mouse_pos\n  glov_engine.sound_manager.resume();\n\n  let button = event.button;\n  mouse_down[button] = mouse_pos.slice(0);\n  let touch_id = `m${button}`;\n  if (touches[touch_id]) {\n    v2copy(touches[touch_id].start_pos, mouse_pos);\n    touches[touch_id].release = false;\n  } else {\n    touches[touch_id] = new TouchData(mouse_pos, false, button);\n  }\n}\n\nfunction onMouseUp(event) {\n  onMouseMove(event); // update mouse_pos\n  let no_click = event.target.tagName === 'INPUT';\n  let button = event.button;\n  if (mouse_down[button]) {\n    let touch_id = `m${button}`;\n    let touch_data = touches[touch_id];\n    if (touch_data) {\n      v2copy(touch_data.cur_pos, mouse_pos);\n      if (!no_click) {\n        touch_data.state = UP_EDGE;\n      }\n      touch_data.release = true;\n    }\n    delete mouse_down[button];\n  }\n}\n\nfunction onWheel(event) {\n  onMouseMove(event, true);\n  if (event.wheelDelta > 0) {\n    mouse_wheel++;\n  } else if (event.wheelDelta < 0) {\n    mouse_wheel--;\n  }\n}\n\nlet touch_pos = vec2();\nfunction onTouchChange(event) {\n  glov_engine.sound_manager.resume();\n  if (!touch_mode) {\n    local_storage.set('touch_mode', true);\n    touch_mode = true;\n  }\n  if (event.cancelable !== false) {\n    event.preventDefault();\n  }\n  let ct = event.touches;\n  let seen = {};\n\n  let new_count = ct.length;\n  let old_count = new_count;\n  // Look for press and movement\n  for (let ii = 0; ii < new_count; ++ii) {\n    let touch = ct[ii];\n    let last_touch = touches[touch.identifier];\n    v2set(touch_pos, touch.clientX, touch.clientY);\n    if (!last_touch) {\n      last_touch = touches[touch.identifier] = new TouchData(touch_pos, true, 0);\n      --old_count;\n    } else {\n      v2sub(temp_delta, touch_pos, last_touch.cur_pos);\n      v2add(last_touch.delta, last_touch.delta, temp_delta);\n      last_touch.total += abs(temp_delta[0]) + abs(temp_delta[1]);\n      v2copy(last_touch.cur_pos, touch_pos);\n    }\n    seen[touch.identifier] = true;\n    if (TOUCH_AS_MOUSE && new_count === 1) {\n      // Single touch, treat as mouse movement\n      v2copy(mouse_pos, touch_pos);\n      mouse_pos_is_touch = true;\n    }\n  }\n  // Look for release, if releasing exactly one final touch\n  let released_touch;\n  for (let id in touches) {\n    if (!seen[id]) {\n      let touch = touches[id];\n      if (touch.touch) {\n        ++old_count;\n        released_touch = touch;\n        touch.state = UP_EDGE;\n        touch.release = true;\n      }\n    }\n  }\n  if (TOUCH_AS_MOUSE) {\n    if (old_count === 1 && new_count === 0) {\n      delete mouse_down[0];\n      v2copy(mouse_pos, released_touch.cur_pos);\n      mouse_pos_is_touch = true;\n    } else if (new_count === 1) {\n      let touch = ct[0];\n      if (!old_count) {\n        mouse_down[0] = vec2(touch.clientX, touch.clientY);\n      }\n      v2set(mouse_pos, touch.clientX, touch.clientY);\n      mouse_pos_is_touch = true;\n    } else if (new_count > 1) {\n      // multiple touches, release mouse_down without emitting click\n      delete mouse_down[0];\n    }\n  }\n}\n\nexport function startup(_canvas) {\n  canvas = _canvas;\n\n  let passive_param = false;\n  try {\n    let opts = Object.defineProperty({}, 'passive', {\n      get: function () {\n        passive_param = { passive: false };\n        return false;\n      }\n    });\n    window.addEventListener('test', null, opts);\n    window.removeEventListener('test', null, opts);\n  } catch (e) {\n    passive_param = false;\n  }\n\n  canvas.requestPointerLock = canvas.requestPointerLock || canvas.mozRequestPointerLock || canvas.webkitRequestPointerLock;\n  document.exitPointerLock = document.exitPointerLock || document.mozExitPointerLock || document.webkitExitPointerLock || function () {/* nop */};\n\n  window.addEventListener('keydown', onKeyDown, false);\n  window.addEventListener('keyup', onKeyUp, false);\n\n  window.addEventListener('click', ignored, false);\n  window.addEventListener('contextmenu', ignored, false);\n  window.addEventListener('mousemove', onMouseMove, false);\n  window.addEventListener('mousedown', onMouseDown, false);\n  window.addEventListener('mouseup', onMouseUp, false);\n  window.addEventListener('DOMMouseScroll', onWheel, false);\n  window.addEventListener('mousewheel', onWheel, false);\n\n  canvas.addEventListener('touchstart', onTouchChange, passive_param);\n  canvas.addEventListener('touchmove', onTouchChange, passive_param);\n  canvas.addEventListener('touchend', onTouchChange, passive_param);\n  canvas.addEventListener('touchcancel', onTouchChange, passive_param);\n}\n\nconst DEADZONE = 0.26;\nconst DEADZONE_SQ = DEADZONE * DEADZONE;\nconst NUM_STICKS = 2;\nconst PAD_THRESHOLD = 0.25; // for turning analog motion into digital events\n\nfunction getGamepadData(idx) {\n  let gpd = gamepad_data[idx];\n  if (!gpd) {\n    gpd = gamepad_data[idx] = {\n      timestamp: 0,\n      sticks: new Array(NUM_STICKS)\n    };\n    for (let ii = 0; ii < NUM_STICKS; ++ii) {\n      gpd.sticks[ii] = vec2();\n    }\n    pad_states[idx] = {};\n  }\n  return gpd;\n}\n\nfunction updatePadState(ps, b, c) {\n  if (b && !ps[c]) {\n    ps[c] = DOWN_EDGE;\n  } else if (!b && ps[c]) {\n    ps[c] = UP_EDGE;\n  }\n}\n\nfunction gamepadUpdate() {\n  let gamepads = navigator.gamepads || navigator.webkitGamepads || navigator.getGamepads && navigator.getGamepads() || navigator.webkitGetGamepads && navigator.webkitGetGamepads();\n\n  if (gamepads) {\n    let numGamePads = gamepads.length;\n    for (let ii = 0; ii < numGamePads; ii++) {\n      let gamepad = gamepads[ii];\n      if (!gamepad) {\n        continue;\n      }\n      let gpd = getGamepadData(ii);\n      let ps = pad_states[ii];\n      // Update button states\n      if (gpd.timestamp < gamepad.timestamp) {\n        let buttons = gamepad.buttons;\n        gpd.timestamp = gamepad.timestamp;\n\n        let numButtons = buttons.length;\n        for (let n = 0; n < numButtons; n++) {\n          let value = buttons[n];\n          if (typeof value === 'object') {\n            value = value.value;\n          }\n          value = value > 0.5;\n          updatePadState(ps, value, n);\n        }\n      }\n\n      // Update axes states\n      let axes = gamepad.axes;\n      if (axes.length >= NUM_STICKS * 2) {\n        for (let n = 0; n < NUM_STICKS; ++n) {\n          let pair = gpd.sticks[n];\n          v2set(pair, axes[n * 2], -axes[n * 2 + 1]);\n          let magnitude = v2lengthSq(pair);\n          if (magnitude > DEADZONE_SQ) {\n            magnitude = sqrt(magnitude);\n\n            // Normalize lX and lY\n            v2scale(pair, pair, 1 / magnitude);\n\n            // Clip the magnitude at its max possible value\n            magnitude = min(magnitude, 1);\n\n            // Adjust magnitude relative to the end of the dead zone\n            magnitude = (magnitude - DEADZONE) / (1 - DEADZONE);\n\n            v2scale(pair, pair, magnitude);\n          } else {\n            v2set(pair, 0, 0);\n          }\n        }\n\n        // Calculate virtual directional buttons\n        updatePadState(ps, gpd.sticks[0][0] < -PAD_THRESHOLD, pad_codes.ANALOG_LEFT);\n        updatePadState(ps, gpd.sticks[0][0] > PAD_THRESHOLD, pad_codes.ANALOG_RIGHT);\n        updatePadState(ps, gpd.sticks[0][1] < -PAD_THRESHOLD, pad_codes.ANALOG_DOWN);\n        updatePadState(ps, gpd.sticks[0][1] > PAD_THRESHOLD, pad_codes.ANALOG_UP);\n      }\n    }\n  }\n}\n\nexport function tick() {\n  // browser frame has occurred since the call to endFrame(),\n  // we should now have `touches` and `key_state` populated with edge events\n  mouse_over_captured = false;\n  gamepadUpdate();\n  if (touches[pointerlock_touch_id] && !pointerLocked()) {\n    pointerLockExit();\n  }\n}\n\nfunction endFrameTickMap(map) {\n  Object.keys(map).forEach(keycode => {\n    switch (map[keycode]) {\n      case DOWN_EDGE:\n        map[keycode] = DOWN;\n        break;\n      case UP_EDGE:\n        delete map[keycode];\n        break;\n      default:\n    }\n  });\n}\nexport function endFrame() {\n  endFrameTickMap(key_state);\n  pad_states.forEach(endFrameTickMap);\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (touch_data.release) {\n      delete touches[touch_id];\n    } else {\n      touch_data.delta[0] = touch_data.delta[1] = 0;\n      touch_data.dispatched = false;\n      if (touch_data.state === DOWN_EDGE) {\n        touch_data.state = DOWN;\n      } else {\n        assert(touch_data.state !== UP_EDGE); // should also have set .release!\n      }\n    }\n  }\n  mouse_wheel = 0;\n  input_eaten_kb = false;\n  input_eaten_mouse = false;\n}\n\nexport function eatAllInput() {\n  // destroy touches, remove all down and up edges\n  endFrame();\n  mouse_over_captured = true;\n  input_eaten_kb = true;\n  input_eaten_mouse = true;\n}\n\nexport function eatAllKeyboardInput() {\n  let touches_save = touches;\n  let over_save = mouse_over_captured;\n  let eaten_mouse_save = input_eaten_mouse;\n  eatAllInput();\n  touches = touches_save;\n  mouse_over_captured = over_save;\n  input_eaten_mouse = eaten_mouse_save;\n}\n\n// returns position mapped to current camera view\nexport function mousePos(dst) {\n  dst = dst || vec2();\n  camera2d.physicalToVirtual(dst, mouse_pos);\n  return dst;\n}\n\nexport function mouseWheel() {\n  let ret = mouse_wheel;\n  mouse_wheel = 0;\n  return ret;\n}\n\nfunction mousePosParam(param) {\n  param = param || {};\n  return {\n    x: param.x === undefined ? camera2d.x0() : param.x,\n    y: param.y === undefined ? camera2d.y0() : param.y,\n    w: param.w === undefined ? camera2d.w() : param.w,\n    h: param.h === undefined ? camera2d.h() : param.h,\n    button: param.button === undefined ? ANY : param.button\n  };\n}\n\nlet check_pos = vec2();\nfunction checkPos(pos, param) {\n  camera2d.physicalToVirtual(check_pos, pos);\n  return check_pos[0] >= param.x && (param.w === Infinity || check_pos[0] < param.x + param.w) && check_pos[1] >= param.y && (param.h === Infinity || check_pos[1] < param.y + param.h);\n}\n\nexport function mouseOver(param) {\n  if (mouse_over_captured) {\n    return false;\n  }\n  let pos_param = mousePosParam(param);\n\n  // eat mouse up/down events\n  for (let id in touches) {\n    let touch = touches[id];\n    if (checkPos(touch.cur_pos, pos_param)) {\n      if (touch.state === DOWN_EDGE) {\n        touch.state = DOWN;\n      } else if (touch.state === UP_EDGE) {\n        touch.state = null;\n      }\n    }\n  }\n\n  if (checkPos(mouse_pos, pos_param)) {\n    mouse_over_captured = true;\n    return true;\n  }\n  return false;\n}\n\nexport function mouseDown(button) {\n  if (button === ANY) {\n    return mouseDown(0) || mouseDown(2);\n  }\n  button = button || 0;\n  return !input_eaten_mouse && mouse_down[button];\n}\n\nexport function mousePosIsTouch() {\n  return mouse_pos_is_touch;\n}\n\nexport function isTouchDown(param) {\n  if (input_eaten_mouse) {\n    return false;\n  }\n  let pos_param = mousePosParam(param);\n  for (let id in touches) {\n    let touch = touches[id];\n    if (checkPos(touch.cur_pos, pos_param)) {\n      return check_pos.slice(0);\n    }\n  }\n  return false;\n}\n\nexport function numTouches() {\n  return Object.keys(touches).length;\n}\n\nexport function keyDown(keycode) {\n  if (input_eaten_kb) {\n    return false;\n  }\n  return Boolean(key_state[keycode]);\n}\nexport function keyDownEdge(keycode) {\n  if (key_state[keycode] === DOWN_EDGE) {\n    key_state[keycode] = DOWN;\n    return true;\n  }\n  return false;\n}\nexport function keyUpEdge(keycode) {\n  if (key_state[keycode] === UP_EDGE) {\n    delete key_state[keycode];\n    return true;\n  }\n  return false;\n}\n\nexport function padGetAxes(out, stickindex, padindex) {\n  assert(stickindex >= 0 && stickindex < NUM_STICKS);\n  if (padindex === undefined) {\n    let sub = vec2();\n    v2set(out, 0, 0);\n    for (let ii = 0; ii < gamepad_data.length; ++ii) {\n      padGetAxes(sub, stickindex, ii);\n      v2add(out, sub);\n    }\n    return;\n  }\n  let sticks = getGamepadData(padindex).sticks;\n  v2copy(out, sticks[stickindex]);\n}\n\nfunction padButtonDownInternal(ps, padcode) {\n  return Boolean(ps[padcode]);\n}\nfunction padButtonDownEdgeInternal(ps, padcode) {\n  if (ps[padcode] === DOWN_EDGE) {\n    ps[padcode] = DOWN;\n    return true;\n  }\n  return false;\n}\nfunction padButtonUpEdgeInternal(ps, padcode) {\n  if (ps[padcode] === UP_EDGE) {\n    delete ps[padcode];\n    return true;\n  }\n  return false;\n}\n\nconst ANALOG_MAP = function () {\n  if (!MAP_ANALOG_TO_DPAD) {\n    return {};\n  }\n  let r = {};\n  r[pad_codes.LEFT] = pad_codes.ANALOG_LEFT;\n  r[pad_codes.RIGHT] = pad_codes.ANALOG_RIGHT;\n  r[pad_codes.UP] = pad_codes.ANALOG_UP;\n  r[pad_codes.DOWN] = pad_codes.ANALOG_DOWN;\n  return r;\n}();\nfunction padButtonShared(fn, padcode, padindex) {\n  assert(padcode !== undefined);\n  // Handle calling without a specific pad index\n  if (padindex === undefined) {\n    for (let ii = 0; ii < pad_states.length; ++ii) {\n      if (padButtonShared(fn, padcode, ii)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  if (input_eaten_mouse) {\n    return false;\n  }\n  let ps = pad_states[padindex];\n  if (!ps) {\n    return false;\n  }\n\n  if (ANALOG_MAP[padcode] && fn(ps, ANALOG_MAP[padcode])) {\n    return true;\n  }\n  return fn(ps, padcode);\n}\nexport function padButtonDown(padcode, padindex) {\n  return padButtonShared(padButtonDownInternal, padcode, padindex);\n}\nexport function padButtonDownEdge(padcode, padindex) {\n  return padButtonShared(padButtonDownEdgeInternal, padcode, padindex);\n}\nexport function padButtonUpEdge(padcode, padindex) {\n  return padButtonShared(padButtonUpEdgeInternal, padcode, padindex);\n}\n\nlet start_pos = vec2();\nlet cur_pos = vec2();\nlet delta = vec2();\n\nexport function mouseUpEdge(param) {\n  param = param || {};\n  let pos_param = mousePosParam(param);\n  let button = pos_param.button;\n  let max_click_dist = param.max_dist || 50; // TODO: relative to camera distance?\n\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (touch_data.state !== UP_EDGE || !(button === ANY || button === touch_data.button) || touch_data.total > max_click_dist) {\n      continue;\n    }\n    if (checkPos(touch_data.cur_pos, pos_param)) {\n      touch_data.state = null;\n      return {\n        button: touch_data.button,\n        pos: check_pos.slice(0),\n        start_time: touch_data.start_time\n      };\n    }\n  }\n  return false;\n}\nexports.click = mouseUpEdge;\n\nexport function mouseDownEdge(param) {\n  param = param || {};\n  let pos_param = mousePosParam(param);\n  let button = pos_param.button;\n\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (touch_data.state !== DOWN_EDGE || !(button === ANY || button === touch_data.button)) {\n      continue;\n    }\n    if (checkPos(touch_data.cur_pos, pos_param)) {\n      touch_data.state = DOWN;\n      return {\n        button: touch_data.button,\n        pos: check_pos.slice(0),\n        start_time: touch_data.start_time\n      };\n    }\n  }\n  return false;\n}\n\nexport function drag(param) {\n  param = param || {};\n  let pos_param = mousePosParam(param);\n  let button = pos_param.button;\n\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (!(button === ANY || button === touch_data.button) || touch_data.dispatched) {\n      continue;\n    }\n    if (checkPos(touch_data.start_pos, pos_param)) {\n      if (!param.peek) {\n        touch_data.dispatched = true;\n      }\n      camera2d.physicalToVirtual(start_pos, touch_data.start_pos);\n      camera2d.physicalToVirtual(cur_pos, touch_data.cur_pos);\n      camera2d.physicalDeltaToVirtual(delta, [touch_data.total / 2, touch_data.total / 2]);\n      let total = delta[0] + delta[1];\n      camera2d.physicalDeltaToVirtual(delta, touch_data.delta);\n      return {\n        cur_pos,\n        start_pos,\n        delta, // this frame's delta\n        total, // total (linear) distance dragged\n        button: touch_data.button,\n        touch: touch_data.touch,\n        start_time: touch_data.start_time\n      };\n    }\n  }\n  return null;\n}","/* eslint-env browser */\n\nexports.storage_prefix = 'demo';\n\nlet local_storage_sim = {};\nlet lsd = function () {\n  try {\n    localStorage.test = 'test';\n    return localStorage;\n  } catch (e) {\n    return local_storage_sim;\n  }\n}();\nexport function get(key) {\n  key = `${exports.storage_prefix}_${key}`;\n  let ret = lsd[key];\n  if (ret === 'undefined') {\n    ret = undefined;\n  }\n  return ret;\n}\n\nexport function set(key, value) {\n  key = `${exports.storage_prefix}_${key}`;\n  if (value === undefined || value === null) {\n    delete lsd[key];\n  } else {\n    lsd[key] = value;\n  }\n}\n\nexport function setJSON(key, value) {\n  set(key, JSON.stringify(value));\n}\n\nexport function getJSON(key, def) {\n  let value = get(key);\n  try {\n    return JSON.parse(value);\n  } catch (e) {\n    // ignore\n  }\n  return def;\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n// Some code from Turbulenz: Copyright (c) 2012-2013 Turbulenz Limited\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nexport function mat43() {\n  let r = new Float32Array(12);\n  r[0] = r[4] = r[8] = 1;\n  return r;\n}\n\nexport function m43identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  out[9] = 0;\n  out[10] = 0;\n  out[11] = 0;\n}\n\nexport function m43mul(out, a, b) {\n  let a0 = a[0];\n  let a1 = a[1];\n  let a2 = a[2];\n  let a3 = a[3];\n  let a4 = a[4];\n  let a5 = a[5];\n  let a6 = a[6];\n  let a7 = a[7];\n  let a8 = a[8];\n  let a9 = a[9];\n  let a10 = a[10];\n  let a11 = a[11];\n\n  let b0 = b[0];\n  let b1 = b[1];\n  let b2 = b[2];\n  let b3 = b[3];\n  let b4 = b[4];\n  let b5 = b[5];\n  let b6 = b[6];\n  let b7 = b[7];\n  let b8 = b[8];\n\n  out[0] = b0 * a0 + b3 * a1 + b6 * a2;\n  out[1] = b1 * a0 + b4 * a1 + b7 * a2;\n  out[2] = b2 * a0 + b5 * a1 + b8 * a2;\n  out[3] = b0 * a3 + b3 * a4 + b6 * a5;\n  out[4] = b1 * a3 + b4 * a4 + b7 * a5;\n  out[5] = b2 * a3 + b5 * a4 + b8 * a5;\n  out[6] = b0 * a6 + b3 * a7 + b6 * a8;\n  out[7] = b1 * a6 + b4 * a7 + b7 * a8;\n  out[8] = b2 * a6 + b5 * a7 + b8 * a8;\n  out[9] = b0 * a9 + b3 * a10 + b6 * a11 + b[9];\n  out[10] = b1 * a9 + b4 * a10 + b7 * a11 + b[10];\n  out[11] = b2 * a9 + b5 * a10 + b8 * a11 + b[11];\n\n  return out;\n}","//////////////////////////////////////////////////////////////////////////\n// Particle System Spec\n\n/*\n// Definitions\n// value = number or\n// value = [base, add_max] -> generates a number in the range [base, base + add_max)\nlet def_fire = {\n  particles: {\n    fire: {\n      blend: 'additive',\n      texture: 'fire.png',\n      color: [1,1,1,1], // multiplied by animation track, default 1,1,1,1, can be omitted\n      color_track: [ // just values, NOT random range\n        { t: 0.0, v: [1,0.4,0.4,1] },\n        { t: 0.7, v: [1,0,0,1] },\n        { t: 0.9, v: [0.2,0,0,1] },\n        { t: 1.0, v: [0,0,0,1] },\n      ],\n      size: [[32,16], [32,16]], // multiplied by animation track\n      size_track: [ // just values, NOT random range\n        { t: 0.0, v: [1,1] },\n        { t: 0.4, v: [0.5,0.5] },\n        { t: 0.7, v: [1,1] },\n        { t: 1.0, v: [1.5,1.5] },\n      ],\n      accel: [0,0],\n      rot: [0,360], // degrees\n      rot_vel: [10,2], // degrees per second\n      lifespan: [450,0], // milliseconds\n      kill_time_accel: 5,\n    },\n  },\n  emitters: {\n    fire: {\n      particle: 'fire',\n      // Random ranges affect each emitted particle:\n      pos: [[0,28], [0,28]],\n      vel: [0,0],\n      emit_rate: [60,20], // emissions per second\n      // Random ranges only calculated upon instantiation:\n      emit_time: [0,Infinity],\n      emit_initial: 10,\n    },\n  },\n  system_lifespan: Infinity, // must be manually killed\n};\n\n// Usage\nlet system = glov_engine.glov_particles.createSystem(def_fire, [50, 50, Z.PARTICLES]);\nsystem.updatePos(75, 75);\nsystem.killSoft(); // stops emitting and speeds up particles by kill_time_accel\nsystem.killHard(); // immediately stops drawing\n\n*/\n\n//////////////////////////////////////////////////////////////////////////\n// Implementation\n\nconst assert = require('assert');\nconst sprites = require('./sprites.js');\nconst textures = require('./textures.js');\nconst { vec2, v2copy, v2lerp, v2mul } = require('./vmath.js');\nconst { vec3, vec4, v3add, v4copy, v4lerp, v4mul } = require('./vmath.js');\n\nconst blend_map = {\n  alpha: sprites.BLEND_ALPHA,\n  additive: sprites.BLEND_ADDITIVE\n};\n\nexport function preloadParticleData(particle_data) {\n  // Preload all referenced particle textures\n  for (let key in particle_data.defs) {\n    let def = particle_data.defs[key];\n    for (let part_name in def.particles) {\n      let part_def = def.particles[part_name];\n      textures.load({ url: `img/${part_def.texture}.png` });\n    }\n  }\n}\n\n// Expect all values to be a pair of [base, add_max]\nfunction normalizeValue(v) {\n  if (v instanceof Float32Array && v.length >= 2) {\n    return v;\n  } else if (typeof v === 'number') {\n    return vec2(v, 0);\n  } else if (Array.isArray(v) || v instanceof Float32Array) {\n    // already an array, convert to Vec2\n    return vec2(v[0] || 0, v[1] || 0);\n  } else {\n    return assert(false);\n  }\n}\n\nfunction normalizeValueVec(vec, length) {\n  assert(length);\n  assert(Array.isArray(vec));\n  let ret = new Array(length);\n  for (let ii = 0; ii < length; ++ii) {\n    ret[ii] = normalizeValue(vec[ii]);\n  }\n  return ret;\n}\n\nfunction normalizeParticle(def, particle_manager) {\n  if (!def.normalized) {\n    let norm = def.normalized = {\n      blend: blend_map[def.blend] || sprites.BLEND_ALPHA,\n      texture: textures.load({ url: def.texture ? `img/${def.texture}.png` : 'img/glov/util_circle.png' }),\n      color: normalizeValueVec(def.color || [1, 1, 1, 1], 4),\n      color_track: null,\n      size: normalizeValueVec(def.size || [1, 1], 2),\n      size_track: null,\n      accel: normalizeValueVec(def.accel || [0, 0, 0], 3),\n      rot: normalizeValue(def.rot || 0),\n      rot_vel: normalizeValue(def.rot || 0),\n      lifespan: normalizeValue(def.lifespan || 1000),\n      kill_time_accel: normalizeValue(def.kill_time_accel || 1)\n    };\n    assert(norm.kill_time_accel[0] >= 1); // cannot slow down on kill!\n    if (def.color_track && def.color_track.length) {\n      assert(def.color_track.length > 1);\n      norm.color_track = [];\n      for (let ii = 0; ii < def.color_track.length; ++ii) {\n        let e = def.color_track[ii];\n        assert(typeof e.t === 'number');\n        let arr = new Float32Array(5);\n        arr[0] = e.v[0];\n        arr[1] = e.v[1];\n        arr[2] = e.v[2];\n        arr[3] = e.v[3];\n        arr[4] = e.t;\n        norm.color_track.push(arr);\n      }\n    }\n    if (def.size_track && def.size_track.length) {\n      assert(def.size_track.length > 1);\n      norm.size_track = [];\n      for (let ii = 0; ii < def.size_track.length; ++ii) {\n        let e = def.size_track[ii];\n        assert(typeof e.t === 'number');\n        let arr = new Float32Array(3);\n        arr[0] = e.v[0];\n        arr[1] = e.v[1];\n        arr[2] = e.t;\n        norm.size_track.push(arr);\n      }\n    }\n  }\n  return def.normalized;\n}\n\nfunction findParticle(particles, name) {\n  assert(particles[name] !== undefined);\n  return particles[name];\n}\n\nfunction normalizeEmitter(def, part_map) {\n  if (!def.normalized) {\n    def.normalized = {\n      part_idx: findParticle(part_map, def.particle),\n      pos: normalizeValueVec(def.pos || [0, 0, 0], 3),\n      vel: normalizeValueVec(def.vel || [0, 0, 0], 3),\n      emit_rate: normalizeValue(def.emit_rate || 10),\n      emit_time: normalizeValueVec(def.emit_time || [0, Infinity], 2),\n      emit_initial: normalizeValue(def.emit_initial || 1)\n    };\n    // convert particles per second to ms per emission\n    let min = def.normalized.emit_rate[0];\n    let max = def.normalized.emit_rate[0] + def.normalized.emit_rate[1];\n    def.normalized.emit_rate[0] = 1000 / max;\n    def.normalized.emit_rate[1] = 1000 / min;\n    assert(def.normalized.emit_rate[0] > 1); // Not more than 1000 per second, that's ridic'.\n  }\n  return def.normalized;\n}\n\nfunction normalizeDef(def, particle_manager) {\n  if (!def.normalized) {\n    let norm = def.normalized = {\n      system_lifespan: normalizeValue(def.system_lifespan || Infinity),\n      particles: [],\n      emitters: []\n    };\n    let part_map = {};\n    for (let key in def.particles) {\n      part_map[key] = norm.particles.length;\n      norm.particles.push(normalizeParticle(def.particles[key], particle_manager));\n    }\n    for (let key in def.emitters) {\n      norm.emitters.push(normalizeEmitter(def.emitters[key], part_map));\n    }\n  }\n  return def.normalized;\n}\n\nfunction instValue(v) {\n  return v[0] + Math.random() * v[1];\n}\nfunction instValueVec(v) {\n  let ret = new Float32Array(v.length);\n  for (let ii = 0; ii < v.length; ++ii) {\n    ret[ii] = instValue(v[ii]);\n  }\n  return ret;\n}\n\nlet temp_color = vec4();\nlet temp_color2 = vec4();\nlet temp_size = vec2();\nlet temp_size2 = vec2();\n// let temp_pos = v3allocZero();\n\nclass ParticleSystem {\n  constructor(parent, def_in, pos) {\n    assert(pos.length === 3);\n    this.parent = parent;\n    this.def = normalizeDef(def_in, parent);\n    this.system_lifespan = instValue(this.def.system_lifespan);\n    assert(this.system_lifespan > 0);\n    this.age = 0;\n    this.kill_hard = false;\n    this.kill_soft = false;\n    this.pos = vec3(pos[0], pos[1], pos[2]);\n    this.part_sets = [];\n    for (let ii = 0; ii < this.def.particles.length; ++ii) {\n      let def = this.def.particles[ii];\n      let part_set = {\n        def,\n        parts: []\n      };\n      this.part_sets.push(part_set);\n    }\n    this.emitters = [];\n    // Instantiate emitters\n    for (let ii = 0; ii < this.def.emitters.length; ++ii) {\n      let def = this.def.emitters[ii];\n      let emitter = {\n        def,\n        emit_time: instValueVec(def.emit_time),\n        countdown: 0,\n        started: false,\n        stopped: false\n      };\n      this.emitters.push(emitter);\n    }\n    // do initial tick for things that have an emit_time[0] of 0 and have an emit_initial\n    this.tick(0);\n  }\n\n  tickParticle(part, dt) {\n    // eslint-disable-line class-methods-use-this\n    let def = part.def;\n    part.age += dt;\n    let age_norm = part.age / part.lifespan;\n    if (age_norm >= 1) {\n      return true;\n    }\n\n    // Pos, vel - incrementally computed\n    let dts = dt / 1000;\n    part.pos[0] += part.vel[0] * dts;\n    part.pos[1] += part.vel[1] * dts;\n    part.pos[2] += part.vel[2] * dts;\n    part.vel[0] += part.accel[0] * dts;\n    part.vel[1] += part.accel[1] * dts;\n    part.vel[2] += part.accel[2] * dts;\n\n    // Color, size, rot - explicitly computed\n    v4copy(temp_color, part.color, temp_color);\n    if (def.color_track) {\n      if (age_norm < def.color_track[0][4]) {\n        v4mul(temp_color, temp_color, def.color_track[0]);\n      } else if (age_norm >= def.color_track[def.color_track.length - 1][4]) {\n        v4mul(temp_color, temp_color, def.color_track[def.color_track.length - 1]);\n      } else {\n        for (let ii = 0; ii < def.color_track.length - 1; ++ii) {\n          if (age_norm >= def.color_track[ii][4] && age_norm < def.color_track[ii + 1][4]) {\n            let weight = (age_norm - def.color_track[ii][4]) / (def.color_track[ii + 1][4] - def.color_track[ii][4]);\n            v4lerp(temp_color2, weight, def.color_track[ii], def.color_track[ii + 1]);\n            v4mul(temp_color, temp_color, temp_color2);\n            break;\n          }\n        }\n      }\n    }\n\n    v2copy(temp_size, part.size);\n    if (def.size_track) {\n      if (age_norm < def.size_track[0][4]) {\n        v2mul(temp_size, temp_size, def.size_track[0]);\n      } else if (age_norm >= def.size_track[def.size_track.length - 1][4]) {\n        v2mul(temp_size, temp_size, def.size_track[def.size_track.length - 1]);\n      } else {\n        for (let ii = 0; ii < def.size_track.length - 1; ++ii) {\n          if (age_norm >= def.size_track[ii][4] && age_norm < def.size_track[ii + 1][4]) {\n            let weight = (age_norm - def.size_track[ii][4]) / (def.size_track[ii + 1][4] - def.size_track[ii][4]);\n            v2lerp(temp_size2, weight, def.size_track[ii], def.size_track[ii + 1]);\n            v2mul(temp_size, temp_size, temp_size2);\n            break;\n          }\n        }\n      }\n    }\n\n    // TODO: let rot = part.rot + part.age * part.rot_vel;\n\n    // TODO: draw using:\n    //   rot\n    let w = part.size[0];\n    let h = part.size[1];\n    let x = part.pos[0] - w / 2;\n    let y = part.pos[1] - h / 2;\n    let z = part.pos[2];\n    sprites.queueraw4([def.texture], x, y, x, y + h, x + w, y + h, x + w, y, z, 0, 0, 1, 1, temp_color, null, null, def.blend);\n\n    return false;\n  }\n\n  tickPartSet(dt_orig, part_set) {\n    //let def = part_set.def;\n    let parts = part_set.parts;\n    for (let ii = parts.length - 1; ii >= 0; --ii) {\n      let part = parts[ii];\n      let dt = this.kill_soft ? dt_orig * part.kill_time_accel : dt_orig;\n      if (this.tickParticle(part, dt)) {\n        parts[ii] = parts[parts.length - 1];\n        parts.pop();\n      }\n    }\n  }\n\n  emitParticle(init_dt, emitter) {\n    let emitter_def = emitter.def;\n    let part_set = this.part_sets[emitter_def.part_idx];\n    let def = part_set.def;\n    let pos = instValueVec(emitter_def.pos, 3);\n    v3add(pos, pos, this.pos);\n    // PERFTODO: Make the whole Particle just a data[] Float32Array\n    let part = {\n      def,\n      pos,\n      color: instValueVec(def.color, 4),\n      size: instValueVec(def.size, 4),\n      vel: instValueVec(emitter_def.vel, 3),\n      accel: instValueVec(def.accel, 3),\n      rot: instValue(def.rot),\n      rot_vel: instValue(def.rot_vel),\n      lifespan: instValue(def.lifespan),\n      kill_time_accel: instValue(def.kill_time_accel),\n      age: 0\n    };\n    if (!this.tickParticle(part, init_dt)) {\n      part_set.parts.push(part);\n    }\n  }\n\n  tickEmitter(dt, emitter) {\n    let def = emitter.def;\n    // check for initial emission\n    if (!emitter.started && this.age >= emitter.emit_time[0]) {\n      emitter.started = true;\n      // ignore time before we started emitting\n      dt = this.age - emitter.emit_time[0];\n      let num = instValue(def.emit_initial);\n      for (let ii = 0; ii < num; ++ii) {\n        this.emitParticle(dt, emitter);\n      }\n      emitter.countdown = instValue(def.emit_rate);\n    }\n    if (emitter.started && !emitter.stopped) {\n      // should we stop?\n      let remaining_dt = dt;\n      let emit_dt = dt;\n      if (this.age >= emitter.emit_time[1]) {\n        emitter.stopped = true;\n        // Do not emit during time after we stopped\n        emit_dt -= this.age - emitter.emit_time[1];\n      }\n      // Emit dt's worth of particles\n      while (emit_dt >= emitter.countdown) {\n        emit_dt -= emitter.countdown;\n        remaining_dt -= emitter.countdown;\n        emitter.countdown = instValue(def.emit_rate);\n        this.emitParticle(remaining_dt, emitter);\n      }\n      emitter.countdown -= emit_dt;\n    }\n  }\n\n  tick(dt) {\n    if (this.kill_hard) {\n      return true;\n    }\n    // tick existing particles\n    for (let ii = this.part_sets.length - 1; ii >= 0; --ii) {\n      this.tickPartSet(dt, this.part_sets[ii]);\n    }\n    // advance time and spawn new ones (with partial ticks)\n    this.age += dt;\n    for (let ii = 0; ii < this.emitters.length; ++ii) {\n      this.tickEmitter(dt, this.emitters[ii]);\n    }\n\n    return this.age >= this.system_lifespan; // kill if past lifespan\n  }\n}\n\nclass ParticleManager {\n  constructor() {\n    this.systems = [];\n  }\n\n  createSystem(def, pos) {\n    let system = new ParticleSystem(this, def, pos);\n    this.systems.push(system);\n    return system;\n  }\n\n  tick(dt) {\n    for (let ii = this.systems.length - 1; ii >= 0; --ii) {\n      if (this.systems[ii].tick(dt)) {\n        this.systems[ii] = this.systems[this.systems.length - 1];\n        this.systems.pop();\n      }\n    }\n  }\n}\n\nexport function create(...args) {\n  return new ParticleManager(...args);\n}","/* eslint complexity:off */\n/*global Z: false */\nconst assert = require('assert');\nconst glov_engine = require('./engine.js');\nconst glov_input = require('./input.js');\nconst glov_font = require('./font.js');\nconst glov_ui = require('./ui.js');\nconst { vec4 } = require('./vmath.js');\nlet glov_markup = null; // Not ported\n\nconst { min, max, sin } = Math;\nconst { cloneShallow, merge, nearSame } = require('../../common/util.js');\n\nlet font;\n\nconst selbox_font_style_default = glov_font.style(null, {\n  color: 0xDFDFDFff\n});\n\nconst selbox_font_style_selected = glov_font.style(null, {\n  color: 0xFFFFFFff\n});\n\nconst selbox_font_style_down = glov_font.style(null, {\n  color: 0x000000ff\n});\n\nconst selbox_font_style_disabled = glov_font.style(null, {\n  color: 0x808080ff\n});\n\nexport const default_display = {\n  style_default: selbox_font_style_default,\n  style_selected: selbox_font_style_selected,\n  style_disabled: selbox_font_style_disabled,\n  style_down: selbox_font_style_down,\n  no_background: false,\n  no_buttons: false,\n  centered: false,\n  bounce: true,\n  tab_stop: 0,\n  xpad: 8,\n  // selection_highlight: null, // TODO: custom / better selection highlight for menus\n  use_markup: false // always false, Markup not ported\n};\n\nconst color_gray50 = vec4(0.313, 0.313, 0.313, 1.000);\n// const color_gray80 = vec4(0.500, 0.500, 0.500, 1.000);\nconst color_grayD0 = vec4(0.816, 0.816, 0.816, 1.000);\nconst color_white = vec4(1, 1, 1, 1);\n\nconst SELBOX_BOUNCE_TIME = 80;\n\n// Used by GlovSimpleMenu and GlovSelectionBox\nexport class GlovMenuItem {\n  constructor(params) {\n    params = params || {};\n    if (params instanceof GlovMenuItem) {\n      for (let field in params) {\n        this[field] = params[field];\n      }\n      return;\n    }\n    if (typeof params === 'string') {\n      params = { name: params };\n    }\n    this.name = params.name || 'NO_NAME'; // name to display\n    this.state = params.state || null; // state to set upon selection\n    this.cb = params.cb || null; // callback to call upon selection\n    // TODO - cb function on value change?\n    this.value = null; // can be number or string\n    this.value_min = 0;\n    this.value_max = 0;\n    this.value_inc = 0;\n    this.tag = params.tag || null; // for isSelected(tag)\n    // was bitmask\n    this.exit = Boolean(params.exit);\n    this.prompt_int = Boolean(params.prompt_int);\n    this.prompt_string = Boolean(params.prompt_string);\n    this.no_sound = Boolean(params.no_sound);\n    this.slider = Boolean(params.slider);\n    this.no_controller_exit = Boolean(params.no_controller_exit);\n    this.plus_minus = Boolean(params.plus_minus);\n    this.disabled = Boolean(params.disabled);\n    this.centered = Boolean(params.centered);\n  }\n}\n\nclass GlovSelectionBox {\n  constructor(params) {\n    // Options (and defaults)\n    this.x = 0;\n    this.y = 0;\n    this.z = Z.UI;\n    this.width = glov_ui.button_width;\n    this.items = [];\n    this.is_dropdown = false;\n    this.transient_focus = false;\n    this.disabled = false;\n    this.display = cloneShallow(default_display);\n    this.scroll_height = 0;\n    this.font_height = glov_ui.font_height;\n    this.entry_height = glov_ui.button_height;\n    this.auto_reset = true;\n    this.applyParams(params);\n\n    // Run-time state\n    this.dropdown_visible = false;\n    this.selected = 0;\n    this.was_clicked = false;\n    this.was_right_clicked = false;\n    this.is_focused = false;\n    this.dummy_focus_check = { selbox_dummy: 1 };\n    this.mouse_mode = false;\n    this.last_mousex = 0;\n    this.last_mousey = 0;\n    this.bounce_time = 0;\n    this.expected_frame_index = 0;\n    // this.sa = TODO\n  }\n\n  applyParams(params) {\n    if (!params) {\n      return;\n    }\n    for (let f in params) {\n      if (f === 'items') {\n        this.items = params.items.map(item => new GlovMenuItem(item));\n      } else if (f === 'display') {\n        merge(this.display, params[f]);\n      } else {\n        this[f] = params[f];\n      }\n    }\n  }\n\n  isSelected(tag_or_index) {\n    if (typeof tag_or_index === 'number') {\n      return this.selected === tag_or_index;\n    }\n    return this.items[this.selected].tag === tag_or_index;\n  }\n\n  getHeight() {\n    let { display, entry_height } = this;\n    if (this.is_dropdown) {\n      return entry_height + 2;\n    }\n    let list_height = this.items.length * entry_height;\n    let do_scroll = this.scroll_height && this.items.length * entry_height > this.scroll_height;\n    if (do_scroll) {\n      list_height = this.scroll_height;\n    }\n    list_height += 2;\n    if (!display.no_background) {\n      list_height += 4;\n    }\n    return list_height + 3;\n  }\n\n  run(params) {\n    this.applyParams(params);\n    let { x, y, z, width, font_height, entry_height, auto_reset } = this;\n    let { KEYS, pad_codes } = glov_input;\n\n    if (auto_reset && this.expected_frame_index !== glov_engine.getFrameIndex()) {\n      // Reset, select first non-disabled entry\n      for (let ii = 0; ii < this.items.length; ++ii) {\n        if (!this.items[ii].disabled) {\n          this.selected = ii;\n          break;\n        }\n      }\n    }\n\n    let y0 = y;\n    let yret;\n    let display = this.display;\n    this.was_clicked = false;\n    this.was_right_clicked = false;\n    let pos_changed = false;\n\n    let was_focused = this.is_focused;\n    // Trick to detect if we gained focus from ahead or behind of ourselves, for transient_focus mode\n    let gained_focus_forward = false;\n    if (!this.disabled && !this.is_focused) {\n      gained_focus_forward = glov_ui.focusCheck(this.dummy_focus_check);\n      if (gained_focus_forward) {\n        glov_ui.focusSteal(this);\n      }\n    }\n\n    let old_sel = this.selected;\n    let num_non_disabled_selections = 0;\n    let eff_sel = -1;\n    for (let ii = 0; ii < this.items.length; ++ii) {\n      let item = this.items[ii];\n      if (!item.disabled) {\n        if (eff_sel === -1 && this.selected <= ii) {\n          eff_sel = num_non_disabled_selections;\n        }\n        num_non_disabled_selections++;\n      }\n    }\n    // This is OK, can have an empty selection box: assert(num_non_disabled_selections);\n    if (eff_sel === -1) {\n      // perhaps had the end selected, and selection became smaller\n      eff_sel = 0;\n    }\n\n    let focused = this.is_focused = this.disabled ? false : glov_ui.focusCheck(this);\n    let gained_focus = focused && !was_focused;\n    if (this.transient_focus && gained_focus) {\n      if (gained_focus_forward) {\n        eff_sel = 0;\n      } else {\n        eff_sel = num_non_disabled_selections - 1;\n      }\n      pos_changed = true;\n    }\n\n    if (!this.is_dropdown && !display.no_background) {\n      let bg_height = this.getHeight();\n      if (focused) {\n        glov_ui.drawRect(x, y, x + width, y + bg_height - 2, z, color_white);\n        y += 2;\n        x += 2;\n        width -= 4;\n        glov_ui.drawRect(x, y, x + width, y + bg_height - 6, z + 0.1, color_gray50);\n        y += 2;\n        x += 2;\n        width -= 4;\n      } else {\n        glov_ui.drawRect(x, y, x + width, y + bg_height - 2, z, color_gray50);\n        y += 4;\n        x += 4;\n        width -= 8;\n      }\n    }\n\n    let page_size = (this.scroll_height - 1) / entry_height;\n\n    if (focused) {\n      if (glov_input.keyDownEdge(KEYS.PAGEDOWN) || (glov_input.padButtonDown(pad_codes.RIGHT_TRIGGER) || glov_input.padButtonDown(pad_codes.LEFT_TRIGGER)) && glov_input.padButtonDownEdge(pad_codes.DOWN)) {\n        eff_sel += page_size;\n        eff_sel = min(eff_sel, num_non_disabled_selections - 1);\n        this.mouse_mode = false;\n        pos_changed = true;\n      }\n      if (glov_input.keyDownEdge(KEYS.PAGEUP) || (glov_input.padButtonDown(pad_codes.RIGHT_TRIGGER) || glov_input.padButtonDown(pad_codes.LEFT_TRIGGER)) && glov_input.padButtonDownEdge(pad_codes.UP)) {\n        eff_sel -= page_size;\n        eff_sel = max(eff_sel, 0);\n        this.mouse_mode = false;\n        pos_changed = true;\n      }\n      if (glov_input.keyDownEdge(KEYS.DOWN) || glov_input.keyDownEdge(KEYS.S) || glov_input.padButtonDownEdge(pad_codes.DOWN)) {\n        eff_sel++;\n        this.mouse_mode = false;\n        pos_changed = true;\n      }\n      if (glov_input.keyDownEdge(KEYS.UP) || glov_input.keyDownEdge(KEYS.W) || glov_input.padButtonDownEdge(pad_codes.UP)) {\n        eff_sel--;\n        this.mouse_mode = false;\n        pos_changed = true;\n      }\n      if (glov_input.keyDownEdge(KEYS.HOME)) {\n        eff_sel = 0;\n        this.mouse_mode = false;\n        pos_changed = true;\n      }\n      if (glov_input.keyDownEdge(KEYS.END)) {\n        eff_sel = num_non_disabled_selections - 1;\n        this.mouse_mode = false;\n        pos_changed = true;\n      }\n    }\n\n    let sel_changed = false;\n    if (eff_sel < 0) {\n      if (this.transient_focus) {\n        eff_sel = 0;\n        sel_changed = true;\n        glov_ui.focusPrev(this);\n      } else {\n        eff_sel = num_non_disabled_selections - 1;\n      }\n    }\n    if (eff_sel >= num_non_disabled_selections && num_non_disabled_selections) {\n      if (this.transient_focus) {\n        eff_sel = num_non_disabled_selections - 1;\n        sel_changed = true;\n        glov_ui.focusNext(this);\n      } else {\n        eff_sel = 0;\n      }\n    }\n\n    // Convert from eff_sel back to actual selection\n    for (let ii = 0; ii < this.items.length; ++ii) {\n      let item = this.items[ii];\n      if (!item.disabled) {\n        if (!eff_sel) {\n          this.selected = ii;\n          break;\n        }\n        --eff_sel;\n      }\n    }\n\n    let pad = 8;\n\n    if (this.is_dropdown) {\n      // display header\n      let color0 = color_white;\n      // let color1 = color_white;\n      // let dropdown_rect = glov_ui.sprites.menu_header.uidata.rects[2];\n      // let dropdown_width = (dropdown_rect[2] - dropdown_rect[0]) / (dropdown_rect[3] - dropdown_rect[1]) *\n      //   entry_height;\n      // let dropdown_x = x + width - dropdown_width;\n      //int dropdown_w = glov_ui_menu_header.right.GetTileWidth();\n      if (!this.disabled && glov_input.click({\n        x, y,\n        w: width, h: entry_height\n      })) {\n        glov_ui.focusSteal(this);\n        this.dropdown_visible = !this.dropdown_visible;\n        color0 = color_grayD0;\n        // color1 = color_gray80;\n      } else if (!this.disabled && glov_input.mouseOver({\n        x, y, w: width, h: entry_height\n      })) {\n        glov_ui.setMouseOver(this);\n        color0 = color_grayD0;\n        // color1 = color_gray80;\n      }\n      glov_ui.drawHBox({\n        x, y, z: z + 1,\n        w: width, h: entry_height\n      }, glov_ui.sprites.menu_header, color0); // TODO: only pieces 1 and 2?\n      // glov_ui.draw_list.queue(glov_ui.sprites.menu_header,\n      //   dropdown_x, y, z + 1.5, color1, [dropdown_width, entry_height, 1, 1],\n      //   glov_ui.sprites.menu_header.uidata.rects[2]);\n      font.drawSizedAligned(focused ? glov_ui.font_style_focused : glov_ui.font_style_normal, x + display.xpad, y, z + 2, font_height, glov_font.ALIGN.HFIT | glov_font.ALIGN.VCENTER, // eslint-disable-line no-bitwise\n      width - display.xpad * 2, entry_height, this.items[this.selected].name);\n      y += entry_height;\n      yret = y + 2;\n      z += 1000; // drop-down part should be above everything\n    }\n\n    if (!this.is_dropdown || this.dropdown_visible) {\n      let do_scroll = this.scroll_height && this.items.length * entry_height > this.scroll_height;\n      let y_save = y;\n      let x_save = x;\n      let scroll_pos = 0;\n      let eff_width = width;\n      if (do_scroll) {\n        // this.sa.display = &scroll_area_no_background;\n        if (pos_changed) {\n          // ensure part of visible scroll area includes the current selection\n          let buffer = min(1.5 * entry_height, (this.scroll_height - entry_height) / 2);\n          let min_scroll_pos = max(0, this.selected * entry_height - buffer);\n          let old_scroll_pos = this.sa.scroll_pos;\n          if (min_scroll_pos < this.sa.scroll_pos) {\n            this.sa.scroll_pos = min_scroll_pos;\n          }\n          let max_scroll_pos = min(this.items.length * entry_height, (this.selected + 1) * entry_height + buffer) - this.scroll_height;\n          if (max_scroll_pos > this.sa.scroll_pos) {\n            this.sa.scroll_pos = max_scroll_pos;\n          }\n          // Make it smooth/bouncy a bit\n          this.sa.overscroll = old_scroll_pos - this.sa.scroll_pos;\n        }\n        this.sa.begin(x, y, z, width, this.scroll_height, color_white);\n        scroll_pos = this.sa.scroll_pos + this.sa.overscroll;\n        y = 0;\n        x = 0;\n        // extern float glov_scrollbar_scale;\n        // eff_width = width - glov_ui_scrollbar_top.GetTileWidth() * glov_scrollbar_scale;\n      }\n      for (let i = 0; i < this.items.length; i++) {\n        let item = this.items[i];\n        let entry_disabled = item.disabled;\n        let image_set = null;\n        if (!this.disabled && !entry_disabled && glov_input.click({\n          x, y, w: width, h: entry_height\n        })) {\n          glov_ui.focusSteal(this);\n          this.was_clicked = true;\n          this.mouse_mode = true;\n          this.selected = i;\n        }\n        if (!this.disabled && !entry_disabled && glov_input.click({\n          x, y, w: width, h: entry_height\n        })) {\n          glov_ui.focusSteal(this);\n          this.was_right_clicked = true;\n          this.mouse_mode = true;\n          this.selected = i;\n        }\n        let is_mouseover = false;\n        if (!this.disabled && !entry_disabled && glov_input.mouseOver({\n          x, y, w: width, h: entry_height\n        })) {\n          let mpos = glov_input.mousePos();\n          is_mouseover = true;\n          if (focused || this.transient_focus) {\n            if (this.expected_frame_index === glov_engine.getFrameIndex() && (mpos[0] !== this.last_mousex || !nearSame(mpos[1] - scroll_pos, this.last_mousey, 1.25))) {\n              this.mouse_mode = true;\n              this.selected = i;\n            }\n            this.last_mousex = mpos[0];\n            this.last_mousey = mpos[1] - scroll_pos;\n          }\n          // Not used anymore because in mouse_mode, rollover *is* selection, don't have two cursors!\n          // if (this.mouse_mode) {\n          //   text_color = 0x000000ff;\n          //   image_set = &menu_rollover;\n          // }\n        }\n\n        let style;\n        let show_selection = !this.disabled && (!(this.transient_focus && !this.is_focused) || is_mouseover);\n        let bounce = false;\n        if (this.selected === i && show_selection) {\n          style = display.style_selected || selbox_font_style_selected;\n          image_set = glov_ui.sprites.menu_selected;\n          if (is_mouseover && glov_input.mouseDown()) {\n            if (glov_ui.sprites.menu_down) {\n              image_set = glov_ui.sprites.menu_down;\n            } else {\n              style = display.style_down || selbox_font_style_down;\n            }\n          }\n          if (display.bounce && !this.is_dropdown) {\n            let ms = glov_engine.getFrameDt();\n            if (this.selected !== old_sel) {\n              bounce = true;\n              this.bounce_time = SELBOX_BOUNCE_TIME;\n            } else if (ms >= this.bounce_time) {\n              this.bounce_time = 0;\n            } else {\n              bounce = true;\n              this.bounce_time -= ms;\n            }\n          }\n        } else if (entry_disabled) {\n          style = display.style_disabled || selbox_font_style_disabled;\n          image_set = glov_ui.sprites.menu_entry;\n        } else {\n          style = display.style_default || selbox_font_style_default;\n          image_set = glov_ui.sprites.menu_entry;\n        }\n        let yoffs = 0;\n        let bounce_amt = 0;\n        if (bounce) {\n          bounce_amt = sin(this.bounce_time * 20 / SELBOX_BOUNCE_TIME / 10);\n          yoffs = -4 * bounce_amt * entry_height / 32;\n        }\n        if (!display.no_buttons) {\n          glov_ui.drawHBox({ x, y: y + yoffs, z: z + 1, w: eff_width, h: entry_height }, image_set, color_white);\n        }\n        // spriteListClipperPush(x, y + yoffs, eff_width - pad, entry_height);\n        let did_tab = false;\n        let text_y = y + yoffs;\n        if (display.tab_stop) {\n          let str = item.name;\n          let tab_idx = str.indexOf('\\t');\n          if (tab_idx !== -1) {\n            did_tab = true;\n            let pre = str.slice(0, tab_idx);\n            let post = str.slice(tab_idx + 1);\n            let x1 = x + display.xpad;\n            let x2 = x + display.xpad + display.tab_stop + pad;\n            let w1 = display.tab_stop;\n            let w2 = eff_width - display.tab_stop - display.xpad * 2 - pad;\n            if (display.use_markup) {\n              let md = {};\n              md.align = glov_font.ALIGN.HFIT;\n              md.x_size = md.y_size = font_height;\n              md.w = w1;\n              md.h = 1;\n              md.style = style;\n              glov_markup.print(md, x1, text_y, z + 2, pre);\n              md.w = w2;\n              glov_markup.print(md, x2, text_y, z + 2, post);\n            } else {\n              font.drawSizedAligned(style, x1, text_y, z + 2, font_height, glov_font.ALIGN.HFIT | glov_font.ALIGN.VCENTER, // eslint-disable-line no-bitwise\n              w1, entry_height, pre);\n              font.drawSizedAligned(style, x2, text_y, z + 2, font_height, glov_font.ALIGN.HFIT | glov_font.ALIGN.VCENTER, // eslint-disable-line no-bitwise\n              w2, entry_height, post);\n            }\n          }\n        }\n        if (!did_tab) {\n          let md = {};\n          // eslint-disable-next-line no-bitwise\n          md.align = (item.centered || display.centered ? glov_font.ALIGN.HCENTERFIT : glov_font.ALIGN.HFIT) | glov_font.ALIGN.VCENTER;\n          md.x_size = md.y_size = font_height;\n          md.w = eff_width - display.xpad * 2;\n          md.h = entry_height;\n          md.style = style;\n          let xx = x + display.xpad;\n          let zz = z + 2;\n          if (display.use_markup) {\n            glov_markup.print(md, xx, text_y, zz, item.name);\n          } else {\n            font.drawSizedAligned(md.style, xx, text_y, zz, md.x_size, md.align, md.w, md.h, item.name);\n          }\n        }\n        // spriteListClipperPop();\n        // if (display.selection_highlight && this.selected === i && show_selection) {\n        //   let grow = 0.2 * (1 - bounce_amt);\n        //   display.selection_highlight.DrawStretched(\n        //     x - grow * eff_width, y - grow * entry_height, z + 1.5,\n        //     eff_width * (1 + 2 * grow), entry_height * (1 + 2 * grow), 0, 0xFF);\n        // }\n        y += entry_height;\n      }\n      if (do_scroll) {\n        this.sa.end(y);\n        y = y_save + this.scroll_height;\n        x = x_save;\n      }\n\n      if (this.was_clicked && this.is_dropdown) {\n        this.dropdown_visible = false;\n      }\n    }\n\n    if (this.selected !== old_sel || sel_changed) {\n      glov_ui.playUISound('rollover');\n    }\n\n    this.expected_frame_index = glov_engine.getFrameIndex() + 1;\n    x = 10;\n    y += 5;\n    if (!this.is_dropdown) {\n      yret = y;\n    }\n    assert(yret - y0 === this.getHeight());\n    return yret - y0;\n  }\n}\n\nexport function create(...args) {\n  if (!font) {\n    font = glov_ui.font;\n  }\n  return new GlovSelectionBox(...args);\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst assert = require('assert');\nconst engine = require('./engine.js');\n\n\nlet last_id = 0;\n\nlet bound_prog = null;\n\nexport const semantic = {\n  'ATTR0': 0,\n  'POSITION': 0,\n  'ATTR1': 1,\n  'COLOR': 1,\n  'COLOR_0': 1,\n  'ATTR2': 2,\n  'TEXCOORD': 2,\n  'TEXCOORD_0': 2,\n  'ATTR3': 3,\n  'NORMAL': 3,\n  'ATTR4': 4,\n  'TEXCOORD_1': 4\n};\n\nfunction findAll(str, re) {\n  let ret = [];\n  let m;\n  do {\n    m = re.exec(str);\n    if (m) {\n      ret.push(m[1]);\n    }\n  } while (m);\n  return ret;\n}\n\nlet globals;\nlet defines;\n\nlet error_fp;\nlet error_vp;\n\nconst vp_attr_regex = /attribute [^ ]+ ([^ ;]+);/gu;\nconst uniform_regex = /uniform (?:(?:low|medium|high)p )?((?:vec|mat)\\d [^ ;]+);/gu;\nconst sampler_regex = /uniform sampler2D ([^ ;]+);/gu;\n\nconst type_size = {\n  vec2: 2 * 1,\n  vec3: 3 * 1,\n  vec4: 4 * 1,\n  mat3: 3 * 3,\n  mat4: 4 * 4\n};\n\nfunction Shader(type, text) {\n  text = `${defines}${text}`;\n  this.shader = gl.createShader(type);\n  if (type === gl.VERTEX_SHADER) {\n    this.programs = {};\n    this.attributes = findAll(text, vp_attr_regex);\n    // Ensure they are known names so we can give them indices\n    // Add to semantic[] above as needed\n    this.attributes.forEach(v => assert(semantic[v] !== undefined));\n  } else {\n    this.id = ++last_id;\n    this.samplers = findAll(text, sampler_regex);\n    // Ensure all samplers end in a unique number\n    let found = [];\n    this.samplers.forEach(v => {\n      let num = Number(v.slice(-1));\n      assert(!isNaN(num));\n      assert(!found[num]);\n      found[num] = true;\n    });\n  }\n  this.uniforms = findAll(text, uniform_regex);\n  // Ensure a known type\n  this.uniforms.forEach(v => {\n    let type_name = v.split(' ')[0];\n    assert(type_size[type_name]);\n  });\n  gl.shaderSource(this.shader, text);\n  gl.compileShader(this.shader);\n\n  if (!gl.getShaderParameter(this.shader, gl.COMPILE_STATUS)) {\n    console.error(`Shader compile error: ${gl.getShaderInfoLog(this.shader)}`);\n  }\n}\n\nexport function create(...args) {\n  return new Shader(...args);\n}\n\nfunction uniformSetValue(unif) {\n  switch (unif.width) {// eslint-disable-line default-case\n    case 2:\n      gl.uniform2fv(unif.location, unif.value);\n      break;\n    case 3:\n      gl.uniform3fv(unif.location, unif.value);\n      break;\n    case 4:\n      gl.uniform4fv(unif.location, unif.value);\n      break;\n    case 9:\n      gl.uniformMatrix3fv(unif.location, false, unif.value);\n      break;\n    case 16:\n      gl.uniformMatrix4fv(unif.location, false, unif.value);\n      break;\n  }\n}\n\nfunction link(vp, fp) {\n  let prog = vp.programs[fp.id] = {\n    handle: gl.createProgram(),\n    uniforms: null\n  };\n  gl.attachShader(prog.handle, vp.shader);\n  gl.attachShader(prog.handle, fp.shader);\n  // call this for all relevant semantic\n  for (let ii = 0; ii < vp.attributes.length; ++ii) {\n    gl.bindAttribLocation(prog.handle, semantic[vp.attributes[ii]], vp.attributes[ii]);\n  }\n  gl.linkProgram(prog.handle);\n\n  prog.valid = gl.getProgramParameter(prog.handle, gl.LINK_STATUS);\n  if (!prog.valid) {\n    console.error(`Shader link error: ${gl.getProgramInfoLog(prog.handle)}`);\n  }\n\n  gl.useProgram(prog.handle);\n  bound_prog = prog;\n\n  let uniforms = vp.uniforms.slice(0);\n  for (let ii = 0; ii < fp.uniforms.length; ++ii) {\n    let name = fp.uniforms[ii];\n    if (uniforms.indexOf(name) === -1) {\n      uniforms.push(name);\n    }\n  }\n  prog.uniforms = uniforms.map(v => {\n    v = v.split(' ');\n    let type = v[0];\n    let name = v[1];\n    let count = 1;\n    let m = name.match(/([^[]+)\\[(\\d+)\\]/u);\n    if (m) {\n      name = m[1];\n      count = Number(m[2]);\n    }\n    let location = gl.getUniformLocation(prog.handle, name);\n    if (location === null) {\n      // Not in either shader, (commented out?), remove (via filter below)\n      return null;\n    }\n    let width = type_size[type];\n    let size = width * count;\n    let glob = globals[name];\n    let value = new Float32Array(size);\n    // set initial value\n    let unif = {\n      name,\n      size,\n      width,\n      count,\n      value,\n      location,\n      glob\n    };\n    uniformSetValue(unif);\n    return unif;\n  }).filter(v => v);\n\n  for (let ii = 0; ii < fp.samplers.length; ++ii) {\n    let name = fp.samplers[ii];\n    let num = Number(name.slice(-1));\n    let location = gl.getUniformLocation(prog.handle, name);\n    if (location !== null) {\n      gl.uniform1i(location, num);\n    }\n  }\n  return prog;\n}\n\nexport function bind(vp, fp, params) {\n  let prog = vp.programs[fp.id];\n  if (!prog) {\n    prog = link(vp, fp);\n  }\n  if (!prog.valid) {\n    prog = link(vp, error_fp);\n    if (!prog.valid) {\n      prog = link(error_vp, error_fp);\n    }\n  }\n  if (prog !== bound_prog) {\n    bound_prog = prog;\n    gl.useProgram(prog.handle);\n  }\n  for (let ii = 0; ii < prog.uniforms.length; ++ii) {\n    let unif = prog.uniforms[ii];\n    let value = params[unif.name] || unif.glob;\n    if (!value) {\n      continue;\n    }\n    let diff = false;\n    for (let jj = 0; jj < unif.size; ++jj) {\n      if (value[jj] !== unif.value[jj]) {\n        diff = true;\n        break;\n      }\n    }\n    if (diff) {\n      for (let jj = 0; jj < unif.size; ++jj) {\n        unif.value[jj] = value[jj];\n      }\n      uniformSetValue(unif);\n    }\n  }\n}\n\nexport function startup(_globals) {\n  defines = Object.keys(engine.defines).map(v => `#define ${v}\\n`).join('');\n  globals = _globals;\n\n  error_fp = create(gl.FRAGMENT_SHADER, '#pragma WebGL\\n\\nvoid main(void) {\\n  gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\\n}\\n');\n  error_vp = create(gl.VERTEX_SHADER, '// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\\n// Released under MIT License: https://opensource.org/licenses/MIT\\n#pragma WebGL\\nattribute vec2 POSITION;\\nvoid main() {\\n  gl_Position = vec4(POSITION.xy * vec2(2.0 / 1024.0, -2.04 / 1024.0) + vec2(-1.0, 1.0), 0.0, 1.0);\\n}\\n');\n}","//////////////////////////////////////////////////////////////////////////\n// GlovSimpleMenu is just a GlovSelectionBox plus some logic to activate\n// callbacks/etc upon selecting of elements.\n\n/* eslint complexity:off */\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst glov_engine = require('./engine.js');\nconst glov_input = require('./input.js');\nconst selection_box = require('./selection_box.js');\nconst glov_ui = require('./ui.js');\nconst { clamp, vec4 } = require('./vmath.js');\n\nconst { KEYS } = glov_input;\nlet pad_codes;\n\nconst color101010C8 = vec4(0x10 / 255, 0x10 / 255, 0x10 / 255, 0xC8 / 255);\n\nclass GlovSimpleMenu {\n  constructor(params) {\n    params = params || {};\n    this.sel_box = selection_box.create(params);\n    this.edit_index = -1;\n\n    // Output members\n    this.selected = -1; // actually selected/acted on, not just current highlight, like this.sel_box.selected\n  }\n\n  focus() {\n    glov_ui.focusSteal(this.sel_box);\n  }\n\n  execItem(index, delta) {\n    let { items } = this.sel_box;\n    assert(index >= 0 && index < items.length);\n    let menu_item = items[index];\n    let force = false;\n    if (delta === 2) {\n      delta = 1;\n      force = true;\n    }\n    if (menu_item.cb) {\n      menu_item.cb();\n    }\n    if (!menu_item.state) {\n      if (menu_item.value !== null && (menu_item.prompt_int || menu_item.prompt_string)) {\n        // Open an edit box\n        // menu.internal.mte = GlovModalTextEntry::createInt(simpleMenuFieldName(menu_item.name), *menu_item.value);\n        this.internal.edit_index = index;\n        // glovInputReleaseAll();\n      } else if (menu_item.value !== null) {\n        if (glov_input.keyDown(KEYS.SHIFT) && !force) {\n          delta = -1;\n        }\n        menu_item.value += delta * menu_item.value_inc;\n        if (menu_item.slider || menu_item.plus_minus) {\n          // implicitly no wrapping, maybe make a separate flag for this?\n          menu_item.value = clamp(menu_item.value, menu_item.value_min, menu_item.value_max);\n        } else {\n          if (menu_item.value < menu_item.value_min) {\n            menu_item.value = menu_item.value_max;\n          }\n          if (menu_item.value > menu_item.value_max) {\n            menu_item.value = menu_item.value_min;\n          }\n        }\n        // TODO: some kind of callback on value change\n      } else {\n          // presumably tag or externally operated on, probably want to skip key repeat here too?\n          // glovInputReleaseAll();\n        }\n    } else {\n      glov_engine.setState(menu_item.state);\n      // glovInputReleaseAll();\n    }\n  }\n\n  run(params) {\n    let { sel_box } = this;\n    sel_box.applyParams(params); // Apply new list of items, positions, etc\n\n    const { items, x, z } = sel_box;\n    const y0 = sel_box.y;\n    let exit_index = -1;\n    for (let i = 0; i < items.length; ++i) {\n      if (items[i].exit) {\n        exit_index = i;\n      }\n    }\n\n    // Check to see if any selection has an editBox open first\n    let selbox_enabled = true;\n    if (this.edit_index >= 0 && this.edit_index < items.length) {\n      selbox_enabled = false;\n      glov_ui.drawRect(camera2d.x0(), camera2d.y0(), camera2d.x1(), camera2d.y1(), z + 2, color101010C8);\n      // TODO: Need modal text entry dialog\n      // let ret = this.internal.mte.run(z + 3);\n\n      // if (ret == 'ok') {\n      //   if (items[this.edit_index].prompt_int) {\n      //     items[this.edit_index].value = this.internal.mte.getInt();\n      //   } else {\n      //     items[this.edit_index].svalue = this.internal.mte.getString();\n      //   }\n      //   this.edit_index = -1;\n      // } else if (ret == 'cancel') {\n      //   this.edit_index = -1;\n      // }\n    }\n    sel_box.disabled = !selbox_enabled;\n\n    // Do all sliders, plus-minus-es - needs\n    let display = sel_box.display;\n    for (let ii = 0; ii < items.length; ii++) {\n      let menu_item = items[ii];\n      if (menu_item.slider) {\n        let slider = menu_item.internal.slider;\n        if (!slider) {\n          // slider = menu_item.internal.slider = glov_slider.create();\n        }\n        slider.no_notches = true;\n        // slider.sound_release = this.sound_accept;\n        slider.disabled = menu_item.disabled;\n        let slider_width = 160;\n        let slider_x = x + sel_box.width - slider_width - 12;\n        let v = menu_item.value - menu_item.value_min;\n        let color = display.style_default.color;\n        // if (display.style_default.color_mode == glov_font.COLOR_MODE.GRADIENT) {\n        //   color = colorIntLerp(display.style_default.color, display.style_default.colorLR, 0.5);\n        // }\n        if (slider.disabled) {\n          color = display.style_disabled.color;\n        }\n        v = slider.run({\n          x: slider_x,\n          y: y0 + ii * 24 + 2,\n          z: z + 3,\n          w: slider_width,\n          // scale: 1,\n          color,\n          value: v,\n          max: menu_item.value_max - menu_item.value_min\n        });\n        menu_item.value = v + menu_item.value_min;\n        if (slider.rollover || slider.grabbed) {\n          // expect our row to be selected\n          if (sel_box.selected !== ii) {\n            sel_box.selected = ii;\n            glov_ui.playUISound('select');\n          }\n        }\n      } else if (menu_item.plus_minus) {\n        assert(typeof menu_item.value === 'number', 'plus_minus items require a numerical value');\n        assert(menu_item.value_inc, 'plus_minus items require a value increment');\n        let buttons_width = 60;\n        let pad = 6;\n        let button_width = (buttons_width - pad) / 2;\n        let button_x = x + sel_box.width - buttons_width;\n        let delta = 0;\n        // if (!glovMasterControllerActive()) { // Don't show buttons if using a controller / no mouse\n        if (glov_ui.buttonText({\n          no_focus: true,\n          x: button_x,\n          y: y0 + ii * 24 + 2,\n          z: z + 3,\n          w: button_width,\n          h: glov_ui.button_height * 0.66,\n          text: '-'\n        })) {\n          delta = -1;\n        }\n        let minus_over = glov_ui.button_mouseover;\n        if (glov_ui.buttonText({\n          no_focus: true,\n          x: button_x + pad + button_width,\n          y: y0 + ii * 24 + 2,\n          z: z + 3,\n          w: button_width,\n          h: glov_ui.button_height * 0.66,\n          text: '+'\n        })) {\n          delta = 1;\n        }\n        let plus_over = glov_ui.button_mouseover;\n        // } end if (!glovMasterControllerActive())\n        if (delta) {\n          menu_item.value += delta * menu_item.value_inc;\n          menu_item.value = clamp(menu_item.value, menu_item.value_min, menu_item.value_max);\n        }\n        if (minus_over || plus_over) {\n          // expect our row to be selected\n          if (sel_box.selected !== ii) {\n            sel_box.selected = ii;\n            glov_ui.playUISound('select');\n          }\n        }\n      }\n    }\n\n    let y = y0;\n    y += sel_box.run();\n\n    let selected = -1;\n    if (exit_index !== -1 && (glov_input.keyDownEdge(KEYS.ESC) || !items[exit_index].no_controller_exit && glov_input.padButtonDownEdge(pad_codes.CANCEL))) {\n      this.execItem(exit_index, 1);\n      selected = exit_index;\n    }\n    // Only allow left/right to \"select\" a menu option if it's a toggle/increment\n    // kind of menu option, otherwise this just feels weird\n    let allow_left_right = items[sel_box.selected].value !== null;\n    if (sel_box.was_clicked || sel_box.is_focused && (glov_input.keyDownEdge(KEYS.SPACE) || glov_input.keyDownEdge(KEYS.ENTER) || glov_input.padButtonDownEdge(pad_codes.SELECT))) {\n      this.execItem(sel_box.selected, 1);\n      selected = sel_box.selected;\n    }\n    if (sel_box.is_focused && allow_left_right && (glov_input.keyDownEdge(KEYS.RIGHT) || glov_input.keyDownEdge(KEYS.D) || glov_input.padButtonDownEdge(pad_codes.RIGHT))) {\n      this.execItem(sel_box.selected, 2);\n      selected = sel_box.selected;\n    }\n    if (sel_box.wasRightClicked || sel_box.is_focused && allow_left_right && (\n    // This was UpHit before, some problem with it triggering an up on the next screen?  Should supress the next up\n    // events after eating a down for UI?\n    glov_input.keyDownEdge(KEYS.LEFT) || glov_input.keyDownEdge(KEYS.A) || glov_input.padButtonDownEdge(pad_codes.LEFT))) {\n      this.execItem(sel_box.selected, -1);\n      selected = sel_box.selected;\n    }\n    this.selected = selected;\n    if (selected !== -1 && !items[selected].no_sound) {\n      if (items[selected].exit) {\n        glov_ui.playUISound('cancel');\n      } else {\n        glov_ui.playUISound('select');\n      }\n    }\n\n    return y - y0;\n  }\n\n  isSelected(tag_or_index) {\n    if (this.selected === -1) {\n      return false;\n    }\n    if (tag_or_index === undefined) {\n      return this.sel_box.items[this.selected].tag || true;\n    }\n    return this.sel_box.isSelected(tag_or_index);\n  }\n\n  getSelectedIndex() {\n    return this.selected;\n  }\n\n  getSelectedItem() {\n    return this.sel_box.items[this.selected];\n  }\n}\n\nexport function create(...args) {\n  if (!pad_codes) {\n    pad_codes = glov_input.pad_codes;\n  }\n  return new GlovSimpleMenu(...args);\n}","/*global WebGLSoundDevice: true */\n\nconst DEFAULT_FADE_RATE = 0.001;\n\nlet sounds = {};\nlet num_loading = 0;\nclass SoundManager {\n  constructor(listenerTransform) {\n    if (!listenerTransform) {\n      // const camera = Camera.create(VMath);\n      // const look_at_position = VMath.v3Build(0, 1, 0);\n      // const worldUp = VMath.v3Build(0, 0, 1);\n      // const camera_position = VMath.v3Build(0, 0, 0);\n      // camera.lookAt(look_at_position, worldUp, camera_position);\n      // camera.updateViewMatrix();\n      // listenerTransform = camera.matrix;\n      listenerTransform = new Float32Array([1, 0, -0, 0, 0, 1, 0, -1, 0, 0, 0, 0]);\n    }\n    let soundDeviceParameters = {\n      linearDistance: false\n    };\n    this.soundDevice = WebGLSoundDevice.create(soundDeviceParameters);\n    this.soundDevice.listenerTransform = listenerTransform;\n    this.auto_oggs = false; // try loading .ogg versions first, then fallback to .wav\n    this.auto_mp3s = false; // try loading .mp3 versions first, then fallback to .wav\n    this.sound_on = true;\n    this.music_on = true;\n\n    this.channels = [];\n    for (let ii = 0; ii < 16; ++ii) {\n      this.channels[ii] = this.soundDevice.createSource({\n        position: [0, 0, 0],\n        relative: false,\n        pitch: 1.0\n      });\n    }\n    this.channel = 0;\n    this.last_played = {};\n    this.global_timer = 0;\n\n    // Music\n    this.fade_rate = DEFAULT_FADE_RATE;\n    this.current_loop = null;\n    this.music = []; // 0 is current, 1 is previous (fading out)\n    for (let ii = 0; ii < 2; ++ii) {\n      this.music.push({\n        source: this.soundDevice.createSource({\n          position: [0, 0, 0],\n          relative: false,\n          pitch: 1.0,\n          looping: true\n        }),\n        current_volume: 0,\n        target_volume: 0\n      });\n    }\n  }\n\n  loadSound(base, cb) {\n    if (Array.isArray(base)) {\n      for (let ii = 0; ii < base.length; ++ii) {\n        this.loadSound(base[ii], cb);\n      }\n      return;\n    }\n    let key = base;\n    let m = base.match(/^(.*)\\.(mp3|ogg|wav)$/u);\n    let preferred_ext;\n    if (m) {\n      base = m[1];\n      preferred_ext = m[2];\n    }\n    let src = `sounds/${base}`;\n    let tryLoad = ext => {\n      ++num_loading;\n      this.soundDevice.createSound({\n        src: src + ext,\n        onload: function (sound) {\n          --num_loading;\n          if (sound) {\n            sounds[key] = sound;\n            if (cb) {\n              return cb();\n            }\n          } else {\n            // failed to load\n            if (ext === '.ogg' || ext === '.mp3') {\n              tryLoad('.wav');\n            }\n          }\n          return null;\n        }\n      });\n    };\n    if (this.soundDevice.isSupported('FILEFORMAT_OGG') && (this.auto_oggs || preferred_ext === 'ogg')) {\n      tryLoad('.ogg');\n    } else if (this.soundDevice.isSupported('FILEFORMAT_MP3') && (this.auto_mp3s || preferred_ext === 'mp3')) {\n      tryLoad('.mp3');\n    } else {\n      tryLoad('.wav');\n    }\n  }\n\n  tick(dt) {\n    this.global_timer += dt;\n    let max_fade = dt * this.fade_rate;\n    for (let ii = 0; ii < this.music.length; ++ii) {\n      let target = this.music_on ? this.music[ii].target_volume : 0;\n      if (this.music[ii].current_volume !== target) {\n        let delta = target - this.music[ii].current_volume;\n        let fade_amt = Math.min(Math.abs(delta), max_fade);\n        if (delta < 0) {\n          this.music[ii].current_volume = Math.max(target, this.music[ii].current_volume - fade_amt);\n        } else {\n          this.music[ii].current_volume = Math.min(target, this.music[ii].current_volume + fade_amt);\n        }\n        this.music[ii].source.gain = this.music[ii].current_volume;\n      }\n    }\n  }\n\n  resume() {\n    this.soundDevice.resume();\n  }\n\n  play(soundname, volume) {\n    volume = volume || 1;\n    if (!this.sound_on) {\n      return null;\n    }\n    if (!sounds[soundname]) {\n      return null;\n    }\n    let last_played_time = this.last_played[soundname] || -9e9;\n    if (this.global_timer - last_played_time < 45) {\n      return null;\n    }\n    let channel = this.channels[this.channel++];\n    channel.play(sounds[soundname]);\n    channel.gain = volume;\n    this.last_played[soundname] = this.global_timer;\n    if (this.channel === this.channels.length) {\n      this.channel = 0;\n    }\n    return {\n      stop: function () {\n        channel.stop();\n      }\n    };\n  }\n\n  playMusic(soundname, volume, transition) {\n    if (!this.music_on) {\n      return;\n    }\n    if (volume === undefined) {\n      volume = 1;\n    }\n    transition = transition || SoundManager.DEFAULT;\n    this.loadSound(soundname, () => {\n      if (!sounds[soundname]) {\n        return;\n      }\n      if (this.current_loop === soundname) {\n        // Same sound, just adjust volume, if required\n        this.music[0].target_volume = volume;\n        if (!transition) {\n          this.music[0].source.gain = this.music[0].current_volume = volume;\n        }\n        return;\n      }\n      // fade out previous music, if any\n      /* eslint-disable no-bitwise */\n      if (this.music[0].current_volume) {\n        if (transition & SoundManager.FADE_OUT) {\n          // swap to position 1, start fadeout\n          let temp = this.music[1];\n          this.music[1] = this.music[0];\n          this.music[0] = temp;\n          this.music[1].target_volume = 0;\n        }\n        // else source will be replaced, just let it be!\n      }\n      this.current_loop = soundname;\n      this.music[0].target_volume = volume;\n      if (transition & SoundManager.FADE_IN) {\n        this.music[0].source.gain = this.music[0].current_volume = 0;\n      } else {\n        this.music[0].source.gain = this.music[0].current_volume = volume;\n      }\n      this.music[0].source.play(sounds[soundname], 0, true);\n      /* eslint-enable no-bitwise */\n    });\n  }\n\n  loading() {\n    // eslint-disable-line class-methods-use-this\n    return num_loading;\n  }\n\n}\n\nSoundManager.DEFAULT = SoundManager.prototype.DEFAULT = 0;\nSoundManager.FADE_OUT = SoundManager.prototype.FADE_OUT = 1;\nSoundManager.FADE_IN = SoundManager.prototype.FADE_IN = 2;\nSoundManager.FADE = SoundManager.prototype.FADE = SoundManager.prototype.FADE_OUT + SoundManager.prototype.FADE_IN;\n\nexport function create(listenerTransform) {\n  return new SoundManager(listenerTransform);\n}","function GlovSpriteAnimation(params) {\n  this.frame = 0;\n  this.time = 0;\n  this.state = null;\n  this.anim = null;\n  this.anim_idx = 0;\n\n  if (params instanceof GlovSpriteAnimation) {\n    this.data = params.data; // already initialized\n    this.setState(params.state);\n  } else {\n    this.data = params;\n    for (let key in this.data) {\n      let anim = this.data[key];\n      if (typeof anim.frames === 'number') {\n        anim.frames = [anim.frames];\n      }\n      if (typeof anim.times === 'number') {\n        let arr = new Array(anim.frames.length);\n        for (let ii = 0; ii < anim.frames.length; ++ii) {\n          arr[ii] = anim.times;\n        }\n        anim.times = arr;\n      }\n      if (anim.loop === undefined) {\n        anim.loop = true;\n      }\n    }\n  }\n}\n\nexport function create(params) {\n  return new GlovSpriteAnimation(params);\n}\n\nGlovSpriteAnimation.prototype.clone = function () {\n  return new GlovSpriteAnimation(this);\n};\n\nGlovSpriteAnimation.prototype.setState = function (state, force) {\n  if (state === this.state && !force) {\n    return;\n  }\n  this.state = state;\n  this.anim = this.data[state];\n  this.time = 0;\n  this.anim_idx = 0;\n  this.frame = this.anim.frames[this.anim_idx];\n};\n\nGlovSpriteAnimation.prototype.update = function (dt) {\n  if (!this.anim) {\n    return;\n  }\n  this.time += dt;\n  if (this.time > this.anim.times[this.anim_idx]) {\n    this.time -= this.anim.times[this.anim_idx];\n    this.anim_idx = this.anim_idx + 1;\n    if (this.anim_idx === this.anim.frames.length) {\n      if (this.anim.loop) {\n        this.anim_idx = this.anim_idx % this.anim.frames.length;\n      } else {\n        // keep final frame\n        this.anim = null;\n        return;\n      }\n    }\n    this.frame = this.anim.frames[this.anim_idx];\n    if (this.time >= this.anim.times[this.anim_idx]) {\n      this.time = this.anim.times[this.anim_idx] - 1;\n    }\n  }\n};\n\nGlovSpriteAnimation.prototype.getFrame = function (dt) {\n  if (dt !== undefined) {\n    this.update(dt);\n  }\n  return this.frame;\n};","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n// Some code from Turbulenz: Copyright (c) 2012-2013 Turbulenz Limited\n// Released under MIT License: https://opensource.org/licenses/MIT\n\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst engine = require('./engine.js');\n\nconst geom = require('./geom.js');\nconst { cos, max, min, round, sin } = Math;\nconst textures = require('./textures.js');\nconst shaders = require('./shaders.js');\nconst { vec2, vec4 } = require('./vmath.js');\nconst { nextHighestPowerOfTwo } = require('./vmath.js');\n\nexport const BLEND_ALPHA = 0;\nexport const BLEND_ADDITIVE = 1;\n\nlet sprite_vshader;\nlet sprite_fshader;\nlet sprite_dual_fshader;\nlet clip_space = vec4();\nlet sprite_shader_params = {\n  clip_space\n};\nlet last_uid = 0;\n\nlet sprite_queue = [];\n\nlet sprite_freelist = [];\n\nfunction SpriteData() {\n  // x1 y1 x2 y2 x3 y3 x4 y4 - vertices [0,8)\n  // cr cg cb ca u1 v1 u2 v2 - normalized color + texture [8,16)\n  // data for GL queuing\n  this.data = new Float32Array(16);\n  // data for sorting/binding/etc\n  this.texs = null;\n  this.shader = null;\n  this.shader_params = null;\n  this.x = 0;\n  this.y = 0;\n  this.z = 0;\n  this.blend = 0; // BLEND_ALPHA\n  this.uid = 0;\n}\n\nfunction spriteDataAlloc() {\n  if (sprite_freelist.length) {\n    return sprite_freelist.pop();\n  }\n  return new SpriteData();\n}\n\nfunction cmpSprite(a, b) {\n  if (a.z !== b.z) {\n    return a.z - b.z;\n  }\n  if (a.y !== b.y) {\n    return a.y - b.y;\n  }\n  if (a.x !== b.x) {\n    return a.x - b.x;\n  }\n  return a.uid - b.uid;\n}\n\nexport function queuefn(z, fn) {\n  sprite_queue.push({\n    fn,\n    x: 0,\n    y: 0,\n    z,\n    uid: ++last_uid\n  });\n}\n\n// coordinates must be in counter-clockwise winding order\nexport function queueraw4(texs, x0, y0, x1, y1, x2, y2, x3, y3, z, u0, v0, u1, v1, color, shader, shader_params, blend) {\n  let elem = spriteDataAlloc();\n  let data = elem.data;\n  // x1 y1 x2 y2 x3 y3 x4 y4 - vertices [0,8)\n  // cr cg cb ca u1 v1 u2 v2 - normalized color + texture [8,16)\n  // Minor perf improvement: convert by clip_space here (still just a single MAD\n  //   if pre-calculated in the camera) and remove it from the shader.\n  data[0] = (x0 - camera2d.data[0]) * camera2d.data[4];\n  data[1] = (y0 - camera2d.data[1]) * camera2d.data[5];\n  data[2] = (x1 - camera2d.data[0]) * camera2d.data[4];\n  data[3] = (y1 - camera2d.data[1]) * camera2d.data[5];\n  data[4] = (x2 - camera2d.data[0]) * camera2d.data[4];\n  data[5] = (y2 - camera2d.data[1]) * camera2d.data[5];\n  data[6] = (x3 - camera2d.data[0]) * camera2d.data[4];\n  data[7] = (y3 - camera2d.data[1]) * camera2d.data[5];\n  data[8] = color[0];\n  data[9] = color[1];\n  data[10] = color[2];\n  data[11] = color[3];\n  data[12] = u0;\n  data[13] = v0;\n  data[14] = u1;\n  data[15] = v1;\n\n  elem.texs = texs;\n  elem.x = data[0];\n  elem.y = data[1];\n  elem.z = z;\n  elem.shader = shader || null;\n  if (shader_params) {\n    shader_params.clip_space = sprite_shader_params.clip_space;\n    elem.shader_params = shader_params;\n  } else {\n    elem.shader_params = null;\n  }\n  elem.blend = blend || 0; // BLEND_ALPHA\n  //elem.bucket = bucket || this.default_bucket;\n  //elem.tech_params = tech_params || null;\n  elem.uid = ++last_uid;\n  sprite_queue.push(elem);\n  return elem;\n}\n\nexport function queueraw(texs, x, y, z, w, h, u0, v0, u1, v1, color, shader, shader_params, blend) {\n  return queueraw4(texs, x, y, x, y + h, x + w, y + h, x + w, y, z, u0, v0, u1, v1, color, shader, shader_params, blend);\n}\n\nexport function queuesprite(sprite, x, y, z, w, h, rot, uvs, color, shader, shader_params) {\n  let elem = spriteDataAlloc();\n  elem.texs = sprite.texs;\n  elem.x = x = (x - camera2d.data[0]) * camera2d.data[4];\n  elem.y = y = (y - camera2d.data[1]) * camera2d.data[5];\n  elem.z = z;\n  w *= camera2d.data[4];\n  h *= camera2d.data[5];\n  color = color || sprite.color;\n  let data = elem.data;\n  if (!rot) {\n    let x1 = x - sprite.origin[0] * w;\n    let y1 = y - sprite.origin[1] * h;\n    let x2 = x1 + w;\n    let y2 = y1 + h;\n    data[0] = x1;\n    data[1] = y1;\n    data[2] = x1;\n    data[3] = y2;\n    data[4] = x2;\n    data[5] = y2;\n    data[6] = x2;\n    data[7] = y1;\n  } else {\n    let dx = sprite.origin[0] * w;\n    let dy = sprite.origin[1] * h;\n\n    let cosr = cos(rot);\n    let sinr = sin(rot);\n\n    let x1 = x - cosr * dx + sinr * dy;\n    let y1 = y - sinr * dx - cosr * dy;\n    let ch = cosr * h;\n    let cw = cosr * w;\n    let sh = sinr * h;\n    let sw = sinr * w;\n\n    data[0] = x1;\n    data[1] = y1;\n    data[2] = x1 - sh;\n    data[3] = y1 + ch;\n    data[4] = x1 + cw - sh;\n    data[5] = y1 + sw + ch;\n    data[6] = x1 + cw;\n    data[7] = y1 + sw;\n  }\n\n  data[8] = color[0];\n  data[9] = color[1];\n  data[10] = color[2];\n  data[11] = color[3];\n\n  let bias = 0;\n  let tex = elem.texs[0];\n  if (true) {\n    // Bias the texture coordinates depending on the minification/magnification\n    //   level so we do not get pixels from neighboring frames bleeding in\n    let zoom_level = max((uvs[2] - uvs[0]) * tex.width / w, (uvs[3] - uvs[1]) * tex.height / h);\n    if (zoom_level < 1) {\n      if (tex.filter_mag === gl.LINEAR) {\n        bias = 0.5;\n      }\n    } else if (zoom_level > 1) {\n      // need to apply this bias even with nearest filtering, not exactly sure why\n      let mipped_texels = zoom_level / 2;\n      bias = 0.5 + mipped_texels;\n    }\n  }\n\n  data[12] = uvs[0] + bias / tex.width;\n  data[13] = uvs[1] + bias / tex.height;\n  data[14] = uvs[2] - bias / tex.width;\n  data[15] = uvs[3] - bias / tex.height;\n\n  elem.uid = ++last_uid;\n  elem.shader = shader || null;\n  elem.blend = 0; // BLEND_ALPHA\n\n  if (shader_params) {\n    shader_params.clip_space = sprite_shader_params.clip_space;\n    elem.shader_params = shader_params;\n  } else {\n    elem.shader_params = null;\n  }\n  sprite_queue.push(elem);\n}\n\nexport function clip(z_start, z_end, x, y, w, h) {\n  let xy = vec2();\n  camera2d.virtualToCanvas(xy, [x, y]);\n  let wh = vec2();\n  camera2d.virtualToCanvas(wh, [x + w, y + h]);\n  xy[0] = round(xy[0]);\n  xy[1] = round(xy[1]);\n  wh[0] = round(wh[0]) - xy[0];\n  wh[1] = round(wh[1]) - xy[1];\n\n  // let gd_w = engine.render_width || engine.width;\n  let gd_h = engine.render_height || engine.height;\n  let scissor = [xy[0], gd_h - (xy[1] + wh[1]), wh[0], wh[1]];\n  queuefn(z_start - 0.01, () => {\n    gl.enable(gl.SCISSOR_TEST);\n    gl.scissor(scissor[0], scissor[1], scissor[2], scissor[3]);\n  });\n  queuefn(z_end - 0.01, () => {\n    gl.disable(gl.SCISSOR_TEST);\n  });\n}\n\nfunction diffTextures(texsa, texsb) {\n  if (texsa.length !== texsb.length) {\n    return true;\n  }\n  for (let ii = 0; ii < texsa.length; ++ii) {\n    if (texsa[ii] !== texsb[ii]) {\n      return true;\n    }\n  }\n  return false;\n}\n\nlet batch_state;\nlet sprite_geom;\nlet sprite_buffer; // Float32Array with 8 entries per vert\nlet sprite_buffer_len = 0; // in verts\nlet sprite_buffer_batch_start = 0;\nlet sprite_buffer_idx = 0; // in verts\nlet last_blend_mode;\nlet last_bound_shader;\nconst MAX_VERT_COUNT = 65536;\nlet batches = [];\n\nfunction commit() {\n  if (sprite_buffer_idx === sprite_buffer_batch_start) {\n    return;\n  }\n  batches.push({\n    state: batch_state,\n    start: sprite_buffer_batch_start,\n    end: sprite_buffer_idx\n  });\n  sprite_buffer_batch_start = sprite_buffer_idx;\n}\n\nfunction commitAndFlush() {\n  commit();\n  if (!batches.length) {\n    return;\n  }\n  assert(sprite_buffer_idx);\n  sprite_geom.update(sprite_buffer, sprite_buffer_idx);\n  sprite_geom.bind();\n\n  for (let ii = 0; ii < batches.length; ++ii) {\n    let batch = batches[ii];\n    let { state, start, end } = batch;\n    if (last_bound_shader !== state.shader || state.shader_params) {\n      shaders.bind(sprite_vshader, state.shader || sprite_fshader, state.shader_params || sprite_shader_params);\n      last_bound_shader = state.shader;\n    }\n    if (last_blend_mode !== state.blend) {\n      last_blend_mode = state.blend;\n      if (last_blend_mode === BLEND_ADDITIVE) {\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE);\n      } else {\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n      }\n    }\n    textures.bindArray(state.texs);\n    gl.drawElements(sprite_geom.mode, (end - start) * 3 / 2, gl.UNSIGNED_SHORT, start * 3);\n  }\n\n  batches.length = 0;\n  sprite_buffer_idx = 0;\n  sprite_buffer_batch_start = 0;\n}\n\nfunction bufferSpriteData(data) {\n  let index = sprite_buffer_idx * 8;\n  sprite_buffer_idx += 4;\n\n  let c1 = data[8];\n  let c2 = data[9];\n  let c3 = data[10];\n  let c4 = data[11];\n  let u1 = data[12];\n  let v1 = data[13];\n  let u2 = data[14];\n  let v2 = data[15];\n\n  sprite_buffer[index] = data[0];\n  sprite_buffer[index + 1] = data[1];\n  sprite_buffer[index + 2] = c1;\n  sprite_buffer[index + 3] = c2;\n  sprite_buffer[index + 4] = c3;\n  sprite_buffer[index + 5] = c4;\n  sprite_buffer[index + 6] = u1;\n  sprite_buffer[index + 7] = v1;\n\n  sprite_buffer[index + 8] = data[2];\n  sprite_buffer[index + 9] = data[3];\n  sprite_buffer[index + 10] = c1;\n  sprite_buffer[index + 11] = c2;\n  sprite_buffer[index + 12] = c3;\n  sprite_buffer[index + 13] = c4;\n  sprite_buffer[index + 14] = u1;\n  sprite_buffer[index + 15] = v2;\n\n  sprite_buffer[index + 16] = data[4];\n  sprite_buffer[index + 17] = data[5];\n  sprite_buffer[index + 18] = c1;\n  sprite_buffer[index + 19] = c2;\n  sprite_buffer[index + 20] = c3;\n  sprite_buffer[index + 21] = c4;\n  sprite_buffer[index + 22] = u2;\n  sprite_buffer[index + 23] = v2;\n\n  sprite_buffer[index + 24] = data[6];\n  sprite_buffer[index + 25] = data[7];\n  sprite_buffer[index + 26] = c1;\n  sprite_buffer[index + 27] = c2;\n  sprite_buffer[index + 28] = c3;\n  sprite_buffer[index + 29] = c4;\n  sprite_buffer[index + 30] = u2;\n  sprite_buffer[index + 31] = v1;\n}\n\nexport function draw() {\n  if (!sprite_queue.length) {\n    return;\n  }\n  gl.disable(gl.DEPTH_TEST);\n  gl.depthMask(false);\n  gl.enable(gl.BLEND);\n\n  clip_space[0] = 2 / engine.viewport[2];\n  clip_space[1] = -2 / engine.viewport[3];\n\n  last_blend_mode = -1;\n  last_bound_shader = -1;\n\n  if (!sprite_geom) {\n    sprite_geom = geom.create([[shaders.semantic.POSITION, gl.FLOAT, 2, false], [shaders.semantic.COLOR, gl.FLOAT, 4, false], [shaders.semantic.TEXCOORD, gl.FLOAT, 2, false]], [], null, geom.QUADS);\n    sprite_buffer = new Float32Array(1024);\n    sprite_buffer_len = sprite_buffer.length / 8;\n  }\n\n  sprite_queue.sort(cmpSprite);\n\n  batch_state = null;\n  assert(sprite_buffer_idx === 0);\n  assert(sprite_buffer_batch_start === 0);\n  assert(batches.length === 0);\n  for (let ii = 0; ii < sprite_queue.length; ++ii) {\n    let elem = sprite_queue[ii];\n    if (elem.fn) {\n      commitAndFlush();\n      batch_state = null;\n      elem.fn();\n    } else {\n      if (!batch_state || diffTextures(elem.texs, batch_state.texs) || elem.shader !== batch_state.shader || elem.shader_params !== batch_state.shader_params || elem.blend !== batch_state.blend) {\n        commit();\n        batch_state = elem;\n      }\n      if (sprite_buffer_idx + 4 > sprite_buffer_len) {\n        commitAndFlush();\n        // batch_state left alone\n        if (sprite_buffer_len !== MAX_VERT_COUNT) {\n          let new_length = min(sprite_buffer_len * 1.25 + 3 & ~3, MAX_VERT_COUNT); // eslint-disable-line no-bitwise\n          sprite_buffer_len = new_length;\n          sprite_buffer = new Float32Array(new_length * 8);\n        }\n      }\n\n      bufferSpriteData(elem.data);\n      sprite_freelist.push(elem);\n    }\n  }\n  commitAndFlush();\n\n  sprite_queue.length = 0;\n  if (last_blend_mode !== BLEND_ALPHA) {\n    // always reset to this\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n  }\n}\n\nfunction buildRects(ws, hs) {\n  let rects = [];\n  let total_w = 0;\n  for (let ii = 0; ii < ws.length; ++ii) {\n    total_w += ws[ii];\n  }\n  let total_h = 0;\n  for (let ii = 0; ii < hs.length; ++ii) {\n    total_h += hs[ii];\n  }\n  let tex_w = nextHighestPowerOfTwo(total_w);\n  let tex_h = nextHighestPowerOfTwo(total_h);\n  let wh = [];\n  for (let ii = 0; ii < ws.length; ++ii) {\n    wh.push(ws[ii] / total_h);\n  }\n  let y = 0;\n  for (let jj = 0; jj < hs.length; ++jj) {\n    let x = 0;\n    for (let ii = 0; ii < ws.length; ++ii) {\n      let r = vec4(x / tex_w, y / tex_h, (x + ws[ii]) / tex_w, (y + hs[jj]) / tex_h);\n      rects.push(r);\n      x += ws[ii];\n    }\n    y += hs[jj];\n  }\n  return {\n    widths: ws,\n    heights: hs,\n    wh,\n    rects,\n    total_w,\n    total_h\n  };\n}\n\nfunction Sprite(params) {\n  if (params.texs) {\n    this.texs = params.texs;\n  } else {\n    this.texs = [];\n    if (params.tex) {\n      this.texs.push(params.tex);\n    } else if (params.layers) {\n      assert(params.name);\n      this.texs = [];\n      for (let ii = 0; ii < params.layers; ++ii) {\n        this.texs.push(textures.load({\n          url: `img/${params.name}_${ii}.png`,\n          filter_min: params.filter_min,\n          filter_mag: params.filter_mag,\n          wrap_s: params.wrap_s,\n          wrap_t: params.wrap_t\n        }));\n      }\n    } else if (params.name) {\n      this.texs.push(textures.load({\n        url: `img/${params.name}.png`,\n        filter_min: params.filter_min,\n        filter_mag: params.filter_mag,\n        wrap_s: params.wrap_s,\n        wrap_t: params.wrap_t\n      }));\n    } else {\n      assert(params.url);\n      this.texs.push(textures.load(params));\n    }\n  }\n\n  this.origin = params.origin || vec2(0, 0); // [0,1] range\n  this.size = params.size || vec2(1, 1);\n  this.color = params.color || vec4(1, 1, 1, 1);\n  this.uvs = params.uvs || vec4(0, 0, 1, 1);\n\n  if (params.ws) {\n    this.uidata = buildRects(params.ws, params.hs);\n  }\n}\n\n// params:\n//   required: x, y, z\n//   optional: w, h, uvs, color\nSprite.prototype.draw = function (params) {\n  if (params.w === 0 || params.h === 0) {\n    return;\n  }\n  let w = (params.w || 1) * this.size[0];\n  let h = (params.h || 1) * this.size[1];\n  let uvs = typeof params.frame === 'number' ? this.uidata.rects[params.frame] : params.uvs || this.uvs;\n  queuesprite(this, params.x, params.y, params.z, w, h, params.rot, uvs, params.color || this.color, params.shader, params.shader_params);\n};\n\nSprite.prototype.drawDualTint = function (params) {\n  params.shader = sprite_dual_fshader;\n  params.shader_params = {\n    color1: params.color1\n  };\n  this.draw(params);\n};\n\nexport function create(params) {\n  return new Sprite(params);\n}\n\nexport function startup() {\n  clip_space[2] = -1;\n  clip_space[3] = 1;\n  sprite_vshader = shaders.create(gl.VERTEX_SHADER, '// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\\n// Released under MIT License: https://opensource.org/licenses/MIT\\n#pragma WebGL\\nprecision highp float;\\n\\n// per-vertex input\\nattribute vec2 POSITION;\\nattribute vec4 COLOR;\\nattribute vec2 TEXCOORD;\\n\\n// output\\nvarying lowp vec4 interp_color;\\nvarying vec2 interp_texcoord;\\n\\n// global parameters\\nuniform vec4 clip_space;\\n\\nvoid main()\\n{\\n  interp_texcoord = TEXCOORD;\\n  interp_color = COLOR;\\n  gl_Position = vec4(POSITION.xy * clip_space.xy + clip_space.zw, 0.0, 1.0);\\n}\\n');\n  sprite_fshader = shaders.create(gl.FRAGMENT_SHADER, '#pragma WebGL\\n\\nprecision lowp float;\\n\\nuniform sampler2D tex0;\\n\\nvarying lowp vec4 interp_color;\\nvarying vec2 interp_texcoord;\\n\\nvoid main(void) {\\n  vec4 tex = texture2D(tex0, interp_texcoord);\\n  gl_FragColor = tex * interp_color;\\n}\\n');\n  sprite_dual_fshader = shaders.create(gl.FRAGMENT_SHADER, '#pragma WebGL\\n\\nprecision lowp float;\\n\\nuniform sampler2D tex0;\\nuniform sampler2D tex1;\\nuniform lowp vec4 color1;\\n\\nvarying lowp vec4 interp_color;\\nvarying vec2 interp_texcoord;\\n\\nvoid main(void) {\\n  vec4 tex0 = texture2D(tex0,interp_texcoord);\\n  vec2 tex1 = texture2D(tex1,interp_texcoord).rg;\\n  float value = dot(tex0.rgb, vec3(0.2, 0.5, 0.3));\\n  vec3 valueR = value * interp_color.rgb;\\n  vec3 valueG = value * color1.rgb;\\n  vec3 value3 = mix(tex0.rgb, valueG, tex1.g);\\n  value3 = mix(value3, valueR, tex1.r);\\n  gl_FragColor = vec4(value3, tex0.a * interp_color.a);\\n}\\n');\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint-env browser */\nconst assert = require('assert');\n\nexport let textures = {};\nexport let load_count = 0;\nlet aniso = 4;\nlet max_aniso = 0;\nlet aniso_enum;\n\nlet default_filter_min;\nlet default_filter_mag;\n\nexport const format = {\n  R8: { count: 1 },\n  RGB8: { count: 3 },\n  RGBA8: { count: 4 }\n};\n\nexport function defaultFilters(min, mag) {\n  default_filter_min = min;\n  default_filter_mag = mag;\n}\n\nconst { isPowerOfTwo, nextHighestPowerOfTwo } = require('./vmath.js');\n\nlet bound_unit = null;\nlet bound_tex = [];\n\nlet handle_loading;\nlet handle_error;\n\nfunction setUnit(unit) {\n  if (unit !== bound_unit) {\n    gl.activeTexture(gl.TEXTURE0 + unit);\n    bound_unit = unit;\n  }\n}\n\nfunction bindHandle(unit, target, handle) {\n  if (bound_tex[unit] !== handle) {\n    setUnit(unit);\n    gl.bindTexture(target, handle);\n    bound_tex[unit] = handle;\n  }\n}\n\nfunction unbindHandle(target, handle) {\n  for (let unit = 0; unit < bound_tex.length; ++unit) {\n    if (bound_tex[unit] === handle) {\n      setUnit(unit);\n      gl.bindTexture(target, null);\n      bound_tex[unit] = null;\n    }\n  }\n}\n\nexport function bind(unit, tex) {\n  // May or may not change the unit\n  bindHandle(unit, tex.target, tex.eff_handle);\n}\n\n// hot path inlined for perf\nexport function bindArray(texs) {\n  for (let ii = 0; ii < texs.length; ++ii) {\n    let tex = texs[ii];\n    let handle = tex.eff_handle;\n    if (bound_tex[ii] !== handle) {\n      if (ii !== bound_unit) {\n        gl.activeTexture(gl.TEXTURE0 + ii);\n        bound_unit = ii;\n      }\n      gl.bindTexture(tex.target, handle);\n      bound_tex[ii] = handle;\n    }\n  }\n}\n\nfunction Texture(params) {\n  this.loaded = false;\n  this.load_fail = false;\n  this.target = gl.TEXTURE_2D;\n  this.handle = gl.createTexture();\n  this.eff_handle = handle_loading;\n  this.setSamplerState(params);\n\n  this.format = params.format || format.RGBA8;\n\n  if (params.data) {\n    this.updateData(params.width, params.height, params.data);\n  } else if (params.url) {\n    this.loadURL(params.url);\n  }\n}\n\nTexture.prototype.setSamplerState = function (params) {\n  let target = this.target;\n  setUnit(0);\n  bound_tex[0] = null; // Force a re-bind, no matter what\n  bindHandle(0, target, this.handle);\n\n  this.filter_min = params.filter_min || default_filter_min;\n  this.filter_mag = params.filter_mag || default_filter_mag;\n  gl.texParameteri(target, gl.TEXTURE_MIN_FILTER, this.filter_min);\n  gl.texParameteri(target, gl.TEXTURE_MAG_FILTER, this.filter_mag);\n  gl.texParameteri(target, gl.TEXTURE_WRAP_S, params.wrap_s || gl.REPEAT);\n  gl.texParameteri(target, gl.TEXTURE_WRAP_T, params.wrap_t || gl.REPEAT);\n\n  this.mipmaps = this.filter_min >= 0x2700 && this.filter_min <= 0x2703; // Probably gl.LINEAR_MIPMAP_LINEAR\n\n  if (max_aniso) {\n    if (this.mipmaps && params.filter_mag !== gl.NEAREST) {\n      gl.texParameterf(gl.TEXTURE_2D, aniso_enum, aniso);\n    } else {\n      gl.texParameterf(gl.TEXTURE_2D, aniso_enum, 1);\n    }\n  }\n};\n\nTexture.prototype.updateData = function updateData(w, h, data) {\n  setUnit(0);\n  bound_tex[0] = null; // Force a re-bind, no matter what\n  bindHandle(0, this.target, this.handle);\n  this.width = w;\n  this.height = h;\n  if (data instanceof Uint8Array) {\n    gl.texImage2D(this.target, 0, this.format.internal_type, w, h, 0, this.format.internal_type, this.format.gl_type, data);\n  } else {\n    assert(data instanceof Image);\n    // Pad up to power of two\n    if (!isPowerOfTwo(w) || !isPowerOfTwo(h)) {\n      this.width = nextHighestPowerOfTwo(w);\n      this.height = nextHighestPowerOfTwo(h);\n      gl.texImage2D(this.target, 0, this.format.internal_type, this.width, this.height, 0, this.format.internal_type, this.format.gl_type, null);\n      // Duplicate right and bottom pixel row by sending image 3 times\n      if (w !== this.width) {\n        gl.texSubImage2D(this.target, 0, 1, 0, this.format.internal_type, this.format.gl_type, data);\n      }\n      if (h !== this.height) {\n        gl.texSubImage2D(this.target, 0, 0, 1, this.format.internal_type, this.format.gl_type, data);\n      }\n      gl.texSubImage2D(this.target, 0, 0, 0, this.format.internal_type, this.format.gl_type, data);\n    } else {\n      gl.texImage2D(this.target, 0, this.format.internal_type, this.format.internal_type, this.format.gl_type, data);\n    }\n  }\n  if (this.mipmaps) {\n    gl.generateMipmap(this.target);\n  }\n  this.eff_handle = this.handle;\n  this.loaded = true;\n};\n\nTexture.prototype.loadURL = function loadURL(url) {\n  let tex = this;\n  let img = new Image();\n  ++load_count;\n  let did_done = false;\n  function done() {\n    if (!did_done) {\n      did_done = true;\n      --load_count;\n    }\n  }\n  img.onload = function () {\n    done();\n    tex.format = format.RGBA8;\n    tex.updateData(img.width, img.height, img);\n  };\n  function fail() {\n    done();\n    tex.eff_handle = handle_error;\n    tex.load_fail = true;\n  }\n  img.onerror = fail;\n  /* Turbulenz was doing it this way - some advantage?\n  if (typeof URL !== \"undefined\" && URL.createObjectURL) {\n    let xhr = new XMLHttpRequest();\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState === 4) {\n        let xhrStatus = xhr.status;\n        // Sometimes the browser sets status to 200 OK when the connection is closed\n        // before the message is sent (weird!).\n        // In order to address this we fail any completely empty responses.\n        // Hopefully, nobody will get a valid response with no headers and no body!\n        if (xhr.getAllResponseHeaders() === \"\" && !xhr.response) {\n          fail();\n        } else {\n          if (xhrStatus === 200 || xhrStatus === 0) {\n            var blob = xhr.response;\n            img.onload = function blobImageLoadedFn() {\n              imageLoaded();\n              URL.revokeObjectURL(img.src);\n              blob = null;\n            };\n            img.src = URL.createObjectURL(blob);\n          } else {\n            fail();\n          }\n        }\n        xhr.onreadystatechange = null;\n      }\n    };\n    xhr.open('GET', src, true);\n    xhr.responseType = 'blob';\n    xhr.send();\n  } else { */\n  img.crossOrigin = 'anonymous';\n  img.src = url;\n};\n\nTexture.prototype.copyTexImage = function (x, y, w, h) {\n  assert(w && h);\n  bindHandle(0, this.target, this.handle);\n  gl.copyTexImage2D(this.target, 0, gl.RGB, x, y, w, h, 0);\n  this.width = w;\n  this.height = h;\n};\n\nTexture.prototype.destroy = function () {\n  delete textures[this.name];\n  unbindHandle(this.target, this.handle);\n  gl.deleteTexture(this.handle);\n};\n\nfunction create(params) {\n  return new Texture(params);\n}\n\nexport function createForCapture() {\n  let texture = create({\n    filter_min: gl.NEAREST,\n    filter_mag: gl.NEAREST,\n    wrap_s: gl.CLAMP_TO_EDGE,\n    wrap_t: gl.CLAMP_TO_EDGE,\n    format: gl.RGB8\n  });\n  texture.loaded = true;\n  texture.eff_handle = texture.handle;\n  texture.name = 'screen_temporary_tex';\n  return texture;\n}\n\nexport function load(params) {\n  let key = params.name || params.url;\n  assert(key);\n  if (textures[key]) {\n    return textures[key];\n  }\n  let texture = create(params);\n  texture.name = key;\n  textures[key] = texture;\n  return texture;\n}\n\nfunction cname(key) {\n  let idx = key.lastIndexOf('/');\n  if (idx !== -1) {\n    key = key.slice(idx + 1);\n  }\n  idx = key.lastIndexOf('.');\n  if (idx !== -1) {\n    key = key.slice(0, idx);\n  }\n  return key.toLowerCase();\n}\nexport function findTexForReplacement(search_key) {\n  search_key = cname(search_key);\n  for (let key in textures) {\n    let compare_key = cname(key);\n    if (compare_key === search_key) {\n      return textures[key];\n    }\n  }\n  return null;\n}\n\nexport function startup() {\n\n  default_filter_min = gl.LINEAR_MIPMAP_LINEAR;\n  default_filter_mag = gl.LINEAR;\n\n  format.R8.internal_type = gl.LUMINANCE;\n  format.R8.gl_type = gl.UNSIGNED_BYTE;\n  format.RGB8.internal_type = gl.RGB;\n  format.RGB8.gl_type = gl.UNSIGNED_BYTE;\n  format.RGBA8.internal_type = gl.RGBA;\n  format.RGBA8.gl_type = gl.UNSIGNED_BYTE;\n\n  let ext_anisotropic = gl.getExtension('EXT_texture_filter_anisotropic') || gl.getExtension('MOZ_EXT_texture_filter_anisotropic') || gl.getExtension('WEBKIT_EXT_texture_filter_anisotropic');\n  if (ext_anisotropic) {\n    aniso_enum = ext_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT;\n    aniso = max_aniso = gl.getParameter(ext_anisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT);\n  }\n\n  handle_error = load({\n    name: 'error',\n    width: 2, height: 2,\n    format: format.RGBA8,\n    filter_mag: gl.NEAREST,\n    data: new Uint8Array([255, 20, 147, 255, 255, 0, 0, 255, 255, 255, 255, 255, 255, 20, 147, 255])\n  }).handle;\n\n  handle_loading = load({\n    name: 'loading',\n    width: 2, height: 2,\n    format: format.RGBA8,\n    data: new Uint8Array([127, 127, 127, 255, 0, 0, 0, 255, 64, 64, 64, 255, 127, 127, 127, 255])\n  }).handle;\n\n  load({\n    name: 'white',\n    width: 2, height: 2,\n    format: format.RGBA8,\n    data: new Uint8Array([255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255])\n  });\n}","/* global Z */\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst glov_engine = require('./engine.js');\n\nconst sprites = require('./sprites.js');\nconst shaders = require('./shaders.js');\nconst textures = require('./textures.js');\nconst glov_ui = require('./ui.js');\n\nconst { easeOut } = require('../../common/util.js');\nconst { unit_vec, vec4 } = require('./vmath.js');\nconst { floor, min, pow, random } = Math;\n\nlet transitions = [];\n\nexport const IMMEDIATE = 'immediate';\n\nexport const REMOVE = 'remove';\nexport const CONTINUE = 'continue';\n\nconst shader_data = {\n  transition_pixelate: {\n    fp: '#pragma WebGL\\n\\nprecision lowp float;\\n\\nvarying highp vec2 interp_texcoord;\\n\\nuniform sampler2D tex0;\\nuniform vec4 param0;\\nuniform vec4 param1;\\n\\nvoid main(void)\\n{\\n  vec2 interp_uvs = interp_texcoord;\\n  // TODO: for best look, should generate an appropriate mipmap and sample from that/just render it w/ nearest neighbor\\n  // result = texture2D(tex0, min(floor(interp_uvs.xy * param0.xy + 0.5) * param0.zw - param1.xy, param1.zw) );\\n\\n  // Unlike ARBfp version, shift RGB channels separately (3x slowdown)\\n  vec4 texture0r = texture2D(tex0, min(floor(interp_uvs.xy * param0.xy + vec2(0.58, 0.5)) * param0.zw - param1.xy, param1.zw) );\\n  vec4 texture0g = texture2D(tex0, min(floor(interp_uvs.xy * param0.xy + vec2(0.5, 0.48)) * param0.zw - param1.xy, param1.zw) );\\n  vec4 texture0b = texture2D(tex0, min(floor(interp_uvs.xy * param0.xy + vec2(0.42, 0.5)) * param0.zw - param1.xy, param1.zw) );\\n  gl_FragColor = vec4(texture0r.r, texture0g.g, texture0b.b, 1);\\n}\\n'\n  }\n};\n\nfunction getShader(key) {\n  let elem = shader_data[key];\n  if (!elem.shader) {\n    elem.shader = shaders.create(gl.FRAGMENT_SHADER, elem.fp);\n  }\n  return elem.shader;\n}\n\nclass GlovTransition {\n  constructor(z, func) {\n    this.z = z;\n    this.capture = null;\n    this.func = func;\n    this.accum_time = 0;\n  }\n}\n\nfunction transitionCapture(trans) {\n  assert(!trans.capture);\n  trans.capture = textures.createForCapture();\n  glov_engine.captureFramebuffer(trans.capture);\n}\n\nexport function queue(z, fn) {\n  let immediate = false;\n  if (z === IMMEDIATE) {\n    immediate = true;\n    z = Z.TRANSITION_FINAL;\n  }\n\n  for (let ii = 0; ii < transitions.length; ++ii) {\n    let trans = transitions[ii];\n    if (trans.z === z) {\n      // same Z\n      assert(trans.capture);\n      if (!trans.capture) {\n        // two transitions at the same Z on one frame!  ignore second\n        return false;\n      }\n    }\n  }\n  let trans = new GlovTransition(z, fn);\n  transitions.push(trans);\n\n  if (immediate) {\n    transitionCapture(trans);\n  }\n  return true;\n}\n\nfunction destroyTexture(tex) {\n  tex.destroy();\n}\n\nexport function render(dt) {\n  dt = min(dt, 100); // debug: clamp frame times\n  for (let trans_idx = 0; trans_idx < transitions.length; ++trans_idx) {\n    let trans = transitions[trans_idx];\n    trans.accum_time += dt;\n    if (!trans.capture) {\n      // queue up a capture past the specified Z, so transitions rendering at that Z (plus a handful) get captured\n      sprites.queuefn(trans.z + Z.TRANSITION_RANGE, transitionCapture.bind(null, trans));\n    } else if (trans.capture) {\n      // call the function and give them the Z\n      // If not the last one, want it to end now!\n      let force_end = trans_idx < transitions.length - 1;\n      let ret = trans.func(trans.z, trans.capture, trans.accum_time, force_end);\n      if (ret === REMOVE) {\n        setTimeout(destroyTexture.bind(null, trans.capture), 0);\n        transitions.splice(trans_idx, 1);\n        trans_idx--;\n      }\n    }\n  }\n}\n\nfunction glovTransitionFadeFunc(fade_time, z, initial, ms_since_start, force_end) {\n  let progress = min(ms_since_start / fade_time, 1);\n  let alpha = 1 - easeOut(progress, 2);\n  let color = vec4(1, 1, 1, alpha);\n  camera2d.setNormalized();\n  sprites.queueraw4([initial], 0, 0, 0, 1, 1, 1, 1, 0, z, 0, 1, 1, 0, color);\n\n  if (force_end || progress === 1) {\n    return REMOVE;\n  }\n  return CONTINUE;\n}\n\n/*\n  // Doesn't work because we need more than just 2 UV values in the queue call\nfunction glovTransitionWipeFunc(wipe_time, wipe_angle, z, tex, ms_since_start, force_end) {\n  let progress = min(ms_since_start / wipe_time, 1);\n\n  camera2d.setNormalized();\n\n  let uvs = [[0,1], [1,0]];\n\n  let points = [{}, {}, {}, {}];\n  for (let ii = 0; ii < 4; ii++) {\n    let x = (ii === 1 || ii === 2) ? 1 : 0;\n    let y = (ii >= 2) ? 1 : 0;\n    points[ii].x = x;\n    points[ii].y = y;\n  }\n\n  while (wipe_angle > PI) {\n    wipe_angle -= (2 * PI);\n  }\n  while (wipe_angle < -PI) {\n    wipe_angle += (2 * PI);\n  }\n\n  // TODO: if anyone ever uses this, change 0 degrees to be up, not right, to match other things?\n  if (wipe_angle >= -PI_4 && wipe_angle <= PI_4) {\n    // horizontal wipe from left to right\n    let x0 = progress * 2; // rightmost x\n    let x1 = x0 - sin(abs(wipe_angle)) / SQRT1_2; // leftmost x\n    if (wipe_angle < 0) {\n      points[0].x = x1;\n      points[3].x = x0;\n    } else {\n      points[0].x = x0;\n      points[3].x = x1;\n    }\n    points[1].x = points[2].x = 2;\n  } else if (wipe_angle >= PI_2 + PI_4 || wipe_angle <= -PI_2 - PI_4) {\n    // horizontal wipe from right to left\n    let x0 = 1 - progress * 2; // leftmost x\n    let x1 = x0 + sin(abs(wipe_angle)) / SQRT1_2; // rightmost x,\n    if (wipe_angle < 0) {\n      points[1].x = x1;\n      points[2].x = x0;\n    } else {\n      points[1].x = x0;\n      points[2].x = x1;\n    }\n    points[0].x = points[3].x = -1;\n  } else if (wipe_angle > PI_4 && wipe_angle <= PI_2 + PI_4) {\n    // vertical wipe, top to bottom\n    let y0 = progress * 2; // bottommost y\n    let offs = cos(wipe_angle) / SQRT1_2;\n    let y1 = y0 - abs(offs); // topmost y,\n    if (offs > 0) {\n      points[0].y = y0;\n      points[1].y = y1;\n    } else {\n      points[0].y = y1;\n      points[1].y = y0;\n    }\n    points[2].y = points[3].y = 2;\n  } else {\n    // vertical wipe, bottom to top\n    let y0 = 1 - progress * 2; // topmost y\n    let offs = cos(wipe_angle) / SQRT1_2;\n    let y1 = y0 + abs(offs); // bottommost y,\n    if (offs > 0) {\n      points[2].y = y1;\n      points[3].y = y0;\n    } else {\n      points[2].y = y0;\n      points[3].y = y1;\n    }\n    points[0].y = points[1].y = -1;\n  }\n  // interp UVs based on points\n  points[0].u = lerp(points[0].x, uvs[0][0], uvs[1][0]);\n  points[1].u = lerp(points[1].x, uvs[0][0], uvs[1][0]);\n  points[2].u = lerp(points[2].x, uvs[0][0], uvs[1][0]);\n  points[3].u = lerp(points[3].x, uvs[0][0], uvs[1][0]);\n  points[0].v = lerp(points[0].y, uvs[0][1], uvs[1][1]);\n  points[1].v = lerp(points[1].y, uvs[0][1], uvs[1][1]);\n  points[2].v = lerp(points[2].y, uvs[0][1], uvs[1][1]);\n  points[3].v = lerp(points[3].y, uvs[0][1], uvs[1][1]);\n\n  sprites.queueraw4([tex],\n    points[0].x, points[0].y, points[3].x, points[3].y,\n    points[2].x, points[2].y, points[1].x, points[1].y,\n    z,\n    points[0].u, points[0].v, points[2].u, points[2].v,\n    unit_vec, 'alpha_nearest');\n\n  if (force_end || progress === 1) {\n    return REMOVE;\n  }\n  return CONTINUE;\n}\n\n*/\n\nfunction glovTransitionSplitScreenFunc(time, border_width, slide_window, z, tex, ms_since_start, force_end) {\n  let border_color = vec4(1, 1, 1, 1);\n  let progress = easeOut(min(ms_since_start / time, 1), 2);\n  camera2d.setNormalized();\n\n  let uvs = [[0, 1], [1, 0]];\n\n  let xoffs = progress;\n  let v_half = uvs[0][1] + (uvs[1][1] - uvs[0][1]) / 2;\n  if (slide_window) {\n    // slide window\n    sprites.queueraw([tex], 0, 0, z, 1 - xoffs, 1 / 2, 0, uvs[0][1], uvs[1][0] * (1 - progress), v_half, unit_vec);\n    sprites.queueraw([tex], 0 + xoffs, 1 / 2, z, 1 - xoffs, 1 / 2, uvs[1][0] * progress, v_half, uvs[1][0], uvs[1][1], unit_vec);\n  } else {\n    // slide image\n    sprites.queueraw([tex], 0 - xoffs, 0, z, 1, 1 / 2, uvs[0][0], uvs[0][1], uvs[1][0], v_half, unit_vec);\n    sprites.queueraw([tex], 0 + xoffs, 1 / 2, z, 1, 1 / 2, uvs[0][0], v_half, uvs[1][0], uvs[1][1], unit_vec);\n  }\n  let border_grow_progress = min(progress * 4, 1);\n  border_color[3] = border_grow_progress;\n  border_width *= border_grow_progress;\n  // TODO: Would look better if the horizontal border grew from the middle out, so the overlapping bit is identical\n  // on both sides\n  glov_ui.drawRect(0, 0.5 - border_width, 1 - xoffs, 0.5, z + 1, border_color);\n  glov_ui.drawRect(1 - xoffs - border_width, 0, 1 - xoffs, 0.5, z + 1, border_color);\n  glov_ui.drawRect(xoffs, 0.5, 1, 0.5 + border_width, z + 1, border_color);\n  glov_ui.drawRect(xoffs, 0.5, xoffs + border_width, 1, z + 1, border_color);\n\n  if (force_end || progress === 1) {\n    return REMOVE;\n  }\n  return CONTINUE;\n}\n\nconst render_scale = 1;\nlet transition_pixelate_texture;\n\nfunction transitionPixelateCapture() {\n  if (!transition_pixelate_texture) {\n    transition_pixelate_texture = textures.createForCapture();\n  }\n  glov_engine.captureFramebuffer(transition_pixelate_texture);\n}\n\nfunction glovTransitionPixelateFunc(time, z, tex, ms_since_start, force_end) {\n  //ms_since_start %= time;\n  //let viewport = glov_engine.graphics_device.getViewport();\n  //let gd_width = viewport[2];\n  let gd_width = glov_engine.width;\n  let progress = min(ms_since_start / time, 1);\n  camera2d.setNormalized();\n\n  if (progress > 0.5) {\n    sprites.queuefn(z, transitionPixelateCapture);\n    if (transition_pixelate_texture) {\n      tex = transition_pixelate_texture;\n    }\n  }\n\n  let partial_progress = (progress > 0.5 ? 1 - progress : progress) * 2;\n  // Use power of two scalings, but then scale relative to a 1024px virtual screen, so the biggest\n  //  pixel is about the same percentage of the screen regardless of resolution.\n  let pixel_scale = pow(2, floor(partial_progress * 8.9)) / 1024 * gd_width * render_scale;\n\n  let param0 = vec4(tex.width / pixel_scale, tex.height / pixel_scale, pixel_scale / tex.width, pixel_scale / tex.height);\n  let param1 = vec4(0.5 / tex.width, 0.5 / tex.height, (tex.texSizeX - 1) / tex.width, (tex.texSizeY - 1) / tex.height);\n\n  sprites.queueraw([tex], 0, 0, z + 1, 1, 1, 0, 1, 1, 0, unit_vec, getShader('transition_pixelate'), {\n    param0,\n    param1\n  });\n\n  if (force_end || progress === 1) {\n    setTimeout(destroyTexture.bind(null, transition_pixelate_texture), 0);\n    transition_pixelate_texture = null;\n    return REMOVE;\n  }\n  return CONTINUE;\n}\n\nexport function fade(fade_time) {\n  return glovTransitionFadeFunc.bind(null, fade_time);\n}\n\n// export function wipe(wipe_time, wipe_angle) {\n//   return glovTransitionWipeFunc.bind(null, wipe_time, wipe_angle);\n// }\n\n// border_width in camera-relative size\nexport function splitScreen(time, border_width, slide_window) {\n  border_width /= camera2d.w(); // convert to normalized units\n  return glovTransitionSplitScreenFunc.bind(null, time, border_width, slide_window);\n}\n\nexport function pixelate(fade_time) {\n  return glovTransitionPixelateFunc.bind(null, fade_time);\n}\n\n// export function logoZoom(time, logo) {\n//   return glovTransitionLogoZoomFunc.bind(null, time, logo);\n// }\n\nexport function randomTransition(fade_time_scale) {\n  fade_time_scale = fade_time_scale || 1;\n  let idx = floor(random() * 3);\n  switch (idx) {\n    case 0:\n      return fade(500 * fade_time_scale);\n    case 1:\n      return splitScreen(250 * fade_time_scale, 2, false);\n    case 2:\n      return pixelate(750 * fade_time_scale);\n    // case 3:\n    //   return wipe(250 * fade_time_scale, random() * 2 * PI);\n    // case 4:\n    //   if (!logo) {\n    //     GlovTextureLoadOptions options;\n    //     options.clamp_s = options.clamp_t = true;\n    //     logo = GlovTextures::loadtex(\"data/SampleLogoTransition.png\", &options);\n    //   }\n    //   glovTransitionQueue(Z_TRANSITION_FINAL, glovTransitionLogoZoom(500, logo));\n    //   break;\n    default:\n      assert(0);\n  }\n  return null;\n}","/* eslint-env jquery */\n/* eslint no-underscore-dangle:off */\n/* global Z:false */\n\nwindow.Z = window.Z || {};\nZ.BORDERS = Z.BORDERS || 90;\nZ.UI = Z.UI || 100;\nZ.MODAL = Z.MODAL || 1000;\nZ.TOOLTIP = Z.TOOLTIP || 2000;\nZ.DEBUG = Z.DEBUG || 9800;\n\n// very high, but can still add integers\nZ.TRANSITION_FINAL = Z.TRANSITION_FINAL || 9900;\n// how much Z range can be used for rendering transitions - the capture happens at z + Z_TRANSITION_RANGE\nZ.TRANSITION_RANGE = Z.TRANSITION_RANGE || 10;\n\nZ.FPSMETER = Z.FPSMETER || 10000;\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst glov_edit_box = require('./edit_box.js');\nconst effects = require('./effects.js');\nconst glov_engine = require('./engine.js');\nconst glov_font = require('./font.js');\nconst glov_input = require('./input.js');\nconst { abs, max, min, round, sqrt } = Math;\nconst glov_sprites = require('./sprites.js');\nconst textures = require('./textures.js');\nconst { clone, merge } = require('../../common/util.js');\nconst { mat43, m43identity, m43mul } = require('./mat43.js');\nconst { clamp, lerp, vec2, vec4, v4scale } = require('./vmath.js');\n\nconst MODAL_DARKEN = 0.75;\nlet KEYS;\nlet pad_codes;\n\nconst menu_fade_params_default = {\n  blur: [0.125, 0.865],\n  saturation: [0.5, 0.1],\n  brightness: [1, 1 - MODAL_DARKEN],\n  fallback_darken: vec4(0, 0, 0, MODAL_DARKEN),\n  z: Z.MODAL\n};\n\nexport function focuslog(...args) {\n  // console.log(`focuslog(${glov_engine.global_frame_index}): `, ...args);\n}\n\nexport function makeColorSet(color) {\n  let ret = {\n    regular: vec4(),\n    rollover: vec4(),\n    down: vec4(),\n    disabled: vec4()\n  };\n  v4scale(ret.regular, color, 1);\n  v4scale(ret.rollover, color, 0.8);\n  v4scale(ret.down, color, 0.7);\n  v4scale(ret.disabled, color, 0.4);\n  for (let field in ret) {\n    ret[field][3] = color[3];\n  }\n  return ret;\n}\n\nfunction doBlurEffect(factor, params) {\n  factor = lerp(factor, params.blur[0], params.blur[1]);\n  if (factor) {\n    effects.applyGaussianBlur({\n      source: glov_engine.captureFramebuffer(),\n      blur: factor\n      // min_size: 128,\n    });\n  }\n}\n\nlet desaturate_xform = mat43();\nlet desaturate_tmp = mat43();\nfunction doDesaturateEffect(factor, params) {\n  let saturation = lerp(factor, params.saturation[0], params.saturation[1]);\n  let brightness = lerp(factor, params.brightness[0], params.brightness[1]);\n  if (saturation === 1 && brightness === 1) {\n    return;\n  }\n  m43identity(desaturate_xform);\n\n  effects.saturationMatrix(desaturate_tmp, saturation);\n  m43mul(desaturate_xform, desaturate_xform, desaturate_tmp);\n\n  effects.brightnessScaleMatrix(desaturate_tmp, brightness);\n  m43mul(desaturate_xform, desaturate_xform, desaturate_tmp);\n\n  // if ((hue % (Math.PI * 2)) !== 0) {\n  //   effects.hueMatrix(tmp, hue);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (contrast !== 1) {\n  //   effects.contrastMatrix(tmp, contrast);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (brightness !== 0) {\n  //   effects.brightnessMatrix(tmp, brightness);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (additiveRGB[0] !== 0 || additiveRGB[1] !== 0 || additiveRGB[2] !== 0) {\n  //   effects.additiveMatrix(tmp, additiveRGB);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (grayscale) {\n  //   effects.grayScaleMatrix(tmp);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (negative) {\n  //   effects.negativeMatrix(tmp);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (sepia) {\n  //   effects.sepiaMatrix(tmp);\n  //   m43mul(xform, xform, tmp);\n  // }\n  effects.applyColorMatrix({\n    colorMatrix: desaturate_xform,\n    source: glov_engine.captureFramebuffer()\n  });\n}\n\n// overrideable default parameters\nexport let button_height = 32;\nexport let font_height = 24;\nexport let button_width = 200;\nexport let button_img_size = button_height;\nexport let modal_width = 600;\nexport let modal_y0 = 200;\nexport let modal_title_scale = 1.2;\nexport let pad = 16;\nexport let panel_pixel_scale = 32 / 13; // button_height / button pixel resolution\nexport let tooltip_width = 400;\nexport let tooltip_pad = 8;\n\nexport let font_style_focused = glov_font.style(null, {\n  color: 0x000000ff,\n  outline_width: 2,\n  outline_color: 0xFFFFFFff\n});\nexport let font_style_normal = glov_font.styleColored(null, 0x000000ff);\n\nexport let font;\nexport let sprites = {};\n\nexport let color_button = makeColorSet([1, 1, 1, 1]);\nexport let color_panel = vec4(1, 1, 0.75, 1);\nexport let modal_font_style = glov_font.styleColored(null, 0x000000ff);\n\nlet sounds = {};\nexport let button_mouseover = false; // for callers to poll the very last button\nexport let button_focused = false; // for callers to poll the very last button\nexport let touch_changed_focus = false; // did a touch even this frame change focus?\n// For tracking global mouseover state\nlet last_frame_button_mouseover = false;\nlet frame_button_mouseover = false;\n\nlet modal_dialog = null;\nlet modal_stealing_focus = false;\nexport let menu_up = false; // Boolean to be set by app to impact behavior, similar to a modal\nlet menu_fade_params = merge({}, menu_fade_params_default);\nlet menu_up_time = 0;\n\nexports.this_frame_edit_boxes = [];\nlet last_frame_edit_boxes = [];\nlet dom_elems = [];\nlet dom_elems_issued = 0;\n\n// for modal dialogs\nlet button_keys;\n\nlet focused_last_frame;\nlet focused_this_frame;\nlet focused_key_not;\nlet focused_key;\nlet focused_key_prev1;\nlet focused_key_prev2;\n\nexport function startup(_font, ui_sprites) {\n  ui_sprites = ui_sprites || {};\n  font = _font;\n  KEYS = glov_input.KEYS;\n  pad_codes = glov_input.pad_codes;\n\n  function loadUISprite(name, ws, hs, only_override) {\n    let override = ui_sprites[name];\n    if (override) {\n      sprites[name] = glov_sprites.create({\n        name: override[0],\n        ws: override[1],\n        hs: override[2]\n      });\n    } else if (!only_override) {\n      sprites[name] = glov_sprites.create({\n        name: `ui/${name}`,\n        ws,\n        hs\n      });\n    }\n  }\n\n  loadUISprite('button', [4, 5, 4], [13]);\n  sprites.button_regular = sprites.button;\n  loadUISprite('button_rollover', [4, 5, 4], [13], true);\n  loadUISprite('button_down', [4, 5, 4], [13]);\n  loadUISprite('button_disabled', [4, 5, 4], [13]);\n  loadUISprite('panel', [3, 2, 3], [3, 10, 3]);\n  loadUISprite('menu_entry', [4, 5, 4], [13]);\n  loadUISprite('menu_selected', [4, 5, 4], [13]);\n  loadUISprite('menu_down', [4, 5, 4], [13]);\n  loadUISprite('menu_header', [4, 5, 12], [13]);\n\n  sprites.white = glov_sprites.create({ url: 'white' });\n\n  button_keys = {\n    ok: { key: [], pad: [pad_codes.X] },\n    cancel: { key: [KEYS.ESC], pad: [pad_codes.B, pad_codes.Y] }\n  };\n  button_keys.yes = clone(button_keys.ok);\n  button_keys.yes.key.push(KEYS.Y);\n  button_keys.no = clone(button_keys.cancel);\n  button_keys.no.key.push(KEYS.N);\n}\n\nlet dynamic_text_elem;\nexport function getElem() {\n  if (modal_dialog) {\n    return null;\n  }\n  if (dom_elems_issued >= dom_elems.length) {\n    let elem = document.createElement('div');\n    elem.setAttribute('class', 'glovui_dynamic');\n    if (!dynamic_text_elem) {\n      dynamic_text_elem = document.getElementById('dynamic_text');\n    }\n    dynamic_text_elem.appendChild(elem);\n    dom_elems.push(elem);\n  }\n  let elem = dom_elems[dom_elems_issued];\n  dom_elems_issued++;\n  return elem;\n}\n\nlet sound_manager;\nexport function bindSounds(_sound_manager, _sounds) {\n  sound_manager = _sound_manager;\n  sounds = _sounds;\n  for (let key in sounds) {\n    sound_manager.loadSound(sounds[key]);\n  }\n}\n\nexport function drawHBox(coords, s, color) {\n  let uidata = s.uidata;\n  let ws = [uidata.wh[0] * coords.h, 0, uidata.wh[2] * coords.h];\n  let x = coords.x;\n  ws[1] = max(0, coords.w - ws[0] - ws[2]);\n  for (let ii = 0; ii < ws.length; ++ii) {\n    let my_w = ws[ii];\n    s.draw({\n      x,\n      y: coords.y,\n      z: coords.z,\n      color,\n      w: my_w,\n      h: coords.h,\n      uvs: uidata.rects[ii]\n    });\n    x += my_w;\n  }\n}\n\nexport function drawBox(coords, s, pixel_scale, color) {\n  let uidata = s.uidata;\n  let scale = pixel_scale;\n  let ws = [uidata.widths[0] * scale, 0, uidata.widths[2] * scale];\n  ws[1] = max(0, coords.w - ws[0] - ws[2]);\n  let hs = [uidata.heights[0] * scale, 0, uidata.heights[2] * scale];\n  hs[1] = max(0, coords.h - hs[0] - hs[2]);\n  let x = coords.x;\n  for (let ii = 0; ii < ws.length; ++ii) {\n    let my_w = ws[ii];\n    if (my_w) {\n      let y = coords.y;\n      for (let jj = 0; jj < hs.length; ++jj) {\n        let my_h = hs[jj];\n        if (my_h) {\n          s.draw({\n            x, y, z: coords.z,\n            color,\n            w: my_w,\n            h: my_h,\n            uvs: uidata.rects[jj * 3 + ii]\n          });\n          y += my_h;\n        }\n      }\n      x += my_w;\n    }\n  }\n}\n\nexport function playUISound(name) {\n  if (name === 'select') {\n    name = 'button_click';\n  }\n  if (sounds[name] && sound_manager) {\n    sound_manager.play(sounds[name]);\n  }\n}\n\nexport function setMouseOver(key) {\n  if (last_frame_button_mouseover !== key && frame_button_mouseover !== key) {\n    playUISound('rollover');\n  }\n  frame_button_mouseover = key;\n  button_mouseover = true;\n}\n\nexport function focusSteal(key) {\n  if (key !== focused_key) {\n    focuslog('focusSteal ', key);\n  }\n  focused_this_frame = true;\n  focused_key = key;\n}\n\nexport function focusCanvas() {\n  focusSteal('canvas');\n}\n\nexport function isFocusedPeek(key) {\n  return focused_key === key;\n}\nexport function isFocused(key) {\n  if (key !== focused_key_prev2) {\n    focused_key_prev1 = focused_key_prev2;\n    focused_key_prev2 = key;\n  }\n  if (key === focused_key || key !== focused_key_not && !focused_this_frame && !focused_last_frame) {\n    if (key !== focused_key) {\n      focuslog('isFocused->focusSteal');\n    }\n    focusSteal(key);\n    return true;\n  }\n  return false;\n}\n\nexport function focusNext(key) {\n  focuslog('focusNext ', key);\n  playUISound('rollover');\n  focused_key = null;\n  focused_last_frame = focused_this_frame = false;\n  focused_key_not = key;\n  // Eat input events so a pair of keys (e.g. SDLK_DOWN and SDLK_CONTROLLER_DOWN)\n  // don't get consumed by two separate widgets\n  glov_input.eatAllInput();\n}\n\nexport function focusPrev(key) {\n  focuslog('focusPrev ', key);\n  playUISound('rollover');\n  if (key === focused_key_prev2) {\n    focusSteal(focused_key_prev1);\n  } else {\n    focusSteal(focused_key_prev2);\n  }\n  glov_input.eatAllInput();\n}\n\nexport function focusCheck(key) {\n  if (modal_stealing_focus) {\n    // hidden by modal, etc\n    return false;\n  }\n  // Returns true even if focusing previous element, since for this frame, we are still effectively focused!\n  let focused = isFocused(key);\n  if (focused) {\n    if (glov_input.keyDownEdge(KEYS.TAB)) {\n      if (glov_input.keyDown(KEYS.SHIFT)) {\n        focusPrev(key);\n      } else {\n        focusNext(key);\n        focused = false;\n      }\n    }\n    if (glov_input.padButtonDownEdge(pad_codes.RIGHT_BUMPER)) {\n      focusNext(key);\n      focused = false;\n    }\n    if (glov_input.padButtonDownEdge(pad_codes.LEFT_BUMPER)) {\n      focusPrev(key);\n    }\n  }\n  return focused;\n}\n\nexport function panel(param) {\n  assert(typeof param.x === 'number');\n  assert(typeof param.y === 'number');\n  assert(typeof param.w === 'number');\n  assert(typeof param.h === 'number');\n  param.z = param.z || Z.UI - 1;\n  let color = param.color || color_panel;\n  drawBox(param, sprites.panel, panel_pixel_scale, color);\n  glov_input.click(param);\n  glov_input.mouseOver(param);\n}\n\nexport function drawTooltip(param) {\n  assert(typeof param.x === 'number');\n  assert(typeof param.y === 'number');\n  assert(typeof param.tooltip === 'string');\n\n  let tooltip_w = param.tooltip_width || tooltip_width;\n  let x = param.x;\n  if (x + tooltip_w > camera2d.x1()) {\n    x = camera2d.x1() - tooltip_w;\n  }\n  let z = param.z || Z.TOOLTIP;\n  let tooltip_y0 = param.y;\n  let eff_tooltip_pad = param.tooltip_pad || tooltip_pad;\n  let y = tooltip_y0 + eff_tooltip_pad;\n  y += font.drawSizedWrapped(modal_font_style, x + eff_tooltip_pad, y, z + 1, tooltip_w - eff_tooltip_pad * 2, 0, font_height, param.tooltip);\n  y += eff_tooltip_pad;\n\n  panel({\n    x,\n    y: tooltip_y0,\n    z,\n    w: tooltip_w,\n    h: y - tooltip_y0\n  });\n}\n\n// eslint-disable-next-line complexity\nexport function buttonShared(param) {\n  let state = 'regular';\n  let ret = false;\n  let key = param.key || `${param.x}_${param.y}`;\n  let focused = !param.disabled && !param.no_focus && focusCheck(key);\n  button_mouseover = false;\n  if (param.disabled) {\n    glov_input.mouseOver(param); // Still eat mouse events\n    state = 'disabled';\n  } else if (glov_input.click(param)) {\n    if (!param.no_touch_mouseover || !glov_input.mousePosIsTouch()) {\n      setMouseOver(key);\n    }\n    if (param.touch_twice && glov_input.mousePosIsTouch() && !focused) {\n      // Just focus, show tooltip\n      touch_changed_focus = true;\n    } else {\n      ret = true;\n    }\n    if (!param.no_focus) {\n      focusSteal(key);\n      focused = true;\n    }\n  } else if (glov_input.mouseOver(param)) {\n    if (param.no_touch_mouseover && glov_input.mousePosIsTouch()) {\n      // do not set mouseover\n    } else if (param.touch_twice && !focused && glov_input.mousePosIsTouch()) {\n      // do not set mouseover\n    } else {\n      setMouseOver(key);\n      state = glov_input.mouseDown() ? 'down' : 'rollover';\n    }\n  }\n  button_focused = focused;\n  if (focused) {\n    if (glov_input.keyDownEdge(KEYS.SPACE) || glov_input.keyDownEdge(KEYS.RETURN) || glov_input.padButtonDownEdge(pad_codes.A)) {\n      ret = true;\n    }\n  }\n  if (ret) {\n    state = 'down';\n    playUISound('button_click');\n  }\n  if (button_mouseover && param.tooltip) {\n    drawTooltip({\n      x: param.x,\n      y: param.tooltip_above ? param.y - font_height * 2 - 16 : param.y + param.h + 2,\n      tooltip: param.tooltip,\n      tooltip_width: param.tooltip_width\n    });\n  }\n  return { ret, state, focused };\n}\n\nexport function buttonTextDraw(param, state, focused) {\n  let colors = param.colors || color_button;\n  let color = colors[state];\n  let sprite_name = `button_${state}`;\n  let sprite = sprites[sprite_name];\n  if (sprite) {\n    // specific sprite, use regular colors\n    color = colors.regular;\n  } else {\n    sprite = sprites.button;\n  }\n\n  drawHBox(param, sprite, color);\n  font.drawSizedAligned(focused ? font_style_focused : font_style_normal, param.x, param.y, param.z + 0.1,\n  // eslint-disable-next-line no-bitwise\n  param.font_height, glov_font.ALIGN.HCENTERFIT | glov_font.ALIGN.VCENTER, param.w, param.h, param.text);\n}\n\nexport function buttonText(param) {\n  // required params\n  assert(typeof param.x === 'number');\n  assert(typeof param.y === 'number');\n  assert(typeof param.text === 'string');\n  // optional params\n  param.z = param.z || Z.UI;\n  param.w = param.w || button_width;\n  param.h = param.h || button_height;\n  param.font_height = param.font_height || font_height;\n\n  let { ret, state, focused } = buttonShared(param);\n  buttonTextDraw(param, state, focused);\n  return ret;\n}\n\nexport function buttonImage(param) {\n  // required params\n  assert(typeof param.x === 'number');\n  assert(typeof param.y === 'number');\n  assert(param.img && param.img.draw); // should be a sprite\n  // optional params\n  param.z = param.z || Z.UI;\n  param.w = param.w || button_img_size;\n  param.h = param.h || param.w || button_img_size;\n  param.shrink = param.shrink || 0.75;\n  //param.img_rect; null -> full image\n  let uvs = param.img_rect || (typeof param.frame === 'number' ? param.img.uidata.rects[param.frame] : null);\n\n  let { ret, state } = buttonShared(param);\n  let colors = param.colors || color_button;\n  let color = colors[state];\n\n  drawHBox(param, sprites.button, color);\n  let img_w = param.img.size[0];\n  let img_h = param.img.size[1];\n  let img_origin = param.img.origin;\n  let img_scale = min(param.w * param.shrink / img_w, param.h * param.shrink / img_h);\n  img_w *= img_scale;\n  img_h *= img_scale;\n  let draw_param = {\n    x: param.x + (param.w - img_w) / 2 + img_origin[0] * img_w,\n    y: param.y + (param.h - img_h) / 2 + img_origin[1] * img_h,\n    z: param.z + 0.1,\n    color,\n    color1: param.color1,\n    w: img_scale,\n    h: img_scale,\n    uvs,\n    rot: param.rotation\n  };\n  if (param.color1) {\n    param.img.drawDualTint(draw_param);\n  } else {\n    param.img.draw(draw_param);\n  }\n  return ret;\n}\n\nexport function print(style, x, y, z, text) {\n  return font.drawSized(style, x, y, z, font_height, text);\n}\n\n// Note: modal dialogs not really compatible with HTML overlay on top of the canvas!\nexport function modalDialog(params) {\n  assert(!params.title || typeof params.title === 'string');\n  assert(!params.text || typeof params.text === 'string');\n  assert(typeof params.buttons === 'object');\n  assert(Object.keys(params.buttons).length);\n\n  modal_dialog = params;\n}\n\nfunction modalDialogRun() {\n  const eff_button_width = modal_dialog.button_width || round(button_width / 2);\n  const game_width = camera2d.x1() - camera2d.x0();\n  const text_w = modal_width - pad * 2;\n  const x0 = camera2d.x0() + round((game_width - modal_width) / 2);\n  let x = x0 + pad;\n  const y0 = modal_y0;\n  let y = y0 + pad;\n  let eff_font_height = modal_dialog.font_height || font_height;\n\n  if (modal_dialog.title) {\n    y += font.drawSizedWrapped(modal_font_style, x, y, Z.MODAL, text_w, 0, eff_font_height * modal_title_scale, modal_dialog.title);\n    y += round(pad * 1.5);\n  }\n\n  if (modal_dialog.text) {\n    y += font.drawSizedWrapped(modal_font_style, x, y, Z.MODAL, text_w, 0, eff_font_height, modal_dialog.text);\n    y += pad;\n  }\n\n  let buttons = modal_dialog.buttons;\n  let keys = Object.keys(buttons);\n  x = x0 + modal_width - pad - eff_button_width - (pad + eff_button_width) * (keys.length - 1);\n  for (let ii = 0; ii < keys.length; ++ii) {\n    let key = keys[ii];\n    let eff_button_keys = button_keys[key.toLowerCase()];\n    let pressed = false;\n    if (eff_button_keys) {\n      for (let jj = 0; jj < eff_button_keys.key.length; ++jj) {\n        pressed = pressed || glov_input.keyDownEdge(eff_button_keys.key[jj]);\n      }\n      for (let jj = 0; jj < eff_button_keys.pad.length; ++jj) {\n        pressed = pressed || glov_input.padButtonDownEdge(eff_button_keys.pad[jj]);\n      }\n    }\n    if (pressed) {\n      playUISound('button_click');\n    }\n    if (buttonText({\n      x: x,\n      y,\n      z: Z.MODAL,\n      w: eff_button_width,\n      h: button_height,\n      text: key\n    }) || pressed) {\n      modal_dialog = null;\n      if (buttons[key]) {\n        buttons[key]();\n      }\n    }\n    x += pad + eff_button_width;\n  }\n  y += button_height;\n  y += pad * 2;\n  panel({\n    x: x0,\n    y: y0,\n    z: Z.MODAL - 1,\n    w: modal_width,\n    h: y - y0\n  });\n\n  glov_input.eatAllInput();\n  modal_stealing_focus = true;\n}\n\nexport function createEditBox(params) {\n  return glov_edit_box.create(params);\n}\n\nlet bad_frames = 0;\nexport function tick(dt) {\n  last_frame_button_mouseover = frame_button_mouseover;\n  frame_button_mouseover = false;\n  focused_last_frame = focused_this_frame;\n  focused_this_frame = false;\n  focused_key_not = null;\n  modal_stealing_focus = false;\n  touch_changed_focus = false;\n\n  for (let ii = 0; ii < last_frame_edit_boxes.length; ++ii) {\n    let edit_box = last_frame_edit_boxes[ii];\n    let idx = exports.this_frame_edit_boxes.indexOf(edit_box);\n    if (idx === -1) {\n      edit_box.unrun();\n    }\n  }\n  last_frame_edit_boxes = exports.this_frame_edit_boxes;\n  exports.this_frame_edit_boxes = [];\n\n  while (dom_elems_issued < dom_elems.length) {\n    let elem = dom_elems.pop();\n    dynamic_text_elem.removeChild(elem);\n  }\n  dom_elems_issued = 0;\n\n  let pp_this_frame = false;\n  if (modal_dialog || menu_up) {\n    let params = menu_fade_params;\n    if (!menu_up) {\n      // Modals get defaults\n      params = menu_fade_params_default;\n    }\n    menu_up_time += dt;\n    // Effects during modal dialogs\n    if (glov_engine.postprocessing) {\n      let factor = min(menu_up_time / 500, 1);\n      glov_sprites.queuefn(params.z - 2, doBlurEffect.bind(null, factor, params));\n      glov_sprites.queuefn(params.z - 1, doDesaturateEffect.bind(null, factor, params));\n      pp_this_frame = true;\n    } else {\n      // Just darken\n      sprites.white.draw({\n        x: camera2d.x0(),\n        y: camera2d.y0(),\n        z: params.z - 2,\n        color: params.fallback_darken,\n        w: camera2d.x1() - camera2d.x0(),\n        h: camera2d.y1() - camera2d.y0()\n      });\n    }\n  } else {\n    menu_up_time = 0;\n  }\n  menu_up = false;\n\n  if (!glov_engine.is_loading && glov_engine.this_frame_time > 250 && pp_this_frame) {\n    bad_frames++;\n    if (bad_frames >= 3) {\n      // 3 in a row, disable superfluous postprocessing\n      glov_engine.postprocessingAllow(false);\n    }\n  } else if (bad_frames) {\n    bad_frames = 0;\n  }\n\n  if (modal_dialog) {\n    modalDialogRun();\n  }\n}\n\nexport function endFrame() {\n  if (glov_input.click({\n    x: -Infinity, y: -Infinity,\n    w: Infinity, h: Infinity\n  })) {\n    focusSteal('canvas');\n  }\n}\n\nexport function menuUp(params) {\n  merge(menu_fade_params, menu_fade_params_default);\n  if (params) {\n    merge(menu_fade_params, params);\n  }\n  menu_up = true;\n  modal_stealing_focus = true;\n  glov_input.eatAllInput();\n}\n\nexport function drawRect(x0, y0, x1, y1, z, color) {\n  let mx = min(x0, x1);\n  let my = min(y0, y1);\n  let Mx = max(x0, x1);\n  let My = max(y0, y1);\n  sprites.white.draw({\n    x: mx,\n    y: my,\n    z,\n    color,\n    w: Mx - mx,\n    h: My - my\n  });\n}\n\nfunction spreadTechParams(spread) {\n  // spread=0 -> 1\n  // spread=0.5 -> 2\n  // spread=0.75 -> 4\n  // spread=1 -> large enough to AA\n  spread = min(max(spread, 0), 0.99);\n\n  let tech_params = {\n    param0: vec4(0, 0, 0, 0)\n  };\n\n  tech_params.param0[0] = 1 / (1 - spread);\n  tech_params.param0[1] = -0.5 * tech_params.param0[0] + 0.5;\n  return tech_params;\n}\n\nfunction drawCircleInternal(sprite, x, y, z, r, spread, tu1, tv1, tu2, tv2, color) {\n  let x0 = x - r * 2 + r * 4 * tu1;\n  let x1 = x - r * 2 + r * 4 * tu2;\n  let y0 = y - r * 2 + r * 4 * tv1;\n  let y1 = y - r * 2 + r * 4 * tv2;\n  glov_sprites.queueraw(sprite.texs, x0, y0, z, x1 - x0, y1 - y0, tu1, tv1, tu2, tv2, color, glov_font.font_shaders.font_aa, spreadTechParams(spread));\n}\n\nexport function drawCircle(x, y, z, r, spread, color) {\n  if (!sprites.circle) {\n    const CIRCLE_SIZE = 32;\n    let data = new Uint8Array(CIRCLE_SIZE * CIRCLE_SIZE);\n    let midp = (CIRCLE_SIZE - 1) / 2;\n    for (let i = 0; i < CIRCLE_SIZE; i++) {\n      for (let j = 0; j < CIRCLE_SIZE; j++) {\n        let d = sqrt((i - midp) * (i - midp) + (j - midp) * (j - midp)) / midp;\n        let v = clamp(1 - d, 0, 1);\n        data[i + j * CIRCLE_SIZE] = v * 255;\n      }\n    }\n    sprites.circle = glov_sprites.create({\n      url: 'circle',\n      width: CIRCLE_SIZE, height: CIRCLE_SIZE,\n      format: textures.format.R8,\n      data,\n      filter_min: gl.LINEAR,\n      filter_max: gl.LINEAR,\n      wrap_s: gl.CLAMP_TO_EDGE,\n      wrap_t: gl.CLAMP_TO_EDGE,\n      origin: vec2(0.5, 0.5)\n    });\n  }\n  drawCircleInternal(sprites.circle, x, y, z, r, spread, 0, 0, 1, 1, color);\n}\n\nexport function drawHollowCircle(x, y, z, r, spread, color) {\n  if (!sprites.hollow_circle) {\n    const CIRCLE_SIZE = 128;\n    const LINE_W = 2;\n    let data = new Uint8Array(CIRCLE_SIZE * CIRCLE_SIZE);\n    let midp = (CIRCLE_SIZE - 1) / 2;\n    for (let i = 0; i < CIRCLE_SIZE; i++) {\n      for (let j = 0; j < CIRCLE_SIZE; j++) {\n        let d = sqrt((i - midp) * (i - midp) + (j - midp) * (j - midp)) / midp;\n        let v = clamp(1 - d, 0, 1);\n        if (v > 0.5) {\n          v = 1 - v;\n        }\n        v += LINE_W / CIRCLE_SIZE;\n        data[i + j * CIRCLE_SIZE] = v * 255;\n      }\n    }\n    sprites.hollow_circle = glov_sprites.create({\n      url: 'hollow_circle',\n      width: CIRCLE_SIZE, height: CIRCLE_SIZE,\n      format: textures.format.R8,\n      data,\n      filter_min: gl.LINEAR,\n      filter_max: gl.LINEAR,\n      wrap_s: gl.CLAMP_TO_EDGE,\n      wrap_t: gl.CLAMP_TO_EDGE,\n      origin: vec2(0.5, 0.5)\n    });\n  }\n  drawCircleInternal(sprites.hollow_circle, x, y, z, r, spread, 0, 0, 1, 1, color);\n}\n\nexport function drawLine(x0, y0, x1, y1, z, w, spread, color) {\n  if (!sprites.line) {\n    const LINE_SIZE = 32;\n    let data = new Uint8Array(LINE_SIZE * LINE_SIZE);\n    let midp = (LINE_SIZE - 1) / 2;\n    for (let i = 0; i < LINE_SIZE; i++) {\n      for (let j = 0; j < LINE_SIZE; j++) {\n        let d = abs((i - midp) / midp);\n        let v = clamp(1 - d, 0, 1);\n        data[i + j * LINE_SIZE] = v * 255;\n      }\n    }\n    sprites.line = glov_sprites.create({\n      url: 'line',\n      width: LINE_SIZE, height: LINE_SIZE,\n      format: textures.format.R8,\n      data,\n      filter_min: gl.LINEAR,\n      filter_max: gl.LINEAR,\n      wrap_s: gl.CLAMP_TO_EDGE,\n      wrap_t: gl.CLAMP_TO_EDGE,\n      origin: vec2(0.5, 0.5)\n    });\n  }\n\n  let dx = x1 - x0;\n  let dy = y1 - y0;\n  let length = Math.sqrt(dx * dx + dy * dy);\n  dx /= length;\n  dy /= length;\n  let tangx = -dy * w;\n  let tangy = dx * w;\n\n  glov_sprites.queueraw4(sprites.line.texs, x0 + tangx, y0 + tangy, x1 + tangx, y1 + tangy, x1 - tangx, y1 - tangy, x0 - tangx, y0 - tangy, z, 0, 0, 1, 1, color, glov_font.font_shaders.font_aa, spreadTechParams(spread));\n}\n\nexport function drawCone(x0, y0, x1, y1, z, w0, w1, spread, color) {\n  if (!sprites.cone) {\n    const CONE_SIZE = 32;\n    let data = new Uint8Array(CONE_SIZE * CONE_SIZE);\n    let midp = (CONE_SIZE - 1) / 2;\n    for (let i = 0; i < CONE_SIZE; i++) {\n      for (let j = 0; j < CONE_SIZE; j++) {\n        let dx = 0;\n        let dy = 0;\n        let d = 0;\n        if (i > midp) {\n          dx = (i - midp) / midp;\n          dy = abs(j - midp) / midp;\n          let dCircle = sqrt(dx * dx + dy * dy);\n          d = dx * dCircle;\n        }\n        let v = clamp(1 - d, 0, 1);\n        data[i + j * CONE_SIZE] = v * 255;\n      }\n    }\n    sprites.cone = glov_sprites.create({\n      url: 'cone',\n      width: CONE_SIZE, height: CONE_SIZE,\n      format: textures.format.R8,\n      data,\n      filter_min: gl.LINEAR,\n      filter_max: gl.LINEAR,\n      wrap_s: gl.CLAMP_TO_EDGE,\n      wrap_t: gl.CLAMP_TO_EDGE,\n      origin: vec2(0.5, 0.5)\n    });\n  }\n  let dx = x1 - x0;\n  let dy = y1 - y0;\n  let length = Math.sqrt(dx * dx + dy * dy);\n  dx /= length;\n  dy /= length;\n  let tangx = -dy;\n  let tangy = dx;\n  glov_sprites.queueraw4(sprites.cone.texs, x0 - tangx * w0, y0 - tangy * w0, x0 + tangx * w0, y0 + tangy * w0, x1 + tangx * w1, y1 + tangy * w1, x1 - tangx * w1, y1 - tangy * w1, z, 0, 0, 1, 1, color, glov_font.font_shaders.font_aa, spreadTechParams(spread));\n}\n\nexport function scaleSizes(scale) {\n  button_height = round(32 * scale);\n  font_height = round(24 * scale);\n  button_width = round(200 * scale);\n  button_img_size = button_height;\n  modal_width = round(600 * scale);\n  modal_y0 = round(200 * scale);\n  modal_title_scale = 1.2;\n  pad = round(16 * scale);\n  tooltip_width = round(400 * scale);\n  tooltip_pad = round(8 * scale);\n  panel_pixel_scale = button_height / 13; // button_height / button pixel resolution\n}\n\nexport function setFontHeight(_font_height) {\n  font_height = _font_height;\n}\n\nscaleSizes(1);","/*global Z: false */\nconst assert = require('assert');\nconst glov_engine = require('./engine.js');\nconst glov_font = require('./font.js');\nconst glov_input = require('./input.js');\nconst glov_simple_menu = require('./simple_menu.js');\nconst glov_selection_box = require('./selection_box.js');\nconst glov_ui = require('./ui.js');\n\nconst { ceil, random } = Math;\n\nlet demo_menu;\nlet demo_menu_up = false;\nlet demo_result;\nlet font_style;\n\nlet inited;\nlet edit_box1;\nlet edit_box2;\nlet test_select1;\nlet test_select2;\nfunction init(x, y, column_width) {\n  edit_box1 = glov_ui.createEditBox({\n    x: x + column_width,\n    y: y,\n    w: column_width - 8\n  });\n  edit_box2 = glov_ui.createEditBox({\n    x: x + column_width + column_width,\n    y: y,\n    w: column_width - 8\n  });\n  demo_menu = glov_simple_menu.create({\n    items: ['Option 1', {\n      name: 'Option 2',\n      tag: 'opt2'\n    }, {\n      name: 'Option C',\n      cb: () => {\n        demo_result = 'Callback the third';\n      }\n    }]\n  });\n  font_style = glov_font.style(null, {\n    outline_width: 1.0,\n    outline_color: 0x800000ff,\n    glow_xoffs: 3.25,\n    glow_yoffs: 3.25,\n    glow_inner: -2.5,\n    glow_outer: 5,\n    glow_color: 0x000000ff\n  });\n\n  test_select1 = glov_selection_box.create({\n    items: ['Apples', 'Bananas', 'Chameleon'],\n    z: Z.UI,\n    width: column_width - 8\n  });\n  test_select2 = glov_selection_box.create({\n    items: ['Apples', 'Bananas', 'Chameleon'],\n    is_dropdown: true,\n    z: Z.UI,\n    width: column_width - 8\n  });\n}\n\nexport function run(x, y, z) {\n  z = z || Z.UI;\n  let line_height = glov_ui.button_height + 2;\n  let column_width = glov_ui.button_width + 8;\n  if (inited !== `${x}_${y}_${column_width}`) {\n    init(x, y, column_width);\n    inited = `${x}_${y}_${column_width}`;\n  }\n\n  if (demo_menu_up) {\n    demo_result = '';\n    demo_menu.run({ x: x + glov_ui.button_width, y: y + line_height, z: Z.MODAL });\n    if (demo_menu.isSelected()) {\n      if (demo_menu.isSelected('opt2')) {\n        demo_result = 'Selected the second option';\n      }\n      if (!demo_result) {\n        demo_result = `Menu selected: ${demo_menu.getSelectedItem().name}`;\n      }\n      demo_menu_up = false;\n    }\n    glov_ui.menuUp();\n    glov_input.eatAllInput();\n  }\n\n  let pad = 8;\n  let w = glov_ui.print(font_style, x + column_width + 4, y + 40, z, `Edit Box Text: ${edit_box1.text}+${edit_box2.text}`);\n  w = Math.max(w, glov_ui.print(font_style, x + column_width, y + 40 + glov_ui.font_height + pad, z, `Result: ${demo_result}`));\n  glov_ui.panel({ x: x + column_width + 4 - pad, y: y + 40 - pad, z: z - 1,\n    w: w + pad * 2, h: glov_ui.font_height * 2 + pad * 3 });\n\n  if (glov_ui.buttonText({ x, y, z, text: 'Modal Dialog', tooltip: 'Shows a modal dialog' })) {\n    demo_result = '';\n    glov_ui.modalDialog({\n      title: 'Modal Dialog',\n      text: 'This is a modal dialog!',\n      buttons: {\n        'OK': function () {\n          demo_result = 'OK pushed!';\n        },\n        'Cancel': null // no callback\n      }\n    });\n  }\n  y += line_height;\n\n  if (edit_box1.run() === edit_box1.SUBMIT) {\n    glov_ui.modalDialog({\n      title: 'Modal Dialog',\n      text: `Edit box submitted with text ${edit_box1.text}`,\n      buttons: {\n        'OK': null\n      }\n    });\n  }\n  if (edit_box2.run() === edit_box2.SUBMIT) {\n    edit_box2.setText('');\n  }\n\n  if (glov_ui.buttonText({ x, y, z, text: 'Menu', tooltip: 'Shows a menu' })) {\n    demo_menu_up = true;\n  }\n  y += line_height;\n\n  if (glov_ui.buttonText({ x, y, z, text: 'Disabled', tooltip: 'A disabled button', disabled: true })) {\n    assert(false);\n  }\n  y += line_height;\n\n  y += test_select1.run({ x, y, z });\n  y += test_select2.run({ x, y, z });\n}\n\nexport function runFontTest(x, y) {\n  const COLOR_RED = 0xFF0000ff;\n  const COLOR_GREEN = 0x00FF00ff;\n  const COLOR_WHITE = 0xFFFFFFff;\n  const COLOR_INVISIBLE = 0x00000000;\n  let z = Z.UI;\n  let font = glov_engine.font;\n\n  let font_size = glov_ui.font_height * 2;\n  font.drawSized(null, x, y, z, font_size, `Default ${font_size} ${random().toFixed(7)}`);\n  y += font_size;\n  font.drawSized(null, x, y, z, font_size / 2, `Default ${font_size / 2} Lorem ipsum dolor sit amet`);\n  y += ceil(font_size / 2);\n  font.drawSized(null, x, y, z, font_size / 4, `Default ${font_size / 4} The quick brown fox jumped over the lazy dog rutabaga Alfalfa`);\n  y += ceil(font_size / 4);\n\n  const font_style_outline = {\n    outline_width: 1, outline_color: COLOR_RED,\n    glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 0, glow_color: COLOR_INVISIBLE,\n    color: COLOR_WHITE\n  };\n  font.drawSized(font_style_outline, x, y, z, font_size, 'Outline');\n  y += font_size;\n\n  const font_style_glow = {\n    outline_width: 0, outline_color: COLOR_INVISIBLE,\n    glow_xoffs: 0, glow_yoffs: 0, glow_inner: -1, glow_outer: 4, glow_color: COLOR_GREEN,\n    color: COLOR_WHITE\n  };\n  font.drawSized(font_style_glow, x, y, z, font_size, 'Glow');\n  y += font_size;\n\n  const font_style_shadow = {\n    outline_width: 0, outline_color: COLOR_INVISIBLE,\n    glow_xoffs: 3.25, glow_yoffs: 3.25, glow_inner: -2.5, glow_outer: 5, glow_color: COLOR_GREEN,\n    color: COLOR_WHITE\n  };\n  font.drawSized(font_style_shadow, x, y, z, font_size, 'Glow (Shadow) O0O');\n  y += font_size;\n\n  const font_style_both = {\n    outline_width: 1, outline_color: COLOR_RED,\n    glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 6, glow_color: COLOR_GREEN,\n    color: COLOR_WHITE\n  };\n  font.drawSized(font_style_both, x, y, z, font_size, 'Both 0O0');\n  y += font_size;\n\n  let font_size2 = 32;\n  const font_style_both2 = {\n    outline_width: 1.75, outline_color: COLOR_RED,\n    glow_xoffs: 0.25, glow_yoffs: 0.25, glow_inner: 0, glow_outer: 5, glow_color: 0x7F7F7Fff,\n    color: COLOR_WHITE\n  };\n  font.drawSizedAligned(font_style_both2, x, y, z, font_size2, glov_font.ALIGN.HFIT, glov_ui.button_width * 2, 0, 'ALIGN.HFIT The quick brown fox jumps over the lazy dog');\n  y += font_size2;\n  font.drawSizedAligned(font_style_both2, x, y, z, font_size2, glov_font.ALIGN.HFIT, 140, 0, '0 Players (+1 Easy Bots)');\n  y += font_size2;\n\n  let test = 'glow';\n\n  if (test === 'outline') {\n    const font_style_outline2 = {\n      outline_width: 1, outline_color: COLOR_RED,\n      glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 0, glow_color: COLOR_INVISIBLE,\n      color: COLOR_WHITE\n    };\n    for (let ii = 1; ii <= 4; ii++) {\n      font_style_outline2.outline_width = ii * 2;\n      font.drawSizedAligned(font_style_outline2, x, y, z, font_size2, glov_font.ALIGN.HLEFT, 400, 0, `Outline thickness ${ii * 2}`);\n      y += font_size2;\n    }\n\n    // Not allowing non-uniform scaling here, simulate with camera?\n    // font.drawSizedAligned(font_style_outline2, x, y, z, font_size2 * 2, font_size2, glov_font.ALIGN.HLEFT, 400, 0,\n    //   'Wide thick outline');\n    // y += font_size2;\n    // font.drawSizedAligned(font_style_outline2, x, y, z, font_size2, font_size2 * 2, glov_font.ALIGN.HLEFT, 400, 0,\n    //   'Tall thick outline');\n    // y += font_size2 * 2;\n  } else if (test === 'glow') {\n    const font_style_glow2 = {\n      outline_width: 0, outline_color: COLOR_INVISIBLE,\n      glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 8, glow_color: COLOR_RED,\n      color: COLOR_WHITE\n    };\n    for (let ii = 1; ii <= 4; ii++) {\n      //font_style_glow2.glow_inner = ii * 2 - 1;\n      font_style_glow2.glow_outer = ii * 2;\n      font.drawSizedAligned(font_style_glow2, x, y, z, font_size2, glov_font.ALIGN.HLEFT, 400, 0, `Glow outer ${ii * 2}`);\n      y += font_size2;\n    }\n\n    // Not allowing non-uniform scaling here, simulate with camera?\n    // font.drawSizedAligned(font_style_glow2, x, y, z, font_size2 * 2, font_size2, glov_font.ALIGN.HLEFT, 400, 0,\n    //   'Wide thick glow \\x01\\x02\\xe5\\xae\\xb4\\xe8\\xaf\\xb7');\n    // y += font_size2;\n    // font.drawSizedAligned(font_style_glow2, x, y, z, font_size2, font_size2 * 2, glov_font.ALIGN.HLEFT, 400, 0,\n    //   'Tall thick glow');\n    // y += font_size2 * 2;\n  } else if (test === 'wrap') {\n    y += font.drawSizedWrapped(null, x, y, z, 400, 24, font_size2, 0xFFFFFFff, 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor' + ' incididunt utlaboreetdoloremagnaaliqua.');\n  }\n\n  // Gradient not supported\n  // y = y0;\n  // x += font_size * 8;\n  // const font_style_gradient = {\n  //   outline_width: 1, outline_color: 0x777777ff,\n  //   glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 0, glow_color: COLOR_BLUE,\n  //   gradient: [COLOR_WHITE, COLOR_WHITE, COLOR_BLACK, COLOR_BLACK],\n  // };\n  // font.drawSized(font_style_gradient, x, y + Math.sin(glov_engine.getFrameTimestamp() * 0.005) * 20, z,\n  //   font_size*2, 'Gradient');\n  // y += font_size*2;\n}","/* eslint no-bitwise:off */\n\n// Vector math functions required by the rest of the engine taken piecemeal from\n// gl-matrix and related, as well as some generic math utilities\nexports.mat3 = require('gl-mat3/create');\nexports.mat4 = require('gl-mat4/create');\n\nconst { abs, floor, max, min, sqrt } = Math;\n\nexport function clamp(a, mn, mx) {\n  return max(mn, min(mx, a));\n}\n\nexport function lerp(a, v0, v1) {\n  return (1 - a) * v0 + a * v1;\n}\n\nexport function isPowerOfTwo(n) {\n  return (n & n - 1) === 0;\n}\n\nexport function nextHighestPowerOfTwo(x) {\n  --x;\n  for (let i = 1; i < 32; i <<= 1) {\n    x |= x >> i;\n  }\n  return x + 1;\n}\n\nexport function vec2(a, b) {\n  let r = new Float32Array(2);\n  if (a || b) {\n    r[0] = a;\n    r[1] = b;\n  }\n  return r;\n}\n\nexport function vec3(a, b, c) {\n  let r = new Float32Array(3);\n  if (a || b || c) {\n    r[0] = a;\n    r[1] = b;\n    r[2] = c;\n  }\n  return r;\n}\n\nexport function vec4(a, b, c, d) {\n  let r = new Float32Array(4);\n  if (a || b || c || d) {\n    r[0] = a;\n    r[1] = b;\n    r[2] = c;\n    r[3] = d;\n  }\n  return r;\n}\n\nexport const unit_vec = vec4(1, 1, 1, 1);\nexport const zero_vec = vec4();\nexport const identity_mat3 = exports.mat3();\nexport const identity_mat4 = exports.mat4();\nexport const xaxis = vec4(1, 0, 0, 0);\nexport const yaxis = vec4(0, 1, 0, 0);\nexport const zaxis = vec4(0, 0, 1, 0);\n\nexport function v2abs(out, a) {\n  out[0] = abs(a[0]);\n  out[1] = abs(a[1]);\n  return out;\n}\n\nexport function v2add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n\nexport function v2addScale(out, a, b, s) {\n  out[0] = a[0] + b[0] * s;\n  out[1] = a[1] + b[1] * s;\n  return out;\n}\n\nexport function v2copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n\nexport function v2distSq(a, b) {\n  return (a[0] - b[0]) * (a[0] - b[0]) + (a[1] - b[1]) * (a[1] - b[1]);\n}\n\nexport function v2lengthSq(a) {\n  return a[0] * a[0] + a[1] * a[1];\n}\n\nexport function v2lerp(out, t, a, b) {\n  let it = 1 - t;\n  out[0] = it * a[0] + t * b[0];\n  out[1] = it * a[1] + t * b[1];\n  return out;\n}\n\nexport function v2mul(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n\nexport function v2normalize(out, a) {\n  let len = a[0] * a[0] + a[1] * a[1];\n  if (len > 0) {\n    len = 1 / sqrt(len);\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n  }\n  return out;\n}\n\nexport function v2scale(out, a, s) {\n  out[0] = a[0] * s;\n  out[1] = a[1] * s;\n  return out;\n}\n\nexport function v2set(out, a, b) {\n  out[0] = a;\n  out[1] = b;\n  return out;\n}\n\nexport function v2sub(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n\nexport function v3add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n\nexport function v3addScale(out, a, b, s) {\n  out[0] = a[0] + b[0] * s;\n  out[1] = a[1] + b[1] * s;\n  out[2] = a[2] + b[2] * s;\n  return out;\n}\n\nexport function v3copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n\nexport function v3cross(out, a, b) {\n  let a0 = a[0];\n  let a1 = a[1];\n  let a2 = a[2];\n  let b0 = b[0];\n  let b1 = b[1];\n  let b2 = b[2];\n  out[0] = a1 * b2 - a2 * b1;\n  out[1] = a2 * b0 - a0 * b2;\n  out[2] = a0 * b1 - a1 * b0;\n  return out;\n}\n\n// determinant of the matrix made by (columns?) [a, b, c];\nexport function v3determinant(a, b, c) {\n  // let a00 = a[0];\n  // let a01 = a[1];\n  // let a02 = a[2];\n  // let a10 = b[0];\n  // let a11 = b[1];\n  // let a12 = b[2];\n  // let a20 = c[0];\n  // let a21 = c[2];\n  // let a22 = c[2];\n  let a00 = a[0];\n  let a01 = b[0];\n  let a02 = c[0];\n  let a10 = a[1];\n  let a11 = b[1];\n  let a12 = c[1];\n  let a20 = a[2];\n  let a21 = b[2];\n  let a22 = c[2];\n\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n\nexport function v3dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\nexport function v3distSq(a, b) {\n  return (a[0] - b[0]) * (a[0] - b[0]) + (a[1] - b[1]) * (a[1] - b[1]) + (a[2] - b[2]) * (a[2] - b[2]);\n}\n\nexport function v3div(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n\nexport function v3floor(out, a) {\n  out[0] = floor(a[0]);\n  out[1] = floor(a[1]);\n  out[2] = floor(a[2]);\n  return out;\n}\n\nexport function v3lengthSq(a) {\n  return a[0] * a[0] + a[1] * a[1] + a[2] * a[2];\n}\n\nexport function v3mulMat4(out, a, m) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  out[0] = x * m[0] + y * m[4] + z * m[8];\n  out[1] = x * m[1] + y * m[5] + z * m[9];\n  out[2] = x * m[2] + y * m[6] + z * m[10];\n  return out;\n}\n\nexport function v3normalize(out, a) {\n  let len = a[0] * a[0] + a[1] * a[1] + a[2] * a[2];\n  if (len > 0) {\n    len = 1 / sqrt(len);\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n    out[2] = a[2] * len;\n  }\n  return out;\n}\n\nexport function v3scale(out, a, s) {\n  out[0] = a[0] * s;\n  out[1] = a[1] * s;\n  out[2] = a[2] * s;\n  return out;\n}\n\nexport function v3sub(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n\nexport function v3zero(out) {\n  out[0] = out[1] = out[2] = 0;\n  return out;\n}\n\nexport function v4clone(a) {\n  return a.slice(0);\n}\n\nexport function v4copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n\nexport function v4lerp(out, t, a, b) {\n  let it = 1 - t;\n  out[0] = it * a[0] + t * b[0];\n  out[1] = it * a[1] + t * b[1];\n  out[2] = it * a[2] + t * b[2];\n  out[3] = it * a[3] + t * b[3];\n  return out;\n}\n\nexport function v4mul(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n\nexport function v4mulAdd(out, a, b, c) {\n  out[0] = a[0] * b[0] + c[0];\n  out[1] = a[1] * b[1] + c[1];\n  out[2] = a[2] * b[2] + c[2];\n  out[3] = a[3] * b[3] + c[3];\n  return out;\n}\n\nexport function v4scale(out, a, s) {\n  out[0] = a[0] * s;\n  out[1] = a[1] * s;\n  out[2] = a[2] * s;\n  out[3] = a[3] * s;\n  return out;\n}\n\nexport function v4set(out, a, b, c, d) {\n  out[0] = a;\n  out[1] = b;\n  out[2] = c;\n  out[3] = d;\n  return out;\n}\n\nexport function v4zero(out) {\n  out[0] = out[1] = out[2] = out[3] = 0;\n  return out;\n}","module.exports={\"font_size\":8,\"imageW\":128,\"imageH\":128,\"spread\":2,\"noFilter\":1,\"channels\":1,\"char_infos\":[{\"c\":32,\"x0\":61,\"y0\":63,\"xpad\":3,\"w\":1,\"h\":1},{\"c\":33,\"x0\":92,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":1,\"h\":5},{\"c\":34,\"x0\":16,\"y0\":63,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":2},{\"c\":35,\"x0\":98,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":36,\"x0\":38,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":37,\"x0\":108,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":38,\"x0\":118,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":39,\"x0\":24,\"y0\":63,\"yoffs\":1,\"xpad\":1,\"w\":1,\"h\":2},{\"c\":40,\"x0\":2,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":5},{\"c\":41,\"x0\":9,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":5},{\"c\":42,\"x0\":109,\"y0\":54,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":3},{\"c\":43,\"x0\":117,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":3,\"h\":3},{\"c\":44,\"x0\":30,\"y0\":63,\"yoffs\":5,\"xpad\":1,\"w\":2,\"h\":2},{\"c\":45,\"x0\":67,\"y0\":63,\"yoffs\":3,\"xpad\":1,\"w\":3,\"h\":1},{\"c\":46,\"x0\":75,\"y0\":63,\"yoffs\":5,\"xpad\":1,\"w\":1,\"h\":1},{\"c\":47,\"x0\":16,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":48,\"x0\":26,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":49,\"x0\":35,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":5},{\"c\":50,\"x0\":42,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":51,\"x0\":51,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":52,\"x0\":60,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":53,\"x0\":69,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":54,\"x0\":78,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":55,\"x0\":87,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":56,\"x0\":96,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":57,\"x0\":105,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":58,\"x0\":2,\"y0\":63,\"yoffs\":2,\"xpad\":1,\"w\":1,\"h\":3},{\"c\":59,\"x0\":115,\"y0\":44,\"yoffs\":2,\"xpad\":1,\"w\":1,\"h\":4},{\"c\":60,\"x0\":114,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":61,\"x0\":8,\"y0\":63,\"yoffs\":2,\"xpad\":1,\"w\":3,\"h\":3},{\"c\":62,\"x0\":122,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":63,\"x0\":2,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":64,\"x0\":11,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":65,\"x0\":21,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":66,\"x0\":30,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":67,\"x0\":39,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":68,\"x0\":47,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":69,\"x0\":56,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":70,\"x0\":64,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":71,\"x0\":72,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":72,\"x0\":81,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":73,\"x0\":90,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":74,\"x0\":98,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":75,\"x0\":107,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":76,\"x0\":116,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":77,\"x0\":2,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":78,\"x0\":12,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":79,\"x0\":21,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":80,\"x0\":30,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":81,\"x0\":47,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":82,\"x0\":39,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":83,\"x0\":48,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":84,\"x0\":57,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":85,\"x0\":65,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":86,\"x0\":74,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":87,\"x0\":83,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":88,\"x0\":93,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":89,\"x0\":102,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":90,\"x0\":111,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":91,\"x0\":119,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":5},{\"c\":92,\"x0\":2,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":93,\"x0\":12,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":5},{\"c\":94,\"x0\":37,\"y0\":63,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":2},{\"c\":95,\"x0\":81,\"y0\":63,\"yoffs\":5,\"xpad\":1,\"w\":4,\"h\":1},{\"c\":96,\"x0\":45,\"y0\":63,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":2},{\"c\":97,\"x0\":121,\"y0\":44,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":98,\"x0\":19,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":99,\"x0\":2,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":3,\"h\":4},{\"c\":100,\"x0\":28,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":101,\"x0\":10,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":102,\"x0\":37,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":103,\"x0\":56,\"y0\":2,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":104,\"x0\":45,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":105,\"x0\":54,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":1,\"h\":5},{\"c\":106,\"x0\":2,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":7},{\"c\":107,\"x0\":60,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":108,\"x0\":69,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":1,\"h\":5},{\"c\":109,\"x0\":19,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":5,\"h\":4},{\"c\":110,\"x0\":29,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":111,\"x0\":38,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":112,\"x0\":65,\"y0\":2,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":113,\"x0\":74,\"y0\":2,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":114,\"x0\":47,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":3,\"h\":4},{\"c\":115,\"x0\":55,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":116,\"x0\":75,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":117,\"x0\":64,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":118,\"x0\":73,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":119,\"x0\":82,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":5,\"h\":4},{\"c\":120,\"x0\":92,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":3,\"h\":4},{\"c\":121,\"x0\":83,\"y0\":2,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":122,\"x0\":100,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":123,\"x0\":83,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":124,\"x0\":91,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":1,\"h\":5},{\"c\":125,\"x0\":97,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":126,\"x0\":52,\"y0\":63,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":2},{\"c\":160,\"x0\":90,\"y0\":63,\"xpad\":3,\"w\":1,\"h\":1},{\"c\":65533,\"x0\":105,\"y0\":44,\"yoffs\":2,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":128263,\"x0\":9,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":10,\"h\":7},{\"c\":128264,\"x0\":24,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":9,\"h\":7}]}","module.exports={\"font_size\":16,\"imageW\":1024,\"imageH\":64,\"spread\":2,\"noFilter\":1,\"channels\":1,\"char_infos\":[{\"c\":32,\"x0\":172,\"y0\":21,\"xpad\":7,\"w\":1,\"h\":1},{\"c\":33,\"x0\":137,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":2,\"h\":10},{\"c\":34,\"x0\":81,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":4},{\"c\":35,\"x0\":144,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":36,\"x0\":59,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":37,\"x0\":159,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":38,\"x0\":174,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":39,\"x0\":92,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":2,\"h\":4},{\"c\":40,\"x0\":189,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":10},{\"c\":41,\"x0\":198,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":10},{\"c\":42,\"x0\":41,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":6},{\"c\":43,\"x0\":52,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":6,\"h\":6},{\"c\":44,\"x0\":99,\"y0\":21,\"yoffs\":11,\"xpad\":2,\"w\":4,\"h\":4},{\"c\":45,\"x0\":141,\"y0\":21,\"yoffs\":7,\"xpad\":2,\"w\":6,\"h\":2},{\"c\":46,\"x0\":152,\"y0\":21,\"yoffs\":11,\"xpad\":2,\"w\":2,\"h\":2},{\"c\":47,\"x0\":207,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":48,\"x0\":222,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":49,\"x0\":235,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":10},{\"c\":50,\"x0\":244,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":51,\"x0\":257,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":52,\"x0\":270,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":53,\"x0\":283,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":54,\"x0\":296,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":55,\"x0\":309,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":56,\"x0\":322,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":57,\"x0\":335,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":58,\"x0\":63,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":2,\"h\":6},{\"c\":59,\"x0\":877,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":2,\"h\":8},{\"c\":60,\"x0\":348,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":61,\"x0\":70,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":6,\"h\":6},{\"c\":62,\"x0\":359,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":63,\"x0\":370,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":64,\"x0\":383,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":65,\"x0\":398,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":66,\"x0\":411,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":67,\"x0\":424,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":68,\"x0\":435,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":69,\"x0\":448,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":70,\"x0\":459,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":71,\"x0\":470,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":72,\"x0\":483,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":73,\"x0\":496,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":74,\"x0\":507,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":75,\"x0\":520,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":76,\"x0\":533,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":77,\"x0\":544,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":78,\"x0\":559,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":79,\"x0\":572,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":80,\"x0\":585,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":81,\"x0\":72,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":82,\"x0\":598,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":83,\"x0\":611,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":84,\"x0\":624,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":85,\"x0\":635,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":86,\"x0\":648,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":87,\"x0\":661,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":88,\"x0\":676,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":89,\"x0\":689,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":90,\"x0\":702,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":91,\"x0\":713,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":10},{\"c\":92,\"x0\":722,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":93,\"x0\":737,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":10},{\"c\":94,\"x0\":108,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":4},{\"c\":95,\"x0\":159,\"y0\":21,\"yoffs\":11,\"xpad\":2,\"w\":8,\"h\":2},{\"c\":96,\"x0\":119,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":4},{\"c\":97,\"x0\":884,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":98,\"x0\":746,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":99,\"x0\":897,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":6,\"h\":8},{\"c\":100,\"x0\":759,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":101,\"x0\":908,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":102,\"x0\":772,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":103,\"x0\":85,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":104,\"x0\":783,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":105,\"x0\":796,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":2,\"h\":10},{\"c\":106,\"x0\":2,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":14},{\"c\":107,\"x0\":803,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":108,\"x0\":816,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":2,\"h\":10},{\"c\":109,\"x0\":921,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":10,\"h\":8},{\"c\":110,\"x0\":936,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":111,\"x0\":949,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":112,\"x0\":98,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":113,\"x0\":111,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":114,\"x0\":962,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":6,\"h\":8},{\"c\":115,\"x0\":973,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":116,\"x0\":823,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":117,\"x0\":986,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":118,\"x0\":999,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":119,\"x0\":2,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":10,\"h\":8},{\"c\":120,\"x0\":17,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":6,\"h\":8},{\"c\":121,\"x0\":124,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":122,\"x0\":28,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":123,\"x0\":834,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":124,\"x0\":845,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":2,\"h\":10},{\"c\":125,\"x0\":852,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":126,\"x0\":128,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":4},{\"c\":160,\"x0\":178,\"y0\":21,\"xpad\":7,\"w\":1,\"h\":1},{\"c\":65533,\"x0\":863,\"y0\":2,\"yoffs\":3,\"xpad\":1,\"w\":9,\"h\":10},{\"c\":128263,\"x0\":11,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":19,\"h\":14},{\"c\":128264,\"x0\":35,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":19,\"h\":14}]}","module.exports={\"font_size\":32,\"imageW\":1024,\"imageH\":512,\"spread\":8,\"channels\":1,\"char_infos\":[{\"c\":13,\"x0\":37,\"y0\":377,\"w\":1,\"h\":1},{\"c\":32,\"x0\":55,\"y0\":377,\"xpad\":6.10156,\"w\":1,\"h\":1},{\"c\":33,\"x0\":216,\"y0\":228,\"yoffs\":4,\"xpad\":1.13281,\"w\":6,\"h\":22},{\"c\":34,\"x0\":617,\"y0\":345,\"yoffs\":4,\"w\":10,\"h\":8},{\"c\":35,\"x0\":467,\"y0\":307,\"yoffs\":10,\"w\":16,\"h\":17},{\"c\":36,\"x0\":191,\"y0\":8,\"yoffs\":1,\"xpad\":1.32031,\"w\":15,\"h\":29},{\"c\":37,\"x0\":673,\"y0\":147,\"yoffs\":4,\"xpad\":0.773438,\"w\":26,\"h\":23},{\"c\":38,\"x0\":716,\"y0\":147,\"yoffs\":4,\"xpad\":0.570313,\"w\":20,\"h\":23},{\"c\":39,\"x0\":644,\"y0\":345,\"yoffs\":4,\"w\":5,\"h\":8},{\"c\":40,\"x0\":753,\"y0\":147,\"yoffs\":5,\"w\":8,\"h\":23},{\"c\":41,\"x0\":778,\"y0\":147,\"yoffs\":5,\"xpad\":0.890625,\"w\":7,\"h\":23},{\"c\":42,\"x0\":469,\"y0\":345,\"yoffs\":2,\"w\":11,\"h\":11},{\"c\":43,\"x0\":500,\"y0\":307,\"yoffs\":9,\"xpad\":0.414063,\"w\":15,\"h\":17},{\"c\":44,\"x0\":666,\"y0\":345,\"yoffs\":22,\"w\":5,\"h\":8},{\"c\":45,\"x0\":993,\"y0\":345,\"yoffs\":16,\"w\":9,\"h\":3},{\"c\":46,\"x0\":897,\"y0\":345,\"yoffs\":22,\"w\":5,\"h\":4},{\"c\":47,\"x0\":802,\"y0\":147,\"yoffs\":4,\"w\":13,\"h\":23},{\"c\":48,\"x0\":239,\"y0\":228,\"yoffs\":5,\"xpad\":0.671875,\"w\":17,\"h\":22},{\"c\":49,\"x0\":208,\"y0\":268,\"yoffs\":5,\"xpad\":5.67188,\"w\":12,\"h\":21},{\"c\":50,\"x0\":237,\"y0\":268,\"yoffs\":5,\"xpad\":1.67188,\"w\":16,\"h\":21},{\"c\":51,\"x0\":273,\"y0\":228,\"yoffs\":5,\"xpad\":1.67188,\"w\":16,\"h\":22},{\"c\":52,\"x0\":270,\"y0\":268,\"yoffs\":5,\"xpad\":0.671875,\"w\":17,\"h\":21},{\"c\":53,\"x0\":306,\"y0\":228,\"yoffs\":5,\"xpad\":1.67188,\"w\":16,\"h\":22},{\"c\":54,\"x0\":339,\"y0\":228,\"yoffs\":5,\"xpad\":0.671875,\"w\":17,\"h\":22},{\"c\":55,\"x0\":304,\"y0\":268,\"yoffs\":5,\"xpad\":1.67188,\"w\":16,\"h\":21},{\"c\":56,\"x0\":373,\"y0\":228,\"yoffs\":5,\"xpad\":0.671875,\"w\":17,\"h\":22},{\"c\":57,\"x0\":407,\"y0\":228,\"yoffs\":5,\"xpad\":0.671875,\"w\":17,\"h\":22},{\"c\":58,\"x0\":225,\"y0\":345,\"yoffs\":12,\"w\":5,\"h\":14},{\"c\":59,\"x0\":445,\"y0\":307,\"yoffs\":12,\"w\":5,\"h\":18},{\"c\":60,\"x0\":970,\"y0\":307,\"yoffs\":11,\"xpad\":0.90625,\"w\":9,\"h\":15},{\"c\":61,\"x0\":585,\"y0\":345,\"yoffs\":14,\"w\":15,\"h\":9},{\"c\":62,\"x0\":996,\"y0\":307,\"yoffs\":11,\"w\":10,\"h\":15},{\"c\":63,\"x0\":441,\"y0\":228,\"yoffs\":4,\"xpad\":0.195313,\"w\":12,\"h\":22},{\"c\":64,\"x0\":832,\"y0\":147,\"yoffs\":7,\"xpad\":1.21094,\"w\":23,\"h\":23},{\"c\":65,\"x0\":337,\"y0\":268,\"yoffs\":5,\"w\":19,\"h\":21},{\"c\":66,\"x0\":373,\"y0\":268,\"yoffs\":5,\"xpad\":0.882813,\"w\":18,\"h\":21},{\"c\":67,\"x0\":470,\"y0\":228,\"yoffs\":5,\"xpad\":0.945313,\"w\":17,\"h\":22},{\"c\":68,\"x0\":408,\"y0\":268,\"yoffs\":5,\"xpad\":1.01563,\"w\":20,\"h\":21},{\"c\":69,\"x0\":445,\"y0\":268,\"yoffs\":5,\"xpad\":0.617188,\"w\":16,\"h\":21},{\"c\":70,\"x0\":478,\"y0\":268,\"yoffs\":5,\"w\":15,\"h\":21},{\"c\":71,\"x0\":504,\"y0\":228,\"yoffs\":5,\"xpad\":1.75,\"w\":18,\"h\":22},{\"c\":72,\"x0\":510,\"y0\":268,\"yoffs\":5,\"xpad\":2.53906,\"w\":18,\"h\":21},{\"c\":73,\"x0\":545,\"y0\":268,\"yoffs\":5,\"xpad\":2.54688,\"w\":6,\"h\":21},{\"c\":74,\"x0\":539,\"y0\":228,\"yoffs\":5,\"xpad\":2.75781,\"w\":6,\"h\":22},{\"c\":75,\"x0\":568,\"y0\":268,\"yoffs\":5,\"w\":19,\"h\":21},{\"c\":76,\"x0\":604,\"y0\":268,\"yoffs\":5,\"w\":16,\"h\":21},{\"c\":77,\"x0\":637,\"y0\":268,\"yoffs\":5,\"xpad\":2.27344,\"w\":21,\"h\":21},{\"c\":78,\"x0\":675,\"y0\":268,\"yoffs\":5,\"xpad\":2.74219,\"w\":19,\"h\":21},{\"c\":79,\"x0\":872,\"y0\":147,\"yoffs\":4,\"xpad\":1.22656,\"w\":21,\"h\":23},{\"c\":80,\"x0\":711,\"y0\":268,\"yoffs\":5,\"xpad\":0.828125,\"w\":17,\"h\":21},{\"c\":81,\"x0\":910,\"y0\":147,\"yoffs\":4,\"xpad\":1.22656,\"w\":21,\"h\":23},{\"c\":82,\"x0\":745,\"y0\":268,\"yoffs\":5,\"w\":19,\"h\":21},{\"c\":83,\"x0\":948,\"y0\":147,\"yoffs\":4,\"xpad\":1.32031,\"w\":15,\"h\":23},{\"c\":84,\"x0\":781,\"y0\":268,\"yoffs\":5,\"w\":17,\"h\":21},{\"c\":85,\"x0\":562,\"y0\":228,\"yoffs\":5,\"xpad\":2.04688,\"w\":19,\"h\":22},{\"c\":86,\"x0\":815,\"y0\":268,\"yoffs\":5,\"w\":19,\"h\":21},{\"c\":87,\"x0\":851,\"y0\":268,\"yoffs\":5,\"w\":30,\"h\":21},{\"c\":88,\"x0\":598,\"y0\":228,\"yoffs\":5,\"w\":20,\"h\":22},{\"c\":89,\"x0\":898,\"y0\":268,\"yoffs\":5,\"w\":18,\"h\":21},{\"c\":90,\"x0\":933,\"y0\":268,\"yoffs\":5,\"xpad\":0.226563,\"w\":17,\"h\":21},{\"c\":91,\"x0\":831,\"y0\":102,\"yoffs\":4,\"w\":9,\"h\":25},{\"c\":92,\"x0\":980,\"y0\":147,\"yoffs\":4,\"w\":13,\"h\":23},{\"c\":93,\"x0\":857,\"y0\":102,\"yoffs\":4,\"xpad\":1.70313,\"w\":7,\"h\":25},{\"c\":94,\"x0\":688,\"y0\":345,\"yoffs\":14,\"xpad\":0.1875,\"w\":13,\"h\":8},{\"c\":95,\"x0\":8,\"y0\":377,\"yoffs\":23,\"xpad\":0.4375,\"w\":12,\"h\":3},{\"c\":96,\"x0\":798,\"y0\":345,\"yoffs\":3,\"w\":6,\"h\":6},{\"c\":97,\"x0\":532,\"y0\":307,\"yoffs\":10,\"xpad\":1.29688,\"w\":14,\"h\":17},{\"c\":98,\"x0\":8,\"y0\":188,\"yoffs\":4,\"xpad\":0.890625,\"w\":16,\"h\":23},{\"c\":99,\"x0\":563,\"y0\":307,\"yoffs\":10,\"xpad\":0.273438,\"w\":14,\"h\":17},{\"c\":100,\"x0\":41,\"y0\":188,\"yoffs\":4,\"xpad\":2.07031,\"w\":15,\"h\":23},{\"c\":101,\"x0\":594,\"y0\":307,\"yoffs\":10,\"xpad\":1.04688,\"w\":15,\"h\":17},{\"c\":102,\"x0\":635,\"y0\":228,\"yoffs\":4,\"w\":10,\"h\":22},{\"c\":103,\"x0\":73,\"y0\":188,\"yoffs\":10,\"xpad\":2.07031,\"w\":15,\"h\":23},{\"c\":104,\"x0\":662,\"y0\":228,\"yoffs\":4,\"xpad\":1.10156,\"w\":16,\"h\":22},{\"c\":105,\"x0\":967,\"y0\":268,\"yoffs\":5,\"xpad\":1.34375,\"w\":6,\"h\":21},{\"c\":106,\"x0\":42,\"y0\":56,\"yoffs\":5,\"xpad\":1.07031,\"w\":7,\"h\":28},{\"c\":107,\"x0\":695,\"y0\":228,\"yoffs\":4,\"xpad\":0.171875,\"w\":15,\"h\":22},{\"c\":108,\"x0\":727,\"y0\":228,\"yoffs\":4,\"xpad\":1.46875,\"w\":6,\"h\":22},{\"c\":109,\"x0\":836,\"y0\":307,\"yoffs\":10,\"xpad\":1.14063,\"w\":25,\"h\":16},{\"c\":110,\"x0\":878,\"y0\":307,\"yoffs\":10,\"xpad\":2.03906,\"w\":15,\"h\":16},{\"c\":111,\"x0\":626,\"y0\":307,\"yoffs\":10,\"xpad\":0.828125,\"w\":16,\"h\":17},{\"c\":112,\"x0\":105,\"y0\":188,\"yoffs\":10,\"xpad\":0.890625,\"w\":16,\"h\":23},{\"c\":113,\"x0\":138,\"y0\":188,\"yoffs\":10,\"xpad\":2.07031,\"w\":15,\"h\":23},{\"c\":114,\"x0\":8,\"y0\":345,\"yoffs\":11,\"xpad\":0.203125,\"w\":10,\"h\":15},{\"c\":115,\"x0\":659,\"y0\":307,\"yoffs\":10,\"xpad\":0.28125,\"w\":13,\"h\":17},{\"c\":116,\"x0\":381,\"y0\":307,\"yoffs\":7,\"xpad\":0.234375,\"w\":10,\"h\":20},{\"c\":117,\"x0\":910,\"y0\":307,\"yoffs\":11,\"xpad\":1.64844,\"w\":15,\"h\":16},{\"c\":118,\"x0\":35,\"y0\":345,\"yoffs\":11,\"w\":15,\"h\":15},{\"c\":119,\"x0\":67,\"y0\":345,\"yoffs\":11,\"w\":23,\"h\":15},{\"c\":120,\"x0\":107,\"y0\":345,\"yoffs\":11,\"w\":16,\"h\":15},{\"c\":121,\"x0\":750,\"y0\":228,\"yoffs\":11,\"w\":15,\"h\":22},{\"c\":122,\"x0\":140,\"y0\":345,\"yoffs\":11,\"xpad\":0.851563,\"w\":13,\"h\":15},{\"c\":123,\"x0\":782,\"y0\":228,\"yoffs\":6,\"w\":9,\"h\":22},{\"c\":124,\"x0\":170,\"y0\":188,\"yoffs\":4,\"xpad\":2.10156,\"w\":6,\"h\":23},{\"c\":125,\"x0\":808,\"y0\":228,\"yoffs\":6,\"xpad\":0.460938,\"w\":8,\"h\":22},{\"c\":126,\"x0\":868,\"y0\":345,\"yoffs\":16,\"xpad\":0.3125,\"w\":12,\"h\":5},{\"c\":144,\"x0\":718,\"y0\":345,\"yoffs\":-5,\"w\":14,\"h\":8},{\"c\":160,\"x0\":73,\"y0\":377,\"xpad\":6.10156,\"w\":1,\"h\":1},{\"c\":161,\"x0\":833,\"y0\":228,\"yoffs\":4,\"xpad\":1.13281,\"w\":6,\"h\":22},{\"c\":162,\"x0\":193,\"y0\":188,\"yoffs\":7,\"xpad\":0.273438,\"w\":14,\"h\":23},{\"c\":163,\"x0\":990,\"y0\":268,\"yoffs\":5,\"xpad\":0.304688,\"w\":14,\"h\":21},{\"c\":164,\"x0\":408,\"y0\":307,\"yoffs\":9,\"xpad\":0.328125,\"w\":20,\"h\":20},{\"c\":165,\"x0\":8,\"y0\":307,\"yoffs\":5,\"w\":18,\"h\":21},{\"c\":166,\"x0\":224,\"y0\":188,\"yoffs\":4,\"xpad\":2.10156,\"w\":6,\"h\":23},{\"c\":167,\"x0\":66,\"y0\":56,\"yoffs\":2,\"xpad\":1.25,\"w\":17,\"h\":28},{\"c\":168,\"x0\":919,\"y0\":345,\"yoffs\":4,\"xpad\":0.453125,\"w\":9,\"h\":4},{\"c\":169,\"x0\":247,\"y0\":188,\"yoffs\":4,\"xpad\":0.625,\"w\":25,\"h\":23},{\"c\":170,\"x0\":375,\"y0\":345,\"yoffs\":4,\"xpad\":0.296875,\"w\":10,\"h\":12},{\"c\":171,\"x0\":497,\"y0\":345,\"yoffs\":13,\"xpad\":0.140625,\"w\":11,\"h\":11},{\"c\":172,\"x0\":553,\"y0\":345,\"yoffs\":13,\"xpad\":0.382813,\"w\":15,\"h\":10},{\"c\":173,\"x0\":91,\"y0\":377,\"xpad\":2.94531,\"w\":1,\"h\":1},{\"c\":174,\"x0\":43,\"y0\":307,\"yoffs\":1,\"xpad\":0.3125,\"w\":22,\"h\":21},{\"c\":175,\"x0\":945,\"y0\":345,\"yoffs\":4,\"w\":9,\"h\":4},{\"c\":176,\"x0\":773,\"y0\":345,\"yoffs\":4,\"w\":8,\"h\":7},{\"c\":177,\"x0\":689,\"y0\":307,\"yoffs\":9,\"w\":14,\"h\":17},{\"c\":178,\"x0\":247,\"y0\":345,\"yoffs\":2,\"xpad\":0.890625,\"w\":11,\"h\":14},{\"c\":179,\"x0\":942,\"y0\":307,\"yoffs\":2,\"xpad\":1.52344,\"w\":11,\"h\":16},{\"c\":180,\"x0\":821,\"y0\":345,\"yoffs\":3,\"w\":6,\"h\":6},{\"c\":181,\"x0\":856,\"y0\":228,\"yoffs\":11,\"xpad\":1.85938,\"w\":15,\"h\":22},{\"c\":182,\"x0\":82,\"y0\":307,\"yoffs\":5,\"xpad\":0.5,\"w\":26,\"h\":21},{\"c\":183,\"x0\":971,\"y0\":345,\"yoffs\":16,\"w\":5,\"h\":4},{\"c\":184,\"x0\":749,\"y0\":345,\"yoffs\":25,\"xpad\":0.0703125,\"w\":7,\"h\":8},{\"c\":185,\"x0\":275,\"y0\":345,\"yoffs\":2,\"xpad\":0.6875,\"w\":10,\"h\":14},{\"c\":186,\"x0\":402,\"y0\":345,\"yoffs\":4,\"xpad\":0.625,\"w\":11,\"h\":12},{\"c\":187,\"x0\":525,\"y0\":345,\"yoffs\":13,\"xpad\":0.140625,\"w\":11,\"h\":11},{\"c\":188,\"x0\":223,\"y0\":8,\"yoffs\":2,\"xpad\":0.0546875,\"w\":25,\"h\":29},{\"c\":189,\"x0\":100,\"y0\":56,\"yoffs\":2,\"xpad\":1.22656,\"w\":25,\"h\":28},{\"c\":190,\"x0\":265,\"y0\":8,\"yoffs\":2,\"xpad\":0.109375,\"w\":26,\"h\":29},{\"c\":191,\"x0\":888,\"y0\":228,\"yoffs\":6,\"xpad\":0.09375,\"w\":13,\"h\":22},{\"c\":192,\"x0\":142,\"y0\":56,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":193,\"x0\":178,\"y0\":56,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":194,\"x0\":214,\"y0\":56,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":195,\"x0\":612,\"y0\":102,\"w\":19,\"h\":26},{\"c\":196,\"x0\":216,\"y0\":102,\"yoffs\":-1,\"w\":19,\"h\":27},{\"c\":197,\"x0\":250,\"y0\":56,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":198,\"x0\":125,\"y0\":307,\"yoffs\":5,\"xpad\":0.28125,\"w\":27,\"h\":21},{\"c\":199,\"x0\":286,\"y0\":56,\"yoffs\":5,\"xpad\":0.945313,\"w\":17,\"h\":28},{\"c\":200,\"x0\":320,\"y0\":56,\"yoffs\":-2,\"xpad\":0.617188,\"w\":16,\"h\":28},{\"c\":201,\"x0\":353,\"y0\":56,\"yoffs\":-2,\"xpad\":0.617188,\"w\":16,\"h\":28},{\"c\":202,\"x0\":386,\"y0\":56,\"yoffs\":-2,\"xpad\":0.617188,\"w\":16,\"h\":28},{\"c\":203,\"x0\":252,\"y0\":102,\"yoffs\":-1,\"xpad\":0.617188,\"w\":16,\"h\":27},{\"c\":204,\"x0\":419,\"y0\":56,\"yoffs\":-2,\"xpad\":1.54688,\"w\":7,\"h\":28},{\"c\":205,\"x0\":443,\"y0\":56,\"yoffs\":-2,\"xpad\":0.546875,\"w\":8,\"h\":28},{\"c\":206,\"x0\":468,\"y0\":56,\"yoffs\":-2,\"w\":11,\"h\":28},{\"c\":207,\"x0\":285,\"y0\":102,\"yoffs\":-1,\"w\":9,\"h\":27},{\"c\":208,\"x0\":169,\"y0\":307,\"yoffs\":5,\"xpad\":1.22656,\"w\":20,\"h\":21},{\"c\":209,\"x0\":648,\"y0\":102,\"xpad\":2.74219,\"w\":19,\"h\":26},{\"c\":210,\"x0\":308,\"y0\":8,\"yoffs\":-2,\"xpad\":1.22656,\"w\":21,\"h\":29},{\"c\":211,\"x0\":346,\"y0\":8,\"yoffs\":-2,\"xpad\":1.22656,\"w\":21,\"h\":29},{\"c\":212,\"x0\":384,\"y0\":8,\"yoffs\":-2,\"xpad\":1.22656,\"w\":21,\"h\":29},{\"c\":213,\"x0\":311,\"y0\":102,\"xpad\":1.22656,\"w\":21,\"h\":27},{\"c\":214,\"x0\":496,\"y0\":56,\"yoffs\":-1,\"xpad\":1.22656,\"w\":21,\"h\":28},{\"c\":215,\"x0\":170,\"y0\":345,\"yoffs\":11,\"xpad\":0.359375,\"w\":15,\"h\":15},{\"c\":216,\"x0\":289,\"y0\":188,\"yoffs\":4,\"xpad\":1.22656,\"w\":21,\"h\":23},{\"c\":217,\"x0\":422,\"y0\":8,\"yoffs\":-2,\"xpad\":2.04688,\"w\":19,\"h\":29},{\"c\":218,\"x0\":458,\"y0\":8,\"yoffs\":-2,\"xpad\":2.04688,\"w\":19,\"h\":29},{\"c\":219,\"x0\":494,\"y0\":8,\"yoffs\":-2,\"xpad\":2.04688,\"w\":19,\"h\":29},{\"c\":220,\"x0\":534,\"y0\":56,\"yoffs\":-1,\"xpad\":2.04688,\"w\":19,\"h\":28},{\"c\":221,\"x0\":570,\"y0\":56,\"yoffs\":-2,\"w\":18,\"h\":28},{\"c\":222,\"x0\":206,\"y0\":307,\"yoffs\":5,\"xpad\":1.00781,\"w\":17,\"h\":21},{\"c\":223,\"x0\":240,\"y0\":307,\"yoffs\":5,\"xpad\":1.30469,\"w\":17,\"h\":21},{\"c\":224,\"x0\":973,\"y0\":102,\"yoffs\":3,\"xpad\":1.29688,\"w\":14,\"h\":24},{\"c\":225,\"x0\":8,\"y0\":147,\"yoffs\":3,\"xpad\":1.29688,\"w\":14,\"h\":24},{\"c\":226,\"x0\":39,\"y0\":147,\"yoffs\":3,\"xpad\":1.29688,\"w\":14,\"h\":24},{\"c\":227,\"x0\":327,\"y0\":188,\"yoffs\":4,\"xpad\":1.29688,\"w\":14,\"h\":23},{\"c\":228,\"x0\":358,\"y0\":188,\"yoffs\":4,\"xpad\":1.29688,\"w\":14,\"h\":23},{\"c\":229,\"x0\":881,\"y0\":102,\"yoffs\":2,\"xpad\":1.29688,\"w\":14,\"h\":25},{\"c\":230,\"x0\":720,\"y0\":307,\"yoffs\":10,\"xpad\":0.960938,\"w\":24,\"h\":17},{\"c\":231,\"x0\":389,\"y0\":188,\"yoffs\":10,\"xpad\":0.273438,\"w\":14,\"h\":23},{\"c\":232,\"x0\":70,\"y0\":147,\"yoffs\":3,\"xpad\":1.04688,\"w\":15,\"h\":24},{\"c\":233,\"x0\":102,\"y0\":147,\"yoffs\":3,\"xpad\":1.04688,\"w\":15,\"h\":24},{\"c\":234,\"x0\":134,\"y0\":147,\"yoffs\":3,\"xpad\":1.04688,\"w\":15,\"h\":24},{\"c\":235,\"x0\":420,\"y0\":188,\"yoffs\":4,\"xpad\":1.04688,\"w\":15,\"h\":23},{\"c\":236,\"x0\":452,\"y0\":188,\"yoffs\":3,\"xpad\":1.34375,\"w\":6,\"h\":23},{\"c\":237,\"x0\":475,\"y0\":188,\"yoffs\":3,\"w\":8,\"h\":23},{\"c\":238,\"x0\":500,\"y0\":188,\"yoffs\":3,\"w\":11,\"h\":23},{\"c\":239,\"x0\":918,\"y0\":228,\"yoffs\":4,\"w\":9,\"h\":22},{\"c\":240,\"x0\":528,\"y0\":188,\"yoffs\":4,\"xpad\":1.53125,\"w\":15,\"h\":23},{\"c\":241,\"x0\":944,\"y0\":228,\"yoffs\":4,\"xpad\":2.03906,\"w\":15,\"h\":22},{\"c\":242,\"x0\":166,\"y0\":147,\"yoffs\":3,\"xpad\":0.828125,\"w\":16,\"h\":24},{\"c\":243,\"x0\":199,\"y0\":147,\"yoffs\":3,\"xpad\":0.828125,\"w\":16,\"h\":24},{\"c\":244,\"x0\":232,\"y0\":147,\"yoffs\":3,\"xpad\":0.828125,\"w\":16,\"h\":24},{\"c\":245,\"x0\":560,\"y0\":188,\"yoffs\":4,\"xpad\":0.828125,\"w\":16,\"h\":23},{\"c\":246,\"x0\":593,\"y0\":188,\"yoffs\":4,\"xpad\":0.828125,\"w\":16,\"h\":23},{\"c\":247,\"x0\":302,\"y0\":345,\"yoffs\":11,\"xpad\":0.453125,\"w\":14,\"h\":14},{\"c\":248,\"x0\":761,\"y0\":307,\"yoffs\":10,\"xpad\":0.828125,\"w\":16,\"h\":17},{\"c\":249,\"x0\":265,\"y0\":147,\"yoffs\":3,\"xpad\":1.64844,\"w\":15,\"h\":24},{\"c\":250,\"x0\":297,\"y0\":147,\"yoffs\":3,\"xpad\":1.64844,\"w\":15,\"h\":24},{\"c\":251,\"x0\":329,\"y0\":147,\"yoffs\":3,\"xpad\":1.64844,\"w\":15,\"h\":24},{\"c\":252,\"x0\":626,\"y0\":188,\"yoffs\":4,\"xpad\":1.64844,\"w\":15,\"h\":23},{\"c\":253,\"x0\":40,\"y0\":8,\"yoffs\":3,\"w\":15,\"h\":30},{\"c\":254,\"x0\":530,\"y0\":8,\"yoffs\":4,\"xpad\":0.890625,\"w\":16,\"h\":29},{\"c\":255,\"x0\":563,\"y0\":8,\"yoffs\":4,\"w\":15,\"h\":29},{\"c\":256,\"x0\":684,\"y0\":102,\"w\":19,\"h\":26},{\"c\":257,\"x0\":658,\"y0\":188,\"yoffs\":4,\"xpad\":1.29688,\"w\":14,\"h\":23},{\"c\":258,\"x0\":349,\"y0\":102,\"yoffs\":-1,\"w\":19,\"h\":27},{\"c\":259,\"x0\":361,\"y0\":147,\"yoffs\":3,\"xpad\":1.29688,\"w\":14,\"h\":24},{\"c\":260,\"x0\":605,\"y0\":56,\"yoffs\":5,\"w\":21,\"h\":28},{\"c\":261,\"x0\":689,\"y0\":188,\"yoffs\":10,\"w\":16,\"h\":23},{\"c\":262,\"x0\":595,\"y0\":8,\"yoffs\":-2,\"xpad\":0.945313,\"w\":17,\"h\":29},{\"c\":263,\"x0\":392,\"y0\":147,\"yoffs\":3,\"xpad\":0.273438,\"w\":14,\"h\":24},{\"c\":268,\"x0\":629,\"y0\":8,\"yoffs\":-2,\"xpad\":0.945313,\"w\":17,\"h\":29},{\"c\":269,\"x0\":423,\"y0\":147,\"yoffs\":3,\"xpad\":0.273438,\"w\":14,\"h\":24},{\"c\":270,\"x0\":643,\"y0\":56,\"yoffs\":-2,\"xpad\":1.01563,\"w\":20,\"h\":28},{\"c\":271,\"x0\":722,\"y0\":188,\"yoffs\":4,\"w\":22,\"h\":23},{\"c\":272,\"x0\":274,\"y0\":307,\"yoffs\":5,\"xpad\":1.22656,\"w\":20,\"h\":21},{\"c\":273,\"x0\":761,\"y0\":188,\"yoffs\":4,\"xpad\":0.0703125,\"w\":17,\"h\":23},{\"c\":274,\"x0\":720,\"y0\":102,\"xpad\":0.617188,\"w\":16,\"h\":26},{\"c\":275,\"x0\":795,\"y0\":188,\"yoffs\":4,\"xpad\":1.04688,\"w\":15,\"h\":23},{\"c\":278,\"x0\":385,\"y0\":102,\"yoffs\":-1,\"xpad\":0.617188,\"w\":16,\"h\":27},{\"c\":279,\"x0\":827,\"y0\":188,\"yoffs\":4,\"xpad\":1.04688,\"w\":15,\"h\":23},{\"c\":280,\"x0\":680,\"y0\":56,\"yoffs\":5,\"xpad\":0.617188,\"w\":16,\"h\":28},{\"c\":281,\"x0\":859,\"y0\":188,\"yoffs\":10,\"xpad\":1.04688,\"w\":15,\"h\":23},{\"c\":282,\"x0\":713,\"y0\":56,\"yoffs\":-2,\"xpad\":0.617188,\"w\":16,\"h\":28},{\"c\":283,\"x0\":454,\"y0\":147,\"yoffs\":3,\"xpad\":1.04688,\"w\":15,\"h\":24},{\"c\":286,\"x0\":746,\"y0\":56,\"yoffs\":-1,\"xpad\":1.75,\"w\":18,\"h\":28},{\"c\":287,\"x0\":72,\"y0\":8,\"yoffs\":3,\"xpad\":2.07031,\"w\":15,\"h\":30},{\"c\":290,\"x0\":781,\"y0\":56,\"yoffs\":5,\"xpad\":1.75,\"w\":18,\"h\":28},{\"c\":291,\"x0\":8,\"y0\":8,\"yoffs\":2,\"xpad\":2.07031,\"w\":15,\"h\":31},{\"c\":298,\"x0\":753,\"y0\":102,\"w\":9,\"h\":26},{\"c\":299,\"x0\":976,\"y0\":228,\"yoffs\":4,\"w\":9,\"h\":22},{\"c\":302,\"x0\":816,\"y0\":56,\"yoffs\":5,\"xpad\":0.546875,\"w\":8,\"h\":28},{\"c\":303,\"x0\":841,\"y0\":56,\"yoffs\":5,\"w\":8,\"h\":28},{\"c\":304,\"x0\":418,\"y0\":102,\"yoffs\":-1,\"xpad\":1.54688,\"w\":7,\"h\":27},{\"c\":305,\"x0\":202,\"y0\":345,\"yoffs\":11,\"xpad\":1.34375,\"w\":6,\"h\":15},{\"c\":310,\"x0\":663,\"y0\":8,\"yoffs\":5,\"w\":19,\"h\":29},{\"c\":311,\"x0\":104,\"y0\":8,\"yoffs\":4,\"xpad\":0.171875,\"w\":15,\"h\":30},{\"c\":313,\"x0\":866,\"y0\":56,\"yoffs\":-2,\"w\":16,\"h\":28},{\"c\":314,\"x0\":779,\"y0\":102,\"w\":8,\"h\":26},{\"c\":315,\"x0\":699,\"y0\":8,\"yoffs\":5,\"w\":16,\"h\":29},{\"c\":316,\"x0\":136,\"y0\":8,\"yoffs\":4,\"xpad\":1.46875,\"w\":6,\"h\":30},{\"c\":317,\"x0\":8,\"y0\":268,\"yoffs\":4,\"w\":16,\"h\":22},{\"c\":318,\"x0\":41,\"y0\":268,\"yoffs\":4,\"w\":12,\"h\":22},{\"c\":321,\"x0\":311,\"y0\":307,\"yoffs\":5,\"xpad\":0.046875,\"w\":16,\"h\":21},{\"c\":322,\"x0\":70,\"y0\":268,\"yoffs\":4,\"w\":11,\"h\":22},{\"c\":323,\"x0\":899,\"y0\":56,\"yoffs\":-2,\"xpad\":2.74219,\"w\":19,\"h\":28},{\"c\":324,\"x0\":891,\"y0\":188,\"yoffs\":3,\"xpad\":2.03906,\"w\":15,\"h\":23},{\"c\":325,\"x0\":732,\"y0\":8,\"yoffs\":5,\"xpad\":2.74219,\"w\":19,\"h\":29},{\"c\":326,\"x0\":486,\"y0\":147,\"yoffs\":10,\"xpad\":2.03906,\"w\":15,\"h\":24},{\"c\":327,\"x0\":935,\"y0\":56,\"yoffs\":-2,\"xpad\":2.74219,\"w\":19,\"h\":28},{\"c\":328,\"x0\":923,\"y0\":188,\"yoffs\":3,\"xpad\":2.03906,\"w\":15,\"h\":23},{\"c\":332,\"x0\":442,\"y0\":102,\"xpad\":1.22656,\"w\":21,\"h\":27},{\"c\":333,\"x0\":955,\"y0\":188,\"yoffs\":4,\"xpad\":0.828125,\"w\":16,\"h\":23},{\"c\":336,\"x0\":768,\"y0\":8,\"yoffs\":-2,\"xpad\":1.22656,\"w\":21,\"h\":29},{\"c\":337,\"x0\":518,\"y0\":147,\"yoffs\":3,\"xpad\":0.828125,\"w\":16,\"h\":24},{\"c\":338,\"x0\":98,\"y0\":268,\"yoffs\":5,\"xpad\":0.390625,\"w\":29,\"h\":22},{\"c\":339,\"x0\":794,\"y0\":307,\"yoffs\":10,\"xpad\":0.65625,\"w\":25,\"h\":17},{\"c\":340,\"x0\":971,\"y0\":56,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":341,\"x0\":988,\"y0\":188,\"yoffs\":3,\"xpad\":0.203125,\"w\":10,\"h\":23},{\"c\":342,\"x0\":806,\"y0\":8,\"yoffs\":5,\"w\":19,\"h\":29},{\"c\":343,\"x0\":8,\"y0\":228,\"yoffs\":11,\"xpad\":0.203125,\"w\":10,\"h\":23},{\"c\":344,\"x0\":8,\"y0\":102,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":345,\"x0\":35,\"y0\":228,\"yoffs\":3,\"xpad\":0.203125,\"w\":10,\"h\":23},{\"c\":346,\"x0\":842,\"y0\":8,\"yoffs\":-2,\"xpad\":1.32031,\"w\":15,\"h\":29},{\"c\":347,\"x0\":551,\"y0\":147,\"yoffs\":3,\"xpad\":0.28125,\"w\":13,\"h\":24},{\"c\":350,\"x0\":874,\"y0\":8,\"yoffs\":4,\"xpad\":1.32031,\"w\":15,\"h\":29},{\"c\":351,\"x0\":62,\"y0\":228,\"yoffs\":10,\"xpad\":0.28125,\"w\":13,\"h\":23},{\"c\":352,\"x0\":906,\"y0\":8,\"yoffs\":-2,\"xpad\":1.32031,\"w\":15,\"h\":29},{\"c\":353,\"x0\":581,\"y0\":147,\"yoffs\":3,\"xpad\":0.28125,\"w\":13,\"h\":24},{\"c\":354,\"x0\":44,\"y0\":102,\"yoffs\":5,\"w\":17,\"h\":28},{\"c\":355,\"x0\":804,\"y0\":102,\"yoffs\":7,\"xpad\":0.234375,\"w\":10,\"h\":26},{\"c\":356,\"x0\":78,\"y0\":102,\"yoffs\":-2,\"w\":17,\"h\":28},{\"c\":357,\"x0\":92,\"y0\":228,\"yoffs\":4,\"w\":15,\"h\":23},{\"c\":362,\"x0\":480,\"y0\":102,\"xpad\":2.04688,\"w\":19,\"h\":27},{\"c\":363,\"x0\":124,\"y0\":228,\"yoffs\":4,\"xpad\":1.64844,\"w\":15,\"h\":23},{\"c\":366,\"x0\":938,\"y0\":8,\"yoffs\":-2,\"xpad\":2.04688,\"w\":19,\"h\":29},{\"c\":367,\"x0\":912,\"y0\":102,\"yoffs\":2,\"xpad\":1.64844,\"w\":15,\"h\":25},{\"c\":368,\"x0\":974,\"y0\":8,\"yoffs\":-2,\"xpad\":2.04688,\"w\":19,\"h\":29},{\"c\":369,\"x0\":611,\"y0\":147,\"yoffs\":3,\"xpad\":1.64844,\"w\":15,\"h\":24},{\"c\":370,\"x0\":112,\"y0\":102,\"yoffs\":5,\"xpad\":2.04688,\"w\":19,\"h\":28},{\"c\":371,\"x0\":144,\"y0\":268,\"yoffs\":11,\"w\":17,\"h\":22},{\"c\":376,\"x0\":516,\"y0\":102,\"yoffs\":-1,\"w\":18,\"h\":27},{\"c\":377,\"x0\":148,\"y0\":102,\"yoffs\":-2,\"xpad\":0.226563,\"w\":17,\"h\":28},{\"c\":378,\"x0\":156,\"y0\":228,\"yoffs\":3,\"xpad\":0.851563,\"w\":13,\"h\":23},{\"c\":379,\"x0\":551,\"y0\":102,\"yoffs\":-1,\"xpad\":0.226563,\"w\":17,\"h\":27},{\"c\":380,\"x0\":178,\"y0\":268,\"yoffs\":4,\"xpad\":0.851563,\"w\":13,\"h\":22},{\"c\":381,\"x0\":182,\"y0\":102,\"yoffs\":-2,\"xpad\":0.226563,\"w\":17,\"h\":28},{\"c\":382,\"x0\":186,\"y0\":228,\"yoffs\":3,\"xpad\":0.851563,\"w\":13,\"h\":23},{\"c\":402,\"x0\":944,\"y0\":102,\"yoffs\":4,\"w\":12,\"h\":25},{\"c\":536,\"x0\":159,\"y0\":8,\"yoffs\":4,\"xpad\":1.32031,\"w\":15,\"h\":30},{\"c\":537,\"x0\":643,\"y0\":147,\"yoffs\":10,\"xpad\":0.28125,\"w\":13,\"h\":24},{\"c\":538,\"x0\":8,\"y0\":56,\"yoffs\":5,\"w\":17,\"h\":29},{\"c\":539,\"x0\":585,\"y0\":102,\"yoffs\":7,\"xpad\":0.234375,\"w\":10,\"h\":27},{\"c\":8226,\"x0\":844,\"y0\":345,\"yoffs\":13,\"xpad\":0.28125,\"w\":7,\"h\":6},{\"c\":8482,\"x0\":430,\"y0\":345,\"yoffs\":5,\"xpad\":0.882813,\"w\":22,\"h\":12},{\"c\":8734,\"x0\":333,\"y0\":345,\"yoffs\":11,\"xpad\":0.6875,\"w\":25,\"h\":14},{\"c\":65533,\"x0\":344,\"y0\":307,\"yoffs\":5,\"w\":20,\"h\":21}]}","/*eslint global-require:off*/\n/*global Z: false */\n\nconst glov_engine = require('./glov/engine.js');\nconst glov_font = require('./glov/font.js');\nconst glov_input = require('./glov/input.js');\nconst glov_local_storage = require('./glov/local_storage.js');\nconst glov_particles = require('./glov/particles.js');\nconst glov_sprites = require('./glov/sprites.js');\nconst glov_sprite_animation = require('./glov/sprite_animation.js');\nconst glov_transition = require('./glov/transition.js');\nconst glov_ui = require('./glov/ui.js');\nconst glov_ui_test = require('./glov/ui_test.js');\nconst particle_data = require('./particle_data.js');\n\nconst { vec2, vec4, v4clone, v4copy } = require('./glov/vmath.js');\n\nglov_local_storage.storage_prefix = 'glovjs-playground';\nwindow.Z = window.Z || {};\nZ.BACKGROUND = 0;\nZ.SPRITES = 10;\nZ.PARTICLES = 20;\nZ.UI_TEST = 200;\n\n// let app = exports;\n// Virtual viewport for our game logic\nexport const game_width = 320;\nexport const game_height = 240;\n\nexport let sprites = {};\n\n// Persistent flags system for testing parameters\nlet flags = {};\nfunction flagGet(key, dflt) {\n  if (flags[key] === undefined) {\n    flags[key] = glov_local_storage.getJSON(`flag_${key}`, dflt) || false;\n  }\n  return flags[key];\n}\nfunction flagToggle(key) {\n  flags[key] = !flagGet(key);\n  glov_local_storage.setJSON(`flag_${key}`, flags[key]);\n}\nfunction flagSet(key, value) {\n  flags[key] = value;\n  glov_local_storage.setJSON(`flag_${key}`, flags[key]);\n}\n\nconst color_white = vec4(1, 1, 1, 1);\n\nfunction perfTestSprites() {\n  if (!sprites.test) {\n    sprites.test = [glov_sprites.create({ name: 'test', size: vec2(1, 1), origin: vec2(0.5, 0.5) }), glov_sprites.create({ url: 'img/test.png?1', size: vec2(1, 1), origin: vec2(0.5, 0.5) })];\n  }\n\n  let mode = 2;\n  let count = [80000, // one sprite, pre-sorted\n  40000, // one sprite, unsorted\n  20000, // two sprites, unsorted, small batches\n  60000, // two sprites, sorted, bigger batches, sprite API\n  60000][mode];\n  if (mode === 3 || mode === 4) {\n    for (let ii = 0; ii < count;) {\n      let subc = Math.floor(500 + Math.random() * 100);\n      let idx = mode <= 1 ? 0 : Math.round(Math.random());\n      let sprite = sprites.test[idx];\n      let z = Math.random();\n      for (let jj = 0; jj < subc; ++jj) {\n        if (mode === 4) {\n          // glov_sprites.queueraw(sprite.texs,\n          //   Math.random() * game_width - 3, Math.random() * game_height - 3, z,\n          //   6, 6, 0, 0, 1, 1, color_white);\n          glov_sprites.queuesprite(sprite, Math.random() * game_width, Math.random() * game_height, z, 6 * sprite.size[0], 6 * sprite.size[1], 0, sprite.uvs, color_white);\n        } else {\n          sprites.test[idx].draw({\n            x: Math.random() * game_width,\n            y: Math.random() * game_height,\n            z,\n            w: 6, h: 6\n          });\n        }\n      }\n      ii += subc;\n    }\n  } else {\n    for (let ii = 0; ii < count; ++ii) {\n      let idx = mode <= 1 ? 0 : Math.round(Math.random());\n      sprites.test[idx].draw({\n        x: Math.random() * game_width,\n        y: Math.random() * game_height,\n        z: mode === 0 ? ii : Math.random(),\n        w: 6, h: 6\n      });\n    }\n  }\n}\n\nexport function main(canvas) {\n\n  glov_engine.startup({\n    canvas,\n    game_width,\n    game_height,\n    pixely: flagGet('pixely', 'on'),\n    viewport_postprocess: true\n  });\n\n  const sound_manager = glov_engine.sound_manager;\n  // const font = glov_engine.font;\n\n  // Perfect sizes for pixely modes\n  glov_ui.scaleSizes(13 / 32);\n  glov_ui.setFontHeight(8);\n\n  const createSprite = glov_sprites.create;\n  const createAnimation = glov_sprite_animation.create;\n\n  const color_red = vec4(1, 0, 0, 1);\n  const color_yellow = vec4(1, 1, 0, 1);\n\n  // Cache KEYS\n  const KEYS = glov_input.KEYS;\n  const pad_codes = glov_input.pad_codes;\n\n  const sprite_size = 64;\n  function initGraphics() {\n    glov_particles.preloadParticleData(particle_data);\n\n    sound_manager.loadSound('test');\n\n    sprites.white = createSprite({ url: 'white' });\n\n    sprites.test_tint = createSprite({\n      name: 'tinted',\n      ws: [16, 16, 16, 16],\n      hs: [16, 16, 16],\n      size: vec2(sprite_size, sprite_size),\n      layers: 2,\n      origin: vec2(0.5, 0.5)\n    });\n    sprites.animation = createAnimation({\n      idle_left: {\n        frames: [0, 1],\n        times: [200, 500]\n      },\n      idle_right: {\n        frames: [3, 2],\n        times: [200, 500]\n      }\n    });\n    sprites.animation.setState('idle_left');\n\n    sprites.game_bg = createSprite({\n      url: 'white',\n      size: vec2(game_width, game_height)\n    });\n  }\n\n  let last_particles = 0;\n\n  function test(dt) {\n    if (!test.color_sprite) {\n      test.color_sprite = v4clone(color_white);\n      test.character = {\n        x: Math.random() * (game_width - sprite_size) + sprite_size * 0.5,\n        y: Math.random() * (game_height - sprite_size) + sprite_size * 0.5\n      };\n    }\n\n    if (flagGet('ui_test')) {\n      // let clip_test = 30;\n      // glov_sprites.clip(Z.UI_TEST - 10, Z.UI_TEST + 10, clip_test, clip_test, 320-clip_test * 2, 240-clip_test * 2);\n      glov_ui_test.run(10, 10, Z.UI_TEST);\n    }\n    if (flagGet('font_test')) {\n      glov_ui_test.runFontTest(105, 85);\n    }\n\n    test.character.dx = 0;\n    test.character.dy = 0;\n    if (glov_input.keyDown(KEYS.LEFT) || glov_input.keyDown(KEYS.A) || glov_input.padButtonDown(pad_codes.LEFT)) {\n      test.character.dx = -1;\n      sprites.animation.setState('idle_left');\n    } else if (glov_input.keyDown(KEYS.RIGHT) || glov_input.keyDown(KEYS.D) || glov_input.padButtonDown(pad_codes.RIGHT)) {\n      test.character.dx = 1;\n      sprites.animation.setState('idle_right');\n    }\n    if (glov_input.keyDown(KEYS.UP) || glov_input.keyDown(KEYS.W) || glov_input.padButtonDown(pad_codes.UP)) {\n      test.character.dy = -1;\n    } else if (glov_input.keyDown(KEYS.DOWN) || glov_input.keyDown(KEYS.S) || glov_input.padButtonDown(pad_codes.DOWN)) {\n      test.character.dy = 1;\n    }\n\n    test.character.x += test.character.dx * dt * 0.05;\n    test.character.y += test.character.dy * dt * 0.05;\n    let bounds = {\n      x: test.character.x - sprite_size / 2,\n      y: test.character.y - sprite_size / 2,\n      w: sprite_size,\n      h: sprite_size\n    };\n    if (glov_input.mouseDown() && glov_input.mouseOver(bounds)) {\n      v4copy(test.color_sprite, color_yellow);\n    } else if (glov_input.click(bounds)) {\n      v4copy(test.color_sprite, test.color_sprite[2] === 0 ? color_white : color_red);\n      sound_manager.play('test');\n    } else if (glov_input.mouseOver(bounds)) {\n      v4copy(test.color_sprite, color_white);\n      test.color_sprite[3] = 0.5;\n    } else {\n      v4copy(test.color_sprite, color_white);\n      test.color_sprite[3] = 1;\n    }\n\n    sprites.game_bg.draw({\n      x: 0, y: 0, z: Z.BACKGROUND,\n      color: [0, 0.72, 1, 1]\n    });\n    sprites.test_tint.drawDualTint({\n      x: test.character.x,\n      y: test.character.y,\n      z: Z.SPRITES,\n      color: [1, 1, 0, 1],\n      color1: [1, 0, 1, 1],\n      frame: sprites.animation.getFrame(dt)\n    });\n\n    let font_test_idx = 0;\n\n    glov_ui.print(glov_font.styleColored(null, 0x000000ff), test.character.x, test.character.y + ++font_test_idx * 20, Z.SPRITES, 'TEXT!');\n    let font_style = glov_font.style(null, {\n      outline_width: 1.0,\n      outline_color: 0x800000ff,\n      glow_xoffs: 3.25,\n      glow_yoffs: 3.25,\n      glow_inner: -2.5,\n      glow_outer: 5,\n      glow_color: 0x000000ff\n    });\n    glov_ui.print(font_style, test.character.x, test.character.y + ++font_test_idx * glov_ui.font_height, Z.SPRITES, 'Outline and Drop Shadow');\n\n    let x = glov_ui.button_height;\n    let button_spacing = glov_ui.button_height + 2;\n    let y = game_height - 10 - button_spacing * 5;\n    if (glov_ui.buttonText({ x, y, text: `Pixely: ${flagGet('pixely') || 'Off'}`,\n      tooltip: 'Toggles pixely or regular mode (requires reload)' })) {\n      if (flagGet('pixely') === 'strict') {\n        flagSet('pixely', false);\n      } else if (flagGet('pixely') === 'on') {\n        flagSet('pixely', 'strict');\n      } else {\n        flagSet('pixely', 'on');\n      }\n      document.location = String(document.location);\n    }\n    y += button_spacing;\n\n    if (glov_ui.buttonText({ x, y, text: `Music: ${flagGet('music') ? 'ON' : 'OFF'}`,\n      tooltip: 'Toggles playing a looping background music track' })) {\n      flagToggle('music');\n      if (flagGet('music')) {\n        sound_manager.playMusic('music_test.mp3', 1, sound_manager.FADE_IN);\n      } else {\n        sound_manager.playMusic('music_test.mp3', 0, sound_manager.FADE_OUT);\n      }\n    }\n    y += button_spacing;\n\n    if (glov_ui.buttonText({ x, y, text: `Font Test: ${flagGet('font_test') ? 'ON' : 'OFF'}`,\n      tooltip: 'Toggles visibility of general Font tests' })) {\n      flagToggle('font_test');\n      glov_transition.queue(Z.TRANSITION_FINAL, glov_transition.randomTransition());\n    }\n    y += button_spacing;\n\n    if (glov_ui.buttonText({ x, y, text: `UI Test: ${flagGet('ui_test') ? 'ON' : 'OFF'}`,\n      tooltip: 'Toggles visibility of general UI tests' })) {\n      flagToggle('ui_test');\n    }\n    y += button_spacing;\n\n    if (glov_ui.buttonText({ x, y, text: `Particles: ${flagGet('particles', true) ? 'ON' : 'OFF'}`,\n      tooltip: 'Toggles particles' })) {\n      flagToggle('particles');\n    }\n    if (flagGet('particles')) {\n      if (glov_engine.getFrameTimestamp() - last_particles > 1000) {\n        last_particles = glov_engine.getFrameTimestamp();\n        glov_engine.glov_particles.createSystem(particle_data.defs.explosion,\n        //[test.character.x, test.character.y, Z.PARTICLES]\n        [100 + Math.random() * 120, 100 + Math.random() * 140, Z.PARTICLES]);\n      }\n    }\n\n    if (flagGet('perf_test')) {\n      perfTestSprites();\n    }\n\n    // Debugging touch state on mobile\n    // const glov_camera2d = require('./glov/camera2d.js');\n    // glov_engine.font.drawSizedWrapped(glov_engine.fps_style, glov_camera2d.x0(), glov_camera2d.y0(), Z.FPSMETER,\n    //   glov_camera2d.w(), 0, 22, JSON.stringify({\n    //     last_touch_state: glov_input.last_touch_state,\n    //     touch_state: glov_input.touch_state,\n    //   }, undefined, 2));\n  }\n\n  function testInit(dt) {\n    glov_engine.setState(test);\n    if (flagGet('music')) {\n      sound_manager.playMusic('music_test.mp3');\n    }\n    test(dt);\n  }\n\n  initGraphics();\n  glov_engine.setState(testInit);\n}","export let defs = {};\n\ndefs.explosion = {\n  particles: {\n    part0: {\n      blend: 'alpha',\n      texture: 'particles/circle64',\n      color: [1, 1, 1, 1], // multiplied by animation track, default 1,1,1,1, can be omitted\n      color_track: [// just values, NOT random range\n      { t: 0.0, v: [1, 1, 1, 0] }, { t: 0.2, v: [1, 1, 1, 1] }, { t: 0.4, v: [1, 1, 0.5, 0.5] }, { t: 1.0, v: [1, 0, 0, 0] }],\n      size: [[48, 8], [48, 8]], // multiplied by animation track\n      size_track: [// just values, NOT random range\n      { t: 0.0, v: [1, 1] }, { t: 0.2, v: [2, 2] }, { t: 0.4, v: [1, 1] }, { t: 1.0, v: [1.5, 1.5] }],\n      accel: [0, 0, 0],\n      rot: [0, 360], // degrees\n      rot_vel: [10, 2], // degrees per second\n      lifespan: [2500, 0], // milliseconds\n      kill_time_accel: 5\n    }\n  },\n  emitters: {\n    part0: {\n      particle: 'part0',\n      // Random ranges affect each emitted particle:\n      pos: [[-16, 32], [-16, 32], 0],\n      vel: [0, 0, 0],\n      emit_rate: [15, 0], // emissions per second\n      // Random ranges only calculated upon instantiation:\n      emit_time: [0, 1000],\n      emit_initial: 10,\n      max_parts: Infinity\n    }\n  },\n  system_lifespan: 2500\n};","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nfunction ok(exp, msg) {\n  if (exp) {\n    return;\n  }\n  throw new Error(`Assertion failed${msg ? `: ${msg}` : ''}`);\n}\nmodule.exports = ok;\nmodule.exports.ok = ok;\n\nfunction equal(a, b) {\n  if (a === b) {\n    return;\n  }\n  throw new Error(`Assertion failed: \"${a}\"===\"${b}\"`);\n}\nmodule.exports.equal = equal;\n","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint no-alert:off, consistent-return:off */\n(function () {\n  let debug = document.getElementById('debug');\n  window.onerror = function (e, file, line) {\n    debug.innerText = `${e}\\n  at ${file}(${line})`;\n  };\n  window.debugmsg = function (msg, clear) {\n    if (clear) {\n      debug.innerText = msg;\n    } else {\n      debug.innerText += `${msg}\\n`;\n    }\n  };\n})();\n\n// Embedded code and startup code.\nwindow.onload = function () {\n  // eslint-disable-next-line global-require\n  const main = require('./main.js');\n\n  let canvas = document.getElementById('canvas');\n\n  function resizeCanvas() {\n    let css_to_real = window.devicePixelRatio || 1;\n    window.pixel_scale = css_to_real;\n    canvas.width = Math.round(canvas.clientWidth * css_to_real);\n    canvas.height = Math.round(canvas.clientHeight * css_to_real);\n  }\n  // resize the canvas to fill browser window dynamically\n  window.addEventListener('resize', resizeCanvas, false);\n  resizeCanvas();\n\n  let contextNames = ['webgl', 'experimental-webgl'];\n  for (let i = 0; i < contextNames.length; i += 1) {\n    try {\n      window.gl = canvas.getContext(contextNames[i]);\n    } catch (e) {\n      // ignore\n    }\n    if (window.gl) {\n      return main.main(canvas);\n    }\n  }\n  window.alert('Sorry, but your browser does not support WebGL or does not have it enabled.');\n  document.getElementById('loading').style.visibility = 'hidden';\n};","const { abs, floor, min, max, round, pow, sqrt } = Math;\n\nexport function easeInOut(v, a) {\n  let va = pow(v, a);\n  return va / (va + pow(1 - v, a));\n}\n\nexport function easeIn(v, a) {\n  return 2 * easeInOut(0.5 * v, a);\n}\n\nexport function easeOut(v, a) {\n  return 2 * easeInOut(0.5 + 0.5 * v, a) - 1;\n}\n\nexport function clone(obj) {\n  return JSON.parse(JSON.stringify(obj));\n}\n\nexport function merge(dest, src) {\n  for (let f in src) {\n    dest[f] = src[f];\n  }\n  return dest;\n}\n\nexport function defaults(dest, src) {\n  for (let f in src) {\n    if (!Object.prototype.hasOwnProperty.call(dest, f)) {\n      dest[f] = src[f];\n    }\n  }\n  return dest;\n}\n\nexport function cloneShallow(src) {\n  return merge({}, src);\n}\n\nexport function clamp(v, mn, mx) {\n  return min(max(mn, v), mx);\n}\n\nexport function lerp(a, v0, v1) {\n  return (1 - a) * v0 + a * v1;\n}\n\nexport function mix(v0, v1, a) {\n  // GLSL semantics\n  return (1 - a) * v0 + a * v1;\n}\n\nexport function sign(a) {\n  return a < 0 ? -1 : a > 0 ? 1 : 0;\n}\n\nexport function round100(a) {\n  return round(a * 100) / 100;\n}\n\nexport function round1000(a) {\n  return round(a * 1000) / 1000;\n}\n\nexport function fract(a) {\n  return a - floor(a);\n}\n\nexport function nearSame(a, b, tol) {\n  return abs(b - a) <= tol;\n}\n\nexport function titleCase(str) {\n  return str.split(' ').map(word => `${word[0].toUpperCase()}${word.slice(1)}`).join(' ');\n}\n\nconst EPSILON = 0.00001;\n\n// http://local.wasp.uwa.edu.au/~pbourke/geometry/sphereline/\nexport function lineCircleIntersect(p1, p2, pCircle, radius) {\n  let dp = [p2[0] - p1[0], p2[1] - p1[1]];\n  let a = dp[0] * dp[0] + dp[1] * dp[1];\n  let b = 2 * (dp[0] * (p1[0] - pCircle[0]) + dp[1] * (p1[1] - pCircle[1]));\n  let c = pCircle[0] * pCircle[0] + pCircle[1] * pCircle[1];\n  c += p1[0] * p1[0] + p1[1] * p1[1];\n  c -= 2 * (pCircle[0] * p1[0] + pCircle[1] * p1[1]);\n  c -= radius * radius;\n  let bb4ac = b * b - 4 * a * c;\n  if (abs(a) < EPSILON || bb4ac < 0) {\n    return false;\n  }\n\n  let mu1 = (-b + sqrt(bb4ac)) / (2 * a);\n  let mu2 = (-b - sqrt(bb4ac)) / (2 * a);\n  if (mu1 >= 0 && mu1 <= 1 || mu2 >= 0 && mu2 <= 1) {\n    return true;\n  }\n\n  return false;\n}"]}