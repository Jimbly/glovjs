{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/gl-mat3/create.js","node_modules/gl-mat3/fromMat4.js","node_modules/gl-mat4/copy.js","node_modules/gl-mat4/create.js","node_modules/gl-mat4/invert.js","node_modules/gl-mat4/multiply.js","node_modules/gl-mat4/perspective.js","node_modules/gl-mat4/transpose.js","src/client/glov/camera2d.js","src/client/glov/edit_box.js","src/client/glov/effects.js","src/client/glov/engine.js","src/client/glov/font.js","src/client/glov/geom.js","src/client/glov/glb/decode-utf8.js","src/client/glov/glb/gltf-type-utils.js","src/client/glov/glb/parser.js","src/client/glov/glb/unpack-binary-json.js","src/client/glov/glb/unpack-glb-buffers.js","src/client/glov/input.js","src/client/glov/local_storage.js","src/client/glov/mat43.js","src/client/glov/models.js","src/client/glov/particles.js","src/client/glov/pointer_lock.js","src/client/glov/selection_box.js","src/client/glov/shaders.js","src/client/glov/simple_menu.js","src/client/glov/sound_manager.js","src/client/glov/sprite_animation.js","src/client/glov/sprites.js","src/client/glov/textures.js","src/client/glov/transition.js","src/client/glov/ui.js","src/client/glov/ui_test.js","src/client/glov/vmath.js","src/client/img/font/04b03_8x1.json","src/client/img/font/04b03_8x2.json","src/client/img/font/palanquin32.json","src/client/main.js","src/client/particle_data.js","src/client/shims/assert.js","src/client/wrapper.js","src/common/util.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","create","out","Float32Array","fromMat4","copy","invert","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","multiply","b","b0","b1","b2","b3","perspective","fovy","aspect","near","far","Math","tan","nf","transpose","virtualToCanvas","set","setAspectFixed","setAspectFixed2","zoom","setNormalized","x0","y0","x1","y1","w","h","xScale","yScale","htmlPos","htmlSize","physicalToVirtual","physicalDeltaToVirtual","virtualToPhysical","tickCamera2D","startup","engine","round","data","screen_width","screen_height","render_width","render_height","render_viewport_w","render_viewport_h","render_offset_x","render_offset_y","reapply","dst","src","pa","pixel_aspect","inv_aspect","inv_desired_aspect","margin","_margin","_margin2","x","y","factor","inv_factor","window","devicePixelRatio","width","height","viewport","_margin3","setViewport","camera2d","glov_input","glov_ui","focuslog","GlovUIEditBox","params","this","z","Z","UI","button_width","type","allow_modal","font_height","text","placeholder","initial_focus","initial_select","spellcheck","applyParams","got_focus_in","got_focus_out","elem","input","submitted","new_text","value","focusSteal","isFocusedPeek","keyDownEdge","KEYS","TAB","keyDown","SHIFT","focusPrev","focusNext","focused","focusCheck","document","activeElement","focus","blur","ESC","setText","focusCanvas","_this","updateFocus","this_frame_edit_boxes","push","getElem","textContent","form","createElement","setAttribute","addEventListener","ev","preventDefault","appendChild","span","select","pos","style","left","top","size","fontSize","toFixed","eatAllKeyboardInput","SUBMIT","prototype","grayScaleMatrix","sepiaMatrix","negativeMatrix","saturationMatrix","hueMatrix","brightnessAddMatrix","brightnessScaleMatrix","additiveMatrix","contrastMatrix","applyCopy","applyPixelyExpand","applyGaussianBlur","applyColorMatrix","geom","shaders","textures","vec2","vec4","v4set","shader_data","vp_copy","vp","fp","pixely_expand","gaussian_blur","color_matrix","getShader","key","shader","gl","FRAGMENT_SHADER","VERTEX_SHADER","inited","clip_space","copy_uv_scale","shader_params_default","shader_params_color_matrix","shader_params_gaussian_blur","shader_params_pixely_expand","quad_geom","semantic","POSITION","FLOAT","QUADS","colorMatrix","sampleRadius","Gauss","orig_pixel_size","saturationScale","is","angle","cos","s","sin","brightnessOffset","scale","additiveRGB","contrastScale","applyEffect","effect","view_w","view_h","target_w","target_h","bind","bindArray","texs","draw","source","setSamplerState","filter_min","LINEAR","filter_mag","wrap_s","CLAMP_TO_EDGE","wrap_t","resx","resy","hblur","captureFramebuffer","vblur","final_viewport","clear_color","clearColor","clear","COLOR_BUFFER_BIT","max_size","min_size","inputTexture0","res","matrix","mout","setGlobalMatrices","updateMatrices","postprocessingAllow","getFrameTimestamp","getFrameIndex","getFrameDt","getFrameDtActual","setState","addTickFunc","getTemporaryTexture","assert","effects","glov_font","font_info_palanquin32","local_storage","mat3FromMat4","mat4Copy","mat4Invert","mat4Mul","mat4Transpose","mat4Perspective","asin","min","max","PI","sqrt","models","sprites","glov_transition","mat3","mat4","vec3","v3mulMat4","v3normalize","v4copy","canvas","glov_particles","sound_manager","clear_bits","game_width","game_height","defines","any_3d","ZFAR","ZNEAR","fov_y","fov_x","mat_projection","mat_view","mat_m","mat_vp","mat_mv","mat_mv_no_skew","mat_mvp","mat_mv_inv_transform","projection_inverse","light_diffuse","light_dir_vs","light_ambient","light_dir_ws","font","app_state","pico8_colors","fps_style","outline_width","outline_color","color","_mat_view","normalizeRow","m","idx","len","mat_temp","mat_model","postprocessing_reset_version","postprocessing","get","allow","undefined","global_timer","global_frame_index","this_frame_time","this_frame_time_actual","after_loading_state","is_loading","new_state","mspf","mspf_update_time","Date","now","mspf_frame_count","show_fps","do_borders","do_viewport_postprocess","need_repos","app_tick_functions","cb","temporary_textures","resetEffects","temp","list","pop","destroy","xywh","_tex","createForCapture","tex","override_sampler","do_filter_linear","do_wrap","copyTexImage","NEAREST","REPEAT","last_tick","tick","SLOWLOAD","setTimeout","requestAnimationFrame","dt","hidden","webkitHidden","rise","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","enable","BLEND","DEPTH_TEST","depthMask","disable","error","tickInput","tickUI","ul","lr","viewport2","view_height","font_size","floor","getElementById","drawRect","BORDERS","ii","drawSizedAligned","FPSMETER","ALIGN","HRIGHT","render","endFrame","last_error_time","glovErrorReport","msg","file","line","col","url","location","href","match","escape","xhr","XMLHttpRequest","open","send","TurbulenzEngine","error_report","glov_error_report","resizeCanvas","css_to_real","pixel_scale","clientWidth","clientHeight","is_pixely","pixely","antialias","context_names","context_opt","good","getContext","alert","visibility","znear","zfar","viewport_postprocess","depthFunc","LEQUAL","CULL_FACE","cullFace","BACK","search","forEach","v","slice","ambient","mvp","mv_inv_trans","view","projection","DEPTH_BUFFER_BIT","defaultFilters","font_info_04b03x2","font_info_04b03x1","info","texture","ui_sprites","bindSounds","button_click","rollover","state","loading","load_count","innerText","glov_engine","intColorFromVec4Color","vec4ColorFromIntColor","styleColored","styleAlpha","clamp","v4clone","v4scale","COLOR_MODE","SINGLE","GRADIENT","HLEFT","HCENTER","HMASK","VTOP","VCENTER","VBOTTOM","VMASK","HFIT","HWRAP","HCENTERFIT","HVCENTER","HVCENTERFIT","GlovFontDefaultStyle","glow_xoffs","glow_yoffs","glow_inner","glow_outer","glow_color","colorUR","colorLR","colorLL","color_mode","GlovFontStyle","font_shaders","buildVec4ColorFromIntColor","glov_font_default_style","font_style","fields","ret","_f","colorAlpha","alpha","tech_params","tech_params_dirty","temp_color","createTechniqueParameters","param0","outlineColor","glowColor","glowParams","tex0","techParamsSet","param","tpv","techParamsGet","GlovFont","font_info","texture_name","load","noFilter","font_aa","char_infos","char_info","sc","_ii","_char_info","xpad","yoffs","replacement_character","infoFromChar","default_style","applied_style","drawSized","drawScaled","_x","_y","align","x_size","y_size","getStringWidth","indent","drawScaledWrapped","word_cb","wrapLinesScaled","applyStyle","xsc","x_advance","calcXAdvance","charCodeAt","word_start","word_x0","linenum","space_info","space_size","hard_wrap","newx","char_w","tabsize","word_width","ysc","_this2","last_width","num_lines","xoffs","word","y2","x2","word_w","font_texel_scale","y_offset","avg_scale_font","camera_xscale","camera_yscale","avg_scale_combined","tile_state","delta_per_source_pixel","spread","delta_per_dest_pixel","padding1","padding4","outer_scaled","value2","padding_in_font_space","z_advance","rel_x_scale","rel_y_scale","char_scale","xsc2","ysc2","pad_scale","tile_width","tile_height","u0","u1","v0","v1","queueraw","outline","glow","font_aa_outline_glow","font_aa_outline","font_aa_glow","determineShader","fontShadersInit","_len","arguments","args","Array","_key","Function","apply","concat","createIndices","ceil","TRIANGLES","gl_byte_size","5120","5121","5122","5123","5126","bound_geom","bound_array_buf","bound_index_buf","quad_index_buf","quad_index_buf_len","deleteBuffer","handle","bindBuffer","ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER","attrib_enabled","enableVertexAttribArray","bits","disable_mask","enable_mask","disableVertexAttribArray","_n","getQuadIndexBuf","quad_count","createBuffer","arr","Uint16Array","vidx","bufferData","STATIC_DRAW","idxs","ibo","ibo_size","Geom","_format","verts","mode","format","stride","elem_count","used_attribs","fmt","sem","gltype","count","byte_size","vert_count","vbo","orig_mode","ibo_owned","update","num_verts","DYNAMIC_DRAW","bufferSubData","subarray","dispose","bound_attribs","offset","normalized","vertexAttribPointer","drawElements","UNSIGNED_SHORT","decode","charCache","charFromCodePt","String","fromCodePoint","fromCharCode","result","array","codePt","byte1","buffLen","join","getAccessorTypeFromSize","TYPES","ATTRIBUTE_TYPE_TO_COMPONENTS","SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4","ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE","5125","ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY","Int8Array","Uint8Array","Int16Array","Uint32Array","unpackGLBBuffers","unpackBinaryJson","padTo4Bytes","byteLength","decode_utf8","MAGIC_glTF","GLB_FILE_HEADER_SIZE","GLB_CHUNK_HEADER_SIZE","GLB_CHUNK_TYPE_JSON","GLB_CHUNK_TYPE_BIN","LE","BE","GLBParser","binaryByteOffset","packedJson","json","parseBinary","self","dataView","DataView","glbArrayBuffer","magic1","getUint32","version","fileLength","valid","console","warn","jsonChunkLength","jsonChunkFormat","jsonChunkOffset","jsonChunk","jsonText","JSON","parse","binaryChunkStart","binChunkFormat","arrayBuffer","parseInternal","unpackedBuffers","parseSync","getApplicationData","getJSON","getArrayBuffer","getBinaryByteOffset","getBufferView","glTFBufferView","byteOffset","getBuffer","glTFAccessor","ArrayType","componentType","components","bytesPerComponent","bufferViews","bufferView","getImageData","glTFImage","typedArray","mimeType","getImage","arrayBufferView","blob","Blob","urlCreator","URL","webkitURL","imageUrl","createObjectURL","img","Image","parser","parseJSONPointer","indexOf","matches","index","parseInt","_index","decodeJSONPointer","object","buffers","pointer","field","buffer","unpackJsonArraysRecursive","topJson","options","isArray","map","element","_typeof","newObject","getArrayBufferAtOffset","binaryBuffer","ArrayBuffer","sourceArray","binaryArray","getArrayTypeAndLength","accessor","unpackAccessors","accessors","accessorBuffers","_getArrayTypeAndLengt","unpackImages","images","imageBuffers","image","imate","pointerLocked","pointerLockEnter","pointerLockExit","eatAllInput","mousePos","mouseWheel","mouseOver","mouseDown","mousePosIsTouch","isTouchDown","numTouches","keyUpEdge","padGetAxes","padButtonDown","padButtonDownEdge","padButtonUpEdge","mouseUpEdge","mouseDownEdge","drag","dragDrop","dragOver","pointer_lock","abs","v2add","v2copy","v2lengthSq","v2set","v2scale","v2sub","UP_EDGE","DOWN_EDGE","DOWN","TOUCH_AS_MOUSE","MAP_ANALOG_TO_DPAD","ANY","POINTERLOCK","BACKSPACE","ENTER","RETURN","CTRL","ALT","SPACE","PAGEUP","PAGEDOWN","END","HOME","LEFT","UP","RIGHT","INS","DEL","TILDE","Proxy","target","prop","receiver","pad_codes","A","SELECT","B","CANCEL","X","Y","LB","LEFT_BUMPER","RB","RIGHT_BUMPER","LT","LEFT_TRIGGER","RT","RIGHT_TRIGGER","START","LEFT_STICK","RIGHT_STICK","ANALOG_UP","ANALOG_LEFT","ANALOG_DOWN","ANALOG_RIGHT","key_state","pad_states","gamepad_data","mouse_pos","last_mouse_pos","mouse_pos_is_touch","mouse_over_captured","mouse_down","mouse_wheel","movement_questionable_frames","MOVEMENT_QUESTIONABLE_FRAMES","ptrlock","input_eaten_kb","input_eaten_mouse","touches","touch_mode","TouchData","touch","button","delta","total","cur_pos","start_pos","release","start_time","dispatched","dispatched_drag_over","isLocked","pointerlock_touch_id","touch_data","enter","exit","ignored","event","tagName","stopPropagation","onKeyUp","keyCode","allowAsync","onKeyDown","F5","F12","I","altKey","metaKey","ctrlKey","shiftKey","temp_delta","onMouseMove","no_stop","setJSON","clientX","clientY","any_movement","movementX","movementY","onMouseDown","resume","no_click","touch_id","onMouseUp","onWheel","wheelDelta","touch_pos","onTouchChange","cancelable","ct","seen","new_count","old_count","last_touch","identifier","released_touch","id","_touch","_touch2","onBlurOrFocus","evt","_canvas","passive_param","opts","Object","defineProperty","passive","removeEventListener","DEADZONE","DEADZONE_SQ","NUM_STICKS","PAD_THRESHOLD","getGamepadData","gpd","timestamp","sticks","updatePadState","ps","gamepadUpdate","gamepads","navigator","webkitGamepads","getGamepads","webkitGetGamepads","numGamePads","gamepad","buttons","numButtons","axes","pair","magnitude","endFrameTickMap","keys","keycode","skip_mouse","mousePosParam","check_pos","checkPos","Infinity","pos_param","drag_target","Boolean","stickindex","padindex","sub","padButtonDownInternal","padcode","padButtonDownEdgeInternal","padButtonUpEdgeInternal","ANALOG_MAP","padButtonShared","fn","max_click_dist","max_dist","click","min_dist","peek","eat_clicks","payload","drag_payload","clearAll","exportAll","importAll","storage_prefix","lsd","localStorage","test","stringify","def","prefix","RegExp","obj","serialized","mat43","m43identity","m43mul","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","b4","b5","b6","b7","b8","glb_parser","renderer","box_glb","default_vshader","default_fshader","initShaders","Model","lastIndexOf","base_url","responseType","onload","array_buffer","response","status","skip_attr","TANGENT","glb_data","glb","glb_json","objs","meshes","mesh","jj","primitives","material","materials","bct","pbrMetallicRoughness","baseColorTexture","texture_def","sampler_def","samplers","sampler","uri","magFilter","minFilter","wrapS","wrapT","bidx","total_size","attr","attributes","_accessor","equal","geom_format","geom_count","my_vert_count","vert","_attr","kk","indices","mat","_ii2","drawGeom","_ii3","model","box","model_box","preloadParticleData","v2lerp","v2mul","v3add","v4lerp","v4mul","blend_map","BLEND_ALPHA","additive","BLEND_ADDITIVE","particle_data","defs","part_name","particles","part_def","normalizeValue","normalizeValueVec","vec","normalizeParticle","particle_manager","norm","blend","color_track","size_track","accel","rot","rot_vel","lifespan","kill_time_accel","_e","_arr","findParticle","name","normalizeEmitter","part_map","part_idx","particle","vel","emit_rate","emit_time","emit_initial","normalizeDef","system_lifespan","emitters","instValue","random","instValueVec","temp_color2","temp_size","temp_size2","ParticleSystem","parent","def_in","age","kill_hard","kill_soft","part_sets","part_set","parts","_def","emitter","countdown","started","stopped","part","age_norm","dts","weight","_weight","queueraw4","dt_orig","tickParticle","init_dt","emitter_def","num","emitParticle","remaining_dt","emit_dt","tickPartSet","_ii4","tickEmitter","ParticleManager","systems","system","_key2","deferred_lock_id","want_lock_async","trying_direct_lock","direct_lock_works","direct_lock_disabled","async_pointer_lock_start_frame","user_want_locked","exitLock","exitPointerLock","pointerLog","log","onPointerLockChange","pointerLockElement","mozPointerLockElement","webkitPointerLockElement","onPointerLockError","asyncPointerLockCheck","requestPointerLock","enterLock","clearTimeout","mozRequestPointerLock","webkitRequestPointerLock","mozExitPointerLock","webkitExitPointerLock","glov_markup","cloneShallow","merge","nearSame","selbox_font_style_default","selbox_font_style_selected","selbox_font_style_down","selbox_font_style_disabled","default_display","style_default","style_selected","style_disabled","style_down","no_background","no_buttons","centered","bounce","tab_stop","use_markup","color_gray50","color_grayD0","color_white","SELBOX_BOUNCE_TIME","GlovMenuItem","value_min","value_max","value_inc","tag","prompt_int","prompt_string","no_sound","slider","no_controller_exit","plus_minus","disabled","GlovSelectionBox","items","is_dropdown","transient_focus","display","scroll_height","entry_height","button_height","auto_reset","dropdown_visible","selected","was_clicked","was_right_clicked","is_focused","dummy_focus_check","selbox_dummy","mouse_mode","last_mousex","last_mousey","bounce_time","expected_frame_index","item","tag_or_index","list_height","do_scroll","yret","pos_changed","was_focused","gained_focus_forward","old_sel","num_non_disabled_selections","eff_sel","gained_focus","bg_height","getHeight","page_size","S","W","sel_changed","_item","pad","color0","setMouseOver","drawHBox","menu_header","font_style_focused","font_style_normal","y_save","x_save","scroll_pos","eff_width","min_scroll_pos","old_scroll_pos","sa","max_scroll_pos","overscroll","begin","_item2","entry_disabled","image_set","is_mouseover","mpos","show_selection","menu_selected","menu_down","ms","menu_entry","bounce_amt","did_tab","text_y","str","tab_idx","pre","post","w1","w2","md","print","_md","xx","zz","end","playUISound","addInclude","addGlobal","last_id","bound_prog","ATTR0","ATTR1","COLOR","COLOR_0","ATTR2","TEXCOORD","TEXCOORD_0","ATTR3","NORMAL","ATTR4","TEXCOORD_1","findAll","re","exec","globals","error_fp","error_vp","vp_attr_regex","uniform_regex","sampler_regex","include_regex","type_size","includes","parseIncludes","supplied_uniforms","replace","filename","replacement","str2","Shader","createShader","programs","found","Number","isNaN","uniforms","type_name","split","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","uniformSetValue","unif","uniform2fv","uniform3fv","uniform4fv","uniformMatrix3fv","uniformMatrix4fv","link","prog","createProgram","attachShader","bindAttribLocation","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","useProgram","getUniformLocation","glob","filter","_name","uniform1i","diff","_jj","_globals","selection_box","color101010C8","GlovSimpleMenu","sel_box","edit_index","menu_item","force","internal","exit_index","selbox_enabled","no_notches","slider_width","slider_x","run","grabbed","buttons_width","button_x","buttonText","no_focus","minus_over","button_mouseover","plus_over","execItem","allow_left_right","D","wasRightClicked","isSelected","DEFAULT_FADE_RATE","sounds","num_loading","SoundManager","listenerTransform","soundDeviceParameters","linearDistance","soundDevice","WebGLSoundDevice","auto_oggs","auto_mp3s","sound_on","music_on","channels","createSource","position","relative","pitch","channel","last_played","fade_rate","current_loop","music","looping","current_volume","target_volume","base","loadSound","preferred_ext","tryLoad","ext","createSound","sound","isSupported","max_fade","fade_amt","gain","soundname","volume","last_played_time","play","stop","transition","DEFAULT","FADE_OUT","FADE_IN","FADE","GlovSpriteAnimation","frame","time","anim","anim_idx","frames","times","loop","clone","getFrame","queuefn","queuesprite","clip","nextHighestPowerOfTwo","sprite_vshader","sprite_fshader","sprite_dual_fshader","sprite_shader_params","last_uid","sprite_queue","sprite_freelist","SpriteData","shader_params","uid","spriteDataAlloc","cmpSprite","x3","y3","sprite","uvs","nozoom","origin","dx","dy","cosr","sinr","ch","cw","sh","sw","ubias","vbias","zoom_level","mipped_texels","z_start","z_end","xy","wh","gd_h","scissor","SCISSOR_TEST","diffTextures","texsa","texsb","batch_state","sprite_geom","sprite_buffer","sprite_buffer_len","sprite_buffer_batch_start","sprite_buffer_idx","last_blend_mode","last_bound_shader","MAX_VERT_COUNT","batches","commit","start","commitAndFlush","batch","ONE","bufferSpriteData","c1","c2","c3","c4","u2","v2","sort","new_length","buildRects","ws","hs","rects","total_w","total_h","tex_w","tex_h","widths","heights","Sprite","layers","uidata","drawDualTint","color1","findTexForReplacement","aniso","max_aniso","aniso_enum","default_filter_min","default_filter_mag","R8","RGB8","RGBA8","mag","isPowerOfTwo","bound_unit","bound_tex","handle_loading","handle_error","setUnit","unit","activeTexture","TEXTURE0","bindHandle","bindTexture","unbindHandle","eff_handle","Texture","loaded","load_fail","TEXTURE_2D","createTexture","updateData","loadURL","texParameteri","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","TEXTURE_WRAP_T","mipmaps","texParameterf","texImage2D","internal_type","gl_type","texSubImage2D","generateMipmap","did_done","done","fail","onerror","crossOrigin","copyTexImage2D","RGB","deleteTexture","cname","toLowerCase","search_key","compare_key","LINEAR_MIPMAP_LINEAR","LUMINANCE","UNSIGNED_BYTE","RGBA","ext_anisotropic","getExtension","TEXTURE_MAX_ANISOTROPY_EXT","getParameter","MAX_TEXTURE_MAX_ANISOTROPY_EXT","queue","fade","splitScreen","pixelate","randomTransition","easeOut","unit_vec","pow","transitions","IMMEDIATE","REMOVE","CONTINUE","transition_pixelate","GlovTransition","func","capture","accum_time","transitionCapture","trans","immediate","TRANSITION_FINAL","_trans","destroyTexture","trans_idx","TRANSITION_RANGE","force_end","splice","glovTransitionFadeFunc","fade_time","initial","ms_since_start","progress","glovTransitionSplitScreenFunc","border_width","slide_window","border_color","v_half","border_grow_progress","render_scale","transition_pixelate_texture","transitionPixelateCapture","glovTransitionPixelateFunc","gd_width","partial_progress","param1","texSizeX","texSizeY","fade_time_scale","makeColorSet","loadUISprite","drawBox","isFocused","panel","drawTooltip","buttonShared","buttonTextDraw","buttonImage","modalDialog","createEditBox","menuUp","drawCircle","drawHollowCircle","drawLine","drawCone","scaleSizes","setModalSizes","setFontHeight","setTooltipWidth","MODAL","TOOLTIP","DEBUG","glov_edit_box","glov_sprites","lerp","MODAL_DARKEN","menu_fade_params_default","saturation","brightness","fallback_darken","regular","down","doBlurEffect","desaturate_xform","desaturate_tmp","doDesaturateEffect","modal_button_width","button_img_size","modal_width","modal_y0","modal_title_scale","panel_pixel_scale","tooltip_panel_pixel_scale","tooltip_width","tooltip_pad","color_button","color_panel","modal_font_style","button_focused","touch_changed_focus","last_frame_button_mouseover","frame_button_mouseover","modal_dialog","modal_stealing_focus","menu_up","menu_fade_params","menu_up_time","last_frame_edit_boxes","dom_elems","dom_elems_issued","button_keys","focused_last_frame","focused_this_frame","focused_key_not","focused_key","focused_key_prev1","focused_key_prev2","overrides","only_override","override","_font","button_regular","white","ok","cancel","yes","no","N","dynamic_text_elem","_elem","_sound_manager","_sounds","coords","my_w","my_h","tooltip","tooltip_w","tooltip_y0","eff_tooltip_pad","drawSizedWrapped","draw_only","no_touch_mouseover","touch_twice","tooltip_above","z_bias","button_last_color","colors","base_name","sprite_name","_buttonShared","shrink","img_rect","_buttonShared2","img_w","img_h","img_origin","img_scale","draw_param","rotation","title","modalDialogRun","eff_button_width","text_w","eff_font_height","eff_button_keys","pressed","color_slider_handle","color_slider_handle_grab","color_slider_handle_over","draggable_width","handle_center_pos","handle_h","handle_w","slider_handle","handle_x","handle_y","handle_color","bad_frames","edit_box","unrun","removeChild","pp_this_frame","mx","my","Mx","My","spreadTechParams","drawCircleInternal","tu1","tv1","tu2","tv2","circle","CIRCLE_SIZE","midp","j","d","filter_max","hollow_circle","LINE_W","LINE_SIZE","tangx","tangy","w0","cone","CONE_SIZE","_dx","_dy","dCircle","_modal_button_width","title_scale","_font_height","_tooltip_width","_tooltip_panel_pixel_scale","runFontTest","glov_simple_menu","glov_selection_box","demo_menu","demo_menu_up","demo_result","edit_box1","edit_box2","test_select1","test_select2","slider_value","init","column_width","line_height","getSelectedItem","OK","Cancel","COLOR_RED","COLOR_GREEN","COLOR_WHITE","COLOR_INVISIBLE","font_style_outline","font_style_glow","font_style_shadow","font_style_both","font_size2","font_style_both2","font_style_outline2","font_style_glow2","fract","v2abs","v2addScale","v2distSq","v2div","v2floor","v2normalize","v3addScale","v3copy","v3cross","v3determinant","v3dot","v3distSq","v3div","v3floor","v3lengthSq","v3lerp","v3mul","v3round","v3same","v3scale","v3set","v3sub","v3zero","v4mulAdd","v4zero","mn","half_vec","zero_vec","identity_mat3","identity_mat4","xaxis","yaxis","zaxis","it","imageW","imageH","main","glov_local_storage","glov_sprite_animation","glov_ui_test","BACKGROUND","SPRITES","PARTICLES","UI_TEST","flags","flagGet","dflt","flagToggle","flagSet","perfTestSprites","subc","_idx","createSprite","createAnimation","color_red","color_yellow","sprite_size","initGraphics","test_tint","animation","idle_left","idle_right","game_bg","last_particles","color_sprite","character","bounds","font_test_idx","button_spacing","playMusic","createSystem","explosion","testInit","part0","max_parts","exp","debug","errorobj","stack","debugmsg","nop","easeInOut","easeIn","defaults","mix","sign","ridx","round100","round1000","titleCase","lineCircleIntersect","va","dest","hasOwnProperty","tol","toUpperCase","EPSILON","p1","p2","pCircle","radius","dp","bb4ac","mu1","mu2"],"mappings":"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","file":"wrapper.bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","module.exports = create\n\n/**\n * Creates a new identity mat3\n *\n * @alias mat3.create\n * @returns {mat3} a new 3x3 matrix\n */\nfunction create() {\n  var out = new Float32Array(9)\n  out[0] = 1\n  out[1] = 0\n  out[2] = 0\n  out[3] = 0\n  out[4] = 1\n  out[5] = 0\n  out[6] = 0\n  out[7] = 0\n  out[8] = 1\n  return out\n}\n","module.exports = fromMat4\n\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @alias mat3.fromMat4\n * @param {mat3} out the receiving 3x3 matrix\n * @param {mat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\nfunction fromMat4(out, a) {\n  out[0] = a[0]\n  out[1] = a[1]\n  out[2] = a[2]\n  out[3] = a[4]\n  out[4] = a[5]\n  out[5] = a[6]\n  out[6] = a[8]\n  out[7] = a[9]\n  out[8] = a[10]\n  return out\n}\n","module.exports = copy;\n\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nfunction copy(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n};","module.exports = create;\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\nfunction create() {\n    var out = new Float32Array(16);\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n};","module.exports = invert;\n\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nfunction invert(out, a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15],\n\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32,\n\n        // Calculate the determinant\n        det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n    if (!det) { \n        return null; \n    }\n    det = 1.0 / det;\n\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n\n    return out;\n};","module.exports = multiply;\n\n/**\n * Multiplies two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nfunction multiply(out, a, b) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n    // Cache only the current line of the second matrix\n    var b0  = b[0], b1 = b[1], b2 = b[2], b3 = b[3];  \n    out[0] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[1] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[2] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[3] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[4]; b1 = b[5]; b2 = b[6]; b3 = b[7];\n    out[4] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[5] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[6] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[7] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[8]; b1 = b[9]; b2 = b[10]; b3 = b[11];\n    out[8] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[9] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[10] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[11] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[12]; b1 = b[13]; b2 = b[14]; b3 = b[15];\n    out[12] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[13] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[14] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[15] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n    return out;\n};","module.exports = perspective;\n\n/**\n * Generates a perspective projection matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nfunction perspective(out, fovy, aspect, near, far) {\n    var f = 1.0 / Math.tan(fovy / 2),\n        nf = 1 / (near - far);\n    out[0] = f / aspect;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = f;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = (far + near) * nf;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = (2 * far * near) * nf;\n    out[15] = 0;\n    return out;\n};","module.exports = transpose;\n\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nfunction transpose(out, a) {\n    // If we are transposing ourselves we can skip a few steps but have to cache some values\n    if (out === a) {\n        var a01 = a[1], a02 = a[2], a03 = a[3],\n            a12 = a[6], a13 = a[7],\n            a23 = a[11];\n\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a01;\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a02;\n        out[9] = a12;\n        out[11] = a[14];\n        out[12] = a03;\n        out[13] = a13;\n        out[14] = a23;\n    } else {\n        out[0] = a[0];\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a[1];\n        out[5] = a[5];\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a[2];\n        out[9] = a[6];\n        out[10] = a[10];\n        out[11] = a[14];\n        out[12] = a[3];\n        out[13] = a[7];\n        out[14] = a[11];\n        out[15] = a[15];\n    }\n    \n    return out;\n};","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint no-shadow:off */\n\nconst engine = require('./engine.js');\n\nconst { round } = Math;\n\nexport const data = new Float32Array(9); // x0, y0, x1, y1, x_scale, y_scale, css_to_real\n\nlet screen_width;\nlet screen_height;\n// Note: render_* not used by FRVR at this time\nlet render_width;\nlet render_height;\nexport let render_viewport_w;\nexport let render_viewport_h;\nexport let render_offset_x;\nexport let render_offset_y;\n\nfunction reapply() {\n  if (render_width) {\n    data[4] = render_width / (data[2] - data[0]);\n    data[5] = render_height / (data[3] - data[1]);\n    data[7] = (data[2] - data[0]) / render_viewport_w;\n    data[8] = (data[3] - data[1]) / render_viewport_h;\n  } else {\n    data[4] = screen_width / (data[2] - data[0]);\n    data[5] = screen_height / (data[3] - data[1]);\n  }\n}\n\n// To get to coordinates used by OpenGL / canvas\nexport function virtualToCanvas(dst, src) {\n  dst[0] = (src[0] - data[0]) * data[4];\n  dst[1] = (src[1] - data[1]) * data[5];\n}\n\n// Sets the 2D \"camera\" used to translate sprite positions to screen space.  Affects sprites queued\n//  after this call\nexport function set(x0, y0, x1, y1) {\n  data[0] = x0;\n  data[1] = y0;\n  data[2] = x1;\n  data[3] = y1;\n  reapply();\n}\n\n// Drawing area 0,0-w,h\n// But keep the aspect ratio of those things drawn to be correct\n// This may create a padding or margin on either top and bottom or sides of the screen\n// User users constant values in this range for consistent UI on all devices\nexport function setAspectFixed(w, h) {\n  let pa = engine.render_width ? 1 : engine.pixel_aspect;\n  let inv_aspect = h / pa / w;\n  let inv_desired_aspect;\n  if (render_width) {\n    inv_desired_aspect = render_height / render_width;\n  } else {\n    inv_desired_aspect = screen_height / screen_width;\n  }\n  if (inv_aspect > inv_desired_aspect) {\n    let margin = (h / pa / inv_desired_aspect - w) / 2;\n    set(-margin, 0, w + margin, h);\n  } else {\n    let margin = (w * pa * inv_desired_aspect - h) / 2;\n    set(0, -margin, w, h + margin);\n  }\n}\n\n// Primary drawing area at least W x H\n// But keep the aspect ratio of those things drawn to be correct\n// Similar to setAspectFixed() but keeps (0,0) in the upper left (all padding\n//   is added to right and bottom)\n// Requires users to use camera2d.w()/ and camera2d.h() to determine reasonable\n//   UI positioning\nexport function setAspectFixed2(w, h) {\n  let pa = engine.render_width ? 1 : engine.pixel_aspect;\n  let inv_aspect = h / pa / w;\n  let inv_desired_aspect;\n  if (render_width) {\n    inv_desired_aspect = render_height / render_width;\n  } else {\n    inv_desired_aspect = screen_height / screen_width;\n  }\n  if (inv_aspect > inv_desired_aspect) {\n    let margin = h / pa / inv_desired_aspect - w;\n    set(0, 0, w + margin, h);\n  } else {\n    let margin = w * pa * inv_desired_aspect - h;\n    set(0, 0, w, h + margin);\n  }\n}\n\nexport function zoom(x, y, factor) {\n  let inv_factor = 1.0 / factor;\n  set(x - (x - data[0]) * inv_factor, y - (y - data[1]) * inv_factor, x + (data[2] - x) * inv_factor, y + (data[3] - y) * inv_factor);\n}\n\nexport function setNormalized() {\n  set(0, 0, 1, 1);\n}\n\nexport function x0() {\n  return data[0];\n}\nexport function y0() {\n  return data[1];\n}\nexport function x1() {\n  return data[2];\n}\nexport function y1() {\n  return data[3];\n}\nexport function w() {\n  return data[2] - data[0];\n}\nexport function h() {\n  return data[3] - data[1];\n}\nexport function xScale() {\n  return data[4];\n}\nexport function yScale() {\n  return data[5];\n}\n\nexport function htmlPos(x, y) {\n  if (render_width) {\n    return [100 * (((x - data[0]) / data[7] + render_offset_x) / screen_width), 100 * (((y - data[1]) / data[8] + render_offset_y) / screen_height)];\n  } else {\n    return [100 * (x - data[0]) / (data[2] - data[0]), 100 * (y - data[1]) / (data[3] - data[1])];\n  }\n}\nexport function htmlSize(w, h) {\n  if (render_width) {\n    return [100 * w / data[7] / screen_width, 100 * h / data[8] / screen_height];\n  } else {\n    return [100 * w / (data[2] - data[0]), 100 * h / (data[3] - data[1])];\n  }\n}\n\nexport function physicalToVirtual(dst, src) {\n  if (render_width) {\n    dst[0] = (src[0] * data[6] - render_offset_x) * data[7] + data[0];\n    dst[1] = (src[1] * data[6] - render_offset_y) * data[8] + data[1];\n  } else {\n    dst[0] = src[0] * data[6] / data[4] + data[0];\n    dst[1] = src[1] * data[6] / data[5] + data[1];\n  }\n}\n\nexport function physicalDeltaToVirtual(dst, src) {\n  if (render_width) {\n    dst[0] = src[0] * data[6] * data[7];\n    dst[1] = src[1] * data[6] * data[8];\n  } else {\n    dst[0] = src[0] * data[6] / data[4];\n    dst[1] = src[1] * data[6] / data[5];\n  }\n}\n\n// To get to coordinates used by mouse events\nexport function virtualToPhysical(dst, src) {\n  if (render_width) {\n    dst[0] = (render_offset_x + (src[0] - data[0]) / data[7]) / data[6];\n    dst[1] = (render_offset_y + (src[1] - data[1]) / data[8]) / data[6];\n  } else {\n    dst[0] = (src[0] - data[0]) * data[4] / data[6];\n    dst[1] = (src[1] - data[1]) * data[5] / data[6];\n  }\n}\n\nexport function tickCamera2D() {\n  data[6] = window.devicePixelRatio || 1; /* css_to_real */\n  screen_width = engine.width;\n  screen_height = engine.height;\n  let viewport = [0, 0, screen_width, screen_height];\n  if (engine.render_width) {\n    // Note: render_* not used by FRVR at this time\n    render_width = engine.render_width;\n    render_height = engine.render_height;\n    // Find an offset so this rendered viewport is centered while preserving aspect ratio, just like setAspectFixed\n    let pa = engine.pixel_aspect;\n    let inv_aspect = render_height / pa / render_width;\n    let inv_desired_aspect = screen_height / screen_width;\n    if (inv_aspect > inv_desired_aspect) {\n      let margin = (render_height / inv_desired_aspect - render_width * pa) / 2 * screen_height / render_height;\n      render_offset_x = round(margin);\n      render_offset_y = 0;\n      render_viewport_w = round(screen_width - margin * 2);\n      render_viewport_h = screen_height;\n    } else {\n      let margin = (render_width * inv_desired_aspect - render_height / pa) / 2 * screen_width / render_width;\n      render_offset_x = 0;\n      render_offset_y = round(margin);\n      render_viewport_w = screen_width;\n      render_viewport_h = round(screen_height - margin * 2);\n    }\n    viewport[2] = render_width;\n    viewport[3] = render_height;\n  } else {\n    render_width = render_height = 0;\n    render_offset_x = 0;\n    render_offset_y = 0;\n  }\n\n  reapply();\n\n  // let screen_width = engine.width;\n  // let screen_height = engine.height;\n  // let screen_aspect = screen_width / screen_height;\n  // let view_aspect = game_width / game_height;\n  // if (screen_aspect > view_aspect) {\n  //   let viewport_width = game_height * screen_aspect;\n  //   let half_diff = (viewport_width - game_width) / 2;\n  //   viewportRectangle = [-half_diff, 0, game_width + half_diff, game_height];\n  // } else {\n  //   let viewport_height = game_width / screen_aspect;\n  //   let half_diff = (viewport_height - game_height) / 2;\n  //   viewportRectangle = [0, -half_diff, game_width, game_height + half_diff];\n  // }\n\n  engine.setViewport(viewport);\n}\n\nexport function startup() {\n  set(0, 0, engine.width, engine.height);\n  tickCamera2D();\n}","/* eslint-env jquery */\n/*global Z: false */\n\nconst camera2d = require('./camera2d.js');\nconst glov_input = require('./input.js');\nconst glov_ui = require('./ui.js');\n\nconst { focuslog } = glov_ui;\n\nclass GlovUIEditBox {\n  constructor(params) {\n    this.x = 0;\n    this.y = 0;\n    this.z = Z.UI; // actually in DOM, so above everything!\n    this.w = glov_ui.button_width;\n    this.type = 'text';\n    this.allow_modal = false;\n    // this.h = glov_ui.button_height;\n    this.font_height = glov_ui.font_height;\n    this.text = '';\n    this.placeholder = '';\n    this.initial_focus = false;\n    this.initial_select = false;\n    this.spellcheck = true;\n    this.applyParams(params);\n\n    this.got_focus_in = false;\n    this.got_focus_out = false;\n    this.elem = null;\n    this.input = null;\n    this.submitted = false;\n  }\n  applyParams(params) {\n    if (!params) {\n      return;\n    }\n    for (let f in params) {\n      this[f] = params[f];\n    }\n  }\n  getText() {\n    return this.text;\n  }\n  setText(new_text) {\n    if (this.input) {\n      this.input.value = new_text;\n    }\n    this.text = new_text;\n  }\n  focus() {\n    glov_ui.focusSteal(this);\n  }\n\n  updateFocus() {\n    if (this.got_focus_out) {\n      if (glov_ui.isFocusedPeek(this)) {\n        glov_input.keyDownEdge(glov_input.KEYS.TAB); // eat the TAB\n        if (glov_input.keyDown(glov_input.KEYS.SHIFT)) {\n          glov_ui.focusPrev(this);\n        } else {\n          glov_ui.focusNext(this);\n        }\n      }\n      this.got_focus_out = false;\n    }\n    if (this.got_focus_in) {\n      glov_input.keyDownEdge(glov_input.KEYS.TAB); // eat the TAB\n      glov_ui.focusSteal(this);\n      this.got_focus_in = false;\n    }\n    let focused = glov_ui.focusCheck(this);\n    if (focused && this.input && document.activeElement !== this.input) {\n      this.input.focus();\n    }\n    if (!focused && this.input && document.activeElement === this.input) {\n      this.input.blur();\n    }\n\n    if (focused && glov_input.keyDownEdge(glov_input.KEYS.ESC)) {\n      if (this.text) {\n        this.setText('');\n      } else {\n        glov_ui.focusCanvas();\n      }\n    }\n    return focused;\n  }\n\n  run(params) {\n    this.applyParams(params);\n    let focused = this.updateFocus();\n\n    glov_ui.this_frame_edit_boxes.push(this);\n    let elem = glov_ui.getElem(this.allow_modal);\n    if (elem !== this.elem) {\n      if (elem) {\n        // new DOM element, initialize\n        elem.textContent = '';\n        let form = document.createElement('form');\n        let input = document.createElement('input');\n        input.setAttribute('type', this.type);\n        input.setAttribute('placeholder', this.placeholder);\n        input.setAttribute('tabindex', 2);\n        input.addEventListener('focusin', ev => {\n          focuslog('EditBox:focusin', this);\n          this.got_focus_in = true;\n          ev.preventDefault();\n        }, true);\n        input.addEventListener('focusout', ev => {\n          focuslog('EditBox:focusout', this);\n          this.got_focus_out = true;\n          ev.preventDefault();\n        }, true);\n        form.addEventListener('submit', ev => {\n          ev.preventDefault();\n          this.submitted = true;\n        }, true);\n        form.appendChild(input);\n        let span = document.createElement('span');\n        span.setAttribute('tabindex', 3);\n        form.appendChild(span);\n        elem.appendChild(form);\n        input.value = this.text;\n        this.input = input;\n        if (this.initial_focus) {\n          input.focus();\n        }\n        if (this.initial_select) {\n          input.select();\n        }\n      } else {\n        this.input = null;\n      }\n      this.submitted = false;\n      this.elem = elem;\n    } else {\n      if (this.input) {\n        this.text = this.input.value;\n      }\n    }\n    if (elem) {\n      let pos = camera2d.htmlPos(this.x, this.y);\n      if (!this.spellcheck) {\n        elem.spellcheck = false;\n      }\n      elem.style.left = `${pos[0]}%`;\n      elem.style.top = `${pos[1]}%`;\n      let size = camera2d.htmlSize(this.w, this.h);\n      elem.style.width = `${size[0]}%`;\n      if (this.font_height !== glov_ui.font_height) {\n        elem.style.fontSize = `${(this.font_height / glov_ui.font_height).toFixed(2)}em`;\n      }\n    }\n\n    if (focused) {\n      // keyboard input is handled by the INPUT element, but allow mouse events to trickle\n      glov_input.eatAllKeyboardInput();\n    }\n\n    if (this.submitted) {\n      this.submitted = false;\n      return this.SUBMIT;\n    }\n    return null;\n  }\n  unrun() {\n    // remove from DOM or hide\n    this.elem = null;\n    this.input = null;\n  }\n}\nGlovUIEditBox.prototype.SUBMIT = 'submit';\n\nexport function create(params) {\n  return new GlovUIEditBox(params);\n}","\nconst engine = require('./engine.js'); // Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n// Some code from Turbulenz: Copyright (c) 2012-2013 Turbulenz Limited\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst geom = require('./geom.js');\nconst shaders = require('./shaders.js');\nconst textures = require('./textures.js');\n\nconst { vec2, vec4, v4set } = require('./vmath.js');\n\nconst shader_data = {\n  vp_copy: {\n    vp: '#pragma WebGL\\nprecision highp float;\\n\\nvarying vec2 interp_texcoord;\\nattribute vec2 POSITION;\\n\\nuniform vec2 copy_uv_scale;\\nuniform vec4 clip_space;\\n\\nvoid main()\\n{\\n  interp_texcoord = POSITION * copy_uv_scale;\\n  gl_Position = vec4(POSITION * clip_space.xy + clip_space.zw, 0, 1);\\n}'\n  },\n  copy: {\n    fp: '#pragma WebGL\\n\\nprecision highp float;\\nprecision highp int;\\n\\nvarying vec2 interp_texcoord;\\n\\nuniform sampler2D inputTexture0;\\nvoid main()\\n{\\n  gl_FragColor = texture2D(inputTexture0, interp_texcoord);\\n}\\n'\n  },\n  pixely_expand: {\n    fp: '// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\\n// Released under MIT License: https://opensource.org/licenses/MIT\\n#pragma WebGL\\n\\nprecision mediump float;\\nprecision mediump int;\\n\\nvarying highp vec2 interp_texcoord;\\nuniform sampler2D inputTexture0; // source\\nuniform sampler2D inputTexture1; // hblur\\nuniform sampler2D inputTexture2; // hblur+vblur\\nuniform vec4 orig_pixel_size;\\n\\n// 1D Gaussian.\\nfloat Gaus(float pos, float scale) {\\n  return exp2(scale*pos*pos);\\n}\\n\\nconst float SHADE = 0.75;\\nconst float EASING = 1.25;\\n\\n#define DO_WARP\\n#ifdef DO_WARP\\n// Display warp.\\n// 0.0 = none\\n// 1.0/8.0 = extreme\\nconst vec2 WARP=vec2(1.0/32.0,1.0/24.0);\\n\\n// Distortion of scanlines, and end of screen alpha.\\nvec2 Warp(vec2 pos){\\n  pos=pos*2.0-1.0;\\n  pos*=vec2(1.0+(pos.y*pos.y)*WARP.x,1.0+(pos.x*pos.x)*WARP.y);\\n  return pos*0.5+0.5;\\n}\\n#else\\n#define Warp(v) v\\n#endif\\n\\nfloat easeInOut(float v) {\\n  float va = pow(v, EASING);\\n  return va / (va + pow((1.0 - v), EASING));\\n}\\n\\nfloat easeIn(float v) {\\n  return 2.0 * easeInOut(0.5 * v);\\n}\\n\\nfloat easeOut(float v) {\\n  return 2.0 * easeInOut(0.5 + 0.5 * v) - 1.0;\\n}\\n\\nvoid main()\\n{\\n  vec2 texcoords = Warp(interp_texcoord);\\n  vec2 intcoords = (floor(texcoords.xy * orig_pixel_size.xy) + 0.5) * orig_pixel_size.zw;\\n  vec2 deltacoords = (texcoords.xy - intcoords) * orig_pixel_size.xy; // -0.5 ... 0.5\\n  // for horizontal sampling, map [-0.5 .. -A .. A .. 0.5] -> [-0.5 .. 0 .. 0 .. 0.5];\\n  float A = 0.25;\\n  float Ainv = (0.5 - A) * 2.0;\\n  float uoffs = clamp((abs(deltacoords.x) - A) / Ainv, 0.0, 1.0) * orig_pixel_size.z;\\n  uoffs *= sign(deltacoords.x);\\n  vec2 sample_coords = vec2(intcoords.x + uoffs, intcoords.y);\\n  // sample_coords = intcoords;\\n  vec3 color = texture2D(inputTexture1, sample_coords).rgb;\\n  vec3 color_scanline = texture2D(inputTexture2, texcoords.xy + vec2(0.0, 0.5 * orig_pixel_size.w)).rgb * SHADE;\\n  // color_scanline = vec3(0);\\n\\n  // float mask = Gaus(deltacoords.y, -12.0);\\n  float mask = easeOut(2.0*(0.5 - abs(deltacoords.y)));\\n  // float mask = abs(deltacoords.y) > 0.25 ? 0.0 : 1.0;\\n  color = mix(color_scanline, color, mask);\\n  // color = vec3(mask);\\n\\n#ifdef DO_WARP\\n  // vignette\\n  float dist = min(1.0, 100.0 * min(0.5 - abs(texcoords.x - 0.5), 0.5 - abs(texcoords.y - 0.5)));\\n  color *= dist;\\n#endif\\n\\n  gl_FragColor = vec4(color, 1.0);\\n  // gl_FragColor = vec4(color_scanline, 1.0);\\n  // gl_FragColor = vec4(sample_coords, 0.0, 1.0);\\n}\\n'\n  },\n  gaussian_blur: {\n    fp: '#pragma WebGL\\n\\nprecision highp float;\\nprecision highp int;\\n\\nvarying vec2 interp_texcoord;\\n\\nvec4 _ret_0;\\nvec4 _TMP2;\\nvec4 _TMP1;\\nvec2 _c0022;\\nvec2 _c0024;\\nuniform vec2 sampleRadius;\\nuniform sampler2D inputTexture0;\\nuniform float Gauss[9];\\n\\nvoid main()\\n{\\n  vec2 uv = interp_texcoord;\\n  vec2 step = sampleRadius;\\n  gl_FragColor =\\n    ((texture2D(inputTexture0, uv - step * 3.0) + texture2D(inputTexture0, uv + step * 3.0)) * 0.085625 +\\n    (texture2D(inputTexture0, uv - step * 2.0) + texture2D(inputTexture0, uv + step * 2.0)) * 0.12375 +\\n    (texture2D(inputTexture0, uv - step * 1.0) + texture2D(inputTexture0, uv + step * 1.0)) * 0.234375 +\\n    texture2D(inputTexture0, uv) * 0.3125) * 0.83333333333333333333333333333333;\\n}\\n'\n  },\n  // bloom_merge: {\n  //   fp: fs.readFileSync(`${__dirname}/shaders/effects_bloom_merge.fp`, 'utf8'),\n  // },\n  // bloom_threshold: {\n  //   fp: fs.readFileSync(`${__dirname}/shaders/effects_bloom_threshold.fp`, 'utf8'),\n  // },\n  color_matrix: {\n    fp: '#pragma WebGL\\n\\nprecision highp float;\\n\\nvarying vec2 interp_texcoord;\\n\\nuniform vec4 colorMatrix[3];\\nuniform sampler2D tex0;\\n\\nvoid main()\\n{\\n  vec4 _color;\\n  vec4 _mutc;\\n  _color = texture2D(tex0, interp_texcoord);\\n  _mutc = _color;\\n  _mutc.w = 1.0;\\n  vec3 _r0019;\\n  _r0019.x = dot(colorMatrix[0], _mutc);\\n  _r0019.y = dot(colorMatrix[1], _mutc);\\n  _r0019.z = dot(colorMatrix[2], _mutc);\\n  _mutc.xyz = _r0019;\\n  _mutc.w = _color.w;\\n  gl_FragColor = _mutc;\\n}'\n  }\n  // distort: {\n  //   fp: fs.readFileSync(`${__dirname}/shaders/effects_distort.fp`, 'utf8'),\n  // },\n};\n\nfunction getShader(key) {\n  let elem = shader_data[key];\n  if (!elem.shader) {\n    if (elem.fp) {\n      elem.shader = shaders.create(gl.FRAGMENT_SHADER, elem.fp);\n    } else {\n      elem.shader = shaders.create(gl.VERTEX_SHADER, elem.vp);\n    }\n  }\n  return elem.shader;\n}\n\nlet inited = false;\nlet clip_space = vec4(2, 2, -1, -1);\nlet copy_uv_scale = vec2(1, 1);\nlet shader_params_default = {\n  clip_space,\n  copy_uv_scale\n};\n// let shader_params_distort;\nlet shader_params_color_matrix;\n// let shader_params_bloom;\n// let shader_params_bloom_merge;\nlet shader_params_gaussian_blur;\nlet shader_params_pixely_expand;\nlet quad_geom;\nfunction startup() {\n  inited = true;\n\n  quad_geom = geom.create([[shaders.semantic.POSITION, gl.FLOAT, 2, false]], new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]), null, geom.QUADS); // TODO: use gl.TRIANGLE_STRIP instead, save index buffer binding\n\n  // shader_params_distort = {\n  //   clip_space,\n  //   copy_uv_scale,\n  //   strength: vec2(0, 0),\n  //   transform: new Float32Array([0, 0, 0, 0, 0, 0]),\n  //   invTransform: vec4(0, 0, 0, 0),\n  // };\n\n  shader_params_color_matrix = {\n    clip_space,\n    copy_uv_scale,\n    colorMatrix: new Float32Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])\n  };\n\n  // shader_params_bloom = {\n  //   clip_space,\n  //   copy_uv_scale,\n  //   bloomThreshold: 0,\n  //   thresholdCuttoff: 0,\n  // };\n\n  // shader_params_bloom_merge = {\n  //   clip_space,\n  //   copy_uv_scale,\n  //   bloomIntensity: 0,\n  //   bloomSaturation: 0,\n  //   originalIntensity: 0,\n  //   originalSaturation: 0,\n  // };\n\n  // Gaussian Blur effect (also used by bloom)\n  shader_params_gaussian_blur = {\n    clip_space,\n    copy_uv_scale,\n    sampleRadius: vec2(1, 1),\n    Gauss: new Float32Array([0.93, 0.8, 0.7, 0.6, 0.5, 0.4, 0.3, 0.2, 0.1])\n  };\n\n  shader_params_pixely_expand = {\n    clip_space,\n    copy_uv_scale,\n    orig_pixel_size: vec4()\n  };\n}\n\nexport function grayScaleMatrix(dst) {\n  dst[0] = 0.2126;\n  dst[1] = 0.2126;\n  dst[2] = 0.2126;\n  dst[3] = 0.7152;\n  dst[4] = 0.7152;\n  dst[5] = 0.7152;\n  dst[6] = 0.0722;\n  dst[7] = 0.0722;\n  dst[8] = 0.0722;\n  dst[9] = dst[10] = dst[11] = 0;\n}\n\nexport function sepiaMatrix(dst) {\n  dst[0] = 0.393;\n  dst[1] = 0.349;\n  dst[2] = 0.272;\n  dst[3] = 0.769;\n  dst[4] = 0.686;\n  dst[5] = 0.534;\n  dst[6] = 0.189;\n  dst[7] = 0.168;\n  dst[8] = 0.131;\n  dst[9] = dst[10] = dst[11] = 0;\n}\n\nexport function negativeMatrix(dst) {\n  dst[0] = dst[4] = dst[8] = -1;\n  dst[1] = dst[2] = dst[3] = dst[5] = dst[6] = dst[7] = 0;\n  dst[9] = dst[10] = dst[11] = 1;\n}\n\nexport function saturationMatrix(dst, saturationScale) {\n  let is = 1 - saturationScale;\n  dst[0] = is * 0.2126 + saturationScale;\n  dst[1] = is * 0.2126;\n  dst[2] = is * 0.2126;\n  dst[3] = is * 0.7152;\n  dst[4] = is * 0.7152 + saturationScale;\n  dst[5] = is * 0.7152;\n  dst[6] = is * 0.0722;\n  dst[7] = is * 0.0722;\n  dst[8] = is * 0.0722 + saturationScale;\n  dst[9] = dst[10] = dst[11] = 0;\n}\n\nexport function hueMatrix(dst, angle) {\n  ////\n  //// Uncomment to calculate new coeffecients should luminance\n  //// values 0.2126 0.7152 0.0722 change.\n  //let lumR = 0.2126;\n  //let lumG = 0.7152;\n  //let lumB = 0.0722;\n  ////\n  //let r23 = Math.sqrt(2 / 3);\n  //let r12 = 1 / Math.sqrt(2);\n  //let r13 = 1 / Math.sqrt(3);\n  //let r16 = 1 / Math.sqrt(6);\n  //let M = [r23, 0, r13, -r16, r12, r13, -r16, -r12, r13, 0, 0, 0];\n  //let zx = (r23 * lumR) - (r16 * lumG) - (r16 * lumB);\n  //let zy =                (r12 * lumG) - (r12 * lumB);\n  //let zz = (r13 * lumR) + (r13 * lumG) + (r13 * lumB);\n  //let x = zx / zz;\n  //let y = zy / zz;\n  //let C = [1, 0, x, 0, 1, y, 0, 0, 1, 0, 0, 0];\n  //m43mul(M, M, C);\n  //console.log(\"Pre transform = \", M);\n  //let E = [1, 0, -x, 0, 1, -y, 0, 0, 1, 0, 0, 0];\n  //let N = [r23, -r16, -r16, 0, r12, -r12, r13, r13, r13, 0, 0, 0];\n  //m43mul(N, E, N);\n  //console.log(\"Post transform = \", N);\n  ////\n  //// Final matrix is then: m43Mul(Pre, [c, s, 0, -s, c, 0, 0, 0, 1, 0, 0, 0, ], Post);\n  //// for c = cos(angle), s = sin(angle)\n  ////\n  //let out = \"\";\n  //out += \"let c = Math.cos(angle);\\n\";\n  //out += \"let s = Math.sin(angle);\\n\";\n  //out += \"dst[0] = (\" + (N[0]*M[0]+N[3]*M[1]) + \" * c) + (\" + (N[3]*M[0]-N[0]*M[1]) + \" * s) + \" + lumR+\";\\n\";\n  //out += \"dst[1] = (\" + (-lumR)               + \" * c) + (\" + (N[4]*M[0]-N[1]*M[1]) + \" * s) + \" + lumR+\";\\n\";\n  //out += \"dst[2] = (\" + (-lumR)               + \" * c) + (\" + (N[5]*M[0]-N[2]*M[1]) + \" * s) + \" + lumR+\";\\n\";\n  //out += \"dst[3] = (\" + (-lumG)               + \" * c) + (\" + (N[3]*M[3]-N[0]*M[4]) + \" * s) + \" + lumG+\";\\n\";\n  //out += \"dst[4] = (\" + (N[1]*M[3]+N[4]*M[4]) + \" * c) + (\" + (N[4]*M[3]-N[1]*M[4]) + \" * s) + \" + lumG+\";\\n\";\n  //out += \"dst[5] = (\" + (-lumG)               + \" * c) + (\" + (N[5]*M[3]-N[2]*M[4]) + \" * s) + \" + lumG+\";\\n\";\n  //out += \"dst[6] = (\" + (-lumB)               + \" * c) + (\" + (N[3]*M[6]-N[0]*M[7]) + \" * s) + \" + lumB+\";\\n\";\n  //out += \"dst[7] = (\" + (-lumB)               + \" * c) + (\" + (N[4]*M[6]-N[1]*M[7]) + \" * s) + \" + lumB+\";\\n\";\n  //out += \"dst[8] = (\" + (N[2]*M[6]+N[5]*M[7]) + \" * c) + (\" + (N[5]*M[6]-N[2]*M[7]) + \" * s) + \" + lumB+\";\\n\";\n  //console.log(out);\n  let c = Math.cos(angle);\n  let s = Math.sin(angle);\n  dst[0] = 0.7874 * c + -0.3712362230889293 * s + 0.2126;\n  dst[1] = -0.2126 * c + 0.20611404610069642 * s + 0.2126;\n  dst[2] = -0.2126 * c + -0.9485864922785551 * s + 0.2126;\n  dst[3] = -0.7152 * c + -0.4962902913954023 * s + 0.7152;\n  dst[4] = 0.2848 * c + 0.08105997779422341 * s + 0.7152;\n  dst[5] = -0.7152 * c + 0.6584102469838492 * s + 0.7152;\n  dst[6] = -0.0722 * c + 0.8675265144843316 * s + 0.0722;\n  dst[7] = -0.0722 * c + -0.28717402389491986 * s + 0.0722;\n  dst[8] = 0.9278 * c + 0.290176245294706 * s + 0.0722;\n  dst[9] = dst[10] = dst[11] = 0;\n}\n\nexport function brightnessAddMatrix(dst, brightnessOffset) {\n  dst[0] = dst[4] = dst[8] = 1;\n  dst[1] = dst[2] = dst[3] = dst[5] = dst[6] = dst[7] = 0;\n  dst[9] = dst[10] = dst[11] = brightnessOffset;\n}\n\nexport function brightnessScaleMatrix(dst, scale) {\n  dst[0] = dst[4] = dst[8] = scale;\n  dst[1] = dst[2] = dst[3] = dst[5] = dst[6] = dst[7] = 0;\n  dst[9] = dst[10] = dst[11] = 0;\n}\n\nexport function additiveMatrix(dst, additiveRGB) {\n  dst[0] = dst[4] = dst[8] = 1;\n  dst[1] = dst[2] = dst[3] = dst[5] = dst[6] = dst[7] = 0;\n  dst[9] = additiveRGB[0];\n  dst[10] = additiveRGB[1];\n  dst[11] = additiveRGB[2];\n}\n\nexport function contrastMatrix(dst, contrastScale) {\n  dst[0] = dst[4] = dst[8] = contrastScale;\n  dst[1] = dst[2] = dst[3] = dst[5] = dst[6] = dst[7] = 0;\n  dst[9] = dst[10] = dst[11] = 0.5 * (1 - contrastScale);\n}\n\n// effect: { shader, params, texs }\nfunction applyEffect(effect, view_w, view_h) {\n  let viewport = engine.viewport;\n  let target_w = viewport[2];\n  let target_h = viewport[3];\n  view_w = view_w || target_w;\n  view_h = view_h || target_h;\n\n  // Set values for parameters used by all effects\n  clip_space[0] = 2.0 * view_w / target_w;\n  clip_space[1] = 2.0 * view_h / target_h;\n  // clip_space[2] = -1.0;\n  // clip_space[3] = -1.0;\n  // copy_uv_scale[0] = target_w / effect.coord_source.width;\n  // copy_uv_scale[1] = target_h / effect.coord_source.height;\n\n  shaders.bind(getShader('vp_copy'), getShader(effect.shader), effect.params);\n  textures.bindArray(effect.texs);\n  quad_geom.draw();\n}\n\n// // TODO: Update for RTBBCTT and port to new GLOV.js\n// function applyBloomTODO(params) {\n//   let source = params.source;\n//   let blur1 = params.blurTarget1;\n//   let blur2 = params.blurTarget2;\n//   let dest = params.destination;\n//   if (!source || !dest || !blur1 || !blur2 || !blur1.colorTexture0 ||\n//     !blur2.colorTexture0 || blur1 === blur2 || blur1 === dest ||\n//     source === blur1.colorTexture0 || source === dest.colorTexture0) {\n//     return false;\n//   }\n//\n//   let effectParams = this.effectParams;\n//   let techparams;\n//\n//   // Threshold copy.\n//   techparams = this.bloomThresholdParameters;\n//   effectParams.technique = this.bloomThresholdTechnique;\n//   effectParams.params = techparams;\n//\n//   techparams.bloomThreshold = (params.bloomThreshold !== undefined) ? params.bloomThreshold : 0.65;\n//   techparams.thresholdCutoff = Math.exp((params.thresholdCutoff !== undefined) ? params.thresholdCutoff : 3);\n//   techparams.inputTexture0 = source;\n//   effectParams.destination = blur1;\n//   this.applyEffect(effectParams);\n//\n//   // Gaussian blur.\n//   techparams = this.gaussianBlurParameters;\n//   effectParams.technique = this.gaussianBlurTechnique;\n//   effectParams.params = techparams;\n//\n//   let sampleRadius = (params.blurRadius || 20);\n//   techparams.sampleRadius[0] = sampleRadius / source.width;\n//   techparams.sampleRadius[1] = 0;\n//   techparams.inputTexture0 = blur1.colorTexture0;\n//   effectParams.destination = blur2;\n//   this.applyEffect(effectParams);\n//\n//   techparams.sampleRadius[0] = 0;\n//   techparams.sampleRadius[1] = sampleRadius / source.height;\n//   techparams.inputTexture0 = blur2.colorTexture0;\n//   effectParams.destination = blur1;\n//   this.applyEffect(effectParams);\n//\n//   // Merge.\n//   techparams = this.bloomMergeParameters;\n//   effectParams.technique = this.bloomMergeTechnique;\n//   effectParams.params = techparams;\n//\n//   techparams.bloomIntensity = (params.bloomIntensity !== undefined) ? params.bloomIntensity : 1.2;\n//   techparams.bloomSaturation = (params.bloomSaturation !== undefined) ? params.bloomSaturation : 1.2;\n//   techparams.originalIntensity = (params.originalIntensity !== undefined) ? params.originalIntensity : 1.0;\n//   techparams.originalSaturation = (params.originalSaturation !== undefined) ? params.originalSaturation : 1.0;\n//   techparams.inputTexture0 = source;\n//   techparams.inputTexture1 = blur1.colorTexture0;\n//   effectParams.destination = dest;\n//   this.applyEffect(effectParams);\n//\n//   return true;\n// }\n\nexport function applyCopy(params) {\n  if (!inited) {\n    startup();\n  }\n  applyEffect({\n    shader: 'copy',\n    params: shader_params_default,\n    texs: [params.source]\n  });\n}\n\nexport function applyPixelyExpand(params) {\n  if (!inited) {\n    startup();\n  }\n  let source = params.source;\n  source.setSamplerState({\n    filter_min: gl.LINEAR,\n    filter_mag: gl.LINEAR,\n    wrap_s: gl.CLAMP_TO_EDGE,\n    wrap_t: gl.CLAMP_TO_EDGE\n  });\n\n  // do horizontal blur for primary lines\n  let resx = source.width;\n  let resy = source.height;\n  let sampleRadius = (params.hblur || 0.25) / resx;\n  shader_params_gaussian_blur.sampleRadius[0] = sampleRadius;\n  shader_params_gaussian_blur.sampleRadius[1] = 0;\n  applyEffect({\n    shader: 'gaussian_blur',\n    params: shader_params_gaussian_blur,\n    texs: [source]\n  }, resx, resy);\n  let hblur = engine.captureFramebuffer(null, resx, resy, true, false);\n\n  // do seperable gaussian blur for scanlines (using horizontal blur from above)\n  sampleRadius = (params.vblur || 0.75) / resy;\n  shader_params_gaussian_blur.sampleRadius[0] = 0;\n  shader_params_gaussian_blur.sampleRadius[1] = sampleRadius;\n  applyEffect({\n    shader: 'gaussian_blur',\n    params: shader_params_gaussian_blur,\n    texs: [hblur]\n  }, resx, resy);\n  let vblur = engine.captureFramebuffer(null, resx, resy, true, false);\n\n  // combine at full res\n  v4set(shader_params_pixely_expand.orig_pixel_size, source.width, source.height, 1 / source.width, 1 / source.height);\n\n  engine.setViewport(params.final_viewport);\n  if (params.clear_color) {\n    gl.clearColor(params.clear_color[0], params.clear_color[1], params.clear_color[2], params.clear_color[3]);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n  }\n\n  applyEffect({\n    shader: 'pixely_expand',\n    params: shader_params_pixely_expand,\n    texs: [source, hblur, vblur]\n  });\n}\n\nexport function applyGaussianBlur(params) {\n  if (!inited) {\n    startup();\n  }\n  let source = params.source;\n  source.setSamplerState({\n    filter_min: gl.LINEAR,\n    filter_mag: gl.LINEAR,\n    wrap_s: gl.CLAMP_TO_EDGE,\n    wrap_t: gl.CLAMP_TO_EDGE\n  });\n  let max_size = params.max_size || 512;\n  let min_size = params.min_size || 128;\n\n  // Quick shrink down to 512->256->128 (or other specified min/max size)\n  let inputTexture0 = source;\n\n  let viewport = engine.viewport;\n  let res = max_size;\n  while (res > viewport[2] || res > viewport[3]) {\n    res /= 2;\n  }\n\n  while (res > min_size) {\n    applyEffect({\n      shader: 'copy',\n      params: shader_params_default,\n      texs: [inputTexture0]\n    }, res, res);\n    inputTexture0 = engine.captureFramebuffer(null, res, res, true, false);\n    res /= 2;\n  }\n\n  // Do seperable blur\n  let sampleRadius = (params.blur || 1) / res;\n  shader_params_gaussian_blur.sampleRadius[0] = sampleRadius;\n  shader_params_gaussian_blur.sampleRadius[1] = 0;\n  applyEffect({\n    shader: 'gaussian_blur',\n    params: shader_params_gaussian_blur,\n    texs: [inputTexture0]\n  }, res, res);\n  let blur = engine.captureFramebuffer(null, res, res, true, false);\n\n  shader_params_gaussian_blur.sampleRadius[0] = 0;\n  shader_params_gaussian_blur.sampleRadius[1] = sampleRadius;\n  applyEffect({\n    shader: 'gaussian_blur',\n    params: shader_params_gaussian_blur,\n    texs: [blur]\n  });\n\n  return true;\n}\n\nexport function applyColorMatrix(params) {\n  if (!inited) {\n    startup();\n  }\n  let source = params.source;\n  source.setSamplerState({\n    filter_min: gl.LINEAR,\n    filter_mag: gl.LINEAR,\n    wrap_s: gl.CLAMP_TO_EDGE,\n    wrap_t: gl.CLAMP_TO_EDGE\n  });\n\n  let matrix = params.colorMatrix;\n  let mout = shader_params_color_matrix.colorMatrix;\n\n  mout[0] = matrix[0];\n  mout[1] = matrix[3];\n  mout[2] = matrix[6];\n  mout[3] = matrix[9];\n  mout[4] = matrix[1];\n  mout[5] = matrix[4];\n  mout[6] = matrix[7];\n  mout[7] = matrix[10];\n  mout[8] = matrix[2];\n  mout[9] = matrix[5];\n  mout[10] = matrix[8];\n  mout[11] = matrix[11];\n\n  applyEffect({\n    shader: 'color_matrix',\n    params: shader_params_color_matrix,\n    texs: [source]\n  });\n\n  return true;\n}\n\n// // TODO: Update for RTBBCTT and port to new GLOV.js\n// export function applyDistortTODO(params) {\n//   let source = params.source;\n//   let dest = params.destination;\n//   let distort = params.distortion;\n//   if (!source || !dest || !distort || !dest.colorTexture0 ||\n//     source === dest.colorTexture0 || distort === dest.colorTexture0) {\n//     return false;\n//   }\n//\n//   // input transform.\n//   //  a b tx\n//   //  c d ty\n//   let a;\n//   let b;\n//   let c;\n//   let d;\n//   let tx;\n//   let ty;\n//\n//   let transform = params.transform;\n//   if (transform) {\n//     // transform col-major.\n//     a = transform[0];\n//     b = transform[2];\n//     tx = transform[4];\n//     c = transform[1];\n//     d = transform[3];\n//     ty = transform[5];\n//   } else {\n//     a = d = 1;\n//     b = c = 0;\n//     tx = ty = 0;\n//   }\n//\n//   let effectParams = this.effectParams;\n//   let techparams = this.distortParameters;\n//   effectParams.technique = this.distortTechnique;\n//   effectParams.params = techparams;\n//\n//   // TODO: Cache 'transform', 'invTransform', etc in the code below\n//   techparams.transform[0] = a;\n//   techparams.transform[1] = b;\n//   techparams.transform[2] = tx;\n//   techparams.transform[3] = c;\n//   techparams.transform[4] = d;\n//   techparams.transform[5] = ty;\n//\n//   // Compute inverse transform to use in distort texture displacement..\n//   let idet = 1 / (a * d - b * c);\n//   let ia = techparams.invTransform[0] = (idet * d);\n//   let ib = techparams.invTransform[1] = (idet * -b);\n//   let ic = techparams.invTransform[2] = (idet * -c);\n//   let id = techparams.invTransform[3] = (idet * a);\n//\n//   // Compute max pixel offset after transform for normalisation.\n//   let x1 = ((ia + ib) * (ia + ib)) + ((ic + id) * (ic + id));\n//   let x2 = ((ia - ib) * (ia - ib)) + ((ic - id) * (ic - id));\n//   let x3 = ((-ia + ib) * (-ia + ib)) + ((-ic + id) * (-ic + id));\n//   let x4 = ((-ia - ib) * (-ia - ib)) + ((-ic - id) * (-ic - id));\n//   let xmax = 0.5 * Math.sqrt(Math.max(x1, x2, x3, x4));\n//\n//   let strength = (params.strength || 10);\n//   techparams.strength[0] = strength / (source.width * xmax);\n//   techparams.strength[1] = strength / (source.height * xmax);\n//\n//   techparams.inputTexture0 = source;\n//   techparams.distortTexture = distort; // linear / repeat\n//   effectParams.destination = dest;\n//   this.applyEffect(effectParams);\n//\n//   return true;\n// }","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\n/* eslint-env browser */\n/* global Z:false */\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst effects = require('./effects.js');\nconst glov_font = require('./font.js');\nconst font_info_palanquin32 = require('../img/font/palanquin32.json');\nconst geom = require('./geom.js');\nconst input = require('./input.js');\nconst local_storage = require('./local_storage.js');\nconst mat3FromMat4 = require('gl-mat3/fromMat4');\nconst mat4Copy = require('gl-mat4/copy');\nconst mat4Invert = require('gl-mat4/invert');\nconst mat4Mul = require('gl-mat4/multiply');\nconst mat4Transpose = require('gl-mat4/transpose');\nconst mat4Perspective = require('gl-mat4/perspective');\nconst { asin, cos, min, max, PI, sin, sqrt } = Math;\nconst models = require('./models.js');\nconst shaders = require('./shaders.js');\nconst sprites = require('./sprites.js');\nconst textures = require('./textures.js');\nconst glov_transition = require('./transition.js');\nconst glov_ui = require('./ui.js');\nconst { mat3, mat4, vec3, vec4, v3mulMat4, v3normalize, v4copy, v4set } = require('./vmath.js');\n\nexport let canvas;\nexport let glov_particles;\nexport let sound_manager;\n\nexport let width;\nexport let height;\nexport let pixel_aspect = 1;\nlet clear_bits;\n\nexport let game_width;\nexport let game_height;\n\nexport let render_width;\nexport let render_height;\n\nexport let defines = {};\n\nexport let any_3d = false;\nexport let ZFAR;\nexport let ZNEAR;\nexport const fov_y = 45 * PI / 180;\nexport let fov_x = 1;\n\nexport let mat_projection = mat4();\nexport let mat_view = mat4();\nlet mat_m = mat4();\nexport let mat_vp = mat4();\nlet mat_mv = mat4();\nlet mat_mv_no_skew = mat4();\nlet mat_mvp = mat4();\nlet mat_mv_inv_transform = mat3();\nlet projection_inverse = vec4();\n\nexport let light_diffuse = vec3(0.75, 0.75, 0.75);\nlet light_dir_vs = vec3(0, 0, 0);\nexport let light_ambient = vec3(0.25, 0.25, 0.25);\nexport let light_dir_ws = vec3(-1, -2, -3);\n\nexport let font;\nexport let app_state = null;\nexport const pico8_colors = [vec4(0, 0, 0, 1), vec4(0.114, 0.169, 0.326, 1), vec4(0.494, 0.145, 0.326, 1), vec4(0.000, 0.529, 0.328, 1), vec4(0.671, 0.322, 0.212, 1), vec4(0.373, 0.341, 0.310, 1), vec4(0.761, 0.765, 0.780, 1), vec4(1.000, 0.945, 0.910, 1), vec4(1.000, 0.000, 0.302, 1), vec4(1.000, 0.639, 0.000, 1), vec4(1.000, 0.925, 0.153, 1), vec4(0.000, 0.894, 0.212, 1), vec4(0.161, 0.678, 1.000, 1), vec4(0.514, 0.463, 0.612, 1), vec4(1.000, 0.467, 0.659, 1), vec4(1.000, 0.800, 0.667, 1)];\n\nexport let fps_style = glov_font.style({\n  outline_width: 2, outline_color: 0x00000080,\n  color: 0xFFFFFFff\n});\n\nexport function setGlobalMatrices(_mat_view) {\n  mat4Copy(mat_view, _mat_view);\n  mat4Mul(mat_vp, mat_projection, mat_view);\n  v3normalize(light_dir_ws, light_dir_ws);\n  v3mulMat4(light_dir_vs, light_dir_ws, mat_view);\n}\n\nfunction normalizeRow(m, idx) {\n  let len = m[idx] * m[idx] + m[idx + 1] * m[idx + 1] + m[idx + 2] * m[idx + 2];\n  if (len > 0) {\n    len = 1 / sqrt(len);\n    m[idx] *= len;\n    m[idx + 1] *= len;\n    m[idx + 2] *= len;\n  }\n}\n\nlet mat_temp = mat4();\nexport function updateMatrices(mat_model) {\n  // PERFTODO: depending on rendering path, only some of these are needed (m + vp or just mvp)\n  mat4Copy(mat_m, mat_model);\n\n  mat4Mul(mat_mv, mat_view, mat_model);\n  mat4Mul(mat_mvp, mat_projection, mat_mv);\n  // TODO: Can expand and simplify all of this, especially below\n  // Compute the inverse transform of thee model_view matrix, discarding scale,\n  // to be used for getting normals into view space\n  mat4Copy(mat_temp, mat_model);\n  normalizeRow(mat_temp, 0);\n  normalizeRow(mat_temp, 4);\n  normalizeRow(mat_temp, 8);\n  mat4Mul(mat_mv_no_skew, mat_view, mat_temp);\n  mat4Invert(mat_temp, mat_mv_no_skew);\n  mat4Transpose(mat_temp, mat_temp);\n  mat3FromMat4(mat_mv_inv_transform, mat_temp);\n}\n\n// *Maybe* don't need this logic anymore, postprocessing has been improved to be\n// efficient on all devices.\nconst postprocessing_reset_version = '2';\nexport let postprocessing = local_storage.get('glov_no_postprocessing') !== postprocessing_reset_version;\nexport function postprocessingAllow(allow) {\n  local_storage.set('glov_no_postprocessing', allow ? undefined : postprocessing_reset_version);\n  postprocessing = allow;\n}\n\nexport let global_timer = 0;\nexport function getFrameTimestamp() {\n  return global_timer;\n}\n\nexport let global_frame_index = 0;\nexport function getFrameIndex() {\n  return global_frame_index;\n}\n\nexport let this_frame_time = 0;\nexport function getFrameDt() {\n  return this_frame_time;\n}\n\n// Wall time, may contain large jumps, may be 0 or negative\nlet this_frame_time_actual = 0;\nexport function getFrameDtActual() {\n  return this_frame_time_actual;\n}\n\nlet after_loading_state = null;\nexport let is_loading = true;\nexport function setState(new_state) {\n  if (is_loading) {\n    after_loading_state = new_state;\n  } else {\n    app_state = new_state;\n  }\n}\n\nlet mspf = 1000;\nlet mspf_update_time = Date.now();\nlet mspf_frame_count = 0;\nlet show_fps = true;\n\nlet do_borders = true;\nlet do_viewport_postprocess = false;\nlet need_repos = 0;\n\nlet app_tick_functions = [];\nexport function addTickFunc(cb) {\n  app_tick_functions.push(cb);\n}\n\nlet temporary_textures = {};\n\nfunction resetEffects() {\n  for (let key in temporary_textures) {\n    let temp = temporary_textures[key];\n    // Release unused textures\n    while (temp.list.length > temp.idx) {\n      temp.list.pop().destroy();\n    }\n    if (!temp.idx) {\n      delete temporary_textures[key];\n    } else {\n      temp.idx = 0;\n    }\n  }\n}\n\nexport let viewport = vec4(0, 0, 1, 1);\nexport function setViewport(xywh) {\n  v4copy(viewport, xywh);\n  gl.viewport(xywh[0], xywh[1], xywh[2], xywh[3]);\n}\n\nexport function getTemporaryTexture(w, h) {\n  let key = w ? `${w}_${h}` : 'screen';\n  let temp = temporary_textures[key];\n  if (!temp) {\n    temp = temporary_textures[key] = { list: [], idx: 0 };\n  }\n  if (temp.idx >= temp.list.length) {\n    let tex = textures.createForCapture();\n    temp.list.push(tex);\n  }\n  let tex = temp.list[temp.idx++];\n  tex.override_sampler = null; // in case the previous user set it\n  return tex;\n}\n\nexport function captureFramebuffer(tex, w, h, do_filter_linear, do_wrap) {\n  if (!w && render_width) {\n    w = render_width;\n    h = render_height;\n  }\n  if (!tex) {\n    tex = getTemporaryTexture(w, h);\n  }\n  if (w) {\n    tex.copyTexImage(viewport[0], viewport[1], w, h);\n  } else {\n    tex.copyTexImage(0, 0, width, height);\n  }\n  tex.setSamplerState({\n    filter_min: do_filter_linear ? gl.LINEAR : gl.NEAREST,\n    filter_mag: do_filter_linear ? gl.LINEAR : gl.NEAREST,\n    wrap_s: do_wrap ? gl.REPEAT : gl.CLAMP_TO_EDGE,\n    wrap_t: do_wrap ? gl.REPEAT : gl.CLAMP_TO_EDGE\n  });\n  return tex;\n}\n\nlet last_tick = Date.now();\nfunction tick() {\n  let now = Date.now();\n  if (defines.SLOWLOAD && is_loading) {\n    // Safari on CrossBrowserTesting needs this in order to have some time to load/decode audio data\n    setTimeout(function () {\n      requestAnimationFrame(tick);\n    }, 500);\n  } else {\n    requestAnimationFrame(tick);\n  }\n  this_frame_time_actual = now - last_tick;\n  let dt = min(max(this_frame_time_actual, 1), 250);\n  this_frame_time = dt;\n  last_tick = now;\n  global_timer += dt;\n  ++global_frame_index;\n\n  ++mspf_frame_count;\n  if (now - mspf_update_time > 1000) {\n    mspf = (now - mspf_update_time) / mspf_frame_count;\n    mspf_frame_count = 0;\n    mspf_update_time = now;\n    // if (show_fps && fps_elem) {\n    //   fps_elem.innerText = `${(1000 / mspf).toFixed(0)}fps (${mspf.toFixed(1)} ms/f)`;\n    // }\n  }\n\n  if (document.hidden || document.webkitHidden) {\n    resetEffects();\n    return;\n  }\n\n  width = canvas.width;\n  height = canvas.height;\n\n  if (any_3d) {\n    let rise = width / height * sin(fov_y / 2) / cos(fov_y / 2);\n    fov_x = 2 * asin(rise / sqrt(rise * rise + 1));\n    mat4Perspective(mat_projection, fov_y, width / height, ZNEAR, ZFAR);\n    v4set(projection_inverse, 2 / (width * mat_projection[0]), // projection_matrix.m00),\n    2 / (height * mat_projection[5]), // projection_matrix.m11),\n    -(1 + mat_projection[8]) / mat_projection[0], // projection_matrix.m20) / projection_matrix.m00,\n    -(1 + mat_projection[9]) / mat_projection[5] // projection_matrix.m21) / projection_matrix.m11\n    );\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n    gl.enable(gl.BLEND);\n    gl.enable(gl.DEPTH_TEST);\n    gl.depthMask(true);\n  } else {\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n    gl.enable(gl.BLEND);\n    gl.disable(gl.DEPTH_TEST);\n    gl.depthMask(false);\n  }\n  textures.bind(0, textures.textures.error);\n\n  camera2d.tickCamera2D();\n  camera2d.setAspectFixed(game_width, game_height);\n\n  sound_manager.tick(dt);\n  input.tickInput();\n  glov_ui.tickUI(dt);\n\n  if (need_repos) {\n    --need_repos;\n    let ul = [];\n    camera2d.virtualToPhysical(ul, [0, 0]);\n    let lr = [];\n    camera2d.virtualToPhysical(lr, [game_width - 1, game_height - 1]);\n    let viewport2 = [ul[0], ul[1], lr[0], lr[1]];\n    let view_height = viewport2[3] - viewport2[1];\n    // default font size of 16 when at height of game_height\n    let font_size = Math.min(256, Math.max(2, Math.floor(view_height / 800 * 16)));\n    document.getElementById('fullscreen').style['font-size'] = `${font_size}px`;\n  }\n\n  if (do_borders) {\n    // Borders\n    glov_ui.drawRect(camera2d.x0(), camera2d.y0(), camera2d.x1(), 0, Z.BORDERS, pico8_colors[0]);\n    glov_ui.drawRect(camera2d.x0(), game_height, camera2d.x1(), camera2d.y1(), Z.BORDERS, pico8_colors[0]);\n    glov_ui.drawRect(camera2d.x0(), 0, 0, game_height, Z.BORDERS, pico8_colors[0]);\n    glov_ui.drawRect(game_width, 0, camera2d.x1(), game_height, Z.BORDERS, pico8_colors[0]);\n  }\n\n  for (let ii = 0; ii < app_tick_functions.length; ++ii) {\n    app_tick_functions[ii](dt);\n  }\n  if (app_state) {\n    app_state(dt);\n  }\n  if (show_fps) {\n    camera2d.setAspectFixed(game_width, game_height);\n    font.drawSizedAligned(fps_style, camera2d.x0(), camera2d.y0(), Z.FPSMETER, glov_ui.font_height, glov_font.ALIGN.HRIGHT, camera2d.w(), 0, `FPS: ${(1000 / mspf).toFixed(1)} (${mspf.toFixed(0)}ms/f)`);\n  }\n\n  glov_particles.tick(dt); // *after* app_tick, so newly added/killed particles can be queued into the draw list\n  glov_transition.render(dt);\n\n  // Above is queuing, below is actual drawing\n\n  gl.viewport(viewport[0], viewport[1], viewport[2], viewport[3]);\n  // gl.scissor(0, 0, viewport[2] - viewport[0], viewport[3] - viewport[1]);\n  gl.clear(clear_bits);\n\n  sprites.draw();\n\n  glov_ui.endFrame();\n\n  if (render_width) {\n    let source = captureFramebuffer();\n    let clear_color = [0, 0, 0, 1];\n    let final_viewport = [camera2d.render_offset_x, camera2d.render_offset_y, camera2d.render_viewport_w, camera2d.render_viewport_h];\n    if (do_viewport_postprocess) {\n      effects.applyPixelyExpand({ source, final_viewport, clear_color });\n    } else {\n      if (clear_color) {\n        gl.clearColor(clear_color[0], clear_color[1], clear_color[2], clear_color[3]);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n      }\n      setViewport(final_viewport);\n      // gl.scissor(0, 0, width, height);\n      effects.applyCopy({ source });\n    }\n  }\n\n  input.endFrame();\n  resetEffects();\n}\n\nlet last_error_time = 0;\nfunction glovErrorReport(msg, file, line, col) {\n  let now = Date.now();\n  let dt = now - last_error_time;\n  last_error_time = now;\n  if (dt < 30 * 1000) {\n    // Less than 30 seconds since the last error, either we're erroring every\n    // frame, or this is a secondary error caused by the first, do not report it.\n    // Could maybe hash the error message and just report each message once, and\n    // flag errors as primary or secondary.\n    return;\n  }\n  // Post to an error reporting endpoint that (probably) doesn't exist - it'll get in the logs anyway!\n  let url = (location.href || '').match(/^[^#?]*/u)[0];\n  url += `errorReport?file=${escape(file)}&line=${line}&col=${col}&url=${escape(location.href)}&msg=${escape(msg)}`;\n  let xhr = new XMLHttpRequest();\n  xhr.open('POST', url, true);\n  xhr.send(null);\n}\n\nexport function startup(params) {\n  // globals for leftover Turbulenz bits\n  window.TurbulenzEngine = null;\n  window.assert = assert;\n\n  canvas = document.getElementById('canvas');\n\n  if (params.error_report !== false) {\n    window.glov_error_report = glovErrorReport;\n  }\n\n  function resizeCanvas() {\n    let css_to_real = window.devicePixelRatio || 1;\n    window.pixel_scale = css_to_real;\n    canvas.width = Math.round(canvas.clientWidth * css_to_real);\n    canvas.height = Math.round(canvas.clientHeight * css_to_real);\n\n    // For the next 10 frames, make sure font size is correct\n    need_repos = 10;\n  }\n  // resize the canvas to fill browser window dynamically\n  window.addEventListener('resize', resizeCanvas, false);\n  resizeCanvas();\n\n  let is_pixely = params.pixely && params.pixely !== 'off';\n  let antialias = params.antialias || !is_pixely && params.antialias !== false;\n  let context_names = ['webgl', 'experimental-webgl'];\n  let context_opt = { antialias };\n  let good = false;\n  for (let i = 0; i < context_names.length; i += 1) {\n    try {\n      window.gl = canvas.getContext(context_names[i], context_opt);\n      good = true;\n      break;\n    } catch (e) {\n      // ignore\n    }\n  }\n  if (!good) {\n    // eslint-disable-next-line no-alert\n    window.alert('Sorry, but your browser does not support WebGL or does not have it enabled.');\n    document.getElementById('loading').style.visibility = 'hidden';\n    return false;\n  }\n\n  assert(gl);\n  canvas.focus();\n  width = canvas.width;\n  height = canvas.height;\n  game_width = params.game_width || 1280;\n  game_height = params.game_height || 960;\n  any_3d = params.any_3d || false;\n  ZNEAR = params.znear || 0.7;\n  ZFAR = params.zfar || 10000;\n  if (params.pixely === 'strict') {\n    render_width = game_width;\n    render_height = game_height;\n    if (params.viewport_postprocess) {\n      do_viewport_postprocess = true;\n    }\n  } else {\n    render_width = undefined;\n    render_height = undefined;\n  }\n  pixel_aspect = params.pixel_aspect || 1;\n\n  gl.depthFunc(gl.LEQUAL);\n  // gl.enable(gl.SCISSOR_TEST);\n  gl.enable(gl.CULL_FACE);\n  gl.cullFace(gl.BACK);\n  gl.clearColor(0, 0.1, 0.2, 1);\n\n  // Use &D=WIREFRAME to set the WIREFRAME define\n  let m = document.location.search.match(/D=[^&]+/gu);\n  if (m) {\n    m.forEach(v => {\n      defines[v.slice(2)] = true;\n    });\n  }\n\n  textures.startup();\n  geom.startup();\n  shaders.startup({\n    light_diffuse,\n    light_dir_vs,\n    ambient: light_ambient,\n    mat_m: mat_m,\n    mat_mv: mat_mv,\n    mat_vp: mat_vp,\n    mvp: mat_mvp,\n    mv_inv_trans: mat_mv_inv_transform,\n    view: mat_view,\n    projection: mat_projection,\n    projection_inverse\n  });\n  camera2d.startup();\n  sprites.startup();\n  input.startup(canvas);\n  if (any_3d) {\n    models.startup();\n  }\n\n  if (any_3d) {\n    // eslint-disable-next-line no-bitwise\n    clear_bits = gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT;\n  } else {\n    clear_bits = gl.COLOR_BUFFER_BIT;\n  }\n\n  /* eslint-disable global-require */\n  glov_particles = require('./particles.js').create();\n\n  if (is_pixely) {\n    textures.defaultFilters(gl.NEAREST, gl.NEAREST);\n  } else {\n    textures.defaultFilters(gl.LINEAR, gl.LINEAR);\n  }\n\n  sound_manager = require('./sound_manager.js').create();\n\n  const font_info_04b03x2 = require('../img/font/04b03_8x2.json');\n  const font_info_04b03x1 = require('../img/font/04b03_8x1.json');\n  if (params.font) {\n    font = glov_font.create(params.font.info, params.font.texture);\n  } else if (params.pixely === 'strict') {\n    font = glov_font.create(font_info_04b03x1, 'font/04b03_8x1');\n  } else if (is_pixely) {\n    font = glov_font.create(font_info_04b03x2, 'font/04b03_8x2');\n  } else {\n    font = glov_font.create(font_info_palanquin32, 'font/palanquin32');\n  }\n  glov_ui.startup(font, params.ui_sprites);\n  glov_ui.bindSounds(sound_manager, { // TODO: Allow overriding?\n    button_click: 'button_click',\n    rollover: 'rollover'\n  });\n\n  camera2d.setAspectFixed(game_width, game_height);\n\n  if (params.state) {\n    setState(params.state);\n  }\n  if (params.do_borders !== undefined) {\n    do_borders = params.do_borders;\n  }\n  if (params.show_fps !== undefined) {\n    show_fps = params.show_fps;\n  }\n\n  requestAnimationFrame(tick);\n  return true;\n}\n\nfunction loading() {\n  let load_count = textures.load_count + sound_manager.loading() + models.load_count;\n  document.getElementById('loading_text').innerText = `Loading (${load_count})...`;\n  if (!load_count) {\n    let elem = document.getElementById('loading');\n    elem.style.visibility = 'hidden';\n    is_loading = false;\n    app_state = after_loading_state;\n  }\n}\napp_state = loading;\n\nwindow.glov_engine = exports;","/* eslint no-bitwise:off */\n/* eslint complexity:off */\n/* eslint no-shadow:off */\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\n\nconst { floor, max, round } = Math;\nconst shaders = require('./shaders.js');\nconst sprites = require('./sprites.js');\nconst textures = require('./textures.js');\nconst { clamp, vec4, v4clone, v4scale } = require('./vmath.js');\n\n/*\n\nfont_style = glov_font.style(null, {\n  color: 0xFFFFFFff,\n  outline_width: 0,\n  outline_color: 0x00000000,\n  glow_xoffs: 0,\n  glow_yoffs: 0,\n  glow_inner: 0,\n  glow_outer: 0,\n  glow_color: 0x000000ff,\n});\n\n */\n\n// typedef struct FontCharInfo {\n//   int c;\n//   float x0;\n//   float y0;\n//   int w;\n//   int h;\n//   int imgIdx;\n// } FontCharInfo;\n\n// typedef struct FontInfo {\n//   AS_NAME(CharInfo) FontCharInfo **char_infos;\n//   int font_size;\n//   float x0;\n//   float y0;\n//   int imageW;\n//   int imageH;\n//   int spread;\n// } FontInfo;\n\nexport const COLOR_MODE = {\n  SINGLE: 0,\n  GRADIENT: 1\n};\n\nexport const ALIGN = {\n  HLEFT: 0,\n  HCENTER: 1,\n  HRIGHT: 2,\n  HMASK: 3,\n\n  VTOP: 0 << 2,\n  VCENTER: 1 << 2,\n  VBOTTOM: 2 << 2,\n  VMASK: 3 << 2,\n\n  HFIT: 1 << 4,\n  HWRAP: 1 << 5, // only for glovMarkup*, not drawSizedAligned below, use drawSizedWrapped below instead\n\n  HCENTERFIT: 1 | 1 << 4,\n  HVCENTER: 1 | 1 << 2, // to avoid doing bitwise ops elsewhere\n  HVCENTERFIT: 1 | 1 << 2 | 1 << 4 // to avoid doing bitwise ops elsewhere\n};\n\n// typedef struct GlovFontStyle\n// {\n//   // These members will never be changed (safe to initialize with GlovFontStyle foo = {1.0, 0xfff, etc};\n//   float outline_width;\n//   U32 outline_color;\n//   // Glow: can be used for a dropshadow as well\n//   //   inner can be negative to have the glow be less opaque (can also just change the alpha of the glow color)\n//   //   a glow would be e.g. (0, 0, -1, 5)\n//   //   a dropshadow would be e.g. (3.25, 3.25, -2.5, 5)\n//   float glow_xoffs;\n//   float glow_yoffs;\n//   float glow_inner;\n//   float glow_outer;\n//   U32 glow_color;\n//   U32 color; // upper left, or single color\n//   U32 colorUR; // upper right\n//   U32 colorLR; // lower right\n//   U32 colorLL; // lower left\n//   GlovFontColorMode color_mode;\n// } GlovFontStyle;\n\n/* Default GlovFontStyle:\n  font_style = {\n    outline_width: 0, outline_color: 0x00000000,\n    glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 0, glow_color: 0x00000000,\n    color: 0xFFFFFFff\n  };\n\n  font_style = {\n    outline_width: 0, outline_color: 0x00000000,\n    glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 0, glow_color: 0x00000000,\n    // Color gradient: UL, UR, LR, LL\n    color: 0xFFFFFFff, colorUR: 0xFFFFFFff, colorLR: 0x000000ff, colorLL: 0x000000ff,\n    color_mode: glov_font.COLOR_MODE.GRADIENT,\n  };\n*/\n\nfunction GlovFontDefaultStyle() {\n  // Empty constructor\n}\nGlovFontDefaultStyle.prototype.outline_width = 0;\nGlovFontDefaultStyle.prototype.outline_color = 0x00000000;\nGlovFontDefaultStyle.prototype.glow_xoffs = 0;\nGlovFontDefaultStyle.prototype.glow_yoffs = 0;\nGlovFontDefaultStyle.prototype.glow_inner = 0;\nGlovFontDefaultStyle.prototype.glow_outer = 0;\nGlovFontDefaultStyle.prototype.glow_color = 0x00000000;\nGlovFontDefaultStyle.prototype.color = 0xFFFFFFff;\nGlovFontDefaultStyle.prototype.colorUR = 0;\nGlovFontDefaultStyle.prototype.colorLR = 0;\nGlovFontDefaultStyle.prototype.colorLL = 0;\nGlovFontDefaultStyle.prototype.color_mode = COLOR_MODE.SINGLE;\n\nclass GlovFontStyle extends GlovFontDefaultStyle {}\n\nexport const font_shaders = {};\n\nexport function intColorFromVec4Color(v) {\n  return (v[0] * 255 | 0) << 24 | (v[1] * 255 | 0) << 16 | (v[2] * 255 | 0) << 8 | (v[3] * 255 | 0);\n}\n\nexport function vec4ColorFromIntColor(v, c) {\n  v[0] = (c >> 24 & 0xFF) / 255;\n  v[1] = (c >> 16 & 0xFF) / 255;\n  v[2] = (c >> 8 & 0xFF) / 255;\n  v[3] = (c & 0xFF) / 255;\n}\n\nfunction buildVec4ColorFromIntColor(c) {\n  return vec4((c >> 24 & 0xFF) / 255, (c >> 16 & 0xFF) / 255, (c >> 8 & 0xFF) / 255, (c & 0xFF) / 255);\n}\n\nexport const glov_font_default_style = new GlovFontStyle();\n\nexport function style(font_style, fields) {\n  let ret = new GlovFontStyle();\n  if (font_style) {\n    for (let f in font_style) {\n      ret[f] = font_style[f];\n    }\n  }\n  for (let f in fields) {\n    ret[f] = fields[f];\n  }\n  return ret;\n}\n\nexport function styleColored(font_style, color) {\n  return style(font_style, {\n    color\n  });\n}\n\nfunction colorAlpha(color, alpha) {\n  alpha = clamp(round((color & 0xFF) * alpha), 0, 255);\n  return color & 0xFFFFFF00 | alpha;\n}\n\nexport function styleAlpha(font_style, alpha) {\n  return style(font_style, {\n    color: colorAlpha((font_style || glov_font_default_style).color, alpha),\n    outline_color: colorAlpha((font_style || glov_font_default_style).outline_color, alpha),\n    glow_color: colorAlpha((font_style || glov_font_default_style).glow_color, alpha)\n  });\n}\n\nlet tech_params = null;\nlet tech_params_dirty = false;\nlet temp_color = null;\n\nfunction createTechniqueParameters() {\n  if (tech_params) {\n    return;\n  }\n\n  tech_params = {\n    param0: vec4(),\n    outlineColor: vec4(),\n    glowColor: vec4(),\n    glowParams: vec4(),\n    tex0: null\n  };\n  if (!temp_color) {\n    temp_color = vec4();\n  }\n}\n\nfunction techParamsSet(param, value) {\n  let tpv = tech_params[param];\n  // not dirty, if anything changes, we need a new object!\n  if (!tech_params_dirty) {\n    if (tpv[0] !== value[0] || tpv[1] !== value[1] || tpv[2] !== value[2] || tpv[3] !== value[3]) {\n      // clone\n      tech_params = {\n        param0: v4clone(tech_params.param0),\n        outlineColor: v4clone(tech_params.outlineColor),\n        glowColor: v4clone(tech_params.glowColor),\n        glowParams: v4clone(tech_params.glowParams)\n      };\n      tech_params_dirty = true;\n      tpv = tech_params[param];\n    } else {\n      // identical, do nothing\n      return;\n    }\n  }\n  if (tech_params_dirty) {\n    // just set\n    tpv[0] = value[0];\n    tpv[1] = value[1];\n    tpv[2] = value[2];\n    tpv[3] = value[3];\n    // return;\n  }\n}\n\nfunction techParamsGet() {\n  tech_params_dirty = false;\n  return tech_params;\n}\n\nclass GlovFont {\n  constructor(font_info, texture_name) {\n    assert(font_info.font_size !== 0); // Got lost somewhere\n\n    this.texture = textures.load({\n      url: `img/${texture_name}.png`,\n      filter_min: font_info.noFilter ? gl.NEAREST : gl.LINEAR,\n      filter_mag: font_info.noFilter ? gl.NEAREST : gl.LINEAR\n    });\n    this.textures = [this.texture];\n\n    this.font_info = font_info;\n    this.shader = font_shaders.font_aa;\n\n    // Calculate inverse scale\n    for (let ii = 0; ii < font_info.char_infos.length; ++ii) {\n      let char_info = font_info.char_infos[ii];\n      char_info.scale = 1 / (char_info.sc || 1);\n    }\n\n    // build lookup\n    this.char_infos = [];\n    for (let ii = 0; ii < font_info.char_infos.length; ++ii) {\n      let char_info = font_info.char_infos[ii];\n      this.char_infos[font_info.char_infos[ii].c] = char_info;\n      char_info.xpad = char_info.xpad || 0;\n      char_info.yoffs = char_info.yoffs || 0;\n    }\n    this.replacement_character = this.infoFromChar(0xFFFD);\n    if (!this.replacement_character) {\n      this.replacement_character = this.infoFromChar(63); // '?'\n    }\n\n    this.default_style = new GlovFontStyle();\n    this.applied_style = new GlovFontStyle();\n\n    createTechniqueParameters();\n  }\n\n  // General draw functions return width\n  // Pass NULL for style to use default style\n  // If the function takes a color, this overrides the color on the style\n  drawSizedColor(style, x, y, z, size, color, text) {\n    return this.drawSized(styleColored(style, color), x, y, z, size, text);\n  }\n  drawSized(style, x, y, z, size, text) {\n    return this.drawScaled(style, x, y, z, size / this.font_info.font_size, size / this.font_info.font_size, text);\n  }\n\n  drawSizedAligned(style, _x, _y, z, size, align, w, h, text) {\n    let x_size = size;\n    let y_size = size;\n    let width = this.getStringWidth(style, x_size, text);\n    if (align & ALIGN.HFIT && width > w) {\n      let scale = w / width;\n      x_size *= scale;\n      width = w;\n      // Additionally, if we're really squishing things horizontally, shrink the font size\n      // and offset to be centered.\n      if (scale < 0.5) {\n        if ((align & ALIGN.VMASK) !== ALIGN.VCENTER && (align & ALIGN.VMASK) !== ALIGN.VBOTTOM) {\n          // Offset to be roughly centered in the original line bounds\n          _y += (y_size - y_size * scale * 2) / 2;\n        }\n        y_size *= scale * 2;\n      }\n    }\n    let height = y_size;\n    let x;\n    let y;\n    switch (align & ALIGN.HMASK) {\n      case ALIGN.HCENTER:\n        x = _x + (w - width) / 2;\n        if (this.font_info.noFilter) {\n          x |= 0; // ensure integral\n        }\n        break;\n      case ALIGN.HRIGHT:\n        x = _x + w - width;\n        break;\n      case ALIGN.HLEFT:\n        x = _x;\n        break;\n      default:\n        x = _x;\n    }\n    switch (align & ALIGN.VMASK) {\n      case ALIGN.VCENTER:\n        y = _y + (h - height) / 2;\n        if (this.font_info.noFilter) {\n          y |= 0; // ensure integral\n        }\n        break;\n      case ALIGN.VBOTTOM:\n        y = _y + h - height;\n        break;\n      case ALIGN.VTOP:\n        y = _y;\n        break;\n      default:\n        y = _y;\n    }\n\n    return this.drawScaled(style, x, y, z, x_size / this.font_info.font_size, y_size / this.font_info.font_size, text);\n  }\n\n  // returns height\n  drawSizedColorWrapped(style, x, y, z, w, indent, size, color, text) {\n    return this.drawScaledWrapped(styleColored(style, color), x, y, z, w, indent, size / this.font_info.font_size, size / this.font_info.font_size, text);\n  }\n  drawSizedWrapped(style, x, y, z, w, indent, size, text) {\n    return this.drawScaledWrapped(style, x, y, z, w, indent, size / this.font_info.font_size, size / this.font_info.font_size, text);\n  }\n\n  wrapLines(w, indent, size, text, word_cb /*(x, int linenum, const char *word)*/) {\n    return this.wrapLinesScaled(w, indent, size / this.font_info.font_size, text, word_cb);\n  }\n\n  infoFromChar(c) {\n    let ret = this.char_infos[c];\n    if (ret) {\n      return ret;\n    }\n    if (c > 127) {\n      // no char info, and non-ascii, non-control code\n      return this.replacement_character;\n    }\n    return null;\n  }\n\n  getCharacterWidth(style, x_size, c) {\n    assert(typeof c === 'number');\n    this.applyStyle(style);\n    let char_info = this.infoFromChar(c);\n    let xsc = x_size / this.font_info.font_size;\n    let x_advance = this.calcXAdvance(xsc);\n    if (char_info) {\n      return (char_info.w + char_info.xpad) * xsc * char_info.scale + x_advance;\n    }\n    return 0;\n  }\n\n  getStringWidth(style, x_size, text) {\n    this.applyStyle(style);\n    let ret = 0;\n    let xsc = x_size / this.font_info.font_size;\n    let x_advance = this.calcXAdvance(xsc);\n    for (let ii = 0; ii < text.length; ++ii) {\n      let c = text.charCodeAt(ii);\n      let char_info = this.infoFromChar(c);\n      if (!char_info) {\n        char_info = this.infoFromChar(13);\n      }\n      if (char_info) {\n        ret += (char_info.w + char_info.xpad) * xsc * char_info.scale + x_advance;\n      }\n    }\n    return ret;\n  }\n\n  wrapLinesScaled(w, indent, xsc, text, word_cb /* word_cb(x, int linenum, const char *word) */) {\n    let len = text.length;\n    let s = 0;\n    let word_start = 0;\n    let word_x0 = 0;\n    let x = word_x0;\n    let linenum = 0;\n    let space_info = this.infoFromChar(32); // ' '\n    let space_size = (space_info ? space_info.w + space_info.xpad : this.font_info.font_size) * xsc;\n    let hard_wrap = false;\n    let x_advance = this.calcXAdvance(xsc);\n\n    do {\n      let c = s < len ? text.charCodeAt(s) : 0;\n      let newx = x;\n      let char_w;\n      if (c === 9) {\n        // '\\t') {\n        let tabsize = xsc * this.font_info.font_size * 4;\n        newx = (floor(x / tabsize) + 1) * tabsize;\n        char_w = tabsize;\n      } else {\n        let char_info = this.infoFromChar(c);\n        if (!char_info) {\n          char_info = this.infoFromChar(10);\n        }\n        if (char_info) {\n          char_w = (char_info.w + char_info.xpad) * xsc * char_info.scale + x_advance;\n          newx = x + char_w;\n        }\n      }\n      if (newx >= w && hard_wrap) {\n        // flush the word so far!\n        if (word_cb) {\n          word_cb(word_x0, linenum, text.slice(word_start, s));\n        }\n        word_start = s;\n        word_x0 = indent;\n        x = word_x0 + char_w;\n        linenum++;\n      } else {\n        x = newx;\n      }\n      if (!(c === 32 /*' '*/ || c === 0 || c === 10 /*'\\n'*/)) {\n        s++;\n        c = s < len ? text.charCodeAt(s) : 0;\n      }\n      if (c === 32 /*' '*/ || c === 0 || c === 10 /*'\\n'*/) {\n          hard_wrap = false;\n          // draw word until s\n          if (x > w) {\n            // maybe wrap\n            let word_width = x - word_x0;\n            if (word_width > w) {\n              // not going to fit, split it up!\n              hard_wrap = true;\n              // recover and restart at word start\n              s = word_start;\n              x = word_x0;\n              continue;\n            } else {\n              word_x0 = indent;\n              x = word_x0 + word_width;\n              linenum++;\n            }\n          }\n          if (word_cb) {\n            word_cb(word_x0, linenum, text.slice(word_start, s));\n          }\n          word_start = s + 1;\n          if (c === 10 /*'\\n'*/) {\n              x = indent;\n              linenum++;\n            } else {\n            x += space_size;\n          }\n          word_x0 = x;\n          if (c === 32 /*' '*/ || c === 10 /*'\\n'*/) {\n              s++; // advance past space\n            }\n        }\n    } while (s < len);\n    ++linenum;\n    return linenum;\n  }\n\n  drawScaledWrapped(style, x, y, z, w, indent, xsc, ysc, text) {\n    if (text === null || text === undefined) {\n      text = '(null)';\n    }\n    this.applyStyle(style);\n    this.last_width = 0;\n    let num_lines = this.wrapLinesScaled(w, indent, xsc, text, (xoffs, linenum, word) => {\n      let y2 = y + this.font_info.font_size * ysc * linenum;\n      let x2 = x + xoffs;\n      let word_w = this.drawScaled(style, x2, y2, z, xsc, ysc, word);\n      this.last_width = max(this.last_width, xoffs + word_w);\n    });\n    return num_lines * this.font_info.font_size * ysc;\n  }\n\n  calcXAdvance(xsc) {\n    // Assume called: applyStyle(style);\n\n    // scale all supplied values by this so that if we swap in a font with twice the resolution (and twice the spread)\n    //   things look almost identical, just crisper\n    let font_texel_scale = this.font_info.font_size / 32;\n    // As a compromise, -2 bias here seems to work well\n    let x_advance = xsc * font_texel_scale * max(this.applied_style.outline_width - 2, 0);\n    // As a compromise, there's a -3 bias in there, so it only kicks in under extreme circumstances\n    x_advance = max(x_advance, xsc * font_texel_scale * max(this.applied_style.glow_outer - this.applied_style.glow_xoffs - 3, 0));\n    return x_advance;\n  }\n\n  //////////////////////////////////////////////////////////////////////////\n  // Main implementation\n\n  drawScaled(style, _x, y, z, xsc, ysc, text) {\n\n    let x = _x;\n    let font_info = this.font_info;\n    // Debug: show expect area of glyphs\n    // require('./ui.js').drawRect(_x, y,\n    //   _x + xsc * font_info.font_size * 20, y + ysc * font_info.font_size,\n    //   1000, [1, 0, 1, 0.5]);\n    y += (font_info.y_offset || 0) * ysc;\n    let tex = this.texture;\n    let texs = this.textures;\n    if (text === null || text === undefined) {\n      text = '(null)';\n    }\n    const len = text.length;\n    if (xsc === 0 || ysc === 0) {\n      return 0;\n    }\n\n    this.applyStyle(style);\n\n    const avg_scale_font = (xsc + ysc) * 0.5;\n    const camera_xscale = camera2d.data[4];\n    const camera_yscale = camera2d.data[5];\n    let avg_scale_combined = (xsc * camera_xscale + ysc * camera_yscale) * 0.5;\n    // avg_scale_combined *= glov_settings.render_scale;\n\n    // scale all supplied values by this so that if we swap in a font with twice the resolution (and twice the spread)\n    //   things look almost identical, just crisper\n    let x_advance = this.calcXAdvance(xsc);\n    let font_texel_scale = font_info.font_size / 32;\n    let tile_state = 0;\n\n    let applied_style = this.applied_style;\n\n    // Calculate anti-aliasing values\n    let delta_per_source_pixel = 0.5 / font_info.spread;\n    let delta_per_dest_pixel = delta_per_source_pixel / avg_scale_combined;\n    let value = vec4(1 / delta_per_dest_pixel, // AA Mult and Outline Mult\n    -0.5 / delta_per_dest_pixel + 0.5, // AA Add\n    // Outline Add\n    -0.5 / delta_per_dest_pixel + 0.5 + applied_style.outline_width * font_texel_scale * avg_scale_combined, 0 // Unused\n    );\n    if (value[2] > 0) {\n      value[2] = 0;\n    }\n    let padding1 = max(0, applied_style.outline_width * font_texel_scale * avg_scale_font);\n    let padding4 = vec4();\n    const outer_scaled = applied_style.glow_outer * font_texel_scale;\n    padding4[0] = max(outer_scaled * xsc - applied_style.glow_xoffs * font_texel_scale * xsc, padding1);\n    padding4[2] = max(outer_scaled * xsc + applied_style.glow_xoffs * font_texel_scale * xsc, padding1);\n    padding4[1] = max(outer_scaled * ysc - applied_style.glow_yoffs * font_texel_scale * ysc, padding1);\n    padding4[3] = max(outer_scaled * ysc + applied_style.glow_yoffs * font_texel_scale * ysc, padding1);\n\n    techParamsSet('param0', value);\n    let value2 = vec4(0, // filled later\n    0, // filled later\n    // Glow mult\n    1 / ((applied_style.glow_outer - applied_style.glow_inner) * delta_per_source_pixel * font_texel_scale), -(0.5 - applied_style.glow_outer * delta_per_source_pixel * font_texel_scale) / ((applied_style.glow_outer - applied_style.glow_inner) * delta_per_source_pixel * font_texel_scale));\n    if (value2[3] > 0) {\n      value2[3] = 0;\n    }\n\n    let padding_in_font_space = vec4();\n    v4scale(padding_in_font_space, padding4, 1 / avg_scale_font);\n    for (let ii = 0; ii < 4; ++ii) {\n      if (padding_in_font_space[ii] > font_info.spread) {\n        // Not enough buffer\n        let sc = font_info.spread / padding_in_font_space[ii];\n        padding4[ii] *= sc;\n        padding_in_font_space[ii] *= sc;\n      }\n    }\n\n    // Choose appropriate z advance so that character are drawn left to right (or RTL if the glow is on the other side)\n    const z_advance = applied_style.glow_xoffs < 0 ? -0.0001 : 0.0001;\n\n    // For non-1:1 aspect ration rendering, need to scale our coordinates' padding differently in each axis\n    let rel_x_scale = xsc / avg_scale_font;\n    let rel_y_scale = ysc / avg_scale_font;\n\n    for (let i = 0; i < len; i++) {\n      const c = text.charCodeAt(i);\n      if (c === 9) {\n        // '\\t'.charCodeAt(0)) {\n        let tabsize = xsc * font_info.font_size * 4;\n        x = (((x - _x) / tabsize | 0) + 1) * tabsize + _x;\n      } else {\n        let char_info = this.infoFromChar(c);\n        if (!char_info) {\n          char_info = this.infoFromChar(13);\n        }\n        if (char_info) {\n          let char_scale = char_info.scale;\n          let xsc2 = xsc * char_scale;\n          if (char_info.w) {\n            let ysc2 = ysc * char_scale;\n            let pad_scale = 1 / char_scale;\n            let tile_width = tex.width;\n            let tile_height = tex.height;\n            // Lazy update params here\n            if (char_scale !== tile_state) {\n              value2[0] = -applied_style.glow_xoffs * font_texel_scale * pad_scale / tile_width;\n              value2[1] = -applied_style.glow_yoffs * font_texel_scale * pad_scale / tile_height;\n              techParamsSet('glowParams', value2);\n            }\n\n            let u0 = (char_info.x0 - padding_in_font_space[0] * pad_scale) / tile_width;\n            let u1 = (char_info.x0 + char_info.w + padding_in_font_space[2] * pad_scale) / tile_width;\n            let v0 = (char_info.y0 - padding_in_font_space[1] * pad_scale) / tile_height;\n            let v1 = (char_info.y0 + char_info.h + padding_in_font_space[3] * pad_scale) / tile_height;\n\n            let w = char_info.w * xsc2 + (padding4[0] + padding4[2]) * rel_x_scale;\n            let h = char_info.h * ysc2 + (padding4[1] + padding4[3]) * rel_y_scale;\n\n            sprites.queueraw(texs, x - rel_x_scale * padding4[0], y - rel_y_scale * padding4[2] + char_info.yoffs * ysc2, z + z_advance * i, w, h, u0, v0, u1, v1, buildVec4ColorFromIntColor(applied_style.color), this.shader, techParamsGet());\n\n            // require('./ui.js').drawRect(x - rel_x_scale * padding4[0],\n            //   y - rel_y_scale * padding4[2] + char_info.yoffs * ysc2,\n            //   w + x - rel_x_scale * padding4[0],\n            //   h + y - rel_y_scale * padding4[2] + char_info.yoffs * ysc2,\n            //   1000, [i & 1, (i & 2)>>1, (i & 4)>>2, 0.5]);\n          }\n\n          x += (char_info.w + char_info.xpad) * xsc2 + x_advance;\n        }\n      }\n    }\n    return x - _x;\n  }\n\n  determineShader() {\n    let outline = this.applied_style.outline_width && this.applied_style.outline_color & 0xff;\n    let glow = this.applied_style.glow_outer > 0 && this.applied_style.glow_color & 0xff;\n    if (outline) {\n      if (glow) {\n        this.shader = font_shaders.font_aa_outline_glow;\n      } else {\n        this.shader = font_shaders.font_aa_outline;\n      }\n    } else if (glow) {\n      this.shader = font_shaders.font_aa_glow;\n    } else {\n      this.shader = font_shaders.font_aa;\n    }\n  }\n\n  applyStyle(style) {\n    if (!style) {\n      style = this.default_style;\n    }\n    // outline\n    vec4ColorFromIntColor(temp_color, style.outline_color);\n    techParamsSet('outlineColor', temp_color);\n\n    // glow\n    vec4ColorFromIntColor(temp_color, style.glow_color);\n    techParamsSet('glowColor', temp_color);\n\n    // everything else\n    this.applied_style.outline_width = style.outline_width;\n    this.applied_style.outline_color = style.outline_color;\n    this.applied_style.glow_xoffs = style.glow_xoffs;\n    this.applied_style.glow_yoffs = style.glow_yoffs;\n    this.applied_style.glow_inner = style.glow_inner;\n    this.applied_style.glow_outer = style.glow_outer;\n    this.applied_style.glow_color = style.glow_color;\n    this.applied_style.color = style.color;\n    this.applied_style.colorUR = style.colorUR;\n    this.applied_style.colorLR = style.colorLR;\n    this.applied_style.colorLL = style.colorLL;\n    this.applied_style.color_mode = style.color_mode;\n\n    if (this.applied_style.color_mode === COLOR_MODE.SINGLE) {\n      this.applied_style.colorUR = this.applied_style.colorLL = this.applied_style.colorLR = this.applied_style.color;\n    }\n\n    this.determineShader();\n  }\n}\n\nfunction fontShadersInit() {\n  if (font_shaders.font_aa) {\n    return;\n  }\n  font_shaders.font_aa = shaders.create(gl.FRAGMENT_SHADER, 'precision lowp float;\\n\\nvarying vec2 interp_texcoord;\\nvarying lowp vec4 interp_color;\\nvec4 _ret_0;\\nuniform sampler2D tex0;\\nuniform vec4 param0;\\nvoid main()\\n{\\n  float texture0 = texture2D(tex0,interp_texcoord).r;\\n  float res = clamp(texture0 * param0.x + param0.y, 0.0, 1.0);\\n  gl_FragColor = vec4(interp_color.rgb, interp_color.a * res);\\n}\\n');\n  font_shaders.font_aa_glow = shaders.create(gl.FRAGMENT_SHADER, 'precision lowp float;\\n\\nvarying vec2 interp_texcoord;\\nvarying lowp vec4 interp_color;\\nvec4 _ret_0;\\nuniform sampler2D tex0;\\nuniform vec4 param0;\\nuniform vec4 glowColor;\\nuniform vec4 glowParams;\\nvoid main()\\n{\\n  float texture0=texture2D(tex0,interp_texcoord).r;\\n  // Glow\\n  vec2 glowCoord = interp_texcoord + glowParams.xy;\\n  float textureGlow = texture2D(tex0, glowCoord).r;\\n  float t = clamp(textureGlow * glowParams.z + glowParams.w, 0.0, 1.0);\\n  vec4 outcolor = vec4(glowColor.xyz, t * glowColor.w);\\n  // Main body\\n  t = clamp(texture0 * param0.x + param0.y, 0.0, 1.0);\\n  gl_FragColor = mix(outcolor, interp_color, t);\\n}\\n');\n  font_shaders.font_aa_outline = shaders.create(gl.FRAGMENT_SHADER, 'precision lowp float;\\n\\nvarying highp vec2 interp_texcoord;\\nvarying lowp vec4 interp_color;\\nvec4 _ret_0;\\nuniform sampler2D tex0;\\nuniform vec4 param0;\\nuniform vec4 outlineColor;\\nvoid main()\\n{\\n  float texture0=texture2D(tex0,interp_texcoord).r;\\n  // Outline\\n  vec4 outcolor = vec4(outlineColor.xyz, 0);\\n  outcolor.w = clamp(texture0 * param0.x + param0.z, 0.0, 1.0);\\n  outcolor.w = outcolor.w * outlineColor.w;\\n  // outcolor = mix(outcolor, outlineColor, outcolor.w); // Makes a blackish border\\n  // Main body\\n  float t = clamp(texture0 * param0.x + param0.y, 0.0, 1.0);\\n  gl_FragColor = mix(outcolor, interp_color, t);\\n}\\n');\n  font_shaders.font_aa_outline_glow = shaders.create(gl.FRAGMENT_SHADER, 'precision lowp float;\\n\\nvarying highp vec2 interp_texcoord;\\nvarying lowp vec4 interp_color;\\nvec4 _ret_0;\\nuniform sampler2D tex0;\\nuniform vec4 param0;\\nuniform vec4 outlineColor;\\nuniform vec4 glowColor;\\nuniform vec4 glowParams;\\nvoid main()\\n{\\n  float texture0=texture2D(tex0,interp_texcoord).r;\\n  // Glow\\n  vec2 glowCoord = interp_texcoord + glowParams.xy;\\n  float textureGlow = texture2D(tex0, glowCoord).r;\\n  float t = clamp(textureGlow * glowParams.z + glowParams.w, 0.0, 1.0);\\n  vec4 outcolor = vec4(glowColor.xyz, t * glowColor.w);\\n  // vec4outclor = t * glowColor.xyz;\\n  // Outline\\n  t = clamp(texture0 * param0.x + param0.z, 0.0, 1.0);\\n  t = t * outlineColor.w;\\n  outcolor = mix(outcolor, outlineColor, t);\\n  // Main body\\n  t = clamp(texture0 * param0.x + param0.y, 0.0, 1.0);\\n  gl_FragColor = mix(outcolor, interp_color, t);\\n}\\n');\n}\n\nexport function create(...args) {\n  fontShadersInit();\n  return new GlovFont(...args);\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint no-bitwise:off */\n\nconst assert = require('assert');\nconst { ceil, max } = Math;\n\nexport const QUADS = 7;\nexport const TRIANGLES = 4;\n\nconst gl_byte_size = {\n  0x1400: 1, // GL_BYTE\n  0x1401: 1, // GL_UNSIGNED_BYTE\n  0x1402: 2, // GL_SHORT\n  0x1403: 2, // GL_UNSIGNED_SHORT\n  0x1406: 4 // GL_FLOAT\n};\n\n// let unit_buf;\n// let unit_buf_len = 0;\n\nlet bound_geom;\n\nlet bound_array_buf = null;\nlet bound_index_buf = null;\n\nlet quad_index_buf;\nlet quad_index_buf_len = 0;\n\nfunction deleteBuffer(handle) {\n  if (!handle) {\n    return;\n  }\n  if (bound_array_buf === handle) {\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n    bound_array_buf = null;\n  }\n  if (bound_index_buf === handle) {\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n    bound_index_buf = null;\n  }\n  gl.deleteBuffer(handle);\n}\n\nlet attrib_enabled = 0;\nfunction enableVertexAttribArray(bits) {\n  if (bits === attrib_enabled) {\n    return;\n  }\n  let disable_mask = attrib_enabled & ~bits;\n  let enable_mask = ~attrib_enabled & bits;\n  attrib_enabled = bits;\n\n  if (disable_mask) {\n    let n = 0;\n    do {\n      if (disable_mask & 1) {\n        gl.disableVertexAttribArray(n);\n      }\n      n++;\n      disable_mask >>= 1;\n    } while (disable_mask);\n  }\n\n  if (enable_mask) {\n    let n = 0;\n    do {\n      if (enable_mask & 1) {\n        gl.enableVertexAttribArray(n);\n      }\n      n++;\n      enable_mask >>= 1;\n    } while (enable_mask);\n  }\n}\n\n// function bindUnitBuf(arr_idx, len) {\n//   if (len > unit_buf_len) {\n//     deleteBuffer(unit_buf);\n//     unit_buf = gl.createBuffer();\n//     unit_buf_len = max(ceil(unit_buf_len * 1.5), len);\n//     gl.bindBuffer(gl.ARRAY_BUFFER, unit_buf);\n//     bound_array_buf = unit_buf;\n//     let arr = new Uint8Array(unit_buf_len * 4);\n//     for (let ii = 0; ii < unit_buf_len * 4; ++ii) {\n//       arr[ii] = 255;\n//     }\n//     gl.bufferData(gl.ARRAY_BUFFER, arr, gl.STATIC_DRAW);\n//   } else {\n//     if (bound_array_buf !== unit_buf) {\n//       gl.bindBuffer(gl.ARRAY_BUFFER, unit_buf);\n//       bound_array_buf = unit_buf;\n//     }\n//   }\n//   gl.vertexAttribPointer(arr_idx, 4, gl.UNSIGNED_BYTE, true, 0, 0);\n// }\n\n// Verts should be ordered counter-clockwise from the upper left\nfunction getQuadIndexBuf(quad_count) {\n  assert(quad_count <= 16384);\n  // If not, need to split into multiple vertex and index buffers (fairly easy),\n  //   or use the OES_element_index_uint extension (trivial, but probably slower, maybe not supported on mobile?)\n  if (quad_count * 6 > quad_index_buf_len) {\n    if (!quad_index_buf) {\n      quad_index_buf = gl.createBuffer();\n    }\n    quad_index_buf_len = max(ceil(quad_index_buf_len * 1.5), quad_count * 6);\n    if (bound_index_buf !== quad_index_buf) {\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, quad_index_buf);\n      bound_index_buf = quad_index_buf;\n    }\n    let arr = new Uint16Array(quad_index_buf_len);\n    let vidx = 0;\n    for (let ii = 0; ii < quad_index_buf_len;) {\n      arr[ii++] = vidx + 1;\n      arr[ii++] = vidx + 3;\n      arr[ii++] = vidx++; // 0\n      arr[ii++] = vidx++; // 1\n      arr[ii++] = vidx++; // 2\n      arr[ii++] = vidx++; // 3\n    }\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, arr, gl.STATIC_DRAW);\n  }\n  return quad_index_buf;\n}\n\nexport function createIndices(idxs) {\n  let ret = {\n    ibo: gl.createBuffer(),\n    ibo_size: idxs.length\n  };\n  gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ret.ibo);\n  bound_index_buf = ret.ibo;\n  gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, idxs, gl.STATIC_DRAW);\n  return ret;\n}\n\n// _format is [shader.semantic.foo, gl.FLOAT/UNSIGNED_BYTE/etc, count, normalized]\nfunction Geom(_format, verts, idxs, mode) {\n  this.mode = mode || TRIANGLES;\n  this.format = _format;\n  this.stride = 0;\n  this.elem_count = 0;\n  this.used_attribs = 0;\n  for (let ii = 0; ii < _format.length; ++ii) {\n    let fmt = _format[ii];\n    let sem = fmt[0];\n    let gltype = fmt[1];\n    let count = fmt[2];\n    this.used_attribs |= 1 << sem;\n    let byte_size = gl_byte_size[gltype];\n    assert(byte_size);\n    fmt[3] = fmt[3] || false;\n    fmt[4] = byte_size;\n    this.stride += count * byte_size;\n    this.elem_count += count;\n  }\n  this.vert_count = verts.length / this.elem_count;\n  if (verts.length) {\n    this.vbo = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.vbo);\n    bound_array_buf = this.vbo;\n    gl.bufferData(gl.ARRAY_BUFFER, verts, gl.STATIC_DRAW);\n  }\n  this.orig_mode = mode;\n  if (idxs) {\n    if (idxs.ibo) {\n      this.ibo = idxs.ibo;\n      this.ibo_owned = false;\n      this.ibo_size = idxs.ibo_size;\n    } else {\n      this.ibo = gl.createBuffer();\n      this.ibo_owned = true;\n      this.ibo_size = idxs.length;\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibo);\n      bound_index_buf = this.ibo;\n      gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, idxs, gl.STATIC_DRAW);\n    }\n  } else if (mode === QUADS) {\n    assert(this.vert_count % 4 === 0);\n    let quad_count = this.vert_count / 4;\n    // PERFTODO: Use GL_QUADS_OES extension\n    this.ibo = getQuadIndexBuf(quad_count);\n    this.ibo_owned = false;\n    this.ibo_size = quad_count * 6;\n    this.mode = TRIANGLES;\n  } else {\n    this.ibo = null;\n    this.ibo_owned = false;\n  }\n}\n\nGeom.prototype.update = function (verts, num_verts) {\n  assert(this.orig_mode === QUADS);\n  if (num_verts > this.vert_count) {\n    if (bound_geom === this) {\n      bound_geom = null;\n    }\n    deleteBuffer(this.vbo);\n    // Note: matching size, ignoring num_verts\n    this.vert_count = verts.length / this.elem_count;\n    this.vbo = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.vbo);\n    bound_array_buf = this.vbo;\n    gl.bufferData(gl.ARRAY_BUFFER, verts, gl.DYNAMIC_DRAW);\n  } else {\n    // Fits\n    if (bound_array_buf !== this.vbo) {\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.vbo);\n      bound_array_buf = this.vbo;\n    }\n    gl.bufferSubData(gl.ARRAY_BUFFER, 0, verts.subarray(0, num_verts * this.elem_count));\n    // gl.bufferData(gl.ARRAY_BUFFER, verts, gl.DYNAMIC_DRAW);\n  }\n  let quad_count = num_verts / 4;\n  this.ibo = getQuadIndexBuf(quad_count);\n  this.ibo_size = quad_count * 6;\n};\n\nGeom.prototype.dispose = function () {\n  if (this.ibo_owned) {\n    deleteBuffer(this.ibo);\n  }\n  this.ibo = null;\n  deleteBuffer(this.vbo);\n  this.vbo = null;\n};\n\nlet bound_attribs = function () {\n  let r = [];\n  for (let ii = 0; ii < 16; ++ii) {\n    r.push({\n      vbo: null,\n      offset: 0\n    });\n  }\n  return r;\n}();\nGeom.prototype.bind = function () {\n  if (bound_geom !== this) {\n    bound_geom = this;\n    let vbo = this.vbo;\n\n    let offset = 0;\n    for (let ii = 0; ii < this.format.length; ++ii) {\n      let fmt = this.format[ii];\n      let count = fmt[2];\n      let byte_size = fmt[4];\n      if (bound_attribs[ii].vbo === vbo) {//  && bound_attribs[ii].offset = offset\n        // already bound\n      } else {\n        if (bound_array_buf !== vbo) {\n          gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\n          bound_array_buf = vbo;\n        }\n        let sem = fmt[0];\n        let gltype = fmt[1];\n        let normalized = fmt[3];\n        gl.vertexAttribPointer(sem, count, gltype, normalized, this.stride, offset);\n        bound_attribs[ii].vbo = bound_array_buf;\n        // bound_attribs[ii].offset = offset;\n      }\n      offset += count * byte_size;\n    }\n    // if (!used[1]) { // COLOR\n    //   used_attribs |= 1 << shader.semantics.COLOR;\n    //   bindUnitBuf(1, this.vert_count);\n    // }\n    enableVertexAttribArray(this.used_attribs);\n  }\n\n  if (this.ibo && bound_index_buf !== this.ibo) {\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibo);\n    bound_index_buf = this.ibo;\n  }\n};\nGeom.prototype.draw = function () {\n  this.bind();\n  assert(this.ibo); // else: gl.drawArrays(this.mode, ... this.ibo_size, gl.UNSIGNED_SHORT, 0);\n  gl.drawElements(this.mode, this.ibo_size, gl.UNSIGNED_SHORT, 0);\n};\n\nexport function create(...args) {\n  return new Geom(...args);\n}\n\nexport function startup() {\n  // Nothing for now.\n}","/* eslint no-bitwise:off */\n// From https://stackoverflow.com/questions/8936984/uint8array-to-string-in-javascript\n\nlet charCache = new Array(128); // Preallocate the cache for the common single byte chars\nlet charFromCodePt = String.fromCodePoint || String.fromCharCode;\nlet result = [];\nexport function decode(array) {\n  let codePt;\n  let byte1;\n  let buffLen = array.length;\n\n  result.length = 0;\n\n  for (let i = 0; i < buffLen;) {\n    byte1 = array[i++];\n\n    if (byte1 <= 0x7F) {\n      codePt = byte1;\n    } else if (byte1 <= 0xDF) {\n      codePt = (byte1 & 0x1F) << 6 | array[i++] & 0x3F;\n    } else if (byte1 <= 0xEF) {\n      codePt = (byte1 & 0x0F) << 12 | (array[i++] & 0x3F) << 6 | array[i++] & 0x3F;\n    } else if (String.fromCodePoint) {\n      codePt = (byte1 & 0x07) << 18 | (array[i++] & 0x3F) << 12 | (array[i++] & 0x3F) << 6 | array[i++] & 0x3F;\n    } else {\n      codePt = 63; // Cannot convert four byte code points, so use \"?\" instead\n      i += 3;\n    }\n\n    result.push(charCache[codePt] || (charCache[codePt] = charFromCodePt(codePt)));\n  }\n\n  return result.join('');\n}","// Derived from (MIT Licensed) https://github.com/uber-web/loaders.gl/tree/master/modules/gltf\n\nconst TYPES = ['SCALAR', 'VEC2', 'VEC3', 'VEC4'];\n\nexport function getAccessorTypeFromSize(size) {\n  const type = TYPES[size - 1];\n  return type || TYPES[0];\n}\n\n// glTF ACCESSOR CONSTANTS\n\nexport const ATTRIBUTE_TYPE_TO_COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\n\nexport const ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE = {\n  5120: 1,\n  5121: 1,\n  5122: 2,\n  5123: 2,\n  5125: 4,\n  5126: 4\n};\n\nexport const ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY = {\n  5120: Int8Array,\n  5121: Uint8Array,\n  5122: Int16Array,\n  5123: Uint16Array,\n  5125: Uint32Array,\n  5126: Float32Array\n};","// Derived from (MIT Licensed) https://github.com/uber-web/loaders.gl/tree/master/modules/gltf\n/* eslint-env browser */\n\nconst assert = require('assert');\n\n/* eslint-disable camelcase, max-statements */\nconst { unpackGLBBuffers } = require('./unpack-glb-buffers.js');\nconst { unpackBinaryJson } = require('./unpack-binary-json.js');\n\nfunction padTo4Bytes(byteLength) {\n  return byteLength + 3 & ~3; //eslint-disable-line no-bitwise\n}\n\nconst decode_utf8 = require('./decode-utf8.js');\n\nconst {\n  ATTRIBUTE_TYPE_TO_COMPONENTS,\n  ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE,\n  ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY\n} = require('./gltf-type-utils.js');\n\nconst MAGIC_glTF = 0x676c5446; // glTF in Big-Endian ASCII\n\nconst GLB_FILE_HEADER_SIZE = 12;\nconst GLB_CHUNK_HEADER_SIZE = 8;\n\nconst GLB_CHUNK_TYPE_JSON = 0x4e4f534a;\nconst GLB_CHUNK_TYPE_BIN = 0x004e4942;\n\nconst LE = true; // Binary GLTF is little endian.\nconst BE = false; // Magic needs to be written as BE\n\n// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#glb-file-format-specification\nfunction GLBParser() {\n  // Result\n  this.binaryByteOffset = null;\n  this.packedJson = null;\n  this.json = null;\n}\n\nfunction parseBinary(self) {\n  // GLB Header\n  const dataView = new DataView(self.glbArrayBuffer);\n  const magic1 = dataView.getUint32(0, BE); // Magic number (the ASCII string 'glTF').\n  const version = dataView.getUint32(4, LE); // Version 2 of binary glTF container format\n  const fileLength = dataView.getUint32(8, LE); // Total byte length of generated file\n\n  let valid = magic1 === MAGIC_glTF;\n  if (!valid) {\n    console.warn('Invalid GLB magic string');\n  }\n\n  assert(version === 2, `Invalid GLB version ${version}. Only .glb v2 supported`);\n  assert(fileLength > 20);\n\n  // Write the JSON chunk\n  const jsonChunkLength = dataView.getUint32(12, LE); // Byte length of json chunk\n  const jsonChunkFormat = dataView.getUint32(16, LE); // Chunk format as uint32\n\n  valid = jsonChunkFormat === GLB_CHUNK_TYPE_JSON || jsonChunkFormat === 0; // Back compat\n  assert(valid, `JSON chunk format ${jsonChunkFormat}`);\n\n  // Create a \"view\" of the binary encoded JSON data\n  const jsonChunkOffset = GLB_FILE_HEADER_SIZE + GLB_CHUNK_HEADER_SIZE; // First headers: 20 bytes\n  const jsonChunk = new Uint8Array(self.glbArrayBuffer, jsonChunkOffset, jsonChunkLength);\n\n  // Decode the JSON binary array into clear text\n  const jsonText = decode_utf8.decode(jsonChunk);\n\n  // Parse the JSON text into a JavaScript data structure\n  self.json = JSON.parse(jsonText);\n\n  // TODO - BIN chunk can be optional\n  const binaryChunkStart = jsonChunkOffset + padTo4Bytes(jsonChunkLength);\n  self.binaryByteOffset = binaryChunkStart + GLB_CHUNK_HEADER_SIZE;\n\n  const binChunkFormat = dataView.getUint32(binaryChunkStart + 4, LE); // Chunk format as uint32\n  valid = binChunkFormat === GLB_CHUNK_TYPE_BIN || binChunkFormat === 1; // Back compat\n  assert(valid, `BIN chunk format ${binChunkFormat}`);\n\n  return {\n    arrayBuffer: self.glbArrayBuffer,\n    binaryByteOffset: self.binaryByteOffset,\n    json: self.json\n  };\n}\n\nfunction parseInternal(self) {\n  const result = parseBinary(self);\n  self.packedJson = result.json;\n  self.unpackedBuffers = unpackGLBBuffers(self.glbArrayBuffer, self.json, self.binaryByteOffset);\n  self.json = unpackBinaryJson(self.json, self.unpackedBuffers);\n}\n\nGLBParser.prototype.parseSync = function (arrayBuffer) {\n  // Input\n  this.glbArrayBuffer = arrayBuffer;\n\n  // Only parse once\n  if (this.json === null && this.binaryByteOffset === null) {\n    parseInternal(this);\n  }\n  return this;\n};\n\n// Return the gltf JSON and the original arrayBuffer\nGLBParser.prototype.parse = function (arrayBuffer) {\n  return this.parseSync(arrayBuffer);\n};\n\n// Returns application JSON data stored in `key`\nGLBParser.prototype.getApplicationData = function (key) {\n  return this.json[key];\n};\n\n// Returns JSON envelope\nGLBParser.prototype.getJSON = function () {\n  return this.json;\n};\n\n// Return binary chunk\nGLBParser.prototype.getArrayBuffer = function () {\n  return this.glbArrayBuffer;\n};\n\n// Return index into binary chunk\nGLBParser.prototype.getBinaryByteOffset = function () {\n  return this.binaryByteOffset;\n};\n\n// Unpacks a bufferview into a new Uint8Array that is a view into the binary chunk\nGLBParser.prototype.getBufferView = function (glTFBufferView) {\n  const byteOffset = (glTFBufferView.byteOffset || 0) + this.binaryByteOffset;\n  return new Uint8Array(this.glbArrayBuffer, byteOffset, glTFBufferView.byteLength);\n};\n\n// Unpacks a glTF accessor into a new typed array that is a view into the binary chunk\nGLBParser.prototype.getBuffer = function (glTFAccessor) {\n  // Decode the glTF accessor format\n  const ArrayType = ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY[glTFAccessor.componentType];\n  const components = ATTRIBUTE_TYPE_TO_COMPONENTS[glTFAccessor.type];\n  const bytesPerComponent = ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE[glTFAccessor.componentType];\n  const length = glTFAccessor.count * components;\n  const byteLength = glTFAccessor.count * components * bytesPerComponent;\n\n  // Get the boundaries of the binary sub-chunk for this bufferView\n  const glTFBufferView = this.json.bufferViews[glTFAccessor.bufferView];\n  assert(byteLength >= 0 && glTFAccessor.byteOffset + byteLength <= glTFBufferView.byteLength);\n\n  const byteOffset = glTFBufferView.byteOffset + this.binaryByteOffset + glTFAccessor.byteOffset;\n  return new ArrayType(this.glbArrayBuffer, byteOffset, length);\n};\n\n// Unpacks an image into an HTML image\nGLBParser.prototype.getImageData = function (glTFImage) {\n  return {\n    typedArray: this.getBufferView(glTFImage.bufferView),\n    mimeType: glTFImage.mimeType || 'image/jpeg'\n  };\n};\n\nGLBParser.prototype.getImage = function (glTFImage) {\n  const arrayBufferView = this.getBufferView(glTFImage.bufferView);\n  const mimeType = glTFImage.mimeType || 'image/jpeg';\n  const blob = new Blob([arrayBufferView], { type: mimeType });\n  const urlCreator = window.URL || window.webkitURL;\n  const imageUrl = urlCreator.createObjectURL(blob);\n  const img = new Image();\n  img.src = imageUrl;\n  return img;\n};\n\n// GLBParser.prototype.getImageAsync = function (glTFImage) {\n//   return new Promise(resolve => {\n//     const arrayBufferView = this.getBufferView(glTFImage.bufferView);\n//     const mimeType = glTFImage.mimeType || 'image/jpeg';\n//     const blob = new Blob([arrayBufferView], {type: mimeType});\n//     const urlCreator = window.URL || window.webkitURL;\n//     const imageUrl = urlCreator.createObjectURL(blob);\n//     const img = new Image();\n//     img.onload = () => resolve(img);\n//     img.src = imageUrl;\n//   });\n// };\n\nmodule.exports = GLBParser;\nGLBParser.parse = function (data) {\n  let parser = new GLBParser();\n  return parser.parse(data);\n};","// Derived from (MIT Licensed) https://github.com/uber-web/loaders.gl/tree/master/modules/gltf\n\nfunction parseJSONPointer(value) {\n  if (typeof value === 'string') {\n    // Remove escape character\n    if (value.indexOf('##/') === 0) {\n      return value.slice(1);\n    }\n\n    let matches = value.match(/#\\/([a-z]+)\\/([0-9]+)/u);\n    if (matches) {\n      const index = parseInt(matches[2], 10);\n      return [matches[1], index];\n    }\n\n    // Legacy: `$$$i`\n    matches = value.match(/\\$\\$\\$([0-9]+)/u);\n    if (matches) {\n      const index = parseInt(matches[1], 10);\n      return ['accessors', index];\n    }\n  }\n\n  return null;\n}\n\nfunction decodeJSONPointer(object, buffers) {\n  const pointer = parseJSONPointer(object);\n  if (pointer) {\n    const field = pointer[0];\n    const index = pointer[1];\n    const buffer = buffers[field] && buffers[field][index];\n    if (buffer) {\n      return buffer;\n    }\n    console.error(`Invalid JSON pointer ${object}: #/${field}/${index}`);\n  }\n  return null;\n}\n\n// Recursively unpacks objects, replacing \"JSON pointers\" with typed arrays\nfunction unpackJsonArraysRecursive(json, topJson, buffers, options = {}) {\n  const object = json;\n\n  const buffer = decodeJSONPointer(object, buffers);\n  if (buffer) {\n    return buffer;\n  }\n\n  // Copy array\n  if (Array.isArray(object)) {\n    return object.map(element => unpackJsonArraysRecursive(element, topJson, buffers, options));\n  }\n\n  // Copy object\n  if (object !== null && typeof object === 'object') {\n    const newObject = {};\n    for (const key in object) {\n      newObject[key] = unpackJsonArraysRecursive(object[key], topJson, buffers, options);\n    }\n    return newObject;\n  }\n\n  return object;\n}\n\nexport function unpackBinaryJson(json, buffers, options = {}) {\n  return unpackJsonArraysRecursive(json, json, buffers, options);\n}","// Derived from (MIT Licensed) https://github.com/uber-web/loaders.gl/tree/master/modules/gltf\n\nconst assert = require('assert');\n\nconst {\n  ATTRIBUTE_TYPE_TO_COMPONENTS,\n  ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE,\n  ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY\n} = require('./gltf-type-utils.js');\n\n// Creates a new ArrayBuffer starting at the offset, containing all remaining bytes\n// TODO - should not be needed, see above\nfunction getArrayBufferAtOffset(arrayBuffer, byteOffset) {\n  const length = arrayBuffer.byteLength - byteOffset;\n  const binaryBuffer = new ArrayBuffer(length);\n  const sourceArray = new Uint8Array(arrayBuffer);\n  const binaryArray = new Uint8Array(binaryBuffer);\n  for (let i = 0; i < length; i++) {\n    binaryArray[i] = sourceArray[byteOffset + i];\n  }\n  return binaryBuffer;\n}\n\nfunction getArrayTypeAndLength(accessor, bufferView) {\n  const ArrayType = ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY[accessor.componentType];\n  const components = ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type];\n  const bytesPerComponent = ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE[accessor.componentType];\n  const length = accessor.count * components;\n  const byteLength = accessor.count * components * bytesPerComponent;\n  assert(byteLength >= 0 && byteLength <= bufferView.byteLength);\n  return { ArrayType, length, byteLength };\n}\n\nfunction unpackAccessors(arrayBuffer, bufferViews, json) {\n  // unpack accessors\n  const accessors = json.accessors || [];\n\n  const accessorBuffers = [];\n\n  for (let i = 0; i < accessors.length; ++i) {\n    const accessor = accessors[i];\n    assert(accessor);\n\n    const bufferView = bufferViews[accessor.bufferView];\n    // Draco encoded meshes don't have bufferView in accessor\n    if (bufferView) {\n      // Create a new typed array as a view into the combined buffer\n      const { ArrayType, length } = getArrayTypeAndLength(accessor, bufferView);\n      const array = new ArrayType(arrayBuffer, bufferView.byteOffset, length);\n      // Store the metadata on the array (e.g. needed to determine number of components per element)\n      array.accessor = accessor;\n      accessorBuffers.push(array);\n    }\n  }\n\n  return accessorBuffers;\n}\n\nfunction unpackImages(arrayBuffer, bufferViews, json) {\n  // unpack images\n  const images = json.images || [];\n\n  const imageBuffers = [];\n\n  for (let i = 0; i < images.length; ++i) {\n    const image = images[i];\n    assert(image);\n\n    if (image.bufferView === undefined) {\n      imageBuffers.push(null);\n      continue;\n    }\n\n    const bufferView = bufferViews[image.bufferView];\n    assert(bufferView);\n\n    // Create a new typed array as a view into the combined buffer\n    const array = new Uint8Array(arrayBuffer, bufferView.byteOffset, bufferView.byteLength);\n    // Store the metadata on the array (e.g. needed to determine number of components per element)\n    array.imate = image;\n    imageBuffers.push(array);\n  }\n\n  return imageBuffers;\n}\n\nexport function unpackGLBBuffers(arrayBuffer, json, binaryByteOffset) {\n  // TODO - really inefficient, should just use the offset into the original array buffer\n  if (binaryByteOffset) {\n    arrayBuffer = getArrayBufferAtOffset(arrayBuffer, binaryByteOffset);\n  }\n\n  const bufferViews = json.bufferViews || [];\n\n  for (let i = 0; i < bufferViews.length; ++i) {\n    const bufferView = bufferViews[i];\n    assert(bufferView.byteLength >= 0);\n  }\n\n  return {\n    // TODO: delete unpackAccessors and use buffer views only?\n    accessors: unpackAccessors(arrayBuffer, bufferViews, json),\n    images: unpackImages(arrayBuffer, bufferViews, json)\n  };\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n// Some code from Turbulenz: Copyright (c) 2012-2013 Turbulenz Limited\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* global navigator */\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst engine = require('./engine.js');\nconst local_storage = require('./local_storage.js');\nconst pointer_lock = require('./pointer_lock.js');\nconst { abs, min, sqrt } = Math;\nconst { vec2, v2add, v2copy, v2lengthSq, v2set, v2scale, v2sub } = require('./vmath.js');\n\nconst UP_EDGE = 0;\nconst DOWN_EDGE = 1;\nconst DOWN = 2;\n\n// per-app overrideable options\nconst TOUCH_AS_MOUSE = true;\nconst MAP_ANALOG_TO_DPAD = true;\n\nexport const ANY = -2;\nexport const POINTERLOCK = -1;\n\nexport let KEYS = {\n  BACKSPACE: 8,\n  TAB: 9,\n  ENTER: 13,\n  RETURN: 13,\n  SHIFT: 16,\n  CTRL: 17,\n  ALT: 18,\n  ESC: 27,\n  SPACE: 32,\n  PAGEUP: 33,\n  PAGEDOWN: 34,\n  END: 35,\n  HOME: 36,\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40,\n  INS: 45,\n  DEL: 46,\n  TILDE: 192\n};\n(function () {\n  for (let ii = 1; ii <= 12; ++ii) {\n    KEYS[`F${ii}`] = 111 + ii;\n  }\n  for (let ii = 48; ii <= 90; ++ii) {\n    // 0-9;A-Z\n    KEYS[String.fromCharCode(ii)] = ii;\n  }\n})();\nif (typeof Proxy === 'function') {\n  // Catch referencing keys that are not in our map\n  KEYS = new Proxy(KEYS, {\n    get: function (target, prop, receiver) {\n      let ret = target[prop];\n      assert(ret);\n      return ret;\n    }\n  });\n}\nexport const pad_codes = {\n  A: 0,\n  SELECT: 0, // GLOV name\n  B: 1,\n  CANCEL: 1, // GLOV name\n  X: 2,\n  Y: 3,\n  LB: 4,\n  LEFT_BUMPER: 4,\n  RB: 5,\n  RIGHT_BUMPER: 5,\n  LT: 6,\n  LEFT_TRIGGER: 6,\n  RT: 7,\n  RIGHT_TRIGGER: 7,\n  BACK: 8,\n  START: 9,\n  LEFT_STICK: 10,\n  RIGHT_STICK: 11,\n  UP: 12,\n  DOWN: 13,\n  LEFT: 14,\n  RIGHT: 15,\n  ANALOG_UP: 20,\n  ANALOG_LEFT: 21,\n  ANALOG_DOWN: 22,\n  ANALOG_RIGHT: 23\n};\n\nlet canvas;\nlet key_state = {};\nlet pad_states = []; // One map per gamepad to pad button states\nlet gamepad_data = []; // Other tracking data per gamepad\nlet mouse_pos = vec2();\nlet last_mouse_pos = vec2();\nlet mouse_pos_is_touch = false;\nlet mouse_over_captured = false;\nlet mouse_down = [];\nlet mouse_wheel = 0;\nlet movement_questionable_frames = 0;\nconst MOVEMENT_QUESTIONABLE_FRAMES = 2; // Need at least 2\n\nlet ptrlock;\n\nlet input_eaten_kb = false;\nlet input_eaten_mouse = false;\n\nlet touches = {}; // `m${button}` or touch_id -> TouchData\n\nexport let touch_mode = local_storage.getJSON('touch_mode', false);\n\nfunction TouchData(pos, touch, button) {\n  this.delta = vec2();\n  this.total = 0;\n  this.cur_pos = pos.slice(0);\n  this.start_pos = pos.slice(0);\n  this.release = false;\n  this.touch = touch;\n  this.button = button;\n  this.start_time = Date.now();\n  this.dispatched = false;\n  this.dispatched_drag_over = false;\n  this.state = DOWN_EDGE;\n}\n\nexport function pointerLocked() {\n  return ptrlock.isLocked();\n}\nlet pointerlock_touch_id = `m${POINTERLOCK}`;\nexport function pointerLockEnter() {\n  if (touch_mode) {\n    return;\n  }\n  let touch_data = touches[pointerlock_touch_id];\n  v2set(mouse_pos, engine.width * 0.5, engine.height * 0.5);\n  if (touch_data) {\n    v2copy(touch_data.start_pos, mouse_pos);\n    touch_data.release = false;\n  } else {\n    touch_data = touches[pointerlock_touch_id] = new TouchData(mouse_pos, false, POINTERLOCK);\n    touch_data.state = DOWN; // No DOWN_EDGE for this\n  }\n  movement_questionable_frames = MOVEMENT_QUESTIONABLE_FRAMES;\n  ptrlock.enter();\n}\nexport function pointerLockExit() {\n  let touch_data = touches[pointerlock_touch_id];\n  if (touch_data) {\n    v2copy(touch_data.cur_pos, mouse_pos);\n    touch_data.state = null; // no UP_EDGE for this\n    touch_data.release = true;\n  }\n  ptrlock.exit();\n  movement_questionable_frames = MOVEMENT_QUESTIONABLE_FRAMES;\n}\n\nfunction ignored(event) {\n  if (event.target.tagName !== 'INPUT') {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n}\n\nfunction onKeyUp(event) {\n  let code = event.keyCode;\n  if (event.target.tagName !== 'INPUT') {\n    event.stopPropagation();\n    event.preventDefault();\n  }\n\n  if (code === KEYS.ESC && pointerLocked()) {\n    pointerLockExit();\n  }\n  key_state[code] = UP_EDGE;\n  ptrlock.allowAsync();\n}\n\nfunction onKeyDown(event) {\n  let code = event.keyCode;\n  if (!(event.target.tagName === 'INPUT' || code >= KEYS.F5 && code <= KEYS.F12 || // Chrome debug hotkeys\n  code === KEYS.I && (event.altKey && event.metaKey || event.ctrlKey && event.shiftKey) // Safari, alternate Chrome\n  )) {\n    event.stopPropagation();\n    event.preventDefault();\n  }\n  // console.log(`${event.code} ${event.keyCode}`);\n  key_state[code] = DOWN_EDGE;\n  ptrlock.allowAsync();\n}\n\nlet temp_delta = vec2();\nfunction onMouseMove(event, no_stop) {\n  if (touch_mode) {\n    local_storage.setJSON('touch_mode', false);\n    touch_mode = false;\n  }\n  if (event.target.tagName !== 'INPUT' && !no_stop) {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n  // offsetX/layerX return position relative to text-entry boxes, not good!\n  mouse_pos[0] = event.clientX;\n  mouse_pos[1] = event.clientY;\n  // if (event.offsetX !== undefined) {\n  //   mouse_pos[0] = event.offsetX;\n  //   mouse_pos[1] = event.offsetY;\n  // } else {\n  //   mouse_pos[0] = event.layerX;\n  //   mouse_pos[1] = event.layerY;\n  // }\n  mouse_pos_is_touch = false;\n\n  let any_movement = false;\n  if (pointerLocked()) {\n    v2set(mouse_pos, engine.width * 0.5, engine.height * 0.5);\n    if (event.movementX || event.movementY) {\n      v2set(temp_delta, event.movementX, event.movementY);\n      any_movement = true;\n    }\n  } else {\n    v2sub(temp_delta, mouse_pos, last_mouse_pos);\n    if (temp_delta[0] || temp_delta[1]) {\n      any_movement = true;\n    }\n    v2copy(last_mouse_pos, mouse_pos);\n  }\n  if (any_movement && movement_questionable_frames && v2lengthSq(temp_delta) > 100 * 100) {\n    // giant movement right after entering or exiting poitner lock, ignore (Chrome bug)\n    // We get these unreasonable jumps in both movementXY and the other, presumably\n    // because pointerLocked() is slightly out of sync, though the large .movementX/Y\n    // is clearly erroneous.\n    any_movement = false;\n  }\n  if (any_movement) {\n    for (let button = POINTERLOCK; button < mouse_down.length; ++button) {\n      if (mouse_down[button] || button === POINTERLOCK && pointerLocked()) {\n        let touch_data = touches[`m${button}`];\n        if (touch_data) {\n          v2add(touch_data.delta, touch_data.delta, temp_delta);\n          touch_data.total += abs(temp_delta[0]) + abs(temp_delta[1]);\n          v2copy(touch_data.cur_pos, mouse_pos);\n        }\n      }\n    }\n  }\n}\n\nfunction onMouseDown(event) {\n  onMouseMove(event); // update mouse_pos\n  engine.sound_manager.resume();\n  let no_click = event.target.tagName === 'INPUT';\n\n  let button = event.button;\n  mouse_down[button] = mouse_pos.slice(0);\n  let touch_id = `m${button}`;\n  if (touches[touch_id]) {\n    v2copy(touches[touch_id].start_pos, mouse_pos);\n    touches[touch_id].release = false;\n  } else {\n    touches[touch_id] = new TouchData(mouse_pos, false, button);\n    if (no_click) {\n      touches[touch_id].state = DOWN; // no edge\n    }\n  }\n  ptrlock.allowAsync();\n}\n\nfunction onMouseUp(event) {\n  onMouseMove(event); // update mouse_pos\n  let no_click = event.target.tagName === 'INPUT';\n  let button = event.button;\n  if (mouse_down[button]) {\n    let touch_id = `m${button}`;\n    let touch_data = touches[touch_id];\n    if (touch_data) {\n      v2copy(touch_data.cur_pos, mouse_pos);\n      if (!no_click) {\n        touch_data.state = UP_EDGE;\n      }\n      touch_data.release = true;\n    }\n    delete mouse_down[button];\n  }\n  ptrlock.allowAsync();\n}\n\nfunction onWheel(event) {\n  onMouseMove(event, true);\n  if (event.wheelDelta > 0) {\n    mouse_wheel++;\n  } else if (event.wheelDelta < 0) {\n    mouse_wheel--;\n  }\n}\n\nlet touch_pos = vec2();\nfunction onTouchChange(event) {\n  engine.sound_manager.resume();\n  if (!touch_mode) {\n    local_storage.set('touch_mode', true);\n    touch_mode = true;\n  }\n  if (event.cancelable !== false) {\n    event.preventDefault();\n  }\n  let ct = event.touches;\n  let seen = {};\n\n  let new_count = ct.length;\n  let old_count = new_count;\n  // Look for press and movement\n  for (let ii = 0; ii < new_count; ++ii) {\n    let touch = ct[ii];\n    let last_touch = touches[touch.identifier];\n    v2set(touch_pos, touch.clientX, touch.clientY);\n    if (!last_touch) {\n      last_touch = touches[touch.identifier] = new TouchData(touch_pos, true, 0);\n      --old_count;\n    } else {\n      v2sub(temp_delta, touch_pos, last_touch.cur_pos);\n      v2add(last_touch.delta, last_touch.delta, temp_delta);\n      last_touch.total += abs(temp_delta[0]) + abs(temp_delta[1]);\n      v2copy(last_touch.cur_pos, touch_pos);\n    }\n    seen[touch.identifier] = true;\n    if (TOUCH_AS_MOUSE && new_count === 1) {\n      // Single touch, treat as mouse movement\n      v2copy(mouse_pos, touch_pos);\n      mouse_pos_is_touch = true;\n    }\n  }\n  // Look for release, if releasing exactly one final touch\n  let released_touch;\n  for (let id in touches) {\n    if (!seen[id]) {\n      let touch = touches[id];\n      if (touch.touch) {\n        ++old_count;\n        released_touch = touch;\n        touch.state = UP_EDGE;\n        touch.release = true;\n      }\n    }\n  }\n  if (TOUCH_AS_MOUSE) {\n    if (old_count === 1 && new_count === 0) {\n      delete mouse_down[0];\n      v2copy(mouse_pos, released_touch.cur_pos);\n      mouse_pos_is_touch = true;\n    } else if (new_count === 1) {\n      let touch = ct[0];\n      if (!old_count) {\n        mouse_down[0] = vec2(touch.clientX, touch.clientY);\n      }\n      v2set(mouse_pos, touch.clientX, touch.clientY);\n      mouse_pos_is_touch = true;\n    } else if (new_count > 1) {\n      // multiple touches, release mouse_down without emitting click\n      delete mouse_down[0];\n    }\n  }\n}\n\nfunction onBlurOrFocus(evt) {\n  for (let code in key_state) {\n    key_state[code] = UP_EDGE;\n  }\n}\n\nexport function startup(_canvas) {\n  canvas = _canvas;\n  ptrlock = pointer_lock.create(canvas);\n\n  let passive_param = false;\n  try {\n    let opts = Object.defineProperty({}, 'passive', {\n      get: function () {\n        passive_param = { passive: false };\n        return false;\n      }\n    });\n    window.addEventListener('test', null, opts);\n    window.removeEventListener('test', null, opts);\n  } catch (e) {\n    passive_param = false;\n  }\n\n  window.addEventListener('keydown', onKeyDown, false);\n  window.addEventListener('keyup', onKeyUp, false);\n\n  window.addEventListener('click', ignored, false);\n  window.addEventListener('contextmenu', ignored, false);\n  window.addEventListener('mousemove', onMouseMove, false);\n  window.addEventListener('mousedown', onMouseDown, false);\n  window.addEventListener('mouseup', onMouseUp, false);\n  window.addEventListener('DOMMouseScroll', onWheel, false);\n  window.addEventListener('mousewheel', onWheel, false);\n\n  window.addEventListener('blur', onBlurOrFocus, false);\n  window.addEventListener('focus', onBlurOrFocus, false);\n\n  canvas.addEventListener('touchstart', onTouchChange, passive_param);\n  canvas.addEventListener('touchmove', onTouchChange, passive_param);\n  canvas.addEventListener('touchend', onTouchChange, passive_param);\n  canvas.addEventListener('touchcancel', onTouchChange, passive_param);\n}\n\nconst DEADZONE = 0.26;\nconst DEADZONE_SQ = DEADZONE * DEADZONE;\nconst NUM_STICKS = 2;\nconst PAD_THRESHOLD = 0.25; // for turning analog motion into digital events\n\nfunction getGamepadData(idx) {\n  let gpd = gamepad_data[idx];\n  if (!gpd) {\n    gpd = gamepad_data[idx] = {\n      timestamp: 0,\n      sticks: new Array(NUM_STICKS)\n    };\n    for (let ii = 0; ii < NUM_STICKS; ++ii) {\n      gpd.sticks[ii] = vec2();\n    }\n    pad_states[idx] = {};\n  }\n  return gpd;\n}\n\nfunction updatePadState(ps, b, c) {\n  if (b && !ps[c]) {\n    ps[c] = DOWN_EDGE;\n  } else if (!b && ps[c]) {\n    ps[c] = UP_EDGE;\n  }\n}\n\nfunction gamepadUpdate() {\n  let gamepads = navigator.gamepads || navigator.webkitGamepads || navigator.getGamepads && navigator.getGamepads() || navigator.webkitGetGamepads && navigator.webkitGetGamepads();\n\n  if (gamepads) {\n    let numGamePads = gamepads.length;\n    for (let ii = 0; ii < numGamePads; ii++) {\n      let gamepad = gamepads[ii];\n      if (!gamepad) {\n        continue;\n      }\n      let gpd = getGamepadData(ii);\n      let ps = pad_states[ii];\n      // Update button states\n      if (gpd.timestamp < gamepad.timestamp) {\n        let buttons = gamepad.buttons;\n        gpd.timestamp = gamepad.timestamp;\n\n        let numButtons = buttons.length;\n        for (let n = 0; n < numButtons; n++) {\n          let value = buttons[n];\n          if (typeof value === 'object') {\n            value = value.value;\n          }\n          value = value > 0.5;\n          updatePadState(ps, value, n);\n        }\n      }\n\n      // Update axes states\n      let axes = gamepad.axes;\n      if (axes.length >= NUM_STICKS * 2) {\n        for (let n = 0; n < NUM_STICKS; ++n) {\n          let pair = gpd.sticks[n];\n          v2set(pair, axes[n * 2], -axes[n * 2 + 1]);\n          let magnitude = v2lengthSq(pair);\n          if (magnitude > DEADZONE_SQ) {\n            magnitude = sqrt(magnitude);\n\n            // Normalize lX and lY\n            v2scale(pair, pair, 1 / magnitude);\n\n            // Clip the magnitude at its max possible value\n            magnitude = min(magnitude, 1);\n\n            // Adjust magnitude relative to the end of the dead zone\n            magnitude = (magnitude - DEADZONE) / (1 - DEADZONE);\n\n            v2scale(pair, pair, magnitude);\n          } else {\n            v2set(pair, 0, 0);\n          }\n        }\n\n        // Calculate virtual directional buttons\n        updatePadState(ps, gpd.sticks[0][0] < -PAD_THRESHOLD, pad_codes.ANALOG_LEFT);\n        updatePadState(ps, gpd.sticks[0][0] > PAD_THRESHOLD, pad_codes.ANALOG_RIGHT);\n        updatePadState(ps, gpd.sticks[0][1] < -PAD_THRESHOLD, pad_codes.ANALOG_DOWN);\n        updatePadState(ps, gpd.sticks[0][1] > PAD_THRESHOLD, pad_codes.ANALOG_UP);\n      }\n    }\n  }\n}\n\nexport function tickInput() {\n  // browser frame has occurred since the call to endFrame(),\n  // we should now have `touches` and `key_state` populated with edge events\n  if (movement_questionable_frames) {\n    --movement_questionable_frames;\n  }\n  mouse_over_captured = false;\n  gamepadUpdate();\n  if (touches[pointerlock_touch_id] && !pointerLocked()) {\n    pointerLockExit();\n  }\n}\n\nfunction endFrameTickMap(map) {\n  Object.keys(map).forEach(keycode => {\n    switch (map[keycode]) {\n      case DOWN_EDGE:\n        map[keycode] = DOWN;\n        break;\n      case UP_EDGE:\n        delete map[keycode];\n        break;\n      default:\n    }\n  });\n}\nexport function endFrame(skip_mouse) {\n  endFrameTickMap(key_state);\n  pad_states.forEach(endFrameTickMap);\n  if (!skip_mouse) {\n    for (let touch_id in touches) {\n      let touch_data = touches[touch_id];\n      if (touch_data.release) {\n        // Manually null out touches[touch_id] - some Chrome optimizer bug causes\n        // callers to later get this old value (instead of the newly added on with\n        // the same ID) unless we null it out (then they seem to get the new one).\n        touches[touch_id] = null;\n        delete touches[touch_id];\n      } else {\n        touch_data.delta[0] = touch_data.delta[1] = 0;\n        touch_data.dispatched = false;\n        touch_data.dispatched_drag_over = false;\n        if (touch_data.state === DOWN_EDGE) {\n          touch_data.state = DOWN;\n        } else {\n          assert(touch_data.state !== UP_EDGE); // should also have set .release!\n        }\n      }\n    }\n    mouse_wheel = 0;\n    input_eaten_mouse = false;\n  }\n  input_eaten_kb = false;\n}\n\nexport function eatAllInput(skip_mouse) {\n  // destroy touches, remove all down and up edges\n  endFrame(skip_mouse);\n  if (!skip_mouse) {\n    mouse_over_captured = true;\n    input_eaten_mouse = true;\n  }\n  input_eaten_kb = true;\n}\n\nexport function eatAllKeyboardInput() {\n  eatAllInput(true);\n}\n\n// returns position mapped to current camera view\nexport function mousePos(dst) {\n  dst = dst || vec2();\n  camera2d.physicalToVirtual(dst, mouse_pos);\n  return dst;\n}\n\nexport function mouseWheel() {\n  let ret = mouse_wheel;\n  mouse_wheel = 0;\n  return ret;\n}\n\nfunction mousePosParam(param) {\n  param = param || {};\n  return {\n    x: param.x === undefined ? camera2d.x0() : param.x,\n    y: param.y === undefined ? camera2d.y0() : param.y,\n    w: param.w === undefined ? camera2d.w() : param.w,\n    h: param.h === undefined ? camera2d.h() : param.h,\n    button: param.button === undefined ? ANY : param.button\n  };\n}\n\nlet check_pos = vec2();\nfunction checkPos(pos, param) {\n  camera2d.physicalToVirtual(check_pos, pos);\n  return check_pos[0] >= param.x && (param.w === Infinity || check_pos[0] < param.x + param.w) && check_pos[1] >= param.y && (param.h === Infinity || check_pos[1] < param.y + param.h);\n}\n\nexport function mouseOver(param) {\n  if (mouse_over_captured || pointerLocked()) {\n    return false;\n  }\n  let pos_param = mousePosParam(param);\n\n  // eat mouse up/down/drag events\n  for (let id in touches) {\n    let touch = touches[id];\n    if (checkPos(touch.cur_pos, pos_param)) {\n      if (touch.state === DOWN_EDGE) {\n        touch.state = DOWN;\n      } else if (touch.state === UP_EDGE) {\n        touch.state = null;\n      }\n      if (!param || !param.drag_target) {\n        touch.dispatched = true;\n      }\n    }\n  }\n\n  if (checkPos(mouse_pos, pos_param)) {\n    mouse_over_captured = true;\n    return true;\n  }\n  return false;\n}\n\nexport function mouseDown(button) {\n  if (button === ANY) {\n    return mouseDown(0) || mouseDown(2);\n  }\n  button = button || 0;\n  return !input_eaten_mouse && mouse_down[button];\n}\n\nexport function mousePosIsTouch() {\n  return mouse_pos_is_touch;\n}\n\nexport function isTouchDown(param) {\n  if (input_eaten_mouse) {\n    return false;\n  }\n  let pos_param = mousePosParam(param);\n  for (let id in touches) {\n    let touch = touches[id];\n    if (checkPos(touch.cur_pos, pos_param)) {\n      return check_pos.slice(0);\n    }\n  }\n  return false;\n}\n\nexport function numTouches() {\n  return Object.keys(touches).length;\n}\n\nexport function keyDown(keycode) {\n  if (input_eaten_kb) {\n    return false;\n  }\n  return Boolean(key_state[keycode]);\n}\nexport function keyDownEdge(keycode) {\n  if (key_state[keycode] === DOWN_EDGE) {\n    key_state[keycode] = DOWN;\n    return true;\n  }\n  return false;\n}\nexport function keyUpEdge(keycode) {\n  if (key_state[keycode] === UP_EDGE) {\n    delete key_state[keycode];\n    return true;\n  }\n  return false;\n}\n\nexport function padGetAxes(out, stickindex, padindex) {\n  assert(stickindex >= 0 && stickindex < NUM_STICKS);\n  if (padindex === undefined) {\n    let sub = vec2();\n    v2set(out, 0, 0);\n    for (let ii = 0; ii < gamepad_data.length; ++ii) {\n      padGetAxes(sub, stickindex, ii);\n      v2add(out, sub);\n    }\n    return;\n  }\n  let sticks = getGamepadData(padindex).sticks;\n  v2copy(out, sticks[stickindex]);\n}\n\nfunction padButtonDownInternal(ps, padcode) {\n  return Boolean(ps[padcode]);\n}\nfunction padButtonDownEdgeInternal(ps, padcode) {\n  if (ps[padcode] === DOWN_EDGE) {\n    ps[padcode] = DOWN;\n    return true;\n  }\n  return false;\n}\nfunction padButtonUpEdgeInternal(ps, padcode) {\n  if (ps[padcode] === UP_EDGE) {\n    delete ps[padcode];\n    return true;\n  }\n  return false;\n}\n\nconst ANALOG_MAP = function () {\n  if (!MAP_ANALOG_TO_DPAD) {\n    return {};\n  }\n  let r = {};\n  r[pad_codes.LEFT] = pad_codes.ANALOG_LEFT;\n  r[pad_codes.RIGHT] = pad_codes.ANALOG_RIGHT;\n  r[pad_codes.UP] = pad_codes.ANALOG_UP;\n  r[pad_codes.DOWN] = pad_codes.ANALOG_DOWN;\n  return r;\n}();\nfunction padButtonShared(fn, padcode, padindex) {\n  assert(padcode !== undefined);\n  // Handle calling without a specific pad index\n  if (padindex === undefined) {\n    for (let ii = 0; ii < pad_states.length; ++ii) {\n      if (padButtonShared(fn, padcode, ii)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  if (input_eaten_mouse) {\n    return false;\n  }\n  let ps = pad_states[padindex];\n  if (!ps) {\n    return false;\n  }\n\n  if (ANALOG_MAP[padcode] && fn(ps, ANALOG_MAP[padcode])) {\n    return true;\n  }\n  return fn(ps, padcode);\n}\nexport function padButtonDown(padcode, padindex) {\n  return padButtonShared(padButtonDownInternal, padcode, padindex);\n}\nexport function padButtonDownEdge(padcode, padindex) {\n  return padButtonShared(padButtonDownEdgeInternal, padcode, padindex);\n}\nexport function padButtonUpEdge(padcode, padindex) {\n  return padButtonShared(padButtonUpEdgeInternal, padcode, padindex);\n}\n\nlet start_pos = vec2();\nlet cur_pos = vec2();\nlet delta = vec2();\n\nexport function mouseUpEdge(param) {\n  param = param || {};\n  let pos_param = mousePosParam(param);\n  let button = pos_param.button;\n  let max_click_dist = param.max_dist || 50; // TODO: relative to camera distance?\n\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (touch_data.state !== UP_EDGE || !(button === ANY || button === touch_data.button) || touch_data.total > max_click_dist) {\n      continue;\n    }\n    if (checkPos(touch_data.cur_pos, pos_param)) {\n      touch_data.state = null;\n      return {\n        button: touch_data.button,\n        pos: check_pos.slice(0),\n        start_time: touch_data.start_time\n      };\n    }\n  }\n  return false;\n}\nexports.click = mouseUpEdge;\n\nexport function mouseDownEdge(param) {\n  param = param || {};\n  let pos_param = mousePosParam(param);\n  let button = pos_param.button;\n\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (touch_data.state !== DOWN_EDGE || !(button === ANY || button === touch_data.button)) {\n      continue;\n    }\n    if (checkPos(touch_data.cur_pos, pos_param)) {\n      touch_data.state = DOWN;\n      return {\n        button: touch_data.button,\n        pos: check_pos.slice(0),\n        start_time: touch_data.start_time\n      };\n    }\n  }\n  return false;\n}\n\nexport function drag(param) {\n  param = param || {};\n  let pos_param = mousePosParam(param);\n  let button = pos_param.button;\n  let min_dist = param.min_dist || 0;\n\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (!(button === ANY || button === touch_data.button) || touch_data.dispatched) {\n      continue;\n    }\n    if (checkPos(touch_data.start_pos, pos_param)) {\n      camera2d.physicalDeltaToVirtual(delta, [touch_data.total / 2, touch_data.total / 2]);\n      let total = delta[0] + delta[1];\n      if (total < min_dist) {\n        continue;\n      }\n      if (!param.peek) {\n        touch_data.dispatched = true;\n      }\n      if (param.eat_clicks) {\n        touch_data.state = null;\n      }\n      if (param.payload) {\n        touch_data.drag_payload = param.payload;\n      }\n      camera2d.physicalToVirtual(start_pos, touch_data.start_pos);\n      camera2d.physicalToVirtual(cur_pos, touch_data.cur_pos);\n      camera2d.physicalDeltaToVirtual(delta, touch_data.delta);\n      return {\n        cur_pos,\n        start_pos,\n        delta, // this frame's delta\n        total, // total (linear) distance dragged\n        button: touch_data.button,\n        touch: touch_data.touch,\n        start_time: touch_data.start_time\n      };\n    }\n  }\n  return null;\n}\n\nexport function dragDrop(param) {\n  param = param || {};\n  let pos_param = mousePosParam(param);\n  let button = pos_param.button;\n\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (!(button === ANY || button === touch_data.button) || touch_data.dispatched || !touch_data.drag_payload) {\n      continue;\n    }\n    if (touch_data.state !== UP_EDGE) {\n      continue;\n    }\n    if (checkPos(touch_data.cur_pos, pos_param)) {\n      if (!param.peek) {\n        touch_data.dispatched = true;\n      }\n      return { drag_payload: touch_data.drag_payload };\n    }\n  }\n  return null;\n}\n\nexport function dragOver(param) {\n  param = param || {};\n  let pos_param = mousePosParam(param);\n  let button = pos_param.button;\n\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (!(button === ANY || button === touch_data.button) || touch_data.dispatched || touch_data.dispatched_drag_over || !touch_data.drag_payload) {\n      continue;\n    }\n    if (touch_data.state !== DOWN_EDGE && touch_data.state !== DOWN) {\n      continue;\n    }\n    if (checkPos(touch_data.cur_pos, pos_param)) {\n      // Separate 'dispatched' for dragOver (target) and drag (source) - they both need one dispatch per frame\n      if (!param.peek) {\n        touch_data.dispatched_drag_over = true;\n      }\n      return {\n        cur_pos: touch_data.cur_pos,\n        drag_payload: touch_data.drag_payload\n      };\n    }\n  }\n  return null;\n}","/* eslint-env browser */\n\nexports.storage_prefix = 'demo';\n\nlet lsd = function () {\n  try {\n    localStorage.test = 'test';\n    return localStorage;\n  } catch (e) {\n    return {};\n  }\n}();\nexport function get(key) {\n  key = `${exports.storage_prefix}_${key}`;\n  let ret = lsd[key];\n  if (ret === 'undefined') {\n    ret = undefined;\n  }\n  return ret;\n}\n\nexport function set(key, value) {\n  key = `${exports.storage_prefix}_${key}`;\n  if (value === undefined || value === null) {\n    delete lsd[key];\n  } else {\n    lsd[key] = value;\n  }\n}\n\nexport function setJSON(key, value) {\n  set(key, JSON.stringify(value));\n}\n\nexport function getJSON(key, def) {\n  let value = get(key);\n  try {\n    return JSON.parse(value);\n  } catch (e) {\n    // ignore\n  }\n  return def;\n}\n\nexport function clearAll() {\n  let prefix = new RegExp(`^${exports.storage_prefix}_`, 'u');\n  for (let key in lsd) {\n    if (key.match(prefix)) {\n      delete lsd[key];\n    }\n  }\n}\n\nexport function exportAll() {\n  let obj = {};\n  let prefix = new RegExp(`^${exports.storage_prefix}_(.*)`, 'u');\n  for (let key in lsd) {\n    let m = key.match(prefix);\n    if (m) {\n      let v = lsd[key];\n      if (v && v !== 'undefined') {\n        obj[m[1]] = v;\n      }\n    }\n  }\n  return JSON.stringify(obj);\n}\n\nexport function importAll(serialized) {\n  let obj = JSON.parse(serialized);\n  clearAll();\n  for (let key in obj) {\n    set(key, obj[key]);\n  }\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n// Some code from Turbulenz: Copyright (c) 2012-2013 Turbulenz Limited\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nexport function mat43() {\n  let r = new Float32Array(12);\n  r[0] = r[4] = r[8] = 1;\n  return r;\n}\n\nexport function m43identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  out[9] = 0;\n  out[10] = 0;\n  out[11] = 0;\n}\n\nexport function m43mul(out, a, b) {\n  let a0 = a[0];\n  let a1 = a[1];\n  let a2 = a[2];\n  let a3 = a[3];\n  let a4 = a[4];\n  let a5 = a[5];\n  let a6 = a[6];\n  let a7 = a[7];\n  let a8 = a[8];\n  let a9 = a[9];\n  let a10 = a[10];\n  let a11 = a[11];\n\n  let b0 = b[0];\n  let b1 = b[1];\n  let b2 = b[2];\n  let b3 = b[3];\n  let b4 = b[4];\n  let b5 = b[5];\n  let b6 = b[6];\n  let b7 = b[7];\n  let b8 = b[8];\n\n  out[0] = b0 * a0 + b3 * a1 + b6 * a2;\n  out[1] = b1 * a0 + b4 * a1 + b7 * a2;\n  out[2] = b2 * a0 + b5 * a1 + b8 * a2;\n  out[3] = b0 * a3 + b3 * a4 + b6 * a5;\n  out[4] = b1 * a3 + b4 * a4 + b7 * a5;\n  out[5] = b2 * a3 + b5 * a4 + b8 * a5;\n  out[6] = b0 * a6 + b3 * a7 + b6 * a8;\n  out[7] = b1 * a6 + b4 * a7 + b7 * a8;\n  out[8] = b2 * a6 + b5 * a7 + b8 * a8;\n  out[9] = b0 * a9 + b3 * a10 + b6 * a11 + b[9];\n  out[10] = b1 * a9 + b4 * a10 + b7 * a11 + b[10];\n  out[11] = b2 * a9 + b5 * a10 + b8 * a11 + b[11];\n\n  return out;\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint-env browser */\n\n/*\n  Convert models to GLB with:\n  node_modules\\.bin\\gltf-pipeline.cmd -t -i src/client/models/box.gltf -o src/client/models/box.glb\n  // The -t tells it not to embed the textures, but just leave the URIs\n */\n\nconst assert = require('assert');\n\nconst geom = require('./geom.js');\nconst glb_parser = require('./glb/parser.js');\nconst { ATTRIBUTE_TYPE_TO_COMPONENTS } = require('./glb/gltf-type-utils.js');\nconst renderer = require('./engine.js');\nconst shaders = require('./shaders.js');\nconst textures = require('./textures.js');\nconst { vec4 } = require('./vmath.js');\n\nexport let load_count = 0;\n\nlet box_glb = 'glTF\\x02\\0\\0\\0\\xCC\\b\\0\\0h\\x05\\0\\0JSON{\"asset\":{\"generator\":\"COLLADA2GLTF\",\"version\":\"2.0\"},\"scene\":0,\"scenes\":[{\"nodes\":[0]}],\"nodes\":[{\"children\":[1],\"matrix\":[1,0,0,0,0,0,-1,0,0,1,0,0,0,0,0,1]},{\"mesh\":0}],\"meshes\":[{\"primitives\":[{\"attributes\":{\"NORMAL\":1,\"POSITION\":2,\"TEXCOORD_0\":3},\"indices\":0,\"mode\":4,\"material\":0}],\"name\":\"Mesh\"}],\"accessors\":[{\"bufferView\":0,\"byteOffset\":0,\"componentType\":5123,\"count\":36,\"max\":[23],\"min\":[0],\"type\":\"SCALAR\"},{\"bufferView\":1,\"byteOffset\":0,\"componentType\":5126,\"count\":24,\"max\":[1,1,1],\"min\":[-1,-1,-1],\"type\":\"VEC3\"},{\"bufferView\":1,\"byteOffset\":288,\"componentType\":5126,\"count\":24,\"max\":[0.5,0.5,0.5],\"min\":[-0.5,-0.5,-0.5],\"type\":\"VEC3\"},{\"bufferView\":2,\"byteOffset\":0,\"componentType\":5126,\"count\":24,\"max\":[6,1],\"min\":[0,0],\"type\":\"VEC2\"}],\"materials\":[{\"pbrMetallicRoughness\":{\"baseColorTexture\":{\"index\":0,\"texCoord\":0},\"metallicFactor\":0,\"baseColorFactor\":[1,1,1,1],\"roughnessFactor\":1},\"name\":\"Texture\",\"emissiveFactor\":[0,0,0],\"alphaMode\":\"OPAQUE\",\"doubleSided\":false}],\"textures\":[{\"sampler\":0,\"source\":0}],\"samplers\":[{\"magFilter\":9729,\"minFilter\":9986,\"wrapS\":10497,\"wrapT\":10497}],\"bufferViews\":[{\"buffer\":0,\"byteOffset\":0,\"byteLength\":72,\"target\":34963},{\"buffer\":0,\"byteOffset\":72,\"byteLength\":576,\"byteStride\":12,\"target\":34962},{\"buffer\":0,\"byteOffset\":648,\"byteLength\":192,\"byteStride\":8,\"target\":34962}],\"buffers\":[{\"name\":\"box_textured\",\"byteLength\":840}]}H\\x03\\0\\0BIN\\0\\0\\0\\x01\\0\\x02\\0\\x03\\0\\x02\\0\\x01\\0\\x04\\0\\x05\\0\\x06\\0\\x07\\0\\x06\\0\\x05\\0\\b\\0\\t\\0\\n\\0\\x0B\\0\\n\\0\\t\\0\\f\\0\\r\\0\\x0E\\0\\x0F\\0\\x0E\\0\\r\\0\\x10\\0\\x11\\0\\x12\\0\\x13\\0\\x12\\0\\x11\\0\\x14\\0\\x15\\0\\x16\\0\\x17\\0\\x16\\0\\x15\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\xC0@\\0\\0\\0\\0\\0\\0\\xA0@\\0\\0\\0\\0\\0\\0\\xC0@\\xFE\\xFF\\x7F?\\0\\0\\xA0@\\xFE\\xFF\\x7F?\\0\\0\\x80@\\0\\0\\0\\0\\0\\0\\xA0@\\0\\0\\0\\0\\0\\0\\x80@\\0\\0\\x80?\\0\\0\\xA0@\\0\\0\\x80?\\0\\0\\0@\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0@\\0\\0\\x80?\\0\\0\\x80?\\0\\0\\x80?\\0\\0@@\\0\\0\\0\\0\\0\\0\\x80@\\0\\0\\0\\0\\0\\0@@\\0\\0\\x80?\\0\\0\\x80@\\0\\0\\x80?\\0\\0@@\\0\\0\\0\\0\\0\\0\\0@\\0\\0\\0\\0\\0\\0@@\\0\\0\\x80?\\0\\0\\0@\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\xFE\\xFF\\x7F?\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\x80?\\xFE\\xFF\\x7F?';\n{\n  let arr = new Uint8Array(box_glb.length);\n  for (let ii = 0; ii < box_glb.length; ++ii) {\n    arr[ii] = box_glb.charCodeAt(ii);\n  }\n  box_glb = arr.buffer;\n}\n\nexport let models = {};\n\nexport let default_vshader;\nexport let default_fshader;\n\nfunction initShaders() {\n  default_vshader = shaders.create(gl.VERTEX_SHADER, '// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\\n// Released under MIT License: https://opensource.org/licenses/MIT\\n#pragma WebGL\\nprecision highp float;\\n\\n// per-vertex input\\nattribute vec3 POSITION;\\n//attribute vec3 COLOR;\\nattribute vec2 TEXCOORD;\\nattribute vec3 NORMAL;\\n\\n// per-drawcall input\\nuniform mat3 mv_inv_trans;\\nuniform mat4 projection;\\nuniform mat4 mat_mv;\\nuniform vec4 color;\\n\\n// output\\nvarying vec4 interp_color;\\nvarying vec2 interp_texcoord;\\nvarying vec3 interp_normal_vs;\\n// varying vec3 interp_pos_vs;\\n\\nvoid main(void) {\\n  //interp_color = vec4(COLOR * color.rgb, color.a);\\n  interp_color = color;\\n  interp_texcoord = vec2(TEXCOORD);\\n  interp_normal_vs = mv_inv_trans * NORMAL;\\n  // gl_Position = vec4(POSITION, 1.0);\\n\\n  // gl_Position = mat_vp * (mat_m * vec4(POSITION, 1.0));\\n  // gl_Position = mvp * vec4(POSITION, 1.0);\\n  vec4 pos_vs = mat_mv * vec4(POSITION, 1.0);\\n  // interp_pos_vs = pos_vs.xyz;\\n  gl_Position = projection * pos_vs;\\n}');\n  default_fshader = shaders.create(gl.FRAGMENT_SHADER, '// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\\n// Released under MIT License: https://opensource.org/licenses/MIT\\n#pragma WebGL\\n\\nprecision lowp float;\\n\\nuniform sampler2D tex0; // source\\n\\nuniform vec3 light_diffuse;\\nuniform vec3 light_dir_vs;\\nuniform vec3 ambient;\\n\\nvarying vec4 interp_color;\\nvarying vec2 interp_texcoord;\\nvarying vec3 interp_normal_vs;\\n\\nvoid main(void) {\\n  vec4 texture0 = texture2D(tex0, interp_texcoord.xy);\\n#ifndef NOGAMMA\\n  texture0.rgb = texture0.rgb * texture0.rgb; // pow(2)\\n#endif\\n  vec4 albedo = texture0 * interp_color;\\n  if (albedo.a < 0.01) // TODO: Probably don\\'t want this, but makes hacking transparent things together easier for now\\n    discard;\\n\\n  vec3 normal_vs = normalize(interp_normal_vs);\\n  float diffuse = max(0.0, 0.5 + 0.5 * dot(normal_vs, -light_dir_vs.rgb));\\n\\n  vec3 light_color = diffuse * light_diffuse.rgb + ambient.rgb;\\n  gl_FragColor = vec4(light_color * albedo.rgb, albedo.a);\\n\\n#ifndef NOGAMMA\\n  gl_FragColor.rgb = pow(gl_FragColor.rgb, vec3(1.0/2.0));\\n#endif\\n}');\n}\n\nfunction Model(url) {\n  this.url = url;\n  let idx = url.lastIndexOf('/');\n  if (idx !== -1) {\n    this.base_url = url.slice(0, idx + 1);\n  } else {\n    this.base_url = '';\n  }\n}\n\nModel.prototype.load = function () {\n  ++load_count;\n  let xhr = new XMLHttpRequest();\n  xhr.open('GET', this.url, true);\n  xhr.responseType = 'arraybuffer';\n  xhr.onload = () => {\n    --load_count;\n    let array_buffer = xhr.response; // Note: not xhr.responseText\n    if ((xhr.status === 200 || xhr.status === 0) && array_buffer) {\n      this.parse(array_buffer);\n    }\n  };\n  xhr.send(null);\n};\n\nconst skip_attr = {\n  'TANGENT': true\n};\n\nModel.prototype.parse = function (glb_data) {\n  let glb = glb_parser.parse(glb_data);\n  if (!glb) {\n    return;\n  }\n  // Make Geoms for each primitives within each mesh\n  let glb_json = glb.getJSON();\n  let objs = [];\n  for (let ii = 0; ii < glb_json.meshes.length; ++ii) {\n    let mesh = glb_json.meshes[ii];\n    for (let jj = 0; jj < mesh.primitives.length; ++jj) {\n      let primitives = mesh.primitives[jj];\n      let material = glb_json.materials[primitives.material];\n      let texture = null;\n      if (material) {\n        // Just grabbing the base color texture, nothing else\n        let bct = (material.pbrMetallicRoughness || {}).baseColorTexture || {};\n        let texture_def = glb_json.textures && glb_json.textures[bct.index] || {};\n        let sampler_def = glb_json.samplers && glb_json.samplers[texture_def.sampler] || {};\n        let image = glb_json.images && glb_json.images[texture_def.source] || {};\n        if (image.uri) {\n          let params = {\n            url: `${this.base_url}${image.uri}`,\n            filter_mag: sampler_def.magFilter,\n            filter_min: sampler_def.minFilter,\n            wrap_s: sampler_def.wrapS,\n            wrap_t: sampler_def.wrapT\n          };\n          texture = textures.load(params);\n        }\n      }\n      let format = [];\n      let buffers = [];\n      let bidx = [];\n      let total_size = 0;\n      let vert_count = 0;\n      for (let attr in primitives.attributes) {\n        if (skip_attr[attr]) {\n          continue;\n        }\n        assert(shaders.semantic[attr] !== undefined);\n        let accessor = glb_json.accessors[primitives.attributes[attr]];\n        assert.equal(accessor.componentType, 5126); // F32\n        let geom_format = gl.FLOAT;\n        let geom_count = ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type];\n        assert(geom_count);\n        let my_vert_count = accessor.count /* / geom_count*/;\n        if (!vert_count) {\n          vert_count = my_vert_count;\n        } else {\n          assert.equal(vert_count, my_vert_count);\n        }\n        format.push([shaders.semantic[attr], geom_format, geom_count]);\n        let buffer = glb.getBuffer(accessor);\n        buffers.push(buffer);\n        bidx.push(0);\n        total_size += buffer.length;\n      }\n      // Interleave\n      let verts = new Float32Array(total_size);\n      let idx = 0;\n      for (let vert = 0; vert < vert_count; ++vert) {\n        for (let attr = 0; attr < format.length; ++attr) {\n          for (let kk = 0; kk < format[attr][2]; ++kk) {\n            verts[idx++] = buffers[attr][bidx[attr]++];\n          }\n        }\n      }\n      // Get indices\n      let accessor = glb_json.accessors[primitives.indices];\n      assert(accessor); // must be an indexed primitive set\n      assert.equal(accessor.type, 'SCALAR');\n      let idxs = glb.getBuffer(accessor);\n      if (accessor.componentType === 5125) {\n        // Uint32\n        assert(vert_count < 65536); // Fits in 16-bits\n        // Just convert to 16-bit\n        idxs = new Uint16Array(idxs);\n      } else {\n        assert.equal(accessor.componentType, 5123); // Uint16\n      }\n      objs.push({\n        geom: geom.create(format, verts, idxs, primitives.mode),\n        texture\n      });\n    }\n  }\n  // TODO: Something with nodes to tie together and position the meshes\n  this.data = {\n    objs\n    // glb, - Don't keep this, release it and any unreferenced data/buffers\n  };\n};\n\nModel.prototype.draw = function (mat) {\n  renderer.updateMatrices(mat); // before setting shader\n  shaders.bind(default_vshader, default_fshader, {\n    color: vec4(1, 1, 1, 1)\n  });\n  let objs = this.data.objs;\n  for (let ii = 0; ii < objs.length; ++ii) {\n    let obj = objs[ii];\n    if (obj.texture) {\n      textures.bind(0, obj.texture);\n    }\n    obj.geom.draw();\n  }\n};\n\n// Just draw the geometry, without any other binding\nModel.prototype.drawGeom = function () {\n  let objs = this.data.objs;\n  for (let ii = 0; ii < objs.length; ++ii) {\n    let obj = objs[ii];\n    obj.geom.draw();\n  }\n};\n\nexport function load(url) {\n  if (models[url]) {\n    return models[url];\n  }\n  let model = models[url] = new Model(url);\n  model.data = models.box.data; // stub until loaded\n  model.load();\n  return model;\n}\n\nexport function startup() {\n  initShaders();\n  let model_box = models.box = new Model('box');\n  model_box.parse(box_glb);\n}","//////////////////////////////////////////////////////////////////////////\n// Particle System Spec\n\n/*\n// Definitions\n// value = number or\n// value = [base, add_max] -> generates a number in the range [base, base + add_max)\nlet def_fire = {\n  particles: {\n    fire: {\n      blend: 'additive',\n      texture: 'fire.png',\n      color: [1,1,1,1], // multiplied by animation track, default 1,1,1,1, can be omitted\n      color_track: [ // just values, NOT random range\n        { t: 0.0, v: [1,0.4,0.4,1] },\n        { t: 0.7, v: [1,0,0,1] },\n        { t: 0.9, v: [0.2,0,0,1] },\n        { t: 1.0, v: [0,0,0,1] },\n      ],\n      size: [[32,16], [32,16]], // multiplied by animation track\n      size_track: [ // just values, NOT random range\n        { t: 0.0, v: [1,1] },\n        { t: 0.4, v: [0.5,0.5] },\n        { t: 0.7, v: [1,1] },\n        { t: 1.0, v: [1.5,1.5] },\n      ],\n      accel: [0,0],\n      rot: [0,360], // degrees\n      rot_vel: [10,2], // degrees per second\n      lifespan: [450,0], // milliseconds\n      kill_time_accel: 5,\n    },\n  },\n  emitters: {\n    fire: {\n      particle: 'fire',\n      // Random ranges affect each emitted particle:\n      pos: [[0,28], [0,28]],\n      vel: [0,0],\n      emit_rate: [60,20], // emissions per second\n      // Random ranges only calculated upon instantiation:\n      emit_time: [0,Infinity],\n      emit_initial: 10,\n    },\n  },\n  system_lifespan: Infinity, // must be manually killed\n};\n\n// Usage\nlet system = glov_engine.glov_particles.createSystem(def_fire, [50, 50, Z.PARTICLES]);\nsystem.updatePos(75, 75);\nsystem.killSoft(); // stops emitting and speeds up particles by kill_time_accel\nsystem.killHard(); // immediately stops drawing\n\n*/\n\n//////////////////////////////////////////////////////////////////////////\n// Implementation\n\nconst assert = require('assert');\nconst sprites = require('./sprites.js');\nconst textures = require('./textures.js');\nconst { vec2, v2copy, v2lerp, v2mul } = require('./vmath.js');\nconst { vec3, vec4, v3add, v4copy, v4lerp, v4mul } = require('./vmath.js');\n\nconst blend_map = {\n  alpha: sprites.BLEND_ALPHA,\n  additive: sprites.BLEND_ADDITIVE\n};\n\nexport function preloadParticleData(particle_data) {\n  // Preload all referenced particle textures\n  for (let key in particle_data.defs) {\n    let def = particle_data.defs[key];\n    for (let part_name in def.particles) {\n      let part_def = def.particles[part_name];\n      textures.load({ url: `img/${part_def.texture}.png` });\n    }\n  }\n}\n\n// Expect all values to be a pair of [base, add_max]\nfunction normalizeValue(v) {\n  if (v instanceof Float32Array && v.length >= 2) {\n    return v;\n  } else if (typeof v === 'number') {\n    return vec2(v, 0);\n  } else if (Array.isArray(v) || v instanceof Float32Array) {\n    // already an array, convert to Vec2\n    return vec2(v[0] || 0, v[1] || 0);\n  } else {\n    return assert(false);\n  }\n}\n\nfunction normalizeValueVec(vec, length) {\n  assert(length);\n  assert(Array.isArray(vec));\n  let ret = new Array(length);\n  for (let ii = 0; ii < length; ++ii) {\n    ret[ii] = normalizeValue(vec[ii]);\n  }\n  return ret;\n}\n\nfunction normalizeParticle(def, particle_manager) {\n  if (!def.normalized) {\n    let norm = def.normalized = {\n      blend: blend_map[def.blend] || sprites.BLEND_ALPHA,\n      texture: textures.load({ url: def.texture ? `img/${def.texture}.png` : 'img/glov/util_circle.png' }),\n      color: normalizeValueVec(def.color || [1, 1, 1, 1], 4),\n      color_track: null,\n      size: normalizeValueVec(def.size || [1, 1], 2),\n      size_track: null,\n      accel: normalizeValueVec(def.accel || [0, 0, 0], 3),\n      rot: normalizeValue(def.rot || 0),\n      rot_vel: normalizeValue(def.rot || 0),\n      lifespan: normalizeValue(def.lifespan || 1000),\n      kill_time_accel: normalizeValue(def.kill_time_accel || 1)\n    };\n    assert(norm.kill_time_accel[0] >= 1); // cannot slow down on kill!\n    if (def.color_track && def.color_track.length) {\n      assert(def.color_track.length > 1);\n      norm.color_track = [];\n      for (let ii = 0; ii < def.color_track.length; ++ii) {\n        let e = def.color_track[ii];\n        assert(typeof e.t === 'number');\n        let arr = new Float32Array(5);\n        arr[0] = e.v[0];\n        arr[1] = e.v[1];\n        arr[2] = e.v[2];\n        arr[3] = e.v[3];\n        arr[4] = e.t;\n        norm.color_track.push(arr);\n      }\n    }\n    if (def.size_track && def.size_track.length) {\n      assert(def.size_track.length > 1);\n      norm.size_track = [];\n      for (let ii = 0; ii < def.size_track.length; ++ii) {\n        let e = def.size_track[ii];\n        assert(typeof e.t === 'number');\n        let arr = new Float32Array(3);\n        arr[0] = e.v[0];\n        arr[1] = e.v[1];\n        arr[2] = e.t;\n        norm.size_track.push(arr);\n      }\n    }\n  }\n  return def.normalized;\n}\n\nfunction findParticle(particles, name) {\n  assert(particles[name] !== undefined);\n  return particles[name];\n}\n\nfunction normalizeEmitter(def, part_map) {\n  if (!def.normalized) {\n    def.normalized = {\n      part_idx: findParticle(part_map, def.particle),\n      pos: normalizeValueVec(def.pos || [0, 0, 0], 3),\n      vel: normalizeValueVec(def.vel || [0, 0, 0], 3),\n      emit_rate: normalizeValue(def.emit_rate || 10),\n      emit_time: normalizeValueVec(def.emit_time || [0, Infinity], 2),\n      emit_initial: normalizeValue(def.emit_initial || 1)\n    };\n    // convert particles per second to ms per emission\n    let min = def.normalized.emit_rate[0];\n    let max = def.normalized.emit_rate[0] + def.normalized.emit_rate[1];\n    def.normalized.emit_rate[0] = 1000 / max;\n    def.normalized.emit_rate[1] = 1000 / min;\n    assert(def.normalized.emit_rate[0] > 1); // Not more than 1000 per second, that's ridic'.\n  }\n  return def.normalized;\n}\n\nfunction normalizeDef(def, particle_manager) {\n  if (!def.normalized) {\n    let norm = def.normalized = {\n      system_lifespan: normalizeValue(def.system_lifespan || Infinity),\n      particles: [],\n      emitters: []\n    };\n    let part_map = {};\n    for (let key in def.particles) {\n      part_map[key] = norm.particles.length;\n      norm.particles.push(normalizeParticle(def.particles[key], particle_manager));\n    }\n    for (let key in def.emitters) {\n      norm.emitters.push(normalizeEmitter(def.emitters[key], part_map));\n    }\n  }\n  return def.normalized;\n}\n\nfunction instValue(v) {\n  return v[0] + Math.random() * v[1];\n}\nfunction instValueVec(v) {\n  let ret = new Float32Array(v.length);\n  for (let ii = 0; ii < v.length; ++ii) {\n    ret[ii] = instValue(v[ii]);\n  }\n  return ret;\n}\n\nlet temp_color = vec4();\nlet temp_color2 = vec4();\nlet temp_size = vec2();\nlet temp_size2 = vec2();\n// let temp_pos = v3allocZero();\n\nclass ParticleSystem {\n  constructor(parent, def_in, pos) {\n    assert(pos.length === 3);\n    this.parent = parent;\n    this.def = normalizeDef(def_in, parent);\n    this.system_lifespan = instValue(this.def.system_lifespan);\n    assert(this.system_lifespan > 0);\n    this.age = 0;\n    this.kill_hard = false;\n    this.kill_soft = false;\n    this.pos = vec3(pos[0], pos[1], pos[2]);\n    this.part_sets = [];\n    for (let ii = 0; ii < this.def.particles.length; ++ii) {\n      let def = this.def.particles[ii];\n      let part_set = {\n        def,\n        parts: []\n      };\n      this.part_sets.push(part_set);\n    }\n    this.emitters = [];\n    // Instantiate emitters\n    for (let ii = 0; ii < this.def.emitters.length; ++ii) {\n      let def = this.def.emitters[ii];\n      let emitter = {\n        def,\n        emit_time: instValueVec(def.emit_time),\n        countdown: 0,\n        started: false,\n        stopped: false\n      };\n      this.emitters.push(emitter);\n    }\n    // do initial tick for things that have an emit_time[0] of 0 and have an emit_initial\n    this.tick(0);\n  }\n\n  tickParticle(part, dt) {\n    // eslint-disable-line class-methods-use-this\n    let def = part.def;\n    part.age += dt;\n    let age_norm = part.age / part.lifespan;\n    if (age_norm >= 1) {\n      return true;\n    }\n\n    // Pos, vel - incrementally computed\n    let dts = dt / 1000;\n    part.pos[0] += part.vel[0] * dts;\n    part.pos[1] += part.vel[1] * dts;\n    part.pos[2] += part.vel[2] * dts;\n    part.vel[0] += part.accel[0] * dts;\n    part.vel[1] += part.accel[1] * dts;\n    part.vel[2] += part.accel[2] * dts;\n\n    // Color, size, rot - explicitly computed\n    v4copy(temp_color, part.color, temp_color);\n    if (def.color_track) {\n      if (age_norm < def.color_track[0][4]) {\n        v4mul(temp_color, temp_color, def.color_track[0]);\n      } else if (age_norm >= def.color_track[def.color_track.length - 1][4]) {\n        v4mul(temp_color, temp_color, def.color_track[def.color_track.length - 1]);\n      } else {\n        for (let ii = 0; ii < def.color_track.length - 1; ++ii) {\n          if (age_norm >= def.color_track[ii][4] && age_norm < def.color_track[ii + 1][4]) {\n            let weight = (age_norm - def.color_track[ii][4]) / (def.color_track[ii + 1][4] - def.color_track[ii][4]);\n            v4lerp(temp_color2, weight, def.color_track[ii], def.color_track[ii + 1]);\n            v4mul(temp_color, temp_color, temp_color2);\n            break;\n          }\n        }\n      }\n    }\n\n    v2copy(temp_size, part.size);\n    if (def.size_track) {\n      if (age_norm < def.size_track[0][4]) {\n        v2mul(temp_size, temp_size, def.size_track[0]);\n      } else if (age_norm >= def.size_track[def.size_track.length - 1][4]) {\n        v2mul(temp_size, temp_size, def.size_track[def.size_track.length - 1]);\n      } else {\n        for (let ii = 0; ii < def.size_track.length - 1; ++ii) {\n          if (age_norm >= def.size_track[ii][4] && age_norm < def.size_track[ii + 1][4]) {\n            let weight = (age_norm - def.size_track[ii][4]) / (def.size_track[ii + 1][4] - def.size_track[ii][4]);\n            v2lerp(temp_size2, weight, def.size_track[ii], def.size_track[ii + 1]);\n            v2mul(temp_size, temp_size, temp_size2);\n            break;\n          }\n        }\n      }\n    }\n\n    // TODO: let rot = part.rot + part.age * part.rot_vel;\n\n    // TODO: draw using:\n    //   rot\n    let w = part.size[0];\n    let h = part.size[1];\n    let x = part.pos[0] - w / 2;\n    let y = part.pos[1] - h / 2;\n    let z = part.pos[2];\n    sprites.queueraw4([def.texture], x, y, x, y + h, x + w, y + h, x + w, y, z, 0, 0, 1, 1, temp_color, null, null, def.blend);\n\n    return false;\n  }\n\n  tickPartSet(dt_orig, part_set) {\n    //let def = part_set.def;\n    let parts = part_set.parts;\n    for (let ii = parts.length - 1; ii >= 0; --ii) {\n      let part = parts[ii];\n      let dt = this.kill_soft ? dt_orig * part.kill_time_accel : dt_orig;\n      if (this.tickParticle(part, dt)) {\n        parts[ii] = parts[parts.length - 1];\n        parts.pop();\n      }\n    }\n  }\n\n  emitParticle(init_dt, emitter) {\n    let emitter_def = emitter.def;\n    let part_set = this.part_sets[emitter_def.part_idx];\n    let def = part_set.def;\n    let pos = instValueVec(emitter_def.pos, 3);\n    v3add(pos, pos, this.pos);\n    // PERFTODO: Make the whole Particle just a data[] Float32Array\n    let part = {\n      def,\n      pos,\n      color: instValueVec(def.color, 4),\n      size: instValueVec(def.size, 4),\n      vel: instValueVec(emitter_def.vel, 3),\n      accel: instValueVec(def.accel, 3),\n      rot: instValue(def.rot),\n      rot_vel: instValue(def.rot_vel),\n      lifespan: instValue(def.lifespan),\n      kill_time_accel: instValue(def.kill_time_accel),\n      age: 0\n    };\n    if (!this.tickParticle(part, init_dt)) {\n      part_set.parts.push(part);\n    }\n  }\n\n  tickEmitter(dt, emitter) {\n    let def = emitter.def;\n    // check for initial emission\n    if (!emitter.started && this.age >= emitter.emit_time[0]) {\n      emitter.started = true;\n      // ignore time before we started emitting\n      dt = this.age - emitter.emit_time[0];\n      let num = instValue(def.emit_initial);\n      for (let ii = 0; ii < num; ++ii) {\n        this.emitParticle(dt, emitter);\n      }\n      emitter.countdown = instValue(def.emit_rate);\n    }\n    if (emitter.started && !emitter.stopped) {\n      // should we stop?\n      let remaining_dt = dt;\n      let emit_dt = dt;\n      if (this.age >= emitter.emit_time[1]) {\n        emitter.stopped = true;\n        // Do not emit during time after we stopped\n        emit_dt -= this.age - emitter.emit_time[1];\n      }\n      // Emit dt's worth of particles\n      while (emit_dt >= emitter.countdown) {\n        emit_dt -= emitter.countdown;\n        remaining_dt -= emitter.countdown;\n        emitter.countdown = instValue(def.emit_rate);\n        this.emitParticle(remaining_dt, emitter);\n      }\n      emitter.countdown -= emit_dt;\n    }\n  }\n\n  tick(dt) {\n    if (this.kill_hard) {\n      return true;\n    }\n    // tick existing particles\n    for (let ii = this.part_sets.length - 1; ii >= 0; --ii) {\n      this.tickPartSet(dt, this.part_sets[ii]);\n    }\n    // advance time and spawn new ones (with partial ticks)\n    this.age += dt;\n    for (let ii = 0; ii < this.emitters.length; ++ii) {\n      this.tickEmitter(dt, this.emitters[ii]);\n    }\n\n    return this.age >= this.system_lifespan; // kill if past lifespan\n  }\n}\n\nclass ParticleManager {\n  constructor() {\n    this.systems = [];\n  }\n\n  createSystem(def, pos) {\n    let system = new ParticleSystem(this, def, pos);\n    this.systems.push(system);\n    return system;\n  }\n\n  tick(dt) {\n    for (let ii = this.systems.length - 1; ii >= 0; --ii) {\n      if (this.systems[ii].tick(dt)) {\n        this.systems[ii] = this.systems[this.systems.length - 1];\n        this.systems.pop();\n      }\n    }\n  }\n}\n\nexport function create(...args) {\n  return new ParticleManager(...args);\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst assert = require('assert');\nconst engine = require('./engine.js');\n\nexport function create(elem) {\n  let deferred_lock_id = 0;\n  let want_lock_async = false;\n  let trying_direct_lock = 0;\n  let direct_lock_works = false; // unknown at start\n  let direct_lock_disabled = false;\n  let async_pointer_lock_start_frame = 0;\n  let user_want_locked = false;\n\n  function isLocked() {\n    return user_want_locked; // Either it's locked, or there's an async attempt to lock it outstanding\n  }\n\n  function exitLock() {\n    user_want_locked = false;\n    document.exitPointerLock();\n  }\n\n  function pointerLog(msg) {\n    console.log(`PointerLock: ${msg}`);\n  }\n\n  function onPointerLockChange() {\n    if (document.pointerLockElement || document.mozPointerLockElement || document.webkitPointerLockElement) {\n      pointerLog('Lock successful');\n      if (trying_direct_lock) {\n        pointerLog('Direct lock works');\n        direct_lock_works = true;\n        trying_direct_lock = 0;\n      }\n      if (!user_want_locked) {\n        pointerLog('User canceled lock');\n        document.exitPointerLock();\n      }\n    } else {\n      pointerLog('Lock lost');\n      user_want_locked = false;\n    }\n  }\n\n  function onPointerLockError() {\n    pointerLog('Error');\n    if (trying_direct_lock) {\n      direct_lock_disabled = true;\n      want_lock_async = true;\n      trying_direct_lock = 0;\n    }\n  }\n\n  function asyncPointerLockCheck() {\n    deferred_lock_id = 0;\n    // If we asked for a lock, and direct locks are disabled, lock it\n    if (want_lock_async) {\n      want_lock_async = false;\n      pointerLog('Async watcher executing lock');\n      elem.requestPointerLock();\n      return;\n    }\n    // If we successfully locked through any means, stop\n    if (direct_lock_works) {\n      pointerLog('Async watcher canceled, direct lock worked');\n      return;\n    }\n    if (trying_direct_lock) {\n      // If we tried a direct lock 2+ frames ago, lock it, disable direct locks\n      if (engine.global_frame_index - trying_direct_lock >= 4) {\n        pointerLog('5 frames since attempting a direct lock, assuming failed');\n        direct_lock_disabled = true;\n        trying_direct_lock = 0;\n        elem.requestPointerLock();\n        return;\n      }\n    } else if (engine.global_frame_index !== async_pointer_lock_start_frame) {\n      // tick has happened, no request for lock, stop watching\n      // pointerLog('Async watcher done, no lock request');\n      return;\n    }\n    deferred_lock_id = setTimeout(asyncPointerLockCheck, 1);\n  }\n\n  function enterLock() {\n    // Assert that we got a mouse down event recently, otherwise this won't work\n    assert(engine.global_frame_index - async_pointer_lock_start_frame <= 2);\n    if (!direct_lock_works) {\n      assert(deferred_lock_id);\n    }\n    user_want_locked = true;\n    // If direct locks are disabled, just ask for async lock\n    if (direct_lock_disabled) {\n      pointerLog('Requesting async lock');\n      want_lock_async = true;\n      return;\n    }\n    pointerLog('Trying direct pointer lock');\n    if (!direct_lock_works) {\n      // if we don't know yet\n      trying_direct_lock = engine.global_frame_index;\n    }\n    elem.requestPointerLock();\n  }\n\n  function allowAsync() {\n    async_pointer_lock_start_frame = engine.global_frame_index;\n    // If we know direct locks work, do nothing, otherwise start watcher\n    if (!direct_lock_works) {\n      // pointerLog('Starting async watcher');\n      if (deferred_lock_id) {\n        clearTimeout(deferred_lock_id);\n      }\n      deferred_lock_id = setTimeout(asyncPointerLockCheck, 1);\n    } else {\n      // pointerLog('Direct lock works, not starting async watcher');\n    }\n  }\n\n  elem.requestPointerLock = elem.requestPointerLock || elem.mozRequestPointerLock || elem.webkitRequestPointerLock || function () {/* nop */};\n  document.exitPointerLock = document.exitPointerLock || document.mozExitPointerLock || document.webkitExitPointerLock || function () {/* nop */};\n\n  document.addEventListener('pointerlockchange', onPointerLockChange, false);\n  document.addEventListener('mozpointerlockchange', onPointerLockChange, false);\n  document.addEventListener('webkitpointerlockchange', onPointerLockChange, false);\n\n  document.addEventListener('pointerlockerror', onPointerLockError, false);\n  document.addEventListener('mozpointerlockerror', onPointerLockError, false);\n  document.addEventListener('webkitpointerlockerror', onPointerLockError, false);\n\n  return {\n    isLocked,\n    allowAsync,\n    enter: enterLock,\n    exit: exitLock\n  };\n}","/* eslint complexity:off */\n/*global Z: false */\nconst assert = require('assert');\nconst glov_engine = require('./engine.js');\nconst glov_input = require('./input.js');\nconst glov_font = require('./font.js');\nconst glov_ui = require('./ui.js');\nconst { vec4 } = require('./vmath.js');\nlet glov_markup = null; // Not ported\n\nconst { min, max, sin } = Math;\nconst { cloneShallow, merge, nearSame } = require('../../common/util.js');\n\nlet font;\n\nconst selbox_font_style_default = glov_font.style(null, {\n  color: 0xDFDFDFff\n});\n\nconst selbox_font_style_selected = glov_font.style(null, {\n  color: 0xFFFFFFff\n});\n\nconst selbox_font_style_down = glov_font.style(null, {\n  color: 0x000000ff\n});\n\nconst selbox_font_style_disabled = glov_font.style(null, {\n  color: 0x808080ff\n});\n\nexport const default_display = {\n  style_default: selbox_font_style_default,\n  style_selected: selbox_font_style_selected,\n  style_disabled: selbox_font_style_disabled,\n  style_down: selbox_font_style_down,\n  no_background: false,\n  no_buttons: false,\n  centered: false,\n  bounce: true,\n  tab_stop: 0,\n  xpad: 8,\n  // selection_highlight: null, // TODO: custom / better selection highlight for menus\n  use_markup: false // always false, Markup not ported\n};\n\nconst color_gray50 = vec4(0.313, 0.313, 0.313, 1.000);\n// const color_gray80 = vec4(0.500, 0.500, 0.500, 1.000);\nconst color_grayD0 = vec4(0.816, 0.816, 0.816, 1.000);\nconst color_white = vec4(1, 1, 1, 1);\n\nconst SELBOX_BOUNCE_TIME = 80;\n\n// Used by GlovSimpleMenu and GlovSelectionBox\nexport class GlovMenuItem {\n  constructor(params) {\n    params = params || {};\n    if (params instanceof GlovMenuItem) {\n      for (let field in params) {\n        this[field] = params[field];\n      }\n      return;\n    }\n    if (typeof params === 'string') {\n      params = { name: params };\n    }\n    this.name = params.name || 'NO_NAME'; // name to display\n    this.state = params.state || null; // state to set upon selection\n    this.cb = params.cb || null; // callback to call upon selection\n    // TODO - cb function on value change?\n    this.value = null; // can be number or string\n    this.value_min = 0;\n    this.value_max = 0;\n    this.value_inc = 0;\n    this.tag = params.tag || null; // for isSelected(tag)\n    // was bitmask\n    this.exit = Boolean(params.exit);\n    this.prompt_int = Boolean(params.prompt_int);\n    this.prompt_string = Boolean(params.prompt_string);\n    this.no_sound = Boolean(params.no_sound);\n    this.slider = Boolean(params.slider);\n    this.no_controller_exit = Boolean(params.no_controller_exit);\n    this.plus_minus = Boolean(params.plus_minus);\n    this.disabled = Boolean(params.disabled);\n    this.centered = Boolean(params.centered);\n  }\n}\n\nclass GlovSelectionBox {\n  constructor(params) {\n    // Options (and defaults)\n    this.x = 0;\n    this.y = 0;\n    this.z = Z.UI;\n    this.width = glov_ui.button_width;\n    this.items = [];\n    this.is_dropdown = false;\n    this.transient_focus = false;\n    this.disabled = false;\n    this.display = cloneShallow(default_display);\n    this.scroll_height = 0;\n    this.font_height = glov_ui.font_height;\n    this.entry_height = glov_ui.button_height;\n    this.auto_reset = true;\n    this.applyParams(params);\n\n    // Run-time state\n    this.dropdown_visible = false;\n    this.selected = 0;\n    this.was_clicked = false;\n    this.was_right_clicked = false;\n    this.is_focused = false;\n    this.dummy_focus_check = { selbox_dummy: 1 };\n    this.mouse_mode = false;\n    this.last_mousex = 0;\n    this.last_mousey = 0;\n    this.bounce_time = 0;\n    this.expected_frame_index = 0;\n    // this.sa = TODO\n  }\n\n  applyParams(params) {\n    if (!params) {\n      return;\n    }\n    for (let f in params) {\n      if (f === 'items') {\n        this.items = params.items.map(item => new GlovMenuItem(item));\n      } else if (f === 'display') {\n        merge(this.display, params[f]);\n      } else {\n        this[f] = params[f];\n      }\n    }\n  }\n\n  isSelected(tag_or_index) {\n    if (typeof tag_or_index === 'number') {\n      return this.selected === tag_or_index;\n    }\n    return this.items[this.selected].tag === tag_or_index;\n  }\n\n  getHeight() {\n    let { display, entry_height } = this;\n    if (this.is_dropdown) {\n      return entry_height + 2;\n    }\n    let list_height = this.items.length * entry_height;\n    let do_scroll = this.scroll_height && this.items.length * entry_height > this.scroll_height;\n    if (do_scroll) {\n      list_height = this.scroll_height;\n    }\n    list_height += 2;\n    if (!display.no_background) {\n      list_height += 4;\n    }\n    return list_height + 3;\n  }\n\n  run(params) {\n    this.applyParams(params);\n    let { x, y, z, width, font_height, entry_height, auto_reset } = this;\n    let { KEYS, pad_codes } = glov_input;\n\n    if (auto_reset && this.expected_frame_index !== glov_engine.getFrameIndex()) {\n      // Reset, select first non-disabled entry\n      for (let ii = 0; ii < this.items.length; ++ii) {\n        if (!this.items[ii].disabled) {\n          this.selected = ii;\n          break;\n        }\n      }\n    }\n\n    let y0 = y;\n    let yret;\n    let display = this.display;\n    this.was_clicked = false;\n    this.was_right_clicked = false;\n    let pos_changed = false;\n\n    let was_focused = this.is_focused;\n    // Trick to detect if we gained focus from ahead or behind of ourselves, for transient_focus mode\n    let gained_focus_forward = false;\n    if (!this.disabled && !this.is_focused) {\n      gained_focus_forward = glov_ui.focusCheck(this.dummy_focus_check);\n      if (gained_focus_forward) {\n        glov_ui.focusSteal(this);\n      }\n    }\n\n    let old_sel = this.selected;\n    let num_non_disabled_selections = 0;\n    let eff_sel = -1;\n    for (let ii = 0; ii < this.items.length; ++ii) {\n      let item = this.items[ii];\n      if (!item.disabled) {\n        if (eff_sel === -1 && this.selected <= ii) {\n          eff_sel = num_non_disabled_selections;\n        }\n        num_non_disabled_selections++;\n      }\n    }\n    // This is OK, can have an empty selection box: assert(num_non_disabled_selections);\n    if (eff_sel === -1) {\n      // perhaps had the end selected, and selection became smaller\n      eff_sel = 0;\n    }\n\n    let focused = this.is_focused = this.disabled ? false : glov_ui.focusCheck(this);\n    let gained_focus = focused && !was_focused;\n    if (this.transient_focus && gained_focus) {\n      if (gained_focus_forward) {\n        eff_sel = 0;\n      } else {\n        eff_sel = num_non_disabled_selections - 1;\n      }\n      pos_changed = true;\n    }\n\n    if (!this.is_dropdown && !display.no_background) {\n      let bg_height = this.getHeight();\n      if (focused) {\n        glov_ui.drawRect(x, y, x + width, y + bg_height - 2, z, color_white);\n        y += 2;\n        x += 2;\n        width -= 4;\n        glov_ui.drawRect(x, y, x + width, y + bg_height - 6, z + 0.1, color_gray50);\n        y += 2;\n        x += 2;\n        width -= 4;\n      } else {\n        glov_ui.drawRect(x, y, x + width, y + bg_height - 2, z, color_gray50);\n        y += 4;\n        x += 4;\n        width -= 8;\n      }\n    }\n\n    let page_size = (this.scroll_height - 1) / entry_height;\n\n    if (focused) {\n      if (glov_input.keyDownEdge(KEYS.PAGEDOWN) || (glov_input.padButtonDown(pad_codes.RIGHT_TRIGGER) || glov_input.padButtonDown(pad_codes.LEFT_TRIGGER)) && glov_input.padButtonDownEdge(pad_codes.DOWN)) {\n        eff_sel += page_size;\n        eff_sel = min(eff_sel, num_non_disabled_selections - 1);\n        this.mouse_mode = false;\n        pos_changed = true;\n      }\n      if (glov_input.keyDownEdge(KEYS.PAGEUP) || (glov_input.padButtonDown(pad_codes.RIGHT_TRIGGER) || glov_input.padButtonDown(pad_codes.LEFT_TRIGGER)) && glov_input.padButtonDownEdge(pad_codes.UP)) {\n        eff_sel -= page_size;\n        eff_sel = max(eff_sel, 0);\n        this.mouse_mode = false;\n        pos_changed = true;\n      }\n      if (glov_input.keyDownEdge(KEYS.DOWN) || glov_input.keyDownEdge(KEYS.S) || glov_input.padButtonDownEdge(pad_codes.DOWN)) {\n        eff_sel++;\n        this.mouse_mode = false;\n        pos_changed = true;\n      }\n      if (glov_input.keyDownEdge(KEYS.UP) || glov_input.keyDownEdge(KEYS.W) || glov_input.padButtonDownEdge(pad_codes.UP)) {\n        eff_sel--;\n        this.mouse_mode = false;\n        pos_changed = true;\n      }\n      if (glov_input.keyDownEdge(KEYS.HOME)) {\n        eff_sel = 0;\n        this.mouse_mode = false;\n        pos_changed = true;\n      }\n      if (glov_input.keyDownEdge(KEYS.END)) {\n        eff_sel = num_non_disabled_selections - 1;\n        this.mouse_mode = false;\n        pos_changed = true;\n      }\n    }\n\n    let sel_changed = false;\n    if (eff_sel < 0) {\n      if (this.transient_focus) {\n        eff_sel = 0;\n        sel_changed = true;\n        glov_ui.focusPrev(this);\n      } else {\n        eff_sel = num_non_disabled_selections - 1;\n      }\n    }\n    if (eff_sel >= num_non_disabled_selections && num_non_disabled_selections) {\n      if (this.transient_focus) {\n        eff_sel = num_non_disabled_selections - 1;\n        sel_changed = true;\n        glov_ui.focusNext(this);\n      } else {\n        eff_sel = 0;\n      }\n    }\n\n    // Convert from eff_sel back to actual selection\n    for (let ii = 0; ii < this.items.length; ++ii) {\n      let item = this.items[ii];\n      if (!item.disabled) {\n        if (!eff_sel) {\n          this.selected = ii;\n          break;\n        }\n        --eff_sel;\n      }\n    }\n\n    let pad = 8;\n\n    if (this.is_dropdown) {\n      // display header\n      let color0 = color_white;\n      // let color1 = color_white;\n      // let dropdown_rect = glov_ui.sprites.menu_header.uidata.rects[2];\n      // let dropdown_width = (dropdown_rect[2] - dropdown_rect[0]) / (dropdown_rect[3] - dropdown_rect[1]) *\n      //   entry_height;\n      // let dropdown_x = x + width - dropdown_width;\n      //int dropdown_w = glov_ui_menu_header.right.GetTileWidth();\n      if (!this.disabled && glov_input.click({\n        x, y,\n        w: width, h: entry_height\n      })) {\n        glov_ui.focusSteal(this);\n        this.dropdown_visible = !this.dropdown_visible;\n        color0 = color_grayD0;\n        // color1 = color_gray80;\n      } else if (!this.disabled && glov_input.mouseOver({\n        x, y, w: width, h: entry_height\n      })) {\n        glov_ui.setMouseOver(this);\n        color0 = color_grayD0;\n        // color1 = color_gray80;\n      }\n      glov_ui.drawHBox({\n        x, y, z: z + 1,\n        w: width, h: entry_height\n      }, glov_ui.sprites.menu_header, color0); // TODO: only pieces 1 and 2?\n      // glov_ui.draw_list.queue(glov_ui.sprites.menu_header,\n      //   dropdown_x, y, z + 1.5, color1, [dropdown_width, entry_height, 1, 1],\n      //   glov_ui.sprites.menu_header.uidata.rects[2]);\n      font.drawSizedAligned(focused ? glov_ui.font_style_focused : glov_ui.font_style_normal, x + display.xpad, y, z + 2, font_height, glov_font.ALIGN.HFIT | glov_font.ALIGN.VCENTER, // eslint-disable-line no-bitwise\n      width - display.xpad * 2, entry_height, this.items[this.selected].name);\n      y += entry_height;\n      yret = y + 2;\n      z += 1000; // drop-down part should be above everything\n    }\n\n    if (!this.is_dropdown || this.dropdown_visible) {\n      let do_scroll = this.scroll_height && this.items.length * entry_height > this.scroll_height;\n      let y_save = y;\n      let x_save = x;\n      let scroll_pos = 0;\n      let eff_width = width;\n      if (do_scroll) {\n        // this.sa.display = &scroll_area_no_background;\n        if (pos_changed) {\n          // ensure part of visible scroll area includes the current selection\n          let buffer = min(1.5 * entry_height, (this.scroll_height - entry_height) / 2);\n          let min_scroll_pos = max(0, this.selected * entry_height - buffer);\n          let old_scroll_pos = this.sa.scroll_pos;\n          if (min_scroll_pos < this.sa.scroll_pos) {\n            this.sa.scroll_pos = min_scroll_pos;\n          }\n          let max_scroll_pos = min(this.items.length * entry_height, (this.selected + 1) * entry_height + buffer) - this.scroll_height;\n          if (max_scroll_pos > this.sa.scroll_pos) {\n            this.sa.scroll_pos = max_scroll_pos;\n          }\n          // Make it smooth/bouncy a bit\n          this.sa.overscroll = old_scroll_pos - this.sa.scroll_pos;\n        }\n        this.sa.begin(x, y, z, width, this.scroll_height, color_white);\n        scroll_pos = this.sa.scroll_pos + this.sa.overscroll;\n        y = 0;\n        x = 0;\n        // extern float glov_scrollbar_scale;\n        // eff_width = width - glov_ui_scrollbar_top.GetTileWidth() * glov_scrollbar_scale;\n      }\n      for (let i = 0; i < this.items.length; i++) {\n        let item = this.items[i];\n        let entry_disabled = item.disabled;\n        let image_set = null;\n        if (!this.disabled && !entry_disabled && glov_input.click({\n          x, y, w: width, h: entry_height\n        })) {\n          glov_ui.focusSteal(this);\n          this.was_clicked = true;\n          this.mouse_mode = true;\n          this.selected = i;\n        }\n        if (!this.disabled && !entry_disabled && glov_input.click({\n          x, y, w: width, h: entry_height\n        })) {\n          glov_ui.focusSteal(this);\n          this.was_right_clicked = true;\n          this.mouse_mode = true;\n          this.selected = i;\n        }\n        let is_mouseover = false;\n        if (!this.disabled && !entry_disabled && glov_input.mouseOver({\n          x, y, w: width, h: entry_height\n        })) {\n          let mpos = glov_input.mousePos();\n          is_mouseover = true;\n          if (focused || this.transient_focus) {\n            if (this.expected_frame_index === glov_engine.getFrameIndex() && (mpos[0] !== this.last_mousex || !nearSame(mpos[1] - scroll_pos, this.last_mousey, 1.25))) {\n              this.mouse_mode = true;\n              this.selected = i;\n            }\n            this.last_mousex = mpos[0];\n            this.last_mousey = mpos[1] - scroll_pos;\n          }\n          // Not used anymore because in mouse_mode, rollover *is* selection, don't have two cursors!\n          // if (this.mouse_mode) {\n          //   text_color = 0x000000ff;\n          //   image_set = &menu_rollover;\n          // }\n        }\n\n        let style;\n        let show_selection = !this.disabled && (!(this.transient_focus && !this.is_focused) || is_mouseover);\n        let bounce = false;\n        if (this.selected === i && show_selection) {\n          style = display.style_selected || selbox_font_style_selected;\n          image_set = glov_ui.sprites.menu_selected;\n          if (is_mouseover && glov_input.mouseDown()) {\n            if (glov_ui.sprites.menu_down) {\n              image_set = glov_ui.sprites.menu_down;\n            } else {\n              style = display.style_down || selbox_font_style_down;\n            }\n          }\n          if (display.bounce && !this.is_dropdown) {\n            let ms = glov_engine.getFrameDt();\n            if (this.selected !== old_sel) {\n              bounce = true;\n              this.bounce_time = SELBOX_BOUNCE_TIME;\n            } else if (ms >= this.bounce_time) {\n              this.bounce_time = 0;\n            } else {\n              bounce = true;\n              this.bounce_time -= ms;\n            }\n          }\n        } else if (entry_disabled) {\n          style = display.style_disabled || selbox_font_style_disabled;\n          image_set = glov_ui.sprites.menu_entry;\n        } else {\n          style = display.style_default || selbox_font_style_default;\n          image_set = glov_ui.sprites.menu_entry;\n        }\n        let yoffs = 0;\n        let bounce_amt = 0;\n        if (bounce) {\n          bounce_amt = sin(this.bounce_time * 20 / SELBOX_BOUNCE_TIME / 10);\n          yoffs = -4 * bounce_amt * entry_height / 32;\n        }\n        if (!display.no_buttons) {\n          glov_ui.drawHBox({ x, y: y + yoffs, z: z + 1, w: eff_width, h: entry_height }, image_set, color_white);\n        }\n        // spriteListClipperPush(x, y + yoffs, eff_width - pad, entry_height);\n        let did_tab = false;\n        let text_y = y + yoffs;\n        if (display.tab_stop) {\n          let str = item.name;\n          let tab_idx = str.indexOf('\\t');\n          if (tab_idx !== -1) {\n            did_tab = true;\n            let pre = str.slice(0, tab_idx);\n            let post = str.slice(tab_idx + 1);\n            let x1 = x + display.xpad;\n            let x2 = x + display.xpad + display.tab_stop + pad;\n            let w1 = display.tab_stop;\n            let w2 = eff_width - display.tab_stop - display.xpad * 2 - pad;\n            if (display.use_markup) {\n              let md = {};\n              md.align = glov_font.ALIGN.HFIT;\n              md.x_size = md.y_size = font_height;\n              md.w = w1;\n              md.h = 1;\n              md.style = style;\n              glov_markup.print(md, x1, text_y, z + 2, pre);\n              md.w = w2;\n              glov_markup.print(md, x2, text_y, z + 2, post);\n            } else {\n              font.drawSizedAligned(style, x1, text_y, z + 2, font_height, glov_font.ALIGN.HFIT | glov_font.ALIGN.VCENTER, // eslint-disable-line no-bitwise\n              w1, entry_height, pre);\n              font.drawSizedAligned(style, x2, text_y, z + 2, font_height, glov_font.ALIGN.HFIT | glov_font.ALIGN.VCENTER, // eslint-disable-line no-bitwise\n              w2, entry_height, post);\n            }\n          }\n        }\n        if (!did_tab) {\n          let md = {};\n          // eslint-disable-next-line no-bitwise\n          md.align = (item.centered || display.centered ? glov_font.ALIGN.HCENTERFIT : glov_font.ALIGN.HFIT) | glov_font.ALIGN.VCENTER;\n          md.x_size = md.y_size = font_height;\n          md.w = eff_width - display.xpad * 2;\n          md.h = entry_height;\n          md.style = style;\n          let xx = x + display.xpad;\n          let zz = z + 2;\n          if (display.use_markup) {\n            glov_markup.print(md, xx, text_y, zz, item.name);\n          } else {\n            font.drawSizedAligned(md.style, xx, text_y, zz, md.x_size, md.align, md.w, md.h, item.name);\n          }\n        }\n        // spriteListClipperPop();\n        // if (display.selection_highlight && this.selected === i && show_selection) {\n        //   let grow = 0.2 * (1 - bounce_amt);\n        //   display.selection_highlight.DrawStretched(\n        //     x - grow * eff_width, y - grow * entry_height, z + 1.5,\n        //     eff_width * (1 + 2 * grow), entry_height * (1 + 2 * grow), 0, 0xFF);\n        // }\n        y += entry_height;\n      }\n      if (do_scroll) {\n        this.sa.end(y);\n        y = y_save + this.scroll_height;\n        x = x_save;\n      }\n\n      if (this.was_clicked && this.is_dropdown) {\n        this.dropdown_visible = false;\n      }\n    }\n\n    if (this.selected !== old_sel || sel_changed) {\n      glov_ui.playUISound('rollover');\n    }\n\n    this.expected_frame_index = glov_engine.getFrameIndex() + 1;\n    x = 10;\n    y += 5;\n    if (!this.is_dropdown) {\n      yret = y;\n    }\n    assert(yret - y0 === this.getHeight());\n    return yret - y0;\n  }\n}\n\nexport function create(...args) {\n  if (!font) {\n    font = glov_ui.font;\n  }\n  return new GlovSelectionBox(...args);\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst assert = require('assert');\nconst engine = require('./engine.js');\n\n\nlet last_id = 0;\n\nlet bound_prog = null;\n\nexport const semantic = {\n  'ATTR0': 0,\n  'POSITION': 0,\n  'ATTR1': 1,\n  'COLOR': 1,\n  'COLOR_0': 1,\n  'ATTR2': 2,\n  'TEXCOORD': 2,\n  'TEXCOORD_0': 2,\n  'ATTR3': 3,\n  'NORMAL': 3,\n  'ATTR4': 4,\n  'TEXCOORD_1': 4\n};\n\nfunction findAll(str, re) {\n  let ret = [];\n  let m;\n  do {\n    m = re.exec(str);\n    if (m) {\n      ret.push(m[1]);\n    }\n  } while (m);\n  return ret;\n}\n\nlet globals;\nlet defines;\n\nlet error_fp;\nlet error_vp;\n\nconst vp_attr_regex = /attribute [^ ]+ ([^ ;]+);/gu;\nconst uniform_regex = /uniform (?:(?:low|medium|high)p )?((?:vec|mat)\\d [^ ;]+);/gu;\nconst sampler_regex = /uniform sampler2D ([^ ;]+);/gu;\nconst include_regex = /\\n#include \"([^\"]+)\"/gu;\n\nconst type_size = {\n  vec2: 2 * 1,\n  vec3: 3 * 1,\n  vec4: 4 * 1,\n  mat3: 3 * 3,\n  mat4: 4 * 4\n};\n\nlet includes = {};\n\nexport function addInclude(key, text) {\n  assert(!includes[key]);\n  includes[key] = `\\n// from include \"${key}\":\\n${text}\\n`;\n}\n\nfunction parseIncludes(text) {\n  let supplied_uniforms = {};\n  text.replace(uniform_regex, function (str, key) {\n    supplied_uniforms[key] = true;\n  });\n  text = text.replace(include_regex, function (str, filename) {\n    let replacement = includes[filename];\n    if (!replacement) {\n      console.error(`Could not evaluate ${str}`);\n      return str;\n    }\n    // Remove duplicate uniforms\n    replacement = replacement.replace(uniform_regex, function (str2, key) {\n      if (supplied_uniforms[key]) {\n        return `// [removed ${key}]`;\n      }\n      supplied_uniforms[key] = true;\n      return str2;\n    });\n    return replacement;\n  });\n  return text;\n}\n\nfunction Shader(type, text) {\n  text = text.replace(/#pragma WebGL/gu, '');\n  text = `${defines}${text}`;\n  text = parseIncludes(text);\n  this.shader = gl.createShader(type);\n  if (type === gl.VERTEX_SHADER) {\n    this.programs = {};\n    this.attributes = findAll(text, vp_attr_regex);\n    // Ensure they are known names so we can give them indices\n    // Add to semantic[] above as needed\n    this.attributes.forEach(v => assert(semantic[v] !== undefined));\n  } else {\n    this.id = ++last_id;\n    this.samplers = findAll(text, sampler_regex);\n    // Ensure all samplers end in a unique number\n    let found = [];\n    this.samplers.forEach(v => {\n      let num = Number(v.slice(-1));\n      assert(!isNaN(num));\n      assert(!found[num]);\n      found[num] = true;\n    });\n  }\n  this.uniforms = findAll(text, uniform_regex);\n  // Ensure a known type\n  this.uniforms.forEach(v => {\n    let type_name = v.split(' ')[0];\n    assert(type_size[type_name]);\n  });\n  gl.shaderSource(this.shader, text);\n  gl.compileShader(this.shader);\n\n  if (!gl.getShaderParameter(this.shader, gl.COMPILE_STATUS)) {\n    console.error(`Shader compile error: ${gl.getShaderInfoLog(this.shader)}`);\n  }\n}\n\nexport function create(...args) {\n  return new Shader(...args);\n}\n\nfunction uniformSetValue(unif) {\n  switch (unif.width) {// eslint-disable-line default-case\n    case 2:\n      gl.uniform2fv(unif.location, unif.value);\n      break;\n    case 3:\n      gl.uniform3fv(unif.location, unif.value);\n      break;\n    case 4:\n      gl.uniform4fv(unif.location, unif.value);\n      break;\n    case 9:\n      gl.uniformMatrix3fv(unif.location, false, unif.value);\n      break;\n    case 16:\n      gl.uniformMatrix4fv(unif.location, false, unif.value);\n      break;\n  }\n}\n\nfunction link(vp, fp) {\n  let prog = vp.programs[fp.id] = {\n    handle: gl.createProgram(),\n    uniforms: null\n  };\n  gl.attachShader(prog.handle, vp.shader);\n  gl.attachShader(prog.handle, fp.shader);\n  // call this for all relevant semantic\n  for (let ii = 0; ii < vp.attributes.length; ++ii) {\n    gl.bindAttribLocation(prog.handle, semantic[vp.attributes[ii]], vp.attributes[ii]);\n  }\n  gl.linkProgram(prog.handle);\n\n  prog.valid = gl.getProgramParameter(prog.handle, gl.LINK_STATUS);\n  if (!prog.valid) {\n    console.error(`Shader link error: ${gl.getProgramInfoLog(prog.handle)}`);\n  }\n\n  gl.useProgram(prog.handle);\n  bound_prog = prog;\n\n  let uniforms = vp.uniforms.slice(0);\n  for (let ii = 0; ii < fp.uniforms.length; ++ii) {\n    let name = fp.uniforms[ii];\n    if (uniforms.indexOf(name) === -1) {\n      uniforms.push(name);\n    }\n  }\n  prog.uniforms = uniforms.map(v => {\n    v = v.split(' ');\n    let type = v[0];\n    let name = v[1];\n    let count = 1;\n    let m = name.match(/([^[]+)\\[(\\d+)\\]/u);\n    if (m) {\n      name = m[1];\n      count = Number(m[2]);\n    }\n    let location = gl.getUniformLocation(prog.handle, name);\n    if (location === null) {\n      // Not in either shader, (commented out?), remove (via filter below)\n      return null;\n    }\n    let width = type_size[type];\n    let size = width * count;\n    let glob = globals[name];\n    let value = new Float32Array(size);\n    // set initial value\n    let unif = {\n      name,\n      size,\n      width,\n      count,\n      value,\n      location,\n      glob\n    };\n    uniformSetValue(unif);\n    return unif;\n  }).filter(v => v);\n\n  for (let ii = 0; ii < fp.samplers.length; ++ii) {\n    let name = fp.samplers[ii];\n    let num = Number(name.slice(-1));\n    let location = gl.getUniformLocation(prog.handle, name);\n    if (location !== null) {\n      gl.uniform1i(location, num);\n    }\n  }\n  return prog;\n}\n\nexport function bind(vp, fp, params) {\n  let prog = vp.programs[fp.id];\n  if (!prog) {\n    prog = link(vp, fp);\n  }\n  if (!prog.valid) {\n    prog = link(vp, error_fp);\n    if (!prog.valid) {\n      prog = link(error_vp, error_fp);\n    }\n  }\n  if (prog !== bound_prog) {\n    bound_prog = prog;\n    gl.useProgram(prog.handle);\n  }\n  for (let ii = 0; ii < prog.uniforms.length; ++ii) {\n    let unif = prog.uniforms[ii];\n    let value = params[unif.name] || unif.glob;\n    if (!value) {\n      continue;\n    }\n    let diff = false;\n    for (let jj = 0; jj < unif.size; ++jj) {\n      if (value[jj] !== unif.value[jj]) {\n        diff = true;\n        break;\n      }\n    }\n    if (diff) {\n      for (let jj = 0; jj < unif.size; ++jj) {\n        unif.value[jj] = value[jj];\n      }\n      uniformSetValue(unif);\n    }\n  }\n}\n\nexport function startup(_globals) {\n  defines = Object.keys(engine.defines).map(v => `#define ${v}\\n`).join('');\n  globals = _globals;\n\n  error_fp = create(gl.FRAGMENT_SHADER, '#pragma WebGL\\n\\nvoid main(void) {\\n  gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\\n}\\n');\n  error_vp = create(gl.VERTEX_SHADER, '// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\\n// Released under MIT License: https://opensource.org/licenses/MIT\\n#pragma WebGL\\nattribute vec2 POSITION;\\nvoid main() {\\n  gl_Position = vec4(POSITION.xy * vec2(2.0 / 1024.0, -2.04 / 1024.0) + vec2(-1.0, 1.0), 0.0, 1.0);\\n}\\n');\n}\n\nexport function addGlobal(key, vec) {\n  assert(!globals[key]);\n  globals[key] = vec;\n}","//////////////////////////////////////////////////////////////////////////\n// GlovSimpleMenu is just a GlovSelectionBox plus some logic to activate\n// callbacks/etc upon selecting of elements.\n\n/* eslint complexity:off */\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst glov_engine = require('./engine.js');\nconst glov_input = require('./input.js');\nconst selection_box = require('./selection_box.js');\nconst glov_ui = require('./ui.js');\nconst { clamp, vec4 } = require('./vmath.js');\n\nconst { KEYS } = glov_input;\nlet pad_codes;\n\nconst color101010C8 = vec4(0x10 / 255, 0x10 / 255, 0x10 / 255, 0xC8 / 255);\n\nclass GlovSimpleMenu {\n  constructor(params) {\n    params = params || {};\n    this.sel_box = selection_box.create(params);\n    this.edit_index = -1;\n\n    // Output members\n    this.selected = -1; // actually selected/acted on, not just current highlight, like this.sel_box.selected\n  }\n\n  focus() {\n    glov_ui.focusSteal(this.sel_box);\n  }\n\n  execItem(index, delta) {\n    let { items } = this.sel_box;\n    assert(index >= 0 && index < items.length);\n    let menu_item = items[index];\n    let force = false;\n    if (delta === 2) {\n      delta = 1;\n      force = true;\n    }\n    if (menu_item.cb) {\n      menu_item.cb();\n    }\n    if (!menu_item.state) {\n      if (menu_item.value !== null && (menu_item.prompt_int || menu_item.prompt_string)) {\n        // Open an edit box\n        // menu.internal.mte = GlovModalTextEntry::createInt(simpleMenuFieldName(menu_item.name), *menu_item.value);\n        this.internal.edit_index = index;\n        // glovInputReleaseAll();\n      } else if (menu_item.value !== null) {\n        if (glov_input.keyDown(KEYS.SHIFT) && !force) {\n          delta = -1;\n        }\n        menu_item.value += delta * menu_item.value_inc;\n        if (menu_item.slider || menu_item.plus_minus) {\n          // implicitly no wrapping, maybe make a separate flag for this?\n          menu_item.value = clamp(menu_item.value, menu_item.value_min, menu_item.value_max);\n        } else {\n          if (menu_item.value < menu_item.value_min) {\n            menu_item.value = menu_item.value_max;\n          }\n          if (menu_item.value > menu_item.value_max) {\n            menu_item.value = menu_item.value_min;\n          }\n        }\n        // TODO: some kind of callback on value change\n      } else {\n          // presumably tag or externally operated on, probably want to skip key repeat here too?\n          // glovInputReleaseAll();\n        }\n    } else {\n      glov_engine.setState(menu_item.state);\n      // glovInputReleaseAll();\n    }\n  }\n\n  run(params) {\n    let { sel_box } = this;\n    sel_box.applyParams(params); // Apply new list of items, positions, etc\n\n    const { items, x, z } = sel_box;\n    const y0 = sel_box.y;\n    let exit_index = -1;\n    for (let i = 0; i < items.length; ++i) {\n      if (items[i].exit) {\n        exit_index = i;\n      }\n    }\n\n    // Check to see if any selection has an editBox open first\n    let selbox_enabled = true;\n    if (this.edit_index >= 0 && this.edit_index < items.length) {\n      selbox_enabled = false;\n      glov_ui.drawRect(camera2d.x0(), camera2d.y0(), camera2d.x1(), camera2d.y1(), z + 2, color101010C8);\n      // TODO: Need modal text entry dialog\n      // let ret = this.internal.mte.run(z + 3);\n\n      // if (ret == 'ok') {\n      //   if (items[this.edit_index].prompt_int) {\n      //     items[this.edit_index].value = this.internal.mte.getInt();\n      //   } else {\n      //     items[this.edit_index].svalue = this.internal.mte.getString();\n      //   }\n      //   this.edit_index = -1;\n      // } else if (ret == 'cancel') {\n      //   this.edit_index = -1;\n      // }\n    }\n    sel_box.disabled = !selbox_enabled;\n\n    // Do all sliders, plus-minus-es - needs\n    let display = sel_box.display;\n    for (let ii = 0; ii < items.length; ii++) {\n      let menu_item = items[ii];\n      if (menu_item.slider) {\n        let slider = menu_item.internal.slider;\n        if (!slider) {\n          // slider = menu_item.internal.slider = glov_slider.create();\n        }\n        slider.no_notches = true;\n        // slider.sound_release = this.sound_accept;\n        slider.disabled = menu_item.disabled;\n        let slider_width = 160;\n        let slider_x = x + sel_box.width - slider_width - 12;\n        let v = menu_item.value - menu_item.value_min;\n        let color = display.style_default.color;\n        // if (display.style_default.color_mode == glov_font.COLOR_MODE.GRADIENT) {\n        //   color = colorIntLerp(display.style_default.color, display.style_default.colorLR, 0.5);\n        // }\n        if (slider.disabled) {\n          color = display.style_disabled.color;\n        }\n        v = slider.run({\n          x: slider_x,\n          y: y0 + ii * 24 + 2,\n          z: z + 3,\n          w: slider_width,\n          // scale: 1,\n          color,\n          value: v,\n          max: menu_item.value_max - menu_item.value_min\n        });\n        menu_item.value = v + menu_item.value_min;\n        if (slider.rollover || slider.grabbed) {\n          // expect our row to be selected\n          if (sel_box.selected !== ii) {\n            sel_box.selected = ii;\n            glov_ui.playUISound('select');\n          }\n        }\n      } else if (menu_item.plus_minus) {\n        assert(typeof menu_item.value === 'number', 'plus_minus items require a numerical value');\n        assert(menu_item.value_inc, 'plus_minus items require a value increment');\n        let buttons_width = 60;\n        let pad = 6;\n        let button_width = (buttons_width - pad) / 2;\n        let button_x = x + sel_box.width - buttons_width;\n        let delta = 0;\n        // if (!glovMasterControllerActive()) { // Don't show buttons if using a controller / no mouse\n        if (glov_ui.buttonText({\n          no_focus: true,\n          x: button_x,\n          y: y0 + ii * 24 + 2,\n          z: z + 3,\n          w: button_width,\n          h: glov_ui.button_height * 0.66,\n          text: '-'\n        })) {\n          delta = -1;\n        }\n        let minus_over = glov_ui.button_mouseover;\n        if (glov_ui.buttonText({\n          no_focus: true,\n          x: button_x + pad + button_width,\n          y: y0 + ii * 24 + 2,\n          z: z + 3,\n          w: button_width,\n          h: glov_ui.button_height * 0.66,\n          text: '+'\n        })) {\n          delta = 1;\n        }\n        let plus_over = glov_ui.button_mouseover;\n        // } end if (!glovMasterControllerActive())\n        if (delta) {\n          menu_item.value += delta * menu_item.value_inc;\n          menu_item.value = clamp(menu_item.value, menu_item.value_min, menu_item.value_max);\n        }\n        if (minus_over || plus_over) {\n          // expect our row to be selected\n          if (sel_box.selected !== ii) {\n            sel_box.selected = ii;\n            glov_ui.playUISound('select');\n          }\n        }\n      }\n    }\n\n    let y = y0;\n    y += sel_box.run();\n\n    let selected = -1;\n    if (exit_index !== -1 && (glov_input.keyDownEdge(KEYS.ESC) || !items[exit_index].no_controller_exit && glov_input.padButtonDownEdge(pad_codes.CANCEL))) {\n      this.execItem(exit_index, 1);\n      selected = exit_index;\n    }\n    // Only allow left/right to \"select\" a menu option if it's a toggle/increment\n    // kind of menu option, otherwise this just feels weird\n    let allow_left_right = items[sel_box.selected].value !== null;\n    if (sel_box.was_clicked || sel_box.is_focused && (glov_input.keyDownEdge(KEYS.SPACE) || glov_input.keyDownEdge(KEYS.ENTER) || glov_input.padButtonDownEdge(pad_codes.SELECT))) {\n      this.execItem(sel_box.selected, 1);\n      selected = sel_box.selected;\n    }\n    if (sel_box.is_focused && allow_left_right && (glov_input.keyDownEdge(KEYS.RIGHT) || glov_input.keyDownEdge(KEYS.D) || glov_input.padButtonDownEdge(pad_codes.RIGHT))) {\n      this.execItem(sel_box.selected, 2);\n      selected = sel_box.selected;\n    }\n    if (sel_box.wasRightClicked || sel_box.is_focused && allow_left_right && (\n    // This was UpHit before, some problem with it triggering an up on the next screen?  Should supress the next up\n    // events after eating a down for UI?\n    glov_input.keyDownEdge(KEYS.LEFT) || glov_input.keyDownEdge(KEYS.A) || glov_input.padButtonDownEdge(pad_codes.LEFT))) {\n      this.execItem(sel_box.selected, -1);\n      selected = sel_box.selected;\n    }\n    this.selected = selected;\n    if (selected !== -1 && !items[selected].no_sound) {\n      if (items[selected].exit) {\n        glov_ui.playUISound('cancel');\n      } else {\n        glov_ui.playUISound('select');\n      }\n    }\n\n    return y - y0;\n  }\n\n  isSelected(tag_or_index) {\n    if (this.selected === -1) {\n      return false;\n    }\n    if (tag_or_index === undefined) {\n      return this.sel_box.items[this.selected].tag || true;\n    }\n    return this.sel_box.isSelected(tag_or_index);\n  }\n\n  getSelectedIndex() {\n    return this.selected;\n  }\n\n  getSelectedItem() {\n    return this.sel_box.items[this.selected];\n  }\n}\n\nexport function create(...args) {\n  if (!pad_codes) {\n    pad_codes = glov_input.pad_codes;\n  }\n  return new GlovSimpleMenu(...args);\n}","/*global WebGLSoundDevice: true */\n\nconst DEFAULT_FADE_RATE = 0.001;\n\nlet sounds = {};\nlet num_loading = 0;\nclass SoundManager {\n  constructor(listenerTransform) {\n    if (!listenerTransform) {\n      // const camera = Camera.create(VMath);\n      // const look_at_position = VMath.v3Build(0, 1, 0);\n      // const worldUp = VMath.v3Build(0, 0, 1);\n      // const camera_position = VMath.v3Build(0, 0, 0);\n      // camera.lookAt(look_at_position, worldUp, camera_position);\n      // camera.updateViewMatrix();\n      // listenerTransform = camera.matrix;\n      listenerTransform = new Float32Array([1, 0, -0, 0, 0, 1, 0, -1, 0, 0, 0, 0]);\n    }\n    let soundDeviceParameters = {\n      linearDistance: false\n    };\n    this.soundDevice = WebGLSoundDevice.create(soundDeviceParameters);\n    this.soundDevice.listenerTransform = listenerTransform;\n    this.auto_oggs = false; // try loading .ogg versions first, then fallback to .wav\n    this.auto_mp3s = false; // try loading .mp3 versions first, then fallback to .wav\n    this.sound_on = true;\n    this.music_on = true;\n\n    this.channels = [];\n    for (let ii = 0; ii < 16; ++ii) {\n      this.channels[ii] = this.soundDevice.createSource({\n        position: [0, 0, 0],\n        relative: false,\n        pitch: 1.0\n      });\n    }\n    this.channel = 0;\n    this.last_played = {};\n    this.global_timer = 0;\n\n    // Music\n    this.fade_rate = DEFAULT_FADE_RATE;\n    this.current_loop = null;\n    this.music = []; // 0 is current, 1 is previous (fading out)\n    for (let ii = 0; ii < 2; ++ii) {\n      this.music.push({\n        source: this.soundDevice.createSource({\n          position: [0, 0, 0],\n          relative: false,\n          pitch: 1.0,\n          looping: true\n        }),\n        current_volume: 0,\n        target_volume: 0\n      });\n    }\n  }\n\n  loadSound(base, cb) {\n    if (Array.isArray(base)) {\n      for (let ii = 0; ii < base.length; ++ii) {\n        this.loadSound(base[ii], cb);\n      }\n      return;\n    }\n    let key = base;\n    let m = base.match(/^(.*)\\.(mp3|ogg|wav)$/u);\n    let preferred_ext;\n    if (m) {\n      base = m[1];\n      preferred_ext = m[2];\n    }\n    let src = `sounds/${base}`;\n    let tryLoad = ext => {\n      ++num_loading;\n      this.soundDevice.createSound({\n        src: src + ext,\n        onload: function (sound) {\n          --num_loading;\n          if (sound) {\n            sounds[key] = sound;\n            if (cb) {\n              return cb();\n            }\n          } else {\n            // failed to load\n            if (ext === '.ogg' || ext === '.mp3') {\n              tryLoad('.wav');\n            }\n          }\n          return null;\n        }\n      });\n    };\n    if (this.soundDevice.isSupported('FILEFORMAT_OGG') && (this.auto_oggs || preferred_ext === 'ogg')) {\n      tryLoad('.ogg');\n    } else if (this.soundDevice.isSupported('FILEFORMAT_MP3') && (this.auto_mp3s || preferred_ext === 'mp3')) {\n      tryLoad('.mp3');\n    } else {\n      tryLoad('.wav');\n    }\n  }\n\n  tick(dt) {\n    this.global_timer += dt;\n    let max_fade = dt * this.fade_rate;\n    for (let ii = 0; ii < this.music.length; ++ii) {\n      let target = this.music_on ? this.music[ii].target_volume : 0;\n      if (this.music[ii].current_volume !== target) {\n        let delta = target - this.music[ii].current_volume;\n        let fade_amt = Math.min(Math.abs(delta), max_fade);\n        if (delta < 0) {\n          this.music[ii].current_volume = Math.max(target, this.music[ii].current_volume - fade_amt);\n        } else {\n          this.music[ii].current_volume = Math.min(target, this.music[ii].current_volume + fade_amt);\n        }\n        this.music[ii].source.gain = this.music[ii].current_volume;\n      }\n    }\n  }\n\n  resume() {\n    this.soundDevice.resume();\n  }\n\n  play(soundname, volume) {\n    volume = volume || 1;\n    if (!this.sound_on) {\n      return null;\n    }\n    if (!sounds[soundname]) {\n      return null;\n    }\n    let last_played_time = this.last_played[soundname] || -9e9;\n    if (this.global_timer - last_played_time < 45) {\n      return null;\n    }\n    let channel = this.channels[this.channel++];\n    channel.play(sounds[soundname]);\n    channel.gain = volume;\n    this.last_played[soundname] = this.global_timer;\n    if (this.channel === this.channels.length) {\n      this.channel = 0;\n    }\n    return {\n      stop: function () {\n        channel.stop();\n      }\n    };\n  }\n\n  playMusic(soundname, volume, transition) {\n    if (!this.music_on) {\n      return;\n    }\n    if (volume === undefined) {\n      volume = 1;\n    }\n    transition = transition || SoundManager.DEFAULT;\n    this.loadSound(soundname, () => {\n      if (!sounds[soundname]) {\n        return;\n      }\n      if (this.current_loop === soundname) {\n        // Same sound, just adjust volume, if required\n        this.music[0].target_volume = volume;\n        if (!transition) {\n          this.music[0].source.gain = this.music[0].current_volume = volume;\n        }\n        return;\n      }\n      // fade out previous music, if any\n      /* eslint-disable no-bitwise */\n      if (this.music[0].current_volume) {\n        if (transition & SoundManager.FADE_OUT) {\n          // swap to position 1, start fadeout\n          let temp = this.music[1];\n          this.music[1] = this.music[0];\n          this.music[0] = temp;\n          this.music[1].target_volume = 0;\n        }\n        // else source will be replaced, just let it be!\n      }\n      this.current_loop = soundname;\n      this.music[0].target_volume = volume;\n      if (transition & SoundManager.FADE_IN) {\n        this.music[0].source.gain = this.music[0].current_volume = 0;\n      } else {\n        this.music[0].source.gain = this.music[0].current_volume = volume;\n      }\n      this.music[0].source.play(sounds[soundname], 0, true);\n      /* eslint-enable no-bitwise */\n    });\n  }\n\n  loading() {\n    // eslint-disable-line class-methods-use-this\n    return num_loading;\n  }\n\n}\n\nSoundManager.DEFAULT = SoundManager.prototype.DEFAULT = 0;\nSoundManager.FADE_OUT = SoundManager.prototype.FADE_OUT = 1;\nSoundManager.FADE_IN = SoundManager.prototype.FADE_IN = 2;\nSoundManager.FADE = SoundManager.prototype.FADE = SoundManager.prototype.FADE_OUT + SoundManager.prototype.FADE_IN;\n\nexport function create(listenerTransform) {\n  return new SoundManager(listenerTransform);\n}","function GlovSpriteAnimation(params) {\n  this.frame = 0;\n  this.time = 0;\n  this.state = null;\n  this.anim = null;\n  this.anim_idx = 0;\n\n  if (params instanceof GlovSpriteAnimation) {\n    this.data = params.data; // already initialized\n    this.setState(params.state);\n  } else {\n    this.data = params;\n    for (let key in this.data) {\n      let anim = this.data[key];\n      if (typeof anim.frames === 'number') {\n        anim.frames = [anim.frames];\n      }\n      if (typeof anim.times === 'number') {\n        let arr = new Array(anim.frames.length);\n        for (let ii = 0; ii < anim.frames.length; ++ii) {\n          arr[ii] = anim.times;\n        }\n        anim.times = arr;\n      }\n      if (anim.loop === undefined) {\n        anim.loop = true;\n      }\n    }\n  }\n}\n\nexport function create(params) {\n  return new GlovSpriteAnimation(params);\n}\n\nGlovSpriteAnimation.prototype.clone = function () {\n  return new GlovSpriteAnimation(this);\n};\n\nGlovSpriteAnimation.prototype.setState = function (state, force) {\n  if (state === this.state && !force) {\n    return;\n  }\n  this.state = state;\n  this.anim = this.data[state];\n  this.time = 0;\n  this.anim_idx = 0;\n  this.frame = this.anim.frames[this.anim_idx];\n};\n\nGlovSpriteAnimation.prototype.update = function (dt) {\n  if (!this.anim) {\n    return;\n  }\n  this.time += dt;\n  if (this.time > this.anim.times[this.anim_idx]) {\n    this.time -= this.anim.times[this.anim_idx];\n    this.anim_idx = this.anim_idx + 1;\n    if (this.anim_idx === this.anim.frames.length) {\n      if (this.anim.loop) {\n        this.anim_idx = this.anim_idx % this.anim.frames.length;\n      } else {\n        // keep final frame\n        this.anim = null;\n        return;\n      }\n    }\n    this.frame = this.anim.frames[this.anim_idx];\n    if (this.time >= this.anim.times[this.anim_idx]) {\n      this.time = this.anim.times[this.anim_idx] - 1;\n    }\n  }\n};\n\nGlovSpriteAnimation.prototype.getFrame = function (dt) {\n  if (dt !== undefined) {\n    this.update(dt);\n  }\n  return this.frame;\n};","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n// Some code from Turbulenz: Copyright (c) 2012-2013 Turbulenz Limited\n// Released under MIT License: https://opensource.org/licenses/MIT\n\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst engine = require('./engine.js');\n\nconst geom = require('./geom.js');\nconst { cos, min, round, sin } = Math;\nconst textures = require('./textures.js');\nconst shaders = require('./shaders.js');\nconst { vec2, vec4 } = require('./vmath.js');\nconst { nextHighestPowerOfTwo } = require('./vmath.js');\n\nexport const BLEND_ALPHA = 0;\nexport const BLEND_ADDITIVE = 1;\n\nlet sprite_vshader;\nlet sprite_fshader;\nlet sprite_dual_fshader;\nlet clip_space = vec4();\nlet sprite_shader_params = {\n  clip_space\n};\nlet last_uid = 0;\n\nlet sprite_queue = [];\n\nlet sprite_freelist = [];\n\nfunction SpriteData() {\n  // x1 y1 x2 y2 x3 y3 x4 y4 - vertices [0,8)\n  // cr cg cb ca u1 v1 u2 v2 - normalized color + texture [8,16)\n  // data for GL queuing\n  this.data = new Float32Array(16);\n  // data for sorting/binding/etc\n  this.texs = null;\n  this.shader = null;\n  this.shader_params = null;\n  this.x = 0;\n  this.y = 0;\n  this.z = 0;\n  this.blend = 0; // BLEND_ALPHA\n  this.uid = 0;\n}\n\nfunction spriteDataAlloc() {\n  if (sprite_freelist.length) {\n    return sprite_freelist.pop();\n  }\n  return new SpriteData();\n}\n\nfunction cmpSprite(a, b) {\n  if (a.z !== b.z) {\n    return a.z - b.z;\n  }\n  if (a.y !== b.y) {\n    return a.y - b.y;\n  }\n  if (a.x !== b.x) {\n    return a.x - b.x;\n  }\n  return a.uid - b.uid;\n}\n\nexport function queuefn(z, fn) {\n  sprite_queue.push({\n    fn,\n    x: 0,\n    y: 0,\n    z,\n    uid: ++last_uid\n  });\n}\n\n// coordinates must be in counter-clockwise winding order\nexport function queueraw4(texs, x0, y0, x1, y1, x2, y2, x3, y3, z, u0, v0, u1, v1, color, shader, shader_params, blend) {\n  let elem = spriteDataAlloc();\n  let data = elem.data;\n  // x1 y1 x2 y2 x3 y3 x4 y4 - vertices [0,8)\n  // cr cg cb ca u1 v1 u2 v2 - normalized color + texture [8,16)\n  // Minor perf improvement: convert by clip_space here (still just a single MAD\n  //   if pre-calculated in the camera) and remove it from the shader.\n  data[0] = (x0 - camera2d.data[0]) * camera2d.data[4];\n  data[1] = (y0 - camera2d.data[1]) * camera2d.data[5];\n  data[2] = (x1 - camera2d.data[0]) * camera2d.data[4];\n  data[3] = (y1 - camera2d.data[1]) * camera2d.data[5];\n  data[4] = (x2 - camera2d.data[0]) * camera2d.data[4];\n  data[5] = (y2 - camera2d.data[1]) * camera2d.data[5];\n  data[6] = (x3 - camera2d.data[0]) * camera2d.data[4];\n  data[7] = (y3 - camera2d.data[1]) * camera2d.data[5];\n  data[8] = color[0];\n  data[9] = color[1];\n  data[10] = color[2];\n  data[11] = color[3];\n  data[12] = u0;\n  data[13] = v0;\n  data[14] = u1;\n  data[15] = v1;\n\n  elem.texs = texs;\n  elem.x = data[0];\n  elem.y = data[1];\n  elem.z = z;\n  elem.shader = shader || null;\n  if (shader_params) {\n    shader_params.clip_space = sprite_shader_params.clip_space;\n    elem.shader_params = shader_params;\n  } else {\n    elem.shader_params = null;\n  }\n  elem.blend = blend || 0; // BLEND_ALPHA\n  //elem.bucket = bucket || this.default_bucket;\n  //elem.tech_params = tech_params || null;\n  elem.uid = ++last_uid;\n  sprite_queue.push(elem);\n  return elem;\n}\n\nexport function queueraw(texs, x, y, z, w, h, u0, v0, u1, v1, color, shader, shader_params, blend) {\n  return queueraw4(texs, x, y, x, y + h, x + w, y + h, x + w, y, z, u0, v0, u1, v1, color, shader, shader_params, blend);\n}\n\nexport function queuesprite(sprite, x, y, z, w, h, rot, uvs, color, shader, shader_params, nozoom) {\n  let elem = spriteDataAlloc();\n  elem.texs = sprite.texs;\n  elem.x = x = (x - camera2d.data[0]) * camera2d.data[4];\n  elem.y = y = (y - camera2d.data[1]) * camera2d.data[5];\n  elem.z = z;\n  w *= camera2d.data[4];\n  h *= camera2d.data[5];\n  color = color || sprite.color;\n  let data = elem.data;\n  if (!rot) {\n    let x1 = x - sprite.origin[0] * w;\n    let y1 = y - sprite.origin[1] * h;\n    let x2 = x1 + w;\n    let y2 = y1 + h;\n    data[0] = x1;\n    data[1] = y1;\n    data[2] = x1;\n    data[3] = y2;\n    data[4] = x2;\n    data[5] = y2;\n    data[6] = x2;\n    data[7] = y1;\n  } else {\n    let dx = sprite.origin[0] * w;\n    let dy = sprite.origin[1] * h;\n\n    let cosr = cos(rot);\n    let sinr = sin(rot);\n\n    let x1 = x - cosr * dx + sinr * dy;\n    let y1 = y - sinr * dx - cosr * dy;\n    let ch = cosr * h;\n    let cw = cosr * w;\n    let sh = sinr * h;\n    let sw = sinr * w;\n\n    data[0] = x1;\n    data[1] = y1;\n    data[2] = x1 - sh;\n    data[3] = y1 + ch;\n    data[4] = x1 + cw - sh;\n    data[5] = y1 + sw + ch;\n    data[6] = x1 + cw;\n    data[7] = y1 + sw;\n  }\n\n  data[8] = color[0];\n  data[9] = color[1];\n  data[10] = color[2];\n  data[11] = color[3];\n\n  let ubias = 0;\n  let vbias = 0;\n  let tex = elem.texs[0];\n  if (!nozoom) {\n    // Bias the texture coordinates depending on the minification/magnification\n    //   level so we do not get pixels from neighboring frames bleeding in\n    // Using min here (was max in libGlov), to solve tooltip edges being wrong in strict pixely\n    let zoom_level = min((uvs[2] - uvs[0]) * tex.width / w, (uvs[3] - uvs[1]) * tex.height / h);\n    if (zoom_level < 1) {\n      if (tex.filter_mag === gl.LINEAR) {\n        ubias = vbias = 0.5;\n      }\n    } else if (zoom_level > 1) {\n      // need to apply this bias even with nearest filtering, not exactly sure why\n      let mipped_texels = zoom_level / 2;\n      ubias = vbias = 0.5 + mipped_texels;\n\n      // Maybe need this on magnification above too?\n      if (uvs[0] > uvs[2]) {\n        ubias *= -1;\n      }\n      if (uvs[1] > uvs[3]) {\n        vbias *= -1;\n      }\n    }\n  }\n\n  data[12] = uvs[0] + ubias / tex.width;\n  data[13] = uvs[1] + vbias / tex.height;\n  data[14] = uvs[2] - ubias / tex.width;\n  data[15] = uvs[3] - vbias / tex.height;\n\n  elem.uid = ++last_uid;\n  elem.shader = shader || null;\n  elem.blend = 0; // BLEND_ALPHA\n\n  if (shader_params) {\n    shader_params.clip_space = sprite_shader_params.clip_space;\n    elem.shader_params = shader_params;\n  } else {\n    elem.shader_params = null;\n  }\n  sprite_queue.push(elem);\n}\n\nexport function clip(z_start, z_end, x, y, w, h) {\n  let xy = vec2();\n  camera2d.virtualToCanvas(xy, [x, y]);\n  let wh = vec2();\n  camera2d.virtualToCanvas(wh, [x + w, y + h]);\n  xy[0] = round(xy[0]);\n  xy[1] = round(xy[1]);\n  wh[0] = round(wh[0]) - xy[0];\n  wh[1] = round(wh[1]) - xy[1];\n\n  // let gd_w = engine.render_width || engine.width;\n  let gd_h = engine.render_height || engine.height;\n  let scissor = [xy[0], gd_h - (xy[1] + wh[1]), wh[0], wh[1]];\n  queuefn(z_start - 0.01, () => {\n    gl.enable(gl.SCISSOR_TEST);\n    gl.scissor(scissor[0], scissor[1], scissor[2], scissor[3]);\n  });\n  queuefn(z_end - 0.01, () => {\n    gl.disable(gl.SCISSOR_TEST);\n  });\n}\n\nfunction diffTextures(texsa, texsb) {\n  if (texsa.length !== texsb.length) {\n    return true;\n  }\n  for (let ii = 0; ii < texsa.length; ++ii) {\n    if (texsa[ii] !== texsb[ii]) {\n      return true;\n    }\n  }\n  return false;\n}\n\nlet batch_state;\nlet sprite_geom;\nlet sprite_buffer; // Float32Array with 8 entries per vert\nlet sprite_buffer_len = 0; // in verts\nlet sprite_buffer_batch_start = 0;\nlet sprite_buffer_idx = 0; // in verts\nlet last_blend_mode;\nlet last_bound_shader;\nconst MAX_VERT_COUNT = 65536;\nlet batches = [];\n\nfunction commit() {\n  if (sprite_buffer_idx === sprite_buffer_batch_start) {\n    return;\n  }\n  batches.push({\n    state: batch_state,\n    start: sprite_buffer_batch_start,\n    end: sprite_buffer_idx\n  });\n  sprite_buffer_batch_start = sprite_buffer_idx;\n}\n\nfunction commitAndFlush() {\n  commit();\n  if (!batches.length) {\n    return;\n  }\n  assert(sprite_buffer_idx);\n  sprite_geom.update(sprite_buffer, sprite_buffer_idx);\n  sprite_geom.bind();\n\n  for (let ii = 0; ii < batches.length; ++ii) {\n    let batch = batches[ii];\n    let { state, start, end } = batch;\n    if (last_bound_shader !== state.shader || state.shader_params) {\n      shaders.bind(sprite_vshader, state.shader || sprite_fshader, state.shader_params || sprite_shader_params);\n      last_bound_shader = state.shader;\n    }\n    if (last_blend_mode !== state.blend) {\n      last_blend_mode = state.blend;\n      if (last_blend_mode === BLEND_ADDITIVE) {\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE);\n      } else {\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n      }\n    }\n    textures.bindArray(state.texs);\n    gl.drawElements(sprite_geom.mode, (end - start) * 3 / 2, gl.UNSIGNED_SHORT, start * 3);\n  }\n\n  batches.length = 0;\n  sprite_buffer_idx = 0;\n  sprite_buffer_batch_start = 0;\n}\n\nfunction bufferSpriteData(data) {\n  let index = sprite_buffer_idx * 8;\n  sprite_buffer_idx += 4;\n\n  let c1 = data[8];\n  let c2 = data[9];\n  let c3 = data[10];\n  let c4 = data[11];\n  let u1 = data[12];\n  let v1 = data[13];\n  let u2 = data[14];\n  let v2 = data[15];\n\n  sprite_buffer[index] = data[0];\n  sprite_buffer[index + 1] = data[1];\n  sprite_buffer[index + 2] = c1;\n  sprite_buffer[index + 3] = c2;\n  sprite_buffer[index + 4] = c3;\n  sprite_buffer[index + 5] = c4;\n  sprite_buffer[index + 6] = u1;\n  sprite_buffer[index + 7] = v1;\n\n  sprite_buffer[index + 8] = data[2];\n  sprite_buffer[index + 9] = data[3];\n  sprite_buffer[index + 10] = c1;\n  sprite_buffer[index + 11] = c2;\n  sprite_buffer[index + 12] = c3;\n  sprite_buffer[index + 13] = c4;\n  sprite_buffer[index + 14] = u1;\n  sprite_buffer[index + 15] = v2;\n\n  sprite_buffer[index + 16] = data[4];\n  sprite_buffer[index + 17] = data[5];\n  sprite_buffer[index + 18] = c1;\n  sprite_buffer[index + 19] = c2;\n  sprite_buffer[index + 20] = c3;\n  sprite_buffer[index + 21] = c4;\n  sprite_buffer[index + 22] = u2;\n  sprite_buffer[index + 23] = v2;\n\n  sprite_buffer[index + 24] = data[6];\n  sprite_buffer[index + 25] = data[7];\n  sprite_buffer[index + 26] = c1;\n  sprite_buffer[index + 27] = c2;\n  sprite_buffer[index + 28] = c3;\n  sprite_buffer[index + 29] = c4;\n  sprite_buffer[index + 30] = u2;\n  sprite_buffer[index + 31] = v1;\n}\n\nexport function draw() {\n  if (!sprite_queue.length) {\n    return;\n  }\n  gl.disable(gl.DEPTH_TEST);\n  gl.depthMask(false);\n  gl.enable(gl.BLEND);\n\n  clip_space[0] = 2 / engine.viewport[2];\n  clip_space[1] = -2 / engine.viewport[3];\n\n  last_blend_mode = -1;\n  last_bound_shader = -1;\n\n  if (!sprite_geom) {\n    sprite_geom = geom.create([[shaders.semantic.POSITION, gl.FLOAT, 2, false], [shaders.semantic.COLOR, gl.FLOAT, 4, false], [shaders.semantic.TEXCOORD, gl.FLOAT, 2, false]], [], null, geom.QUADS);\n    sprite_buffer = new Float32Array(1024);\n    sprite_buffer_len = sprite_buffer.length / 8;\n  }\n\n  sprite_queue.sort(cmpSprite);\n\n  batch_state = null;\n  assert(sprite_buffer_idx === 0);\n  assert(sprite_buffer_batch_start === 0);\n  assert(batches.length === 0);\n  for (let ii = 0; ii < sprite_queue.length; ++ii) {\n    let elem = sprite_queue[ii];\n    if (elem.fn) {\n      commitAndFlush();\n      batch_state = null;\n      elem.fn();\n    } else {\n      if (!batch_state || diffTextures(elem.texs, batch_state.texs) || elem.shader !== batch_state.shader || elem.shader_params !== batch_state.shader_params || elem.blend !== batch_state.blend) {\n        commit();\n        batch_state = elem;\n      }\n      if (sprite_buffer_idx + 4 > sprite_buffer_len) {\n        commitAndFlush();\n        // batch_state left alone\n        if (sprite_buffer_len !== MAX_VERT_COUNT) {\n          let new_length = min(sprite_buffer_len * 1.25 + 3 & ~3, MAX_VERT_COUNT); // eslint-disable-line no-bitwise\n          sprite_buffer_len = new_length;\n          sprite_buffer = new Float32Array(new_length * 8);\n        }\n      }\n\n      bufferSpriteData(elem.data);\n      sprite_freelist.push(elem);\n    }\n  }\n  commitAndFlush();\n\n  sprite_queue.length = 0;\n  if (last_blend_mode !== BLEND_ALPHA) {\n    // always reset to this\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n  }\n}\n\nfunction buildRects(ws, hs) {\n  let rects = [];\n  let total_w = 0;\n  for (let ii = 0; ii < ws.length; ++ii) {\n    total_w += ws[ii];\n  }\n  let total_h = 0;\n  for (let ii = 0; ii < hs.length; ++ii) {\n    total_h += hs[ii];\n  }\n  let tex_w = nextHighestPowerOfTwo(total_w);\n  let tex_h = nextHighestPowerOfTwo(total_h);\n  let wh = [];\n  for (let ii = 0; ii < ws.length; ++ii) {\n    wh.push(ws[ii] / total_h);\n  }\n  let y = 0;\n  for (let jj = 0; jj < hs.length; ++jj) {\n    let x = 0;\n    for (let ii = 0; ii < ws.length; ++ii) {\n      let r = vec4(x / tex_w, y / tex_h, (x + ws[ii]) / tex_w, (y + hs[jj]) / tex_h);\n      rects.push(r);\n      x += ws[ii];\n    }\n    y += hs[jj];\n  }\n  return {\n    widths: ws,\n    heights: hs,\n    wh,\n    rects,\n    total_w,\n    total_h\n  };\n}\n\nfunction Sprite(params) {\n  if (params.texs) {\n    this.texs = params.texs;\n  } else {\n    this.texs = [];\n    if (params.tex) {\n      this.texs.push(params.tex);\n    } else if (params.layers) {\n      assert(params.name);\n      this.texs = [];\n      for (let ii = 0; ii < params.layers; ++ii) {\n        this.texs.push(textures.load({\n          url: `img/${params.name}_${ii}.png`,\n          filter_min: params.filter_min,\n          filter_mag: params.filter_mag,\n          wrap_s: params.wrap_s,\n          wrap_t: params.wrap_t\n        }));\n      }\n    } else if (params.name) {\n      this.texs.push(textures.load({\n        url: `img/${params.name}.png`,\n        filter_min: params.filter_min,\n        filter_mag: params.filter_mag,\n        wrap_s: params.wrap_s,\n        wrap_t: params.wrap_t\n      }));\n    } else {\n      assert(params.url);\n      this.texs.push(textures.load(params));\n    }\n  }\n\n  this.origin = params.origin || vec2(0, 0); // [0,1] range\n  this.size = params.size || vec2(1, 1);\n  this.color = params.color || vec4(1, 1, 1, 1);\n  this.uvs = params.uvs || vec4(0, 0, 1, 1);\n\n  if (params.ws) {\n    this.uidata = buildRects(params.ws, params.hs);\n  }\n}\n\n// params:\n//   required: x, y, z\n//   optional: w, h, uvs, color\nSprite.prototype.draw = function (params) {\n  if (params.w === 0 || params.h === 0) {\n    return;\n  }\n  let w = (params.w || 1) * this.size[0];\n  let h = (params.h || 1) * this.size[1];\n  let uvs = typeof params.frame === 'number' ? this.uidata.rects[params.frame] : params.uvs || this.uvs;\n  queuesprite(this, params.x, params.y, params.z, w, h, params.rot, uvs, params.color || this.color, params.shader, params.shader_params, params.nozoom);\n};\n\nSprite.prototype.drawDualTint = function (params) {\n  params.shader = sprite_dual_fshader;\n  params.shader_params = {\n    color1: params.color1\n  };\n  this.draw(params);\n};\n\nexport function create(params) {\n  return new Sprite(params);\n}\n\nexport function startup() {\n  clip_space[2] = -1;\n  clip_space[3] = 1;\n  sprite_vshader = shaders.create(gl.VERTEX_SHADER, '// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\\n// Released under MIT License: https://opensource.org/licenses/MIT\\n#pragma WebGL\\nprecision highp float;\\n\\n// per-vertex input\\nattribute vec2 POSITION;\\nattribute vec4 COLOR;\\nattribute vec2 TEXCOORD;\\n\\n// output\\nvarying lowp vec4 interp_color;\\nvarying vec2 interp_texcoord;\\n\\n// global parameters\\nuniform vec4 clip_space;\\n\\nvoid main()\\n{\\n  interp_texcoord = TEXCOORD;\\n  interp_color = COLOR;\\n  gl_Position = vec4(POSITION.xy * clip_space.xy + clip_space.zw, 0.0, 1.0);\\n}\\n');\n  sprite_fshader = shaders.create(gl.FRAGMENT_SHADER, '#pragma WebGL\\n\\nprecision lowp float;\\n\\nuniform sampler2D tex0;\\n\\nvarying lowp vec4 interp_color;\\nvarying vec2 interp_texcoord;\\n\\nvoid main(void) {\\n  vec4 tex = texture2D(tex0, interp_texcoord);\\n  gl_FragColor = tex * interp_color;\\n}\\n');\n  sprite_dual_fshader = shaders.create(gl.FRAGMENT_SHADER, '#pragma WebGL\\n\\nprecision lowp float;\\n\\nuniform sampler2D tex0;\\nuniform sampler2D tex1;\\nuniform lowp vec4 color1;\\n\\nvarying lowp vec4 interp_color;\\nvarying vec2 interp_texcoord;\\n\\nvoid main(void) {\\n  vec4 tex0 = texture2D(tex0,interp_texcoord);\\n  vec2 tex1 = texture2D(tex1,interp_texcoord).rg;\\n  float value = dot(tex0.rgb, vec3(0.2, 0.5, 0.3));\\n  vec3 valueR = value * interp_color.rgb;\\n  vec3 valueG = value * color1.rgb;\\n  vec3 value3 = mix(tex0.rgb, valueG, tex1.g);\\n  value3 = mix(value3, valueR, tex1.r);\\n  gl_FragColor = vec4(value3, tex0.a * interp_color.a);\\n}\\n');\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint-env browser */\nconst assert = require('assert');\n\nexport let textures = {};\nexport let load_count = 0;\nlet aniso = 4;\nlet max_aniso = 0;\nlet aniso_enum;\n\nlet default_filter_min;\nlet default_filter_mag;\n\nexport const format = {\n  R8: { count: 1 },\n  RGB8: { count: 3 },\n  RGBA8: { count: 4 }\n};\n\nexport function defaultFilters(min, mag) {\n  default_filter_min = min;\n  default_filter_mag = mag;\n}\n\nconst { isPowerOfTwo, nextHighestPowerOfTwo } = require('./vmath.js');\n\nlet bound_unit = null;\nlet bound_tex = [];\n\nlet handle_loading;\nlet handle_error;\n\nfunction setUnit(unit) {\n  if (unit !== bound_unit) {\n    gl.activeTexture(gl.TEXTURE0 + unit);\n    bound_unit = unit;\n  }\n}\n\nfunction bindHandle(unit, target, handle) {\n  if (bound_tex[unit] !== handle) {\n    setUnit(unit);\n    gl.bindTexture(target, handle);\n    bound_tex[unit] = handle;\n  }\n}\n\nfunction unbindHandle(target, handle) {\n  for (let unit = 0; unit < bound_tex.length; ++unit) {\n    if (bound_tex[unit] === handle) {\n      setUnit(unit);\n      gl.bindTexture(target, null);\n      bound_tex[unit] = null;\n    }\n  }\n}\n\nexport function bind(unit, tex) {\n  // May or may not change the unit\n  bindHandle(unit, tex.target, tex.eff_handle);\n}\n\n// hot path inlined for perf\nexport function bindArray(texs) {\n  for (let ii = 0; ii < texs.length; ++ii) {\n    let tex = texs[ii];\n    let handle = tex.eff_handle;\n    if (bound_tex[ii] !== handle) {\n      if (ii !== bound_unit) {\n        gl.activeTexture(gl.TEXTURE0 + ii);\n        bound_unit = ii;\n      }\n      gl.bindTexture(tex.target, handle);\n      bound_tex[ii] = handle;\n    }\n  }\n}\n\nfunction Texture(params) {\n  this.loaded = false;\n  this.load_fail = false;\n  this.target = gl.TEXTURE_2D;\n  this.handle = gl.createTexture();\n  this.eff_handle = handle_loading;\n  this.setSamplerState(params);\n  this.width = this.height = 1;\n\n  this.format = params.format || format.RGBA8;\n\n  if (params.data) {\n    this.updateData(params.width, params.height, params.data);\n  } else if (params.url) {\n    this.loadURL(params.url);\n  }\n}\n\nTexture.prototype.setSamplerState = function (params) {\n  let target = this.target;\n  setUnit(0);\n  bound_tex[0] = null; // Force a re-bind, no matter what\n  bindHandle(0, target, this.handle);\n\n  this.filter_min = params.filter_min || default_filter_min;\n  this.filter_mag = params.filter_mag || default_filter_mag;\n  gl.texParameteri(target, gl.TEXTURE_MIN_FILTER, this.filter_min);\n  gl.texParameteri(target, gl.TEXTURE_MAG_FILTER, this.filter_mag);\n  gl.texParameteri(target, gl.TEXTURE_WRAP_S, params.wrap_s || gl.REPEAT);\n  gl.texParameteri(target, gl.TEXTURE_WRAP_T, params.wrap_t || gl.REPEAT);\n\n  this.mipmaps = this.filter_min >= 0x2700 && this.filter_min <= 0x2703; // Probably gl.LINEAR_MIPMAP_LINEAR\n\n  if (max_aniso) {\n    if (this.mipmaps && params.filter_mag !== gl.NEAREST) {\n      gl.texParameterf(gl.TEXTURE_2D, aniso_enum, aniso);\n    } else {\n      gl.texParameterf(gl.TEXTURE_2D, aniso_enum, 1);\n    }\n  }\n};\n\nTexture.prototype.updateData = function updateData(w, h, data) {\n  setUnit(0);\n  bound_tex[0] = null; // Force a re-bind, no matter what\n  bindHandle(0, this.target, this.handle);\n  this.width = w;\n  this.height = h;\n  if (data instanceof Uint8Array) {\n    assert(data.length >= w * h * this.format.count);\n    gl.texImage2D(this.target, 0, this.format.internal_type, w, h, 0, this.format.internal_type, this.format.gl_type, data);\n  } else {\n    assert(data instanceof Image || data.width); // instanceof Image fails with ublock AdBlocker\n    // Pad up to power of two\n    if (!isPowerOfTwo(w) || !isPowerOfTwo(h)) {\n      this.width = nextHighestPowerOfTwo(w);\n      this.height = nextHighestPowerOfTwo(h);\n      gl.texImage2D(this.target, 0, this.format.internal_type, this.width, this.height, 0, this.format.internal_type, this.format.gl_type, null);\n      // Duplicate right and bottom pixel row by sending image 3 times\n      if (w !== this.width) {\n        gl.texSubImage2D(this.target, 0, 1, 0, this.format.internal_type, this.format.gl_type, data);\n      }\n      if (h !== this.height) {\n        gl.texSubImage2D(this.target, 0, 0, 1, this.format.internal_type, this.format.gl_type, data);\n      }\n      gl.texSubImage2D(this.target, 0, 0, 0, this.format.internal_type, this.format.gl_type, data);\n    } else {\n      gl.texImage2D(this.target, 0, this.format.internal_type, this.format.internal_type, this.format.gl_type, data);\n    }\n  }\n  if (this.mipmaps) {\n    gl.generateMipmap(this.target);\n  }\n  this.eff_handle = this.handle;\n  this.loaded = true;\n};\n\nTexture.prototype.loadURL = function loadURL(url) {\n  let tex = this;\n  let img = new Image();\n  ++load_count;\n  let did_done = false;\n  function done() {\n    if (!did_done) {\n      did_done = true;\n      --load_count;\n    }\n  }\n  img.onload = function () {\n    done();\n    tex.format = format.RGBA8;\n    tex.updateData(img.width, img.height, img);\n  };\n  function fail() {\n    done();\n    tex.eff_handle = handle_error;\n    tex.load_fail = true;\n  }\n  img.onerror = fail;\n  /* Turbulenz was doing it this way - some advantage?\n  if (typeof URL !== \"undefined\" && URL.createObjectURL) {\n    let xhr = new XMLHttpRequest();\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState === 4) {\n        let xhrStatus = xhr.status;\n        // Sometimes the browser sets status to 200 OK when the connection is closed\n        // before the message is sent (weird!).\n        // In order to address this we fail any completely empty responses.\n        // Hopefully, nobody will get a valid response with no headers and no body!\n        if (xhr.getAllResponseHeaders() === \"\" && !xhr.response) {\n          fail();\n        } else {\n          if (xhrStatus === 200 || xhrStatus === 0) {\n            var blob = xhr.response;\n            img.onload = function blobImageLoadedFn() {\n              imageLoaded();\n              URL.revokeObjectURL(img.src);\n              blob = null;\n            };\n            img.src = URL.createObjectURL(blob);\n          } else {\n            fail();\n          }\n        }\n        xhr.onreadystatechange = null;\n      }\n    };\n    xhr.open('GET', src, true);\n    xhr.responseType = 'blob';\n    xhr.send();\n  } else { */\n  img.crossOrigin = 'anonymous';\n  img.src = url;\n};\n\nTexture.prototype.copyTexImage = function (x, y, w, h) {\n  assert(w && h);\n  bindHandle(0, this.target, this.handle);\n  gl.copyTexImage2D(this.target, 0, gl.RGB, x, y, w, h, 0);\n  this.width = w;\n  this.height = h;\n};\n\nTexture.prototype.destroy = function () {\n  delete textures[this.name];\n  unbindHandle(this.target, this.handle);\n  gl.deleteTexture(this.handle);\n};\n\nfunction create(params) {\n  return new Texture(params);\n}\n\nexport function createForCapture() {\n  let texture = create({\n    filter_min: gl.NEAREST,\n    filter_mag: gl.NEAREST,\n    wrap_s: gl.CLAMP_TO_EDGE,\n    wrap_t: gl.CLAMP_TO_EDGE,\n    format: gl.RGB8\n  });\n  texture.loaded = true;\n  texture.eff_handle = texture.handle;\n  texture.name = 'screen_temporary_tex';\n  return texture;\n}\n\nexport function load(params) {\n  let key = params.name || params.url;\n  assert(key);\n  if (textures[key]) {\n    return textures[key];\n  }\n  let texture = create(params);\n  texture.name = key;\n  textures[key] = texture;\n  return texture;\n}\n\nfunction cname(key) {\n  let idx = key.lastIndexOf('/');\n  if (idx !== -1) {\n    key = key.slice(idx + 1);\n  }\n  idx = key.lastIndexOf('.');\n  if (idx !== -1) {\n    key = key.slice(0, idx);\n  }\n  return key.toLowerCase();\n}\nexport function findTexForReplacement(search_key) {\n  search_key = cname(search_key);\n  for (let key in textures) {\n    let compare_key = cname(key);\n    if (compare_key === search_key) {\n      return textures[key];\n    }\n  }\n  return null;\n}\n\nexport function startup() {\n\n  default_filter_min = gl.LINEAR_MIPMAP_LINEAR;\n  default_filter_mag = gl.LINEAR;\n\n  format.R8.internal_type = gl.LUMINANCE;\n  format.R8.gl_type = gl.UNSIGNED_BYTE;\n  format.RGB8.internal_type = gl.RGB;\n  format.RGB8.gl_type = gl.UNSIGNED_BYTE;\n  format.RGBA8.internal_type = gl.RGBA;\n  format.RGBA8.gl_type = gl.UNSIGNED_BYTE;\n\n  let ext_anisotropic = gl.getExtension('EXT_texture_filter_anisotropic') || gl.getExtension('MOZ_EXT_texture_filter_anisotropic') || gl.getExtension('WEBKIT_EXT_texture_filter_anisotropic');\n  if (ext_anisotropic) {\n    aniso_enum = ext_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT;\n    aniso = max_aniso = gl.getParameter(ext_anisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT);\n  }\n\n  handle_error = load({\n    name: 'error',\n    width: 2, height: 2,\n    format: format.RGBA8,\n    filter_mag: gl.NEAREST,\n    data: new Uint8Array([255, 20, 147, 255, 255, 0, 0, 255, 255, 255, 255, 255, 255, 20, 147, 255])\n  }).handle;\n\n  handle_loading = load({\n    name: 'loading',\n    width: 2, height: 2,\n    format: format.RGBA8,\n    data: new Uint8Array([127, 127, 127, 255, 0, 0, 0, 255, 64, 64, 64, 255, 127, 127, 127, 255])\n  }).handle;\n\n  load({\n    name: 'white',\n    width: 2, height: 2,\n    format: format.RGBA8,\n    data: new Uint8Array([255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255])\n  });\n}","/* global Z */\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst glov_engine = require('./engine.js');\n\nconst sprites = require('./sprites.js');\nconst shaders = require('./shaders.js');\nconst textures = require('./textures.js');\nconst glov_ui = require('./ui.js');\n\nconst { easeOut } = require('../../common/util.js');\nconst { unit_vec, vec4 } = require('./vmath.js');\nconst { floor, min, pow, random } = Math;\n\nlet transitions = [];\n\nexport const IMMEDIATE = 'immediate';\n\nexport const REMOVE = 'remove';\nexport const CONTINUE = 'continue';\n\nconst shader_data = {\n  transition_pixelate: {\n    fp: '#pragma WebGL\\n\\nprecision lowp float;\\n\\nvarying highp vec2 interp_texcoord;\\n\\nuniform sampler2D tex0;\\nuniform vec4 param0;\\nuniform vec4 param1;\\n\\nvoid main(void)\\n{\\n  vec2 interp_uvs = interp_texcoord;\\n  // TODO: for best look, should generate an appropriate mipmap and sample from that/just render it w/ nearest neighbor\\n  // result = texture2D(tex0, min(floor(interp_uvs.xy * param0.xy + 0.5) * param0.zw - param1.xy, param1.zw) );\\n\\n  // Unlike ARBfp version, shift RGB channels separately (3x slowdown)\\n  vec4 texture0r = texture2D(tex0, min(floor(interp_uvs.xy * param0.xy + vec2(0.58, 0.5)) * param0.zw - param1.xy, param1.zw) );\\n  vec4 texture0g = texture2D(tex0, min(floor(interp_uvs.xy * param0.xy + vec2(0.5, 0.48)) * param0.zw - param1.xy, param1.zw) );\\n  vec4 texture0b = texture2D(tex0, min(floor(interp_uvs.xy * param0.xy + vec2(0.42, 0.5)) * param0.zw - param1.xy, param1.zw) );\\n  gl_FragColor = vec4(texture0r.r, texture0g.g, texture0b.b, 1);\\n}\\n'\n  }\n};\n\nfunction getShader(key) {\n  let elem = shader_data[key];\n  if (!elem.shader) {\n    elem.shader = shaders.create(gl.FRAGMENT_SHADER, elem.fp);\n  }\n  return elem.shader;\n}\n\nclass GlovTransition {\n  constructor(z, func) {\n    this.z = z;\n    this.capture = null;\n    this.func = func;\n    this.accum_time = 0;\n  }\n}\n\nfunction transitionCapture(trans) {\n  assert(!trans.capture);\n  trans.capture = textures.createForCapture();\n  glov_engine.captureFramebuffer(trans.capture);\n}\n\nexport function queue(z, fn) {\n  let immediate = false;\n  if (z === IMMEDIATE) {\n    immediate = true;\n    z = Z.TRANSITION_FINAL;\n  }\n\n  for (let ii = 0; ii < transitions.length; ++ii) {\n    let trans = transitions[ii];\n    if (trans.z === z) {\n      // same Z\n      assert(trans.capture);\n      if (!trans.capture) {\n        // two transitions at the same Z on one frame!  ignore second\n        return false;\n      }\n    }\n  }\n  let trans = new GlovTransition(z, fn);\n  transitions.push(trans);\n\n  if (immediate) {\n    transitionCapture(trans);\n  }\n  return true;\n}\n\nfunction destroyTexture(tex) {\n  tex.destroy();\n}\n\nexport function render(dt) {\n  dt = min(dt, 100); // debug: clamp frame times\n  for (let trans_idx = 0; trans_idx < transitions.length; ++trans_idx) {\n    let trans = transitions[trans_idx];\n    trans.accum_time += dt;\n    if (!trans.capture) {\n      // queue up a capture past the specified Z, so transitions rendering at that Z (plus a handful) get captured\n      sprites.queuefn(trans.z + Z.TRANSITION_RANGE, transitionCapture.bind(null, trans));\n    } else if (trans.capture) {\n      // call the function and give them the Z\n      // If not the last one, want it to end now!\n      let force_end = trans_idx < transitions.length - 1;\n      let ret = trans.func(trans.z, trans.capture, trans.accum_time, force_end);\n      if (ret === REMOVE) {\n        setTimeout(destroyTexture.bind(null, trans.capture), 0);\n        transitions.splice(trans_idx, 1);\n        trans_idx--;\n      }\n    }\n  }\n}\n\nfunction glovTransitionFadeFunc(fade_time, z, initial, ms_since_start, force_end) {\n  let progress = min(ms_since_start / fade_time, 1);\n  let alpha = 1 - easeOut(progress, 2);\n  let color = vec4(1, 1, 1, alpha);\n  camera2d.setNormalized();\n  sprites.queueraw4([initial], 0, 0, 0, 1, 1, 1, 1, 0, z, 0, 1, 1, 0, color);\n\n  if (force_end || progress === 1) {\n    return REMOVE;\n  }\n  return CONTINUE;\n}\n\n/*\n  // Doesn't work because we need more than just 2 UV values in the queue call\nfunction glovTransitionWipeFunc(wipe_time, wipe_angle, z, tex, ms_since_start, force_end) {\n  let progress = min(ms_since_start / wipe_time, 1);\n\n  camera2d.setNormalized();\n\n  let uvs = [[0,1], [1,0]];\n\n  let points = [{}, {}, {}, {}];\n  for (let ii = 0; ii < 4; ii++) {\n    let x = (ii === 1 || ii === 2) ? 1 : 0;\n    let y = (ii >= 2) ? 1 : 0;\n    points[ii].x = x;\n    points[ii].y = y;\n  }\n\n  while (wipe_angle > PI) {\n    wipe_angle -= (2 * PI);\n  }\n  while (wipe_angle < -PI) {\n    wipe_angle += (2 * PI);\n  }\n\n  // TODO: if anyone ever uses this, change 0 degrees to be up, not right, to match other things?\n  if (wipe_angle >= -PI_4 && wipe_angle <= PI_4) {\n    // horizontal wipe from left to right\n    let x0 = progress * 2; // rightmost x\n    let x1 = x0 - sin(abs(wipe_angle)) / SQRT1_2; // leftmost x\n    if (wipe_angle < 0) {\n      points[0].x = x1;\n      points[3].x = x0;\n    } else {\n      points[0].x = x0;\n      points[3].x = x1;\n    }\n    points[1].x = points[2].x = 2;\n  } else if (wipe_angle >= PI_2 + PI_4 || wipe_angle <= -PI_2 - PI_4) {\n    // horizontal wipe from right to left\n    let x0 = 1 - progress * 2; // leftmost x\n    let x1 = x0 + sin(abs(wipe_angle)) / SQRT1_2; // rightmost x,\n    if (wipe_angle < 0) {\n      points[1].x = x1;\n      points[2].x = x0;\n    } else {\n      points[1].x = x0;\n      points[2].x = x1;\n    }\n    points[0].x = points[3].x = -1;\n  } else if (wipe_angle > PI_4 && wipe_angle <= PI_2 + PI_4) {\n    // vertical wipe, top to bottom\n    let y0 = progress * 2; // bottommost y\n    let offs = cos(wipe_angle) / SQRT1_2;\n    let y1 = y0 - abs(offs); // topmost y,\n    if (offs > 0) {\n      points[0].y = y0;\n      points[1].y = y1;\n    } else {\n      points[0].y = y1;\n      points[1].y = y0;\n    }\n    points[2].y = points[3].y = 2;\n  } else {\n    // vertical wipe, bottom to top\n    let y0 = 1 - progress * 2; // topmost y\n    let offs = cos(wipe_angle) / SQRT1_2;\n    let y1 = y0 + abs(offs); // bottommost y,\n    if (offs > 0) {\n      points[2].y = y1;\n      points[3].y = y0;\n    } else {\n      points[2].y = y0;\n      points[3].y = y1;\n    }\n    points[0].y = points[1].y = -1;\n  }\n  // interp UVs based on points\n  points[0].u = lerp(points[0].x, uvs[0][0], uvs[1][0]);\n  points[1].u = lerp(points[1].x, uvs[0][0], uvs[1][0]);\n  points[2].u = lerp(points[2].x, uvs[0][0], uvs[1][0]);\n  points[3].u = lerp(points[3].x, uvs[0][0], uvs[1][0]);\n  points[0].v = lerp(points[0].y, uvs[0][1], uvs[1][1]);\n  points[1].v = lerp(points[1].y, uvs[0][1], uvs[1][1]);\n  points[2].v = lerp(points[2].y, uvs[0][1], uvs[1][1]);\n  points[3].v = lerp(points[3].y, uvs[0][1], uvs[1][1]);\n\n  sprites.queueraw4([tex],\n    points[0].x, points[0].y, points[3].x, points[3].y,\n    points[2].x, points[2].y, points[1].x, points[1].y,\n    z,\n    points[0].u, points[0].v, points[2].u, points[2].v,\n    unit_vec, 'alpha_nearest');\n\n  if (force_end || progress === 1) {\n    return REMOVE;\n  }\n  return CONTINUE;\n}\n\n*/\n\nfunction glovTransitionSplitScreenFunc(time, border_width, slide_window, z, tex, ms_since_start, force_end) {\n  let border_color = vec4(1, 1, 1, 1);\n  let progress = easeOut(min(ms_since_start / time, 1), 2);\n  camera2d.setNormalized();\n\n  let uvs = [[0, 1], [1, 0]];\n\n  let xoffs = progress;\n  let v_half = uvs[0][1] + (uvs[1][1] - uvs[0][1]) / 2;\n  if (slide_window) {\n    // slide window\n    sprites.queueraw([tex], 0, 0, z, 1 - xoffs, 1 / 2, 0, uvs[0][1], uvs[1][0] * (1 - progress), v_half, unit_vec);\n    sprites.queueraw([tex], 0 + xoffs, 1 / 2, z, 1 - xoffs, 1 / 2, uvs[1][0] * progress, v_half, uvs[1][0], uvs[1][1], unit_vec);\n  } else {\n    // slide image\n    sprites.queueraw([tex], 0 - xoffs, 0, z, 1, 1 / 2, uvs[0][0], uvs[0][1], uvs[1][0], v_half, unit_vec);\n    sprites.queueraw([tex], 0 + xoffs, 1 / 2, z, 1, 1 / 2, uvs[0][0], v_half, uvs[1][0], uvs[1][1], unit_vec);\n  }\n  let border_grow_progress = min(progress * 4, 1);\n  border_color[3] = border_grow_progress;\n  border_width *= border_grow_progress;\n  // TODO: Would look better if the horizontal border grew from the middle out, so the overlapping bit is identical\n  // on both sides\n  glov_ui.drawRect(0, 0.5 - border_width, 1 - xoffs, 0.5, z + 1, border_color);\n  glov_ui.drawRect(1 - xoffs - border_width, 0, 1 - xoffs, 0.5, z + 1, border_color);\n  glov_ui.drawRect(xoffs, 0.5, 1, 0.5 + border_width, z + 1, border_color);\n  glov_ui.drawRect(xoffs, 0.5, xoffs + border_width, 1, z + 1, border_color);\n\n  if (force_end || progress === 1) {\n    return REMOVE;\n  }\n  return CONTINUE;\n}\n\nconst render_scale = 1;\nlet transition_pixelate_texture;\n\nfunction transitionPixelateCapture() {\n  if (!transition_pixelate_texture) {\n    transition_pixelate_texture = textures.createForCapture();\n  }\n  glov_engine.captureFramebuffer(transition_pixelate_texture);\n}\n\nfunction glovTransitionPixelateFunc(time, z, tex, ms_since_start, force_end) {\n  //ms_since_start %= time;\n  //let viewport = glov_engine.graphics_device.getViewport();\n  //let gd_width = viewport[2];\n  let gd_width = glov_engine.width;\n  let progress = min(ms_since_start / time, 1);\n  camera2d.setNormalized();\n\n  if (progress > 0.5) {\n    sprites.queuefn(z, transitionPixelateCapture);\n    if (transition_pixelate_texture) {\n      tex = transition_pixelate_texture;\n    }\n  }\n\n  let partial_progress = (progress > 0.5 ? 1 - progress : progress) * 2;\n  // Use power of two scalings, but then scale relative to a 1024px virtual screen, so the biggest\n  //  pixel is about the same percentage of the screen regardless of resolution.\n  let pixel_scale = pow(2, floor(partial_progress * 8.9)) / 1024 * gd_width * render_scale;\n\n  let param0 = vec4(tex.width / pixel_scale, tex.height / pixel_scale, pixel_scale / tex.width, pixel_scale / tex.height);\n  let param1 = vec4(0.5 / tex.width, 0.5 / tex.height, (tex.texSizeX - 1) / tex.width, (tex.texSizeY - 1) / tex.height);\n\n  sprites.queueraw([tex], 0, 0, z + 1, 1, 1, 0, 1, 1, 0, unit_vec, getShader('transition_pixelate'), {\n    param0,\n    param1\n  });\n\n  if (force_end || progress === 1) {\n    setTimeout(destroyTexture.bind(null, transition_pixelate_texture), 0);\n    transition_pixelate_texture = null;\n    return REMOVE;\n  }\n  return CONTINUE;\n}\n\nexport function fade(fade_time) {\n  return glovTransitionFadeFunc.bind(null, fade_time);\n}\n\n// export function wipe(wipe_time, wipe_angle) {\n//   return glovTransitionWipeFunc.bind(null, wipe_time, wipe_angle);\n// }\n\n// border_width in camera-relative size\nexport function splitScreen(time, border_width, slide_window) {\n  border_width /= camera2d.w(); // convert to normalized units\n  return glovTransitionSplitScreenFunc.bind(null, time, border_width, slide_window);\n}\n\nexport function pixelate(fade_time) {\n  return glovTransitionPixelateFunc.bind(null, fade_time);\n}\n\n// export function logoZoom(time, logo) {\n//   return glovTransitionLogoZoomFunc.bind(null, time, logo);\n// }\n\nexport function randomTransition(fade_time_scale) {\n  fade_time_scale = fade_time_scale || 1;\n  let idx = floor(random() * 3);\n  switch (idx) {\n    case 0:\n      return fade(500 * fade_time_scale);\n    case 1:\n      return splitScreen(250 * fade_time_scale, 2, false);\n    case 2:\n      return pixelate(750 * fade_time_scale);\n    // case 3:\n    //   return wipe(250 * fade_time_scale, random() * 2 * PI);\n    // case 4:\n    //   if (!logo) {\n    //     GlovTextureLoadOptions options;\n    //     options.clamp_s = options.clamp_t = true;\n    //     logo = GlovTextures::loadtex(\"data/SampleLogoTransition.png\", &options);\n    //   }\n    //   glovTransitionQueue(Z_TRANSITION_FINAL, glovTransitionLogoZoom(500, logo));\n    //   break;\n    default:\n      assert(0);\n  }\n  return null;\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint no-underscore-dangle:off */\n/* global Z:false */\n\nwindow.Z = window.Z || {};\nZ.BORDERS = Z.BORDERS || 90;\nZ.UI = Z.UI || 100;\nZ.MODAL = Z.MODAL || 1000;\nZ.TOOLTIP = Z.TOOLTIP || 2000;\nZ.DEBUG = Z.DEBUG || 9800;\n\n// very high, but can still add integers\nZ.TRANSITION_FINAL = Z.TRANSITION_FINAL || 9900;\n// how much Z range can be used for rendering transitions - the capture happens at z + Z_TRANSITION_RANGE\nZ.TRANSITION_RANGE = Z.TRANSITION_RANGE || 10;\n\nZ.FPSMETER = Z.FPSMETER || 10000;\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst glov_edit_box = require('./edit_box.js');\nconst effects = require('./effects.js');\nconst glov_engine = require('./engine.js');\nconst glov_font = require('./font.js');\nconst glov_input = require('./input.js');\nconst { abs, max, min, round, sqrt } = Math;\nconst glov_sprites = require('./sprites.js');\nconst textures = require('./textures.js');\nconst { clone, merge } = require('../../common/util.js');\nconst { mat43, m43identity, m43mul } = require('./mat43.js');\nconst { clamp, lerp, vec2, vec4, v4scale } = require('./vmath.js');\n\nconst MODAL_DARKEN = 0.75;\nlet KEYS;\nlet pad_codes;\n\nconst menu_fade_params_default = {\n  blur: [0.125, 0.865],\n  saturation: [0.5, 0.1],\n  brightness: [1, 1 - MODAL_DARKEN],\n  fallback_darken: vec4(0, 0, 0, MODAL_DARKEN),\n  z: Z.MODAL\n};\n\nexport function focuslog(...args) {\n  // console.log(`focuslog(${glov_engine.global_frame_index}): `, ...args);\n}\n\nexport function makeColorSet(color) {\n  let ret = {\n    regular: vec4(),\n    rollover: vec4(),\n    down: vec4(),\n    disabled: vec4()\n  };\n  v4scale(ret.regular, color, 1);\n  v4scale(ret.rollover, color, 0.8); // because we do not have specific graphics\n  v4scale(ret.down, color, 0.7);\n  v4scale(ret.disabled, color, 0.4);\n  for (let field in ret) {\n    ret[field][3] = color[3];\n  }\n  return ret;\n}\n\nfunction doBlurEffect(factor, params) {\n  factor = lerp(factor, params.blur[0], params.blur[1]);\n  if (factor) {\n    effects.applyGaussianBlur({\n      source: glov_engine.captureFramebuffer(),\n      blur: factor\n      // min_size: 128,\n    });\n  }\n}\n\nlet desaturate_xform = mat43();\nlet desaturate_tmp = mat43();\nfunction doDesaturateEffect(factor, params) {\n  let saturation = lerp(factor, params.saturation[0], params.saturation[1]);\n  let brightness = lerp(factor, params.brightness[0], params.brightness[1]);\n  if (saturation === 1 && brightness === 1) {\n    return;\n  }\n  m43identity(desaturate_xform);\n\n  effects.saturationMatrix(desaturate_tmp, saturation);\n  m43mul(desaturate_xform, desaturate_xform, desaturate_tmp);\n\n  effects.brightnessScaleMatrix(desaturate_tmp, brightness);\n  m43mul(desaturate_xform, desaturate_xform, desaturate_tmp);\n\n  // if ((hue % (Math.PI * 2)) !== 0) {\n  //   effects.hueMatrix(tmp, hue);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (contrast !== 1) {\n  //   effects.contrastMatrix(tmp, contrast);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (brightness !== 0) {\n  //   effects.brightnessMatrix(tmp, brightness);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (additiveRGB[0] !== 0 || additiveRGB[1] !== 0 || additiveRGB[2] !== 0) {\n  //   effects.additiveMatrix(tmp, additiveRGB);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (grayscale) {\n  //   effects.grayScaleMatrix(tmp);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (negative) {\n  //   effects.negativeMatrix(tmp);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (sepia) {\n  //   effects.sepiaMatrix(tmp);\n  //   m43mul(xform, xform, tmp);\n  // }\n  effects.applyColorMatrix({\n    colorMatrix: desaturate_xform,\n    source: glov_engine.captureFramebuffer()\n  });\n}\n\n// overrideable default parameters\nexport let button_height = 32;\nexport let font_height = 24;\nexport let button_width = 200;\nexport let modal_button_width = 100;\nexport let button_img_size = button_height;\nexport let modal_width = 600;\nexport let modal_y0 = 200;\nexport let modal_title_scale = 1.2;\nexport let pad = 16;\nexport let panel_pixel_scale = 32 / 13; // button_height / button pixel resolution\nexport let tooltip_panel_pixel_scale = panel_pixel_scale;\nexport let tooltip_width = 400;\nexport let tooltip_pad = 8;\n\nexport let font_style_focused = glov_font.style(null, {\n  color: 0x000000ff,\n  outline_width: 2,\n  outline_color: 0xFFFFFFff\n});\nexport let font_style_normal = glov_font.styleColored(null, 0x000000ff);\n\nexport let font;\nexport let sprites = {};\n\nexport let color_button = makeColorSet([1, 1, 1, 1]);\nexport let color_panel = vec4(1, 1, 0.75, 1);\nexport let modal_font_style = glov_font.styleColored(null, 0x000000ff);\n\nlet sounds = {};\nexport let button_mouseover = false; // for callers to poll the very last button\nexport let button_focused = false; // for callers to poll the very last button\nexport let touch_changed_focus = false; // did a touch even this frame change focus?\n// For tracking global mouseover state\nlet last_frame_button_mouseover = false;\nlet frame_button_mouseover = false;\n\nlet modal_dialog = null;\nlet modal_stealing_focus = false;\nexport let menu_up = false; // Boolean to be set by app to impact behavior, similar to a modal\nlet menu_fade_params = merge({}, menu_fade_params_default);\nlet menu_up_time = 0;\n\nexports.this_frame_edit_boxes = [];\nlet last_frame_edit_boxes = [];\nlet dom_elems = [];\nlet dom_elems_issued = 0;\n\n// for modal dialogs\nlet button_keys;\n\nlet focused_last_frame;\nlet focused_this_frame;\nlet focused_key_not;\nlet focused_key;\nlet focused_key_prev1;\nlet focused_key_prev2;\n\nexport function loadUISprite(name, ws, hs, overrides, only_override) {\n  let override = overrides && overrides[name];\n  if (override) {\n    sprites[name] = glov_sprites.create({\n      name: override[0],\n      ws: override[1],\n      hs: override[2]\n    });\n  } else if (!only_override) {\n    sprites[name] = glov_sprites.create({\n      name: `ui/${name}`,\n      ws,\n      hs\n    });\n  }\n}\n\nexport function startup(_font, overrides) {\n  font = _font;\n  KEYS = glov_input.KEYS;\n  pad_codes = glov_input.pad_codes;\n\n  loadUISprite('button', [4, 5, 4], [13], overrides);\n  sprites.button_regular = sprites.button;\n  loadUISprite('button_rollover', [4, 5, 4], [13], overrides, true);\n  loadUISprite('button_down', [4, 5, 4], [13], overrides);\n  loadUISprite('button_disabled', [4, 5, 4], [13], overrides);\n  loadUISprite('panel', [3, 2, 3], [3, 10, 3], overrides);\n  loadUISprite('menu_entry', [4, 5, 4], [13], overrides);\n  loadUISprite('menu_selected', [4, 5, 4], [13], overrides);\n  loadUISprite('menu_down', [4, 5, 4], [13], overrides);\n  loadUISprite('menu_header', [4, 5, 12], [13], overrides);\n  loadUISprite('slider', [6, 2, 6], [13], overrides);\n  // loadUISprite('slider_notch', [3], [13], overrides);\n  loadUISprite('slider_handle', [9], [13], overrides);\n\n  sprites.white = glov_sprites.create({ url: 'white' });\n\n  button_keys = {\n    ok: { key: [], pad: [pad_codes.X] },\n    cancel: { key: [KEYS.ESC], pad: [pad_codes.B, pad_codes.Y] }\n  };\n  button_keys.yes = clone(button_keys.ok);\n  button_keys.yes.key.push(KEYS.Y);\n  button_keys.no = clone(button_keys.cancel);\n  button_keys.no.key.push(KEYS.N);\n}\n\nlet dynamic_text_elem;\nexport function getElem(allow_modal) {\n  if (modal_dialog && !allow_modal) {\n    return null;\n  }\n  if (dom_elems_issued >= dom_elems.length) {\n    let elem = document.createElement('div');\n    elem.setAttribute('class', 'glovui_dynamic');\n    if (!dynamic_text_elem) {\n      dynamic_text_elem = document.getElementById('dynamic_text');\n    }\n    dynamic_text_elem.appendChild(elem);\n    dom_elems.push(elem);\n  }\n  let elem = dom_elems[dom_elems_issued];\n  dom_elems_issued++;\n  return elem;\n}\n\nlet sound_manager;\nexport function bindSounds(_sound_manager, _sounds) {\n  sound_manager = _sound_manager;\n  sounds = _sounds;\n  for (let key in sounds) {\n    sound_manager.loadSound(sounds[key]);\n  }\n}\n\nexport function drawHBox(coords, s, color) {\n  let uidata = s.uidata;\n  let ws = [uidata.wh[0] * coords.h, 0, uidata.wh[2] * coords.h];\n  let x = coords.x;\n  ws[1] = max(0, coords.w - ws[0] - ws[2]);\n  for (let ii = 0; ii < ws.length; ++ii) {\n    let my_w = ws[ii];\n    s.draw({\n      x,\n      y: coords.y,\n      z: coords.z,\n      color,\n      w: my_w,\n      h: coords.h,\n      uvs: uidata.rects[ii]\n    });\n    x += my_w;\n  }\n}\n\nexport function drawBox(coords, s, pixel_scale, color) {\n  let uidata = s.uidata;\n  let scale = pixel_scale;\n  let ws = [uidata.widths[0] * scale, 0, uidata.widths[2] * scale];\n  ws[1] = max(0, coords.w - ws[0] - ws[2]);\n  let hs = [uidata.heights[0] * scale, 0, uidata.heights[2] * scale];\n  hs[1] = max(0, coords.h - hs[0] - hs[2]);\n  let x = coords.x;\n  for (let ii = 0; ii < ws.length; ++ii) {\n    let my_w = ws[ii];\n    if (my_w) {\n      let y = coords.y;\n      for (let jj = 0; jj < hs.length; ++jj) {\n        let my_h = hs[jj];\n        if (my_h) {\n          s.draw({\n            x, y, z: coords.z,\n            color,\n            w: my_w,\n            h: my_h,\n            uvs: uidata.rects[jj * 3 + ii],\n            nozoom: true // nozoom since different parts of the box get zoomed differently\n          });\n          y += my_h;\n        }\n      }\n      x += my_w;\n    }\n  }\n}\n\nexport function playUISound(name) {\n  if (name === 'select') {\n    name = 'button_click';\n  }\n  if (sounds[name] && sound_manager) {\n    sound_manager.play(sounds[name]);\n  }\n}\n\nexport function setMouseOver(key) {\n  if (last_frame_button_mouseover !== key && frame_button_mouseover !== key) {\n    playUISound('rollover');\n  }\n  frame_button_mouseover = key;\n  button_mouseover = true;\n}\n\nexport function focusSteal(key) {\n  if (key !== focused_key) {\n    focuslog('focusSteal ', key);\n  }\n  focused_this_frame = true;\n  focused_key = key;\n}\n\nexport function focusCanvas() {\n  focusSteal('canvas');\n}\n\nexport function isFocusedPeek(key) {\n  return focused_key === key;\n}\nexport function isFocused(key) {\n  if (key !== focused_key_prev2) {\n    focused_key_prev1 = focused_key_prev2;\n    focused_key_prev2 = key;\n  }\n  if (key === focused_key || key !== focused_key_not && !focused_this_frame && !focused_last_frame) {\n    if (key !== focused_key) {\n      focuslog('isFocused->focusSteal');\n    }\n    focusSteal(key);\n    return true;\n  }\n  return false;\n}\n\nexport function focusNext(key) {\n  focuslog('focusNext ', key);\n  playUISound('rollover');\n  focused_key = null;\n  focused_last_frame = focused_this_frame = false;\n  focused_key_not = key;\n  // Eat input events so a pair of keys (e.g. SDLK_DOWN and SDLK_CONTROLLER_DOWN)\n  // don't get consumed by two separate widgets\n  glov_input.eatAllInput();\n}\n\nexport function focusPrev(key) {\n  focuslog('focusPrev ', key);\n  playUISound('rollover');\n  if (key === focused_key_prev2) {\n    focusSteal(focused_key_prev1);\n  } else {\n    focusSteal(focused_key_prev2);\n  }\n  glov_input.eatAllInput();\n}\n\nexport function focusCheck(key) {\n  if (modal_stealing_focus) {\n    // hidden by modal, etc\n    return false;\n  }\n  // Returns true even if focusing previous element, since for this frame, we are still effectively focused!\n  let focused = isFocused(key);\n  if (focused) {\n    if (glov_input.keyDownEdge(KEYS.TAB)) {\n      if (glov_input.keyDown(KEYS.SHIFT)) {\n        focusPrev(key);\n      } else {\n        focusNext(key);\n        focused = false;\n      }\n    }\n    if (glov_input.padButtonDownEdge(pad_codes.RIGHT_BUMPER)) {\n      focusNext(key);\n      focused = false;\n    }\n    if (glov_input.padButtonDownEdge(pad_codes.LEFT_BUMPER)) {\n      focusPrev(key);\n    }\n  }\n  return focused;\n}\n\nexport function panel(param) {\n  assert(typeof param.x === 'number');\n  assert(typeof param.y === 'number');\n  assert(typeof param.w === 'number');\n  assert(typeof param.h === 'number');\n  param.z = param.z || Z.UI - 1;\n  let color = param.color || color_panel;\n  drawBox(param, sprites.panel, param.pixel_scale || panel_pixel_scale, color);\n  glov_input.click(param);\n  glov_input.mouseOver(param);\n}\n\nexport function drawTooltip(param) {\n  assert(typeof param.x === 'number');\n  assert(typeof param.y === 'number');\n  assert(typeof param.tooltip === 'string');\n\n  let tooltip_w = param.tooltip_width || tooltip_width;\n  let x = param.x;\n  if (x + tooltip_w > camera2d.x1()) {\n    x = camera2d.x1() - tooltip_w;\n  }\n  let z = param.z || Z.TOOLTIP;\n  let tooltip_y0 = param.y;\n  let eff_tooltip_pad = param.tooltip_pad || tooltip_pad;\n  let y = tooltip_y0 + eff_tooltip_pad;\n  y += font.drawSizedWrapped(modal_font_style, x + eff_tooltip_pad, y, z + 1, tooltip_w - eff_tooltip_pad * 2, 0, font_height, param.tooltip);\n  y += eff_tooltip_pad;\n\n  panel({\n    x,\n    y: tooltip_y0,\n    z,\n    w: tooltip_w,\n    h: y - tooltip_y0,\n    pixel_scale: tooltip_panel_pixel_scale\n  });\n}\n\n// eslint-disable-next-line complexity\nexport function buttonShared(param) {\n  let state = 'regular';\n  let ret = false;\n  if (param.draw_only) {\n    return { ret, state };\n  }\n  let key = param.key || `${param.x}_${param.y}`;\n  let focused = !param.disabled && !param.no_focus && focusCheck(key);\n  button_mouseover = false;\n  if (param.disabled) {\n    glov_input.mouseOver(param); // Still eat mouse events\n    state = 'disabled';\n  } else if (param.drag_target && (ret = glov_input.dragDrop(param))) {\n    console.log('dragDrop');\n    if (!param.no_touch_mouseover || !glov_input.mousePosIsTouch()) {\n      setMouseOver(key);\n    }\n    if (!param.no_focus) {\n      focusSteal(key);\n      focused = true;\n    }\n  } else if (glov_input.click(param)) {\n    if (!param.no_touch_mouseover || !glov_input.mousePosIsTouch()) {\n      setMouseOver(key);\n    }\n    if (param.touch_twice && glov_input.mousePosIsTouch() && !focused) {\n      // Just focus, show tooltip\n      touch_changed_focus = true;\n    } else {\n      ret = true;\n    }\n    if (!param.no_focus) {\n      focusSteal(key);\n      focused = true;\n    }\n  } else if (param.drag_target && glov_input.dragOver(param)) {\n    // Set this even if param.no_touch_mouse_over is set\n    setMouseOver(key);\n    state = glov_input.mouseDown() ? 'down' : 'rollover';\n  } else if (glov_input.mouseOver(param)) {\n    if (param.no_touch_mouseover && glov_input.mousePosIsTouch()) {\n      // do not set mouseover\n    } else if (param.touch_twice && !focused && glov_input.mousePosIsTouch()) {\n      // do not set mouseover\n    } else {\n      setMouseOver(key);\n      state = glov_input.mouseDown() ? 'down' : 'rollover';\n    }\n  }\n  button_focused = focused;\n  if (focused) {\n    if (glov_input.keyDownEdge(KEYS.SPACE) || glov_input.keyDownEdge(KEYS.RETURN) || glov_input.padButtonDownEdge(pad_codes.A)) {\n      ret = true;\n    }\n  }\n  if (ret) {\n    state = 'down';\n    playUISound('button_click');\n  }\n  if (button_mouseover && param.tooltip) {\n    drawTooltip({\n      x: param.x,\n      y: param.tooltip_above ? param.y - font_height * 2 - 16 : param.y + param.h + 2,\n      tooltip: param.tooltip,\n      tooltip_width: param.tooltip_width\n    });\n  }\n  param.z += param.z_bias && param.z_bias[state] || 0;\n  return { ret, state, focused };\n}\n\nexport let button_last_color;\nexport function buttonTextDraw(param, state, focused) {\n  let colors = param.colors || color_button;\n  let color = button_last_color = colors[state];\n  let base_name = param.base_name || 'button';\n  let sprite_name = `${base_name}_${state}`;\n  let sprite = sprites[sprite_name];\n  // Note: was if (sprite) color = colors.regular for specific-sprite matches\n  if (!sprite) {\n    sprite = sprites[base_name];\n  }\n\n  drawHBox(param, sprite, color);\n  font.drawSizedAligned(focused ? font_style_focused : font_style_normal, param.x, param.y, param.z + 0.1,\n  // eslint-disable-next-line no-bitwise\n  param.font_height, glov_font.ALIGN.HCENTERFIT | glov_font.ALIGN.VCENTER, param.w, param.h, param.text);\n}\n\nexport function buttonText(param) {\n  // required params\n  assert(typeof param.x === 'number');\n  assert(typeof param.y === 'number');\n  assert(typeof param.text === 'string');\n  // optional params\n  param.z = param.z || Z.UI;\n  param.w = param.w || button_width;\n  param.h = param.h || button_height;\n  param.font_height = param.font_height || font_height;\n\n  let { ret, state, focused } = buttonShared(param);\n  buttonTextDraw(param, state, focused);\n  return ret;\n}\n\nexport function buttonImage(param) {\n  // required params\n  assert(typeof param.x === 'number');\n  assert(typeof param.y === 'number');\n  assert(param.img && param.img.draw); // should be a sprite\n  // optional params\n  param.z = param.z || Z.UI;\n  param.w = param.w || button_img_size;\n  param.h = param.h || param.w || button_img_size;\n  param.shrink = param.shrink || 0.75;\n  //param.img_rect; null -> full image\n  let uvs = param.img_rect || (typeof param.frame === 'number' ? param.img.uidata.rects[param.frame] : null);\n\n  let { ret, state } = buttonShared(param);\n  let colors = param.colors || color_button;\n  let color = button_last_color = colors[state];\n  let base_name = param.base_name || 'button';\n  let sprite_name = `${base_name}_${state}`;\n  let sprite = sprites[sprite_name];\n  if (!sprite) {\n    sprite = sprites[base_name];\n  }\n\n  drawHBox(param, sprite, color);\n  let img_w = param.img.size[0];\n  let img_h = param.img.size[1];\n  let img_origin = param.img.origin;\n  let img_scale = min(param.w * param.shrink / img_w, param.h * param.shrink / img_h);\n  img_w *= img_scale;\n  img_h *= img_scale;\n  let draw_param = {\n    x: param.x + (param.w - img_w) / 2 + img_origin[0] * img_w,\n    y: param.y + (param.h - img_h) / 2 + img_origin[1] * img_h,\n    z: param.z + 0.1,\n    color,\n    color1: param.color1,\n    w: img_scale,\n    h: img_scale,\n    uvs,\n    rot: param.rotation\n  };\n  if (param.color1) {\n    param.img.drawDualTint(draw_param);\n  } else {\n    param.img.draw(draw_param);\n  }\n  return ret;\n}\n\nexport function print(style, x, y, z, text) {\n  return font.drawSized(style, x, y, z, font_height, text);\n}\n\n// Note: modal dialogs not really compatible with HTML overlay on top of the canvas!\nexport function modalDialog(params) {\n  assert(!params.title || typeof params.title === 'string');\n  assert(!params.text || typeof params.text === 'string');\n  assert(typeof params.buttons === 'object');\n  assert(Object.keys(params.buttons).length);\n\n  modal_dialog = params;\n}\n\nfunction modalDialogRun() {\n  const eff_button_width = modal_dialog.button_width || modal_button_width;\n  const game_width = camera2d.x1() - camera2d.x0();\n  const text_w = modal_width - pad * 2;\n  const x0 = camera2d.x0() + round((game_width - modal_width) / 2);\n  let x = x0 + pad;\n  const y0 = modal_y0;\n  let y = y0 + pad;\n  let eff_font_height = modal_dialog.font_height || font_height;\n\n  if (modal_dialog.title) {\n    y += font.drawSizedWrapped(modal_font_style, x, y, Z.MODAL, text_w, 0, eff_font_height * modal_title_scale, modal_dialog.title);\n    y += round(pad * 1.5);\n  }\n\n  if (modal_dialog.text) {\n    y += font.drawSizedWrapped(modal_font_style, x, y, Z.MODAL, text_w, 0, eff_font_height, modal_dialog.text);\n    y += pad;\n  }\n\n  if (modal_dialog.tick) {\n    let param = { x, y };\n    modal_dialog.tick(param);\n    y = param.y;\n  }\n\n  let buttons = modal_dialog.buttons;\n  let keys = Object.keys(buttons);\n  x = x0 + modal_width - pad - eff_button_width - (pad + eff_button_width) * (keys.length - 1);\n  for (let ii = 0; ii < keys.length; ++ii) {\n    let key = keys[ii];\n    let eff_button_keys = button_keys[key.toLowerCase()];\n    let pressed = false;\n    if (eff_button_keys) {\n      for (let jj = 0; jj < eff_button_keys.key.length; ++jj) {\n        pressed = pressed || glov_input.keyDownEdge(eff_button_keys.key[jj]);\n      }\n      for (let jj = 0; jj < eff_button_keys.pad.length; ++jj) {\n        pressed = pressed || glov_input.padButtonDownEdge(eff_button_keys.pad[jj]);\n      }\n    }\n    if (pressed) {\n      playUISound('button_click');\n    }\n    if (buttonText({\n      x: x,\n      y,\n      z: Z.MODAL,\n      w: eff_button_width,\n      h: button_height,\n      text: key\n    }) || pressed) {\n      modal_dialog = null;\n      if (buttons[key]) {\n        buttons[key]();\n      }\n    }\n    x += pad + eff_button_width;\n  }\n  y += button_height;\n  y += pad * 2;\n  panel({\n    x: x0,\n    y: y0,\n    z: Z.MODAL - 1,\n    w: modal_width,\n    h: y - y0\n  });\n\n  glov_input.eatAllInput();\n  modal_stealing_focus = true;\n}\n\nexport function createEditBox(params) {\n  return glov_edit_box.create(params);\n}\n\nconst color_slider_handle = vec4(1, 1, 1, 1);\nconst color_slider_handle_grab = vec4(0.5, 0.5, 0.5, 1);\nconst color_slider_handle_over = vec4(0.75, 0.75, 0.75, 1);\n// Returns new value\nexport function slider(value, param) {\n  // required params\n  assert(typeof param.x === 'number');\n  assert(typeof param.y === 'number');\n  assert(param.min < param.max); // also must be numbers\n  // optional params\n  param.z = param.z || Z.UI;\n  param.w = param.w || button_width;\n  param.h = param.h || button_height;\n  let disabled = param.disabled || false;\n\n  drawHBox(param, sprites.slider, param.color);\n\n  let xoffs = round(sprites.slider.uidata.wh[0] * param.h / 2);\n  let draggable_width = param.w - xoffs * 2;\n\n  // Draw notches - would also need to quantize the values below\n  // if (!slider->no_notches) {\n  //   float space_for_notches = width - xoffs * 4;\n  //   int num_notches = max - 1;\n  //   float notch_w = tile_scale * glov_ui_slider_notch->GetTileWidth();\n  //   float notch_h = tile_scale * glov_ui_slider_notch->GetTileHeight();\n  //   float max_notches = space_for_notches / (notch_w + 2);\n  //   int notch_inc = 1;\n  //   if (num_notches > max_notches)\n  //     notch_inc = ceil(num_notches / floor(max_notches));\n\n  //   for (int ii = 1; ii*notch_inc <= num_notches; ii++) {\n  //     float notch_x_mid = x + xoffs + draggable_width * ii * notch_inc / (float)max;\n  //     if (notch_x_mid - notch_w/2 < x + xoffs * 2)\n  //       continue;\n  //     if (notch_x_mid + notch_w/2 > x + width - xoffs * 2)\n  //       continue;\n  //     glov_ui_slider_notch->DrawStretchedColor(notch_x_mid - notch_w / 2, y + yoffs,\n  //       z + 0.25, notch_w, notch_h, 0, color);\n  //   }\n  // }\n\n  // Handle\n  let drag = !disabled && glov_input.drag(param);\n  let grabbed = Boolean(drag);\n  let click = glov_input.click(param);\n  if (click) {\n    grabbed = false;\n    // update pos\n    value = (click.pos[0] - (param.x + xoffs)) / draggable_width;\n    value = param.min + (param.max - param.min) * clamp(value, 0, 1);\n    playUISound('button_click');\n  } else if (grabbed) {\n    // update pos\n    value = (drag.cur_pos[0] - (param.x + xoffs)) / draggable_width;\n    value = param.min + (param.max - param.min) * clamp(value, 0, 1);\n    // Eat all mouseovers while dragging\n    glov_input.mouseOver();\n  }\n  let rollover = !disabled && glov_input.mouseOver(param);\n  let handle_center_pos = param.x + xoffs + draggable_width * (value - param.min) / param.max;\n  let handle_h = param.h;\n  let handle_w = sprites.slider_handle.uidata.wh[0] * handle_h;\n  let handle_x = handle_center_pos - handle_w / 2;\n  let handle_y = param.y + param.h / 2 - handle_h / 2;\n  let handle_color = color_slider_handle;\n  if (grabbed) {\n    handle_color = color_slider_handle_grab;\n  } else if (rollover) {\n    handle_color = color_slider_handle_over;\n  }\n\n  sprites.slider_handle.draw({\n    x: handle_x,\n    y: handle_y,\n    z: param.z + 0.1,\n    w: handle_w,\n    h: handle_h,\n    color: handle_color,\n    frame: 0\n  });\n\n  return value;\n}\n\nlet bad_frames = 0;\nexport function tickUI(dt) {\n  last_frame_button_mouseover = frame_button_mouseover;\n  frame_button_mouseover = false;\n  focused_last_frame = focused_this_frame;\n  focused_this_frame = false;\n  focused_key_not = null;\n  modal_stealing_focus = false;\n  touch_changed_focus = false;\n\n  for (let ii = 0; ii < last_frame_edit_boxes.length; ++ii) {\n    let edit_box = last_frame_edit_boxes[ii];\n    let idx = exports.this_frame_edit_boxes.indexOf(edit_box);\n    if (idx === -1) {\n      edit_box.unrun();\n    }\n  }\n  last_frame_edit_boxes = exports.this_frame_edit_boxes;\n  exports.this_frame_edit_boxes = [];\n\n  while (dom_elems_issued < dom_elems.length) {\n    let elem = dom_elems.pop();\n    dynamic_text_elem.removeChild(elem);\n  }\n  dom_elems_issued = 0;\n\n  let pp_this_frame = false;\n  if (modal_dialog || menu_up) {\n    let params = menu_fade_params;\n    if (!menu_up) {\n      // Modals get defaults\n      params = menu_fade_params_default;\n    }\n    menu_up_time += dt;\n    // Effects during modal dialogs\n    if (glov_engine.postprocessing) {\n      let factor = min(menu_up_time / 500, 1);\n      glov_sprites.queuefn(params.z - 2, doBlurEffect.bind(null, factor, params));\n      glov_sprites.queuefn(params.z - 1, doDesaturateEffect.bind(null, factor, params));\n      pp_this_frame = true;\n    } else {\n      // Just darken\n      sprites.white.draw({\n        x: camera2d.x0(),\n        y: camera2d.y0(),\n        z: params.z - 2,\n        color: params.fallback_darken,\n        w: camera2d.x1() - camera2d.x0(),\n        h: camera2d.y1() - camera2d.y0()\n      });\n    }\n  } else {\n    menu_up_time = 0;\n  }\n  menu_up = false;\n\n  if (!glov_engine.is_loading && glov_engine.this_frame_time > 250 && pp_this_frame) {\n    bad_frames++;\n    if (bad_frames >= 3) {\n      // 3 in a row, disable superfluous postprocessing\n      glov_engine.postprocessingAllow(false);\n    }\n  } else if (bad_frames) {\n    bad_frames = 0;\n  }\n\n  if (modal_dialog) {\n    modalDialogRun();\n  }\n}\n\nexport function endFrame() {\n  if (glov_input.click({\n    x: -Infinity, y: -Infinity,\n    w: Infinity, h: Infinity\n  })) {\n    focusSteal('canvas');\n  }\n}\n\nexport function menuUp(params) {\n  merge(menu_fade_params, menu_fade_params_default);\n  if (params) {\n    merge(menu_fade_params, params);\n  }\n  menu_up = true;\n  modal_stealing_focus = true;\n  glov_input.eatAllInput();\n}\n\nexport function drawRect(x0, y0, x1, y1, z, color) {\n  let mx = min(x0, x1);\n  let my = min(y0, y1);\n  let Mx = max(x0, x1);\n  let My = max(y0, y1);\n  sprites.white.draw({\n    x: mx,\n    y: my,\n    z,\n    color,\n    w: Mx - mx,\n    h: My - my\n  });\n}\n\nfunction spreadTechParams(spread) {\n  // spread=0 -> 1\n  // spread=0.5 -> 2\n  // spread=0.75 -> 4\n  // spread=1 -> large enough to AA\n  spread = min(max(spread, 0), 0.99);\n\n  let tech_params = {\n    param0: vec4(0, 0, 0, 0)\n  };\n\n  tech_params.param0[0] = 1 / (1 - spread);\n  tech_params.param0[1] = -0.5 * tech_params.param0[0] + 0.5;\n  return tech_params;\n}\n\nfunction drawCircleInternal(sprite, x, y, z, r, spread, tu1, tv1, tu2, tv2, color) {\n  let x0 = x - r * 2 + r * 4 * tu1;\n  let x1 = x - r * 2 + r * 4 * tu2;\n  let y0 = y - r * 2 + r * 4 * tv1;\n  let y1 = y - r * 2 + r * 4 * tv2;\n  glov_sprites.queueraw(sprite.texs, x0, y0, z, x1 - x0, y1 - y0, tu1, tv1, tu2, tv2, color, glov_font.font_shaders.font_aa, spreadTechParams(spread));\n}\n\nexport function drawCircle(x, y, z, r, spread, color) {\n  if (!sprites.circle) {\n    const CIRCLE_SIZE = 32;\n    let data = new Uint8Array(CIRCLE_SIZE * CIRCLE_SIZE);\n    let midp = (CIRCLE_SIZE - 1) / 2;\n    for (let i = 0; i < CIRCLE_SIZE; i++) {\n      for (let j = 0; j < CIRCLE_SIZE; j++) {\n        let d = sqrt((i - midp) * (i - midp) + (j - midp) * (j - midp)) / midp;\n        let v = clamp(1 - d, 0, 1);\n        data[i + j * CIRCLE_SIZE] = v * 255;\n      }\n    }\n    sprites.circle = glov_sprites.create({\n      url: 'circle',\n      width: CIRCLE_SIZE, height: CIRCLE_SIZE,\n      format: textures.format.R8,\n      data,\n      filter_min: gl.LINEAR,\n      filter_max: gl.LINEAR,\n      wrap_s: gl.CLAMP_TO_EDGE,\n      wrap_t: gl.CLAMP_TO_EDGE,\n      origin: vec2(0.5, 0.5)\n    });\n  }\n  drawCircleInternal(sprites.circle, x, y, z, r, spread, 0, 0, 1, 1, color);\n}\n\nexport function drawHollowCircle(x, y, z, r, spread, color) {\n  if (!sprites.hollow_circle) {\n    const CIRCLE_SIZE = 128;\n    const LINE_W = 2;\n    let data = new Uint8Array(CIRCLE_SIZE * CIRCLE_SIZE);\n    let midp = (CIRCLE_SIZE - 1) / 2;\n    for (let i = 0; i < CIRCLE_SIZE; i++) {\n      for (let j = 0; j < CIRCLE_SIZE; j++) {\n        let d = sqrt((i - midp) * (i - midp) + (j - midp) * (j - midp)) / midp;\n        let v = clamp(1 - d, 0, 1);\n        if (v > 0.5) {\n          v = 1 - v;\n        }\n        v += LINE_W / CIRCLE_SIZE;\n        data[i + j * CIRCLE_SIZE] = v * 255;\n      }\n    }\n    sprites.hollow_circle = glov_sprites.create({\n      url: 'hollow_circle',\n      width: CIRCLE_SIZE, height: CIRCLE_SIZE,\n      format: textures.format.R8,\n      data,\n      filter_min: gl.LINEAR,\n      filter_max: gl.LINEAR,\n      wrap_s: gl.CLAMP_TO_EDGE,\n      wrap_t: gl.CLAMP_TO_EDGE,\n      origin: vec2(0.5, 0.5)\n    });\n  }\n  drawCircleInternal(sprites.hollow_circle, x, y, z, r, spread, 0, 0, 1, 1, color);\n}\n\nexport function drawLine(x0, y0, x1, y1, z, w, spread, color) {\n  if (!sprites.line) {\n    const LINE_SIZE = 32;\n    let data = new Uint8Array(LINE_SIZE * LINE_SIZE);\n    let midp = (LINE_SIZE - 1) / 2;\n    for (let i = 0; i < LINE_SIZE; i++) {\n      for (let j = 0; j < LINE_SIZE; j++) {\n        let d = abs((i - midp) / midp);\n        let v = clamp(1 - d, 0, 1);\n        data[i + j * LINE_SIZE] = v * 255;\n      }\n    }\n    sprites.line = glov_sprites.create({\n      url: 'line',\n      width: LINE_SIZE, height: LINE_SIZE,\n      format: textures.format.R8,\n      data,\n      filter_min: gl.LINEAR,\n      filter_max: gl.LINEAR,\n      wrap_s: gl.CLAMP_TO_EDGE,\n      wrap_t: gl.CLAMP_TO_EDGE,\n      origin: vec2(0.5, 0.5)\n    });\n  }\n\n  let dx = x1 - x0;\n  let dy = y1 - y0;\n  let length = Math.sqrt(dx * dx + dy * dy);\n  dx /= length;\n  dy /= length;\n  let tangx = -dy * w;\n  let tangy = dx * w;\n\n  glov_sprites.queueraw4(sprites.line.texs, x0 + tangx, y0 + tangy, x1 + tangx, y1 + tangy, x1 - tangx, y1 - tangy, x0 - tangx, y0 - tangy, z, 0, 0, 1, 1, color, glov_font.font_shaders.font_aa, spreadTechParams(spread));\n}\n\nexport function drawCone(x0, y0, x1, y1, z, w0, w1, spread, color) {\n  if (!sprites.cone) {\n    const CONE_SIZE = 32;\n    let data = new Uint8Array(CONE_SIZE * CONE_SIZE);\n    let midp = (CONE_SIZE - 1) / 2;\n    for (let i = 0; i < CONE_SIZE; i++) {\n      for (let j = 0; j < CONE_SIZE; j++) {\n        let dx = 0;\n        let dy = 0;\n        let d = 0;\n        if (i > midp) {\n          dx = (i - midp) / midp;\n          dy = abs(j - midp) / midp;\n          let dCircle = sqrt(dx * dx + dy * dy);\n          d = dx * dCircle;\n        }\n        let v = clamp(1 - d, 0, 1);\n        data[i + j * CONE_SIZE] = v * 255;\n      }\n    }\n    sprites.cone = glov_sprites.create({\n      url: 'cone',\n      width: CONE_SIZE, height: CONE_SIZE,\n      format: textures.format.R8,\n      data,\n      filter_min: gl.LINEAR,\n      filter_max: gl.LINEAR,\n      wrap_s: gl.CLAMP_TO_EDGE,\n      wrap_t: gl.CLAMP_TO_EDGE,\n      origin: vec2(0.5, 0.5)\n    });\n  }\n  let dx = x1 - x0;\n  let dy = y1 - y0;\n  let length = Math.sqrt(dx * dx + dy * dy);\n  dx /= length;\n  dy /= length;\n  let tangx = -dy;\n  let tangy = dx;\n  glov_sprites.queueraw4(sprites.cone.texs, x0 - tangx * w0, y0 - tangy * w0, x0 + tangx * w0, y0 + tangy * w0, x1 + tangx * w1, y1 + tangy * w1, x1 - tangx * w1, y1 - tangy * w1, z, 0, 0, 1, 1, color, glov_font.font_shaders.font_aa, spreadTechParams(spread));\n}\n\nexport function scaleSizes(scale) {\n  button_height = round(32 * scale);\n  font_height = round(24 * scale);\n  button_width = round(200 * scale);\n  button_img_size = button_height;\n  modal_button_width = round(button_width / 2);\n  modal_width = round(600 * scale);\n  modal_y0 = round(200 * scale);\n  modal_title_scale = 1.2;\n  pad = round(16 * scale);\n  tooltip_width = round(400 * scale);\n  tooltip_pad = round(8 * scale);\n  panel_pixel_scale = button_height / 13; // button_height / button pixel resolution\n  tooltip_panel_pixel_scale = panel_pixel_scale;\n}\n\nexport function setModalSizes(_modal_button_width, width, y0, title_scale) {\n  modal_button_width = _modal_button_width || round(button_width / 2);\n  modal_width = width || 600;\n  modal_y0 = y0 || 200;\n  modal_title_scale = title_scale || 1.2;\n}\n\nexport function setFontHeight(_font_height) {\n  font_height = _font_height;\n}\n\nexport function setTooltipWidth(_tooltip_width, _tooltip_panel_pixel_scale) {\n  tooltip_width = _tooltip_width;\n  tooltip_panel_pixel_scale = _tooltip_panel_pixel_scale;\n}\n\nscaleSizes(1);","/*global Z: false */\nconst assert = require('assert');\nconst glov_engine = require('./engine.js');\nconst glov_font = require('./font.js');\nconst glov_input = require('./input.js');\nconst glov_simple_menu = require('./simple_menu.js');\nconst glov_selection_box = require('./selection_box.js');\nconst glov_ui = require('./ui.js');\n\nconst { ceil, random } = Math;\n\nlet demo_menu;\nlet demo_menu_up = false;\nlet demo_result;\nlet font_style;\n\nlet inited;\nlet edit_box1;\nlet edit_box2;\nlet test_select1;\nlet test_select2;\nlet slider_value = 1;\nfunction init(x, y, column_width) {\n  edit_box1 = glov_ui.createEditBox({\n    x: x + column_width,\n    y: y,\n    w: column_width - 8\n  });\n  edit_box2 = glov_ui.createEditBox({\n    x: x + column_width + column_width,\n    y: y,\n    w: column_width - 8\n  });\n  demo_menu = glov_simple_menu.create({\n    items: ['Option 1', {\n      name: 'Option 2',\n      tag: 'opt2'\n    }, {\n      name: 'Option C',\n      cb: () => {\n        demo_result = 'Callback the third';\n      }\n    }]\n  });\n  font_style = glov_font.style(null, {\n    outline_width: 1.0,\n    outline_color: 0x800000ff,\n    glow_xoffs: 3.25,\n    glow_yoffs: 3.25,\n    glow_inner: -2.5,\n    glow_outer: 5,\n    glow_color: 0x000000ff\n  });\n\n  test_select1 = glov_selection_box.create({\n    items: ['Apples', 'Bananas', 'Chameleon'],\n    z: Z.UI,\n    width: column_width - 8\n  });\n  test_select2 = glov_selection_box.create({\n    items: ['Apples', 'Bananas', 'Chameleon'],\n    is_dropdown: true,\n    z: Z.UI,\n    width: column_width - 8\n  });\n}\n\nexport function run(x, y, z) {\n  z = z || Z.UI;\n  let line_height = glov_ui.button_height + 2;\n  let column_width = glov_ui.button_width + 8;\n  if (inited !== `${x}_${y}_${column_width}`) {\n    init(x, y, column_width);\n    inited = `${x}_${y}_${column_width}`;\n  }\n\n  if (demo_menu_up) {\n    demo_result = '';\n    demo_menu.run({ x: x + glov_ui.button_width, y: y + line_height, z: Z.MODAL });\n    if (demo_menu.isSelected()) {\n      if (demo_menu.isSelected('opt2')) {\n        demo_result = 'Selected the second option';\n      }\n      if (!demo_result) {\n        demo_result = `Menu selected: ${demo_menu.getSelectedItem().name}`;\n      }\n      demo_menu_up = false;\n    }\n    glov_ui.menuUp();\n    glov_input.eatAllInput();\n  }\n\n  let pad = 8;\n  let w = glov_ui.print(font_style, x + column_width + 4, y + 40, z, `Edit Box Text: ${edit_box1.text}+${edit_box2.text}`);\n  w = Math.max(w, glov_ui.print(font_style, x + column_width, y + 40 + glov_ui.font_height + pad, z, `Result: ${demo_result}`));\n  glov_ui.panel({ x: x + column_width + 4 - pad, y: y + 40 - pad, z: z - 1,\n    w: w + pad * 2, h: glov_ui.font_height * 2 + pad * 3 });\n\n  if (glov_ui.buttonText({ x, y, z, text: 'Modal Dialog', tooltip: 'Shows a modal dialog' })) {\n    demo_result = '';\n    glov_ui.modalDialog({\n      title: 'Modal Dialog',\n      text: 'This is a modal dialog!',\n      buttons: {\n        'OK': function () {\n          demo_result = 'OK pushed!';\n        },\n        'Cancel': null // no callback\n      }\n    });\n  }\n  y += line_height;\n\n  if (edit_box1.run() === edit_box1.SUBMIT) {\n    glov_ui.modalDialog({\n      title: 'Modal Dialog',\n      text: `Edit box submitted with text ${edit_box1.text}`,\n      buttons: {\n        'OK': null\n      }\n    });\n  }\n  if (edit_box2.run() === edit_box2.SUBMIT) {\n    edit_box2.setText('');\n  }\n\n  if (glov_ui.buttonText({ x, y, z, text: 'Menu', tooltip: 'Shows a menu' })) {\n    demo_menu_up = true;\n  }\n  y += line_height;\n\n  if (glov_ui.buttonText({ x, y, z, text: 'Disabled', tooltip: 'A disabled button', disabled: true })) {\n    assert(false);\n  }\n  y += line_height;\n\n  y += test_select1.run({ x, y, z });\n  y += test_select2.run({ x, y, z });\n\n  slider_value = glov_ui.slider(slider_value, {\n    x, y, z,\n    min: 0,\n    max: 2\n  });\n  glov_ui.print(null, x + glov_ui.button_width + pad, y, z, `${slider_value.toFixed(2)}`);\n  y += glov_ui.button_height;\n}\n\nexport function runFontTest(x, y) {\n  const COLOR_RED = 0xFF0000ff;\n  const COLOR_GREEN = 0x00FF00ff;\n  const COLOR_WHITE = 0xFFFFFFff;\n  const COLOR_INVISIBLE = 0x00000000;\n  let z = Z.UI;\n  let font = glov_engine.font;\n\n  let font_size = glov_ui.font_height * 2;\n  font.drawSized(null, x, y, z, font_size, `Default ${font_size} ${random().toFixed(7)}`);\n  y += font_size;\n  font.drawSized(null, x, y, z, font_size / 2, `Default ${font_size / 2} Lorem ipsum dolor sit amet`);\n  y += ceil(font_size / 2);\n  font.drawSized(null, x, y, z, font_size / 4, `Default ${font_size / 4} The quick brown fox jumped over the lazy dog rutabaga Alfalfa`);\n  y += ceil(font_size / 4);\n\n  const font_style_outline = {\n    outline_width: 1, outline_color: COLOR_RED,\n    glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 0, glow_color: COLOR_INVISIBLE,\n    color: COLOR_WHITE\n  };\n  font.drawSized(font_style_outline, x, y, z, font_size, 'Outline');\n  y += font_size;\n\n  const font_style_glow = {\n    outline_width: 0, outline_color: COLOR_INVISIBLE,\n    glow_xoffs: 0, glow_yoffs: 0, glow_inner: -1, glow_outer: 4, glow_color: COLOR_GREEN,\n    color: COLOR_WHITE\n  };\n  font.drawSized(font_style_glow, x, y, z, font_size, 'Glow');\n  y += font_size;\n\n  const font_style_shadow = {\n    outline_width: 0, outline_color: COLOR_INVISIBLE,\n    glow_xoffs: 3.25, glow_yoffs: 3.25, glow_inner: -2.5, glow_outer: 5, glow_color: COLOR_GREEN,\n    color: COLOR_WHITE\n  };\n  font.drawSized(font_style_shadow, x, y, z, font_size, 'Glow (Shadow) O0O');\n  y += font_size;\n\n  const font_style_both = {\n    outline_width: 1, outline_color: COLOR_RED,\n    glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 6, glow_color: COLOR_GREEN,\n    color: COLOR_WHITE\n  };\n  font.drawSized(font_style_both, x, y, z, font_size, 'Both 0O0');\n  y += font_size;\n\n  let font_size2 = 32;\n  const font_style_both2 = {\n    outline_width: 1.75, outline_color: COLOR_RED,\n    glow_xoffs: 0.25, glow_yoffs: 0.25, glow_inner: 0, glow_outer: 5, glow_color: 0x7F7F7Fff,\n    color: COLOR_WHITE\n  };\n  font.drawSizedAligned(font_style_both2, x, y, z, font_size2, glov_font.ALIGN.HFIT, glov_ui.button_width * 2, 0, 'ALIGN.HFIT The quick brown fox jumps over the lazy dog');\n  y += font_size2;\n  font.drawSizedAligned(font_style_both2, x, y, z, font_size2, glov_font.ALIGN.HFIT, 140, 0, '0 Players (+1 Easy Bots)');\n  y += font_size2;\n\n  let test = 'glow';\n\n  if (test === 'outline') {\n    const font_style_outline2 = {\n      outline_width: 1, outline_color: COLOR_RED,\n      glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 0, glow_color: COLOR_INVISIBLE,\n      color: COLOR_WHITE\n    };\n    for (let ii = 1; ii <= 4; ii++) {\n      font_style_outline2.outline_width = ii * 2;\n      font.drawSizedAligned(font_style_outline2, x, y, z, font_size2, glov_font.ALIGN.HLEFT, 400, 0, `Outline thickness ${ii * 2}`);\n      y += font_size2;\n    }\n\n    // Not allowing non-uniform scaling here, simulate with camera?\n    // font.drawSizedAligned(font_style_outline2, x, y, z, font_size2 * 2, font_size2, glov_font.ALIGN.HLEFT, 400, 0,\n    //   'Wide thick outline');\n    // y += font_size2;\n    // font.drawSizedAligned(font_style_outline2, x, y, z, font_size2, font_size2 * 2, glov_font.ALIGN.HLEFT, 400, 0,\n    //   'Tall thick outline');\n    // y += font_size2 * 2;\n  } else if (test === 'glow') {\n    const font_style_glow2 = {\n      outline_width: 0, outline_color: COLOR_INVISIBLE,\n      glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 8, glow_color: COLOR_RED,\n      color: COLOR_WHITE\n    };\n    for (let ii = 1; ii <= 4; ii++) {\n      //font_style_glow2.glow_inner = ii * 2 - 1;\n      font_style_glow2.glow_outer = ii * 2;\n      font.drawSizedAligned(font_style_glow2, x, y, z, font_size2, glov_font.ALIGN.HLEFT, 400, 0, `Glow outer ${ii * 2}`);\n      y += font_size2;\n    }\n\n    // Not allowing non-uniform scaling here, simulate with camera?\n    // font.drawSizedAligned(font_style_glow2, x, y, z, font_size2 * 2, font_size2, glov_font.ALIGN.HLEFT, 400, 0,\n    //   'Wide thick glow \\x01\\x02\\xe5\\xae\\xb4\\xe8\\xaf\\xb7');\n    // y += font_size2;\n    // font.drawSizedAligned(font_style_glow2, x, y, z, font_size2, font_size2 * 2, glov_font.ALIGN.HLEFT, 400, 0,\n    //   'Tall thick glow');\n    // y += font_size2 * 2;\n  } else if (test === 'wrap') {\n    y += font.drawSizedWrapped(null, x, y, z, 400, 24, font_size2, 0xFFFFFFff, 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor' + ' incididunt utlaboreetdoloremagnaaliqua.');\n  }\n\n  // Gradient not supported\n  // y = y0;\n  // x += font_size * 8;\n  // const font_style_gradient = {\n  //   outline_width: 1, outline_color: 0x777777ff,\n  //   glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 0, glow_color: COLOR_BLUE,\n  //   gradient: [COLOR_WHITE, COLOR_WHITE, COLOR_BLACK, COLOR_BLACK],\n  // };\n  // font.drawSized(font_style_gradient, x, y + Math.sin(glov_engine.getFrameTimestamp() * 0.005) * 20, z,\n  //   font_size*2, 'Gradient');\n  // y += font_size*2;\n}","/* eslint no-bitwise:off */\n\n// Vector math functions required by the rest of the engine taken piecemeal from\n// gl-matrix and related, as well as some generic math utilities\nexports.mat3 = require('gl-mat3/create');\nexports.mat4 = require('gl-mat4/create');\n\nconst { abs, floor, max, min, round, sqrt } = Math;\n\nexport function clamp(a, mn, mx) {\n  return max(mn, min(mx, a));\n}\n\nexport function fract(v) {\n  return v - floor(v);\n}\n\nexport function lerp(a, v0, v1) {\n  return (1 - a) * v0 + a * v1;\n}\n\nexport function isPowerOfTwo(n) {\n  return (n & n - 1) === 0;\n}\n\nexport function nextHighestPowerOfTwo(x) {\n  --x;\n  for (let i = 1; i < 32; i <<= 1) {\n    x |= x >> i;\n  }\n  return x + 1;\n}\n\nexport function vec2(a, b) {\n  let r = new Float32Array(2);\n  if (a || b) {\n    r[0] = a;\n    r[1] = b;\n  }\n  return r;\n}\n\nexport function vec3(a, b, c) {\n  let r = new Float32Array(3);\n  if (a || b || c) {\n    r[0] = a;\n    r[1] = b;\n    r[2] = c;\n  }\n  return r;\n}\n\nexport function vec4(a, b, c, d) {\n  let r = new Float32Array(4);\n  if (a || b || c || d) {\n    r[0] = a;\n    r[1] = b;\n    r[2] = c;\n    r[3] = d;\n  }\n  return r;\n}\n\nexport const unit_vec = vec4(1, 1, 1, 1);\nexport const half_vec = vec4(0.5, 0.5, 0.5, 0.5);\nexport const zero_vec = vec4();\nexport const identity_mat3 = exports.mat3();\nexport const identity_mat4 = exports.mat4();\nexport const xaxis = vec4(1, 0, 0, 0);\nexport const yaxis = vec4(0, 1, 0, 0);\nexport const zaxis = vec4(0, 0, 1, 0);\n\nexport function v2abs(out, a) {\n  out[0] = abs(a[0]);\n  out[1] = abs(a[1]);\n  return out;\n}\n\nexport function v2add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n\nexport function v2addScale(out, a, b, s) {\n  out[0] = a[0] + b[0] * s;\n  out[1] = a[1] + b[1] * s;\n  return out;\n}\n\nexport function v2copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n\nexport function v2distSq(a, b) {\n  return (a[0] - b[0]) * (a[0] - b[0]) + (a[1] - b[1]) * (a[1] - b[1]);\n}\n\nexport function v2div(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n\nexport function v2floor(out, a) {\n  out[0] = floor(a[0]);\n  out[1] = floor(a[1]);\n  return out;\n}\n\nexport function v2lengthSq(a) {\n  return a[0] * a[0] + a[1] * a[1];\n}\n\nexport function v2lerp(out, t, a, b) {\n  let it = 1 - t;\n  out[0] = it * a[0] + t * b[0];\n  out[1] = it * a[1] + t * b[1];\n  return out;\n}\n\nexport function v2mul(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n\nexport function v2normalize(out, a) {\n  let len = a[0] * a[0] + a[1] * a[1];\n  if (len > 0) {\n    len = 1 / sqrt(len);\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n  }\n  return out;\n}\n\nexport function v2scale(out, a, s) {\n  out[0] = a[0] * s;\n  out[1] = a[1] * s;\n  return out;\n}\n\nexport function v2set(out, a, b) {\n  out[0] = a;\n  out[1] = b;\n  return out;\n}\n\nexport function v2sub(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n\nexport function v3add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n\nexport function v3addScale(out, a, b, s) {\n  out[0] = a[0] + b[0] * s;\n  out[1] = a[1] + b[1] * s;\n  out[2] = a[2] + b[2] * s;\n  return out;\n}\n\nexport function v3copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n\nexport function v3cross(out, a, b) {\n  let a0 = a[0];\n  let a1 = a[1];\n  let a2 = a[2];\n  let b0 = b[0];\n  let b1 = b[1];\n  let b2 = b[2];\n  out[0] = a1 * b2 - a2 * b1;\n  out[1] = a2 * b0 - a0 * b2;\n  out[2] = a0 * b1 - a1 * b0;\n  return out;\n}\n\n// determinant of the matrix made by (columns?) [a, b, c];\nexport function v3determinant(a, b, c) {\n  // let a00 = a[0];\n  // let a01 = a[1];\n  // let a02 = a[2];\n  // let a10 = b[0];\n  // let a11 = b[1];\n  // let a12 = b[2];\n  // let a20 = c[0];\n  // let a21 = c[2];\n  // let a22 = c[2];\n  let a00 = a[0];\n  let a01 = b[0];\n  let a02 = c[0];\n  let a10 = a[1];\n  let a11 = b[1];\n  let a12 = c[1];\n  let a20 = a[2];\n  let a21 = b[2];\n  let a22 = c[2];\n\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n\nexport function v3dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\nexport function v3distSq(a, b) {\n  return (a[0] - b[0]) * (a[0] - b[0]) + (a[1] - b[1]) * (a[1] - b[1]) + (a[2] - b[2]) * (a[2] - b[2]);\n}\n\nexport function v3div(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n\nexport function v3floor(out, a) {\n  out[0] = floor(a[0]);\n  out[1] = floor(a[1]);\n  out[2] = floor(a[2]);\n  return out;\n}\n\nexport function v3lengthSq(a) {\n  return a[0] * a[0] + a[1] * a[1] + a[2] * a[2];\n}\n\nexport function v3lerp(out, t, a, b) {\n  let it = 1 - t;\n  out[0] = it * a[0] + t * b[0];\n  out[1] = it * a[1] + t * b[1];\n  out[2] = it * a[2] + t * b[2];\n  return out;\n}\n\nexport function v3mul(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n\nexport function v3mulMat4(out, a, m) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  out[0] = x * m[0] + y * m[4] + z * m[8];\n  out[1] = x * m[1] + y * m[5] + z * m[9];\n  out[2] = x * m[2] + y * m[6] + z * m[10];\n  return out;\n}\n\nexport function v3normalize(out, a) {\n  let len = a[0] * a[0] + a[1] * a[1] + a[2] * a[2];\n  if (len > 0) {\n    len = 1 / sqrt(len);\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n    out[2] = a[2] * len;\n  }\n  return out;\n}\n\nexport function v3round(out, a) {\n  out[0] = round(a[0]);\n  out[1] = round(a[1]);\n  out[2] = round(a[2]);\n  return out;\n}\n\nexport function v3same(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n\nexport function v3scale(out, a, s) {\n  out[0] = a[0] * s;\n  out[1] = a[1] * s;\n  out[2] = a[2] * s;\n  return out;\n}\n\nexport function v3set(out, a, b, c) {\n  out[0] = a;\n  out[1] = b;\n  out[2] = c;\n  return out;\n}\n\nexport function v3sub(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n\nexport function v3zero(out) {\n  out[0] = out[1] = out[2] = 0;\n  return out;\n}\n\nexport function v4clone(a) {\n  return a.slice(0);\n}\n\nexport function v4copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n\nexport function v4lerp(out, t, a, b) {\n  let it = 1 - t;\n  out[0] = it * a[0] + t * b[0];\n  out[1] = it * a[1] + t * b[1];\n  out[2] = it * a[2] + t * b[2];\n  out[3] = it * a[3] + t * b[3];\n  return out;\n}\n\nexport function v4mul(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n\nexport function v4mulAdd(out, a, b, c) {\n  out[0] = a[0] * b[0] + c[0];\n  out[1] = a[1] * b[1] + c[1];\n  out[2] = a[2] * b[2] + c[2];\n  out[3] = a[3] * b[3] + c[3];\n  return out;\n}\n\nexport function v4scale(out, a, s) {\n  out[0] = a[0] * s;\n  out[1] = a[1] * s;\n  out[2] = a[2] * s;\n  out[3] = a[3] * s;\n  return out;\n}\n\nexport function v4set(out, a, b, c, d) {\n  out[0] = a;\n  out[1] = b;\n  out[2] = c;\n  out[3] = d;\n  return out;\n}\n\nexport function v4zero(out) {\n  out[0] = out[1] = out[2] = out[3] = 0;\n  return out;\n}","module.exports={\"font_size\":8,\"imageW\":128,\"imageH\":128,\"spread\":2,\"noFilter\":1,\"channels\":1,\"char_infos\":[{\"c\":32,\"x0\":61,\"y0\":63,\"xpad\":4,\"w\":0,\"h\":0},{\"c\":33,\"x0\":92,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":1,\"h\":5},{\"c\":34,\"x0\":16,\"y0\":63,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":2},{\"c\":35,\"x0\":98,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":36,\"x0\":38,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":37,\"x0\":108,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":38,\"x0\":118,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":39,\"x0\":24,\"y0\":63,\"yoffs\":1,\"xpad\":1,\"w\":1,\"h\":2},{\"c\":40,\"x0\":2,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":5},{\"c\":41,\"x0\":9,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":5},{\"c\":42,\"x0\":109,\"y0\":54,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":3},{\"c\":43,\"x0\":117,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":3,\"h\":3},{\"c\":44,\"x0\":30,\"y0\":63,\"yoffs\":5,\"xpad\":1,\"w\":2,\"h\":2},{\"c\":45,\"x0\":67,\"y0\":63,\"yoffs\":3,\"xpad\":1,\"w\":3,\"h\":1},{\"c\":46,\"x0\":75,\"y0\":63,\"yoffs\":5,\"xpad\":1,\"w\":1,\"h\":1},{\"c\":47,\"x0\":16,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":48,\"x0\":26,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":49,\"x0\":35,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":5},{\"c\":50,\"x0\":42,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":51,\"x0\":51,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":52,\"x0\":60,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":53,\"x0\":69,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":54,\"x0\":78,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":55,\"x0\":87,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":56,\"x0\":96,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":57,\"x0\":105,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":58,\"x0\":2,\"y0\":63,\"yoffs\":2,\"xpad\":1,\"w\":1,\"h\":3},{\"c\":59,\"x0\":115,\"y0\":44,\"yoffs\":2,\"xpad\":1,\"w\":1,\"h\":4},{\"c\":60,\"x0\":114,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":61,\"x0\":8,\"y0\":63,\"yoffs\":2,\"xpad\":1,\"w\":3,\"h\":3},{\"c\":62,\"x0\":122,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":63,\"x0\":2,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":64,\"x0\":11,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":65,\"x0\":21,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":66,\"x0\":30,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":67,\"x0\":39,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":68,\"x0\":47,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":69,\"x0\":56,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":70,\"x0\":64,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":71,\"x0\":72,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":72,\"x0\":81,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":73,\"x0\":90,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":74,\"x0\":98,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":75,\"x0\":107,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":76,\"x0\":116,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":77,\"x0\":2,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":78,\"x0\":12,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":79,\"x0\":21,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":80,\"x0\":30,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":81,\"x0\":47,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":82,\"x0\":39,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":83,\"x0\":48,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":84,\"x0\":57,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":85,\"x0\":65,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":86,\"x0\":74,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":87,\"x0\":83,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":88,\"x0\":93,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":89,\"x0\":102,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":90,\"x0\":111,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":91,\"x0\":119,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":5},{\"c\":92,\"x0\":2,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":93,\"x0\":12,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":5},{\"c\":94,\"x0\":37,\"y0\":63,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":2},{\"c\":95,\"x0\":81,\"y0\":63,\"yoffs\":5,\"xpad\":1,\"w\":4,\"h\":1},{\"c\":96,\"x0\":45,\"y0\":63,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":2},{\"c\":97,\"x0\":121,\"y0\":44,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":98,\"x0\":19,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":99,\"x0\":2,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":3,\"h\":4},{\"c\":100,\"x0\":28,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":101,\"x0\":10,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":102,\"x0\":37,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":103,\"x0\":56,\"y0\":2,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":104,\"x0\":45,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":105,\"x0\":54,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":1,\"h\":5},{\"c\":106,\"x0\":2,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":7},{\"c\":107,\"x0\":60,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":108,\"x0\":69,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":1,\"h\":5},{\"c\":109,\"x0\":19,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":5,\"h\":4},{\"c\":110,\"x0\":29,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":111,\"x0\":38,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":112,\"x0\":65,\"y0\":2,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":113,\"x0\":74,\"y0\":2,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":114,\"x0\":47,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":3,\"h\":4},{\"c\":115,\"x0\":55,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":116,\"x0\":75,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":117,\"x0\":64,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":118,\"x0\":73,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":119,\"x0\":82,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":5,\"h\":4},{\"c\":120,\"x0\":92,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":3,\"h\":4},{\"c\":121,\"x0\":83,\"y0\":2,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":122,\"x0\":100,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":123,\"x0\":83,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":124,\"x0\":91,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":1,\"h\":5},{\"c\":125,\"x0\":97,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":126,\"x0\":52,\"y0\":63,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":2},{\"c\":160,\"x0\":90,\"y0\":63,\"xpad\":3,\"w\":1,\"h\":1},{\"c\":65533,\"x0\":105,\"y0\":44,\"yoffs\":2,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":128263,\"x0\":9,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":10,\"h\":7},{\"c\":128264,\"x0\":24,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":9,\"h\":7}]}\n","module.exports={\"font_size\":16,\"imageW\":1024,\"imageH\":64,\"spread\":2,\"noFilter\":1,\"channels\":1,\"char_infos\":[{\"c\":32,\"x0\":172,\"y0\":21,\"xpad\":8,\"w\":0,\"h\":0},{\"c\":33,\"x0\":137,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":2,\"h\":10},{\"c\":34,\"x0\":81,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":4},{\"c\":35,\"x0\":144,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":36,\"x0\":59,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":37,\"x0\":159,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":38,\"x0\":174,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":39,\"x0\":92,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":2,\"h\":4},{\"c\":40,\"x0\":189,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":10},{\"c\":41,\"x0\":198,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":10},{\"c\":42,\"x0\":41,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":6},{\"c\":43,\"x0\":52,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":6,\"h\":6},{\"c\":44,\"x0\":99,\"y0\":21,\"yoffs\":11,\"xpad\":2,\"w\":4,\"h\":4},{\"c\":45,\"x0\":141,\"y0\":21,\"yoffs\":7,\"xpad\":2,\"w\":6,\"h\":2},{\"c\":46,\"x0\":152,\"y0\":21,\"yoffs\":11,\"xpad\":2,\"w\":2,\"h\":2},{\"c\":47,\"x0\":207,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":48,\"x0\":222,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":49,\"x0\":235,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":10},{\"c\":50,\"x0\":244,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":51,\"x0\":257,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":52,\"x0\":270,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":53,\"x0\":283,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":54,\"x0\":296,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":55,\"x0\":309,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":56,\"x0\":322,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":57,\"x0\":335,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":58,\"x0\":63,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":2,\"h\":6},{\"c\":59,\"x0\":877,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":2,\"h\":8},{\"c\":60,\"x0\":348,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":61,\"x0\":70,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":6,\"h\":6},{\"c\":62,\"x0\":359,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":63,\"x0\":370,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":64,\"x0\":383,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":65,\"x0\":398,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":66,\"x0\":411,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":67,\"x0\":424,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":68,\"x0\":435,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":69,\"x0\":448,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":70,\"x0\":459,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":71,\"x0\":470,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":72,\"x0\":483,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":73,\"x0\":496,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":74,\"x0\":507,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":75,\"x0\":520,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":76,\"x0\":533,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":77,\"x0\":544,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":78,\"x0\":559,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":79,\"x0\":572,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":80,\"x0\":585,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":81,\"x0\":72,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":82,\"x0\":598,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":83,\"x0\":611,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":84,\"x0\":624,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":85,\"x0\":635,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":86,\"x0\":648,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":87,\"x0\":661,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":88,\"x0\":676,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":89,\"x0\":689,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":90,\"x0\":702,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":91,\"x0\":713,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":10},{\"c\":92,\"x0\":722,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":93,\"x0\":737,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":10},{\"c\":94,\"x0\":108,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":4},{\"c\":95,\"x0\":159,\"y0\":21,\"yoffs\":11,\"xpad\":2,\"w\":8,\"h\":2},{\"c\":96,\"x0\":119,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":4},{\"c\":97,\"x0\":884,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":98,\"x0\":746,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":99,\"x0\":897,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":6,\"h\":8},{\"c\":100,\"x0\":759,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":101,\"x0\":908,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":102,\"x0\":772,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":103,\"x0\":85,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":104,\"x0\":783,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":105,\"x0\":796,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":2,\"h\":10},{\"c\":106,\"x0\":2,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":14},{\"c\":107,\"x0\":803,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":108,\"x0\":816,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":2,\"h\":10},{\"c\":109,\"x0\":921,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":10,\"h\":8},{\"c\":110,\"x0\":936,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":111,\"x0\":949,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":112,\"x0\":98,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":113,\"x0\":111,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":114,\"x0\":962,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":6,\"h\":8},{\"c\":115,\"x0\":973,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":116,\"x0\":823,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":117,\"x0\":986,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":118,\"x0\":999,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":119,\"x0\":2,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":10,\"h\":8},{\"c\":120,\"x0\":17,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":6,\"h\":8},{\"c\":121,\"x0\":124,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":122,\"x0\":28,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":123,\"x0\":834,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":124,\"x0\":845,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":2,\"h\":10},{\"c\":125,\"x0\":852,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":126,\"x0\":128,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":4},{\"c\":160,\"x0\":178,\"y0\":21,\"xpad\":7,\"w\":1,\"h\":1},{\"c\":65533,\"x0\":863,\"y0\":2,\"yoffs\":3,\"xpad\":1,\"w\":9,\"h\":10},{\"c\":128263,\"x0\":11,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":19,\"h\":14},{\"c\":128264,\"x0\":35,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":19,\"h\":14}]}\n","module.exports={\"font_size\":32,\"imageW\":1024,\"imageH\":512,\"spread\":8,\"channels\":1,\"char_infos\":[{\"c\":13,\"x0\":37,\"y0\":377,\"w\":1,\"h\":1},{\"c\":32,\"x0\":55,\"y0\":377,\"xpad\":7.10156,\"w\":0,\"h\":0},{\"c\":33,\"x0\":216,\"y0\":228,\"yoffs\":4,\"xpad\":1.13281,\"w\":6,\"h\":22},{\"c\":34,\"x0\":617,\"y0\":345,\"yoffs\":4,\"w\":10,\"h\":8},{\"c\":35,\"x0\":467,\"y0\":307,\"yoffs\":10,\"w\":16,\"h\":17},{\"c\":36,\"x0\":191,\"y0\":8,\"yoffs\":1,\"xpad\":1.32031,\"w\":15,\"h\":29},{\"c\":37,\"x0\":673,\"y0\":147,\"yoffs\":4,\"xpad\":0.773438,\"w\":26,\"h\":23},{\"c\":38,\"x0\":716,\"y0\":147,\"yoffs\":4,\"xpad\":0.570313,\"w\":20,\"h\":23},{\"c\":39,\"x0\":644,\"y0\":345,\"yoffs\":4,\"w\":5,\"h\":8},{\"c\":40,\"x0\":753,\"y0\":147,\"yoffs\":5,\"w\":8,\"h\":23},{\"c\":41,\"x0\":778,\"y0\":147,\"yoffs\":5,\"xpad\":0.890625,\"w\":7,\"h\":23},{\"c\":42,\"x0\":469,\"y0\":345,\"yoffs\":2,\"w\":11,\"h\":11},{\"c\":43,\"x0\":500,\"y0\":307,\"yoffs\":9,\"xpad\":0.414063,\"w\":15,\"h\":17},{\"c\":44,\"x0\":666,\"y0\":345,\"yoffs\":22,\"w\":5,\"h\":8},{\"c\":45,\"x0\":993,\"y0\":345,\"yoffs\":16,\"w\":9,\"h\":3},{\"c\":46,\"x0\":897,\"y0\":345,\"yoffs\":22,\"w\":5,\"h\":4},{\"c\":47,\"x0\":802,\"y0\":147,\"yoffs\":4,\"w\":13,\"h\":23},{\"c\":48,\"x0\":239,\"y0\":228,\"yoffs\":5,\"xpad\":0.671875,\"w\":17,\"h\":22},{\"c\":49,\"x0\":208,\"y0\":268,\"yoffs\":5,\"xpad\":5.67188,\"w\":12,\"h\":21},{\"c\":50,\"x0\":237,\"y0\":268,\"yoffs\":5,\"xpad\":1.67188,\"w\":16,\"h\":21},{\"c\":51,\"x0\":273,\"y0\":228,\"yoffs\":5,\"xpad\":1.67188,\"w\":16,\"h\":22},{\"c\":52,\"x0\":270,\"y0\":268,\"yoffs\":5,\"xpad\":0.671875,\"w\":17,\"h\":21},{\"c\":53,\"x0\":306,\"y0\":228,\"yoffs\":5,\"xpad\":1.67188,\"w\":16,\"h\":22},{\"c\":54,\"x0\":339,\"y0\":228,\"yoffs\":5,\"xpad\":0.671875,\"w\":17,\"h\":22},{\"c\":55,\"x0\":304,\"y0\":268,\"yoffs\":5,\"xpad\":1.67188,\"w\":16,\"h\":21},{\"c\":56,\"x0\":373,\"y0\":228,\"yoffs\":5,\"xpad\":0.671875,\"w\":17,\"h\":22},{\"c\":57,\"x0\":407,\"y0\":228,\"yoffs\":5,\"xpad\":0.671875,\"w\":17,\"h\":22},{\"c\":58,\"x0\":225,\"y0\":345,\"yoffs\":12,\"w\":5,\"h\":14},{\"c\":59,\"x0\":445,\"y0\":307,\"yoffs\":12,\"w\":5,\"h\":18},{\"c\":60,\"x0\":970,\"y0\":307,\"yoffs\":11,\"xpad\":0.90625,\"w\":9,\"h\":15},{\"c\":61,\"x0\":585,\"y0\":345,\"yoffs\":14,\"w\":15,\"h\":9},{\"c\":62,\"x0\":996,\"y0\":307,\"yoffs\":11,\"w\":10,\"h\":15},{\"c\":63,\"x0\":441,\"y0\":228,\"yoffs\":4,\"xpad\":0.195313,\"w\":12,\"h\":22},{\"c\":64,\"x0\":832,\"y0\":147,\"yoffs\":7,\"xpad\":1.21094,\"w\":23,\"h\":23},{\"c\":65,\"x0\":337,\"y0\":268,\"yoffs\":5,\"w\":19,\"h\":21},{\"c\":66,\"x0\":373,\"y0\":268,\"yoffs\":5,\"xpad\":0.882813,\"w\":18,\"h\":21},{\"c\":67,\"x0\":470,\"y0\":228,\"yoffs\":5,\"xpad\":0.945313,\"w\":17,\"h\":22},{\"c\":68,\"x0\":408,\"y0\":268,\"yoffs\":5,\"xpad\":1.01563,\"w\":20,\"h\":21},{\"c\":69,\"x0\":445,\"y0\":268,\"yoffs\":5,\"xpad\":0.617188,\"w\":16,\"h\":21},{\"c\":70,\"x0\":478,\"y0\":268,\"yoffs\":5,\"w\":15,\"h\":21},{\"c\":71,\"x0\":504,\"y0\":228,\"yoffs\":5,\"xpad\":1.75,\"w\":18,\"h\":22},{\"c\":72,\"x0\":510,\"y0\":268,\"yoffs\":5,\"xpad\":2.53906,\"w\":18,\"h\":21},{\"c\":73,\"x0\":545,\"y0\":268,\"yoffs\":5,\"xpad\":2.54688,\"w\":6,\"h\":21},{\"c\":74,\"x0\":539,\"y0\":228,\"yoffs\":5,\"xpad\":2.75781,\"w\":6,\"h\":22},{\"c\":75,\"x0\":568,\"y0\":268,\"yoffs\":5,\"w\":19,\"h\":21},{\"c\":76,\"x0\":604,\"y0\":268,\"yoffs\":5,\"w\":16,\"h\":21},{\"c\":77,\"x0\":637,\"y0\":268,\"yoffs\":5,\"xpad\":2.27344,\"w\":21,\"h\":21},{\"c\":78,\"x0\":675,\"y0\":268,\"yoffs\":5,\"xpad\":2.74219,\"w\":19,\"h\":21},{\"c\":79,\"x0\":872,\"y0\":147,\"yoffs\":4,\"xpad\":1.22656,\"w\":21,\"h\":23},{\"c\":80,\"x0\":711,\"y0\":268,\"yoffs\":5,\"xpad\":0.828125,\"w\":17,\"h\":21},{\"c\":81,\"x0\":910,\"y0\":147,\"yoffs\":4,\"xpad\":1.22656,\"w\":21,\"h\":23},{\"c\":82,\"x0\":745,\"y0\":268,\"yoffs\":5,\"w\":19,\"h\":21},{\"c\":83,\"x0\":948,\"y0\":147,\"yoffs\":4,\"xpad\":1.32031,\"w\":15,\"h\":23},{\"c\":84,\"x0\":781,\"y0\":268,\"yoffs\":5,\"w\":17,\"h\":21},{\"c\":85,\"x0\":562,\"y0\":228,\"yoffs\":5,\"xpad\":2.04688,\"w\":19,\"h\":22},{\"c\":86,\"x0\":815,\"y0\":268,\"yoffs\":5,\"w\":19,\"h\":21},{\"c\":87,\"x0\":851,\"y0\":268,\"yoffs\":5,\"w\":30,\"h\":21},{\"c\":88,\"x0\":598,\"y0\":228,\"yoffs\":5,\"w\":20,\"h\":22},{\"c\":89,\"x0\":898,\"y0\":268,\"yoffs\":5,\"w\":18,\"h\":21},{\"c\":90,\"x0\":933,\"y0\":268,\"yoffs\":5,\"xpad\":0.226563,\"w\":17,\"h\":21},{\"c\":91,\"x0\":831,\"y0\":102,\"yoffs\":4,\"w\":9,\"h\":25},{\"c\":92,\"x0\":980,\"y0\":147,\"yoffs\":4,\"w\":13,\"h\":23},{\"c\":93,\"x0\":857,\"y0\":102,\"yoffs\":4,\"xpad\":1.70313,\"w\":7,\"h\":25},{\"c\":94,\"x0\":688,\"y0\":345,\"yoffs\":14,\"xpad\":0.1875,\"w\":13,\"h\":8},{\"c\":95,\"x0\":8,\"y0\":377,\"yoffs\":23,\"xpad\":0.4375,\"w\":12,\"h\":3},{\"c\":96,\"x0\":798,\"y0\":345,\"yoffs\":3,\"w\":6,\"h\":6},{\"c\":97,\"x0\":532,\"y0\":307,\"yoffs\":10,\"xpad\":1.29688,\"w\":14,\"h\":17},{\"c\":98,\"x0\":8,\"y0\":188,\"yoffs\":4,\"xpad\":0.890625,\"w\":16,\"h\":23},{\"c\":99,\"x0\":563,\"y0\":307,\"yoffs\":10,\"xpad\":0.273438,\"w\":14,\"h\":17},{\"c\":100,\"x0\":41,\"y0\":188,\"yoffs\":4,\"xpad\":2.07031,\"w\":15,\"h\":23},{\"c\":101,\"x0\":594,\"y0\":307,\"yoffs\":10,\"xpad\":1.04688,\"w\":15,\"h\":17},{\"c\":102,\"x0\":635,\"y0\":228,\"yoffs\":4,\"w\":10,\"h\":22},{\"c\":103,\"x0\":73,\"y0\":188,\"yoffs\":10,\"xpad\":2.07031,\"w\":15,\"h\":23},{\"c\":104,\"x0\":662,\"y0\":228,\"yoffs\":4,\"xpad\":1.10156,\"w\":16,\"h\":22},{\"c\":105,\"x0\":967,\"y0\":268,\"yoffs\":5,\"xpad\":1.34375,\"w\":6,\"h\":21},{\"c\":106,\"x0\":42,\"y0\":56,\"yoffs\":5,\"xpad\":1.07031,\"w\":7,\"h\":28},{\"c\":107,\"x0\":695,\"y0\":228,\"yoffs\":4,\"xpad\":0.171875,\"w\":15,\"h\":22},{\"c\":108,\"x0\":727,\"y0\":228,\"yoffs\":4,\"xpad\":1.46875,\"w\":6,\"h\":22},{\"c\":109,\"x0\":836,\"y0\":307,\"yoffs\":10,\"xpad\":1.14063,\"w\":25,\"h\":16},{\"c\":110,\"x0\":878,\"y0\":307,\"yoffs\":10,\"xpad\":2.03906,\"w\":15,\"h\":16},{\"c\":111,\"x0\":626,\"y0\":307,\"yoffs\":10,\"xpad\":0.828125,\"w\":16,\"h\":17},{\"c\":112,\"x0\":105,\"y0\":188,\"yoffs\":10,\"xpad\":0.890625,\"w\":16,\"h\":23},{\"c\":113,\"x0\":138,\"y0\":188,\"yoffs\":10,\"xpad\":2.07031,\"w\":15,\"h\":23},{\"c\":114,\"x0\":8,\"y0\":345,\"yoffs\":11,\"xpad\":0.203125,\"w\":10,\"h\":15},{\"c\":115,\"x0\":659,\"y0\":307,\"yoffs\":10,\"xpad\":0.28125,\"w\":13,\"h\":17},{\"c\":116,\"x0\":381,\"y0\":307,\"yoffs\":7,\"xpad\":0.234375,\"w\":10,\"h\":20},{\"c\":117,\"x0\":910,\"y0\":307,\"yoffs\":11,\"xpad\":1.64844,\"w\":15,\"h\":16},{\"c\":118,\"x0\":35,\"y0\":345,\"yoffs\":11,\"w\":15,\"h\":15},{\"c\":119,\"x0\":67,\"y0\":345,\"yoffs\":11,\"w\":23,\"h\":15},{\"c\":120,\"x0\":107,\"y0\":345,\"yoffs\":11,\"w\":16,\"h\":15},{\"c\":121,\"x0\":750,\"y0\":228,\"yoffs\":11,\"w\":15,\"h\":22},{\"c\":122,\"x0\":140,\"y0\":345,\"yoffs\":11,\"xpad\":0.851563,\"w\":13,\"h\":15},{\"c\":123,\"x0\":782,\"y0\":228,\"yoffs\":6,\"w\":9,\"h\":22},{\"c\":124,\"x0\":170,\"y0\":188,\"yoffs\":4,\"xpad\":2.10156,\"w\":6,\"h\":23},{\"c\":125,\"x0\":808,\"y0\":228,\"yoffs\":6,\"xpad\":0.460938,\"w\":8,\"h\":22},{\"c\":126,\"x0\":868,\"y0\":345,\"yoffs\":16,\"xpad\":0.3125,\"w\":12,\"h\":5},{\"c\":144,\"x0\":718,\"y0\":345,\"yoffs\":-5,\"w\":14,\"h\":8},{\"c\":160,\"x0\":73,\"y0\":377,\"xpad\":6.10156,\"w\":1,\"h\":1},{\"c\":161,\"x0\":833,\"y0\":228,\"yoffs\":4,\"xpad\":1.13281,\"w\":6,\"h\":22},{\"c\":162,\"x0\":193,\"y0\":188,\"yoffs\":7,\"xpad\":0.273438,\"w\":14,\"h\":23},{\"c\":163,\"x0\":990,\"y0\":268,\"yoffs\":5,\"xpad\":0.304688,\"w\":14,\"h\":21},{\"c\":164,\"x0\":408,\"y0\":307,\"yoffs\":9,\"xpad\":0.328125,\"w\":20,\"h\":20},{\"c\":165,\"x0\":8,\"y0\":307,\"yoffs\":5,\"w\":18,\"h\":21},{\"c\":166,\"x0\":224,\"y0\":188,\"yoffs\":4,\"xpad\":2.10156,\"w\":6,\"h\":23},{\"c\":167,\"x0\":66,\"y0\":56,\"yoffs\":2,\"xpad\":1.25,\"w\":17,\"h\":28},{\"c\":168,\"x0\":919,\"y0\":345,\"yoffs\":4,\"xpad\":0.453125,\"w\":9,\"h\":4},{\"c\":169,\"x0\":247,\"y0\":188,\"yoffs\":4,\"xpad\":0.625,\"w\":25,\"h\":23},{\"c\":170,\"x0\":375,\"y0\":345,\"yoffs\":4,\"xpad\":0.296875,\"w\":10,\"h\":12},{\"c\":171,\"x0\":497,\"y0\":345,\"yoffs\":13,\"xpad\":0.140625,\"w\":11,\"h\":11},{\"c\":172,\"x0\":553,\"y0\":345,\"yoffs\":13,\"xpad\":0.382813,\"w\":15,\"h\":10},{\"c\":173,\"x0\":91,\"y0\":377,\"xpad\":2.94531,\"w\":1,\"h\":1},{\"c\":174,\"x0\":43,\"y0\":307,\"yoffs\":1,\"xpad\":0.3125,\"w\":22,\"h\":21},{\"c\":175,\"x0\":945,\"y0\":345,\"yoffs\":4,\"w\":9,\"h\":4},{\"c\":176,\"x0\":773,\"y0\":345,\"yoffs\":4,\"w\":8,\"h\":7},{\"c\":177,\"x0\":689,\"y0\":307,\"yoffs\":9,\"w\":14,\"h\":17},{\"c\":178,\"x0\":247,\"y0\":345,\"yoffs\":2,\"xpad\":0.890625,\"w\":11,\"h\":14},{\"c\":179,\"x0\":942,\"y0\":307,\"yoffs\":2,\"xpad\":1.52344,\"w\":11,\"h\":16},{\"c\":180,\"x0\":821,\"y0\":345,\"yoffs\":3,\"w\":6,\"h\":6},{\"c\":181,\"x0\":856,\"y0\":228,\"yoffs\":11,\"xpad\":1.85938,\"w\":15,\"h\":22},{\"c\":182,\"x0\":82,\"y0\":307,\"yoffs\":5,\"xpad\":0.5,\"w\":26,\"h\":21},{\"c\":183,\"x0\":971,\"y0\":345,\"yoffs\":16,\"w\":5,\"h\":4},{\"c\":184,\"x0\":749,\"y0\":345,\"yoffs\":25,\"xpad\":0.0703125,\"w\":7,\"h\":8},{\"c\":185,\"x0\":275,\"y0\":345,\"yoffs\":2,\"xpad\":0.6875,\"w\":10,\"h\":14},{\"c\":186,\"x0\":402,\"y0\":345,\"yoffs\":4,\"xpad\":0.625,\"w\":11,\"h\":12},{\"c\":187,\"x0\":525,\"y0\":345,\"yoffs\":13,\"xpad\":0.140625,\"w\":11,\"h\":11},{\"c\":188,\"x0\":223,\"y0\":8,\"yoffs\":2,\"xpad\":0.0546875,\"w\":25,\"h\":29},{\"c\":189,\"x0\":100,\"y0\":56,\"yoffs\":2,\"xpad\":1.22656,\"w\":25,\"h\":28},{\"c\":190,\"x0\":265,\"y0\":8,\"yoffs\":2,\"xpad\":0.109375,\"w\":26,\"h\":29},{\"c\":191,\"x0\":888,\"y0\":228,\"yoffs\":6,\"xpad\":0.09375,\"w\":13,\"h\":22},{\"c\":192,\"x0\":142,\"y0\":56,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":193,\"x0\":178,\"y0\":56,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":194,\"x0\":214,\"y0\":56,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":195,\"x0\":612,\"y0\":102,\"w\":19,\"h\":26},{\"c\":196,\"x0\":216,\"y0\":102,\"yoffs\":-1,\"w\":19,\"h\":27},{\"c\":197,\"x0\":250,\"y0\":56,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":198,\"x0\":125,\"y0\":307,\"yoffs\":5,\"xpad\":0.28125,\"w\":27,\"h\":21},{\"c\":199,\"x0\":286,\"y0\":56,\"yoffs\":5,\"xpad\":0.945313,\"w\":17,\"h\":28},{\"c\":200,\"x0\":320,\"y0\":56,\"yoffs\":-2,\"xpad\":0.617188,\"w\":16,\"h\":28},{\"c\":201,\"x0\":353,\"y0\":56,\"yoffs\":-2,\"xpad\":0.617188,\"w\":16,\"h\":28},{\"c\":202,\"x0\":386,\"y0\":56,\"yoffs\":-2,\"xpad\":0.617188,\"w\":16,\"h\":28},{\"c\":203,\"x0\":252,\"y0\":102,\"yoffs\":-1,\"xpad\":0.617188,\"w\":16,\"h\":27},{\"c\":204,\"x0\":419,\"y0\":56,\"yoffs\":-2,\"xpad\":1.54688,\"w\":7,\"h\":28},{\"c\":205,\"x0\":443,\"y0\":56,\"yoffs\":-2,\"xpad\":0.546875,\"w\":8,\"h\":28},{\"c\":206,\"x0\":468,\"y0\":56,\"yoffs\":-2,\"w\":11,\"h\":28},{\"c\":207,\"x0\":285,\"y0\":102,\"yoffs\":-1,\"w\":9,\"h\":27},{\"c\":208,\"x0\":169,\"y0\":307,\"yoffs\":5,\"xpad\":1.22656,\"w\":20,\"h\":21},{\"c\":209,\"x0\":648,\"y0\":102,\"xpad\":2.74219,\"w\":19,\"h\":26},{\"c\":210,\"x0\":308,\"y0\":8,\"yoffs\":-2,\"xpad\":1.22656,\"w\":21,\"h\":29},{\"c\":211,\"x0\":346,\"y0\":8,\"yoffs\":-2,\"xpad\":1.22656,\"w\":21,\"h\":29},{\"c\":212,\"x0\":384,\"y0\":8,\"yoffs\":-2,\"xpad\":1.22656,\"w\":21,\"h\":29},{\"c\":213,\"x0\":311,\"y0\":102,\"xpad\":1.22656,\"w\":21,\"h\":27},{\"c\":214,\"x0\":496,\"y0\":56,\"yoffs\":-1,\"xpad\":1.22656,\"w\":21,\"h\":28},{\"c\":215,\"x0\":170,\"y0\":345,\"yoffs\":11,\"xpad\":0.359375,\"w\":15,\"h\":15},{\"c\":216,\"x0\":289,\"y0\":188,\"yoffs\":4,\"xpad\":1.22656,\"w\":21,\"h\":23},{\"c\":217,\"x0\":422,\"y0\":8,\"yoffs\":-2,\"xpad\":2.04688,\"w\":19,\"h\":29},{\"c\":218,\"x0\":458,\"y0\":8,\"yoffs\":-2,\"xpad\":2.04688,\"w\":19,\"h\":29},{\"c\":219,\"x0\":494,\"y0\":8,\"yoffs\":-2,\"xpad\":2.04688,\"w\":19,\"h\":29},{\"c\":220,\"x0\":534,\"y0\":56,\"yoffs\":-1,\"xpad\":2.04688,\"w\":19,\"h\":28},{\"c\":221,\"x0\":570,\"y0\":56,\"yoffs\":-2,\"w\":18,\"h\":28},{\"c\":222,\"x0\":206,\"y0\":307,\"yoffs\":5,\"xpad\":1.00781,\"w\":17,\"h\":21},{\"c\":223,\"x0\":240,\"y0\":307,\"yoffs\":5,\"xpad\":1.30469,\"w\":17,\"h\":21},{\"c\":224,\"x0\":973,\"y0\":102,\"yoffs\":3,\"xpad\":1.29688,\"w\":14,\"h\":24},{\"c\":225,\"x0\":8,\"y0\":147,\"yoffs\":3,\"xpad\":1.29688,\"w\":14,\"h\":24},{\"c\":226,\"x0\":39,\"y0\":147,\"yoffs\":3,\"xpad\":1.29688,\"w\":14,\"h\":24},{\"c\":227,\"x0\":327,\"y0\":188,\"yoffs\":4,\"xpad\":1.29688,\"w\":14,\"h\":23},{\"c\":228,\"x0\":358,\"y0\":188,\"yoffs\":4,\"xpad\":1.29688,\"w\":14,\"h\":23},{\"c\":229,\"x0\":881,\"y0\":102,\"yoffs\":2,\"xpad\":1.29688,\"w\":14,\"h\":25},{\"c\":230,\"x0\":720,\"y0\":307,\"yoffs\":10,\"xpad\":0.960938,\"w\":24,\"h\":17},{\"c\":231,\"x0\":389,\"y0\":188,\"yoffs\":10,\"xpad\":0.273438,\"w\":14,\"h\":23},{\"c\":232,\"x0\":70,\"y0\":147,\"yoffs\":3,\"xpad\":1.04688,\"w\":15,\"h\":24},{\"c\":233,\"x0\":102,\"y0\":147,\"yoffs\":3,\"xpad\":1.04688,\"w\":15,\"h\":24},{\"c\":234,\"x0\":134,\"y0\":147,\"yoffs\":3,\"xpad\":1.04688,\"w\":15,\"h\":24},{\"c\":235,\"x0\":420,\"y0\":188,\"yoffs\":4,\"xpad\":1.04688,\"w\":15,\"h\":23},{\"c\":236,\"x0\":452,\"y0\":188,\"yoffs\":3,\"xpad\":1.34375,\"w\":6,\"h\":23},{\"c\":237,\"x0\":475,\"y0\":188,\"yoffs\":3,\"w\":8,\"h\":23},{\"c\":238,\"x0\":500,\"y0\":188,\"yoffs\":3,\"w\":11,\"h\":23},{\"c\":239,\"x0\":918,\"y0\":228,\"yoffs\":4,\"w\":9,\"h\":22},{\"c\":240,\"x0\":528,\"y0\":188,\"yoffs\":4,\"xpad\":1.53125,\"w\":15,\"h\":23},{\"c\":241,\"x0\":944,\"y0\":228,\"yoffs\":4,\"xpad\":2.03906,\"w\":15,\"h\":22},{\"c\":242,\"x0\":166,\"y0\":147,\"yoffs\":3,\"xpad\":0.828125,\"w\":16,\"h\":24},{\"c\":243,\"x0\":199,\"y0\":147,\"yoffs\":3,\"xpad\":0.828125,\"w\":16,\"h\":24},{\"c\":244,\"x0\":232,\"y0\":147,\"yoffs\":3,\"xpad\":0.828125,\"w\":16,\"h\":24},{\"c\":245,\"x0\":560,\"y0\":188,\"yoffs\":4,\"xpad\":0.828125,\"w\":16,\"h\":23},{\"c\":246,\"x0\":593,\"y0\":188,\"yoffs\":4,\"xpad\":0.828125,\"w\":16,\"h\":23},{\"c\":247,\"x0\":302,\"y0\":345,\"yoffs\":11,\"xpad\":0.453125,\"w\":14,\"h\":14},{\"c\":248,\"x0\":761,\"y0\":307,\"yoffs\":10,\"xpad\":0.828125,\"w\":16,\"h\":17},{\"c\":249,\"x0\":265,\"y0\":147,\"yoffs\":3,\"xpad\":1.64844,\"w\":15,\"h\":24},{\"c\":250,\"x0\":297,\"y0\":147,\"yoffs\":3,\"xpad\":1.64844,\"w\":15,\"h\":24},{\"c\":251,\"x0\":329,\"y0\":147,\"yoffs\":3,\"xpad\":1.64844,\"w\":15,\"h\":24},{\"c\":252,\"x0\":626,\"y0\":188,\"yoffs\":4,\"xpad\":1.64844,\"w\":15,\"h\":23},{\"c\":253,\"x0\":40,\"y0\":8,\"yoffs\":3,\"w\":15,\"h\":30},{\"c\":254,\"x0\":530,\"y0\":8,\"yoffs\":4,\"xpad\":0.890625,\"w\":16,\"h\":29},{\"c\":255,\"x0\":563,\"y0\":8,\"yoffs\":4,\"w\":15,\"h\":29},{\"c\":256,\"x0\":684,\"y0\":102,\"w\":19,\"h\":26},{\"c\":257,\"x0\":658,\"y0\":188,\"yoffs\":4,\"xpad\":1.29688,\"w\":14,\"h\":23},{\"c\":258,\"x0\":349,\"y0\":102,\"yoffs\":-1,\"w\":19,\"h\":27},{\"c\":259,\"x0\":361,\"y0\":147,\"yoffs\":3,\"xpad\":1.29688,\"w\":14,\"h\":24},{\"c\":260,\"x0\":605,\"y0\":56,\"yoffs\":5,\"w\":21,\"h\":28},{\"c\":261,\"x0\":689,\"y0\":188,\"yoffs\":10,\"w\":16,\"h\":23},{\"c\":262,\"x0\":595,\"y0\":8,\"yoffs\":-2,\"xpad\":0.945313,\"w\":17,\"h\":29},{\"c\":263,\"x0\":392,\"y0\":147,\"yoffs\":3,\"xpad\":0.273438,\"w\":14,\"h\":24},{\"c\":268,\"x0\":629,\"y0\":8,\"yoffs\":-2,\"xpad\":0.945313,\"w\":17,\"h\":29},{\"c\":269,\"x0\":423,\"y0\":147,\"yoffs\":3,\"xpad\":0.273438,\"w\":14,\"h\":24},{\"c\":270,\"x0\":643,\"y0\":56,\"yoffs\":-2,\"xpad\":1.01563,\"w\":20,\"h\":28},{\"c\":271,\"x0\":722,\"y0\":188,\"yoffs\":4,\"w\":22,\"h\":23},{\"c\":272,\"x0\":274,\"y0\":307,\"yoffs\":5,\"xpad\":1.22656,\"w\":20,\"h\":21},{\"c\":273,\"x0\":761,\"y0\":188,\"yoffs\":4,\"xpad\":0.0703125,\"w\":17,\"h\":23},{\"c\":274,\"x0\":720,\"y0\":102,\"xpad\":0.617188,\"w\":16,\"h\":26},{\"c\":275,\"x0\":795,\"y0\":188,\"yoffs\":4,\"xpad\":1.04688,\"w\":15,\"h\":23},{\"c\":278,\"x0\":385,\"y0\":102,\"yoffs\":-1,\"xpad\":0.617188,\"w\":16,\"h\":27},{\"c\":279,\"x0\":827,\"y0\":188,\"yoffs\":4,\"xpad\":1.04688,\"w\":15,\"h\":23},{\"c\":280,\"x0\":680,\"y0\":56,\"yoffs\":5,\"xpad\":0.617188,\"w\":16,\"h\":28},{\"c\":281,\"x0\":859,\"y0\":188,\"yoffs\":10,\"xpad\":1.04688,\"w\":15,\"h\":23},{\"c\":282,\"x0\":713,\"y0\":56,\"yoffs\":-2,\"xpad\":0.617188,\"w\":16,\"h\":28},{\"c\":283,\"x0\":454,\"y0\":147,\"yoffs\":3,\"xpad\":1.04688,\"w\":15,\"h\":24},{\"c\":286,\"x0\":746,\"y0\":56,\"yoffs\":-1,\"xpad\":1.75,\"w\":18,\"h\":28},{\"c\":287,\"x0\":72,\"y0\":8,\"yoffs\":3,\"xpad\":2.07031,\"w\":15,\"h\":30},{\"c\":290,\"x0\":781,\"y0\":56,\"yoffs\":5,\"xpad\":1.75,\"w\":18,\"h\":28},{\"c\":291,\"x0\":8,\"y0\":8,\"yoffs\":2,\"xpad\":2.07031,\"w\":15,\"h\":31},{\"c\":298,\"x0\":753,\"y0\":102,\"w\":9,\"h\":26},{\"c\":299,\"x0\":976,\"y0\":228,\"yoffs\":4,\"w\":9,\"h\":22},{\"c\":302,\"x0\":816,\"y0\":56,\"yoffs\":5,\"xpad\":0.546875,\"w\":8,\"h\":28},{\"c\":303,\"x0\":841,\"y0\":56,\"yoffs\":5,\"w\":8,\"h\":28},{\"c\":304,\"x0\":418,\"y0\":102,\"yoffs\":-1,\"xpad\":1.54688,\"w\":7,\"h\":27},{\"c\":305,\"x0\":202,\"y0\":345,\"yoffs\":11,\"xpad\":1.34375,\"w\":6,\"h\":15},{\"c\":310,\"x0\":663,\"y0\":8,\"yoffs\":5,\"w\":19,\"h\":29},{\"c\":311,\"x0\":104,\"y0\":8,\"yoffs\":4,\"xpad\":0.171875,\"w\":15,\"h\":30},{\"c\":313,\"x0\":866,\"y0\":56,\"yoffs\":-2,\"w\":16,\"h\":28},{\"c\":314,\"x0\":779,\"y0\":102,\"w\":8,\"h\":26},{\"c\":315,\"x0\":699,\"y0\":8,\"yoffs\":5,\"w\":16,\"h\":29},{\"c\":316,\"x0\":136,\"y0\":8,\"yoffs\":4,\"xpad\":1.46875,\"w\":6,\"h\":30},{\"c\":317,\"x0\":8,\"y0\":268,\"yoffs\":4,\"w\":16,\"h\":22},{\"c\":318,\"x0\":41,\"y0\":268,\"yoffs\":4,\"w\":12,\"h\":22},{\"c\":321,\"x0\":311,\"y0\":307,\"yoffs\":5,\"xpad\":0.046875,\"w\":16,\"h\":21},{\"c\":322,\"x0\":70,\"y0\":268,\"yoffs\":4,\"w\":11,\"h\":22},{\"c\":323,\"x0\":899,\"y0\":56,\"yoffs\":-2,\"xpad\":2.74219,\"w\":19,\"h\":28},{\"c\":324,\"x0\":891,\"y0\":188,\"yoffs\":3,\"xpad\":2.03906,\"w\":15,\"h\":23},{\"c\":325,\"x0\":732,\"y0\":8,\"yoffs\":5,\"xpad\":2.74219,\"w\":19,\"h\":29},{\"c\":326,\"x0\":486,\"y0\":147,\"yoffs\":10,\"xpad\":2.03906,\"w\":15,\"h\":24},{\"c\":327,\"x0\":935,\"y0\":56,\"yoffs\":-2,\"xpad\":2.74219,\"w\":19,\"h\":28},{\"c\":328,\"x0\":923,\"y0\":188,\"yoffs\":3,\"xpad\":2.03906,\"w\":15,\"h\":23},{\"c\":332,\"x0\":442,\"y0\":102,\"xpad\":1.22656,\"w\":21,\"h\":27},{\"c\":333,\"x0\":955,\"y0\":188,\"yoffs\":4,\"xpad\":0.828125,\"w\":16,\"h\":23},{\"c\":336,\"x0\":768,\"y0\":8,\"yoffs\":-2,\"xpad\":1.22656,\"w\":21,\"h\":29},{\"c\":337,\"x0\":518,\"y0\":147,\"yoffs\":3,\"xpad\":0.828125,\"w\":16,\"h\":24},{\"c\":338,\"x0\":98,\"y0\":268,\"yoffs\":5,\"xpad\":0.390625,\"w\":29,\"h\":22},{\"c\":339,\"x0\":794,\"y0\":307,\"yoffs\":10,\"xpad\":0.65625,\"w\":25,\"h\":17},{\"c\":340,\"x0\":971,\"y0\":56,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":341,\"x0\":988,\"y0\":188,\"yoffs\":3,\"xpad\":0.203125,\"w\":10,\"h\":23},{\"c\":342,\"x0\":806,\"y0\":8,\"yoffs\":5,\"w\":19,\"h\":29},{\"c\":343,\"x0\":8,\"y0\":228,\"yoffs\":11,\"xpad\":0.203125,\"w\":10,\"h\":23},{\"c\":344,\"x0\":8,\"y0\":102,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":345,\"x0\":35,\"y0\":228,\"yoffs\":3,\"xpad\":0.203125,\"w\":10,\"h\":23},{\"c\":346,\"x0\":842,\"y0\":8,\"yoffs\":-2,\"xpad\":1.32031,\"w\":15,\"h\":29},{\"c\":347,\"x0\":551,\"y0\":147,\"yoffs\":3,\"xpad\":0.28125,\"w\":13,\"h\":24},{\"c\":350,\"x0\":874,\"y0\":8,\"yoffs\":4,\"xpad\":1.32031,\"w\":15,\"h\":29},{\"c\":351,\"x0\":62,\"y0\":228,\"yoffs\":10,\"xpad\":0.28125,\"w\":13,\"h\":23},{\"c\":352,\"x0\":906,\"y0\":8,\"yoffs\":-2,\"xpad\":1.32031,\"w\":15,\"h\":29},{\"c\":353,\"x0\":581,\"y0\":147,\"yoffs\":3,\"xpad\":0.28125,\"w\":13,\"h\":24},{\"c\":354,\"x0\":44,\"y0\":102,\"yoffs\":5,\"w\":17,\"h\":28},{\"c\":355,\"x0\":804,\"y0\":102,\"yoffs\":7,\"xpad\":0.234375,\"w\":10,\"h\":26},{\"c\":356,\"x0\":78,\"y0\":102,\"yoffs\":-2,\"w\":17,\"h\":28},{\"c\":357,\"x0\":92,\"y0\":228,\"yoffs\":4,\"w\":15,\"h\":23},{\"c\":362,\"x0\":480,\"y0\":102,\"xpad\":2.04688,\"w\":19,\"h\":27},{\"c\":363,\"x0\":124,\"y0\":228,\"yoffs\":4,\"xpad\":1.64844,\"w\":15,\"h\":23},{\"c\":366,\"x0\":938,\"y0\":8,\"yoffs\":-2,\"xpad\":2.04688,\"w\":19,\"h\":29},{\"c\":367,\"x0\":912,\"y0\":102,\"yoffs\":2,\"xpad\":1.64844,\"w\":15,\"h\":25},{\"c\":368,\"x0\":974,\"y0\":8,\"yoffs\":-2,\"xpad\":2.04688,\"w\":19,\"h\":29},{\"c\":369,\"x0\":611,\"y0\":147,\"yoffs\":3,\"xpad\":1.64844,\"w\":15,\"h\":24},{\"c\":370,\"x0\":112,\"y0\":102,\"yoffs\":5,\"xpad\":2.04688,\"w\":19,\"h\":28},{\"c\":371,\"x0\":144,\"y0\":268,\"yoffs\":11,\"w\":17,\"h\":22},{\"c\":376,\"x0\":516,\"y0\":102,\"yoffs\":-1,\"w\":18,\"h\":27},{\"c\":377,\"x0\":148,\"y0\":102,\"yoffs\":-2,\"xpad\":0.226563,\"w\":17,\"h\":28},{\"c\":378,\"x0\":156,\"y0\":228,\"yoffs\":3,\"xpad\":0.851563,\"w\":13,\"h\":23},{\"c\":379,\"x0\":551,\"y0\":102,\"yoffs\":-1,\"xpad\":0.226563,\"w\":17,\"h\":27},{\"c\":380,\"x0\":178,\"y0\":268,\"yoffs\":4,\"xpad\":0.851563,\"w\":13,\"h\":22},{\"c\":381,\"x0\":182,\"y0\":102,\"yoffs\":-2,\"xpad\":0.226563,\"w\":17,\"h\":28},{\"c\":382,\"x0\":186,\"y0\":228,\"yoffs\":3,\"xpad\":0.851563,\"w\":13,\"h\":23},{\"c\":402,\"x0\":944,\"y0\":102,\"yoffs\":4,\"w\":12,\"h\":25},{\"c\":536,\"x0\":159,\"y0\":8,\"yoffs\":4,\"xpad\":1.32031,\"w\":15,\"h\":30},{\"c\":537,\"x0\":643,\"y0\":147,\"yoffs\":10,\"xpad\":0.28125,\"w\":13,\"h\":24},{\"c\":538,\"x0\":8,\"y0\":56,\"yoffs\":5,\"w\":17,\"h\":29},{\"c\":539,\"x0\":585,\"y0\":102,\"yoffs\":7,\"xpad\":0.234375,\"w\":10,\"h\":27},{\"c\":8226,\"x0\":844,\"y0\":345,\"yoffs\":13,\"xpad\":0.28125,\"w\":7,\"h\":6},{\"c\":8482,\"x0\":430,\"y0\":345,\"yoffs\":5,\"xpad\":0.882813,\"w\":22,\"h\":12},{\"c\":8734,\"x0\":333,\"y0\":345,\"yoffs\":11,\"xpad\":0.6875,\"w\":25,\"h\":14},{\"c\":65533,\"x0\":344,\"y0\":307,\"yoffs\":5,\"w\":20,\"h\":21}]}\n","/*eslint global-require:off*/\n/*global Z: false */\n\nconst glov_engine = require('./glov/engine.js');\nconst glov_font = require('./glov/font.js');\nconst glov_input = require('./glov/input.js');\nconst glov_local_storage = require('./glov/local_storage.js');\nconst glov_particles = require('./glov/particles.js');\nconst glov_sprites = require('./glov/sprites.js');\nconst glov_sprite_animation = require('./glov/sprite_animation.js');\nconst glov_transition = require('./glov/transition.js');\nconst glov_ui = require('./glov/ui.js');\nconst glov_ui_test = require('./glov/ui_test.js');\nconst particle_data = require('./particle_data.js');\n\nconst { vec2, vec4, v4clone, v4copy } = require('./glov/vmath.js');\n\nglov_local_storage.storage_prefix = 'glovjs-playground';\nwindow.Z = window.Z || {};\nZ.BACKGROUND = 0;\nZ.SPRITES = 10;\nZ.PARTICLES = 20;\nZ.UI_TEST = 200;\n\n// let app = exports;\n// Virtual viewport for our game logic\nexport const game_width = 320;\nexport const game_height = 240;\n\nexport let sprites = {};\n\n// Persistent flags system for testing parameters\nlet flags = {};\nfunction flagGet(key, dflt) {\n  if (flags[key] === undefined) {\n    flags[key] = glov_local_storage.getJSON(`flag_${key}`, dflt) || false;\n  }\n  return flags[key];\n}\nfunction flagToggle(key) {\n  flags[key] = !flagGet(key);\n  glov_local_storage.setJSON(`flag_${key}`, flags[key]);\n}\nfunction flagSet(key, value) {\n  flags[key] = value;\n  glov_local_storage.setJSON(`flag_${key}`, flags[key]);\n}\n\nconst color_white = vec4(1, 1, 1, 1);\n\nfunction perfTestSprites() {\n  if (!sprites.test) {\n    sprites.test = [glov_sprites.create({ name: 'test', size: vec2(1, 1), origin: vec2(0.5, 0.5) }), glov_sprites.create({ url: 'img/test.png?1', size: vec2(1, 1), origin: vec2(0.5, 0.5) })];\n  }\n\n  let mode = 2;\n  let count = [80000, // one sprite, pre-sorted\n  40000, // one sprite, unsorted\n  20000, // two sprites, unsorted, small batches\n  60000, // two sprites, sorted, bigger batches, sprite API\n  60000][mode];\n  if (mode === 3 || mode === 4) {\n    for (let ii = 0; ii < count;) {\n      let subc = Math.floor(500 + Math.random() * 100);\n      let idx = mode <= 1 ? 0 : Math.round(Math.random());\n      let sprite = sprites.test[idx];\n      let z = Math.random();\n      for (let jj = 0; jj < subc; ++jj) {\n        if (mode === 4) {\n          // glov_sprites.queueraw(sprite.texs,\n          //   Math.random() * game_width - 3, Math.random() * game_height - 3, z,\n          //   6, 6, 0, 0, 1, 1, color_white);\n          glov_sprites.queuesprite(sprite, Math.random() * game_width, Math.random() * game_height, z, 6 * sprite.size[0], 6 * sprite.size[1], 0, sprite.uvs, color_white);\n        } else {\n          sprites.test[idx].draw({\n            x: Math.random() * game_width,\n            y: Math.random() * game_height,\n            z,\n            w: 6, h: 6\n          });\n        }\n      }\n      ii += subc;\n    }\n  } else {\n    for (let ii = 0; ii < count; ++ii) {\n      let idx = mode <= 1 ? 0 : Math.round(Math.random());\n      sprites.test[idx].draw({\n        x: Math.random() * game_width,\n        y: Math.random() * game_height,\n        z: mode === 0 ? ii : Math.random(),\n        w: 6, h: 6\n      });\n    }\n  }\n}\n\nexport function main() {\n  if (!glov_engine.startup({\n    game_width,\n    game_height,\n    pixely: flagGet('pixely', 'on'),\n    viewport_postprocess: false\n  })) {\n    return;\n  }\n\n  const sound_manager = glov_engine.sound_manager;\n  // const font = glov_engine.font;\n\n  // Perfect sizes for pixely modes\n  glov_ui.scaleSizes(13 / 32);\n  glov_ui.setFontHeight(8);\n\n  const createSprite = glov_sprites.create;\n  const createAnimation = glov_sprite_animation.create;\n\n  const color_red = vec4(1, 0, 0, 1);\n  const color_yellow = vec4(1, 1, 0, 1);\n\n  // Cache KEYS\n  const KEYS = glov_input.KEYS;\n  const pad_codes = glov_input.pad_codes;\n\n  const sprite_size = 64;\n  function initGraphics() {\n    glov_particles.preloadParticleData(particle_data);\n\n    sound_manager.loadSound('test');\n\n    sprites.white = createSprite({ url: 'white' });\n\n    sprites.test_tint = createSprite({\n      name: 'tinted',\n      ws: [16, 16, 16, 16],\n      hs: [16, 16, 16],\n      size: vec2(sprite_size, sprite_size),\n      layers: 2,\n      origin: vec2(0.5, 0.5)\n    });\n    sprites.animation = createAnimation({\n      idle_left: {\n        frames: [0, 1],\n        times: [200, 500]\n      },\n      idle_right: {\n        frames: [3, 2],\n        times: [200, 500]\n      }\n    });\n    sprites.animation.setState('idle_left');\n\n    sprites.game_bg = createSprite({\n      url: 'white',\n      size: vec2(game_width, game_height)\n    });\n  }\n\n  let last_particles = 0;\n\n  function test(dt) {\n    if (!test.color_sprite) {\n      test.color_sprite = v4clone(color_white);\n      test.character = {\n        x: Math.random() * (game_width - sprite_size - 200) + sprite_size * 0.5 + 200,\n        y: Math.random() * (game_height - sprite_size) + sprite_size * 0.5\n      };\n    }\n\n    if (flagGet('ui_test')) {\n      // let clip_test = 30;\n      // glov_sprites.clip(Z.UI_TEST - 10, Z.UI_TEST + 10, clip_test, clip_test, 320-clip_test * 2, 240-clip_test * 2);\n      glov_ui_test.run(10, 10, Z.UI_TEST);\n    }\n    if (flagGet('font_test')) {\n      glov_ui_test.runFontTest(105, 85);\n    }\n\n    test.character.dx = 0;\n    test.character.dy = 0;\n    if (glov_input.keyDown(KEYS.LEFT) || glov_input.keyDown(KEYS.A) || glov_input.padButtonDown(pad_codes.LEFT)) {\n      test.character.dx = -1;\n      sprites.animation.setState('idle_left');\n    } else if (glov_input.keyDown(KEYS.RIGHT) || glov_input.keyDown(KEYS.D) || glov_input.padButtonDown(pad_codes.RIGHT)) {\n      test.character.dx = 1;\n      sprites.animation.setState('idle_right');\n    }\n    if (glov_input.keyDown(KEYS.UP) || glov_input.keyDown(KEYS.W) || glov_input.padButtonDown(pad_codes.UP)) {\n      test.character.dy = -1;\n    } else if (glov_input.keyDown(KEYS.DOWN) || glov_input.keyDown(KEYS.S) || glov_input.padButtonDown(pad_codes.DOWN)) {\n      test.character.dy = 1;\n    }\n\n    test.character.x += test.character.dx * dt * 0.05;\n    test.character.y += test.character.dy * dt * 0.05;\n    let bounds = {\n      x: test.character.x - sprite_size / 2,\n      y: test.character.y - sprite_size / 2,\n      w: sprite_size,\n      h: sprite_size\n    };\n    if (glov_input.mouseDown() && glov_input.mouseOver(bounds)) {\n      v4copy(test.color_sprite, color_yellow);\n    } else if (glov_input.click(bounds)) {\n      v4copy(test.color_sprite, test.color_sprite[2] === 0 ? color_white : color_red);\n      sound_manager.play('test');\n    } else if (glov_input.mouseOver(bounds)) {\n      v4copy(test.color_sprite, color_white);\n      test.color_sprite[3] = 0.5;\n    } else {\n      v4copy(test.color_sprite, color_white);\n      test.color_sprite[3] = 1;\n    }\n\n    sprites.game_bg.draw({\n      x: 0, y: 0, z: Z.BACKGROUND,\n      color: [0, 0.72, 1, 1]\n    });\n    sprites.test_tint.drawDualTint({\n      x: test.character.x,\n      y: test.character.y,\n      z: Z.SPRITES,\n      color: [1, 1, 0, 1],\n      color1: [1, 0, 1, 1],\n      frame: sprites.animation.getFrame(dt)\n    });\n\n    let font_test_idx = 0;\n\n    glov_ui.print(glov_font.styleColored(null, 0x000000ff), test.character.x, test.character.y + ++font_test_idx * 20, Z.SPRITES, 'TEXT!');\n    let font_style = glov_font.style(null, {\n      outline_width: 1.0,\n      outline_color: 0x800000ff,\n      glow_xoffs: 3.25,\n      glow_yoffs: 3.25,\n      glow_inner: -2.5,\n      glow_outer: 5,\n      glow_color: 0x000000ff\n    });\n    glov_ui.print(font_style, test.character.x, test.character.y + ++font_test_idx * glov_ui.font_height, Z.SPRITES, 'Outline and Drop Shadow');\n\n    let x = glov_ui.button_height;\n    let button_spacing = glov_ui.button_height + 2;\n    let y = game_height - 10 - button_spacing * 5;\n    if (glov_ui.buttonText({ x, y, text: `Pixely: ${flagGet('pixely') || 'Off'}`,\n      tooltip: 'Toggles pixely or regular mode (requires reload)' })) {\n      if (flagGet('pixely') === 'strict') {\n        flagSet('pixely', false);\n      } else if (flagGet('pixely') === 'on') {\n        flagSet('pixely', 'strict');\n      } else {\n        flagSet('pixely', 'on');\n      }\n      document.location = String(document.location);\n    }\n    y += button_spacing;\n\n    if (glov_ui.buttonText({ x, y, text: `Music: ${flagGet('music') ? 'ON' : 'OFF'}`,\n      tooltip: 'Toggles playing a looping background music track' })) {\n      flagToggle('music');\n      if (flagGet('music')) {\n        sound_manager.playMusic('music_test.mp3', 1, sound_manager.FADE_IN);\n      } else {\n        sound_manager.playMusic('music_test.mp3', 0, sound_manager.FADE_OUT);\n      }\n    }\n    y += button_spacing;\n\n    if (glov_ui.buttonText({ x, y, text: `Font Test: ${flagGet('font_test') ? 'ON' : 'OFF'}`,\n      tooltip: 'Toggles visibility of general Font tests' })) {\n      flagToggle('font_test');\n      glov_transition.queue(Z.TRANSITION_FINAL, glov_transition.randomTransition());\n    }\n    y += button_spacing;\n\n    if (glov_ui.buttonText({ x, y, text: `UI Test: ${flagGet('ui_test') ? 'ON' : 'OFF'}`,\n      tooltip: 'Toggles visibility of general UI tests' })) {\n      flagToggle('ui_test');\n    }\n    y += button_spacing;\n\n    if (glov_ui.buttonText({ x, y, text: `Particles: ${flagGet('particles', true) ? 'ON' : 'OFF'}`,\n      tooltip: 'Toggles particles' })) {\n      flagToggle('particles');\n    }\n    if (flagGet('particles')) {\n      if (glov_engine.getFrameTimestamp() - last_particles > 1000) {\n        last_particles = glov_engine.getFrameTimestamp();\n        glov_engine.glov_particles.createSystem(particle_data.defs.explosion,\n        //[test.character.x, test.character.y, Z.PARTICLES]\n        [100 + Math.random() * 120, 100 + Math.random() * 140, Z.PARTICLES]);\n      }\n    }\n\n    if (flagGet('perf_test')) {\n      perfTestSprites();\n    }\n\n    // Debugging touch state on mobile\n    // const glov_camera2d = require('./glov/camera2d.js');\n    // glov_engine.font.drawSizedWrapped(glov_engine.fps_style, glov_camera2d.x0(), glov_camera2d.y0(), Z.FPSMETER,\n    //   glov_camera2d.w(), 0, 22, JSON.stringify({\n    //     last_touch_state: glov_input.last_touch_state,\n    //     touch_state: glov_input.touch_state,\n    //   }, undefined, 2));\n  }\n\n  function testInit(dt) {\n    glov_engine.setState(test);\n    if (flagGet('music')) {\n      sound_manager.playMusic('music_test.mp3');\n    }\n    test(dt);\n  }\n\n  initGraphics();\n  glov_engine.setState(testInit);\n}","export let defs = {};\n\ndefs.explosion = {\n  particles: {\n    part0: {\n      blend: 'alpha',\n      texture: 'particles/circle64',\n      color: [1, 1, 1, 1], // multiplied by animation track, default 1,1,1,1, can be omitted\n      color_track: [\n      // just values, NOT random range\n      { t: 0.0, v: [1, 1, 1, 0] }, { t: 0.2, v: [1, 1, 1, 1] }, { t: 0.4, v: [1, 1, 0.5, 0.5] }, { t: 1.0, v: [1, 0, 0, 0] }],\n      size: [[48, 8], [48, 8]], // multiplied by animation track\n      size_track: [\n      // just values, NOT random range\n      { t: 0.0, v: [1, 1] }, { t: 0.2, v: [2, 2] }, { t: 0.4, v: [1, 1] }, { t: 1.0, v: [1.5, 1.5] }],\n      accel: [0, 0, 0],\n      rot: [0, 360], // degrees\n      rot_vel: [10, 2], // degrees per second\n      lifespan: [2500, 0], // milliseconds\n      kill_time_accel: 5\n    }\n  },\n  emitters: {\n    part0: {\n      particle: 'part0',\n      // Random ranges affect each emitted particle:\n      pos: [[-16, 32], [-16, 32], 0],\n      vel: [0, 0, 0],\n      emit_rate: [15, 0], // emissions per second\n      // Random ranges only calculated upon instantiation:\n      emit_time: [0, 1000],\n      emit_initial: 10,\n      max_parts: Infinity\n    }\n  },\n  system_lifespan: 2500\n};","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nfunction ok(exp, msg) {\n  if (exp) {\n    return;\n  }\n  throw new Error(`Assertion failed${msg ? `: ${msg}` : ''}`);\n}\nmodule.exports = ok;\nmodule.exports.ok = ok;\n\nfunction equal(a, b) {\n  if (a === b) {\n    return;\n  }\n  throw new Error(`Assertion failed: \"${a}\"===\"${b}\"`);\n}\nmodule.exports.equal = equal;\n","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n(function () {\n  let debug = document.getElementById('debug');\n  window.onerror = function (e, file, line, col, errorobj) {\n    let msg = errorobj && errorobj.stack || `${e}\\n  at ${file}(${line}:${col})`;\n    debug.innerText = msg;\n    if (window.glov_error_report) {\n      window.glov_error_report(msg, file, line, col);\n    }\n  };\n  window.debugmsg = function (msg, clear) {\n    if (clear) {\n      debug.innerText = msg;\n    } else {\n      debug.innerText += `${msg}\\n`;\n    }\n  };\n})();\n\n// Embedded code and startup code.\nwindow.onload = function () {\n  // eslint-disable-next-line global-require\n  require('./main.js').main();\n};","const { abs, floor, min, max, round, pow, sqrt } = Math;\n\nexport function nop() {\n  // empty\n}\n\nexport function easeInOut(v, a) {\n  let va = pow(v, a);\n  return va / (va + pow(1 - v, a));\n}\n\nexport function easeIn(v, a) {\n  return 2 * easeInOut(0.5 * v, a);\n}\n\nexport function easeOut(v, a) {\n  return 2 * easeInOut(0.5 + 0.5 * v, a) - 1;\n}\n\nexport function clone(obj) {\n  return JSON.parse(JSON.stringify(obj));\n}\n\nexport function merge(dest, src) {\n  for (let f in src) {\n    dest[f] = src[f];\n  }\n  return dest;\n}\n\nexport function defaults(dest, src) {\n  for (let f in src) {\n    if (!Object.prototype.hasOwnProperty.call(dest, f)) {\n      dest[f] = src[f];\n    }\n  }\n  return dest;\n}\n\nexport function cloneShallow(src) {\n  return merge({}, src);\n}\n\nexport function clamp(v, mn, mx) {\n  return min(max(mn, v), mx);\n}\n\nexport function lerp(a, v0, v1) {\n  return (1 - a) * v0 + a * v1;\n}\n\nexport function mix(v0, v1, a) {\n  // GLSL semantics\n  return (1 - a) * v0 + a * v1;\n}\n\nexport function sign(a) {\n  return a < 0 ? -1 : a > 0 ? 1 : 0;\n}\n\nexport function ridx(arr, idx) {\n  arr[idx] = arr[arr.length - 1];\n  arr.pop();\n}\n\nexport function round100(a) {\n  return round(a * 100) / 100;\n}\n\nexport function round1000(a) {\n  return round(a * 1000) / 1000;\n}\n\nexport function fract(a) {\n  return a - floor(a);\n}\n\nexport function nearSame(a, b, tol) {\n  return abs(b - a) <= tol;\n}\n\nexport function titleCase(str) {\n  return str.split(' ').map(word => `${word[0].toUpperCase()}${word.slice(1)}`).join(' ');\n}\n\nconst EPSILON = 0.00001;\n\n// http://local.wasp.uwa.edu.au/~pbourke/geometry/sphereline/\nexport function lineCircleIntersect(p1, p2, pCircle, radius) {\n  let dp = [p2[0] - p1[0], p2[1] - p1[1]];\n  let a = dp[0] * dp[0] + dp[1] * dp[1];\n  let b = 2 * (dp[0] * (p1[0] - pCircle[0]) + dp[1] * (p1[1] - pCircle[1]));\n  let c = pCircle[0] * pCircle[0] + pCircle[1] * pCircle[1];\n  c += p1[0] * p1[0] + p1[1] * p1[1];\n  c -= 2 * (pCircle[0] * p1[0] + pCircle[1] * p1[1]);\n  c -= radius * radius;\n  let bb4ac = b * b - 4 * a * c;\n  if (abs(a) < EPSILON || bb4ac < 0) {\n    return false;\n  }\n\n  let mu1 = (-b + sqrt(bb4ac)) / (2 * a);\n  let mu2 = (-b - sqrt(bb4ac)) / (2 * a);\n  if (mu1 >= 0 && mu1 <= 1 || mu2 >= 0 && mu2 <= 1) {\n    return true;\n  }\n\n  return false;\n}"]}