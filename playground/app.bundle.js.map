{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/gl-mat3/create.js","node_modules/gl-mat3/fromMat4.js","node_modules/gl-mat4/copy.js","node_modules/gl-mat4/create.js","node_modules/gl-mat4/invert.js","node_modules/gl-mat4/multiply.js","node_modules/gl-mat4/perspective.js","node_modules/gl-mat4/transpose.js","src/client/app.js","src/client/glov/bootstrap.js","src/client/glov/camera2d.js","src/client/glov/cmds.js","src/client/glov/edit_box.js","src/client/glov/effects.js","src/client/glov/engine.js","src/client/glov/font.js","src/client/glov/geom.js","src/client/glov/glb/decode-utf8.js","src/client/glov/glb/gltf-type-utils.js","src/client/glov/glb/parser.js","src/client/glov/glb/unpack-binary-json.js","src/client/glov/glb/unpack-glb-buffers.js","src/client/glov/in_event.js","src/client/glov/input.js","src/client/glov/link.js","src/client/glov/local_storage.js","src/client/glov/mat43.js","src/client/glov/models.js","src/client/glov/particles.js","src/client/glov/perf.js","src/client/glov/pointer_lock.js","src/client/glov/polyfill.js","src/client/glov/selection_box.js","src/client/glov/settings.js","src/client/glov/shaders.js","src/client/glov/simple_menu.js","src/client/glov/sound.js","src/client/glov/sprite_animation.js","src/client/glov/sprites.js","src/client/glov/textures.js","src/client/glov/transition.js","src/client/glov/ui.js","src/client/glov/ui_test.js","src/client/glov/urlhash.js","src/client/glov/vmath.js","src/client/img/font/04b03_8x1.json","src/client/img/font/04b03_8x2.json","src/client/img/font/palanquin32.json","src/client/main.js","src/client/particle_data.js","src/client/shims/assert.js","src/client/shims/not_worker.js","src/common/cmd_parse.js","src/common/util.js","../howler.js/src/node_modules/@jimbly/howler/src/howler.core.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","create","out","Float32Array","fromMat4","copy","invert","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","multiply","b","b0","b1","b2","b3","perspective","fovy","aspect","near","far","Math","tan","nf","transpose","called_once","window","onload","main","debug","document","getElementById","onerror","file","line","col","errorobj","msg","stack","message","indexOf","origin","location","slice","split","join","replace","show","glov_error_report","innerText","debugmsg","clear","virtualToCanvas","set","setSafeAreaPadding","safeAreaPadding","push","pop","domToCanvasRatio","screenAspect","setAspectFixed","setAspectFixed2","zoom","setNormalized","x0Real","y0Real","x1Real","y1Real","wReal","hReal","x0","y0","x1","y1","w","h","xScale","yScale","htmlPos","htmlSize","domToVirtual","domDeltaToVirtual","virtualToDom","virtualToFontSize","virtualToDomPosParam","tickCamera2D","startup","engine","round","safearea_pad","data","screen_width","screen_height","render_width","render_height","render_viewport_w","render_viewport_h","render_offset_x","render_offset_y_top","render_offset_y_bottom","reapply","dst","src","ignore_safe_area","wscale","hscale","left","right","top","bottom","old","pa","pixel_aspect","inv_aspect","inv_desired_aspect","margin","_margin","_margin2","x","y","factor","inv_factor","height","devicePixelRatio","width","viewport","eff_screen_width","eff_screen_height","_margin3","setViewport","cmd_parse_mod","local_storage","cmd_parse","storage","textures","PI","cmd","str","handle","defaultHandler","registerValue","type","TYPE_FLOAT","label","range","get","fov_min","v","setFOV","store","byteFormat","bytes","toFixed","register","help","func","resp_func","keys","Object","filter","gpu_mem","sort","map","perf_state","geom","tex","toUpperCase","defines","webgl2","cmdDesc","cmd_data","list","autoComplete","this","access","str_cname","canonical","str_lc","toLowerCase","cname","safearea","TYPE_STRING","usage","default_value","String","Number","ii","disable_data","getJSON","setJSON","undefined","camera2d","glov_input","glov_ui","focuslog","GlovUIEditBox","params","z","Z","UI","button_width","allow_modal","font_height","text","placeholder","max_len","initial_focus","onetime_focus","auto_unfocus","initial_select","spellcheck","applyParams","is_focused","elem","input","submitted","pointer_lock","last_frame","new_text","value","focus","focusSteal","pointerLockExit","focusNext","was_glov_focused","glov_focused","focusCheck","dom_focused","activeElement","blur","focused","key_opt","in_event_cb","pointerLockEnter","keyUpEdge","KEYS","ESC","setText","focusCanvas","canceled","_this","global_frame_index","updateFocus","this_frame_edit_boxes","getElem","textContent","form","createElement","setAttribute","random","addEventListener","ev","preventDefault","appendChild","span","select","pos","style","size","old_fontsize","fontSize","new_fontsize","click","peek","eatAllKeyboardInput","SUBMIT","CANCEL","prototype","registerShader","grayScaleMatrix","sepiaMatrix","negativeMatrix","saturationMatrix","hueMatrix","brightnessAddMatrix","brightnessScaleMatrix","additiveMatrix","contrastMatrix","applyCopy","applyPixelyExpand","applyGaussianBlur","applyColorMatrix","shaders","vec2","vec3","vec4","v4set","shader_data","vp_copy","vp","fp","pixely_expand","gaussian_blur","color_matrix","key","obj","getShader","shader","gl","FRAGMENT_SHADER","VERTEX_SHADER","inited","clip_space","copy_uv_scale","shader_params_default","shader_params_color_matrix","shader_params_gaussian_blur","shader_params_pixely_expand","quad_geom","semantic","POSITION","FLOAT","QUADS","colorMatrix","sampleRadius","Gauss","orig_pixel_size","saturationScale","is","angle","cos","s","sin","brightnessOffset","scale","additiveRGB","contrastScale","applyEffect","effect","view_w","view_h","target_w","target_h","bind","bindArray","texs","draw","source","setSamplerState","filter_min","LINEAR","filter_mag","wrap_s","CLAMP_TO_EDGE","wrap_t","resx","resy","hblur","captureFramebuffer","vblur","final_viewport","clear_color","clearColor","COLOR_BUFFER_BIT","max_size","min_size","inputTexture0","res","shader_copy","glow","matrix","mout","setGlobalMatrices","setGameDims","postprocessingAllow","updateMatrices","getFrameTimestamp","getFrameIndex","getFrameDt","getFrameDtActual","setState","stateActive","addTickFunc","postTick","getTemporaryTexture","setupProjection","start3DRendering","projectionZBias","setErrorReportDetails","loadsPending","DEBUG","assert","cmds","effects","glov_font","font_info_palanquin32","mat3FromMat4","mat4Copy","mat4Invert","mat4Mul","mat4Transpose","mat4Perspective","asin","floor","min","max","sqrt","models","perf","settings","soundLoading","soundStartup","soundTick","sprites","glov_transition","urlhash","clamp","defaults","nearSame","ridx","mat3","mat4","v3mulMat4","v3iNormalize","v4copy","v4same","canvas","glov_particles","antialias","game_width","game_height","TYPE_SET","change","definesChanged","initial_define_forcewebgl2","FORCEWEBGL2","initial_define_nowebgl2","NOWEBGL2","reload","any_3d","ZFAR","ZNEAR","fov_y","fov_x","mat_projection","mat_view","mat_m","mat_vp","mat_mv","mat_mv_no_skew","mat_mvp","mat_mv_inv_transform","projection_inverse","light_diffuse","light_dir_vs","light_ambient","light_dir_ws","font","app_state","border_color","_mat_view","new_fov","is_ios_safari","ua","navigator","userAgent","is_ios","match","webkit","postprocessing_reset_version","postprocessing","allow","normalizeRow","m","idx","len","mat_temp","mat_model","global_timer","this_frame_time","hrtime","this_frame_time_actual","after_loading_state","is_loading","new_state","test_state","mspf","mspf_update_time","mspf_frame_count","last_tick_cpu","mspf_tick","mspf_tick_accum","PERF_HISTORY_SIZE","glov_perf_state","fpsgraph","index","history","addMetric","name","show_stat","show_graph","labels","fps: ","fps","ms/f: ","msF","cpu: ","cpu","line_scale_top","colors","interactable","do_borders","do_viewport_postprocess","need_repos","app_tick_functions","cb","post_tick","ticks","fn","equal","_typeof","temporary_textures","resetEffects","temp","destroy","SAFARI_FULLSCREEN_ASPECT","screen","SAFARI_DIMS","896,414","812,375","736,414","716,414","667,375","647,375","548,320","availWidth","availHeight","safariTopSafeArea","last_canvas_width","last_canvas_height","last_body_height","safearea_elem","safearea_ignore_bottom","safearea_values","last_safearea_values","checkResize","vv","visualViewport","css_to_real","innerWidth","innerHeight","body","new_width","clientWidth","new_height","clientHeight","sa_width","offsetWidth","sa_height","offsetHeight","offsetLeft","offsetTop","pixel_scale","scroll","xywh","last_temp_idx","_tex","createForCapture","do_filter_linear","do_wrap","copyTexImage","NEAREST","REPEAT","requestFrame","max_fps","SLOWLOAD","setTimeout","tick","requestAnimationFrame","mat_projection_10","had_3d_this_frame","use_fov_y","use_width","use_height","znear","zfar","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","enable","BLEND","DEPTH_TEST","depthMask","DEPTH_BUFFER_BIT","CULL_FACE","dist","at_z","fixNatives","is_startup","console","old_val","Array","defineProperty","enumerable","_a","hrnow","performance","now","Date","last_tick","timestamp","dt","hidden","webkitHidden","rise","_rise","error","tickInput","tickUI","ul","lr","viewport2","view_height","font_size","elem_fullscreen","drawRect","BORDERS","show_metrics","render","disable","endFrame","_ii","error_report_details","error_report_details_str","escape","k","last_error_time","crash_idx","filtered_errors","glovErrorReport","url","getURLBase","lastIndexOf","href","xhr","XMLHttpRequest","open","send","error_report","is_pixely","pixely","powerPreference","high","context_names","force_webgl1","ts","log","rc","splice","context_opts","good","jj","getContext","alert","visibility","viewport_postprocess","depthFunc","LEQUAL","cullFace","BACK","pixelStorei","UNPACK_ALIGNMENT","ambient","mvp","mv_inv_trans","view","projection","defaultFilters","LINEAR_MIPMAP_LINEAR","font_info_04b03x2","font_info_04b03x1","info","texture","sound","bindSounds","ui_sounds","button_click","rollover","state","show_fps","load_count","loading","elem_loading_text","loading_elem","glov_engine","intColorFromVec4Color","vec4ColorFromIntColor","styleColored","styleAlpha","v4clone","v4scale","COLOR_MODE","SINGLE","GRADIENT","ALIGN","HLEFT","HCENTER","HRIGHT","HMASK","VTOP","VCENTER","VBOTTOM","VMASK","HFIT","HWRAP","HCENTERFIT","HVCENTER","HVCENTERFIT","GlovFontStyle","color_vec4","outline_width","outline_color","glow_xoffs","glow_yoffs","glow_inner","glow_outer","glow_color","color","colorUR","colorLR","colorLL","color_mode","font_shaders","glov_font_default_style","font_style","fields","ret","_f","colorAlpha","alpha","tech_params","tech_params_dirty","temp_color","createTechniqueParameters","param0","outlineColor","glowColor","glowParams","tex0","techParamsSet","param","tpv","techParamsGet","GlovFont","font_info","texture_name","load","noFilter","font_aa","tex_w","imageW","tex_h","imageH","char_infos","char_info","sc","_char_info","xpad","yoffs","replacement_character","infoFromChar","default_style","applied_style","drawSizedColor","drawSized","drawScaled","drawSizedAligned","_x","_y","align","x_size","y_size","getStringWidth","drawSizedColorWrapped","indent","drawScaledWrapped","drawSizedWrapped","wrapLines","word_cb","wrapLinesScaled","numLines","applyStyle","numlines","wordCallback","ignored","linenum","word","getCharacterWidth","xsc","x_advance","calcXAdvance","charCodeAt","word_start","word_x0","space_info","space_size","hard_wrap","newx","char_w","tabsize","word_width","ysc","last_width","num_lines","xoffs","y2","x2","word_w","font_texel_scale","isFinite","y_offset","avg_scale_font","camera_xscale","camera_yscale","avg_scale_combined","tile_state","delta_per_source_pixel","spread","delta_per_dest_pixel","padding1","padding4","outer_scaled","value2","padding_in_font_space","z_advance","rel_x_scale","rel_y_scale","char_scale","xsc2","ysc2","pad_scale","tile_width","tile_height","u0","u1","v0","v1","queueraw","determineShader","outline","font_aa_outline_glow","font_aa_outline","font_aa_glow","fontShadersInit","_len","arguments","args","_key","Function","apply","concat","createIndices","createQuads","ceil","TRIANGLES","TRIANGLE_FAN","gl_byte_size","5120","5121","5122","5123","5126","bound_geom","bound_array_buf","bound_index_buf","quad_index_buf","quad_index_buf_len","deleteBuffer","bindBuffer","ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER","attrib_enabled","enableVertexAttribArray","bits","disable_mask","enable_mask","disableVertexAttribArray","_n","getQuadIndexBuf","quad_count","createBuffer","arr","Uint16Array","vidx","bufferData","STATIC_DRAW","idxs","ibo","ibo_size","formatInfo","format","stride","elem_count","used_attribs","common_byte_size","fmt","sem","gltype","count","byte_size","Geom","verts","mode","format_info","vert_count","vert_gpu_mem","vbo","orig_mode","ibo_owned","updateSub","offset","bufferSubData","update","num_verts","DYNAMIC_DRAW","subarray","dispose","bound_attribs","normalized","vertexAttribPointer","drawElements","UNSIGNED_SHORT","drawArrays","GeomMultiQuads","ec","geoms","num_sub_verts","sub_data","Uint8Array","buffer","decode","charCache","charFromCodePt","fromCodePoint","fromCharCode","result","array","codePt","byte1","buffLen","getAccessorTypeFromSize","TYPES","ATTRIBUTE_TYPE_TO_COMPONENTS","SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4","ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE","5125","ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY","Int8Array","Int16Array","Uint32Array","unpackGLBBuffers","unpackBinaryJson","padTo4Bytes","byteLength","decode_utf8","MAGIC_glTF","GLB_FILE_HEADER_SIZE","GLB_CHUNK_HEADER_SIZE","GLB_CHUNK_TYPE_JSON","GLB_CHUNK_TYPE_BIN","LE","BE","GLBParser","binaryByteOffset","packedJson","json","parseBinary","self","dataView","DataView","glbArrayBuffer","magic1","getUint32","version","fileLength","valid","warn","jsonChunkLength","jsonChunkFormat","jsonChunkOffset","jsonChunk","jsonText","JSON","parse","binaryChunkStart","binChunkFormat","arrayBuffer","parseInternal","unpackedBuffers","parseSync","getApplicationData","getArrayBuffer","getBinaryByteOffset","getBufferView","glTFBufferView","byteOffset","getBuffer","glTFAccessor","ArrayType","componentType","components","bytesPerComponent","bufferViews","bufferView","getImageData","glTFImage","typedArray","mimeType","getImage","arrayBufferView","blob","Blob","urlCreator","URL","webkitURL","imageUrl","createObjectURL","img","Image","parser","parseJSONPointer","matches","parseInt","_index","decodeJSONPointer","object","buffers","pointer","field","unpackJsonArraysRecursive","topJson","options","isArray","element","newObject","getArrayBufferAtOffset","binaryBuffer","ArrayBuffer","sourceArray","binaryArray","getArrayTypeAndLength","accessor","unpackAccessors","accessors","accessorBuffers","_getArrayTypeAndLengt","unpackImages","images","imageBuffers","image","imate","topOfFrame","on","cbs","code_or_pos","event","keyCode","pageX","pageY","button","pointerLocked","eatAllInput","mousePos","mouseMoved","mouseWheel","mouseOver","mouseDown","mousePosIsTouch","isTouchDown","numTouches","keyDown","keyDownEdge","padGetAxes","padButtonDown","padButtonDownEdge","padButtonUpEdge","mouseUpEdge","mouseDownEdge","mouseConsumeClicks","drag","longPress","dragDrop","dragOver","in_event","abs","soundResume","v2add","v2copy","v2lengthSq","v2set","v2scale","v2sub","UP_EDGE","UP","DOWN","DOWN_EDGE","TOUCH_AS_MOUSE","map_analog_to_dpad","mouse_log","ANY","POINTERLOCK","BACKSPACE","TAB","ENTER","RETURN","SHIFT","CTRL","ALT","SPACE","PAGEUP","PAGEDOWN","END","HOME","LEFT","RIGHT","INS","DEL","NUMPAD_DIVIDE","EQUALS","MINUS","SLASH","TILDE","Proxy","target","prop","PAD","A","SELECT","B","X","Y","LB","LEFT_BUMPER","RB","RIGHT_BUMPER","LT","LEFT_TRIGGER","RT","RIGHT_TRIGGER","START","LEFT_STICK","RIGHT_STICK","ANALOG_UP","ANALOG_LEFT","ANALOG_DOWN","ANALOG_RIGHT","pad_to_touch","key_state_new","pad_states","gamepad_data","mouse_pos","last_mouse_pos","mouse_pos_is_touch","mouse_over_captured","mouse_down","mouse_wheel","movement_questionable_frames","MOVEMENT_QUESTIONABLE_FRAMES","input_eaten_kb","input_eaten_mouse","touches","touch_mode","pad_mode","TYPE_INT","eventTimestamp","timeStamp","TouchData","touch","delta","total","cur_pos","start_pos","start_time","dispatched","dispatched_drag_over","up_edge","down_edge","down_time","origin_time","down","is_edge","KeyData","keyUp","setMouseToMid","isLocked","pointerlock_touch_id","when","enter","onPointerLockEnter","touch_data","exit","last_event","skip","isTrusted","sourceCapabilities","path","currentTarget","eventlog","pairs","id","letEventThrough","tagName","className","stopPropagation","unload_protected","stopCtrlW","returnValue","protectUnload","removeEventListener","onKeyUp","ctrlKey","ks","onKeyDown","no_stop","F5","F12","I","altKey","metaKey","shiftKey","mouse_moved","temp_delta","last_abs_move","last_abs_move_time","onMouseMove","any_movement","movementX","movementY","abs_move","onMouseDown","no_click","touch_id","onMouseUp","onWheel","deltaY","wheelDelta","detail","touch_pos","released_touch_id","onTouchChange","cancelable","ct","seen","new_count","old_count","last_touch","identifier","released_touch","released_ids","_touch","release","_ii2","_id","_touch2","new_id","_touch3","onBlurOrFocus","evt","ANALOG_MAP","genAnalogMap","_canvas","passive_param","opts","passive","WheelEvent","DEADZONE","DEADZONE_SQ","NUM_STICKS","PAD_THRESHOLD","getGamepadData","gpd","sticks","updatePadState","ps","padcode","_touch_id","gamepadUpdate","gamepads","webkitGamepads","getGamepads","webkitGetGamepads","numGamePads","gamepad","buttons","numButtons","axes","pair","magnitude","endFrameTickMap","forEach","keycode","skip_mouse","mousePosParam","check_pos","checkPos","Infinity","pos_param","drag_target","stickindex","padindex","sub","padButtonDownInternal","padButtonDownEdgeInternal","padButtonUpEdgeInternal","padButtonShared","max_click_dist","max_dist","phys","in_event_button","min_dist","is_down_edge","eat_clicks","payload","drag_payload","min_time","long_press_dispatched","time","long_press","link","linkText","linkTick","ui","state_cache","good_url","internal","protocol","clicked","frame","a_elem","onclick","style_link","style_link_hover","mouseover","underline_w","drawLine","clearAll","exportAll","importAll","storage_prefix","lsd","localStorage","test","stringify","def","key_prefix","prefix","RegExp","serialized","mat43","m43identity","m43mul","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","b4","b5","b6","b7","b8","glb_parser","renderer","box_glb","default_vshader","default_fshader","initShaders","Model","base_url","responseType","array_buffer","response","status","skip_attr","TANGENT","glb_data","glb","glb_json","objs","meshes","mesh","primitives","material","materials","bct","pbrMetallicRoughness","baseColorTexture","texture_def","sampler_def","samplers","sampler","uri","magFilter","minFilter","wrapS","wrapT","bidx","total_size","attr","attributes","_accessor","geom_format","geom_count","my_vert_count","vert","_attr","kk","indices","mat","drawGeom","_ii3","model","box","model_box","preloadParticleData","v2lerp","v2mul","v3add","v4lerp","v4mul","blend_map","BLEND_ALPHA","additive","BLEND_ADDITIVE","particle_data","defs","part_name","particles","part_def","normalizeValue","normalizeValueVec","vec","normalizeParticle","particle_manager","norm","blend","color_track","size_track","accel","rot","rot_vel","lifespan","kill_time_accel","_e","_arr","findParticle","normalizeEmitter","part_map","part_idx","particle","vel","emit_rate","emit_time","emit_initial","normalizeDef","system_lifespan","emitters","instValue","instValueVec","temp_color2","temp_size","temp_size2","ParticleSystem","parent","def_in","age","kill_hard","kill_soft","part_sets","part_set","parts","_def","emitter","countdown","started","stopped","part","age_norm","dts","weight","_weight","queueraw4","dt_orig","tickParticle","init_dt","emitter_def","num","emitParticle","remaining_dt","emit_dt","tickPartSet","_ii4","tickEmitter","ParticleManager","systems","system","_key2","v3copy","metrics","METRIC_PAD","bg_default","bg_mouse_over","bg_fade","fps_graph","fps_style","metric","history_size","num_labels","showMetric","pad","METRIC_VALUE_WIDTH","line_height","max_label_w","max_labels","drew_any","label_w","FPSMETER","bg","showMetricGraph","small","LINE_WIDTH","LINE_PAD","LINE_HEIGHT","NUM_LINES","history_index","line_scale","line_index","bar_max","line_jj","bar_min","bars_stack","lesser","line_kk","y_graph","user_want_locked","on_ptr_lock","pointerLog","exitPointerLock","requestPointerLock","onPointerLockChange","pointerLockElement","mozPointerLockElement","webkitPointerLockElement","onPointerLockError","_elem","_on_ptr_lock","mozRequestPointerLock","webkitRequestPointerLock","mozExitPointerLock","webkitExitPointerLock","begin","end","Int32Array","delim","fill","cmpDefault","cmp","glov_markup","cloneShallow","merge","selbox_font_style_default","selbox_font_style_selected","selbox_font_style_down","selbox_font_style_disabled","default_display","style_default","style_selected","style_disabled","style_down","no_background","no_buttons","centered","bounce","tab_stop","use_markup","color_gray50","color_gray80","color_grayD0","color_white","SELBOX_BOUNCE_TIME","GlovMenuItem","value_min","value_max","value_inc","tag","Boolean","prompt_int","prompt_string","no_sound","slider","no_controller_exit","plus_minus","disabled","GlovSelectionBox","items","is_dropdown","transient_focus","display","scroll_height","entry_height","button_height","auto_reset","initial_selection","dropdown_visible","selected","was_clicked","was_right_clicked","dummy_focus_check","selbox_dummy","mouse_mode","last_mousex","last_mousey","bounce_time","expected_frame_index","pre_dropdown_selection","item","tag_or_index","list_height","do_scroll","yret","pos_changed","was_focused","gained_focus_forward","old_sel","gained_focus","num_non_disabled_selections","eff_sel","bg_height","getHeight","page_size","pad_shift","S","W","sel_changed","focusPrev","_item","color0","setMouseOver","drawHBox","menu_header","font_style_focused","font_style_normal","uidata","wh","y_save","x_save","scroll_pos","eff_width","min_scroll_pos","old_scroll_pos","sa","max_scroll_pos","overscroll","_item2","entry_disabled","image_set","is_mouseover","mpos","show_selection","menu_selected","menu_down","ms","menu_entry","bounce_amt","did_tab","text_y","tab_idx","pre","post","w1","w2","md","print","_md","xx","zz","playUISound","titleCase","true","ver","addInclude","addGlobal","matchAll","last_id","bound_prog","ATTR0","ATTR1","COLOR","COLOR_0","ATTR2","TEXCOORD","TEXCOORD_0","ATTR3","NORMAL","ATTR4","TEXCOORD_1","globals","error_fp","error_vp","vp_attr_regex","uniform_regex","sampler_regex","include_regex","type_size","float","includes","report_queued","shader_errors","reportShaderError","err","doReport","parseIncludes","supplied_uniforms","filename","replacement","str2","webgl2_header","webgl2_header_fp","webgl2_header_vp","Shader","header","createShader","programs","found","isNaN","uniforms","type_name","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","error_text","getShaderInfoLog","trim","uniformSetValue","unif","uniform1fv","uniform2fv","uniform3fv","uniform4fv","uniformMatrix3fv","uniformMatrix4fv","prog","createProgram","attachShader","bindAttribLocation","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","useProgram","getUniformLocation","glob","_name","uniform1i","diff","_jj","reserved","WEBGL2","_globals","selection_box","color101010C8","GlovSimpleMenu","sel_box","edit_index","menu_item","force","exit_index","selbox_enabled","no_notches","slider_width","slider_x","run","grabbed","buttons_width","button_x","buttonText","no_focus","minus_over","button_mouseover","plus_over","execItem","allow_left_right","D","wasRightClicked","isSelected","soundLoad","soundResumed","soundPlay","soundPlayMusic","FADE_DEFAULT","FADE_OUT","FADE_IN","FADE","Howl","Howler","DEFAULT_FADE_RATE","sounds","num_loading","default_params","ext_list","fade_rate","sound_params","last_played","fades","music","volume","current_volume","target_volume","sys_volume","need_play","base","preferred_ext","srcs","ext","tryLoad","once","html5","streaming","loop","onloaderror","extra","noAudio","safeToPlay","max_fade","mus","fade_amt","stop","play","fade","soundname","as_music","last_played_time","playing","fadeOut","transition","start_vol","_sys_volume","GlovSpriteAnimation","anim","anim_idx","frames","times","total_time","clone","init_time","progress","getFrame","queuefn","queuesprite","clip","buildRects","nextHighestPowerOfTwo","sprite_vshader","sprite_fshader","sprite_dual_fshader","sprite_shader_params","last_uid","sprite_queue","sprite_freelist","SpriteData","shader_params","uid","spriteDataAlloc","cmpSprite","x3","y3","sprite","uvs","nozoom","dx","dy","cosr","sinr","ch","cw","sh","sw","ubias","vbias","zoom_level","mipped_texels","z_start","z_end","xy","gd_h","scissor","SCISSOR_TEST","diffTextures","texsa","texsb","batch_state","sprite_geom","sprite_buffer","sprite_buffer_len","sprite_buffer_batch_start","sprite_buffer_idx","last_blend_mode","last_bound_shader","MAX_VERT_COUNT","batches","commit","start","commitAndFlush","batch","ONE","bufferSpriteData","c1","c2","c3","c4","u2","v2","new_length","ws","hs","rects","total_w","total_h","hw","non_square","asp","widths","heights","Sprite","layers","onLoad","src_width","src_height","drawDualTint","color1","isArrayBound","findTexForReplacement","aniso","max_aniso","aniso_enum","default_filter_min","default_filter_mag","R8","RGB8","RGBA8","mag","isPowerOfTwo","bound_unit","bound_tex","handle_loading","handle_error","setUnit","unit","activeTexture","TEXTURE0","bindHandle","bindTexture","unbindHandle","eff_handle","Texture","loaded","load_fail","TEXTURE_2D","is_array","TEXTURE_2D_ARRAY","createTexture","on_load","updateData","loadURL","updateGPUMem","new_size","mipmaps","texParameteri","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","TEXTURE_WRAP_T","texParameterf","getError","np2","texImage2D","internal_type","gl_type","num_images","texImage3D","texSubImage2D","_num_images","ctx","drawImage","gl_err","generateMipmap","TEX_RETRY_COUNT","next","did_next","done","fail","crossOrigin","retries","handleLoad","err_details","_err","copyTexImage2D","RGB","deleteTexture","last_temporary_id","unique_name","search_key","compare_key","LUMINANCE","UNSIGNED_BYTE","RGBA","ext_anisotropic","getExtension","TEXTURE_MAX_ANISOTROPY_EXT","getParameter","MAX_TEXTURE_MAX_ANISOTROPY_EXT","queue","active","splitScreen","pixelate","randomTransition","easeOut","unit_vec","pow","transitions","IMMEDIATE","REMOVE","CONTINUE","transition_pixelate","GlovTransition","capture","accum_time","transitionCapture","trans","immediate","TRANSITION_FINAL","_trans","destroyTexture","trans_idx","TRANSITION_RANGE","force_end","glovTransitionFadeFunc","fade_time","initial","ms_since_start","glovTransitionSplitScreenFunc","border_width","slide_window","v_half","border_grow_progress","render_scale","transition_pixelate_texture","transitionPixelateCapture","glovTransitionPixelateFunc","gd_width","partial_progress","param1","texSizeX","texSizeY","fade_time_scale","makeColorSet","loadUISprite","drawVBox","drawBox","isFocusedPeek","isFocused","panel","drawTooltip","buttonShared","buttonTextDraw","buttonImage","modalDialog","modalDialogClear","modalTextEntry","createEditBox","menuUp","provideUserString","drawCircle","drawHollowCircle","drawCone","scaleSizes","setModalSizes","setFontHeight","setTooltipWidth","MODAL","TOOLTIP","glov_edit_box","glov_sprites","lerp","MODAL_DARKEN","menu_fade_params_default","saturation","brightness","fallback_darken","regular","doBlurEffect","desaturate_xform","desaturate_tmp","doDesaturateEffect","modal_button_width","button_img_size","modal_width","modal_y0","modal_title_scale","modal_pad","panel_pixel_scale","tooltip_panel_pixel_scale","tooltip_width","tooltip_pad","color_button","color_panel","modal_font_style","button_focused","touch_changed_focus","last_frame_button_mouseover","frame_button_mouseover","modal_dialog","modal_stealing_focus","menu_up","menu_fade_params","menu_up_time","last_frame_edit_boxes","dom_elems","dom_elems_issued","button_keys","focused_last_frame","focused_this_frame","focused_key_not","focused_key","focused_key_prev1","focused_key_prev2","pad_focus_left","pad_focus_right","overrides","only_override","override","ui_sprites","pad_focus_dpad","button_regular","white","ok","O","cancel","yes","no","N","dynamic_text_elem","last_elem","_sounds","coords","my_w","my_h","quiet","tooltip","tooltip_w","tooltip_y0","eff_tooltip_pad","tooltip_above","draw_only","rollover_quiet","key_opts","no_touch_mouseover","touch_twice","drag_over","z_bias","button_last_color","base_name","sprite_name","hpad","_buttonShared","shrink","img_rect","_buttonShared2","no_bg","img_origin","img_w","img_h","largest_w_horiz","largest_w_vert","pad_top","draw_param","left_align","rotation","flip","title","dom_requirement","virtual_size","modalDialogRun","fullscreen_mode","eff_font_height","eff_button_height","vpad","general_scale","old_h","_modal_dialog","click_anywhere","eff_modal_width","eff_button_width","max_total_button_width","text_w","tick_key","avail_width","eff_button_keys","pressed","eb","edit_text","val","old_fn","getText","old_tick","eb_ret","edit_w","color_slider_handle","color_slider_handle_grab","color_slider_handle_over","slider_dragging","draggable_width","handle_center_pos","handle_h","handle_w","slider_handle","handle_x","handle_y","handle_color","pp_bad_frames","pp_this_frame","NOPP","edit_box","unrun","removeChild","copyTextToClipboard","textArea","position","border","boxShadow","background","execCommand","thing","copy_success","OK","mx","my","Mx","My","spreadTechParams","drawCircleInternal","tu1","tv1","tu2","tv2","circle","CIRCLE_SIZE","midp","j","d","filter_max","hollow_circle","LINE_W","LINE_SIZE","tangx","tangy","w0","cone","CONE_SIZE","_dx","_dy","dCircle","_modal_button_width","title_scale","_font_height","_tooltip_width","_tooltip_panel_pixel_scale","runFontTest","glov_simple_menu","glov_selection_box","demo_menu","demo_menu_up","demo_result","edit_box1","edit_box2","test_select1","test_select2","slider_value","init","column_width","getSelectedItem","Cancel","COLOR_RED","COLOR_GREEN","COLOR_WHITE","COLOR_INVISIBLE","font_style_outline","font_style_glow","font_style_shadow","font_style_both","font_size2","font_style_both2","font_style_outline2","font_style_glow2","onChange","route","refreshTitle","go","HISTORY_UPDATE_TIME","title_suffix","url_base","on_change","cmpNumKeys","route_param_regex","routes","route_string","regex","new_route","queryString","regex_value","getValue","query_string","_m","_r","m2","last_history_str","goInternal","hides","otherkey","dirty","_opts","new_value","_v","_opts2","eff_title","toString","values","root_value","outer","_key3","_opts3","hide_values","_key4","_opts4","periodicRefreshTitle","onPopState","last_history_set_time","scheduled","need_push_state","updateHistory","new_need_push_state","new_str","delay","pushState","replaceState","regex_search","regex_type","onpopstate","vec1","v2abs","v2addScale","v2distSq","v2div","v2floor","v2normalize","v2same","v3iAdd","v3addScale","v3cross","v3determinant","v3dot","v3distSq","v3div","v3iFloor","v3floor","v3lengthSq","v3lerp","v3iMax","v3iMin","v3mul","v3normalize","v3perspectiveProject","v3round","v3same","v3scale","v3set","v3sub","v3iSub","v3zero","v4add","v4mulAdd","v4zero","half_vec","zero_vec","identity_mat3","identity_mat4","xaxis","yaxis","zaxis","it","invw","channels","glov_local_storage","glov_sprite_animation","glov_ui_test","BACKGROUND","SPRITES","PARTICLES","UI_TEST","music_file","flags","flagGet","dflt","flagToggle","flagSet","perfTestSprites","subc","_idx","createSprite","createAnimation","color_red","color_yellow","sprite_size","initGraphics","test_tint","animation","idle_left","idle_right","game_bg","last_particles","color_sprite","character","bounds","font_test_idx","button_spacing","createSystem","explosion","testInit","part0","max_parts","exp","isInteger","TYPE_NAME","resp","checkAccess","CmdParse","cmds_for_complete","was_not_found","default_handler","cmdList","access_show","cmd_list","access_run","setDefaultHandler","store_key","init_value","store_value","cmpCmd","addServerCommands","new_cmds","_cname","first_tok","nop","empty","easeInOut","easeIn","has","mix","sign","log2","round100","round1000","fract","lineCircleIntersect","inherits","logdata","toNumber","randomNot","toArray","va","dest","hasOwnProperty","mn","tol","EPSILON","p1","p2","pCircle","radius","dp","bb4ac","mu1","mu2","ctor","superCtor","constructor","writable","configurable","not_value","max_value","array_like","re","exec","HowlerGlobal","_counter","_html5AudioPool","html5PoolSize","_codecs","_howls","_muted","_volume","_canPlayEvent","_navigator","masterGain","usingWebAudio","autoSuspend","autoUnlock","_setup","vol","parseFloat","setupAudioContext","gain","setValueAtTime","currentTime","_webAudio","ids","_getSoundIds","_soundById","_node","mute","muted","unload","close","codecs","_autoSuspend","Audio","oncanplaythrough","_setupCodecs","audioTest","canPlayType","mpegTest","checkOpera","isOldOpera","mp3","mpeg","opus","ogg","oga","wav","aac","caf","m4a","mp4","weba","webm","dolby","flac","_unlockAudio","_audioUnlocked","_mobileUnloaded","sampleRate","_scratchBuffer","unlock","audioNode","_unlocked","_releaseHtml5Audio","_autoResume","onUnlockFinish","_emit","createBufferSource","connect","destination","noteOn","resume","onended","disconnect","_obtainHtml5Audio","audio","suspend","_paused","_suspendTimer","clearTimeout","then","_resumeAfterSuspend","_autoplay","autoplay","_format","_html5","_loop","_pool","pool","_preload","preload","_rate","rate","_sprite","_src","_xhrWithCredentials","xhrWithCredentials","_xhrHeaders","xhrHeaders","_duration","_state","_endTimers","_queue","_playLock","_onend","onend","_onfade","onfade","_onload","_onloaderror","_onplayerror","onplayerror","_onpause","onpause","_onplay","onplay","_onstop","onstop","_onmute","onmute","_onvolume","onvolume","_onrate","onrate","_onseek","onseek","_onunlock","onunlock","_onresume","action","Sound","loadBuffer","_ended","_inactiveSound","soundId","_loadQueue","seek","_seek","duration","timeout","setParams","_start","_stop","sound_volume","node","playWebAudio","_refreshBuffer","_playStart","bufferSource","noteGrainOn","_clearTimer","playHtml5","playbackRate","Promise","catch","paused","loadedNoReadyState","ejecta","readyState","isCocoonJS","listener","pause","_rateSeek","_stopFade","noteOff","_cleanBuffer","_clearSound","_interval","from","to","linearRampToValueAtTime","_startFadeInterval","isGroup","steps","stepLen","lastTick","_fadeTo","setInterval","clearInterval","cancelScheduledValues","loopStart","loopEnd","seekAndEmit","emitSeek","realTime","rateSeek","_errorFn","_loadFn","remCache","cache","events","off","isId","task","shift","ended","_drain","reset","limit","cnt","_panner","isIOS","vendor","checkIE","howl","_parent","createGain","createGainNode","_errorListener","_loadListener","__default","loadSound","atob","decodeAudioData","withCredentials","setRequestHeader","safeXhrSend","arraybuffer","success","AudioContext","webkitAudioContext","iOS","platform","appVersion","safari","define","amd","global"],"mappings":"CAAA,WAAA,SAAAA,EAAAC,EAAAC,EAAAC,GAAA,SAAAC,EAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,IAAAE,EAAA,mBAAAC,SAAAA,QAAA,IAAAF,GAAAC,EAAA,OAAAA,EAAAF,GAAA,GAAA,GAAAI,EAAA,OAAAA,EAAAJ,GAAA,GAAA,IAAAK,EAAA,IAAAC,MAAA,uBAAAN,EAAA,KAAA,MAAAK,EAAAE,KAAA,mBAAAF,EAAA,IAAAG,EAAAX,EAAAG,GAAA,CAAAS,QAAA,IAAAb,EAAAI,GAAA,GAAAU,KAAAF,EAAAC,QAAA,SAAAd,GAAA,IAAAE,EAAAD,EAAAI,GAAA,GAAAL,GAAA,OAAAI,EAAAF,GAAAF,IAAAa,EAAAA,EAAAC,QAAAd,EAAAC,EAAAC,EAAAC,GAAA,OAAAD,EAAAG,GAAAS,QAAA,IAAA,IAAAL,EAAA,mBAAAD,SAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAa,OAAAX,IAAAD,EAAAD,EAAAE,IAAA,OAAAD,EAAA,OAAAJ,GAAA,EAAA,CAAA,CAAAiB,EAAA,CAAA,SAAAT,QAAAU,OAAAJ,sBCAAI,OAAOJ,QAAUK,OAQjB,SAASA,SACP,IAAIC,IAAM,IAAIC,aAAa,GAC3BD,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAK,EACT,OAAOA,2DCnBTF,OAAOJ,QAAUQ,SAUjB,SAASA,SAASF,IAAKV,GACrBU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,IACX,OAAOU,2DCpBTF,OAAOJ,QAAUS,KASjB,SAASA,KAAKH,IAAKV,GACfU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,GACXU,IAAI,IAAMV,EAAE,IACZU,IAAI,IAAMV,EAAE,IACZU,IAAI,IAAMV,EAAE,IACZU,IAAI,IAAMV,EAAE,IACZU,IAAI,IAAMV,EAAE,IACZU,IAAI,IAAMV,EAAE,IACZ,OAAOU,2DC1BXF,OAAOJ,QAAUK,OAOjB,SAASA,SACL,IAAIC,IAAM,IAAIC,aAAa,IAC3BD,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,IAAM,EACVA,IAAI,IAAM,EACVA,IAAI,IAAM,EACVA,IAAI,IAAM,EACVA,IAAI,IAAM,EACVA,IAAI,IAAM,EACV,OAAOA,2DCzBXF,OAAOJ,QAAUU,OASjB,SAASA,OAAOJ,IAAKV,GACjB,IAAIe,IAAMf,EAAE,GAAIgB,IAAMhB,EAAE,GAAIiB,IAAMjB,EAAE,GAAIkB,IAAMlB,EAAE,GAC5CmB,IAAMnB,EAAE,GAAIoB,IAAMpB,EAAE,GAAIqB,IAAMrB,EAAE,GAAIsB,IAAMtB,EAAE,GAC5CuB,IAAMvB,EAAE,GAAIwB,IAAMxB,EAAE,GAAIyB,IAAMzB,EAAE,IAAK0B,IAAM1B,EAAE,IAC7C2B,IAAM3B,EAAE,IAAK4B,IAAM5B,EAAE,IAAK6B,IAAM7B,EAAE,IAAK8B,IAAM9B,EAAE,IAE/C+B,IAAMhB,IAAMK,IAAMJ,IAAMG,IACxBa,IAAMjB,IAAMM,IAAMJ,IAAME,IACxBc,IAAMlB,IAAMO,IAAMJ,IAAMC,IACxBe,IAAMlB,IAAMK,IAAMJ,IAAMG,IACxBe,IAAMnB,IAAMM,IAAMJ,IAAME,IACxBgB,IAAMnB,IAAMK,IAAMJ,IAAMG,IACxBgB,IAAMd,IAAMK,IAAMJ,IAAMG,IACxBW,IAAMf,IAAMM,IAAMJ,IAAME,IACxBY,IAAMhB,IAAMO,IAAMJ,IAAMC,IACxBa,IAAMhB,IAAMK,IAAMJ,IAAMG,IACxBa,IAAMjB,IAAMM,IAAMJ,IAAME,IACxBc,IAAMjB,IAAMK,IAAMJ,IAAMG,IAGxBc,IAAMZ,IAAMW,IAAMV,IAAMS,IAAMR,IAAMO,IAAMN,IAAMK,IAAMJ,IAAMG,IAAMF,IAAMC,IAE5E,IAAKM,IAAK,CACN,OAAO,KAEXA,IAAM,EAAMA,IAEZjC,IAAI,IAAMU,IAAMsB,IAAMrB,IAAMoB,IAAMnB,IAAMkB,KAAOG,IAC/CjC,IAAI,IAAMO,IAAMwB,IAAMzB,IAAM0B,IAAMxB,IAAMsB,KAAOG,IAC/CjC,IAAI,IAAMkB,IAAMQ,IAAMP,IAAMM,IAAML,IAAMI,KAAOS,IAC/CjC,IAAI,IAAMe,IAAMU,IAAMX,IAAMY,IAAMV,IAAMQ,KAAOS,IAC/CjC,IAAI,IAAMW,IAAMkB,IAAMpB,IAAMuB,IAAMpB,IAAMgB,KAAOK,IAC/CjC,IAAI,IAAMK,IAAM2B,IAAMzB,IAAMsB,IAAMrB,IAAMoB,KAAOK,IAC/CjC,IAAI,IAAMmB,IAAMI,IAAMN,IAAMS,IAAMN,IAAME,KAAOW,IAC/CjC,IAAI,IAAMa,IAAMa,IAAMX,IAAMQ,IAAMP,IAAMM,KAAOW,IAC/CjC,IAAI,IAAMS,IAAMsB,IAAMrB,IAAMmB,IAAMjB,IAAMe,KAAOM,IAC/CjC,IAAI,IAAMM,IAAMuB,IAAMxB,IAAM0B,IAAMvB,IAAMmB,KAAOM,IAC/CjC,IAAI,KAAOiB,IAAMQ,IAAMP,IAAMK,IAAMH,IAAMC,KAAOY,IAChDjC,IAAI,KAAOc,IAAMS,IAAMV,IAAMY,IAAMT,IAAMK,KAAOY,IAChDjC,IAAI,KAAOU,IAAMkB,IAAMnB,IAAMqB,IAAMnB,IAAMgB,KAAOM,IAChDjC,IAAI,KAAOK,IAAMyB,IAAMxB,IAAMsB,IAAMrB,IAAMoB,KAAOM,IAChDjC,IAAI,KAAOkB,IAAMI,IAAML,IAAMO,IAAML,IAAME,KAAOY,IAChDjC,IAAI,KAAOa,IAAMW,IAAMV,IAAMQ,IAAMP,IAAMM,KAAOY,IAEhD,OAAOjC,2DCrDXF,OAAOJ,QAAUwC,SAUjB,SAASA,SAASlC,IAAKV,EAAG6C,GACtB,IAAI9B,IAAMf,EAAE,GAAIgB,IAAMhB,EAAE,GAAIiB,IAAMjB,EAAE,GAAIkB,IAAMlB,EAAE,GAC5CmB,IAAMnB,EAAE,GAAIoB,IAAMpB,EAAE,GAAIqB,IAAMrB,EAAE,GAAIsB,IAAMtB,EAAE,GAC5CuB,IAAMvB,EAAE,GAAIwB,IAAMxB,EAAE,GAAIyB,IAAMzB,EAAE,IAAK0B,IAAM1B,EAAE,IAC7C2B,IAAM3B,EAAE,IAAK4B,IAAM5B,EAAE,IAAK6B,IAAM7B,EAAE,IAAK8B,IAAM9B,EAAE,IAGnD,IAAI8C,GAAMD,EAAE,GAAIE,GAAKF,EAAE,GAAIG,GAAKH,EAAE,GAAII,GAAKJ,EAAE,GAC7CnC,IAAI,GAAKoC,GAAG/B,IAAMgC,GAAG5B,IAAM6B,GAAGzB,IAAM0B,GAAGtB,IACvCjB,IAAI,GAAKoC,GAAG9B,IAAM+B,GAAG3B,IAAM4B,GAAGxB,IAAMyB,GAAGrB,IACvClB,IAAI,GAAKoC,GAAG7B,IAAM8B,GAAG1B,IAAM2B,GAAGvB,IAAMwB,GAAGpB,IACvCnB,IAAI,GAAKoC,GAAG5B,IAAM6B,GAAGzB,IAAM0B,GAAGtB,IAAMuB,GAAGnB,IAEvCgB,GAAKD,EAAE,GAAIE,GAAKF,EAAE,GAAIG,GAAKH,EAAE,GAAII,GAAKJ,EAAE,GACxCnC,IAAI,GAAKoC,GAAG/B,IAAMgC,GAAG5B,IAAM6B,GAAGzB,IAAM0B,GAAGtB,IACvCjB,IAAI,GAAKoC,GAAG9B,IAAM+B,GAAG3B,IAAM4B,GAAGxB,IAAMyB,GAAGrB,IACvClB,IAAI,GAAKoC,GAAG7B,IAAM8B,GAAG1B,IAAM2B,GAAGvB,IAAMwB,GAAGpB,IACvCnB,IAAI,GAAKoC,GAAG5B,IAAM6B,GAAGzB,IAAM0B,GAAGtB,IAAMuB,GAAGnB,IAEvCgB,GAAKD,EAAE,GAAIE,GAAKF,EAAE,GAAIG,GAAKH,EAAE,IAAKI,GAAKJ,EAAE,IACzCnC,IAAI,GAAKoC,GAAG/B,IAAMgC,GAAG5B,IAAM6B,GAAGzB,IAAM0B,GAAGtB,IACvCjB,IAAI,GAAKoC,GAAG9B,IAAM+B,GAAG3B,IAAM4B,GAAGxB,IAAMyB,GAAGrB,IACvClB,IAAI,IAAMoC,GAAG7B,IAAM8B,GAAG1B,IAAM2B,GAAGvB,IAAMwB,GAAGpB,IACxCnB,IAAI,IAAMoC,GAAG5B,IAAM6B,GAAGzB,IAAM0B,GAAGtB,IAAMuB,GAAGnB,IAExCgB,GAAKD,EAAE,IAAKE,GAAKF,EAAE,IAAKG,GAAKH,EAAE,IAAKI,GAAKJ,EAAE,IAC3CnC,IAAI,IAAMoC,GAAG/B,IAAMgC,GAAG5B,IAAM6B,GAAGzB,IAAM0B,GAAGtB,IACxCjB,IAAI,IAAMoC,GAAG9B,IAAM+B,GAAG3B,IAAM4B,GAAGxB,IAAMyB,GAAGrB,IACxClB,IAAI,IAAMoC,GAAG7B,IAAM8B,GAAG1B,IAAM2B,GAAGvB,IAAMwB,GAAGpB,IACxCnB,IAAI,IAAMoC,GAAG5B,IAAM6B,GAAGzB,IAAM0B,GAAGtB,IAAMuB,GAAGnB,IACxC,OAAOpB,2DCxCXF,OAAOJ,QAAU8C,YAYjB,SAASA,YAAYxC,IAAKyC,KAAMC,OAAQC,KAAMC,KAC1C,IAAI1D,EAAI,EAAM2D,KAAKC,IAAIL,KAAO,GAC1BM,GAAK,GAAKJ,KAAOC,KACrB5C,IAAI,GAAKd,EAAIwD,OACb1C,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAKd,EACTc,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,KAAO4C,IAAMD,MAAQI,GACzB/C,IAAI,KAAO,EACXA,IAAI,IAAM,EACVA,IAAI,IAAM,EACVA,IAAI,IAAO,EAAI4C,IAAMD,KAAQI,GAC7B/C,IAAI,IAAM,EACV,OAAOA,2DC/BXF,OAAOJ,QAAUsD,UASjB,SAASA,UAAUhD,IAAKV,GAEpB,GAAIU,MAAQV,EAAG,CACX,IAAIgB,IAAMhB,EAAE,GAAIiB,IAAMjB,EAAE,GAAIkB,IAAMlB,EAAE,GAChCqB,IAAMrB,EAAE,GAAIsB,IAAMtB,EAAE,GACpB0B,IAAM1B,EAAE,IAEZU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,IACXU,IAAI,GAAKM,IACTN,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,IACXU,IAAI,GAAKO,IACTP,IAAI,GAAKW,IACTX,IAAI,IAAMV,EAAE,IACZU,IAAI,IAAMQ,IACVR,IAAI,IAAMY,IACVZ,IAAI,IAAMgB,QACP,CACHhB,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,IACXU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,IACXU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,GACXU,IAAI,IAAMV,EAAE,IACZU,IAAI,IAAMV,EAAE,IACZU,IAAI,IAAMV,EAAE,GACZU,IAAI,IAAMV,EAAE,GACZU,IAAI,IAAMV,EAAE,IACZU,IAAI,IAAMV,EAAE,IAGhB,OAAOU,2DC3CX,IAAIiD,YAAc,MAClBC,OAAOC,OAAS,WACd,GAAIF,YAAa,CACf,OAEFA,YAAc,KACd7D,QAAQ,uBACRA,QAAQ,aAAagE,sGCNvBhE,QAAQ,iBAER,IAAIiE,MAAQC,SAASC,eAAe,SACpCL,OAAOM,QAAU,SAAU3E,EAAG4E,KAAMC,KAAMC,IAAKC,UAC7C,IAAIC,IAAShF,EAAT,UAAoB4E,KAApB,IAA4BC,KAA5B,IAAoCC,IAApC,IACJ,GAAIC,UAAYA,SAASE,MAAO,CAC9BD,IAAA,GAASD,SAASE,MAClB,GAAIF,SAASG,QAAS,CACpB,GAAIF,IAAIG,QAAQJ,SAASG,YAAc,EAAG,CACxCF,IAASD,SAASG,QAAlB,KAA8BF,KAGlC,IAAII,OAASX,SAASY,SAASD,QAAU,GACzC,GAAIA,OAAQ,CACV,GAAIA,OAAOE,OAAO,KAAO,IAAK,CAC5BF,QAAU,IAEZJ,IAAMA,IAAIO,MAAMH,QAAQI,KAAK,IAG/BR,IAAMA,IAAIS,QAAQ,YAAa,IAC9BA,QAAQ,UAAW,KACnBA,QAAQ,YAAa,UAExB,IAAIC,KAAO,KACX,GAAIrB,OAAOsB,kBAAmB,CAC5BD,KAAOrB,OAAOsB,kBAAkBX,IAAKJ,KAAMC,KAAMC,KAEnD,GAAIY,KAAM,CACRlB,MAAMoB,UAAeZ,IAArB,8EAGJX,OAAOwB,SAAW,SAAUb,IAAKc,OAC/B,GAAIA,MAAO,CACTtB,MAAMoB,UAAYZ,QACb,CACLR,MAAMoB,WAAgBZ,IAAtB,wFCOYe,gBAAAA,wBAOAC,IAAAA,YAsBAC,mBAAAA,2BAQAC,gBAAAA,wBAKAC,KAAAA,aAGAC,IAAAA,YAKAC,iBAAAA,yBAIAC,aAAAA,qBAQAC,eAAAA,uBAwBAC,gBAAAA,wBAkBAC,KAAAA,aAKAC,cAAAA,sBAIAC,OAAAA,eAGAC,OAAAA,eAGAC,OAAAA,eAGAC,OAAAA,eAGAC,MAAAA,cAGAC,MAAAA,cAGAC,GAAAA,WAGAC,GAAAA,WAGAC,GAAAA,WAGAC,GAAAA,WAGAC,EAAAA,UAGAC,EAAAA,UAGAC,OAAAA,eAGAC,OAAAA,eAIAC,QAAAA,gBAOAC,SAAAA,iBAQAC,aAAAA,qBAUAC,kBAAAA,0BAWAC,aAAAA,qBAUAC,kBAAAA,0BASAC,qBAAAA,6BAcAC,aAAAA,qBA0DAC,QAAAA,QAvUhB,IAAMC,OAAS3H,QAAQ,mBAEf4H,MAAUnE,KAAVmE,MAER,IAAMC,aAAe,IAAIhH,aAAa,GAc/B,IAAMiH,KAAAxH,QAAAwH,KAAO,IAAIjH,aAAa,IAErC,IAAIkH,kBAAA,EACJ,IAAIC,mBAAA,EAEJ,IAAIC,kBAAA,EACJ,IAAIC,mBAAA,EACG,IAAIC,kBAAA7H,QAAA6H,uBAAA,EACJ,IAAIC,kBAAA9H,QAAA8H,uBAAA,EACJ,IAAIC,gBAAA/H,QAAA+H,qBAAA,EACX,IAAIC,yBAAA,EACG,IAAIC,uBAAAjI,QAAAiI,4BAAA,EAEX,SAASC,UACP,GAAIP,aAAc,CAChBH,KAAK,GAAKG,cAAgBH,KAAK,GAAKA,KAAK,IACzCA,KAAK,GAAKI,eAAiBJ,KAAK,GAAKA,KAAK,IAC1CA,KAAK,IAAMA,KAAK,GAAKA,KAAK,IAAMK,kBAChCL,KAAK,IAAMA,KAAK,GAAKA,KAAK,IAAMM,sBAC3B,CACLN,KAAK,GAAKC,cAAgBD,KAAK,GAAKA,KAAK,IACzCA,KAAK,GAAKE,eAAiBF,KAAK,GAAKA,KAAK,KAKvC,SAAStC,gBAAgBiD,IAAKC,KACnCD,IAAI,IAAMC,IAAI,GAAKZ,KAAK,IAAMA,KAAK,GACnCW,IAAI,IAAMC,IAAI,GAAKZ,KAAK,IAAMA,KAAK,GAK9B,SAASrC,IAAIiB,GAAIC,GAAIC,GAAIC,GAAI8B,kBAClC,GAAIA,kBAAoBV,aAAc,CACpCH,KAAK,GAAKA,KAAK,GAAKpB,GACpBoB,KAAK,IAAMA,KAAK,GAAKnB,GACrBmB,KAAK,IAAMA,KAAK,GAAKlB,GACrBkB,KAAK,IAAMA,KAAK,GAAKjB,OAChB,CACLiB,KAAK,GAAKpB,GACVoB,KAAK,IAAMnB,GACXmB,KAAK,IAAMlB,GACXkB,KAAK,IAAMjB,GACX,IAAI+B,QAAUhC,GAAKF,KAAOqB,aAAeF,aAAa,GAAKA,aAAa,IACxE,IAAIgB,QAAUhC,GAAKF,KAAOqB,cAAgBH,aAAa,GAAKA,aAAa,IACzEC,KAAK,GAAKpB,GAAKmB,aAAa,GAAKe,OACjCd,KAAK,GAAKnB,GAAKkB,aAAa,GAAKgB,OACjCf,KAAK,GAAKlB,GAAKiB,aAAa,GAAKe,OACjCd,KAAK,GAAKjB,GAAKgB,aAAa,GAAKgB,OAGnCL,UAGK,SAAS9C,mBAAmBoD,KAAMC,MAAOC,IAAKC,QACnDpB,aAAa,GAAKD,MAAMkB,MACxBjB,aAAa,GAAKD,MAAMmB,OACxBlB,aAAa,GAAKD,MAAMoB,KACxBnB,aAAa,GAAKD,MAAMqB,QAInB,SAAStD,kBACd,OAAOkC,aAGT,IAAMnD,MAAQ,GACP,SAASkB,OACdlB,MAAMkB,KAAKkC,KAAK/C,MAAM,IAEjB,SAASc,MACd,IAAIqD,IAAMxE,MAAMmB,MAChBJ,IAAIyD,IAAI,GAAIA,IAAI,GAAIA,IAAI,GAAIA,IAAI,GAAI,MAG/B,SAASpD,mBACd,OAAOgC,KAAK,GAGP,SAAS/B,eACd,OAAQgC,aAAeF,aAAa,GAAKA,aAAa,KAAOG,cAAgBH,aAAa,GAAKA,aAAa,IAOvG,SAAS7B,eAAec,EAAGC,GAChC,IAAIoC,GAAKlB,aAAe,EAAIN,OAAOyB,aACnC,IAAIC,WAAatC,EAAIoC,GAAKrC,EAC1B,IAAIwC,wBAAA,EACJ,GAAIrB,aAAc,CAChBqB,mBAAqBpB,cAAgBD,iBAChC,CACLqB,mBAAqB,EAAIvD,eAE3B,GAAIsD,WAAaC,mBAAoB,CACnC,IAAIC,QAAUxC,EAAIoC,GAAKG,mBAAqBxC,GAAK,EACjDrB,KAAK8D,OAAQ,EAAGzC,EAAIyC,OAAQxC,EAAG,WAC1B,CACL,IAAIyC,SAAU1C,EAAIqC,GAAKG,mBAAqBvC,GAAK,EACjDtB,IAAI,GAAI+D,QAAQ1C,EAAGC,EAAIyC,QAAQ,QAU5B,SAASvD,gBAAgBa,EAAGC,GACjC,IAAIoC,GAAKlB,aAAe,EAAIN,OAAOyB,aACnC,IAAIC,WAAatC,EAAIoC,GAAKrC,EAC1B,IAAIwC,wBAAA,EACJ,GAAIrB,aAAc,CAChBqB,mBAAqBpB,cAAgBD,iBAChC,CACLqB,mBAAqB,EAAIvD,eAE3B,GAAIsD,WAAaC,mBAAoB,CACnC,IAAIC,OAASxC,EAAIoC,GAAKG,mBAAqBxC,EAC3CrB,IAAI,EAAG,EAAGqB,EAAIyC,OAAQxC,EAAG,WACpB,CACL,IAAI0C,SAAS3C,EAAIqC,GAAKG,mBAAqBvC,EAC3CtB,IAAI,EAAG,EAAGqB,EAAGC,EAAI0C,SAAQ,QAItB,SAASvD,KAAKwD,EAAGC,EAAGC,QACzB,IAAIC,WAAa,EAAMD,OACvBnE,IAAIiE,GAAKA,EAAI5B,KAAK,IAAM+B,WAAYF,GAAKA,EAAI7B,KAAK,IAAM+B,WAAYH,GAAK5B,KAAK,GAAK4B,GAAKG,WAAYF,GAAK7B,KAAK,GAAK6B,GAAKE,WAAY,MAG/H,SAAS1D,gBACdV,IAAI,EAAG,EAAG,EAAG,EAAG,MAGX,SAASW,SACd,OAAO0B,KAAK,GAEP,SAASzB,SACd,OAAOyB,KAAK,GAEP,SAASxB,SACd,OAAOwB,KAAK,GAEP,SAASvB,SACd,OAAOuB,KAAK,GAEP,SAAStB,QACd,OAAOsB,KAAK,GAAKA,KAAK,GAEjB,SAASrB,QACd,OAAOqB,KAAK,GAAKA,KAAK,GAEjB,SAASpB,KACd,OAAOoB,KAAK,GAEP,SAASnB,KACd,OAAOmB,KAAK,IAEP,SAASlB,KACd,OAAOkB,KAAK,IAEP,SAASjB,KACd,OAAOiB,KAAK,IAEP,SAAShB,IACd,OAAOgB,KAAK,IAAMA,KAAK,GAElB,SAASf,IACd,OAAOe,KAAK,IAAMA,KAAK,IAElB,SAASd,SACd,OAAOc,KAAK,GAEP,SAASb,SACd,OAAOa,KAAK,GAGP,SAASZ,QAAQwC,EAAGC,GACzB,GAAI1B,aAAc,CAChB,MAAO,CAAC,OAASyB,EAAI5B,KAAK,IAAMA,KAAK,GAAKO,iBAAmBN,cAAe,OAAS4B,EAAI7B,KAAK,IAAMA,KAAK,GAAKQ,qBAAuBN,oBAChI,CACL,MAAO,CAAC,KAAO0B,EAAI5B,KAAK,KAAOA,KAAK,GAAKA,KAAK,IAAK,KAAO6B,EAAI7B,KAAK,KAAOA,KAAK,GAAKA,KAAK,MAGtF,SAASX,SAASL,EAAGC,GAC1B,GAAIkB,aAAc,CAChB,MAAO,CAAC,IAAMnB,EAAIgB,KAAK,GAAKC,aAAc,IAAMhB,EAAIe,KAAK,GAAKE,mBACzD,CACL,MAAO,CAAC,IAAMlB,GAAKgB,KAAK,GAAKA,KAAK,IAAK,IAAMf,GAAKe,KAAK,GAAKA,KAAK,MAI9D,SAASV,aAAaqB,IAAKC,KAChC,GAAIT,aAAc,CAChBQ,IAAI,IAAMC,IAAI,GAAKZ,KAAK,GAAKO,iBAAmBP,KAAK,GAAKA,KAAK,GAC/DW,IAAI,IAAMC,IAAI,GAAKZ,KAAK,GAAKQ,qBAAuBR,KAAK,GAAKA,KAAK,OAC9D,CACLW,IAAI,GAAKC,IAAI,GAAKZ,KAAK,GAAKA,KAAK,GAAKA,KAAK,GAC3CW,IAAI,GAAKC,IAAI,GAAKZ,KAAK,GAAKA,KAAK,GAAKA,KAAK,IAIxC,SAAST,kBAAkBoB,IAAKC,KACrC,GAAIT,aAAc,CAChBQ,IAAI,GAAKC,IAAI,GAAKZ,KAAK,GAAKA,KAAK,GACjCW,IAAI,GAAKC,IAAI,GAAKZ,KAAK,GAAKA,KAAK,OAC5B,CACLW,IAAI,GAAKC,IAAI,GAAKZ,KAAK,GAAKA,KAAK,GACjCW,IAAI,GAAKC,IAAI,GAAKZ,KAAK,GAAKA,KAAK,IAK9B,SAASR,aAAamB,IAAKC,KAChC,GAAIT,aAAc,CAChBQ,IAAI,IAAMJ,iBAAmBK,IAAI,GAAKZ,KAAK,IAAMA,KAAK,IAAMA,KAAK,GACjEW,IAAI,IAAMH,qBAAuBI,IAAI,GAAKZ,KAAK,IAAMA,KAAK,IAAMA,KAAK,OAChE,CACLW,IAAI,IAAMC,IAAI,GAAKZ,KAAK,IAAMA,KAAK,GAAKA,KAAK,GAC7CW,IAAI,IAAMC,IAAI,GAAKZ,KAAK,IAAMA,KAAK,GAAKA,KAAK,IAI1C,SAASP,kBAAkBuC,QAChC,GAAI7B,aAAc,CAChB,OAAO6B,QAAUhC,KAAK,GAAKA,KAAK,IAAM,QACjC,CACL,OAAOgC,OAAShC,KAAK,GAAKA,KAAK,GAAK,KAKjC,SAASN,qBAAqBiB,IAAKC,KACxC,GAAIT,aAAc,CAChBQ,IAAIiB,GAAKrB,iBAAmBK,IAAIgB,EAAI5B,KAAK,IAAMA,KAAK,IAAMA,KAAK,GAC/DW,IAAI3B,EAAI4B,IAAI5B,EAAIgB,KAAK,GAAKA,KAAK,GAC/BW,IAAIkB,GAAKrB,qBAAuBI,IAAIiB,EAAI7B,KAAK,IAAMA,KAAK,IAAMA,KAAK,GACnEW,IAAI1B,EAAI2B,IAAI3B,EAAIe,KAAK,GAAKA,KAAK,OAC1B,CACLW,IAAIiB,GAAKhB,IAAIgB,EAAI5B,KAAK,IAAMA,KAAK,GAAKA,KAAK,GAC3CW,IAAI3B,EAAI4B,IAAI5B,EAAIgB,KAAK,GAAKA,KAAK,GAC/BW,IAAIkB,GAAKjB,IAAIiB,EAAI7B,KAAK,IAAMA,KAAK,GAAKA,KAAK,GAC3CW,IAAI1B,EAAI2B,IAAI3B,EAAIe,KAAK,GAAKA,KAAK,IAI5B,SAASL,eACdK,KAAK,GAAKhE,OAAOiG,kBAAoB,EACrChC,aAAeJ,OAAOqC,MACtBhC,cAAgBL,OAAOmC,OACvB,IAAIG,SAAW,CAAC,EAAG,EAAGlC,aAAcC,eACpC,GAAIL,OAAOM,aAAc,CAEvBA,aAAeN,OAAOM,aACtBC,cAAgBP,OAAOO,cAEvB,IAAIiB,GAAKxB,OAAOyB,aAChB,IAAIC,WAAanB,cAAgBiB,GAAKlB,aACtC,IAAIiC,iBAAmBnC,aAAeF,aAAa,GAAKA,aAAa,GACrE,IAAIsC,kBAAoBnC,cAAgBH,aAAa,GAAKA,aAAa,GACvE,IAAIyB,mBAAqBa,kBAAoBD,iBAC7C,GAAIb,WAAaC,mBAAoB,CACnC,IAAIC,QAAUrB,cAAgBoB,mBAAqBrB,aAAekB,IAAM,EAAIgB,kBAAoBjC,cAChG5H,QAnQK+H,gBAmQLA,gBAAkBR,aAAa,GAAKD,MAAM2B,QAC1CjB,oBAAsBT,aAAa,GACnCvH,QAnQKiI,uBAmQLA,uBAAyBV,aAAa,GACtCvH,QAxQK6H,kBAwQLA,kBAAoBP,MAAMsC,iBAAmBX,OAAS,GACtDjJ,QAxQK8H,kBAwQLA,kBAAoB+B,sBACf,CACL,IAAIC,UAAUnC,aAAeqB,mBAAqBpB,cAAgBiB,IAAM,EAAIe,iBAAmBjC,aAC/F3H,QA1QK+H,gBA0QLA,gBAAkBR,aAAa,GAC/BS,oBAAsBT,aAAa,GAAKD,MAAMwC,UAC9C9J,QA1QKiI,uBA0QLA,uBAAyBV,aAAa,GAAKD,MAAMwC,UACjD9J,QA/QK6H,kBA+QLA,kBAAoB+B,iBACpB5J,QA/QK8H,kBA+QLA,kBAAoBR,MAAMuC,kBAAoBC,SAAS,GAEzDH,SAAS,GAAKhC,aACdgC,SAAS,GAAK/B,kBACT,CACLD,aAAeC,cAAgB,EAC/B5H,QApRO+H,gBAoRPA,gBAAkB,EAClBC,oBAAsB,EACtBhI,QApROiI,uBAoRPA,uBAAyB,EAG3BC,UAgBAb,OAAO0C,YAAYJ,UAGd,SAASvC,UACdjC,IAAI,EAAG,EAAGkC,OAAOqC,MAAOrC,OAAOmC,QAC/BrC,uFC1UF,IAAM6C,cAAgBtK,QAAQ,6BAC9B,IAAMuK,cAAgBvK,QAAQ,sBACvB,IAAIwK,UAAAlK,QAAAkK,UAAYF,cAAc3J,OAAO,CAAE8J,QAASF,gBAEvD,IAAM5C,OAAS3H,QAAQ,eACvB,IAAM0K,SAAW1K,QAAQ,qBACjB2K,GAAclH,KAAdkH,GAAI/C,MAAUnE,KAAVmE,MAEZ9D,OAAO8G,IAAM,SAAUC,KACrBL,UAAUM,OAAO,KAAMD,IAAKP,cAAcS,iBAG5CP,UAAUQ,cAAc,MAAO,CAC7BC,KAAMT,UAAUU,WAChBC,MAAO,MACPC,MAAO,CAAC,EAAG,KACXC,IAAK,SAAAA,MAAA,OAAMzD,MAAMD,OAAO2D,QAAU,IAAMX,KACxClF,IAAK,SAAAA,IAAA8F,GAAA,OAAK5D,OAAO6D,OAAOD,EAAIZ,GAAK,MACjCc,MAAO,OAGT,SAASC,WAAWC,OAClB,GAAIA,MAAQ,KAAQ,CAClB,OAAWA,OAAS,KAAO,OAAOC,QAAQ,GAA1C,KAEF,GAAID,MAAQ,IAAK,CACf,OAAWA,MAAQ,MAAMC,QAAQ,GAAjC,KAEF,OAAUD,MAAV,IAGFnB,UAAUqB,SAAS,CACjBjB,IAAK,SACLkB,KAAM,gCACNC,KAAM,SAAAA,KAAUlB,IAAKmB,WACnB,IAAIC,KAAOC,OAAOD,KAAKvB,SAASA,UAChCuB,KAAOA,KAAKE,OAAO,SAAAjM,GAAA,OAAKwK,SAASA,SAASxK,GAAGkM,QAAU,OACvDH,KAAKI,KAAK,SAACnM,EAAG6C,GAAJ,OAAU2H,SAASA,SAASxK,GAAGkM,QAAU1B,SAASA,SAAS3H,GAAGqJ,UACxEJ,UAAU,KAAMC,KAAKK,IAAI,SAAApM,GAAA,OAAQwL,WAAWhB,SAASA,SAASxK,GAAGkM,SAAxC,IAAoDlM,IAAK+E,KAAK,UAI3FuF,UAAUqB,SAAS,CACjBjB,IAAK,SACLkB,KAAM,oCACNC,KAAM,SAAAA,KAAUlB,IAAKmB,WAAW,IACxBI,QAAYzE,OAAO4E,WAAnBH,QACNJ,UAAU,KAASN,WAAWU,QAAQI,MAAtC,SAAoDd,WAAWU,QAAQK,KAAvE,SAAoFf,WAAWU,QAAQI,KAAOJ,QAAQK,KAAtH,aAIJjC,UAAUqB,SAAS,CACjBjB,IAAK,IACLkB,KAAM,yBACNC,KAAM,SAAAA,KAAUlB,IAAKmB,WACnBnB,IAAMA,IAAI6B,cACV/E,OAAOgF,QAAQ9B,MAAQlD,OAAOgF,QAAQ9B,KACtCmB,UAAU,KAAV,KAAqBnB,IAArB,SAAgClD,OAAOgF,QAAQ9B,KAAO,MAAQ,aAIlEL,UAAUqB,SAAS,CACjBjB,IAAK,WACLkB,KAAM,4BACNC,KAAM,SAAAA,KAAUlB,IAAKmB,WACnBA,UAAU,KAAV,kBAAiCrE,OAAOiF,OAAS,EAAI,OAIzD,SAASC,QAAQC,UACf,MAAA,IAAWA,SAASlC,IAApB,MAA6BkC,SAAShB,KAGxCtB,UAAUqB,SAAS,CACjBjB,IAAK,OACLkB,KAAM,oBACNC,KAAM,SAAAA,KAAUlB,IAAKmB,WACnB,IAAIe,KAAOvC,UAAUwC,aAAa,GAAIC,MAAQA,KAAKC,QACnD,GAAIrC,IAAK,CACP,IAAIsC,UAAY3C,UAAU4C,UAAUvC,KACpC,IAAIwC,OAASxC,IAAIyC,cACjBP,KAAOA,KAAKZ,OAAO,SAAAW,UAAA,OAAYA,SAASS,MAAM3I,QAAQuI,cAAgB,GAAKL,SAAShB,KAAKwB,cAAc1I,QAAQyI,WAAa,IAE9H,IAAKN,KAAKvM,OAAQ,CAChB,YAAYwL,UAAU,KAAV,+BAA+CnB,IAA/C,KAEdmB,UAAU,KAAMe,KAAKT,IAAIO,SAAS5H,KAAK,UAIpC,IAAIuI,SAAAlN,QAAAkN,SAAW,EAAE,GAAI,GAAI,GAAI,GACpChD,UAAUQ,cAAc,YAAa,CACnCG,MAAO,YACPF,KAAMT,UAAUiD,YAChBC,MAAO,mEAAqE,0CAA4C,gCAAkC,4CAA8C,4CACxMC,cAAe,KACftC,IAAK,SAAAA,MAAA,OAAMmC,SAAS,MAAQ,EAAI,YAAcA,SAASvI,KAAK,MAC5DQ,IAAK,SAAAA,IAAA8F,GACHA,EAAIqC,OAAOrC,GACX,IAAIU,KAAOV,EAAEvG,MAAM,KACnB,GAAIuG,GAAKU,KAAKzL,SAAW,EAAG,CAC1BgN,SAAS,GAAKA,SAAS,GAAKA,SAAS,GAAKA,SAAS,GAAKK,OAAOtC,QAC1D,GAAIU,KAAKzL,SAAW,EAAG,CAC5BgN,SAAS,GAAKA,SAAS,GAAKK,OAAO5B,KAAK,IACxCuB,SAAS,GAAKA,SAAS,GAAKK,OAAO5B,KAAK,SACnC,GAAIA,KAAKzL,SAAW,EAAG,CAC5B,IAAK,IAAIsN,GAAK,EAAGA,GAAK,IAAKA,GAAI,CAC7BN,SAASM,IAAMD,OAAO5B,KAAK6B,UAExB,IAITrC,MAAO,OAGTjB,UAAUqB,SAAS,CACjBjB,IAAK,cACLkB,KAAM,+BACNC,KAAM,SAAAA,KAAUlB,IAAKmB,WACnB,IAAI+B,aAAexD,cAAcyD,QAAQ,kBACzC,IAAKD,aAAc,CACjB,OAAO/B,UAAU,KAAM,yCAEzBzB,cAAc0D,QAAQ,iBAAkBC,WACxC,OAAOlC,UAAU,KAAM,6tBC6FXrL,OAAAA,OA1NhB,IAAMwN,SAAWnO,QAAQ,iBACzB,IAAM2H,OAAS3H,QAAQ,eACvB,IAAMoO,WAAapO,QAAQ,cAC3B,IAAMqO,QAAUrO,QAAQ,eAEhBsO,SAAaD,QAAbC,aAEFC,yBACJ,SAAAA,cAAYC,QACVvB,KAAKvD,EAAI,EACTuD,KAAKtD,EAAI,EACTsD,KAAKwB,EAAIC,EAAEC,GACX1B,KAAKnG,EAAIuH,QAAQO,aACjB3B,KAAKhC,KAAO,OACZgC,KAAK4B,YAAc,MAEnB5B,KAAK6B,YAAcT,QAAQS,YAC3B7B,KAAK8B,KAAO,GACZ9B,KAAK+B,YAAc,GACnB/B,KAAKgC,QAAU,EACfhC,KAAKiC,cAAgB,MACrBjC,KAAKkC,cAAgB,MACrBlC,KAAKmC,aAAe,MACpBnC,KAAKoC,eAAiB,MACtBpC,KAAKqC,WAAa,KAClBrC,KAAKsC,YAAYf,QACjBvB,KAAKuC,WAAa,MAElBvC,KAAKwC,KAAO,KACZxC,KAAKyC,MAAQ,KACbzC,KAAK0C,UAAY,MACjB1C,KAAK2C,aAAe,MACpB3C,KAAK4C,WAAa,4EAERrB,QACV,IAAKA,OAAQ,CACX,OAEF,IAAK,IAAI1O,KAAK0O,OAAQ,CACpBvB,KAAKnN,GAAK0O,OAAO1O,8CAInB,OAAOmN,KAAK8B,6CAENe,UACN,GAAI7C,KAAKyC,MAAO,CACdzC,KAAKyC,MAAMK,MAAQD,SAErB7C,KAAK8B,KAAOe,+CAGZ,GAAI7C,KAAKyC,MAAO,CACdzC,KAAKyC,MAAMM,YACN,CACL/C,KAAKkC,cAAgB,KAEvBd,QAAQ4B,WAAWhD,MACnBA,KAAKuC,WAAa,KAClB,GAAIvC,KAAK2C,aAAc,CACrBxB,WAAW8B,6DAIb7B,QAAQ8B,UAAUlD,oDAIlB,OAAOA,KAAKuC,6DAIZ,IAAIY,iBAAmBnD,KAAKuC,WAC5B,IAAIa,aAAehC,QAAQiC,WAAWrD,MACtC,IAAIsD,YAActD,KAAKyC,OAASxL,SAASsM,gBAAkBvD,KAAKyC,MAChE,GAAIU,mBAAqBC,aAAc,CAErC,GAAIA,eAAiBE,aAAetD,KAAKyC,MAAO,CAC9CpB,SAAS,kCAAmCrB,MAC5CA,KAAKyC,MAAMM,QAEb,IAAKK,cAAgBE,YAAa,CAChCjC,SAAS,+CAAgDrB,MACzDA,KAAKyC,MAAMe,aAER,GAAIF,cAAgBF,aAAc,CACvC/B,SAAS,kCAAmCrB,MAC5CoB,QAAQ4B,WAAWhD,MACnBoD,aAAe,UACV,IAAKE,aAAeF,aAAc,EAGzC,IAAIK,QAAUL,aAEd,GAAIK,QAAS,CACX,IAAIC,QAAU1D,KAAK2C,eAAiB3C,KAAK8B,KAAO,CAAE6B,YAAaxC,WAAWyC,kBAAqB,KAC/F,GAAIzC,WAAW0C,UAAU1C,WAAW2C,KAAKC,IAAKL,SAAU,CACtD,GAAI1D,KAAK8B,KAAM,CACb9B,KAAKgE,QAAQ,QACR,CACL5C,QAAQ6C,cACR,GAAIjE,KAAKyC,MAAO,CACdzC,KAAKyC,MAAMe,OAEbC,QAAU,MACVzD,KAAKkE,SAAW,OAItBlE,KAAKuC,WAAakB,QAClB,OAAOA,wCAGLlC,QAAQ,IAAA4C,MAAAnE,KACVA,KAAKsC,YAAYf,QAEjB,GAAIvB,KAAK4C,aAAelI,OAAO0J,mBAAqB,EAAG,CAErDpE,KAAK0C,UAAY,MAEnB1C,KAAK4C,WAAalI,OAAO0J,mBAEzBpE,KAAKkE,SAAW,MAChB,IAAIT,QAAUzD,KAAKqE,cAEnBjD,QAAQkD,sBAAsB3L,KAAKqH,MACnC,IAAIwC,KAAOpB,QAAQmD,QAAQvE,KAAK4B,YAAa5B,KAAKwC,MAClD,GAAIA,OAASxC,KAAKwC,KAAM,CACtB,GAAIA,KAAM,CAERA,KAAKgC,YAAc,GACnB,IAAIC,KAAOxN,SAASyN,cAAc,QAClCD,KAAKE,aAAa,eAAgB,OAClC,IAAIlC,MAAQxL,SAASyN,cAAc,SACnCjC,MAAMkC,aAAa,eAAnB,YAA+CnO,KAAKoO,UACpDnC,MAAMkC,aAAa,OAAQ3E,KAAKhC,MAChCyE,MAAMkC,aAAa,cAAe3E,KAAK+B,aACvC,GAAI/B,KAAKgC,QAAS,CAChBS,MAAMkC,aAAa,YAAa3E,KAAKgC,SAEvCS,MAAMkC,aAAa,WAAY,GAC/BF,KAAKI,iBAAiB,SAAU,SAAAC,IAC9BA,GAAGC,iBACHZ,MAAKzB,UAAY,KACjByB,MAAKrC,KAAOqC,MAAK1B,MAAMK,MACvB,GAAIqB,MAAKxB,eAAiBwB,MAAKrC,KAAM,CACnCX,WAAWyC,iBAAiB,qBAE7B,MACHa,KAAKO,YAAYvC,OACjB,IAAIwC,KAAOhO,SAASyN,cAAc,QAClCO,KAAKN,aAAa,WAAY,GAC9BF,KAAKO,YAAYC,MACjBzC,KAAKwC,YAAYP,MACjBhC,MAAMK,MAAQ9C,KAAK8B,KACnB9B,KAAKyC,MAAQA,MACb,GAAIzC,KAAKiC,eAAiBjC,KAAKkC,cAAe,CAC5CO,MAAMM,QACN/C,KAAKkC,cAAgB,MAEvB,GAAIlC,KAAKoC,eAAgB,CACvBK,MAAMyC,cAEH,CACLlF,KAAKyC,MAAQ,KAEfzC,KAAK0C,UAAY,MACjB1C,KAAKwC,KAAOA,SACP,CACL,GAAIxC,KAAKyC,MAAO,CACdzC,KAAK8B,KAAO9B,KAAKyC,MAAMK,OAG3B,GAAIN,KAAM,CACR,IAAI2C,IAAMjE,SAASjH,QAAQ+F,KAAKvD,EAAGuD,KAAKtD,GACxC,IAAKsD,KAAKqC,WAAY,CACpBG,KAAKH,WAAa,MAEpBG,KAAK4C,MAAMvJ,KAAUsJ,IAAI,GAAzB,IACA3C,KAAK4C,MAAMrJ,IAASoJ,IAAI,GAAxB,IACA,IAAIE,KAAOnE,SAAShH,SAAS8F,KAAKnG,EAAG,GACrC2I,KAAK4C,MAAMrI,MAAWsI,KAAK,GAA3B,IACA,IAAIC,aAAe9C,KAAK4C,MAAMG,UAAY,MAC1C,IAAIC,aAAkBtE,SAAS5G,kBAAkB0F,KAAK6B,aAAalD,QAAQ,GAAvE,KACJ,GAAI6G,eAAiBF,aAAc,CACjC9C,KAAK4C,MAAMG,SAAWC,cAI1B,GAAI/B,QAAS,CACX,GAAIzD,KAAKmC,aAAc,CACrB,GAAIhB,WAAWsE,MAAM,CAAEC,KAAM,OAAS,CACpCtE,QAAQ4B,WAAW,WAIvB7B,WAAWwE,sBAGb,GAAI3F,KAAK0C,UAAW,CAClB1C,KAAK0C,UAAY,MACjB,OAAO1C,KAAK4F,OAEd,GAAI5F,KAAKkE,SAAU,CACjBlE,KAAKkE,SAAW,MAChB,OAAOlE,KAAK6F,OAEd,OAAO,2CAIP7F,KAAKwC,KAAO,KACZxC,KAAKyC,MAAQ,iCAGjBnB,cAAcwE,UAAUF,OAAS,SACjCtE,cAAcwE,UAAUD,OAAS,SAE1B,SAASnS,OAAO6N,QACrB,OAAO,IAAID,cAAcC,wICvLXwE,eAAAA,uBAgFAC,gBAAAA,wBAaAC,YAAAA,oBAaAC,eAAAA,uBAMAC,iBAAAA,yBAcAC,UAAAA,kBAwDAC,oBAAAA,4BAMAC,sBAAAA,8BAMAC,eAAAA,uBAQAC,eAAAA,uBA0FAC,UAAAA,kBAWAC,kBAAAA,0BAsDAC,kBAAAA,0BAyDAC,iBAAAA,iBApchB,IAAMlM,OAAS3H,QAAQ,eAKvB,IAAMwM,KAAOxM,QAAQ,aACrB,IAAM8T,QAAU9T,QAAQ,gBACxB,IAAM0K,SAAW1K,QAAQ,8BAEWA,QAAQ,cAApC+T,cAAAA,KAAMC,cAAAA,KAAMC,cAAAA,KAAMC,eAAAA,MAE1B,IAAMC,YAAc,CAClBC,QAAS,CACPC,GAAI,wSAENtT,KAAM,CACJuT,GAAI,iMAENC,cAAe,CACbD,GAAI,u9EAENE,cAAe,CACbF,GAAI,6uBAQNG,aAAc,CACZH,GAAI,ieAOD,SAAStB,eAAe0B,IAAKC,KAClCR,YAAYO,KAAOC,IAGrB,SAASC,UAAUF,KACjB,IAAIjF,KAAO0E,YAAYO,KACvB,IAAKjF,KAAKoF,OAAQ,CAChB,GAAIpF,KAAK6E,GAAI,CACX7E,KAAKoF,OAASf,QAAQnT,OAAOmU,GAAGC,gBAAiBL,IAAKjF,KAAK6E,QACtD,CACL7E,KAAKoF,OAASf,QAAQnT,OAAOmU,GAAGE,cAAeN,IAAKjF,KAAK4E,KAG7D,OAAO5E,KAAKoF,OAGd,IAAII,OAAS,MACb,IAAIC,WAAajB,KAAK,EAAG,GAAI,GAAI,GACjC,IAAIkB,cAAgBpB,KAAK,EAAG,GAC5B,IAAIqB,sBAAwB,CAC1BF,WAAAA,WACAC,cAAAA,eAGF,IAAIE,gCAAA,EAGJ,IAAIC,iCAAA,EACJ,IAAIC,iCAAA,EACJ,IAAIC,eAAA,EACJ,SAAS9N,UACPuN,OAAS,KAETO,UAAYhJ,KAAK7L,OAAO,CAAC,CAACmT,QAAQ2B,SAASC,SAAUZ,GAAGa,MAAO,EAAG,QAAS,IAAI9U,aAAa,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,KAAM2L,KAAKoJ,OAUlIP,2BAA6B,CAC3BH,WAAAA,WACAC,cAAAA,cACAU,YAAa,IAAIhV,aAAa,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,KAoBlEyU,4BAA8B,CAC5BJ,WAAAA,WACAC,cAAAA,cACAW,aAAc9B,KAAK,EAAG,EAAG,GACzB+B,MAAO,IAAIlV,aAAa,CAAC,IAAM,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,GAAK,MAGpE0U,4BAA8B,CAC5BL,WAAAA,WACAC,cAAAA,cACAa,gBAAiB/B,QAId,SAAShB,gBAAgBxK,KAC9BA,IAAI,GAAK,MACTA,IAAI,GAAK,MACTA,IAAI,GAAK,MACTA,IAAI,GAAK,MACTA,IAAI,GAAK,MACTA,IAAI,GAAK,MACTA,IAAI,GAAK,MACTA,IAAI,GAAK,MACTA,IAAI,GAAK,MACTA,IAAI,GAAKA,IAAI,IAAMA,IAAI,IAAM,EAGxB,SAASyK,YAAYzK,KAC1BA,IAAI,GAAK,KACTA,IAAI,GAAK,KACTA,IAAI,GAAK,KACTA,IAAI,GAAK,KACTA,IAAI,GAAK,KACTA,IAAI,GAAK,KACTA,IAAI,GAAK,KACTA,IAAI,GAAK,KACTA,IAAI,GAAK,KACTA,IAAI,GAAKA,IAAI,IAAMA,IAAI,IAAM,EAGxB,SAAS0K,eAAe1K,KAC7BA,IAAI,GAAKA,IAAI,GAAKA,IAAI,IAAM,EAC5BA,IAAI,GAAKA,IAAI,GAAKA,IAAI,GAAKA,IAAI,GAAKA,IAAI,GAAKA,IAAI,GAAK,EACtDA,IAAI,GAAKA,IAAI,IAAMA,IAAI,IAAM,EAGxB,SAAS2K,iBAAiB3K,IAAKwN,iBACpC,IAAIC,GAAK,EAAID,gBACbxN,IAAI,GAAKyN,GAAK,MAASD,gBACvBxN,IAAI,GAAKyN,GAAK,MACdzN,IAAI,GAAKyN,GAAK,MACdzN,IAAI,GAAKyN,GAAK,MACdzN,IAAI,GAAKyN,GAAK,MAASD,gBACvBxN,IAAI,GAAKyN,GAAK,MACdzN,IAAI,GAAKyN,GAAK,MACdzN,IAAI,GAAKyN,GAAK,MACdzN,IAAI,GAAKyN,GAAK,MAASD,gBACvBxN,IAAI,GAAKA,IAAI,IAAMA,IAAI,IAAM,EAGxB,SAAS4K,UAAU5K,IAAK0N,OA0C7B,IAAIpW,EAAI0D,KAAK2S,IAAID,OACjB,IAAIE,EAAI5S,KAAK6S,IAAIH,OACjB1N,IAAI,GAAK,MAAS1I,GAAK,kBAAqBsW,EAAI,MAChD5N,IAAI,IAAM,MAAS1I,EAAI,mBAAsBsW,EAAI,MACjD5N,IAAI,IAAM,MAAS1I,GAAK,kBAAqBsW,EAAI,MACjD5N,IAAI,IAAM,MAAS1I,GAAK,kBAAqBsW,EAAI,MACjD5N,IAAI,GAAK,MAAS1I,EAAI,mBAAsBsW,EAAI,MAChD5N,IAAI,IAAM,MAAS1I,EAAI,kBAAqBsW,EAAI,MAChD5N,IAAI,IAAM,MAAS1I,EAAI,kBAAqBsW,EAAI,MAChD5N,IAAI,IAAM,MAAS1I,GAAK,mBAAsBsW,EAAI,MAClD5N,IAAI,GAAK,MAAS1I,EAAI,iBAAoBsW,EAAI,MAC9C5N,IAAI,GAAKA,IAAI,IAAMA,IAAI,IAAM,EAGxB,SAAS6K,oBAAoB7K,IAAK8N,kBACvC9N,IAAI,GAAKA,IAAI,GAAKA,IAAI,GAAK,EAC3BA,IAAI,GAAKA,IAAI,GAAKA,IAAI,GAAKA,IAAI,GAAKA,IAAI,GAAKA,IAAI,GAAK,EACtDA,IAAI,GAAKA,IAAI,IAAMA,IAAI,IAAM8N,iBAGxB,SAAShD,sBAAsB9K,IAAK+N,OACzC/N,IAAI,GAAKA,IAAI,GAAKA,IAAI,GAAK+N,MAC3B/N,IAAI,GAAKA,IAAI,GAAKA,IAAI,GAAKA,IAAI,GAAKA,IAAI,GAAKA,IAAI,GAAK,EACtDA,IAAI,GAAKA,IAAI,IAAMA,IAAI,IAAM,EAGxB,SAAS+K,eAAe/K,IAAKgO,aAClChO,IAAI,GAAKA,IAAI,GAAKA,IAAI,GAAK,EAC3BA,IAAI,GAAKA,IAAI,GAAKA,IAAI,GAAKA,IAAI,GAAKA,IAAI,GAAKA,IAAI,GAAK,EACtDA,IAAI,GAAKgO,YAAY,GACrBhO,IAAI,IAAMgO,YAAY,GACtBhO,IAAI,IAAMgO,YAAY,GAGjB,SAAShD,eAAehL,IAAKiO,eAClCjO,IAAI,GAAKA,IAAI,GAAKA,IAAI,GAAKiO,cAC3BjO,IAAI,GAAKA,IAAI,GAAKA,IAAI,GAAKA,IAAI,GAAKA,IAAI,GAAKA,IAAI,GAAK,EACtDA,IAAI,GAAKA,IAAI,IAAMA,IAAI,IAAM,IAAO,EAAIiO,eAI1C,SAASC,YAAYC,OAAQC,OAAQC,QACnC,IAAI7M,SAAWtC,OAAOsC,SACtB,IAAI8M,SAAW9M,SAAS,GACxB,IAAI+M,SAAW/M,SAAS,GACxB4M,OAASA,QAAUE,SACnBD,OAASA,QAAUE,SAGnB9B,WAAW,GAAK,EAAM2B,OAASE,SAC/B7B,WAAW,GAAK,EAAM4B,OAASE,SAM/BlD,QAAQmD,KAAKrC,UAAU,WAAYA,UAAUgC,OAAO/B,QAAS+B,OAAOpI,QACpE9D,SAASwM,UAAUN,OAAOO,MAC1B3B,UAAU4B,OAkEL,SAAS1D,UAAUlF,QACxB,IAAKyG,OAAQ,CACXvN,UAEFiP,YAAY,CACV9B,OAAQrG,OAAOqG,QAAU,OACzBrG,OAAQ4G,sBACR+B,KAAM,CAAC3I,OAAO6I,UAIX,SAAS1D,kBAAkBnF,QAChC,IAAKyG,OAAQ,CACXvN,UAEF,IAAI2P,OAAS7I,OAAO6I,OACpBA,OAAOC,gBAAgB,CACrBC,WAAYzC,GAAG0C,OACfC,WAAY3C,GAAG0C,OACfE,OAAQ5C,GAAG6C,cACXC,OAAQ9C,GAAG6C,gBAIb,IAAIE,KAAOR,OAAOrN,MAClB,IAAI8N,KAAOT,OAAOvN,OAClB,IAAIgM,cAAgBtH,OAAOuJ,OAAS,KAAQF,KAC5CvC,4BAA4BQ,aAAa,GAAKA,aAC9CR,4BAA4BQ,aAAa,GAAK,EAC9CR,4BAA4BQ,aAAa,GAAK,EAC9Ca,YAAY,CACV9B,OAAQ,gBACRrG,OAAQ8G,4BACR6B,KAAM,CAACE,SACNQ,KAAMC,MACT,IAAIC,MAAQpQ,OAAOqQ,mBAAmB,KAAMH,KAAMC,KAAM,KAAM,OAG9DhC,cAAgBtH,OAAOyJ,OAAS,KAAQH,KACxCxC,4BAA4BQ,aAAa,GAAK,EAC9CR,4BAA4BQ,aAAa,GAAKA,aAC9CR,4BAA4BQ,aAAa,GAAK,EAC9Ca,YAAY,CACV9B,OAAQ,gBACRrG,OAAQ8G,4BACR6B,KAAM,CAACY,QACNF,KAAMC,MACT,IAAIG,MAAQtQ,OAAOqQ,mBAAmB,KAAMH,KAAMC,KAAM,KAAM,OAG9D5D,MAAMqB,4BAA4BS,gBAAiBqB,OAAOrN,MAAOqN,OAAOvN,OAAQ,EAAIuN,OAAOrN,MAAO,EAAIqN,OAAOvN,QAE7GnC,OAAO0C,YAAYmE,OAAO0J,gBAC1B,GAAI1J,OAAO2J,YAAa,CACtBrD,GAAGsD,WAAW5J,OAAO2J,YAAY,GAAI3J,OAAO2J,YAAY,GAAI3J,OAAO2J,YAAY,GAAI3J,OAAO2J,YAAY,IACtGrD,GAAGvP,MAAMuP,GAAGuD,kBAGd1B,YAAY,CACV9B,OAAQ,gBACRrG,OAAQ+G,4BACR4B,KAAM,CAACE,OAAQU,MAAOE,SAInB,SAASrE,kBAAkBpF,QAChC,IAAKyG,OAAQ,CACXvN,UAEF,IAAI2P,OAAS7I,OAAO6I,OACpBA,OAAOC,gBAAgB,CACrBC,WAAYzC,GAAG0C,OACfC,WAAY3C,GAAG0C,OACfE,OAAQ5C,GAAG6C,cACXC,OAAQ9C,GAAG6C,gBAEb,IAAIW,SAAW9J,OAAO8J,UAAY,IAClC,IAAIC,SAAW/J,OAAO+J,UAAY,IAGlC,IAAIC,cAAgBnB,OAEpB,IAAIpN,SAAWtC,OAAOsC,SACtB,IAAIwO,IAAMH,SACV,MAAOG,IAAMxO,SAAS,IAAMwO,IAAMxO,SAAS,GAAI,CAC7CwO,KAAO,EAGT,MAAOA,IAAMF,SAAU,CACrB5B,YAAY,CACV9B,OAAQrG,OAAOkK,aAAe,OAC9BlK,OAAQ4G,sBACR+B,KAAM,CAACqB,gBACNC,IAAKA,KACRD,cAAgB7Q,OAAOqQ,mBAAmB,KAAMS,IAAKA,IAAK,KAAM,OAChEA,KAAO,EAIT,IAAI3C,cAAgBtH,OAAOiC,MAAQ,GAAKgI,IACxCnD,4BAA4BQ,aAAa,GAAKA,aAC9CR,4BAA4BQ,aAAa,GAAK,EAC9CR,4BAA4BQ,aAAa,GAAKtH,OAAOmK,MAAQ,EAC7DhC,YAAY,CACV9B,OAAQ,gBACRrG,OAAQ8G,4BACR6B,KAAM,CAACqB,gBACNC,IAAKA,KACR,IAAIhI,KAAO9I,OAAOqQ,mBAAmB,KAAMS,IAAKA,IAAK,KAAM,OAE3DnD,4BAA4BQ,aAAa,GAAK,EAC9CR,4BAA4BQ,aAAa,GAAKA,aAC9CR,4BAA4BQ,aAAa,GAAKtH,OAAOmK,MAAQ,EAC7DhC,YAAY,CACV9B,OAAQ,gBACRrG,OAAQ8G,4BACR6B,KAAM,CAAC1G,QAGT,OAAO,KAGF,SAASoD,iBAAiBrF,QAC/B,IAAKyG,OAAQ,CACXvN,UAEF,IAAI2P,OAAS7I,OAAO6I,OACpBA,OAAOC,gBAAgB,CACrBC,WAAYzC,GAAG0C,OACfC,WAAY3C,GAAG0C,OACfE,OAAQ5C,GAAG6C,cACXC,OAAQ9C,GAAG6C,gBAGb,IAAIiB,OAASpK,OAAOqH,YACpB,IAAIgD,KAAOxD,2BAA2BQ,YAEtCgD,KAAK,GAAKD,OAAO,GACjBC,KAAK,GAAKD,OAAO,GACjBC,KAAK,GAAKD,OAAO,GACjBC,KAAK,GAAKD,OAAO,GACjBC,KAAK,GAAKD,OAAO,GACjBC,KAAK,GAAKD,OAAO,GACjBC,KAAK,GAAKD,OAAO,GACjBC,KAAK,GAAKD,OAAO,IACjBC,KAAK,GAAKD,OAAO,GACjBC,KAAK,GAAKD,OAAO,GACjBC,KAAK,IAAMD,OAAO,GAClBC,KAAK,IAAMD,OAAO,IAElBjC,YAAY,CACV9B,OAAQ,eACRrG,OAAQ6G,2BACR8B,KAAM,CAACE,UAGT,OAAO,gYC7YOyB,kBAAAA,0BAOAtN,OAAAA,eAIAuN,YAAAA,oBAeAC,oBAAAA,4BAgBAC,eAAAA,uBAmBAC,kBAAAA,0BAKAC,cAAAA,sBAKAC,WAAAA,mBAQAC,iBAAAA,yBAMAC,SAAAA,iBAQAC,YAAAA,oBAqDAC,YAAAA,oBAKAC,SAAAA,iBAyHApP,YAAAA,oBAMAqP,oBAAAA,4BAcA1B,mBAAAA,2BA2CA2B,gBAAAA,wBAUAC,iBAAAA,yBAcAC,gBAAAA,wBAuMAC,sBAAAA,8BA0CApS,QAAAA,gBAkKAqS,aAAAA,aAh1BhB/Z,QAAQ,kBAED,IAAIga,MAAA1Z,QAAA0Z,MAAQpM,OAAO1J,SAASY,UAAUF,QAAQ,sBAAwB,EAE7E5E,QAAQ,cAER,IAAMia,OAASja,QAAQ,UACvB,IAAMmO,SAAWnO,QAAQ,iBACzB,IAAMka,KAAOla,QAAQ,aACrB,IAAMma,QAAUna,QAAQ,gBACxB,IAAMoa,UAAYpa,QAAQ,aAC1B,IAAMqa,sBAAwBra,QAAQ,gCACtC,IAAMwM,KAAOxM,QAAQ,aACrB,IAAM0P,MAAQ1P,QAAQ,cACtB,IAAMuK,cAAgBvK,QAAQ,sBAC9B,IAAMsa,aAAeta,QAAQ,oBAC7B,IAAMua,SAAWva,QAAQ,gBACzB,IAAMwa,WAAaxa,QAAQ,kBAC3B,IAAMya,QAAUza,QAAQ,oBACxB,IAAM0a,cAAgB1a,QAAQ,qBAC9B,IAAM2a,gBAAkB3a,QAAQ,2BACxB4a,KAAqDnX,KAArDmX,KAAMxE,IAA+C3S,KAA/C2S,IAAKyE,MAA0CpX,KAA1CoX,MAAOC,IAAmCrX,KAAnCqX,IAAKC,IAA8BtX,KAA9BsX,IAAKpQ,GAAyBlH,KAAzBkH,GAAI/C,MAAqBnE,KAArBmE,MAAO0O,IAAc7S,KAAd6S,IAAK0E,KAASvX,KAATuX,KACpD,IAAMC,OAASjb,QAAQ,eACvB,IAAMkb,KAAOlb,QAAQ,aACrB,IAAMmb,SAAWnb,QAAQ,iBACzB,IAAM8T,QAAU9T,QAAQ,6BAC0BA,QAAQ,cAAlDob,sBAAAA,aAAcC,sBAAAA,aAAcC,mBAAAA,UACpC,IAAMC,QAAUvb,QAAQ,gBACxB,IAAM0K,SAAW1K,QAAQ,iBACzB,IAAMwb,gBAAkBxb,QAAQ,mBAChC,IAAMqO,QAAUrO,QAAQ,WACxB,IAAMyb,QAAUzb,QAAQ,8BACoBA,QAAQ,wBAA5C0b,gBAAAA,MAAOC,mBAAAA,SAAUC,mBAAAA,SAAUC,eAAAA,mBACgD7b,QAAQ,cAAnF8b,eAAAA,KAAMC,eAAAA,KAAM/H,eAAAA,KAAMC,eAAAA,KAAM+H,oBAAAA,UAAWC,uBAAAA,aAAcC,iBAAAA,OAAQC,iBAAAA,OAAQjI,gBAAAA,MAElE,IAAIkI,OAAA9b,QAAA8b,YAAA,EACJ,IAAIxP,OAAAtM,QAAAsM,YAAA,EACJ,IAAIyP,eAAA/b,QAAA+b,oBAAA,EAEJ,IAAIrS,MAAA1J,QAAA0J,WAAA,EACJ,IAAIF,OAAAxJ,QAAAwJ,YAAA,EACJ,IAAIV,aAAA9I,QAAA8I,aAAe,EACnB,IAAIkT,UAAAhc,QAAAgc,eAAA,EAEJ,IAAIC,WAAAjc,QAAAic,gBAAA,EACJ,IAAIC,YAAAlc,QAAAkc,iBAAA,EAEJ,IAAIvU,aAAA3H,QAAA2H,kBAAA,EACJ,IAAIC,cAAA5H,QAAA4H,mBAAA,EAGJ,IAAIyE,QAAArM,QAAAqM,QAAU8O,QAAQ5P,SAAS,CAAE6I,IAAK,IAAKzJ,KAAMwQ,QAAQgB,SAAUC,OAAQC,iBAClF,IAAIC,2BAA6BjQ,QAAQkQ,YACzC,IAAIC,wBAA0BnQ,QAAQoQ,SACtC,SAASJ,iBACP,GAAIhQ,QAAQkQ,cAAgBD,4BAA8BjQ,QAAQoQ,WAAaD,wBAAyB,CACtG5Y,SAASY,SAASkY,UAIf,IAAIC,OAAA3c,QAAA2c,OAAS,MACb,IAAIC,KAAA5c,QAAA4c,UAAA,EACJ,IAAIC,MAAA7c,QAAA6c,WAAA,EACJ,IAAIC,MAAA9c,QAAA8c,MAAQ,EACZ,IAAIC,MAAA/c,QAAA+c,MAAQ,EACZ,IAAI/R,QAAAhL,QAAAgL,QAAU,GAAKX,GAAK,IAExB,IAAI2S,eAAAhd,QAAAgd,eAAiBvB,OACrB,IAAIwB,SAAAjd,QAAAid,SAAWxB,OACtB,IAAIyB,MAAQzB,OACL,IAAI0B,OAAAnd,QAAAmd,OAAS1B,OACpB,IAAI2B,OAAS3B,OACb,IAAI4B,eAAiB5B,OACrB,IAAI6B,QAAU7B,OACd,IAAI8B,qBAAuB/B,OAC3B,IAAIgC,mBAAqB7J,OAElB,IAAI8J,cAAAzd,QAAAyd,cAAgB/J,KAAK,IAAM,IAAM,KAC5C,IAAIgK,aAAehK,KAAK,EAAG,EAAG,GACvB,IAAIiK,cAAA3d,QAAA2d,cAAgBjK,KAAK,IAAM,IAAM,KACrC,IAAIkK,aAAA5d,QAAA4d,aAAelK,MAAM,GAAI,GAAI,GAEjC,IAAImK,KAAA7d,QAAA6d,UAAA,EACJ,IAAIC,UAAA9d,QAAA8d,UAAY,KAChB,IAAMC,aAAA/d,QAAA+d,aAAepK,KAAK,EAAG,EAAG,EAAG,GAEnC,SAAS6E,kBAAkBwF,WAChC/D,SAASgD,SAAUe,WACnB7D,QAAQgD,OAAQH,eAAgBC,UAChCtB,aAAaiC,cACblC,UAAUgC,aAAcE,aAAcX,UAGjC,SAAS/R,OAAO+S,SACrBje,QA7BSgL,QA6BTA,QAAUiT,QAGL,SAASxF,YAAYjS,EAAGC,GAC7BzG,QAtDSic,WAsDTA,WAAazV,EACbxG,QAtDSkc,YAsDTA,YAAczV,EAGhB,IAAIyX,cAAgB,WAClB,IAAIC,GAAK3a,OAAO4a,UAAUC,UAC1B,IAAIC,OAASH,GAAGI,MAAM,UAAYJ,GAAGI,MAAM,WAC3C,IAAIC,OAASL,GAAGI,MAAM,WACtB,OAAOD,QAAUE,SAAWL,GAAGI,MAAM,UAJnB,GAQpB,IAAME,6BAA+B,IAC9B,IAAIC,eAAA1e,QAAA0e,eAAiBzU,cAAcc,IAAI,4BAA8B0T,6BACrE,SAAS/F,oBAAoBiG,OAClC1U,cAAc9E,IAAI,yBAA0BwZ,MAAQ/Q,UAAY6Q,8BAChEze,QAHS0e,eAGTA,eAAiBC,MAGnB,SAASC,aAAaC,EAAGC,KACvB,IAAIC,IAAMF,EAAEC,KAAOD,EAAEC,KAAOD,EAAEC,IAAM,GAAKD,EAAEC,IAAM,GAAKD,EAAEC,IAAM,GAAKD,EAAEC,IAAM,GAC3E,GAAIC,IAAM,EAAG,CACXA,IAAM,EAAIrE,KAAKqE,KACfF,EAAEC,MAAQC,IACVF,EAAEC,IAAM,IAAMC,IACdF,EAAEC,IAAM,IAAMC,KAIlB,IAAIC,SAAWvD,OACR,SAAS9C,eAAesG,WAE7BhF,SAASiD,MAAO+B,WAEhB9E,QAAQiD,OAAQH,SAAUgC,WAC1B9E,QAAQmD,QAASN,eAAgBI,QAIjCnD,SAAS+E,SAAUC,WACnBL,aAAaI,SAAU,GACvBJ,aAAaI,SAAU,GACvBJ,aAAaI,SAAU,GACvB7E,QAAQkD,eAAgBJ,SAAU+B,UAClC9E,WAAW8E,SAAU3B,gBACrBjD,cAAc4E,SAAUA,UACxBhF,aAAauD,qBAAsByB,UAE9B,IAAIE,aAAAlf,QAAAkf,aAAe,EACnB,SAAStG,oBACd,OAAOsG,aAGF,IAAInO,mBAAA/Q,QAAA+Q,mBAAqB,EACzB,SAAS8H,gBACd,OAAO9H,mBAGF,IAAIoO,gBAAAnf,QAAAmf,gBAAkB,EACtB,SAASrG,aACd,OAAOqG,gBAGF,IAAIC,OAAApf,QAAAof,OAAS,EAGpB,IAAIC,uBAAyB,EACtB,SAAStG,mBACd,OAAOsG,uBAGT,IAAIC,oBAAsB,KACnB,IAAIC,WAAAvf,QAAAuf,WAAa,KACjB,SAASvG,SAASwG,WACvB,GAAID,WAAY,CACdD,oBAAsBE,cACjB,CACLxf,QA5FO8d,UA4FPA,UAAY0B,WAIT,SAASvG,YAAYwG,YAC1B,GAAIF,WAAY,CACd,OAAOD,sBAAwBG,eAC1B,CACL,OAAO3B,YAAc2B,YAIzB,IAAIC,KAAO,IACX,IAAIC,iBAAmB,EACvB,IAAIC,iBAAmB,EACvB,IAAIC,cAAgB,EACpB,IAAIC,UAAY,IAEhB,IAAIC,gBAAkB,EAEf,IAAMC,kBAAAhgB,QAAAggB,kBAAoB,IAC1B,IAAI/T,WAAAjM,QAAAiM,WAAazI,OAAOyc,gBAAkB,CAC/CC,SAAU,CACRC,MAAO,EACPC,QAAS,IAAI7f,aAAayf,kBAAoB,IAEhDlU,QAAS,CACPK,IAAK,EACLD,KAAM,IAGV,IAAIgU,SAAWjU,WAAWiU,SAE1BtF,KAAKyF,UAAU,CACbC,KAAM,MACNC,UAAW,WACXC,WAAY,YACZC,OAAQ,CACNC,QAAS,SAAAC,MAAA,OAAO,IAAOjB,MAAMpU,QAAQ,IACrCsV,SAAU,SAAAC,MAAA,OAAMnB,KAAKpU,QAAQ,IAC7BwV,QAAS,SAAAC,MAAA,OAAMjB,UAAUxU,QAAQ,KAGnC9D,KAAM0Y,SACNc,eAAgB,GAChBC,OAAQ,CAERtN,KAAK,EAAG,KAAO,KAAO,GACtBA,KAAK,EAAG,KAAO,KAAO,IACtBuN,aAAcxH,QAGhB,IAAIyH,WAAa,KACjB,IAAIC,wBAA0B,MAC9B,IAAIC,WAAa,EAEjB,IAAIC,mBAAqB,GAClB,SAASpI,YAAYqI,IAC1BD,mBAAmBhc,KAAKic,IAG1B,IAAIC,UAAY,GACT,SAASrI,SAASsI,MAAOC,IAC9B/H,OAAOgI,aAAaD,KAApB,YAAA,YAAAE,QAAoBF,IAAI,YACxBF,UAAUlc,KAAK,CAAEmc,MAAAA,MAAOC,GAAAA,KAG1B,IAAIG,mBAAqB,GAEzB,SAASC,eACP,IAAK,IAAI1N,OAAOyN,mBAAoB,CAClC,IAAIE,KAAOF,mBAAmBzN,KAE9B,MAAO2N,KAAKtV,KAAKvM,OAAS6hB,KAAKjD,IAAK,CAClCiD,KAAKtV,KAAKlH,MAAMyc,UAElB,IAAKD,KAAKjD,IAAK,QACN+C,mBAAmBzN,SACrB,CACL2N,KAAKjD,IAAM,IAKjB,IAAMmD,yBAA2B,WAC/B,IAAIC,OAAS1e,OAAO0e,OACpB,IAAKhE,gBAAkBgE,OAAQ,CAC7B,OAAO,EAET,IAAMC,YAAc,CAKlBC,UAAW,IAAM,IAGjBC,UAAW,IAAM,IAEjBC,UAAW,IAAM,IAGjBC,UAAW,IAAM,IAIjBC,UAAW,IAAM,IAGjBC,UAAW,IAAM,IAEjBC,UAAW,IAAM,KAEnB,IAAItO,IAASqG,IAAIyH,OAAOS,WAAYT,OAAOU,aAAvC,IAAuDpI,IAAI0H,OAAOS,WAAYT,OAAOU,aACzF,OAAOT,YAAY/N,MAAQ,EA9BI,GAgCjC,SAASyO,kBAAkBtM,OAAQC,QAEjC,GAAIyL,0BAA4B3G,SAAS/E,OAASC,OAAQyL,yBAA0B,MAAQ,CAG1F,OAAO,IAAMze,OAAOiG,kBAAoB,GAE1C,OAAO,EAGT,IAAIqZ,uBAAA,EACJ,IAAIC,wBAAA,EACJ,IAAIC,sBAAA,EACJ,IAAIC,mBAAA,EACJ,IAAIC,uBAAyB,MAC7B,IAAIC,gBAAkB,CAAC,EAAG,EAAG,EAAG,GAChC,IAAIC,qBAAuB,CAAC,EAAG,EAAG,EAAG,GACrC,SAASC,cAGP,IAAIC,GAAK9f,OAAO+f,gBAAkB,GAClC,IAAIC,YAAchgB,OAAOiG,kBAAoB,EAC7C,IAAI8M,OAAS+M,GAAG5Z,OAASlG,OAAOigB,WAChC,IAAIjN,OAAS8M,GAAG9Z,QAAUhG,OAAOkgB,YACjC,GAAIlN,SAAWwM,iBAAkB,CAE/BA,iBAAmBxM,OACnB5S,SAAS+f,KAAK5R,MAAMvI,OAAYgN,OAAhC,KAEF,IAAIoN,UAAYtc,MAAMwU,OAAO+H,YAAcL,cAAgB,EAC3D,IAAIM,WAAaxc,MAAMwU,OAAOiI,aAAeP,cAAgB,EAE7D,GAAI5J,KAAK1M,SAAS,MAAQ,EAAG,CAC3B,GAAI+V,cAAe,CACjB,IAAIe,SAAWf,cAAcgB,YAC7B,IAAIC,UAAYjB,cAAckB,aAC9B,GAAIH,UAAYE,UAAW,CACzBtQ,MAAMuP,gBAAiBF,cAAcmB,WAAaZ,YAAaI,WAAaI,SAAWf,cAAcmB,YAAcZ,YAAa/I,IAAIwI,cAAcoB,UAAYb,YAAaX,kBAAkBtM,OAAQC,SAGrM0M,uBAAyB,EAAIY,YAAcI,UAAYjB,cAAcoB,WAAab,mBAGjF,CACL5P,MAAMuP,gBAAiBS,UAAYxI,MAAMxB,KAAK1M,SAAS,GAAI,EAAG,IAAM,IAAK0W,UAAYxI,MAAMxB,KAAK1M,SAAS,GAAI,EAAG,IAAM,IAAK4W,WAAa1I,MAAMxB,KAAK1M,SAAS,GAAI,EAAG,IAAM,IAAK4W,WAAa1I,MAAMxB,KAAK1M,SAAS,GAAI,EAAG,IAAM,KAE9N,IAAK2O,OAAOsH,gBAAiBC,sBAAuB,CAClDxH,OAAOwH,qBAAsBD,iBAC7BtV,SAASzI,mBAAmB+d,gBAAgB,GAAIA,gBAAgB,GAAIA,gBAAgB,GAAIA,gBAAgB,IACxG9B,WAAa5G,IAAI4G,WAAY,GAG/B,GAAIuC,YAAcd,mBAAqBgB,aAAef,mBAAoB,CACxEvf,OAAO8gB,YAAcd,YACrBV,kBAAoBhH,OAAOpS,MAAQka,WAAa,EAChDb,mBAAqBjH,OAAOtS,OAASsa,YAAc,EAEnDzC,WAAa,GAEf,GAAInD,gBAAkB1a,OAAO+f,gBAAkBlC,YAAa,CAG1D7d,OAAO+gB,OAAO,EAAG,IAId,IAAI5a,SAAA3J,QAAA2J,SAAWgK,KAAK,EAAG,EAAG,EAAG,GAC7B,SAAS5J,YAAYya,MAC1B5I,OAAOjS,SAAU6a,MACjBhQ,GAAG7K,SAAS6a,KAAK,GAAIA,KAAK,GAAIA,KAAK,GAAIA,KAAK,IAG9C,IAAIC,cAAgB,EACb,SAASrL,oBAAoB5S,EAAGC,GACrC,IAAI2N,IAAM5N,EAAOA,EAAP,IAAYC,EAAM,SAC5B,IAAIsb,KAAOF,mBAAmBzN,KAC9B,IAAK2N,KAAM,CACTA,KAAOF,mBAAmBzN,KAAO,CAAE3H,KAAM,GAAIqS,IAAK,GAEpD,GAAIiD,KAAKjD,KAAOiD,KAAKtV,KAAKvM,OAAQ,CAChC,IAAIwkB,KAAMta,SAASua,iBAAT,QAAkCvQ,IAAlC,OAA2CqQ,eACrD1C,KAAKtV,KAAKnH,KAAKof,MAEjB,IAAIvY,IAAM4V,KAAKtV,KAAKsV,KAAKjD,OACzB,OAAO3S,IAGF,SAASuL,mBAAmBvL,IAAK3F,EAAGC,EAAGme,iBAAkBC,SAC9D,IAAKre,GAAKmB,aAAc,CACtBnB,EAAImB,aACJlB,EAAImB,cAEN,IAAKuE,IAAK,CACRA,IAAMiN,oBAAoB5S,EAAGC,GAE/B,GAAID,EAAG,CACL2F,IAAI2Y,aAAanb,SAAS,GAAIA,SAAS,GAAInD,EAAGC,OACzC,CACL0F,IAAI2Y,aAAa,EAAG,EAAGpb,MAAOF,QAEhC2C,IAAI6K,gBAAgB,CAClBC,WAAY2N,iBAAmBpQ,GAAG0C,OAAS1C,GAAGuQ,QAC9C5N,WAAYyN,iBAAmBpQ,GAAG0C,OAAS1C,GAAGuQ,QAC9C3N,OAAQyN,QAAUrQ,GAAGwQ,OAASxQ,GAAG6C,cACjCC,OAAQuN,QAAUrQ,GAAGwQ,OAASxQ,GAAG6C,gBAEnC,OAAOlL,IAGT,SAAS8Y,eACP,IAAIC,QAAUrK,SAASqK,QACvB,GAAI7Y,QAAQ8Y,UAAY5F,WAAY,CAKlC2F,QAAU,EAEZ,GAAIA,QAAS,CAEXE,WAAWC,KAAM/d,MAAM,IAAO4d,cACzB,CAELI,sBAAsBD,OAI1B,IAAIE,uBAAA,EACG,IAAIC,kBAAAxlB,QAAAwlB,uBAAA,EAEJ,SAASnM,gBAAgBoM,UAAWC,UAAWC,WAAYC,MAAOC,MACvExL,gBAAgB2C,eAAgByI,UAAWC,UAAYC,WAAYC,MAAOC,MAC1EN,kBAAoBvI,eAAe,IACnCpJ,MAAM4J,mBAAoB,GAAKkI,UAAY1I,eAAe,IAC1D,GAAK2I,WAAa3I,eAAe,MAC/B,EAAIA,eAAe,IAAMA,eAAe,KACxC,EAAIA,eAAe,IAAMA,eAAe,IAIrC,SAAS1D,mBACdtZ,QAbSwlB,kBAaTA,kBAAoB,KACpBhR,GAAGsR,UAAUtR,GAAGuR,UAAWvR,GAAGwR,qBAC9BxR,GAAGyR,OAAOzR,GAAG0R,OACb1R,GAAGyR,OAAOzR,GAAG2R,YACb3R,GAAG4R,UAAU,MAEb/M,gBAAgByD,MAAOpT,MAAOF,OAAQqT,MAAOD,MAE7CpI,GAAG7K,SAASA,SAAS,GAAIA,SAAS,GAAIA,SAAS,GAAIA,SAAS,IAC5D6K,GAAGvP,MAAMuP,GAAGuD,iBAAmBvD,GAAG6R,kBAClC7R,GAAGyR,OAAOzR,GAAG8R,WAGR,SAAS/M,gBAAgBgN,KAAMC,MACpC,IAAKD,KAAM,CACTvJ,eAAe,IAAMuI,kBACrB,OAGF,IAAIpmB,EAAI,IAAOonB,MAAQC,MAAQA,KAAOD,QACtCpnB,EAAIsb,IAAItb,EAAG,MACX6d,eAAe,IAAMuI,kBAAoBpmB,EAG3C,SAASsnB,WAAWC,YAElB,IAAIjkB,EAAI,GACR,IAAK,IAAI7C,KAAK6C,EAAG,CACfkkB,QAAQD,WAAa,MAAQ,SAA7B,uCAA6E9mB,EAA7E,qCACA,IAAIgnB,QAAUnkB,EAAE7C,UACTinB,MAAMpU,UAAU7S,GAGvBgM,OAAOkb,eAAeD,MAAMpU,UAAW7S,EAAG,CAAE6P,MAAOmX,QAASG,WAAY,QAE1E,IAAK,IAAIC,MAAKvkB,EAAG,CAEfkX,OAAO,MAAP,0CAAwDqN,KAIrD,IAAMC,MAAAjnB,QAAAinB,MAAQzjB,OAAO0jB,YAAc1jB,OAAO0jB,YAAYC,IAAIxQ,KAAKnT,OAAO0jB,aAAeE,KAAKD,IAAIxQ,KAAKyQ,MAE1G,IAAIC,UAAY,EAChB,SAAShC,KAAKiC,WAMZtnB,QAjUSof,OAiUTA,OAAS6H,QAEThC,eACA,IAAIkC,IAAM7f,MAAM8X,QAChB,IAAKiI,UAAW,CACdA,UAAYF,IAEd9H,uBAAyB8H,IAAME,UAC/B,IAAIE,GAAK/M,IAAIC,IAAI4E,uBAAwB,GAAI,KAC7Crf,QA/USmf,gBA+UTA,gBAAkBoI,GAClBF,UAAYF,IACZnnB,QA3VSkf,aA2VTA,cAAgBqI,GAChBvnB,QAvVS+Q,mBAuVPA,oBAAF,EAEA0V,WAAW,OAIXvG,SAASE,QAAQF,SAASC,MAAQH,kBAAoB,EAAI,GAAKX,uBAC/Da,SAASC,QACTD,SAASE,QAAQF,SAASC,MAAQH,kBAAoB,EAAI,GAAK,IAE7DJ,iBACFG,iBAAmBF,cAEnB,GAAIsH,IAAMxH,iBAAmB,IAAM,CACjC,IAAKA,iBAAkB,CACrBA,iBAAmBwH,QACd,CACLzH,MAAQyH,IAAMxH,kBAAoBC,iBAClCE,UAAYC,gBAAkBH,iBAC9BG,gBAAkB,EAGlBH,iBAAmB,EACnBD,iBAAmBwH,KAIvB,GAAIvjB,SAAS4jB,QAAU5jB,SAAS6jB,aAAc,CAC5C3F,eACAjC,cAAgB,EAEhB,OAGF7f,QA7GSwlB,kBA6GTA,kBAAoB,MACpBnC,cACArjB,QA3eS0J,MA2eTA,MAAQoS,OAAOpS,MACf1J,QA3eSwJ,OA2eTA,OAASsS,OAAOtS,OAEhB,GAAImT,OAAQ,CAGV,GAAIjT,MAAQF,OAAQ,CAClBxJ,QA1dK8c,MA0dLA,MAAQ9R,QACR,IAAI0c,KAAOhe,MAAQF,OAASwM,IAAI8G,MAAQ,GAAKhH,IAAIgH,MAAQ,GACzD9c,QA3dK+c,MA2dLA,MAAQ,EAAIzC,KAAKoN,KAAOhN,KAAKgN,KAAOA,KAAO,QACtC,CACL1nB,QA7dK+c,MA6dLA,MAAQ/R,QACR,IAAI2c,MAAOne,OAASE,MAAQsM,IAAI+G,MAAQ,GAAKjH,IAAIiH,MAAQ,GACzD/c,QAheK8c,MAgeLA,MAAQ,EAAIxC,KAAKqN,MAAOjN,KAAKiN,MAAOA,MAAO,KAG/Cvd,SAASuM,KAAK,EAAGvM,SAASA,SAASwd,OAEnC/Z,SAAS1G,eACT0G,SAASnI,eAAeuW,WAAYC,aAEpClB,UAAUuM,IACVnY,MAAMyY,YACN9Z,QAAQ+Z,OAAOP,IAEf,GAAIlG,WAAY,GACZA,WACF,IAAI0G,GAAK,GACTla,SAAS7G,aAAa+gB,GAAI,CAAC,EAAG,IAC9B,IAAIC,GAAK,GACTna,SAAS7G,aAAaghB,GAAI,CAAC/L,WAAa,EAAGC,YAAc,IACzD,IAAI+L,UAAY,CAACF,GAAG,GAAIA,GAAG,GAAIC,GAAG,GAAIA,GAAG,IACzC,IAAIE,YAAcD,UAAU,GAAKA,UAAU,GAE3C,IAAIE,UAAY3N,IAAI,IAAKC,IAAI,EAAGF,MAAM2N,YAAc,IAAM,MAC1D,IAAIE,gBAAkBxkB,SAASC,eAAe,cAC9C,GAAIukB,gBAAiB,CACnBA,gBAAgBrW,MAAM,aAAkBoW,UAAxC,MAIJ,GAAIhH,WAAY,CAEdpT,QAAQsa,SAASxa,SAAS/H,SAAU+H,SAAS9H,SAAU8H,SAAS7H,SAAU,EAAGoI,EAAEka,QAASvK,cACxFhQ,QAAQsa,SAASxa,SAAS/H,SAAUoW,YAAarO,SAAS7H,SAAU6H,SAAS5H,SAAUmI,EAAEka,QAASvK,cAClGhQ,QAAQsa,SAASxa,SAAS/H,SAAU,EAAG,EAAGoW,YAAa9N,EAAEka,QAASvK,cAClEhQ,QAAQsa,SAASpM,WAAY,EAAGpO,SAAS7H,SAAUkW,YAAa9N,EAAEka,QAASvK,cAG7E,GAAIlD,SAAS0N,aAAc,CACzB3N,KAAK9D,OAGP,IAAK,IAAItJ,GAAK,EAAGA,GAAK8T,mBAAmBphB,SAAUsN,GAAI,CACrD8T,mBAAmB9T,IAAI+Z,IAEzB,GAAIzJ,UAAW,CACbA,UAAUyJ,IAGZxL,eAAesJ,KAAKkC,IACpBrM,gBAAgBsN,OAAOjB,IAEvB,GAAI/B,kBAAmB,CACrBhR,GAAGiU,QAAQjU,GAAG8R,eACT,CAEL9R,GAAGsR,UAAUtR,GAAGuR,UAAWvR,GAAGwR,qBAC9BxR,GAAGyR,OAAOzR,GAAG0R,OACb1R,GAAGiU,QAAQjU,GAAG2R,YACd3R,GAAG4R,UAAU,OACb5R,GAAG7K,SAASA,SAAS,GAAIA,SAAS,GAAIA,SAAS,GAAIA,SAAS,IAG5D6K,GAAGvP,MAAMuP,GAAGuD,kBAGdkD,QAAQnE,OAER/I,QAAQ2a,WAER,GAAI/gB,aAAc,CAChB,IAAIoP,OAASW,qBACb,IAAIG,YAAc,CAAC,EAAG,EAAG,EAAG,GAC5B,IAAID,eAAiB,CAAC/J,SAAS9F,gBAAiB8F,SAAS5F,uBAAwB4F,SAAShG,kBAAmBgG,SAAS/F,mBACtH,GAAIsZ,wBAAyB,CAC3BvH,QAAQxG,kBAAkB,CAAE0D,OAAAA,OAAQa,eAAAA,eAAgBC,YAAAA,kBAC/C,CACL,GAAIA,YAAa,CACfrD,GAAGsD,WAAWD,YAAY,GAAIA,YAAY,GAAIA,YAAY,GAAIA,YAAY,IAC1ErD,GAAGvP,MAAMuP,GAAGuD,kBAEdhO,YAAY6N,gBAEZiC,QAAQzG,UAAU,CAAE2D,OAAAA,UAIxB3H,MAAMsZ,WACN5G,eAEA,IAAK,IAAI6G,IAAKnH,UAAUthB,OAAS,EAAGyoB,KAAM,IAAKA,IAAI,CACjD,MAAQnH,UAAUmH,KAAIlH,MAAO,CAC3BD,UAAUmH,KAAIjH,KACdnG,KAAKiG,UAAWmH,MAIpB9I,cAAgBoH,QAAUE,IAC1BjH,SAASE,QAAQF,SAASC,MAAQH,kBAAoB,EAAI,GAAKH,cAGjE,IAAI+I,qBAAuB,GAC3B,IAAIC,yBAA2B,GACxB,SAASrP,sBAAsBpF,IAAK3E,OACzC,GAAIA,MAAO,CACTmZ,qBAAqBxU,KAAO0U,OAAOxb,OAAOmC,YACrC,QACEmZ,qBAAqBxU,KAE9ByU,yBAAA,IAA+Bjd,OAAOD,KAAKid,sBAAsB5c,IAAI,SAAA+c,GAAA,OAAQA,EAAR,IAAaH,qBAAqBG,KAAMpkB,KAAK,KAEpH6U,sBAAsB,MAAO,iBAC7B,IAAIwP,gBAAkB,EACtB,IAAIC,UAAY,EAEhB,IAAIC,gBAAkB,iCACtB,SAASC,gBAAgBhlB,IAAKJ,KAAMC,KAAMC,OACtCglB,UACF,IAAI9B,IAAMC,KAAKD,MACf,IAAII,GAAKJ,IAAM6B,gBACfA,gBAAkB7B,IAClB,GAAII,GAAK,GAAK,IAAM,CAKlB,OAAO,MAET,GAAIpjB,IAAIoa,MAAM2K,iBAAkB,CAC9B,OAAO,MAGT,IAAIE,IAAMjO,QAAQkO,aAClB,IAAIvK,IAAMsK,IAAIE,YAAY,KAC1B,GAAIxK,OAAS,GAAKA,IAAM,EAAG,CAEzBsK,IAAMA,IAAI3kB,MAAM,EAAGqa,IAAM,GAE3BsK,KAAO,oBAAoBH,UAApB,SAAsCH,OAAO/kB,MAA7C,SAA2DC,KAA3D,QAAuEC,IAAvE,QAAkF6kB,OAAOtkB,SAAS+kB,OAAlG,QAAoHT,OAAO3kB,KAAO0kB,0BACzI,IAAIW,IAAM,IAAIC,eACdD,IAAIE,KAAK,OAAQN,IAAK,MACtBI,IAAIG,KAAK,MACT,OAAO,KAGF,SAASviB,QAAQ8G,QACtBuY,WAAW,MAEXzmB,QA9oBS8b,OA8oBTA,OAASlY,SAASC,eAAe,UACjCof,cAAgBrf,SAASC,eAAe,YAExC,GAAIqK,OAAO0b,eAAiB,MAAO,CACjCpmB,OAAOsB,kBAAoBqkB,gBAG7BjG,uBAAyBhV,OAAOgV,wBAA0B,MAG1D1f,OAAOgO,iBAAiB,SAAU6R,YAAa,OAC/CA,cAEA,IAAIwG,UAAY3b,OAAO4b,QAAU5b,OAAO4b,SAAW,MACnD9pB,QArpBSgc,UAqpBTA,UAAY9N,OAAO8N,YAAc6N,WAAa3b,OAAO8N,YAAc,MACnE,IAAI+N,gBAAkB7b,OAAO8b,KAAO,mBAAqB,UACzD,IAAIC,cAAgB,CAAC,SAAU,QAAS,sBACxC,IAAIC,aAAe7d,QAAQoQ,SAC3B,IAAIhP,aAAexD,cAAcyD,QAAQ,kBAEzC,GAAID,cAAgBA,aAAa0Q,KAAOC,UAAUC,WAAa5Q,aAAa0c,GAAK/C,KAAKD,MAAQ,EAAI,GAAK,GAAK,GAAK,IAAM,CACrHR,QAAQyD,IAAI,uEACZF,aAAe,KAEjB,GAAIxQ,QAAUrN,QAAQkQ,YAAa,CACjC,IAAI8N,GAAKpgB,cAAcyD,QAAQ,YAAa,GAAK,EACjDzD,cAAc0D,QAAQ,YAAa0c,IACnC,GAAIA,GAAK,EAAG,CACVH,aAAe,MAGnB,GAAIA,aAAc,CAChBD,cAAcK,OAAO,EAAG,GAE1B,IAAIC,aAAe,CAAC,CAAEvO,UAAAA,UAAW+N,gBAAAA,iBAAmB,CAAEA,gBAAAA,iBAAmB,IACzE,IAAIS,KAAO,MACXxqB,QAjrBSsM,OAirBTA,OAAS,MACT,IAAK,IAAI/M,EAAI,GAAIirB,MAAQjrB,EAAI0qB,cAAc/pB,OAAQX,GAAK,EAAG,CACzD,IAAK,IAAIkrB,GAAK,GAAID,MAAQC,GAAKF,aAAarqB,SAAUuqB,GAAI,CACxD,IACEjnB,OAAOgR,GAAKsH,OAAO4O,WAAWT,cAAc1qB,GAAIgrB,aAAaE,KAC7D,GAAIjnB,OAAOgR,GAAI,CACb,GAAIyV,cAAc1qB,KAAO,SAAU,CACjCS,QAxrBDsM,OAwrBCA,OAAS,KAEXke,KAAO,KACP,OAEF,MAAOrrB,MAKb,IAAKqrB,KAAM,CAEThnB,OAAOmnB,MAAM,+EACb/mB,SAASC,eAAe,WAAWkO,MAAM6Y,WAAa,SACtDhnB,SAASC,eAAe,WAAWkO,MAAM6Y,WAAa,UACtD,OAAO,MAETjE,QAAQyD,IAAR,eAA0B9d,OAAS,EAAI,IAEvCqN,OAAOnF,IACPsH,OAAOpM,QACP1P,QA1sBS0J,MA0sBTA,MAAQoS,OAAOpS,MACf1J,QA1sBSwJ,OA0sBTA,OAASsS,OAAOtS,OAChBxJ,QAvsBSic,WAusBTA,WAAa/N,OAAO+N,YAAc,KAClCjc,QAvsBSkc,YAusBTA,YAAchO,OAAOgO,aAAe,IACpClc,QAzrBS2c,OAyrBTA,OAASzO,OAAOyO,QAAU,MAC1B3c,QAxrBS6c,MAwrBTA,MAAQ3O,OAAO0X,OAAS,GACxB5lB,QA1rBS4c,KA0rBTA,KAAO1O,OAAO2X,MAAQ,IACtB,GAAI3X,OAAO4b,SAAW,SAAU,CAC9B9pB,QA1sBO2H,aA0sBPA,aAAesU,WACfjc,QA1sBO4H,cA0sBPA,cAAgBsU,YAChB,GAAIhO,OAAO2c,qBAAsB,CAC/BzJ,wBAA0B,UAEvB,CACLphB,QAhtBO2H,aAgtBPA,aAAeiG,UACf5N,QAhtBO4H,cAgtBPA,cAAgBgG,UAElB5N,QAztBS8I,aAytBTA,aAAeoF,OAAOpF,cAAgB,EAEtC0L,GAAGsW,UAAUtW,GAAGuW,QAEhB,IAAKpO,OAAQ,CACXnI,GAAGiU,QAAQjU,GAAG8R,WAEhB9R,GAAGwW,SAASxW,GAAGyW,MACfzW,GAAGsD,WAAW,EAAG,GAAK,GAAK,GAC3BtD,GAAG0W,YAAY1W,GAAG2W,iBAAkB,GAEpC/gB,SAAShD,UACT8E,KAAK9E,UACLoM,QAAQpM,QAAQ,CACdqW,cAAAA,cACAC,aAAAA,aACA0N,QAASzN,cACTT,MAAOA,MACPE,OAAQA,OACRD,OAAQA,OACRkO,IAAK/N,QACLgO,aAAc/N,qBACdgO,KAAMtO,SACNuO,WAAYxO,eACZQ,mBAAAA,qBAEF3P,SAASzG,UACT6T,QAAQ7T,UACRgI,MAAMhI,QAAQ0U,OAAQ5N,QACtB,GAAIyO,OAAQ,CACVhC,OAAOvT,UAITpH,QA/vBS+b,eA+vBTA,eAAiBrc,QAAQ,kBAAkBW,SAE3C,GAAIwpB,UAAW,CACbzf,SAASqhB,eAAejX,GAAGuQ,QAASvQ,GAAGuQ,aAClC,CACL3a,SAASqhB,eAAejX,GAAGkX,qBAAsBlX,GAAG0C,QAGtD,IAAMyU,kBAAoBjsB,QAAQ,8BAClC,IAAMksB,kBAAoBlsB,QAAQ,8BAClC,GAAIwO,OAAO2P,KAAM,CACf7d,QA7tBO6d,KA6tBPA,KAAO/D,UAAUzZ,OAAO6N,OAAO2P,KAAKgO,KAAM3d,OAAO2P,KAAKiO,cACjD,GAAI5d,OAAO4b,SAAW,SAAU,CACrC9pB,QA/tBO6d,KA+tBPA,KAAO/D,UAAUzZ,OAAOurB,kBAAmB,uBACtC,GAAI/B,UAAW,CACpB7pB,QAjuBO6d,KAiuBPA,KAAO/D,UAAUzZ,OAAOsrB,kBAAmB,sBACtC,CACL3rB,QAnuBO6d,KAmuBPA,KAAO/D,UAAUzZ,OAAO0Z,sBAAuB,oBAEjD7L,OAAO2P,KAAOA,KACd9P,QAAQ3G,QAAQ8G,QAEhB6M,aAAa7M,OAAO6d,OACpBhe,QAAQie,WAAW3Q,SAASnN,OAAO+d,WAAa,GAAI,CAClDC,aAAc,eACdC,SAAU,cAGZte,SAASnI,eAAeuW,WAAYC,aAEpC,GAAIhO,OAAOke,MAAO,CAChBpT,SAAS9K,OAAOke,OAElB,GAAIle,OAAOiT,aAAevT,UAAW,CACnCuT,WAAajT,OAAOiT,WAEtB,GAAIjT,OAAOme,WAAaze,UAAW,CACjCiN,SAASwR,SAAWne,OAAOme,SAG7BpH,eACA,OAAO,KAGF,SAASxL,eACd,OAAOrP,SAASkiB,WAAaxR,eAAiBH,OAAO2R,WAGvD,SAASC,UACP,IAAID,WAAa7S,eACjB,IAAI+S,kBAAoB5oB,SAASC,eAAe,gBAChD,GAAI2oB,kBAAmB,CACrBA,kBAAkBznB,UAAlB,YAA0CunB,WAA1C,OAEF,IAAKA,WAAY,CACftsB,QAjrBOuf,WAirBPA,WAAa,MACbvf,QAzwBO8d,UAywBPA,UAAYwB,oBAEZnG,SAAS,EAAG,WACV,IAAIsT,aAAe7oB,SAASC,eAAe,WAC3C,GAAI4oB,aAAc,CAChBA,aAAa1a,MAAM6Y,WAAa,aAKxC5qB,QAnxBW8d,UAmxBXA,UAAYyO,QAEZ/oB,OAAOkpB,YAAc1sB,65BC7uBL2sB,sBAAAA,8BAIAC,sBAAAA,8BASA7a,MAAAA,cAgBA8a,aAAAA,qBAWAC,WAAAA,mBAyiBAzsB,OAAAA,OA5sBhB,IAAMsZ,OAASja,QAAQ,UACvB,IAAMmO,SAAWnO,QAAQ,qBAEjB6a,MAAsBpX,KAAtBoX,MAAOE,IAAetX,KAAfsX,IAAKnT,MAAUnE,KAAVmE,MACpB,IAAMkM,QAAU9T,QAAQ,gBACxB,IAAMub,QAAUvb,QAAQ,gBACxB,IAAM0K,SAAW1K,QAAQ,8BACPA,QAAQ,wBAAlB0b,eAAAA,oBAC2B1b,QAAQ,cAAnCiU,eAAAA,KAAMoZ,kBAAAA,QAASC,kBAAAA,QAoChB,IAAMC,WAAAjtB,QAAAitB,WAAa,CACxBC,OAAQ,EACRC,SAAU,GAGL,IAAMC,MAAAptB,QAAAotB,MAAQ,CACnBC,MAAO,EACPC,QAAS,EACTC,OAAQ,EACRC,MAAO,EAEPC,KAAM,GAAK,EACXC,QAAS,GAAK,EACdC,QAAS,GAAK,EACdC,MAAO,GAAK,EAEZC,KAAM,GAAK,EACXC,MAAO,GAAK,EAEZC,WAAY,EAAI,GAAK,EACrBC,SAAU,EAAI,GAAK,EACnBC,YAAa,EAAI,GAAK,EAAI,GAAK,GAwCjC,SAASC,gBACPvhB,KAAKwhB,WAAaxa,KAAK,EAAG,EAAG,EAAG,GAElCua,cAAczb,UAAU2b,cAAgB,EACxCF,cAAczb,UAAU4b,cAAgB,EACxCH,cAAczb,UAAU6b,WAAa,EACrCJ,cAAczb,UAAU8b,WAAa,EACrCL,cAAczb,UAAU+b,WAAa,EACrCN,cAAczb,UAAUgc,WAAa,EACrCP,cAAczb,UAAUic,WAAa,EACrCR,cAAczb,UAAUkc,MAAQ,WAChCT,cAAczb,UAAUmc,QAAU,EAClCV,cAAczb,UAAUoc,QAAU,EAClCX,cAAczb,UAAUqc,QAAU,EAClCZ,cAAczb,UAAUsc,WAAa9B,WAAWC,OAEzC,IAAM8B,aAAAhvB,QAAAgvB,aAAe,GAErB,SAASrC,sBAAsB1hB,GACpC,OAAQA,EAAE,GAAK,IAAM,IAAM,IAAMA,EAAE,GAAK,IAAM,IAAM,IAAMA,EAAE,GAAK,IAAM,IAAM,GAAKA,EAAE,GAAK,IAAM,GAG1F,SAAS2hB,sBAAsB3hB,EAAGxL,GACvCwL,EAAE,IAAMxL,GAAK,GAAK,KAAQ,IAC1BwL,EAAE,IAAMxL,GAAK,GAAK,KAAQ,IAC1BwL,EAAE,IAAMxL,GAAK,EAAI,KAAQ,IACzBwL,EAAE,IAAMxL,EAAI,KAAQ,IAGf,IAAMwvB,wBAAAjvB,QAAAivB,wBAA0B,IAAIf,cAEpC,SAASnc,MAAMmd,WAAYC,QAChC,IAAIC,IAAM,IAAIlB,cAD0B,IAElCC,WAAeiB,IAAfjB,WACN,GAAIe,WAAY,CACd,IAAK,IAAI1vB,KAAK0vB,WAAY,CACxBE,IAAI5vB,GAAK0vB,WAAW1vB,IAGxB,IAAK,IAAI6vB,MAAKF,OAAQ,CACpBC,IAAIC,IAAKF,OAAOE,IAElBD,IAAIjB,WAAaA,WACjBvB,sBAAsBwC,IAAIjB,WAAYiB,IAAIT,OAC1C,OAAOS,IAGF,SAASvC,aAAaqC,WAAYP,OACvC,OAAO5c,MAAMmd,WAAY,CACvBP,MAAAA,QAIJ,SAASW,WAAWX,MAAOY,OACzBA,MAAQnU,MAAM9T,OAAOqnB,MAAQ,KAAQY,OAAQ,EAAG,KAChD,OAAOZ,MAAQ,WAAaY,MAGvB,SAASzC,WAAWoC,WAAYK,OACrC,OAAOxd,MAAMmd,WAAY,CACvBP,MAAOW,YAAYJ,YAAcD,yBAAyBN,MAAOY,OACjElB,cAAeiB,YAAYJ,YAAcD,yBAAyBZ,cAAekB,OACjFb,WAAYY,YAAYJ,YAAcD,yBAAyBP,WAAYa,SAI/E,IAAIC,YAAc,KAClB,IAAIC,kBAAoB,MACxB,IAAIC,WAAa,KAEjB,SAASC,4BACP,GAAIH,YAAa,CACf,OAGFA,YAAc,CACZI,OAAQjc,OACRkc,aAAclc,OACdmc,UAAWnc,OACXoc,WAAYpc,OACZqc,KAAM,MAER,IAAKN,WAAY,CACfA,WAAa/b,QAIjB,SAASsc,cAAcC,MAAOzgB,OAC5B,IAAI0gB,IAAMX,YAAYU,OAEtB,IAAKT,kBAAmB,CACtB,GAAIU,IAAI,KAAO1gB,MAAM,IAAM0gB,IAAI,KAAO1gB,MAAM,IAAM0gB,IAAI,KAAO1gB,MAAM,IAAM0gB,IAAI,KAAO1gB,MAAM,GAAI,CAE5F+f,YAAc,CACZI,OAAQ7C,QAAQyC,YAAYI,QAC5BC,aAAc9C,QAAQyC,YAAYK,cAClCC,UAAW/C,QAAQyC,YAAYM,WAC/BC,WAAYhD,QAAQyC,YAAYO,aAElCN,kBAAoB,KACpBU,IAAMX,YAAYU,WACb,CAEL,QAGJ,GAAIT,kBAAmB,CAErBU,IAAI,GAAK1gB,MAAM,GACf0gB,IAAI,GAAK1gB,MAAM,GACf0gB,IAAI,GAAK1gB,MAAM,GACf0gB,IAAI,GAAK1gB,MAAM,IAKnB,SAAS2gB,gBACPX,kBAAoB,MACpB,OAAOD,YAGT,SAASa,SAASC,UAAWC,cAC3B5W,OAAO2W,UAAUnI,YAAc,GAE/Bxb,KAAKmf,QAAU1hB,SAASomB,KAAK,CAC3BpH,IAAA,OAAYmH,aAAZ,OACAtZ,WAAYqZ,UAAUG,SAAWjc,GAAGuQ,QAAUvQ,GAAG0C,OACjDC,WAAYmZ,UAAUG,SAAWjc,GAAGuQ,QAAUvQ,GAAG0C,OACjDE,OAAQ5C,GAAG6C,cACXC,OAAQ9C,GAAG6C,gBAEb1K,KAAKvC,SAAW,CAACuC,KAAKmf,SAEtBnf,KAAK2jB,UAAYA,UACjB3jB,KAAK4H,OAASya,aAAa0B,QAC3B/jB,KAAKgkB,MAAQL,UAAUM,OACvBjkB,KAAKkkB,MAAQP,UAAUQ,OAGvB,IAAK,IAAItjB,GAAK,EAAGA,GAAK8iB,UAAUS,WAAW7wB,SAAUsN,GAAI,CACvD,IAAIwjB,UAAYV,UAAUS,WAAWvjB,IACrCwjB,UAAU9a,MAAQ,GAAK8a,UAAUC,IAAM,GAIzCtkB,KAAKokB,WAAa,GAClB,IAAK,IAAIpI,IAAK,EAAGA,IAAK2H,UAAUS,WAAW7wB,SAAUyoB,IAAI,CACvD,IAAIuI,WAAYZ,UAAUS,WAAWpI,KACrChc,KAAKokB,WAAWT,UAAUS,WAAWpI,KAAIlpB,GAAKyxB,WAC9CA,WAAUC,KAAOD,WAAUC,MAAQ,EACnCD,WAAUE,MAAQF,WAAUE,OAAS,EAEvCzkB,KAAK0kB,sBAAwB1kB,KAAK2kB,aAAa,OAC/C,IAAK3kB,KAAK0kB,sBAAuB,CAC/B1kB,KAAK0kB,sBAAwB1kB,KAAK2kB,aAAa,IAGjD3kB,KAAK4kB,cAAgB,IAAIrD,cACzBvhB,KAAK6kB,cAAgB,IAAItD,cAEzByB,4BAMFU,SAAS5d,UAAUgf,eAAiB,SAAU1f,MAAO3I,EAAGC,EAAG8E,EAAG6D,KAAM2c,MAAOlgB,MACzE,OAAO9B,KAAK+kB,UAAU7E,aAAa9a,MAAO4c,OAAQvlB,EAAGC,EAAG8E,EAAG6D,KAAMvD,OAEnE4hB,SAAS5d,UAAUif,UAAY,SAAU3f,MAAO3I,EAAGC,EAAG8E,EAAG6D,KAAMvD,MAC7D,OAAO9B,KAAKglB,WAAW5f,MAAO3I,EAAGC,EAAG8E,EAAG6D,KAAOrF,KAAK2jB,UAAUnI,UAAWnW,KAAOrF,KAAK2jB,UAAUnI,UAAW1Z,OAG3G4hB,SAAS5d,UAAUmf,iBAAmB,SAAU7f,MAAO8f,GAAIC,GAAI3jB,EAAG6D,KAAM+f,MAAOvrB,EAAGC,EAAGgI,MACnF,IAAIujB,OAAShgB,KACb,IAAIigB,OAASjgB,KACb,IAAItI,MAAQiD,KAAKulB,eAAengB,MAAOigB,OAAQvjB,MAC/C,GAAIsjB,MAAQ3E,MAAMS,MAAQnkB,MAAQlD,EAAG,CACnC,IAAI0P,MAAQ1P,EAAIkD,MAChBsoB,QAAU9b,MACVxM,MAAQlD,EAGR,GAAI0P,MAAQ,GAAK,CACf,IAAK6b,MAAQ3E,MAAMQ,SAAWR,MAAMM,UAAYqE,MAAQ3E,MAAMQ,SAAWR,MAAMO,QAAS,CAEtFmE,KAAOG,OAASA,OAAS/b,MAAQ,GAAK,EAExC+b,QAAU/b,MAAQ,GAGtB,IAAI1M,OAASyoB,OACb,IAAI7oB,OAAA,EACJ,IAAIC,OAAA,EACJ,OAAQ0oB,MAAQ3E,MAAMI,OACpB,KAAKJ,MAAME,QACTlkB,EAAIyoB,IAAMrrB,EAAIkD,OAAS,EACvB,GAAIiD,KAAK2jB,UAAUG,SAAU,CAC3BrnB,GAAK,EAEP,MACF,KAAKgkB,MAAMG,OACTnkB,EAAIyoB,GAAKrrB,EAAIkD,MACb,MACF,KAAK0jB,MAAMC,MACTjkB,EAAIyoB,GACJ,MACF,QACEzoB,EAAIyoB,GAER,OAAQE,MAAQ3E,MAAMQ,OACpB,KAAKR,MAAMM,QACTrkB,EAAIyoB,IAAMrrB,EAAI+C,QAAU,EACxB,GAAImD,KAAK2jB,UAAUG,SAAU,CAC3BpnB,GAAK,EAEP,MACF,KAAK+jB,MAAMO,QACTtkB,EAAIyoB,GAAKrrB,EAAI+C,OACb,MACF,KAAK4jB,MAAMK,KACTpkB,EAAIyoB,GACJ,MACF,QACEzoB,EAAIyoB,GAGR,OAAOnlB,KAAKglB,WAAW5f,MAAO3I,EAAGC,EAAG8E,EAAG6jB,OAASrlB,KAAK2jB,UAAUnI,UAAW8J,OAAStlB,KAAK2jB,UAAUnI,UAAW1Z,OAI/G4hB,SAAS5d,UAAU0f,sBAAwB,SAAUpgB,MAAO3I,EAAGC,EAAG8E,EAAG3H,EAAG4rB,OAAQpgB,KAAM2c,MAAOlgB,MAC3F,OAAO9B,KAAK0lB,kBAAkBxF,aAAa9a,MAAO4c,OAAQvlB,EAAGC,EAAG8E,EAAG3H,EAAG4rB,OAAQpgB,KAAOrF,KAAK2jB,UAAUnI,UAAWnW,KAAOrF,KAAK2jB,UAAUnI,UAAW1Z,OAElJ4hB,SAAS5d,UAAU6f,iBAAmB,SAAUvgB,MAAO3I,EAAGC,EAAG8E,EAAG3H,EAAG4rB,OAAQpgB,KAAMvD,MAC/E,OAAO9B,KAAK0lB,kBAAkBtgB,MAAO3I,EAAGC,EAAG8E,EAAG3H,EAAG4rB,OAAQpgB,KAAOrF,KAAK2jB,UAAUnI,UAAWnW,KAAOrF,KAAK2jB,UAAUnI,UAAW1Z,OAG7H4hB,SAAS5d,UAAU8f,UAAY,SAAU/rB,EAAG4rB,OAAQpgB,KAAMvD,KAAM+jB,SAC9D,OAAO7lB,KAAK8lB,gBAAgBjsB,EAAG4rB,OAAQpgB,KAAOrF,KAAK2jB,UAAUnI,UAAW1Z,KAAM+jB,UAGhFnC,SAAS5d,UAAUigB,SAAW,SAAU3gB,MAAOvL,EAAG4rB,OAAQpgB,KAAMvD,MAC9D9B,KAAKgmB,WAAW5gB,OAChB,IAAI6gB,SAAW,EACf,SAASC,aAAaC,QAASC,QAASC,MACtCJ,SAAWnY,IAAImY,SAAUG,SAE3BpmB,KAAK4lB,UAAU/rB,EAAG4rB,OAAQpgB,KAAMvD,KAAMokB,cACtC,OAAOD,SAAW,GAGpBvC,SAAS5d,UAAU6e,aAAe,SAAU7xB,GAC1C,IAAI2vB,IAAMziB,KAAKokB,WAAWtxB,GAC1B,GAAI2vB,IAAK,CACP,OAAOA,IAET,GAAI3vB,EAAI,IAAK,CAEX,OAAOkN,KAAK0kB,sBAEd,OAAO,MAGThB,SAAS5d,UAAUwgB,kBAAoB,SAAUlhB,MAAOigB,OAAQvyB,GAC9Dka,OAAOgI,aAAaliB,IAApB,YAAA,YAAAmiB,QAAoBniB,GAAG,UACvBkN,KAAKgmB,WAAW5gB,OAChB,IAAIif,UAAYrkB,KAAK2kB,aAAa7xB,GAClC,IAAIyzB,IAAMlB,OAASrlB,KAAK2jB,UAAUnI,UAClC,IAAIgL,UAAYxmB,KAAKymB,aAAaF,KAClC,GAAIlC,UAAW,CACb,OAAQA,UAAUxqB,EAAIwqB,UAAUG,MAAQ+B,IAAMlC,UAAU9a,MAAQid,UAElE,OAAO,GAGT9C,SAAS5d,UAAUyf,eAAiB,SAAUngB,MAAOigB,OAAQvjB,MAC3D9B,KAAKgmB,WAAW5gB,OAChB,IAAIqd,IAAM,EACV,IAAI8D,IAAMlB,OAASrlB,KAAK2jB,UAAUnI,UAClC,IAAIgL,UAAYxmB,KAAKymB,aAAaF,KAClC,IAAK,IAAI1lB,GAAK,EAAGA,GAAKiB,KAAKvO,SAAUsN,GAAI,CACvC,IAAI/N,EAAIgP,KAAK4kB,WAAW7lB,IACxB,IAAIwjB,UAAYrkB,KAAK2kB,aAAa7xB,GAClC,IAAKuxB,UAAW,CACdA,UAAYrkB,KAAK2kB,aAAa,IAEhC,GAAIN,UAAW,CACb5B,MAAQ4B,UAAUxqB,EAAIwqB,UAAUG,MAAQ+B,IAAMlC,UAAU9a,MAAQid,WAGpE,OAAO/D,KAITiB,SAAS5d,UAAUggB,gBAAkB,SAAUjsB,EAAG4rB,OAAQc,IAAKzkB,KAAM+jB,SACnE,IAAIzT,IAAMtQ,KAAKvO,OACf,IAAI6V,EAAI,EACR,IAAIud,WAAa,EACjB,IAAIC,QAAU,EACd,IAAInqB,EAAImqB,QACR,IAAIR,QAAU,EACd,IAAIS,WAAa7mB,KAAK2kB,aAAa,IACnC,IAAImC,YAAcD,WAAaA,WAAWhtB,EAAIgtB,WAAWrC,KAAOxkB,KAAK2jB,UAAUnI,WAAa+K,IAC5F,IAAIQ,UAAY,MAChB,IAAIP,UAAYxmB,KAAKymB,aAAaF,KAElC,EAAG,CACD,IAAIzzB,EAAIsW,EAAIgJ,IAAMtQ,KAAK4kB,WAAWtd,GAAK,EACvC,IAAI4d,KAAOvqB,EACX,IAAIwqB,YAAA,EACJ,GAAIn0B,IAAM,EAAG,CAEX,IAAIo0B,QAAUX,IAAMvmB,KAAK2jB,UAAUnI,UAAY,EAC/CwL,MAAQpZ,MAAMnR,EAAIyqB,SAAW,GAAKA,QAClCD,OAASC,YACJ,CACL,IAAI7C,UAAYrkB,KAAK2kB,aAAa7xB,GAClC,IAAKuxB,UAAW,CACdA,UAAYrkB,KAAK2kB,aAAa,IAEhC,GAAIN,UAAW,CACb4C,QAAU5C,UAAUxqB,EAAIwqB,UAAUG,MAAQ+B,IAAMlC,UAAU9a,MAAQid,UAClEQ,KAAOvqB,EAAIwqB,QAGf,GAAID,MAAQntB,GAAKktB,UAAW,CAE1B,GAAIlB,QAAS,CACXA,QAAQe,QAASR,QAAStkB,KAAKhK,MAAM6uB,WAAYvd,IAEnDud,WAAavd,EACbwd,QAAUnB,OACVhpB,EAAImqB,QAAUK,OACdb,cACK,CACL3pB,EAAIuqB,KAEN,KAAMl0B,IAAM,IAAcA,IAAM,GAAKA,IAAM,IAAc,CACvDsW,IACAtW,EAAIsW,EAAIgJ,IAAMtQ,KAAK4kB,WAAWtd,GAAK,EAErC,GAAItW,IAAM,IAAcA,IAAM,GAAKA,IAAM,GAAa,CAClDi0B,UAAY,MAEZ,GAAItqB,EAAI5C,EAAG,CAET,IAAIstB,WAAa1qB,EAAImqB,QACrB,GAAIO,WAAattB,EAAI4rB,OAAQ,CAE3BsB,UAAY,KAEZ3d,EAAIud,WACJlqB,EAAImqB,QACJ,aACK,CACLA,QAAUnB,OACVhpB,EAAImqB,QAAUO,WACdf,WAGJ,GAAIP,QAAS,CACXA,QAAQe,QAASR,QAAStkB,KAAKhK,MAAM6uB,WAAYvd,IAEnDud,WAAavd,EAAI,EACjB,GAAItW,IAAM,GAAa,CACnB2J,EAAIgpB,OACJW,cACK,CACP3pB,GAAKqqB,WAEPF,QAAUnqB,EACV,GAAI3J,IAAM,IAAcA,IAAM,GAAa,CACvCsW,YAGDA,EAAIgJ,OACXgU,QACF,OAAOA,SAGT1C,SAAS5d,UAAU4f,kBAAoB,SAAUtgB,MAAO3I,EAAGC,EAAG8E,EAAG3H,EAAG4rB,OAAQc,IAAKa,IAAKtlB,MAAM,IAAAqC,MAAAnE,KAC1F,GAAI8B,OAAS,MAAQA,OAASb,UAAW,CACvCa,KAAO,SAET9B,KAAKgmB,WAAW5gB,OAChBpF,KAAKqnB,WAAa,EAClB,IAAIC,UAAYtnB,KAAK8lB,gBAAgBjsB,EAAG4rB,OAAQc,IAAKzkB,KAAM,SAACylB,MAAOnB,QAASC,MAC1E,IAAImB,GAAK9qB,EAAIyH,MAAKwf,UAAUnI,UAAY4L,IAAMhB,QAC9C,IAAIqB,GAAKhrB,EAAI8qB,MACb,IAAIG,OAASvjB,MAAK6gB,WAAW5f,MAAOqiB,GAAID,GAAIhmB,EAAG+kB,IAAKa,IAAKf,MACzDliB,MAAKkjB,WAAavZ,IAAI3J,MAAKkjB,WAAYE,MAAQG,UAEjD,OAAOJ,UAAYtnB,KAAK2jB,UAAUnI,UAAY4L,KAGhD1D,SAAS5d,UAAU2gB,aAAe,SAAUF,KAK1C,IAAIoB,iBAAmB3nB,KAAK2jB,UAAUnI,UAAY,GAElD,IAAIgL,UAAYD,IAAMoB,iBAAmB7Z,IAAI9N,KAAK6kB,cAAcpD,cAAgB,EAAG,GAEnF+E,UAAY1Y,IAAI0Y,UAAWD,IAAMoB,iBAAmB7Z,IAAI9N,KAAK6kB,cAAc/C,WAAa9hB,KAAK6kB,cAAclD,WAAa,EAAG,IAC3H,OAAO6E,WAMT9C,SAAS5d,UAAUkf,WAAa,SAAU5f,MAAO8f,GAAIxoB,EAAG8E,EAAG+kB,IAAKa,IAAKtlB,MACnE,IAAIrF,EAAIyoB,GACRlY,OAAO4a,SAASnrB,IAChBuQ,OAAO4a,SAASlrB,IAChBsQ,OAAO4a,SAASpmB,IAChB,IAAImiB,UAAY3jB,KAAK2jB,UAKrBjnB,IAAMinB,UAAUkE,UAAY,GAAKT,IACjC,IAAIld,KAAOlK,KAAKvC,SAChB,GAAIqE,OAAS,MAAQA,OAASb,UAAW,CACvCa,KAAO,SAET,IAAMsQ,IAAMtQ,KAAKvO,OACjB,GAAIgzB,MAAQ,GAAKa,MAAQ,EAAG,CAC1B,OAAO,EAGTpnB,KAAKgmB,WAAW5gB,OAEhB,IAAM0iB,gBAAkBvB,IAAMa,KAAO,GACrC,IAAMW,cAAgB7mB,SAASrG,KAAK,GACpC,IAAMmtB,cAAgB9mB,SAASrG,KAAK,GACpC,IAAIotB,oBAAsB1B,IAAMwB,cAAgBX,IAAMY,eAAiB,GAKvE,IAAIxB,UAAYxmB,KAAKymB,aAAaF,KAClC,IAAIoB,iBAAmBhE,UAAUnI,UAAY,GAC7C,IAAI0M,WAAa,EAEjB,IAAIrD,cAAgB7kB,KAAK6kB,cAGzB,IAAIsD,uBAAyB,GAAMxE,UAAUyE,OAC7C,IAAIC,qBAAuBF,uBAAyBF,mBACpD,IAAInlB,MAAQkE,KAAK,EAAIqhB,sBACpB,GAAMA,qBAAuB,IAE7B,GAAMA,qBAAuB,GAAMxD,cAAcpD,cAAgBkG,iBAAmBM,mBAAoB,GAEzG,GAAInlB,MAAM,GAAK,EAAG,CAChBA,MAAM,GAAK,EAEb,IAAIwlB,SAAWxa,IAAI,EAAG+W,cAAcpD,cAAgBkG,iBAAmBG,gBACvE,IAAIS,SAAWvhB,OACf,IAAMwhB,aAAe3D,cAAc/C,WAAa6F,iBAChDY,SAAS,GAAKza,IAAI0a,aAAejC,IAAM1B,cAAclD,WAAagG,iBAAmBpB,IAAK+B,UAC1FC,SAAS,GAAKza,IAAI0a,aAAejC,IAAM1B,cAAclD,WAAagG,iBAAmBpB,IAAK+B,UAC1FC,SAAS,GAAKza,IAAI0a,aAAepB,IAAMvC,cAAcjD,WAAa+F,iBAAmBP,IAAKkB,UAC1FC,SAAS,GAAKza,IAAI0a,aAAepB,IAAMvC,cAAcjD,WAAa+F,iBAAmBP,IAAKkB,UAE1FhF,cAAc,SAAUxgB,OACxB,IAAI2lB,OAASzhB,KAAK,EAClB,EAEA,IAAM6d,cAAc/C,WAAa+C,cAAchD,YAAcsG,uBAAyBR,oBAAqB,GAAM9C,cAAc/C,WAAaqG,uBAAyBR,oBAAsB9C,cAAc/C,WAAa+C,cAAchD,YAAcsG,uBAAyBR,mBAC3Q,GAAIc,OAAO,GAAK,EAAG,CACjBA,OAAO,GAAK,EAGd,IAAIC,sBAAwB1hB,OAC5BqZ,QAAQqI,sBAAuBH,SAAU,EAAIT,gBAC7C,IAAK,IAAIjnB,GAAK,EAAGA,GAAK,IAAKA,GAAI,CAC7B,GAAI6nB,sBAAsB7nB,IAAM8iB,UAAUyE,OAAQ,CAEhD,IAAI9D,GAAKX,UAAUyE,OAASM,sBAAsB7nB,IAClD0nB,SAAS1nB,KAAOyjB,GAChBoE,sBAAsB7nB,KAAOyjB,IAKjC,IAAMqE,UAAY9D,cAAclD,WAAa,GAAK,KAAS,KAG3D,IAAIiH,YAAcrC,IAAMuB,eACxB,IAAIe,YAAczB,IAAMU,eAExB,IAAK,IAAIl1B,EAAI,EAAGA,EAAIwf,IAAKxf,IAAK,CAC5B,IAAME,EAAIgP,KAAK4kB,WAAW9zB,GAC1B,GAAIE,IAAM,EAAG,CAEX,IAAIo0B,QAAUX,IAAM5C,UAAUnI,UAAY,EAC1C/e,KAAOA,EAAIyoB,IAAMgC,QAAU,GAAK,GAAKA,QAAUhC,OAC1C,CACL,IAAIb,UAAYrkB,KAAK2kB,aAAa7xB,GAClC,IAAKuxB,UAAW,CACdA,UAAYrkB,KAAK2kB,aAAa,IAEhC,GAAIN,UAAW,CACb,IAAIyE,WAAazE,UAAU9a,MAC3B,IAAIwf,KAAOxC,IAAMuC,WACjB,GAAIzE,UAAUxqB,EAAG,CACf,IAAImvB,KAAO5B,IAAM0B,WACjB,IAAIG,UAAY,EAAIH,WACpB,IAAII,WAAalpB,KAAKgkB,MACtB,IAAImF,YAAcnpB,KAAKkkB,MAEvB,GAAI4E,aAAeZ,WAAY,CAC7BO,OAAO,IAAM5D,cAAclD,WAAagG,iBAAmBsB,UAAYC,WACvET,OAAO,IAAM5D,cAAcjD,WAAa+F,iBAAmBsB,UAAYE,YACvE7F,cAAc,aAAcmF,QAG9B,IAAIW,IAAM/E,UAAU5qB,GAAKivB,sBAAsB,GAAKO,WAAaC,WACjE,IAAIG,IAAMhF,UAAU5qB,GAAK4qB,UAAUxqB,EAAI6uB,sBAAsB,GAAKO,WAAaC,WAC/E,IAAII,IAAMjF,UAAU3qB,GAAKgvB,sBAAsB,GAAKO,WAAaE,YACjE,IAAII,IAAMlF,UAAU3qB,GAAK2qB,UAAUvqB,EAAI4uB,sBAAsB,GAAKO,WAAaE,YAE/E,IAAItvB,EAAIwqB,UAAUxqB,EAAIkvB,MAAQR,SAAS,GAAKA,SAAS,IAAMK,YAC3D,IAAI9uB,EAAIuqB,UAAUvqB,EAAIkvB,MAAQT,SAAS,GAAKA,SAAS,IAAMM,YAE3Dva,QAAQkb,SAAStf,KAAMzN,EAAImsB,YAAcL,SAAS,GAAI7rB,EAAImsB,YAAcN,SAAS,GAAKlE,UAAUI,MAAQuE,KAAMxnB,EAAImnB,UAAY/1B,EAAGiH,EAAGC,EAAGsvB,GAAIE,GAAID,GAAIE,GAAI1E,cAAcrD,WAAYxhB,KAAK4H,OAAQ6b,iBAShMhnB,IAAM4nB,UAAUxqB,EAAIwqB,UAAUG,MAAQuE,KAAOvC,YAInD,OAAO/pB,EAAIyoB,IAGbxB,SAAS5d,UAAU2jB,gBAAkB,WACnC,IAAIC,QAAU1pB,KAAK6kB,cAAcpD,eAAiBzhB,KAAK6kB,cAAcnD,cAAgB,IACrF,IAAIhW,KAAO1L,KAAK6kB,cAAc/C,WAAa,GAAK9hB,KAAK6kB,cAAc9C,WAAa,IAChF,GAAI2H,QAAS,CACX,GAAIhe,KAAM,CACR1L,KAAK4H,OAASya,aAAasH,yBACtB,CACL3pB,KAAK4H,OAASya,aAAauH,sBAExB,GAAIle,KAAM,CACf1L,KAAK4H,OAASya,aAAawH,iBACtB,CACL7pB,KAAK4H,OAASya,aAAa0B,UAI/BL,SAAS5d,UAAUkgB,WAAa,SAAU5gB,OACxC,IAAKA,MAAO,CACVA,MAAQpF,KAAK4kB,cAGf3E,sBAAsB8C,WAAY3d,MAAMsc,eACxC4B,cAAc,eAAgBP,YAG9B9C,sBAAsB8C,WAAY3d,MAAM2c,YACxCuB,cAAc,YAAaP,YAG3B/iB,KAAK6kB,cAAcpD,cAAgBrc,MAAMqc,cACzCzhB,KAAK6kB,cAAcnD,cAAgBtc,MAAMsc,cACzC1hB,KAAK6kB,cAAclD,WAAavc,MAAMuc,WACtC3hB,KAAK6kB,cAAcjD,WAAaxc,MAAMwc,WACtC5hB,KAAK6kB,cAAchD,WAAazc,MAAMyc,WACtC7hB,KAAK6kB,cAAc/C,WAAa1c,MAAM0c,WACtC9hB,KAAK6kB,cAAc9C,WAAa3c,MAAM2c,WACtC/hB,KAAK6kB,cAAc7C,MAAQ5c,MAAM4c,MACjChiB,KAAK6kB,cAAcrD,WAAapc,MAAMoc,WACtCxhB,KAAK6kB,cAAc5C,QAAU7c,MAAM6c,QACnCjiB,KAAK6kB,cAAc3C,QAAU9c,MAAM8c,QACnCliB,KAAK6kB,cAAc1C,QAAU/c,MAAM+c,QACnCniB,KAAK6kB,cAAczC,WAAahd,MAAMgd,WAEtC,GAAIpiB,KAAK6kB,cAAczC,aAAe9B,WAAWC,OAAQ,CACvDvgB,KAAK6kB,cAAc5C,QAAUjiB,KAAK6kB,cAAc1C,QAAUniB,KAAK6kB,cAAc3C,QAAUliB,KAAK6kB,cAAc7C,MAG5GhiB,KAAKypB,mBAIP/F,SAAS5d,UAAUwa,WAAaA,WAChCoD,SAAS5d,UAAU2a,MAAQA,MAC3BiD,SAAS5d,UAAUV,MAAQA,MAC3Bse,SAAS5d,UAAUqa,WAAaA,WAChCuD,SAAS5d,UAAUoa,aAAeA,aAElC,SAAS4J,kBACP,GAAIzH,aAAa0B,QAAS,CACxB,OAEF1B,aAAa0B,QAAUld,QAAQnT,OAAOmU,GAAGC,gBAAiB,UAAW,sXACrEua,aAAawH,aAAehjB,QAAQnT,OAAOmU,GAAGC,gBAAiB,eAAgB,wpBAC/Eua,aAAauH,gBAAkB/iB,QAAQnT,OAAOmU,GAAGC,gBAAiB,kBAAmB,qpBACrFua,aAAasH,qBAAuB9iB,QAAQnT,OAAOmU,GAAGC,gBAAiB,uBAAwB,g3BAG1F,SAASpU,SACdo2B,kBAD8B,IAAA,IAAAC,KAAAC,UAAAz2B,OAAN02B,KAAM/P,MAAA6P,MAAAG,KAAA,EAAAA,KAAAH,KAAAG,OAAA,CAAND,KAAMC,MAAAF,UAAAE,MAE9B,OAAA,IAAAC,SAAArkB,UAAAkE,KAAAogB,MAAW1G,SAAX,CAAA,MAAA2G,OAAuBJ,qMC9kBTK,cAAAA,sBA2NA52B,OAAAA,eAIA62B,YAAAA,oBAUA9vB,QAAAA,QAzWhB,IAAMuS,OAASja,QAAQ,UACvB,IAAM2H,OAAS3H,QAAQ,mBACfy3B,KAAmBh0B,KAAnBg0B,KAAM1c,IAAatX,KAAbsX,IAAKD,IAAQrX,KAARqX,IAEZ,IAAM4c,UAAAp3B,QAAAo3B,UAAY,EAClB,IAAMC,aAAAr3B,QAAAq3B,aAAe,EACrB,IAAM/hB,MAAAtV,QAAAsV,MAAQ,EAErB,IAAMgiB,aAAe,CACnBC,KAAQ,EACRC,KAAQ,EACRC,KAAQ,EACRC,KAAQ,EACRC,KAAQ,GAMV,IAAIC,gBAAA,EAEJ,IAAIC,gBAAkB,KACtB,IAAIC,gBAAkB,KAEtB,IAAIC,oBAAA,EACJ,IAAIC,mBAAqB,EAEzB,SAASC,aAAaztB,QACpB,IAAKA,OAAQ,CACX,OAEF,GAAIqtB,kBAAoBrtB,OAAQ,CAC9BgK,GAAG0jB,WAAW1jB,GAAG2jB,aAAc,MAC/BN,gBAAkB,KAEpB,GAAIC,kBAAoBttB,OAAQ,CAC9BgK,GAAG0jB,WAAW1jB,GAAG4jB,qBAAsB,MACvCN,gBAAkB,KAEpBtjB,GAAGyjB,aAAaztB,QAGlB,IAAI6tB,eAAiB,EACrB,SAASC,wBAAwBC,MAC/B,GAAIA,OAASF,eAAgB,CAC3B,OAEF,IAAIG,aAAeH,gBAAkBE,KACrC,IAAIE,aAAeJ,eAAiBE,KACpCF,eAAiBE,KAEjB,GAAIC,aAAc,CAChB,IAAIp5B,EAAI,EACR,EAAG,CACD,GAAIo5B,aAAe,EAAG,CACpBhkB,GAAGkkB,yBAAyBt5B,GAE9BA,IACAo5B,eAAiB,QACVA,cAGX,GAAIC,YAAa,CACf,IAAIE,GAAI,EACR,EAAG,CACD,GAAIF,YAAc,EAAG,CACnBjkB,GAAG8jB,wBAAwBK,IAE7BA,KACAF,cAAgB,QACTA,cA0Bb,SAASG,gBAAgBC,YACvBlf,OAAOkf,YAAc,OAGrB,GAAIA,WAAa,EAAIb,mBAAoB,CACvC,IAAKD,eAAgB,CACnBA,eAAiBvjB,GAAGskB,mBACf,CAELzxB,OAAO4E,WAAWH,QAAQI,MAAQ8rB,mBAAqB,EAEzDA,mBAAqBvd,IAAI0c,KAAKa,mBAAqB,KAAMa,WAAa,GACtE,GAAIf,kBAAoBC,eAAgB,CACtCvjB,GAAG0jB,WAAW1jB,GAAG4jB,qBAAsBL,gBACvCD,gBAAkBC,eAEpB,IAAIgB,IAAM,IAAIC,YAAYhB,oBAC1B,IAAIiB,KAAO,EACX,IAAK,IAAIzrB,GAAK,EAAGA,GAAKwqB,oBAAqB,CACzCe,IAAIvrB,MAAQyrB,KAAO,EACnBF,IAAIvrB,MAAQyrB,KAAO,EACnBF,IAAIvrB,MAAQyrB,OACZF,IAAIvrB,MAAQyrB,OACZF,IAAIvrB,MAAQyrB,OACZF,IAAIvrB,MAAQyrB,OAEdzkB,GAAG0kB,WAAW1kB,GAAG4jB,qBAAsBW,IAAKvkB,GAAG2kB,aAC/C9xB,OAAO4E,WAAWH,QAAQI,MAAQ8rB,mBAAqB,EAEzD,OAAOD,eAGF,SAASd,cAAcmC,MAC5B,IAAIhK,IAAM,CACRiK,IAAK7kB,GAAGskB,eACRQ,SAAUF,KAAKl5B,QAEjBsU,GAAG0jB,WAAW1jB,GAAG4jB,qBAAsBhJ,IAAIiK,KAC3CvB,gBAAkB1I,IAAIiK,IACtB7kB,GAAG0kB,WAAW1kB,GAAG4jB,qBAAsBgB,KAAM5kB,GAAG2kB,aAChD9xB,OAAO4E,WAAWH,QAAQI,MAAQktB,KAAKl5B,OAAS,EAChD,OAAOkvB,IAGT,SAASmK,WAAWC,QAClB,IAAKA,OAAO3N,KAAM,CAChB,IAAI4N,OAAS,EACb,IAAIC,WAAa,EACjB,IAAIC,aAAe,EACnB,IAAIC,iBAAmB,EACvB,IAAK,IAAIpsB,GAAK,EAAGA,GAAKgsB,OAAOt5B,SAAUsN,GAAI,CACzC,IAAIqsB,IAAML,OAAOhsB,IACjB,IAAIssB,IAAMD,IAAI,GACd,IAAIE,OAASF,IAAI,GACjB,IAAIG,MAAQH,IAAI,GAChBF,cAAgB,GAAKG,IACrB,IAAIG,UAAY3C,aAAayC,QAC7BpgB,OAAOsgB,WACPtgB,QAAQigB,kBAAoBK,YAAcL,kBAC1CA,iBAAmBK,UACnBJ,IAAI,GAAKA,IAAI,IAAM,MACnBA,IAAI,GAAKI,UACTR,QAAUO,MAAQC,UAClBP,YAAcM,MAEhBR,OAAO3N,KAAO,CACZ4N,OAAAA,OAAQC,WAAAA,WAAYC,aAAAA,aAAcC,iBAAAA,kBAGtC,OAAOJ,OAAO3N,KAIhB,SAASqO,KAAKV,OAAQW,MAAOf,KAAMgB,MACjCztB,KAAKytB,KAAOA,MAAQhD,UACpBzqB,KAAK6sB,OAASA,OACd,IAAI3N,KAAOlf,KAAK0tB,YAAcd,WAAWC,QACzC7sB,KAAK8sB,OAAS5N,KAAK4N,OACnB9sB,KAAKgtB,aAAe9N,KAAK8N,aAEzBhtB,KAAK2tB,WAAaH,MAAMj6B,OAASyM,KAAK0tB,YAAYX,WAClD/sB,KAAK4tB,aAAeJ,MAAMj6B,OAASyM,KAAK0tB,YAAYT,iBACpD,GAAIO,MAAMj6B,OAAQ,CAChByM,KAAK6tB,IAAMhmB,GAAGskB,eACdtkB,GAAG0jB,WAAW1jB,GAAG2jB,aAAcxrB,KAAK6tB,KACpC3C,gBAAkBlrB,KAAK6tB,IACvBhmB,GAAG0kB,WAAW1kB,GAAG2jB,aAAcgC,MAAO3lB,GAAG2kB,aACzC9xB,OAAO4E,WAAWH,QAAQI,MAAQS,KAAK4tB,aAEzC5tB,KAAK8tB,UAAYL,KACjB,GAAIhB,KAAM,CACR,GAAIA,KAAKC,IAAK,CACZ1sB,KAAK0sB,IAAMD,KAAKC,IAChB1sB,KAAK+tB,UAAY,MACjB/tB,KAAK2sB,SAAWF,KAAKE,aAChB,CACL3sB,KAAK0sB,IAAM7kB,GAAGskB,eACdnsB,KAAK+tB,UAAY,KACjB/tB,KAAK2sB,SAAWF,KAAKl5B,OACrBsU,GAAG0jB,WAAW1jB,GAAG4jB,qBAAsBzrB,KAAK0sB,KAC5CvB,gBAAkBnrB,KAAK0sB,IACvB7kB,GAAG0kB,WAAW1kB,GAAG4jB,qBAAsBgB,KAAM5kB,GAAG2kB,aAChD9xB,OAAO4E,WAAWH,QAAQI,MAAQktB,KAAKl5B,OAAS,QAE7C,GAAIk6B,OAAS9kB,MAAO,CACzBqE,OAAOgI,MAAMhV,KAAK2tB,WAAa,EAAG,GAClC,IAAIzB,WAAalsB,KAAK2tB,WAAa,EAEnC3tB,KAAK0sB,IAAMT,gBAAgBC,YAC3BlsB,KAAK+tB,UAAY,MACjB/tB,KAAK2sB,SAAWT,WAAa,EAC7BlsB,KAAKytB,KAAOhD,eACP,GAAIgD,OAAS/C,aAAc,CAChC1qB,KAAKytB,KAAO/C,iBACP,CACL1qB,KAAK0sB,IAAM,KACX1sB,KAAK+tB,UAAY,OAIrBR,KAAKznB,UAAUkoB,UAAY,SAAUC,OAAQT,OAC3C,GAAItC,kBAAoBlrB,KAAK6tB,IAAK,CAChChmB,GAAG0jB,WAAW1jB,GAAG2jB,aAAcxrB,KAAK6tB,KACpC3C,gBAAkBlrB,KAAK6tB,IAEzBhmB,GAAGqmB,cAAcrmB,GAAG2jB,aAAcyC,OAAQT,QAG5CD,KAAKznB,UAAUqoB,OAAS,SAAUX,MAAOY,WACvCphB,OAAOgI,MAAMhV,KAAK+tB,UAAW,OAC7B,GAAIK,UAAYpuB,KAAK2tB,WAAY,CAC/B,GAAI1C,aAAejrB,KAAM,CACvBirB,WAAa,KAEfvwB,OAAO4E,WAAWH,QAAQI,MAAQS,KAAK4tB,aACvCtC,aAAatrB,KAAK6tB,KAElB7tB,KAAK2tB,WAAaH,MAAMj6B,OAASyM,KAAK0tB,YAAYX,WAClD/sB,KAAK4tB,aAAeJ,MAAMj6B,OAASyM,KAAK0tB,YAAYT,iBACpDjtB,KAAK6tB,IAAMhmB,GAAGskB,eACdtkB,GAAG0jB,WAAW1jB,GAAG2jB,aAAcxrB,KAAK6tB,KACpC3C,gBAAkBlrB,KAAK6tB,IACvBhmB,GAAG0kB,WAAW1kB,GAAG2jB,aAAcgC,MAAO3lB,GAAGwmB,cACzC3zB,OAAO4E,WAAWH,QAAQI,MAAQS,KAAK4tB,iBAClC,CAEL,GAAI1C,kBAAoBlrB,KAAK6tB,IAAK,CAChChmB,GAAG0jB,WAAW1jB,GAAG2jB,aAAcxrB,KAAK6tB,KACpC3C,gBAAkBlrB,KAAK6tB,IAEzBhmB,GAAGqmB,cAAcrmB,GAAG2jB,aAAc,EAAGgC,MAAMc,SAAS,EAAGF,UAAYpuB,KAAK0tB,YAAYX,aAGtF,GAAI/sB,KAAK8tB,YAAcnlB,MAAO,CAC5B,IAAIujB,WAAakC,UAAY,EAC7BpuB,KAAK0sB,IAAMT,gBAAgBC,YAC3BlsB,KAAK2sB,SAAWT,WAAa,IAIjCqB,KAAKznB,UAAUyoB,QAAU,WACvB,GAAIvuB,KAAK+tB,UAAW,CAClBzC,aAAatrB,KAAK0sB,KAEpB1sB,KAAK0sB,IAAM,KACXpB,aAAatrB,KAAK6tB,KAClB7tB,KAAK6tB,IAAM,KACXnzB,OAAO4E,WAAWH,QAAQI,MAAQS,KAAK4tB,aACvC5tB,KAAK4tB,aAAe,GAGtB,IAAIY,cAAgB,WAClB,IAAIj8B,EAAI,GACR,IAAK,IAAIsO,GAAK,EAAGA,GAAK,KAAMA,GAAI,CAC9BtO,EAAEoG,KAAK,CACLk1B,IAAK,KACLI,OAAQ,IAGZ,OAAO17B,EARW,GAUpBg7B,KAAKznB,UAAUkE,KAAO,WACpB,GAAIihB,aAAejrB,KAAM,CACvBirB,WAAajrB,KACb,IAAI6tB,IAAM7tB,KAAK6tB,IAEf,IAAII,OAAS,EACb,IAAK,IAAIptB,GAAK,EAAGA,GAAKb,KAAK6sB,OAAOt5B,SAAUsN,GAAI,CAC9C,IAAIqsB,IAAMltB,KAAK6sB,OAAOhsB,IACtB,IAAIwsB,MAAQH,IAAI,GAChB,IAAII,UAAYJ,IAAI,GACpB,GAAIsB,cAAc3tB,IAAIgtB,MAAQA,IAAK,MAE5B,CACL,GAAI3C,kBAAoB2C,IAAK,CAC3BhmB,GAAG0jB,WAAW1jB,GAAG2jB,aAAcqC,KAC/B3C,gBAAkB2C,IAEpB,IAAIV,IAAMD,IAAI,GACd,IAAIE,OAASF,IAAI,GACjB,IAAIuB,WAAavB,IAAI,GACrBrlB,GAAG6mB,oBAAoBvB,IAAKE,MAAOD,OAAQqB,WAAYzuB,KAAK8sB,OAAQmB,QACpEO,cAAc3tB,IAAIgtB,IAAM3C,gBAG1B+C,QAAUZ,MAAQC,UAMpB3B,wBAAwB3rB,KAAKgtB,cAG/B,GAAIhtB,KAAK0sB,KAAOvB,kBAAoBnrB,KAAK0sB,IAAK,CAC5C7kB,GAAG0jB,WAAW1jB,GAAG4jB,qBAAsBzrB,KAAK0sB,KAC5CvB,gBAAkBnrB,KAAK0sB,MAG3Ba,KAAKznB,UAAUqE,KAAO,WACpBnK,KAAKgK,OACL,GAAIhK,KAAK0sB,IAAK,CACZ7kB,GAAG8mB,aAAa3uB,KAAKytB,KAAMztB,KAAK2sB,SAAU9kB,GAAG+mB,eAAgB,OACxD,CACL/mB,GAAGgnB,WAAW7uB,KAAKytB,KAAM,EAAGztB,KAAK2tB,cAIrC,SAASmB,eAAejC,OAAQW,OAC9B,IAAIE,YAAcd,WAAWC,QAC7B,IAAIkC,GAAKrB,YAAYX,WACrB,IAAIY,WAAaH,MAAMj6B,OAASw7B,GAChC/uB,KAAKgvB,MAAQ,GACb,IAAK,IAAI7c,IAAM,EAAGA,IAAMwb,WAAYxb,KAAO,MAAO,CAChD,IAAI8c,cAAgBphB,IAAI8f,WAAaxb,IAAK,OAC1C,IAAI+c,SAAW,IAAIC,WAAW3B,MAAM4B,OAAQjd,IAAM4c,GAAIE,cAAgBF,IACtE/uB,KAAKgvB,MAAMr2B,KAAK,IAAI40B,KAAKV,OAAQqC,SAAU,KAAMvmB,SAGrDmmB,eAAehpB,UAAUqE,KAAO,WAC9B,IAAK,IAAItJ,GAAK,EAAGA,GAAKb,KAAKgvB,MAAMz7B,SAAUsN,GAAI,CAC7Cb,KAAKgvB,MAAMnuB,IAAIsJ,SAGnB2kB,eAAehpB,UAAUyoB,QAAU,WACjC,IAAK,IAAI1tB,GAAK,EAAGA,GAAKb,KAAKgvB,MAAMz7B,SAAUsN,GAAI,CAC7Cb,KAAKgvB,MAAMnuB,IAAI0tB,UAEjBvuB,KAAKgvB,MAAQ,MAGR,SAASt7B,SAAgB,IAAA,IAAAq2B,KAAAC,UAAAz2B,OAAN02B,KAAM/P,MAAA6P,MAAAG,KAAA,EAAAA,KAAAH,KAAAG,OAAA,CAAND,KAAMC,MAAAF,UAAAE,MAC9B,OAAA,IAAAC,SAAArkB,UAAAkE,KAAAogB,MAAWmD,KAAX,CAAA,MAAAlD,OAAmBJ,QAGd,SAASM,YAAYsC,OAAQW,OAClC,IAAIE,YAAcd,WAAWC,QAC7B7f,OAAOwgB,iBAAiB2B,YACxB,IAAIxB,WAAaH,MAAMj6B,OAASm6B,YAAYX,WAC5C,GAAIY,WAAa,MAAO,CACtB,OAAO,IAAImB,eAAejC,OAAQW,OAEpC,OAAO,IAAID,KAAKV,OAAQW,MAAO,KAAM7kB,OAGhC,SAASlO,qGCvWA40B,OAAAA,OAHhB,IAAIC,UAAY,IAAIpV,MAAM,KAC1B,IAAIqV,eAAiB5uB,OAAO6uB,eAAiB7uB,OAAO8uB,aACpD,IAAIC,OAAS,GACN,SAASL,OAAOM,OACrB,IAAIC,YAAA,EACJ,IAAIC,WAAA,EACJ,IAAIC,QAAUH,MAAMp8B,OAEpBm8B,OAAOn8B,OAAS,EAEhB,IAAK,IAAIX,EAAI,EAAGA,EAAIk9B,SAAU,CAC5BD,MAAQF,MAAM/8B,KAEd,GAAIi9B,OAAS,IAAM,CACjBD,OAASC,WACJ,GAAIA,OAAS,IAAM,CACxBD,QAAUC,MAAQ,KAAS,EAAIF,MAAM/8B,KAAO,QACvC,GAAIi9B,OAAS,IAAM,CACxBD,QAAUC,MAAQ,KAAS,IAAMF,MAAM/8B,KAAO,KAAS,EAAI+8B,MAAM/8B,KAAO,QACnE,GAAI+N,OAAO6uB,cAAe,CAC/BI,QAAUC,MAAQ,IAAS,IAAMF,MAAM/8B,KAAO,KAAS,IAAM+8B,MAAM/8B,KAAO,KAAS,EAAI+8B,MAAM/8B,KAAO,OAC/F,CACLg9B,OAAS,GACTh9B,GAAK,EAGP88B,OAAO/2B,KAAK22B,UAAUM,UAAYN,UAAUM,QAAUL,eAAeK,UAGvE,OAAOF,OAAO13B,KAAK,oEC5BL+3B,wBAAAA,wBAFhB,IAAMC,MAAQ,CAAC,SAAU,OAAQ,OAAQ,QAElC,SAASD,wBAAwB1qB,MACtC,IAAMrH,KAAOgyB,MAAM3qB,KAAO,GAC1B,OAAOrH,MAAQgyB,MAAM,GAKhB,IAAMC,6BAAA58B,QAAA48B,6BAA+B,CAC1CC,OAAQ,EACRC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,IAGD,IAAMC,sCAAAp9B,QAAAo9B,sCAAwC,CACnD7F,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACN2F,KAAM,EACN1F,KAAM,GAGD,IAAM2F,kCAAAt9B,QAAAs9B,kCAAoC,CAC/C/F,KAAMgG,UACN/F,KAAMsE,WACNrE,KAAM+F,WACN9F,KAAMsB,YACNqE,KAAMI,YACN9F,KAAMp3B,qECjCR,IAAMoZ,OAASja,QAAQ,uBAGMA,QAAQ,2BAA7Bg+B,0BAAAA,+BACqBh+B,QAAQ,2BAA7Bi+B,2BAAAA,iBAER,SAASC,YAAYC,YACnB,OAAOA,WAAa,GAAK,EAG3B,IAAMC,YAAcp+B,QAAQ,kCAMxBA,QAAQ,wBAHVk9B,uCAAAA,6BACAQ,gDAAAA,sCACAE,4CAAAA,kCAGF,IAAMS,WAAa,WAEnB,IAAMC,qBAAuB,GAC7B,IAAMC,sBAAwB,EAE9B,IAAMC,oBAAsB,WAC5B,IAAMC,mBAAqB,QAE3B,IAAMC,GAAK,KACX,IAAMC,GAAK,MAGX,SAASC,YAEP3xB,KAAK4xB,iBAAmB,KACxB5xB,KAAK6xB,WAAa,KAClB7xB,KAAK8xB,KAAO,KAGd,SAASC,YAAYC,MAEnB,IAAMC,SAAW,IAAIC,SAASF,KAAKG,gBACnC,IAAMC,OAASH,SAASI,UAAU,EAAGX,IACrC,IAAMY,QAAUL,SAASI,UAAU,EAAGZ,IACtC,IAAMc,WAAaN,SAASI,UAAU,EAAGZ,IAEzC,IAAIe,MAAQJ,SAAWhB,WACvB,IAAKoB,MAAO,CACVxY,QAAQyY,KAAK,4BAGfzlB,OAAOslB,UAAY,EAAnB,uBAA6CA,QAA7C,4BACAtlB,OAAOulB,WAAa,IAGpB,IAAMG,gBAAkBT,SAASI,UAAU,GAAIZ,IAC/C,IAAMkB,gBAAkBV,SAASI,UAAU,GAAIZ,IAE/Ce,MAAQG,kBAAoBpB,qBAAuBoB,kBAAoB,EACvE3lB,OAAOwlB,MAAP,qBAAmCG,iBAGnC,IAAMC,gBAAkBvB,qBAAuBC,sBAC/C,IAAMuB,UAAY,IAAI1D,WAAW6C,KAAKG,eAAgBS,gBAAiBF,iBAGvE,IAAMI,SAAW3B,YAAY9B,OAAOwD,WAGpCb,KAAKF,KAAOiB,KAAKC,MAAMF,UAGvB,IAAMG,iBAAmBL,gBAAkB3B,YAAYyB,iBACvDV,KAAKJ,iBAAmBqB,iBAAmB3B,sBAE3C,IAAM4B,eAAiBjB,SAASI,UAAUY,iBAAmB,EAAGxB,IAChEe,MAAQU,iBAAmB1B,oBAAsB0B,iBAAmB,EACpElmB,OAAOwlB,MAAP,oBAAkCU,gBAElC,MAAO,CACLC,YAAanB,KAAKG,eAClBP,iBAAkBI,KAAKJ,iBACvBE,KAAME,KAAKF,MAIf,SAASsB,cAAcpB,MACrB,IAAMtC,OAASqC,YAAYC,MAC3BA,KAAKH,WAAanC,OAAOoC,KACzBE,KAAKqB,gBAAkBtC,iBAAiBiB,KAAKG,eAAgBH,KAAKF,KAAME,KAAKJ,kBAC7EI,KAAKF,KAAOd,iBAAiBgB,KAAKF,KAAME,KAAKqB,iBAG/C1B,UAAU7rB,UAAUwtB,UAAY,SAAUH,aAExCnzB,KAAKmyB,eAAiBgB,YAGtB,GAAInzB,KAAK8xB,OAAS,MAAQ9xB,KAAK4xB,mBAAqB,KAAM,CACxDwB,cAAcpzB,MAEhB,OAAOA,MAIT2xB,UAAU7rB,UAAUktB,MAAQ,SAAUG,aACpC,OAAOnzB,KAAKszB,UAAUH,cAIxBxB,UAAU7rB,UAAUytB,mBAAqB,SAAU9rB,KACjD,OAAOzH,KAAK8xB,KAAKrqB,MAInBkqB,UAAU7rB,UAAU/E,QAAU,WAC5B,OAAOf,KAAK8xB,MAIdH,UAAU7rB,UAAU0tB,eAAiB,WACnC,OAAOxzB,KAAKmyB,gBAIdR,UAAU7rB,UAAU2tB,oBAAsB,WACxC,OAAOzzB,KAAK4xB,kBAIdD,UAAU7rB,UAAU4tB,cAAgB,SAAUC,gBAC5C,IAAMC,YAAcD,eAAeC,YAAc,GAAK5zB,KAAK4xB,iBAC3D,OAAO,IAAIzC,WAAWnvB,KAAKmyB,eAAgByB,WAAYD,eAAezC,aAIxES,UAAU7rB,UAAU+tB,UAAY,SAAUC,cAExC,IAAMC,UAAYpD,kCAAkCmD,aAAaE,eACjE,IAAMC,WAAahE,6BAA6B6D,aAAa91B,MAC7D,IAAMk2B,kBAAoBzD,sCAAsCqD,aAAaE,eAC7E,IAAMzgC,OAASugC,aAAazG,MAAQ4G,WACpC,IAAM/C,WAAa4C,aAAazG,MAAQ4G,WAAaC,kBAGrD,IAAMP,eAAiB3zB,KAAK8xB,KAAKqC,YAAYL,aAAaM,YAC1DpnB,OAAOkkB,YAAc,GAAK4C,aAAaF,WAAa1C,YAAcyC,eAAezC,YAEjF,IAAM0C,WAAaD,eAAeC,WAAa5zB,KAAK4xB,iBAAmBkC,aAAaF,WACpF,OAAO,IAAIG,UAAU/zB,KAAKmyB,eAAgByB,WAAYrgC,SAIxDo+B,UAAU7rB,UAAUuuB,aAAe,SAAUC,WAC3C,MAAO,CACLC,WAAYv0B,KAAK0zB,cAAcY,UAAUF,YACzCI,SAAUF,UAAUE,UAAY,eAIpC7C,UAAU7rB,UAAU2uB,SAAW,SAAUH,WACvC,IAAMI,gBAAkB10B,KAAK0zB,cAAcY,UAAUF,YACrD,IAAMI,SAAWF,UAAUE,UAAY,aACvC,IAAMG,KAAO,IAAIC,KAAK,CAACF,iBAAkB,CAAE12B,KAAMw2B,WACjD,IAAMK,WAAah+B,OAAOi+B,KAAOj+B,OAAOk+B,UACxC,IAAMC,SAAWH,WAAWI,gBAAgBN,MAC5C,IAAMO,IAAM,IAAIC,MAChBD,IAAIz5B,IAAMu5B,SACV,OAAOE,KAgBTzhC,OAAOJ,QAAUs+B,UACjBA,UAAUqB,MAAQ,SAAUn4B,MAC1B,IAAIu6B,OAAS,IAAIzD,UACjB,OAAOyD,OAAOpC,MAAMn4B,gaC1HNm2B,iBAAAA,iBAhEhB,SAASqE,iBAAiBvyB,OACxB,UAAWA,QAAU,SAAU,CAE7B,GAAIA,MAAMnL,QAAQ,SAAW,EAAG,CAC9B,OAAOmL,MAAMhL,MAAM,GAGrB,IAAIw9B,QAAUxyB,MAAM8O,MAAM,yBAC1B,GAAI0jB,QAAS,CACX,IAAM9hB,MAAQ+hB,SAASD,QAAQ,GAAI,IACnC,MAAO,CAACA,QAAQ,GAAI9hB,OAItB8hB,QAAUxyB,MAAM8O,MAAM,kBACtB,GAAI0jB,QAAS,CACX,IAAME,OAAQD,SAASD,QAAQ,GAAI,IACnC,MAAO,CAAC,YAAaE,SAIzB,OAAO,KAGT,SAASC,kBAAkBC,OAAQC,SACjC,IAAMC,QAAUP,iBAAiBK,QACjC,GAAIE,QAAS,CACX,IAAMC,MAAQD,QAAQ,GACtB,IAAMpiB,MAAQoiB,QAAQ,GACtB,IAAMxG,OAASuG,QAAQE,QAAUF,QAAQE,OAAOriB,OAChD,GAAI4b,OAAQ,CACV,OAAOA,OAETpV,QAAQiB,MAAR,wBAAsCya,OAAtC,OAAmDG,MAAnD,IAA4DriB,OAE9D,OAAO,KAIT,SAASsiB,0BAA0BhE,KAAMiE,QAASJ,SAAuB,IAAdK,QAAchM,UAAAz2B,OAAA,GAAAy2B,UAAA,KAAA/oB,UAAA+oB,UAAA,GAAJ,GACnE,IAAM0L,OAAS5D,KAEf,IAAM1C,OAASqG,kBAAkBC,OAAQC,SACzC,GAAIvG,OAAQ,CACV,OAAOA,OAIT,GAAIlV,MAAM+b,QAAQP,QAAS,CACzB,OAAOA,OAAOr2B,IAAI,SAAA62B,SAAA,OAAWJ,0BAA0BI,QAASH,QAASJ,QAASK,WAIpF,GAAIN,SAAW,cAAeA,SAAP,YAAA,YAAAzgB,QAAOygB,WAAW,SAAU,CACjD,IAAMS,UAAY,GAClB,IAAK,IAAM1uB,OAAOiuB,OAAQ,CACxBS,UAAU1uB,KAAOquB,0BAA0BJ,OAAOjuB,KAAMsuB,QAASJ,QAASK,SAE5E,OAAOG,UAGT,OAAOT,OAGF,SAAS1E,iBAAiBc,KAAM6D,SAAuB,IAAdK,QAAchM,UAAAz2B,OAAA,GAAAy2B,UAAA,KAAA/oB,UAAA+oB,UAAA,GAAJ,GACxD,OAAO8L,0BAA0BhE,KAAMA,KAAM6D,QAASK,yECmBxCjF,iBAAAA,iBApFhB,IAAM/jB,OAASja,QAAQ,uBAMnBA,QAAQ,wBAHVk9B,sCAAAA,6BACAQ,+CAAAA,sCACAE,2CAAAA,kCAKF,SAASyF,uBAAuBjD,YAAaS,YAC3C,IAAMrgC,OAAS4/B,YAAYjC,WAAa0C,WACxC,IAAMyC,aAAe,IAAIC,YAAY/iC,QACrC,IAAMgjC,YAAc,IAAIpH,WAAWgE,aACnC,IAAMqD,YAAc,IAAIrH,WAAWkH,cACnC,IAAK,IAAIzjC,EAAI,EAAGA,EAAIW,OAAQX,IAAK,CAC/B4jC,YAAY5jC,GAAK2jC,YAAY3C,WAAahhC,GAE5C,OAAOyjC,aAGT,SAASI,sBAAsBC,SAAUtC,YACvC,IAAML,UAAYpD,kCAAkC+F,SAAS1C,eAC7D,IAAMC,WAAahE,6BAA6ByG,SAAS14B,MACzD,IAAMk2B,kBAAoBzD,sCAAsCiG,SAAS1C,eACzE,IAAMzgC,OAASmjC,SAASrJ,MAAQ4G,WAChC,IAAM/C,WAAawF,SAASrJ,MAAQ4G,WAAaC,kBACjDlnB,OAAOkkB,YAAc,GAAKA,YAAckD,WAAWlD,YACnD,MAAO,CAAE6C,UAAAA,UAAWxgC,OAAAA,OAAQ29B,WAAAA,YAG9B,SAASyF,gBAAgBxD,YAAagB,YAAarC,MAEjD,IAAM8E,UAAY9E,KAAK8E,WAAa,GAEpC,IAAMC,gBAAkB,GAExB,IAAK,IAAIjkC,EAAI,EAAGA,EAAIgkC,UAAUrjC,SAAUX,EAAG,CACzC,IAAM8jC,SAAWE,UAAUhkC,GAC3Boa,OAAO0pB,UAEP,IAAMtC,WAAaD,YAAYuC,SAAStC,YAExC,GAAIA,WAAY,CAAA,IAAA0C,sBAEgBL,sBAAsBC,SAAUtC,YAAtDL,UAFM+C,sBAEN/C,UAAWxgC,OAFLujC,sBAEKvjC,OACnB,IAAMo8B,MAAQ,IAAIoE,UAAUZ,YAAaiB,WAAWR,WAAYrgC,QAEhEo8B,MAAM+G,SAAWA,SACjBG,gBAAgBl+B,KAAKg3B,QAIzB,OAAOkH,gBAGT,SAASE,aAAa5D,YAAagB,YAAarC,MAE9C,IAAMkF,OAASlF,KAAKkF,QAAU,GAE9B,IAAMC,aAAe,GAErB,IAAK,IAAIrkC,EAAI,EAAGA,EAAIokC,OAAOzjC,SAAUX,EAAG,CACtC,IAAMskC,MAAQF,OAAOpkC,GACrBoa,OAAOkqB,OAEP,GAAIA,MAAM9C,aAAenzB,UAAW,CAClCg2B,aAAat+B,KAAK,MAClB,SAGF,IAAMy7B,WAAaD,YAAY+C,MAAM9C,YACrCpnB,OAAOonB,YAGP,IAAMzE,MAAQ,IAAIR,WAAWgE,YAAaiB,WAAWR,WAAYQ,WAAWlD,YAE5EvB,MAAMwH,MAAQD,MACdD,aAAat+B,KAAKg3B,OAGpB,OAAOsH,aAGF,SAASlG,iBAAiBoC,YAAarB,KAAMF,kBAElD,GAAIA,iBAAkB,CACpBuB,YAAciD,uBAAuBjD,YAAavB,kBAGpD,IAAMuC,YAAcrC,KAAKqC,aAAe,GAExC,IAAK,IAAIvhC,EAAI,EAAGA,EAAIuhC,YAAY5gC,SAAUX,EAAG,CAC3C,IAAMwhC,WAAaD,YAAYvhC,GAC/Boa,OAAOonB,WAAWlD,YAAc,GAGlC,MAAO,CAEL0F,UAAWD,gBAAgBxD,YAAagB,YAAarC,MACrDkF,OAAQD,aAAa5D,YAAagB,YAAarC,0GC5FnCsF,WAAAA,mBAIAC,GAAAA,WASAx5B,OAAAA,OAhBhB,IAAMmP,OAASja,QAAQ,UAEvB,IAAIukC,IAAM,GACH,SAASF,aACdE,IAAM,GAGD,SAASD,GAAGr5B,KAAMu5B,YAAa3iB,IACpC,IAAI9U,KAAOw3B,IAAIt5B,MAAQs5B,IAAIt5B,OAAS,GACpC,UAAWu5B,cAAgB,SAAU,CACnCz3B,KAAKy3B,aAAe3iB,OACf,CACL9U,KAAKnH,KAAK,CAAC4+B,YAAa3iB,MAIrB,SAAS/W,OAAOG,KAAMw5B,OAC3B,IAAI13B,KAAOw3B,IAAIt5B,MACf,IAAK8B,KAAM,CACT,OAEF,OAAQ9B,MACN,IAAK,UACL,IAAK,QACH,GAAI8B,KAAK03B,MAAMC,SAAU,CACvB33B,KAAK03B,MAAMC,SAASz5B,KAAMw5B,OAE5B,MACF,IAAK,UACL,IAAK,YACH,CACE,IAAI/6B,EAAI+6B,MAAME,MACd,IAAIh7B,EAAI86B,MAAMG,MACd,IAAIC,OAASJ,MAAMI,OACnB,IAAK,IAAI/2B,GAAK,EAAGA,GAAKf,KAAKvM,SAAUsN,GAAI,CACvC,IAAI2B,KAAO1C,KAAKe,IAChB,IAAIsE,IAAM3C,KAAK,GACf,GAAI/F,GAAK0I,IAAI1I,GAAKA,EAAI0I,IAAI1I,EAAI0I,IAAItL,GAAK6C,GAAKyI,IAAIzI,GAAKA,EAAIyI,IAAIzI,EAAIyI,IAAIrL,IAAMqL,IAAIyyB,OAAS,GAAKzyB,IAAIyyB,SAAWA,QAAS,CACnHp1B,KAAK,GAAGxE,KAAMw5B,OACd,QAGL,MACH,QACExqB,OAAO,wTC0IG6qB,cAAAA,sBAKAj0B,iBAAAA,yBAkBAX,gBAAAA,wBAuWAxI,QAAAA,gBAmLAygB,UAAAA,kBAoDAa,SAAAA,iBAuCA+b,YAAAA,oBAUAnyB,oBAAAA,4BAKAoyB,SAAAA,iBAMAC,WAAAA,mBAIAC,WAAAA,mBAuBAC,UAAAA,kBA8BAC,UAAAA,kBAQAC,gBAAAA,wBAIAC,YAAAA,oBAcAC,WAAAA,mBAIAC,QAAAA,gBAaAC,YAAAA,oBAaA30B,UAAAA,kBAcA40B,WAAAA,mBA4DAC,cAAAA,sBAGAC,kBAAAA,0BAGAC,gBAAAA,wBAQAC,YAAAA,oBAoCAC,cAAAA,sBAqCAC,mBAAAA,2BAmBAC,KAAAA,aA+CAC,UAAAA,kBAkDAC,SAAAA,iBAyBAC,SAAAA,SAvvChB,IAAMnsB,OAASja,QAAQ,UACvB,IAAMmO,SAAWnO,QAAQ,8BACHA,QAAQ,aAAtBwK,mBAAAA,UACR,IAAM7C,OAAS3H,QAAQ,eACvB,IAAMqmC,SAAWrmC,QAAQ,iBACzB,IAAMuK,cAAgBvK,QAAQ,0BACtBsmC,IAAmB7iC,KAAnB6iC,IAAKxrB,IAAcrX,KAAdqX,IAAKE,KAASvX,KAATuX,KAClB,IAAMpL,aAAe5P,QAAQ,mCACLA,QAAQ,cAAxBumC,sBAAAA,0BAC2DvmC,QAAQ,cAAnE+T,eAAAA,KAAMyyB,gBAAAA,MAAOC,iBAAAA,OAAQC,qBAAAA,WAAYC,gBAAAA,MAAOC,kBAAAA,QAASC,gBAAAA,MAEzD,IAAMC,QAAU,EAChB,IAAMC,GAAK,EACX,IAAMC,KAAO,EACb,IAAMC,UAAY,EAGlB,IAAMC,eAAiB,KACvB,IAAIC,mBAAqB,KAEzB,IAAIC,UAAY,MAET,IAAMC,IAAA/mC,QAAA+mC,KAAO,EACb,IAAMC,YAAAhnC,QAAAgnC,aAAe,EAErB,IAAIv2B,KAAAzQ,QAAAyQ,KAAO,CAChBw2B,UAAW,EACXC,IAAK,EACLC,MAAO,GACPC,OAAQ,GACRC,MAAO,GACPC,KAAM,GACNC,IAAK,GACL72B,IAAK,GACL82B,MAAO,GACPC,OAAQ,GACRC,SAAU,GACVC,IAAK,GACLC,KAAM,GACNC,KAAM,GACNpB,GAAI,GACJqB,MAAO,GACPpB,KAAM,GACNqB,IAAK,GACLC,IAAK,GACLC,cAAe,IACfC,OAAQ,IACRC,MAAO,IACPC,MAAO,IACPC,MAAO,MAET,WACE,IAAK,IAAI76B,GAAK,EAAGA,IAAM,KAAMA,GAAI,CAC/BiD,KAAA,IAASjD,IAAQ,IAAMA,GAEzB,IAAK,IAAImb,IAAK,GAAIA,KAAM,KAAMA,IAAI,CAEhClY,KAAKnD,OAAO8uB,aAAazT,MAAOA,MANpC,GASA,UAAW2f,QAAU,WAAY,CAE/BtoC,QArCSyQ,KAqCTA,KAAO,IAAI63B,MAAM73B,KAAM,CACrB1F,IAAK,SAAAA,IAAUw9B,OAAQC,MACrB,IAAIpZ,IAAMmZ,OAAOC,MACjB7uB,OAAOyV,KACP,OAAOA,OAIN,IAAMqZ,IAAAzoC,QAAAyoC,IAAM,CACjBC,EAAG,EACHC,OAAQ,EACRC,EAAG,EACHp2B,OAAQ,EACRq2B,EAAG,EACHC,EAAG,EACHC,GAAI,EACJC,YAAa,EACbC,GAAI,EACJC,aAAc,EACdC,GAAI,EACJC,aAAc,EACdC,GAAI,EACJC,cAAe,EACfre,KAAM,EACNse,MAAO,EACPC,WAAY,GACZC,YAAa,GACbhD,GAAI,GACJC,KAAM,GACNmB,KAAM,GACNC,MAAO,GACP4B,UAAW,GACXC,YAAa,GACbC,YAAa,GACbC,aAAc,IAGhB,IAAIC,kBAAA,EAEJ,IAAIhuB,YAAA,EACJ,IAAIiuB,cAAgB,GACpB,IAAIC,WAAa,GACjB,IAAIC,aAAe,GACnB,IAAIC,UAAYz2B,OAChB,IAAI02B,eAAiB12B,OACrB,IAAI22B,mBAAqB,MACzB,IAAIC,oBAAsB,MAC1B,IAAIC,WAAa,GACjB,IAAIC,YAAc,EAClB,IAAIC,6BAA+B,EACnC,IAAMC,6BAA+B,EAErC,IAAIC,eAAiB,MACrB,IAAIC,kBAAoB,MAExB,IAAIC,QAAU,GAEP,IAAIC,WAAA7qC,QAAA6qC,WAAa5gC,cAAcyD,QAAQ,aAAc,OACrD,IAAIo9B,SAAA9qC,QAAA8qC,SAAW7gC,cAAcyD,QAAQ,WAAY,OAExDxD,UAAUQ,cAAc,YAAa,CACnCC,KAAMT,UAAU6gC,SAChBjgC,MAAO,CAAC,EAAG,GACXC,IAAK,SAAAA,MAAA,OAAM+7B,WACX3hC,IAAK,SAAAA,IAAA8F,GAAA,OAAK67B,UAAY77B,KAGxB,SAAS+/B,eAAe7G,OACtB,GAAIA,OAASA,MAAM8G,UAAW,CAG5B,GAAI9G,MAAM8G,UAAY,OAAS5jC,OAAO+X,OAAS,KAAM,CACnD,OAAO/X,OAAO+X,OAEhB,OAAO+kB,MAAM8G,UAEf,OAAO5jC,OAAO+X,OAGhB,SAAS8rB,UAAUp5B,IAAKq5B,MAAO5G,OAAQJ,OACrCx3B,KAAKy+B,MAAQ33B,OACb9G,KAAK0+B,MAAQ,EACb1+B,KAAK2+B,QAAUx5B,IAAIrN,MAAM,GACzBkI,KAAK4+B,UAAYz5B,IAAIrN,MAAM,GAC3BkI,KAAKw+B,MAAQA,MACbx+B,KAAK43B,OAASA,OACd53B,KAAK6+B,WAAapkB,KAAKD,MACvBxa,KAAK8+B,WAAa,MAClB9+B,KAAK++B,qBAAuB,MAC5B/+B,KAAKg/B,QAAU,EACfh/B,KAAKi/B,UAAY,EACjBj/B,KAAKyf,MAAQsa,KACb/5B,KAAKk/B,UAAY,EACjBl/B,KAAKm/B,YAAcd,eAAe7G,OAEpC+G,UAAUz4B,UAAUs5B,KAAO,SAAU5H,MAAO6H,SAC1C,GAAIA,QAAS,CACXr/B,KAAKi/B,YAEPj/B,KAAKyf,MAAQsa,KACb/5B,KAAKm/B,YAAcd,eAAe7G,QAGpC,SAAS8H,UACPt/B,KAAKi/B,UAAY,EAEjBj/B,KAAKm/B,YAAc,EACnBn/B,KAAKk/B,UAAY,EACjBl/B,KAAKg/B,QAAU,EACfh/B,KAAKyf,MAAQqa,GAEfwF,QAAQx5B,UAAUy5B,MAAQ,SAAU/H,SAChCx3B,KAAKg/B,QACPh/B,KAAKk/B,WAAab,eAAe7G,OAASx3B,KAAKm/B,YAC/Cn/B,KAAKyf,MAAQqa,IAGf,SAAS0F,gBACP9F,MAAM6D,UAAW7iC,OAAOqC,MAAQ,GAAMmE,SAASrI,mBAAoB6B,OAAOmC,OAAS,GAAMqE,SAASrI,oBAG7F,SAASg/B,gBACd,OAAOl1B,aAAa88B,WAEtB,IAAIC,qBAAA,IAA2BrF,YAExB,SAASz2B,iBAAiB+7B,MAC/Bh9B,aAAai9B,MAAMD,MAErB,SAASE,qBACP,GAAI3B,WAAY,CACd,OAEF,IAAI4B,WAAa7B,QAAQyB,sBACzBF,gBACA,GAAIM,WAAY,CACdtG,OAAOsG,WAAWlB,UAAWrB,WAC7BuC,WAAWrgB,MAAQsa,KACnB+F,WAAWX,YAAczkC,OAAO+X,WAC3B,CACLqtB,WAAa7B,QAAQyB,sBAAwB,IAAInB,UAAUhB,UAAW,MAAOlD,YAAa,MAE5FwD,6BAA+BC,6BAE1B,SAAS76B,kBACd,IAAI68B,WAAa7B,QAAQyB,sBACzB,GAAII,WAAY,CACdtG,OAAOsG,WAAWnB,QAASpB,WAE3BuC,WAAWrgB,MAAQqa,GAErBn3B,aAAao9B,OACblC,6BAA+BC,6BAGjC,IAAIkC,gBAAA,EACJ,IAAMC,KAAO,CAAEC,UAAW,EAAGC,mBAAoB,EAAGC,KAAM,EAAGC,cAAe,EAAGzhB,KAAM,GACrF,SAAS0hB,SAAS9I,OAChB,GAAIA,QAAUwI,WAAY,CACxB,OAEFA,WAAaxI,MACb,IAAI+I,MAAQ,GACZ,IAAK,IAAInkB,KAAKob,MAAO,CACnB,IAAIl5B,EAAIk5B,MAAMpb,GACd,IAAK9d,UAAYA,IAAM,YAAc8d,EAAE3c,gBAAkB2c,GAAK6jB,KAAK7jB,GAAI,CACrE,SAEFmkB,MAAM5nC,KAAQyjB,EAAd,KAAmB9d,EAAEkiC,IAAMliC,IAE7B0b,QAAQyD,IAAO/iB,OAAO0J,mBAAtB,IAA4CozB,MAAMx5B,KAAlD,KAA0D65B,gBAAkB,SAAW,UAAvF,IAAmG0I,MAAMvoC,KAAK,MAGhH,SAASyoC,gBAAgBjJ,OACvB,OAAOA,MAAMoE,OAAO8E,UAAY,SAAW//B,OAAO62B,MAAMoE,OAAO+E,WAAWhpC,QAAQ,aAAe,EAGnG,SAASwuB,QAAQqR,OAEf,IAAKiJ,gBAAgBjJ,OAAQ,CAC3BA,MAAMzyB,iBACNyyB,MAAMoJ,mBAIV,IAAIC,iBAAmB,MACvB,SAASC,UAAUtuC,GAEjBA,EAAEuS,iBAEFvS,EAAEuuC,YAAc,iCAElB,SAASC,cAAc1nB,QACrB,GAAIA,SAAWunB,iBAAkB,CAC/B7mB,QAAQyD,IAAI,kBACZ5mB,OAAOgO,iBAAiB,eAAgBi8B,UAAW,OACnDD,iBAAmB,UACd,IAAKvnB,QAAUunB,iBAAkB,CACtC7mB,QAAQyD,IAAI,oBACZ5mB,OAAOoqC,oBAAoB,eAAgBH,UAAW,OACtDD,iBAAmB,OAIvB,SAASK,QAAQ1J,OACfwJ,cAAcxJ,MAAM2J,SACpB,IAAIhuC,KAAOqkC,MAAMC,QACjB,IAAKgJ,gBAAgBjJ,OAAQ,CAC3BA,MAAMoJ,kBACNpJ,MAAMzyB,iBAGR,GAAI5R,OAAS2Q,KAAKC,KAAO8zB,gBAAiB,CACxC50B,kBAIF,IAAIm+B,GAAKhE,cAAcjqC,MACvB,GAAIiuC,IAAMA,GAAG3hB,QAAUsa,KAAM,CAC3BqH,GAAG7B,MAAM/H,OAGX4B,SAASv7B,OAAO,QAAS25B,OAG3B,SAAS6J,UAAU7J,OACjBwJ,cAAcxJ,MAAM2J,SACpB,IAAIhuC,KAAOqkC,MAAMC,QACjB,IAAI6J,QAAUb,gBAAgBjJ,QAAUrkC,MAAQ2Q,KAAKy9B,IAAMpuC,MAAQ2Q,KAAK09B,KACxEruC,OAAS2Q,KAAK29B,IAAMjK,MAAMkK,QAAUlK,MAAMmK,SAAWnK,MAAM2J,SAAW3J,MAAMoK,UAC5E,IAAKN,QAAS,CACZ9J,MAAMoJ,kBACNpJ,MAAMzyB,iBAGRu0B,cAGA,IAAI8H,GAAKhE,cAAcjqC,MACvB,IAAKiuC,GAAI,CACPA,GAAKhE,cAAcjqC,MAAQ,IAAImsC,QAEjC,GAAI8B,GAAG3hB,QAAUsa,KAAM,GAEnBqH,GAAGnC,UACLmC,GAAG3hB,MAAQsa,KACXqH,GAAGjC,YAAcd,eAAe7G,OAGhC4B,SAASv7B,OAAO,UAAW25B,QAI/B,IAAIqK,YAAc,MAClB,IAAIC,WAAah7B,OACjB,IAAIi7B,cAAgB,EACpB,IAAIC,mBAAqB,EACzB,SAASC,YAAYzK,MAAO8J,SAG1B,IAAKb,gBAAgBjJ,SAAW8J,SAAW9J,MAAMI,SAAW,EAAG,CAC7DJ,MAAMzyB,iBACNyyB,MAAMoJ,kBACN,GAAI1C,WAAY,CACd5gC,cAAc0D,QAAQ,aAAc,OACpC3N,QAhNK6qC,WAgNLA,WAAa,MAEf,GAAIC,SAAU,CACZ7gC,cAAc0D,QAAQ,WAAY,OAClC3N,QAnNK8qC,SAmNLA,SAAW,OAGf0D,YAAc,KAIdtE,UAAU,GAAK/F,MAAME,MACrB6F,UAAU,GAAK/F,MAAMG,MAQrB8F,mBAAqB,MAErB,IAAIyE,aAAe,MACnB,GAAIrK,gBAAiB,CACnB2H,gBACA,GAAIhI,MAAM2K,WAAa3K,MAAM4K,UAAW,CAGtC,IAAI5kB,GAAKga,MAAM8G,WAAa7jB,KAAKD,MACjC,IAAI6nB,SAAWhJ,IAAI7B,MAAM2K,WAAa9I,IAAI7B,MAAM4K,WAChD,GAAIC,SAAW,MAAQA,SAAW,EAAIN,eAAiBvkB,GAAKwkB,mBAAqB,KAAO,CACtFhoB,QAAQyD,IAAR,+CAA2D+Z,MAAM2K,UAAjE,IAA8E3K,MAAM4K,eAC/E,CACL1I,MAAMoI,WAAYtK,MAAM2K,WAAa,EAAG3K,MAAM4K,WAAa,GAC3DF,aAAe,KAEjBH,cAAgBM,SAChBL,mBAAqBxkB,QAElB,CACLoc,MAAMkI,WAAYvE,UAAWC,gBAC7B,GAAIsE,WAAW,IAAMA,WAAW,GAAI,CAClCI,aAAe,KAEjB1I,OAAOgE,eAAgBD,WAEzB,GAAI2E,cAAgBrE,8BAAgCpE,WAAWqI,YAAc,IAAM,IAAK,CAKtFI,aAAe,MAEjB,GAAIA,aAAc,CAChB,IAAK,IAAItK,OAASyC,YAAazC,OAAS+F,WAAWpqC,SAAUqkC,OAAQ,CACnE,GAAI+F,WAAW/F,SAAWA,SAAWyC,aAAexC,gBAAiB,CACnE,IAAIiI,WAAa7B,QAAA,IAAYrG,QAC7B,GAAIkI,WAAY,CACdvG,MAAMuG,WAAWrB,MAAOqB,WAAWrB,MAAOqD,YAC1ChC,WAAWpB,OAASrF,IAAIyI,WAAW,IAAMzI,IAAIyI,WAAW,IACxDtI,OAAOsG,WAAWnB,QAASpB,eAOrC,SAAS+E,YAAY9K,OACnB,GAAI2C,UAAW,CACbmG,SAAS9I,OAEXyK,YAAYzK,OACZ8B,cACA,IAAIiJ,SAAW9B,gBAAgBjJ,OAE/B,IAAII,OAASJ,MAAMI,OACnB+F,WAAW/F,QAAU2F,UAAUzlC,MAAM,GACrC,IAAI0qC,SAAA,IAAe5K,OACnB,GAAIqG,QAAQuE,UAAW,CACrBhJ,OAAOyE,QAAQuE,UAAU5D,UAAWrB,eAC/B,CACLU,QAAQuE,UAAY,IAAIjE,UAAUhB,UAAW,MAAO3F,OAAQJ,OAE9DyG,QAAQuE,UAAUpD,KAAK5H,OAAQ+K,UAC/B,IAAKA,SAAU,CACbnJ,SAASv7B,OAAO,YAAa25B,QAIjC,SAASiL,UAAUjL,OACjB,GAAI2C,UAAW,CACbmG,SAAS9I,OAEXyK,YAAYzK,OACZ,IAAI+K,SAAW9B,gBAAgBjJ,OAC/B,IAAII,OAASJ,MAAMI,OACnB,GAAI+F,WAAW/F,QAAS,CACtB,IAAI4K,SAAA,IAAe5K,OACnB,IAAIkI,WAAa7B,QAAQuE,UACzB,GAAI1C,WAAY,CACdtG,OAAOsG,WAAWnB,QAASpB,WAC3B,IAAKgF,SAAU,CACbzC,WAAWd,UAEbc,WAAWrgB,MAAQqa,GACnBgG,WAAWZ,WAAab,eAAe7G,OAASsI,WAAWX,mBAEtDxB,WAAW/F,QAEpB,IAAK2K,SAAU,CACbnJ,SAASv7B,OAAO,UAAW25B,QAI/B,SAASkL,QAAQlL,OACfyK,YAAYzK,MAAO,MACnB,IAAIiH,OAASjH,MAAMmL,QAAUnL,MAAMoL,aAAepL,MAAMqL,OACxD,GAAIpE,MAAQ,EAAG,CACbb,mBACK,GAAIa,MAAQ,EAAG,CACpBb,eAIJ,IAAIkF,UAAYh8B,OAChB,IAAIi8B,kBAAoB,EACxB,SAASC,cAAcxL,OAKrB8B,cACA,IAAK4E,WAAY,CACf5gC,cAAc9E,IAAI,aAAc,MAChCnF,QAtVO6qC,WAsVPA,WAAa,KAEf,GAAIC,SAAU,CACZ7gC,cAAc9E,IAAI,WAAY,MAC9BnF,QAzVO8qC,SAyVPA,SAAW,KAEb,GAAI3G,MAAMyL,aAAe,MAAO,CAC9BzL,MAAMzyB,iBAER,IAAIm+B,GAAK1L,MAAMyG,QACf,IAAIkF,KAAO,GAEX,IAAIC,UAAYF,GAAG3vC,OACnB,IAAI8vC,UAAYD,UAEhB,IAAK,IAAIviC,GAAK,EAAGA,GAAKuiC,YAAaviC,GAAI,CACrC,IAAI29B,MAAQ0E,GAAGriC,IACf,IAAIyiC,WAAarF,QAAQO,MAAM+E,YAC/B7J,MAAMoJ,UAAWtE,MAAM9G,MAAO8G,MAAM7G,OACpC,IAAK2L,WAAY,CACfA,WAAarF,QAAQO,MAAM+E,YAAc,IAAIhF,UAAUuE,UAAW,KAAM,EAAGtL,OAC3E8L,WAAWlE,KAAK5H,MAAO,QACrB6L,UACFjK,SAASv7B,OAAO,YAAa2gC,WACxB,CACL5E,MAAMkI,WAAYgB,UAAWQ,WAAW3E,SACxCpF,MAAM+J,WAAW7E,MAAO6E,WAAW7E,MAAOqD,YAC1CwB,WAAW5E,OAASrF,IAAIyI,WAAW,IAAMzI,IAAIyI,WAAW,IACxDtI,OAAO8J,WAAW3E,QAASmE,WAG7BK,KAAK3E,MAAM+E,YAAc,KACzB,GAAItJ,gBAAkBmJ,YAAc,EAAG,CAErC5J,OAAO+D,UAAWuF,WAClBrF,mBAAqB,MAIzB,IAAI+F,oBAAA,EACJ,IAAIC,aAAe,GACnB,IAAK,IAAIjD,MAAMvC,QAAS,CACtB,IAAKkF,KAAK3C,IAAK,CACb,IAAIkD,OAAQzF,QAAQuC,IACpB,GAAIkD,OAAMlF,OAASkF,OAAMjkB,QAAUsa,KAAM,GACrCsJ,UACFG,eAAiBE,OACjBD,aAAa9qC,KAAK6nC,IAClBpH,SAASv7B,OAAO,UAAW,CAAE65B,MAAOgM,OAAM/E,QAAQ,GAAIhH,MAAO+L,OAAM/E,QAAQ,KAC3E+E,OAAM1E,UACN0E,OAAMjkB,MAAQqa,GACd4J,OAAMxE,WAAab,eAAe7G,OAASkM,OAAMvE,YACjDuE,OAAMC,QAAU,OAItB,IAAK,IAAIC,KAAK,EAAGA,KAAKH,aAAalwC,SAAUqwC,KAAI,CAC/C,IAAIC,IAAKJ,aAAaG,MACtB,IAAIE,QAAQ7F,QAAQ4F,KAGpB,IAAIE,OAAA,OAAehB,yBACZ9E,QAAQ4F,KACf5F,QAAQ8F,QAAUD,QAEpB,GAAI7J,eAAgB,CAClB,GAAIoJ,YAAc,GAAKD,YAAc,EAAG,QAC/BzF,WAAW,GAClBnE,OAAO+D,UAAWiG,eAAe7E,SACjClB,mBAAqB,UAChB,GAAI2F,YAAc,EAAG,CAC1B,IAAIY,QAAQd,GAAG,GACf,IAAKG,UAAW,CACd1F,WAAW,GAAK72B,KAAKk9B,QAAMtM,MAAOsM,QAAMrM,OAE1C+B,MAAM6D,UAAWyG,QAAMtM,MAAOsM,QAAMrM,OACpC8F,mBAAqB,UAChB,GAAI2F,UAAY,EAAG,QAEjBzF,WAAW,KAKxB,SAASsG,cAAcC,KACrBlD,cAAc,OACd,IAAK,IAAI7tC,QAAQiqC,cAAe,CAC9B,IAAIgE,GAAKhE,cAAcjqC,MACvB,GAAIiuC,GAAG3hB,QAAUsa,KAAM,CACrBqH,GAAG7B,MAAM2E,OAKf,IAAIC,WAAa,GACjB,SAASC,eACP,GAAIlK,mBAAoB,CACtBiK,WAAWrI,IAAIZ,MAAQY,IAAIkB,YAC3BmH,WAAWrI,IAAIX,OAASW,IAAIoB,aAC5BiH,WAAWrI,IAAIhC,IAAMgC,IAAIiB,UACzBoH,WAAWrI,IAAI/B,MAAQ+B,IAAImB,aAIxB,SAASxiC,QAAQ4pC,QAAS9iC,QAC/B4N,OAASk1B,QACT1hC,aAAalI,QAAQ0U,OAAQ0wB,oBAC7B,GAAIt+B,OAAO24B,qBAAuBj5B,UAAW,CAC3Ci5B,mBAAqB34B,OAAO24B,mBAE9BiD,aAAe57B,OAAO47B,aACtBiH,eAEA,IAAIE,cAAgB,MACpB,IACE,IAAIC,KAAOtlC,OAAOkb,eAAe,GAAI,UAAW,CAC9C/b,IAAK,SAAAA,MACHkmC,cAAgB,CAAEE,QAAS,OAC3B,OAAO,SAGX3tC,OAAOgO,iBAAiB,OAAQ,KAAM0/B,MACtC1tC,OAAOoqC,oBAAoB,OAAQ,KAAMsD,MACzC,MAAO/xC,GACP8xC,cAAgB,MAGlBztC,OAAOgO,iBAAiB,UAAWw8B,UAAW,OAC9CxqC,OAAOgO,iBAAiB,QAASq8B,QAAS,OAE1CrqC,OAAOgO,iBAAiB,QAASshB,QAAS,OAC1CtvB,OAAOgO,iBAAiB,cAAeshB,QAAS,OAChDtvB,OAAOgO,iBAAiB,YAAao9B,YAAa,OAClDprC,OAAOgO,iBAAiB,YAAay9B,YAAa,OAClDzrC,OAAOgO,iBAAiB,UAAW49B,UAAW,OAC9C,GAAI5rC,OAAO4tC,WAAY,CACrB5tC,OAAOgO,iBAAiB,QAAS69B,QAAS4B,mBACrC,CACLztC,OAAOgO,iBAAiB,iBAAkB69B,QAAS,OACnD7rC,OAAOgO,iBAAiB,aAAc69B,QAAS,OAGjD7rC,OAAOgO,iBAAiB,OAAQo/B,cAAe,OAC/CptC,OAAOgO,iBAAiB,QAASo/B,cAAe,OAEhD90B,OAAOtK,iBAAiB,aAAcm+B,cAAesB,eACrDn1B,OAAOtK,iBAAiB,YAAam+B,cAAesB,eACpDn1B,OAAOtK,iBAAiB,WAAYm+B,cAAesB,eACnDn1B,OAAOtK,iBAAiB,cAAem+B,cAAesB,eAMxD,IAAMI,SAAW,IACjB,IAAMC,YAAcD,SAAWA,SAC/B,IAAME,WAAa,EACnB,IAAMC,cAAgB,IAEtB,SAASC,eAAe3yB,KACtB,IAAI4yB,IAAMzH,aAAanrB,KACvB,IAAK4yB,IAAK,CACRA,IAAMzH,aAAanrB,KAAO,CACxBquB,GAAIruB,IACJwI,UAAW,EACXqqB,OAAQ,IAAI9qB,MAAM0qB,aAEpB,IAAK,IAAI/jC,GAAK,EAAGA,GAAK+jC,aAAc/jC,GAAI,CACtCkkC,IAAIC,OAAOnkC,IAAMiG,OAEnBu2B,WAAWlrB,KAAO,GAEpB,OAAO4yB,IAGT,SAASE,eAAeF,IAAKG,GAAIpvC,EAAGqvC,SAClC,GAAIrvC,IAAMovC,GAAGC,SAAU,CACrBD,GAAGC,SAAWnL,UACd,IAAKmE,SAAU,CACb7gC,cAAc0D,QAAQ,WAAY,MAClC3N,QAzgBK8qC,SAygBLA,SAAW,KAEb,GAAIgH,UAAYhI,aAAc,CAC5B,IAAIqF,SAAA,IAAeuC,IAAIvE,GACvB,GAAIvC,QAAQuE,UAAW,CACrBhD,gBACAhG,OAAOyE,QAAQuE,UAAU5D,UAAWrB,eAC/B,CACLU,QAAQuE,UAAY,IAAIjE,UAAUhB,UAAW,MAAO,EAAG,MAEzDU,QAAQuE,UAAUpD,KAAK,KAAM,YAE1B,IAAKtpC,GAAKovC,GAAGC,SAAU,CAC5BD,GAAGC,SAAWtL,QACd,GAAIsL,UAAYhI,aAAc,CAC5B,IAAIiI,UAAA,IAAeL,IAAIvE,GACvB,IAAIV,WAAa7B,QAAQmH,WACzB,GAAItF,WAAY,CACdN,gBACAhG,OAAOsG,WAAWnB,QAASpB,WAC3BuC,WAAWd,UACXc,WAAWrgB,MAAQqa,GACnBgG,WAAWZ,WAAaxkC,OAAO+X,OAASqtB,WAAWX,eAM3D,SAASkG,gBACP,IAAIC,SAAW7zB,UAAU6zB,UAAY7zB,UAAU8zB,gBAAkB9zB,UAAU+zB,aAAe/zB,UAAU+zB,eAAiB/zB,UAAUg0B,mBAAqBh0B,UAAUg0B,oBAE9J,GAAIH,SAAU,CACZ,IAAII,YAAcJ,SAAS/xC,OAC3B,IAAK,IAAIsN,GAAK,EAAGA,GAAK6kC,YAAa7kC,KAAM,CACvC,IAAI8kC,QAAUL,SAASzkC,IACvB,IAAK8kC,QAAS,CACZ,SAEF,IAAIZ,IAAMD,eAAejkC,IACzB,IAAIqkC,GAAK7H,WAAWx8B,IAEpB,GAAIkkC,IAAIpqB,UAAYgrB,QAAQhrB,UAAW,CACrC,IAAIirB,QAAUD,QAAQC,QACtBb,IAAIpqB,UAAYgrB,QAAQhrB,UAExB,IAAIkrB,WAAaD,QAAQryC,OACzB,IAAK,IAAId,EAAI,EAAGA,EAAIozC,WAAYpzC,IAAK,CACnC,IAAIqQ,MAAQ8iC,QAAQnzC,GACpB,WAAWqQ,QAAP,YAAA,YAAAmS,QAAOnS,UAAU,SAAU,CAC7BA,MAAQA,MAAMA,MAEhBA,MAAQA,MAAQ,GAChBmiC,eAAeF,IAAKG,GAAIpiC,MAAOrQ,IAKnC,IAAIqzC,KAAOH,QAAQG,KACnB,GAAIA,KAAKvyC,QAAUqxC,WAAa,EAAG,CACjC,IAAK,IAAI5Y,GAAI,EAAGA,GAAI4Y,aAAc5Y,GAAG,CACnC,IAAI+Z,KAAOhB,IAAIC,OAAOhZ,IACtB0N,MAAMqM,KAAMD,KAAK9Z,GAAI,IAAK8Z,KAAK9Z,GAAI,EAAI,IACvC,IAAIga,UAAYvM,WAAWsM,MAC3B,GAAIC,UAAYrB,YAAa,CAC3BqB,UAAYj4B,KAAKi4B,WAGjBrM,QAAQoM,KAAMA,KAAM,EAAIC,WAGxBA,UAAYn4B,IAAIm4B,UAAW,GAG3BA,WAAaA,UAAYtB,WAAa,EAAIA,UAE1C/K,QAAQoM,KAAMA,KAAMC,eACf,CACLtM,MAAMqM,KAAM,EAAG,GAIjB,GAAI/Z,IAAK,GAAKmR,eAAiBl8B,UAAW,CACxC,IAAI6+B,WAAa7B,QAAA,IAAY8G,IAAIvE,IACjC,GAAIV,WAAY,CACdnG,QAAQmI,WAAYiE,KAAMrrC,OAAO8X,iBACjC+mB,MAAMuG,WAAWrB,MAAOqB,WAAWrB,MAAOqD,YAC1ChC,WAAWpB,OAASrF,IAAIyI,WAAW,IAAMzI,IAAIyI,WAAW,IACxDtC,gBACAhG,OAAOsG,WAAWnB,QAASpB,aAMjC0H,eAAeF,IAAKG,GAAIH,IAAIC,OAAO,GAAG,IAAMH,cAAe/I,IAAIkB,aAC/DiI,eAAeF,IAAKG,GAAIH,IAAIC,OAAO,GAAG,GAAKH,cAAe/I,IAAIoB,cAC9D+H,eAAeF,IAAKG,GAAIH,IAAIC,OAAO,GAAG,IAAMH,cAAe/I,IAAImB,aAC/DgI,eAAeF,IAAKG,GAAIH,IAAIC,OAAO,GAAG,GAAKH,cAAe/I,IAAIiB,cAM/D,SAAS7hB,YAGd,GAAI2iB,6BAA8B,GAC9BA,6BAIJ,IAAIprB,OAAS/X,OAAO+X,OACpB,IAAK,IAAItf,QAAQiqC,cAAe,CAC9B,IAAIgE,GAAKhE,cAAcjqC,MACvB,GAAIiuC,GAAG3hB,QAAUsa,KAAM,CACrBqH,GAAGlC,WAAazsB,OAAS2uB,GAAGjC,YAC5B,IAAKiC,GAAGlC,UAAW,CAEjBkC,GAAGlC,UAAY,EAGjBkC,GAAGjC,YAAc1sB,QAIrB,IAAK,IAAI+vB,YAAYvE,QAAS,CAC5B,IAAI6B,WAAa7B,QAAQuE,UACzB,GAAI1C,WAAWrgB,QAAUsa,KAAM,CAC7B+F,WAAWZ,WAAazsB,OAASqtB,WAAWX,YAE5CW,WAAWX,YAAc1sB,QAI7BirB,oBAAsB,MACtB2H,gBACAjM,SAAShC,aACT,GAAI6G,QAAQyB,wBAA0B7H,gBAAiB,CACrD50B,mBAIJ,SAASgjC,gBAAgB5mC,KACvBJ,OAAOD,KAAKK,KAAK6mC,QAAQ,SAAAC,SACvB,OAAQ9mC,IAAI8mC,UACV,KAAKnM,UACH36B,IAAI8mC,SAAWpM,KACf,MACF,KAAKF,eACIx6B,IAAI8mC,SACX,MACF,YAIC,SAASpqB,SAASqqB,YACvB,IAAK,IAAIjzC,QAAQiqC,cAAe,CAC9B,IAAIgE,GAAKhE,cAAcjqC,MACvB,GAAIiuC,GAAG3hB,QAAUqa,GAAI,CACnBsD,cAAcjqC,MAAQ,YACfiqC,cAAcjqC,UAChB,CACLiuC,GAAGpC,QAAU,EACboC,GAAGnC,UAAY,EACfmC,GAAGlC,UAAY,GAInB7B,WAAW6I,QAAQD,iBACnB,IAAKG,WAAY,CACf,IAAK,IAAI5D,YAAYvE,QAAS,CAC5B,IAAI6B,WAAa7B,QAAQuE,UACzB,GAAI1C,WAAWrgB,QAAUqa,GAAI,CAI3BmE,QAAQuE,UAAY,YACbvE,QAAQuE,cACV,CACL1C,WAAWrB,MAAM,GAAKqB,WAAWrB,MAAM,GAAK,EAC5CqB,WAAWhB,WAAa,MACxBgB,WAAWf,qBAAuB,MAClCe,WAAWd,QAAU,EACrBc,WAAWb,UAAY,EACvBa,WAAWZ,UAAY,GAG3BtB,YAAc,EACdI,kBAAoB,MAEtBD,eAAiB,MACjB8D,YAAc,MAGT,SAAS/J,YAAYsO,YAE1BrqB,SAASqqB,YACT,IAAKA,WAAY,CACf1I,oBAAsB,KACtBM,kBAAoB,KAEtBD,eAAiB,KAGZ,SAASp4B,sBACdmyB,YAAY,MAIP,SAASC,SAASv8B,KACvBA,IAAMA,KAAOsL,OACb5F,SAAS/G,aAAaqB,IAAK+hC,WAC3B,OAAO/hC,IAGF,SAASw8B,aACd,OAAO6J,YAGF,SAAS5J,aACd,IAAIxV,IAAMmb,YACVA,YAAc,EACd,OAAOnb,IAGT,SAAS4jB,cAAc9iB,OACrBA,MAAQA,OAAS,GACjB,MAAO,CACL9mB,EAAG8mB,MAAM9mB,IAAMwE,UAAYC,SAAS/H,SAAWoqB,MAAM9mB,EACrDC,EAAG6mB,MAAM7mB,IAAMuE,UAAYC,SAAS9H,SAAWmqB,MAAM7mB,EACrD7C,EAAG0pB,MAAM1pB,IAAMoH,UAAYC,SAAS3H,QAAUgqB,MAAM1pB,EACpDC,EAAGypB,MAAMzpB,IAAMmH,UAAYC,SAAS1H,QAAU+pB,MAAMzpB,EACpD89B,OAAQrU,MAAMqU,SAAW32B,UAAYm5B,IAAM7W,MAAMqU,QAIrD,IAAI0O,UAAYx/B,OAChB,SAASy/B,SAASphC,IAAKoe,OACrBriB,SAAS/G,aAAamsC,UAAWnhC,KACjC,OAAOmhC,UAAU,IAAM/iB,MAAM9mB,IAAM8mB,MAAM1pB,IAAM2sC,UAAYF,UAAU,GAAK/iB,MAAM9mB,EAAI8mB,MAAM1pB,IAAMysC,UAAU,IAAM/iB,MAAM7mB,IAAM6mB,MAAMzpB,IAAM0sC,UAAYF,UAAU,GAAK/iB,MAAM7mB,EAAI6mB,MAAMzpB,GAG9K,SAASo+B,UAAU3U,OACxB,GAAIma,qBAAuB7F,gBAAiB,CAC1C,OAAO,MAETtU,MAAQA,OAAS,GACjB,IAAIkjB,UAAYJ,cAAc9iB,OAG9B,IAAKA,MAAM7d,KAAM,CACf,IAAK,IAAI86B,MAAMvC,QAAS,CACtB,IAAIO,MAAQP,QAAQuC,IACpB,GAAI+F,SAAS/H,MAAMG,QAAS8H,WAAY,CACtCjI,MAAMS,UAAY,EAClBT,MAAMQ,QAAU,EAChB,IAAKzb,QAAUA,MAAMmjB,YAAa,CAChClI,MAAMM,WAAa,QAM3B,GAAIyH,SAAShJ,UAAWkJ,WAAY,CAClC,IAAKljB,MAAM7d,KAAM,CACfg4B,oBAAsB,KAExB,OAAO,KAET,OAAO,MAGF,SAASvF,UAAUP,QACxB,GAAIA,SAAWwC,IAAK,CAClB,OAAOjC,UAAU,IAAMA,UAAU,GAEnCP,OAASA,QAAU,EACnB,OAAQoG,mBAAqBL,WAAW/F,QAGnC,SAASQ,kBACd,OAAOqF,mBAGF,SAASpF,YAAY9U,OAC1B,GAAIya,kBAAmB,CACrB,OAAO,MAET,IAAIyI,UAAYJ,cAAc9iB,OAC9B,IAAK,IAAIid,MAAMvC,QAAS,CACtB,IAAIO,MAAQP,QAAQuC,IACpB,GAAI+F,SAAS/H,MAAMG,QAAS8H,WAAY,CACtC,OAAOH,UAAUxuC,MAAM,IAG3B,OAAO,MAGF,SAASwgC,aACd,OAAOr5B,OAAOD,KAAKi/B,SAAS1qC,OAGvB,SAASglC,QAAQ4N,SACtB,GAAIpI,eAAgB,CAClB,OAAO,EAET,IAAIqD,GAAKhE,cAAc+I,SACvB,IAAK/E,GAAI,CACP,OAAO,EAET,GAAIA,GAAG3hB,QAAUsa,KAAM,CACrB/sB,OAAOo0B,GAAGlC,WAEZ,OAAOkC,GAAGlC,UAEL,SAAS1G,YAAY2N,QAAS5B,MACnC,GAAIA,MAAQA,KAAK5gC,cAAgBo6B,eAAgB,CAC/C3E,SAAS/B,GAAG,UAAW8O,QAAS5B,KAAK5gC,aAGvC,IAAIy9B,GAAKhE,cAAc+I,SACvB,IAAK/E,GAAI,CACP,OAAO,EAET,IAAI7uC,EAAI6uC,GAAGnC,UACXmC,GAAGnC,UAAY,EACf,OAAO1sC,EAEF,SAASsR,UAAUsiC,QAAS5B,MACjC,GAAIA,MAAQA,KAAK5gC,cAAgBo6B,eAAgB,CAC/C3E,SAAS/B,GAAG,QAAS8O,QAAS5B,KAAK5gC,aAGrC,IAAIy9B,GAAKhE,cAAc+I,SACvB,IAAK/E,GAAI,CACP,OAAO,EAET,IAAI7uC,EAAI6uC,GAAGpC,QACXoC,GAAGpC,QAAU,EACb,OAAOzsC,EAGF,SAASkmC,WAAW9kC,IAAKgzC,WAAYC,UAC1C55B,OAAO25B,YAAc,GAAKA,WAAa/B,YACvC,GAAIgC,WAAa3lC,UAAW,CAC1B,IAAI4lC,IAAM//B,OACV4yB,MAAM/lC,IAAK,EAAG,GACd,IAAK,IAAIkN,GAAK,EAAGA,GAAKy8B,aAAa/pC,SAAUsN,GAAI,CAC/C43B,WAAWoO,IAAKF,WAAY9lC,IAC5B04B,MAAM5lC,IAAKA,IAAKkzC,KAElB,OAEF,IAAI7B,OAASF,eAAe8B,UAAU5B,OACtCxL,OAAO7lC,IAAKqxC,OAAO2B,aAGrB,SAASG,sBAAsB/B,IAAKG,GAAIC,SACtC,GAAID,GAAGC,SAAU,CACf,OAAOzqC,OAAO8X,gBAEhB,OAAO,EAET,SAASu0B,0BAA0BhC,IAAKG,GAAIC,SAC1C,GAAID,GAAGC,WAAanL,UAAW,CAC7BkL,GAAGC,SAAWpL,KACd,OAAOr/B,OAAO8X,gBAEhB,OAAO,EAET,SAASw0B,wBAAwBjC,IAAKG,GAAIC,SACxC,GAAID,GAAGC,WAAatL,QAAS,QACpBqL,GAAGC,SACV,OAAOzqC,OAAO8X,gBAEhB,OAAO,EAGT,SAASy0B,gBAAgBlyB,GAAIowB,QAASyB,UACpC55B,OAAOm4B,UAAYlkC,WACnB,IAAI1O,EAAI,EAER,GAAIq0C,WAAa3lC,UAAW,CAC1B,IAAK,IAAIJ,GAAK,EAAGA,GAAKw8B,WAAW9pC,SAAUsN,GAAI,CAC7CtO,GAAK00C,gBAAgBlyB,GAAIowB,QAAStkC,IAEpC,OAAOtO,EAGT,GAAIyrC,kBAAmB,CACrB,OAAO,EAET,IAAI+G,IAAMzH,aAAasJ,UACvB,IAAK7B,IAAK,CACR,OAAO,EAET,IAAIG,GAAK7H,WAAWuJ,UAEpBr0C,GAAK4xC,WAAWgB,UAAYpwB,GAAGgwB,IAAKG,GAAIf,WAAWgB,WAAa,EAChE5yC,GAAKwiB,GAAGgwB,IAAKG,GAAIC,SACjB,OAAO5yC,EAEF,SAASmmC,cAAcyM,QAASyB,UACrC,OAAOK,gBAAgBH,sBAAuB3B,QAASyB,UAElD,SAASjO,kBAAkBwM,QAASyB,UACzC,OAAOK,gBAAgBF,0BAA2B5B,QAASyB,UAEtD,SAAShO,gBAAgBuM,QAASyB,UACvC,OAAOK,gBAAgBD,wBAAyB7B,QAASyB,UAG3D,IAAIhI,UAAY93B,OAChB,IAAI63B,QAAU73B,OACd,IAAI23B,MAAQ33B,OAEL,SAAS+xB,YAAYtV,OAC1BA,MAAQA,OAAS,GACjB,IAAIkjB,UAAYJ,cAAc9iB,OAC9B,IAAIqU,OAAS6O,UAAU7O,OACvB,IAAIsP,eAAiB3jB,MAAM4jB,UAAY,GAEvC,IAAK,IAAI3E,YAAYvE,QAAS,CAC5B,IAAI6B,WAAa7B,QAAQuE,UACzB,IAAK1C,WAAWd,WAAapH,SAAWwC,KAAOxC,SAAWkI,WAAWlI,SAAWkI,WAAWpB,MAAQwI,eAAgB,CACjH,SAEF,GAAIX,SAASzG,WAAWnB,QAAS8H,WAAY,CAC3C,IAAKljB,MAAM7d,KAAM,CACfo6B,WAAWd,QAAU,EAEvB,MAAO,CACLpH,OAAQkI,WAAWlI,OACnBzyB,IAAKmhC,UAAUxuC,MAAM,GACrB+mC,WAAYiB,WAAWjB,aAK7B,GAAItb,MAAM5f,cAAgBq6B,oBAAsBN,oBAAqB,CAEnE,IAAKna,MAAM6jB,KAAM,CACf7jB,MAAM6jB,KAAO,GAEf7jB,MAAM6jB,KAAKxP,cAAgBrU,MAAM8jB,kBAAoB,SAAW9jB,MAAM8jB,gBAAkBzP,OACxF12B,SAAS3G,qBAAqBgpB,MAAM6jB,KAAMX,WAC1CrN,SAAS/B,GAAG,UAAW9T,MAAM6jB,KAAM7jB,MAAM5f,aAE3C,OAAO,MAETtQ,QAAQoS,MAAQozB,YAET,SAASC,cAAcvV,OAC5BA,MAAQA,OAAS,GACjB,IAAIkjB,UAAYJ,cAAc9iB,OAC9B,IAAIqU,OAAS6O,UAAU7O,OAEvB,IAAK,IAAI4K,YAAYvE,QAAS,CAC5B,IAAI6B,WAAa7B,QAAQuE,UACzB,IAAK1C,WAAWb,aAAerH,SAAWwC,KAAOxC,SAAWkI,WAAWlI,QAAS,CAC9E,SAEF,GAAI2O,SAASzG,WAAWnB,QAAS8H,WAAY,CAC3C,IAAKljB,MAAM7d,KAAM,CACfo6B,WAAWb,UAAY,EAEzB,MAAO,CACLrH,OAAQkI,WAAWlI,OACnBzyB,IAAKmhC,UAAUxuC,MAAM,GACrB+mC,WAAYiB,WAAWjB,aAK7B,GAAItb,MAAM5f,cAAgBq6B,oBAAsBN,oBAAqB,CAEnE,IAAKna,MAAM6jB,KAAM,CACf7jB,MAAM6jB,KAAO,GAEf7jB,MAAM6jB,KAAKxP,OAASA,OACpB12B,SAAS3G,qBAAqBgpB,MAAM6jB,KAAMX,WAC1CrN,SAAS/B,GAAG,YAAa9T,MAAM6jB,KAAM7jB,MAAM5f,aAE7C,OAAO,MAMF,SAASo1B,mBAAmBxV,OACjCA,MAAQA,OAAS,GACjB,IAAIkjB,UAAYJ,cAAc9iB,OAC9B,IAAIqU,OAAS6O,UAAU7O,OACvB,IAAK,IAAI4K,YAAYvE,QAAS,CAC5B,IAAI6B,WAAa7B,QAAQuE,UACzB,KAAM5K,SAAWwC,KAAOxC,SAAWkI,WAAWlI,QAAS,CACrD,SAEF,GAAI2O,SAASzG,WAAWlB,UAAW6H,WAAY,CAC7C3G,WAAWb,UAAY,EAEvBa,WAAWlB,UAAU,GAAKkB,WAAWlB,UAAU,GAAK4H,SAEpD1G,WAAWpB,MAAQ8H,WAKlB,SAASxN,KAAKzV,OACnBA,MAAQA,OAAS,GACjB,IAAIkjB,UAAYJ,cAAc9iB,OAC9B,IAAIqU,OAAS6O,UAAU7O,OACvB,IAAI0P,SAAW/jB,MAAM+jB,UAAY,EAEjC,IAAK,IAAI9E,YAAYvE,QAAS,CAC5B,IAAI6B,WAAa7B,QAAQuE,UACzB,KAAM5K,SAAWwC,KAAOxC,SAAWkI,WAAWlI,SAAWkI,WAAWhB,WAAY,CAC9E,SAEF,GAAIyH,SAASzG,WAAWlB,UAAW6H,WAAY,CAC7CvlC,SAAS9G,kBAAkBqkC,MAAO,CAACqB,WAAWpB,MAAQ,EAAGoB,WAAWpB,MAAQ,IAC5E,IAAIA,MAAQD,MAAM,GAAKA,MAAM,GAC7B,GAAIC,MAAQ4I,SAAU,CACpB,SAEF,IAAK/jB,MAAM7d,KAAM,CACfo6B,WAAWhB,WAAa,KAE1B,IAAIyI,aAAezH,WAAWb,UAC9B,GAAI1b,MAAMikB,WAAY,CACpB1H,WAAWb,UAAYa,WAAWd,QAAU,EAE9C,GAAIzb,MAAMkkB,QAAS,CACjB3H,WAAW4H,aAAenkB,MAAMkkB,QAElCvmC,SAAS/G,aAAaykC,UAAWkB,WAAWlB,WAC5C19B,SAAS/G,aAAawkC,QAASmB,WAAWnB,SAC1Cz9B,SAAS9G,kBAAkBqkC,MAAOqB,WAAWrB,OAC7C,MAAO,CACLE,QAAAA,QACAC,UAAAA,UACAH,MAAAA,MACAC,MAAAA,MACA9G,OAAQkI,WAAWlI,OACnB4G,MAAOsB,WAAWtB,MAClBK,WAAYiB,WAAWjB,WACvB0I,aAAAA,aACArI,UAAWY,WAAWZ,YAI5B,OAAO,KAIF,SAASjG,UAAU1V,OACxBA,MAAQA,OAAS,GACjB,IAAIkjB,UAAYJ,cAAc9iB,OAC9B,IAAIqU,OAAS6O,UAAU7O,OACvB,IAAIuP,SAAW5jB,MAAM4jB,UAAY,EACjC,IAAIQ,SAAWpkB,MAAMokB,UAAY,IAEjC,IAAK,IAAInF,YAAYvE,QAAS,CAC5B,IAAI6B,WAAa7B,QAAQuE,UACzB,KAAM5K,SAAWwC,KAAOxC,SAAWkI,WAAWlI,SAAWkI,WAAW8H,sBAAuB,CACzF,SAEF,GAAIrB,SAASzG,WAAWlB,UAAW6H,WAAY,CAC7CvlC,SAAS9G,kBAAkBqkC,MAAO,CAACqB,WAAWpB,MAAQ,EAAGoB,WAAWpB,MAAQ,IAC5E,IAAIA,MAAQD,MAAM,GAAKA,MAAM,GAC7B,GAAIC,MAAQyI,SAAU,CACpB,SAEF,IAAIU,KAAOptB,KAAKD,MAAQslB,WAAWjB,WACnC,GAAIgJ,KAAOF,SAAU,CACnB,SAEF,IAAKpkB,MAAM7d,KAAM,CAEfo6B,WAAW8H,sBAAwB,KAErC,IAAIL,aAAezH,WAAWb,UAC9B,GAAI1b,MAAMikB,WAAY,CACpB1H,WAAWb,UAAYa,WAAWd,QAAU,EAE9C99B,SAAS/G,aAAaykC,UAAWkB,WAAWlB,WAC5C19B,SAAS/G,aAAawkC,QAASmB,WAAWnB,SAC1Cz9B,SAAS9G,kBAAkBqkC,MAAOqB,WAAWrB,OAC7C,MAAO,CACLqJ,WAAY,KACZnJ,QAAAA,QACAC,UAAAA,UACAH,MAAAA,MACAC,MAAAA,MACA9G,OAAQkI,WAAWlI,OACnB4G,MAAOsB,WAAWtB,MAClBK,WAAYiB,WAAWjB,WACvB0I,aAAAA,aACArI,UAAWY,WAAWZ,YAI5B,OAAO,KAGF,SAAShG,SAAS3V,OACvBA,MAAQA,OAAS,GACjB,IAAIkjB,UAAYJ,cAAc9iB,OAC9B,IAAIqU,OAAS6O,UAAU7O,OAEvB,IAAK,IAAI4K,YAAYvE,QAAS,CAC5B,IAAI6B,WAAa7B,QAAQuE,UAEzB,KAAM5K,SAAWwC,KAAOxC,SAAWkI,WAAWlI,SAAWkI,WAAWhB,aAAegB,WAAW4H,aAAc,CAC1G,SAEF,IAAK5H,WAAWd,QAAS,CACvB,SAEF,GAAIuH,SAASzG,WAAWnB,QAAS8H,WAAY,CAC3C,IAAKljB,MAAM7d,KAAM,CAEfo6B,WAAWhB,WAAa,KAE1B,MAAO,CAAE4I,aAAc5H,WAAW4H,eAGtC,OAAO,KAGF,SAASvO,SAAS5V,OACvBA,MAAQA,OAAS,GACjB,IAAIkjB,UAAYJ,cAAc9iB,OAC9B,IAAIqU,OAAS6O,UAAU7O,OAEvB,IAAK,IAAI4K,YAAYvE,QAAS,CAC5B,IAAI6B,WAAa7B,QAAQuE,UACzB,KAAM5K,SAAWwC,KAAOxC,SAAWkI,WAAWlI,SAAWkI,WAAWhB,YAAcgB,WAAWf,uBAC5Fe,WAAW4H,aAAc,CACxB,SAEF,GAAI5H,WAAWrgB,QAAUsa,KAAM,CAC7B,SAEF,GAAIwM,SAASzG,WAAWnB,QAAS8H,WAAY,CAE3C,IAAKljB,MAAM7d,KAAM,CACfo6B,WAAWf,qBAAuB,KAEpC79B,SAAS/G,aAAawkC,QAASmB,WAAWnB,SAC1C,MAAO,CACLA,QAAAA,QACA+I,aAAc5H,WAAW4H,eAI/B,OAAO,mOC1wCOK,KAAAA,aAmDAC,SAAAA,iBAeAC,SAAAA,SA5EhB,IAAMvtC,OAAS3H,QAAQ,eACvB,IAAMmO,SAAWnO,QAAQ,iBACzB,IAAM0P,MAAQ1P,QAAQ,cACtB,IAAMm1C,GAAKn1C,QAAQ,WAEnB,IAAIo1C,YAAc,GAClB,IAAIC,SAAW,cAIR,SAASL,KAAKxkB,OAAO,IACpB9mB,EAA2C8mB,MAA3C9mB,EAAGC,EAAwC6mB,MAAxC7mB,EAAG7C,EAAqC0pB,MAArC1pB,EAAGC,EAAkCypB,MAAlCzpB,EAAG2iB,IAA+B8G,MAA/B9G,IAAK4rB,SAA0B9kB,MAA1B8kB,SAAUzmC,YAAgB2hB,MAAhB3hB,YACjC,IAAK6a,IAAI7K,MAAMw2B,UAAW,CACxB3rB,IAASxlB,SAASY,SAASywC,SAA3B,KAAwC7rB,IAE1C,IAAIhV,IAAShL,EAAT,IAAcC,EAClB,IAAI+iB,MAAQ0oB,YAAY1gC,KACxB,IAAKgY,MAAO,CACVA,MAAQ0oB,YAAY1gC,KAAO,CAAE8gC,QAAS,OAExC,IAAI/lC,KAAO0lC,GAAG3jC,QAAQ3C,YAAa6d,MAAMjd,MACzCid,MAAM+oB,MAAQ9tC,OAAO0J,mBACrB,GAAI5B,OAASid,MAAMjd,KAAM,CACvBid,MAAMjd,KAAOA,KACb,GAAIA,KAAM,CAERA,KAAKgC,YAAc,GACnB,IAAIikC,OAASxxC,SAASyN,cAAc,KACpC+jC,OAAOjkC,YAAc,IACrBikC,OAAO9H,UAAY,qBACnB8H,OAAO9jC,aAAa,SAAU,UAC9B8jC,OAAO9jC,aAAa,OAAQ8X,KAC5BgD,MAAMhD,IAAMA,IACZ,GAAI4rB,SAAU,CACZI,OAAOC,QAAU,SAAU5jC,IACzBA,GAAGC,iBACH0a,MAAM8oB,QAAU,MAGpB/lC,KAAKwC,YAAYyjC,QACjBhpB,MAAMgpB,OAASA,QAGnB,GAAIjmC,KAAM,CACR,GAAIia,MAAQgD,MAAMhD,IAAK,CACrBgD,MAAMgpB,OAAO9jC,aAAa,OAAQ8X,KAClCgD,MAAMhD,IAAMA,IAGd,IAAItX,IAAMjE,SAASjH,QAAQwC,EAAGC,GAC9B8F,KAAK4C,MAAMvJ,KAAUsJ,IAAI,GAAzB,IACA3C,KAAK4C,MAAMrJ,IAASoJ,IAAI,GAAxB,IACA,IAAIE,KAAOnE,SAAShH,SAASL,EAAGC,GAChC0I,KAAK4C,MAAMrI,MAAWsI,KAAK,GAA3B,IACA7C,KAAK4C,MAAMvI,OAAYwI,KAAK,GAA5B,IAEF,IAAIkjC,QAAU9oB,MAAM8oB,QACpB9oB,MAAM8oB,QAAU,MAChB,OAAOA,QAGF,SAASP,SAASzkB,OAAO,IACxBolB,WAA2DplB,MAA3DolB,WAAYC,iBAA+CrlB,MAA/CqlB,iBAAkBnsC,EAA6B8mB,MAA7B9mB,EAAGC,EAA0B6mB,MAA1B7mB,EAAG8E,EAAuB+hB,MAAvB/hB,EAAGga,UAAoB+H,MAApB/H,UAAW1Z,KAASyhB,MAATzhB,KAExD,IAAIjI,EAAIquC,GAAGh3B,KAAKqU,eAAeojB,WAAYntB,UAAW1Z,MACtD,IAAIhI,EAAI0hB,UACR,IAAIqtB,UAAYpmC,MAAMy1B,UAAU,CAAEz7B,EAAAA,EAAGC,EAAAA,EAAG7C,EAAAA,EAAGC,EAAAA,EAAG4L,KAAM,SAAYjD,MAAM21B,kBACtE,IAAIhzB,MAAQyjC,UAAYD,iBAAmBD,WAC3CT,GAAGh3B,KAAK6T,UAAU3f,MAAO3I,EAAGC,EAAG8E,EAAGga,UAAW1Z,MAC7C,IAAIgnC,YAAc,EAClBZ,GAAGa,SAAStsC,EAAGC,EAAI5C,EAAIgvC,YAAarsC,EAAI5C,EAAG6C,EAAI5C,EAAIgvC,YAAatnC,EAAI,GAAKsnC,YAAa,IAAM1jC,MAAMoc,YAClG+B,MAAM1pB,EAAIA,EACV0pB,MAAMzpB,EAAIA,EACV,OAAOiuC,KAAKxkB,OAGP,SAAS0kB,WACd,IAAK,IAAIxgC,OAAO0gC,YAAa,CAC3B,IAAI1oB,MAAQ0oB,YAAY1gC,KACxB,GAAIgY,MAAM+oB,QAAU9tC,OAAO0J,mBAAqB,EAAG,QAC1C+jC,YAAY1gC,uICrETrJ,IAAAA,YASA5F,IAAAA,YASAwI,QAAAA,gBAIAD,QAAAA,gBAaAioC,SAAAA,iBASAC,UAAAA,kBAeAC,UAAAA,UArEhB71C,QAAQ81C,eAAiB,OAEzB,IAAIC,IAAM,WACR,IACEC,aAAaC,KAAO,OACpB,OAAOD,aACP,MAAO72C,GACP,MAAO,IALD,GAQH,SAAS4L,IAAIqJ,KAClBA,IAASpU,QAAQ81C,eAAjB,IAAmC1hC,IACnC,IAAIgb,IAAM2mB,IAAI3hC,KACd,GAAIgb,MAAQ,YAAa,CACvBA,IAAMxhB,UAER,OAAOwhB,IAGF,SAASjqB,IAAIiP,IAAK3E,OACvB2E,IAASpU,QAAQ81C,eAAjB,IAAmC1hC,IACnC,GAAI3E,QAAU7B,WAAa6B,QAAU,KAAM,QAClCsmC,IAAI3hC,SACN,CACL2hC,IAAI3hC,KAAO3E,OAIR,SAAS9B,QAAQyG,IAAK3E,OAC3BtK,IAAIiP,IAAKsrB,KAAKwW,UAAUzmC,QAGnB,SAAS/B,QAAQ0G,IAAK+hC,KAC3B,IAAI1mC,MAAQ1E,IAAIqJ,KAChB,GAAI3E,QAAU7B,UAAW,CACvB,OAAOuoC,IAET,IACE,OAAOzW,KAAKC,MAAMlwB,OAClB,MAAOtQ,IAGT,OAAOg3C,IAGF,SAASR,SAASS,YACvB,IAAIC,OAAS,IAAIC,OAAJ,IAAet2C,QAAQ81C,eAAvB,KAAyCM,YAAc,IAAM,KAC1E,IAAK,IAAIhiC,OAAO2hC,IAAK,CACnB,GAAI3hC,IAAImK,MAAM83B,QAAS,QACdN,IAAI3hC,OAKV,SAASwhC,YACd,IAAIvhC,IAAM,GACV,IAAIgiC,OAAS,IAAIC,OAAJ,IAAet2C,QAAQ81C,eAAvB,QAA8C,KAC3D,IAAK,IAAI1hC,OAAO2hC,IAAK,CACnB,IAAIl3B,EAAIzK,IAAImK,MAAM83B,QAClB,GAAIx3B,EAAG,CACL,IAAI5T,EAAI8qC,IAAI3hC,KACZ,GAAInJ,GAAKA,IAAM,YAAa,CAC1BoJ,IAAIwK,EAAE,IAAM5T,IAIlB,OAAOy0B,KAAKwW,UAAU7hC,KAGjB,SAASwhC,UAAUU,YACxB,IAAIliC,IAAMqrB,KAAKC,MAAM4W,YACrBZ,WACA,IAAK,IAAIvhC,OAAOC,IAAK,CACnBlP,IAAIiP,IAAKC,IAAID,uECxEDoiC,MAAAA,cAMAC,YAAAA,oBAeAC,OAAAA,OArBT,SAASF,QACd,IAAIt3C,EAAI,IAAIqB,aAAa,IACzBrB,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAK,EACrB,OAAOA,EAGF,SAASu3C,YAAYn2C,KAC1BA,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,GAAK,EACTA,IAAI,IAAM,EACVA,IAAI,IAAM,EAGL,SAASo2C,OAAOp2C,IAAKV,EAAG6C,GAC7B,IAAIk0C,GAAK/2C,EAAE,GACX,IAAIg3C,GAAKh3C,EAAE,GACX,IAAIi3C,GAAKj3C,EAAE,GACX,IAAIk3C,GAAKl3C,EAAE,GACX,IAAIm3C,GAAKn3C,EAAE,GACX,IAAIo3C,GAAKp3C,EAAE,GACX,IAAIq3C,GAAKr3C,EAAE,GACX,IAAIs3C,GAAKt3C,EAAE,GACX,IAAIu3C,GAAKv3C,EAAE,GACX,IAAIw3C,GAAKx3C,EAAE,GACX,IAAImB,IAAMnB,EAAE,IACZ,IAAIoB,IAAMpB,EAAE,IAEZ,IAAI8C,GAAKD,EAAE,GACX,IAAIE,GAAKF,EAAE,GACX,IAAIG,GAAKH,EAAE,GACX,IAAII,GAAKJ,EAAE,GACX,IAAI40C,GAAK50C,EAAE,GACX,IAAI60C,GAAK70C,EAAE,GACX,IAAI80C,GAAK90C,EAAE,GACX,IAAI+0C,GAAK/0C,EAAE,GACX,IAAIg1C,GAAKh1C,EAAE,GAEXnC,IAAI,GAAKoC,GAAKi0C,GAAK9zC,GAAK+zC,GAAKW,GAAKV,GAClCv2C,IAAI,GAAKqC,GAAKg0C,GAAKU,GAAKT,GAAKY,GAAKX,GAClCv2C,IAAI,GAAKsC,GAAK+zC,GAAKW,GAAKV,GAAKa,GAAKZ,GAClCv2C,IAAI,GAAKoC,GAAKo0C,GAAKj0C,GAAKk0C,GAAKQ,GAAKP,GAClC12C,IAAI,GAAKqC,GAAKm0C,GAAKO,GAAKN,GAAKS,GAAKR,GAClC12C,IAAI,GAAKsC,GAAKk0C,GAAKQ,GAAKP,GAAKU,GAAKT,GAClC12C,IAAI,GAAKoC,GAAKu0C,GAAKp0C,GAAKq0C,GAAKK,GAAKJ,GAClC72C,IAAI,GAAKqC,GAAKs0C,GAAKI,GAAKH,GAAKM,GAAKL,GAClC72C,IAAI,GAAKsC,GAAKq0C,GAAKK,GAAKJ,GAAKO,GAAKN,GAClC72C,IAAI,GAAKoC,GAAK00C,GAAKv0C,GAAK9B,IAAMw2C,GAAKv2C,IAAMyB,EAAE,GAC3CnC,IAAI,IAAMqC,GAAKy0C,GAAKC,GAAKt2C,IAAMy2C,GAAKx2C,IAAMyB,EAAE,IAC5CnC,IAAI,IAAMsC,GAAKw0C,GAAKE,GAAKv2C,IAAM02C,GAAKz2C,IAAMyB,EAAE,IAE5C,OAAOnC,oECiIOkwB,KAAAA,aAUAppB,QAAAA,QAhMhB,IAAMuS,OAASja,QAAQ,UAEvB,IAAMwM,KAAOxM,QAAQ,aACrB,IAAMg4C,WAAah4C,QAAQ,gCACcA,QAAQ,4BAAzCk9B,sCAAAA,6BACR,IAAM+a,SAAWj4C,QAAQ,eACzB,IAAM8T,QAAU9T,QAAQ,gBACxB,IAAM0K,SAAW1K,QAAQ,+BACRA,QAAQ,cAAjBiU,eAAAA,KAED,IAAI2Y,WAAAtsB,QAAAssB,WAAa,EAExB,IAAIsrB,QAAU,w0FACd,CACE,IAAI7e,IAAM,IAAI+C,WAAW8b,QAAQ13C,QACjC,IAAK,IAAIsN,GAAK,EAAGA,GAAKoqC,QAAQ13C,SAAUsN,GAAI,CAC1CurB,IAAIvrB,IAAMoqC,QAAQvkB,WAAW7lB,IAE/BoqC,QAAU7e,IAAIgD,OAGT,IAAIphB,OAAA3a,QAAA2a,OAAS,GAEb,IAAIk9B,gBAAA73C,QAAA63C,qBAAA,EACJ,IAAIC,gBAAA93C,QAAA83C,qBAAA,EAEX,SAASC,cACP/3C,QAJS63C,gBAITA,gBAAkBrkC,QAAQnT,OAAOmU,GAAGE,cAAe,aAAc,q/BACjE1U,QAJS83C,gBAITA,gBAAkBtkC,QAAQnT,OAAOmU,GAAGC,gBAAiB,aAAc,6iCAGrE,SAASujC,MAAM5uB,KACbzc,KAAKyc,IAAMA,IACX,IAAItK,IAAMsK,IAAIE,YAAY,KAC1B,GAAIxK,OAAS,EAAG,CACdnS,KAAKsrC,SAAW7uB,IAAI3kB,MAAM,EAAGqa,IAAM,OAC9B,CACLnS,KAAKsrC,SAAW,IAIpBD,MAAMvlC,UAAU+d,KAAO,WAAY,IAAA1f,MAAAnE,KACjC3M,QAhCSssB,WAgCPA,YAAF,EACA,IAAI9C,IAAM,IAAIC,eACdD,IAAIE,KAAK,MAAO/c,KAAKyc,IAAK,MAC1BI,IAAI0uB,aAAe,cACnB1uB,IAAI/lB,OAAS,WACXzD,QArCOssB,WAqCLA,YAAF,EACA,IACE,IAAI6rB,aAAe3uB,IAAI4uB,SACvB,IAAK5uB,IAAI6uB,SAAW,KAAO7uB,IAAI6uB,SAAW,IAAMF,aAAc,CAC5DrnC,MAAK6uB,MAAMwY,eAEb,MAAOh5C,GACPqE,OAAOM,QAAQ,sBAAuB,YAAa,EAAG,EAAG3E,KAG7DqqB,IAAIG,KAAK,OAGX,IAAM2uB,UAAY,CAChBC,QAAW,MAGbP,MAAMvlC,UAAUktB,MAAQ,SAAU6Y,UAChC,IAAIC,IAAMf,WAAW/X,MAAM6Y,UAC3B,IAAKC,IAAK,CACR,OAGF,IAAIC,SAAWD,IAAI/qC,UACnB,IAAIirC,KAAO,GACX,IAAK,IAAIhwB,IAAK,EAAGA,IAAK+vB,SAASE,OAAO14C,SAAUyoB,IAAI,CAClD,IAAIkwB,KAAOH,SAASE,OAAOjwB,KAC3B,IAAK,IAAI8B,GAAK,EAAGA,GAAKouB,KAAKC,WAAW54C,SAAUuqB,GAAI,CAClD,IAAIquB,WAAaD,KAAKC,WAAWruB,IACjC,IAAIsuB,SAAWL,SAASM,UAAUF,WAAWC,UAC7C,IAAIjtB,QAAU,KACd,GAAIitB,SAAU,CAEZ,IAAIE,KAAOF,SAASG,sBAAwB,IAAIC,kBAAoB,GACpE,IAAIC,YAAcV,SAAStuC,UAAYsuC,SAAStuC,SAAS6uC,IAAI94B,QAAU,GACvE,IAAIk5B,YAAcX,SAASY,UAAYZ,SAASY,SAASF,YAAYG,UAAY,GACjF,IAAI1V,MAAQ6U,SAAS/U,QAAU+U,SAAS/U,OAAOyV,YAAYriC,SAAW,GACtE,GAAI8sB,MAAM2V,IAAK,CACb,IAAItrC,OAAS,CACXkb,IAAA,GAAQzc,KAAKsrC,SAAWpU,MAAM2V,IAC9BriC,WAAYkiC,YAAYI,UACxBxiC,WAAYoiC,YAAYK,UACxBtiC,OAAQiiC,YAAYM,MACpBriC,OAAQ+hC,YAAYO,OAEtB9tB,QAAU1hB,SAASomB,KAAKtiB,SAG5B,IAAIsrB,OAAS,GACb,IAAI8I,QAAU,GACd,IAAIuX,KAAO,GACX,IAAIC,WAAa,EACjB,IAAIxf,WAAa,EACjB,IAAK,IAAIyf,QAAQjB,WAAWkB,WAAY,CACtC,GAAI1B,UAAUyB,MAAO,CACnB,SAEFpgC,OAAOnG,QAAQ2B,SAAS4kC,QAAUnsC,WAClC,IAAIqsC,UAAWvB,SAASnV,UAAUuV,WAAWkB,WAAWD,OACxDpgC,OAAOgI,MAAMs4B,UAAStZ,cAAe,MACrC,IAAIuZ,YAAc1lC,GAAGa,MACrB,IAAI8kC,WAAavd,6BAA6Bqd,UAAStvC,MACvDgP,OAAOwgC,YACP,IAAIC,cAAgBH,UAASjgB,MAC7B,IAAKM,WAAY,CACfA,WAAa8f,kBACR,CACLzgC,OAAOgI,MAAM2Y,WAAY8f,eAE3B5gB,OAAOl0B,KAAK,CAACkO,QAAQ2B,SAAS4kC,MAAOG,YAAaC,aAClD,IAAIpe,OAAS0c,IAAIjY,UAAUyZ,WAC3B3X,QAAQh9B,KAAKy2B,QACb8d,KAAKv0C,KAAK,GACVw0C,YAAc/d,OAAO77B,OAGvB,IAAIi6B,MAAQ,IAAI55B,aAAau5C,YAC7B,IAAIh7B,IAAM,EACV,IAAK,IAAIu7B,KAAO,EAAGA,KAAO/f,aAAc+f,KAAM,CAC5C,IAAK,IAAIC,MAAO,EAAGA,MAAO9gB,OAAOt5B,SAAUo6C,MAAM,CAC/C,IAAK,IAAIC,GAAK,EAAGA,GAAK/gB,OAAO8gB,OAAM,KAAMC,GAAI,CAC3CpgB,MAAMrb,OAASwjB,QAAQgY,OAAMT,KAAKS,YAKxC,IAAIjX,SAAWqV,SAASnV,UAAUuV,WAAW0B,SAC7C7gC,OAAO0pB,UACP1pB,OAAOgI,MAAM0hB,SAAS14B,KAAM,UAC5B,IAAIyuB,KAAOqf,IAAIjY,UAAU6C,UACzB,GAAIA,SAAS1C,gBAAkB,KAAM,CAEnChnB,OAAO2gB,WAAa,OAEpBlB,KAAO,IAAIJ,YAAYI,UAClB,CACLzf,OAAOgI,MAAM0hB,SAAS1C,cAAe,MAEvCgY,KAAKrzC,KAAK,CACR4G,KAAMA,KAAK7L,OAAOm5B,OAAQW,MAAOf,KAAM0f,WAAW1e,MAClDtO,QAAAA,WAKNnf,KAAKnF,KAAO,CACVmxC,KAAAA,OAKJX,MAAMvlC,UAAUqE,KAAO,SAAU2jC,KAC/B9C,SAASh/B,eAAe8hC,KACxBjnC,QAAQmD,KAAKkhC,gBAAiBC,gBAAiB,CAC7CnpB,MAAOhb,KAAK,EAAG,EAAG,EAAG,KAEvB,IAAIglC,KAAOhsC,KAAKnF,KAAKmxC,KACrB,IAAK,IAAIpI,KAAK,EAAGA,KAAKoI,KAAKz4C,SAAUqwC,KAAI,CACvC,IAAIl8B,IAAMskC,KAAKpI,MACf,GAAIl8B,IAAIyX,QAAS,CACf1hB,SAASuM,KAAK,EAAGtC,IAAIyX,SAEvBzX,IAAInI,KAAK4K,SAKbkhC,MAAMvlC,UAAUioC,SAAW,WACzB,IAAI/B,KAAOhsC,KAAKnF,KAAKmxC,KACrB,IAAK,IAAIgC,KAAK,EAAGA,KAAKhC,KAAKz4C,SAAUy6C,KAAI,CACvC,IAAItmC,IAAMskC,KAAKgC,MACftmC,IAAInI,KAAK4K,SAIN,SAAS0Z,KAAKpH,KACnB,GAAIzO,OAAOyO,KAAM,CACf,OAAOzO,OAAOyO,KAEhB,IAAIwxB,MAAQjgC,OAAOyO,KAAO,IAAI4uB,MAAM5uB,KACpCwxB,MAAMpzC,KAAOmT,OAAOkgC,IAAIrzC,KACxBozC,MAAMpqB,OACN,OAAOoqB,MAGF,SAASxzC,UACd2wC,cACA,IAAI+C,UAAYngC,OAAOkgC,IAAM,IAAI7C,MAAM,OACvC8C,UAAUnb,MAAMiY,qtBCpIFmD,oBAAAA,4BAwWA16C,OAAAA,OAnXhB,IAAMsZ,OAASja,QAAQ,UACvB,IAAMub,QAAUvb,QAAQ,gBACxB,IAAM0K,SAAW1K,QAAQ,8BACeA,QAAQ,cAAxC+T,cAAAA,KAAM0yB,gBAAAA,OAAQ6U,gBAAAA,OAAQC,eAAAA,oBACuBv7C,QAAQ,cAArDgU,eAAAA,KAAMC,eAAAA,KAAMunC,gBAAAA,MAAOt/B,iBAAAA,OAAQu/B,iBAAAA,OAAQC,gBAAAA,MAE3C,IAAMC,UAAY,CAChB9rB,MAAOtU,QAAQqgC,YACfC,SAAUtgC,QAAQugC,gBAGb,SAAST,oBAAoBU,eAElC,IAAK,IAAIrnC,OAAOqnC,cAAcC,KAAM,CAClC,IAAIvF,IAAMsF,cAAcC,KAAKtnC,KAC7B,IAAK,IAAIunC,aAAaxF,IAAIyF,UAAW,CACnC,IAAIC,SAAW1F,IAAIyF,UAAUD,WAC7BvxC,SAASomB,KAAK,CAAEpH,IAAA,OAAYyyB,SAAS/vB,QAArB,WAMtB,SAASgwB,eAAe7wC,GACtB,GAAIA,aAAa1K,cAAgB0K,EAAE/K,QAAU,EAAG,CAC9C,OAAO+K,OACF,UAAWA,IAAM,SAAU,CAChC,OAAOwI,KAAKxI,EAAG,QACV,GAAI4b,MAAM+b,QAAQ33B,IAAMA,aAAa1K,aAAc,CAExD,OAAOkT,KAAKxI,EAAE,IAAM,EAAGA,EAAE,IAAM,OAC1B,CACL,OAAO0O,OAAO,QAIlB,SAASoiC,kBAAkBC,IAAK97C,QAC9ByZ,OAAOzZ,QACPyZ,OAAOkN,MAAM+b,QAAQoZ,MACrB,IAAI5sB,IAAM,IAAIvI,MAAM3mB,QACpB,IAAK,IAAIsN,GAAK,EAAGA,GAAKtN,SAAUsN,GAAI,CAClC4hB,IAAI5hB,IAAMsuC,eAAeE,IAAIxuC,KAE/B,OAAO4hB,IAGT,SAAS6sB,kBAAkB9F,IAAK+F,kBAC9B,IAAK/F,IAAI/a,WAAY,CACnB,IAAI+gB,KAAOhG,IAAI/a,WAAa,CAC1BghB,MAAOf,UAAUlF,IAAIiG,QAAUnhC,QAAQqgC,YACvCxvB,QAAS1hB,SAASomB,KAAK,CAAEpH,IAAK+sB,IAAIrqB,QAAJ,OAAqBqqB,IAAIrqB,QAAzB,OAAyC,6BACvE6C,MAAOotB,kBAAkB5F,IAAIxnB,OAAS,CAAC,EAAG,EAAG,EAAG,GAAI,GACpD0tB,YAAa,KACbrqC,KAAM+pC,kBAAkB5F,IAAInkC,MAAQ,CAAC,EAAG,GAAI,GAC5CsqC,WAAY,KACZC,MAAOR,kBAAkB5F,IAAIoG,OAAS,CAAC,EAAG,EAAG,GAAI,GACjDC,IAAKV,eAAe3F,IAAIqG,KAAO,GAC/BC,QAASX,eAAe3F,IAAIqG,KAAO,GACnCE,SAAUZ,eAAe3F,IAAIuG,UAAY,KACzCC,gBAAiBb,eAAe3F,IAAIwG,iBAAmB,IAEzDhjC,OAAOwiC,KAAKQ,gBAAgB,IAAM,GAClC,GAAIxG,IAAIkG,aAAelG,IAAIkG,YAAYn8C,OAAQ,CAC7CyZ,OAAOw8B,IAAIkG,YAAYn8C,OAAS,GAChCi8C,KAAKE,YAAc,GACnB,IAAK,IAAI7uC,GAAK,EAAGA,GAAK2oC,IAAIkG,YAAYn8C,SAAUsN,GAAI,CAClD,IAAIrO,EAAIg3C,IAAIkG,YAAY7uC,IACxBmM,cAAcxa,EAAEE,IAAM,UACtB,IAAI05B,IAAM,IAAIx4B,aAAa,GAC3Bw4B,IAAI,GAAK55B,EAAE8L,EAAE,GACb8tB,IAAI,GAAK55B,EAAE8L,EAAE,GACb8tB,IAAI,GAAK55B,EAAE8L,EAAE,GACb8tB,IAAI,GAAK55B,EAAE8L,EAAE,GACb8tB,IAAI,GAAK55B,EAAEE,EACX88C,KAAKE,YAAY/2C,KAAKyzB,MAG1B,GAAIod,IAAImG,YAAcnG,IAAImG,WAAWp8C,OAAQ,CAC3CyZ,OAAOw8B,IAAImG,WAAWp8C,OAAS,GAC/Bi8C,KAAKG,WAAa,GAClB,IAAK,IAAI3zB,IAAK,EAAGA,IAAKwtB,IAAImG,WAAWp8C,SAAUyoB,IAAI,CACjD,IAAIi0B,GAAIzG,IAAImG,WAAW3zB,KACvBhP,cAAcijC,GAAEv9C,IAAM,UACtB,IAAIw9C,KAAM,IAAIt8C,aAAa,GAC3Bs8C,KAAI,GAAKD,GAAE3xC,EAAE,GACb4xC,KAAI,GAAKD,GAAE3xC,EAAE,GACb4xC,KAAI,GAAKD,GAAEv9C,EACX88C,KAAKG,WAAWh3C,KAAKu3C,QAI3B,OAAO1G,IAAI/a,WAGb,SAAS0hB,aAAalB,UAAWt7B,MAC/B3G,OAAOiiC,UAAUt7B,QAAU1S,WAC3B,OAAOguC,UAAUt7B,MAGnB,SAASy8B,iBAAiB5G,IAAK6G,UAC7B,IAAK7G,IAAI/a,WAAY,CACnB+a,IAAI/a,WAAa,CACf6hB,SAAUH,aAAaE,SAAU7G,IAAI+G,UACrCprC,IAAKiqC,kBAAkB5F,IAAIrkC,KAAO,CAAC,EAAG,EAAG,GAAI,GAC7CqrC,IAAKpB,kBAAkB5F,IAAIgH,KAAO,CAAC,EAAG,EAAG,GAAI,GAC7CC,UAAWtB,eAAe3F,IAAIiH,WAAa,IAC3CC,UAAWtB,kBAAkB5F,IAAIkH,WAAa,CAAC,EAAGlK,UAAW,GAC7DmK,aAAcxB,eAAe3F,IAAImH,cAAgB,IAGnD,IAAI9iC,IAAM27B,IAAI/a,WAAWgiB,UAAU,GACnC,IAAI3iC,IAAM07B,IAAI/a,WAAWgiB,UAAU,GAAKjH,IAAI/a,WAAWgiB,UAAU,GACjEjH,IAAI/a,WAAWgiB,UAAU,GAAK,IAAO3iC,IACrC07B,IAAI/a,WAAWgiB,UAAU,GAAK,IAAO5iC,IACrCb,OAAOw8B,IAAI/a,WAAWgiB,UAAU,GAAK,GAEvC,OAAOjH,IAAI/a,WAGb,SAASmiB,aAAapH,IAAK+F,kBACzB,IAAK/F,IAAI/a,WAAY,CACnB,IAAI+gB,KAAOhG,IAAI/a,WAAa,CAC1BoiB,gBAAiB1B,eAAe3F,IAAIqH,iBAAmBrK,UACvDyI,UAAW,GACX6B,SAAU,IAEZ,IAAIT,SAAW,GACf,IAAK,IAAI5oC,OAAO+hC,IAAIyF,UAAW,CAC7BoB,SAAS5oC,KAAO+nC,KAAKP,UAAU17C,OAC/Bi8C,KAAKP,UAAUt2C,KAAK22C,kBAAkB9F,IAAIyF,UAAUxnC,KAAM8nC,mBAE5D,IAAK,IAAIrlB,QAAOsf,IAAIsH,SAAU,CAC5BtB,KAAKsB,SAASn4C,KAAKy3C,iBAAiB5G,IAAIsH,SAAS5mB,MAAMmmB,YAG3D,OAAO7G,IAAI/a,WAGb,SAASsiB,UAAUzyC,GACjB,OAAOA,EAAE,GAAK9H,KAAKoO,SAAWtG,EAAE,GAElC,SAAS0yC,aAAa1yC,GACpB,IAAImkB,IAAM,IAAI7uB,aAAa0K,EAAE/K,QAC7B,IAAK,IAAIsN,GAAK,EAAGA,GAAKvC,EAAE/K,SAAUsN,GAAI,CACpC4hB,IAAI5hB,IAAMkwC,UAAUzyC,EAAEuC,KAExB,OAAO4hB,IAGT,IAAIM,WAAa/b,OACjB,IAAIiqC,YAAcjqC,OAClB,IAAIkqC,UAAYpqC,OAChB,IAAIqqC,WAAarqC,WAGXsqC,0BACJ,SAAAA,eAAYC,OAAQC,OAAQnsC,KAC1B6H,OAAO7H,IAAI5R,SAAW,GACtByM,KAAKqxC,OAASA,OACdrxC,KAAKwpC,IAAMoH,aAAaU,OAAQD,QAChCrxC,KAAK6wC,gBAAkBE,UAAU/wC,KAAKwpC,IAAIqH,iBAC1C7jC,OAAOhN,KAAK6wC,gBAAkB,GAC9B7wC,KAAKuxC,IAAM,EACXvxC,KAAKwxC,UAAY,MACjBxxC,KAAKyxC,UAAY,MACjBzxC,KAAKmF,IAAM4B,KAAK5B,IAAI,GAAIA,IAAI,GAAIA,IAAI,IACpCnF,KAAK0xC,UAAY,GACjB,IAAK,IAAI7wC,GAAK,EAAGA,GAAKb,KAAKwpC,IAAIyF,UAAU17C,SAAUsN,GAAI,CACrD,IAAI2oC,IAAMxpC,KAAKwpC,IAAIyF,UAAUpuC,IAC7B,IAAI8wC,SAAW,CACbnI,IAAAA,IACAoI,MAAO,IAET5xC,KAAK0xC,UAAU/4C,KAAKg5C,UAEtB3xC,KAAK8wC,SAAW,GAEhB,IAAK,IAAIlN,KAAK,EAAGA,KAAK5jC,KAAKwpC,IAAIsH,SAASv9C,SAAUqwC,KAAI,CACpD,IAAIiO,KAAM7xC,KAAKwpC,IAAIsH,SAASlN,MAC5B,IAAIkO,QAAU,CACZtI,IAAAqI,KACAnB,UAAWM,aAAaa,KAAInB,WAC5BqB,UAAW,EACXC,QAAS,MACTC,QAAS,OAEXjyC,KAAK8wC,SAASn4C,KAAKm5C,SAGrB9xC,KAAK0Y,KAAK,gFAGCw5B,KAAMt3B,IAEjB,IAAI4uB,IAAM0I,KAAK1I,IACf0I,KAAKX,KAAO32B,GACZ,IAAIu3B,SAAWD,KAAKX,IAAMW,KAAKnC,SAC/B,GAAIoC,UAAY,EAAG,CACjB,OAAO,KAIT,IAAIC,IAAMx3B,GAAK,IACfs3B,KAAK/sC,IAAI,IAAM+sC,KAAK1B,IAAI,GAAK4B,IAC7BF,KAAK/sC,IAAI,IAAM+sC,KAAK1B,IAAI,GAAK4B,IAC7BF,KAAK/sC,IAAI,IAAM+sC,KAAK1B,IAAI,GAAK4B,IAC7BF,KAAK1B,IAAI,IAAM0B,KAAKtC,MAAM,GAAKwC,IAC/BF,KAAK1B,IAAI,IAAM0B,KAAKtC,MAAM,GAAKwC,IAC/BF,KAAK1B,IAAI,IAAM0B,KAAKtC,MAAM,GAAKwC,IAG/BnjC,OAAO8T,WAAYmvB,KAAKlwB,MAAOe,YAC/B,GAAIymB,IAAIkG,YAAa,CACnB,GAAIyC,SAAW3I,IAAIkG,YAAY,GAAG,GAAI,CACpCjB,MAAM1rB,WAAYA,WAAYymB,IAAIkG,YAAY,SACzC,GAAIyC,UAAY3I,IAAIkG,YAAYlG,IAAIkG,YAAYn8C,OAAS,GAAG,GAAI,CACrEk7C,MAAM1rB,WAAYA,WAAYymB,IAAIkG,YAAYlG,IAAIkG,YAAYn8C,OAAS,QAClE,CACL,IAAK,IAAIsN,GAAK,EAAGA,GAAK2oC,IAAIkG,YAAYn8C,OAAS,IAAKsN,GAAI,CACtD,GAAIsxC,UAAY3I,IAAIkG,YAAY7uC,IAAI,IAAMsxC,SAAW3I,IAAIkG,YAAY7uC,GAAK,GAAG,GAAI,CAC/E,IAAIwxC,QAAUF,SAAW3I,IAAIkG,YAAY7uC,IAAI,KAAO2oC,IAAIkG,YAAY7uC,GAAK,GAAG,GAAK2oC,IAAIkG,YAAY7uC,IAAI,IACrG2tC,OAAOyC,YAAaoB,OAAQ7I,IAAIkG,YAAY7uC,IAAK2oC,IAAIkG,YAAY7uC,GAAK,IACtE4tC,MAAM1rB,WAAYA,WAAYkuB,aAC9B,SAMRzX,OAAO0X,UAAWgB,KAAK7sC,MACvB,GAAImkC,IAAImG,WAAY,CAClB,GAAIwC,SAAW3I,IAAImG,WAAW,GAAG,GAAI,CACnCrB,MAAM4C,UAAWA,UAAW1H,IAAImG,WAAW,SACtC,GAAIwC,UAAY3I,IAAImG,WAAWnG,IAAImG,WAAWp8C,OAAS,GAAG,GAAI,CACnE+6C,MAAM4C,UAAWA,UAAW1H,IAAImG,WAAWnG,IAAImG,WAAWp8C,OAAS,QAC9D,CACL,IAAK,IAAIy6C,KAAK,EAAGA,KAAKxE,IAAImG,WAAWp8C,OAAS,IAAKy6C,KAAI,CACrD,GAAImE,UAAY3I,IAAImG,WAAW3B,MAAI,IAAMmE,SAAW3I,IAAImG,WAAW3B,KAAK,GAAG,GAAI,CAC7E,IAAIsE,SAAUH,SAAW3I,IAAImG,WAAW3B,MAAI,KAAOxE,IAAImG,WAAW3B,KAAK,GAAG,GAAKxE,IAAImG,WAAW3B,MAAI,IAClGK,OAAO8C,WAAYmB,QAAQ9I,IAAImG,WAAW3B,MAAKxE,IAAImG,WAAW3B,KAAK,IACnEM,MAAM4C,UAAWA,UAAWC,YAC5B,SAUR,IAAIt3C,EAAIq4C,KAAK7sC,KAAK,GAClB,IAAIvL,EAAIo4C,KAAK7sC,KAAK,GAClB,IAAI5I,EAAIy1C,KAAK/sC,IAAI,GAAKtL,EAAI,EAC1B,IAAI6C,EAAIw1C,KAAK/sC,IAAI,GAAKrL,EAAI,EAC1B,IAAI0H,EAAI0wC,KAAK/sC,IAAI,GACjBmJ,QAAQikC,UAAU,CAAC/I,IAAIrqB,SAAU1iB,EAAGC,EAAGD,EAAGC,EAAI5C,EAAG2C,EAAI5C,EAAG6C,EAAI5C,EAAG2C,EAAI5C,EAAG6C,EAAG8E,EAAG,EAAG,EAAG,EAAG,EAAGuhB,WAAY,KAAM,KAAMymB,IAAIiG,OAEpH,OAAO,sDAGG+C,QAASb,UAEnB,IAAIC,MAAQD,SAASC,MACrB,IAAK,IAAI/wC,GAAK+wC,MAAMr+C,OAAS,EAAGsN,IAAM,IAAKA,GAAI,CAC7C,IAAIqxC,KAAON,MAAM/wC,IACjB,IAAI+Z,GAAK5a,KAAKyxC,UAAYe,QAAUN,KAAKlC,gBAAkBwC,QAC3D,GAAIxyC,KAAKyyC,aAAaP,KAAMt3B,IAAK,CAC/Bg3B,MAAM/wC,IAAM+wC,MAAMA,MAAMr+C,OAAS,GACjCq+C,MAAMh5C,0DAKC85C,QAASZ,SACpB,IAAIa,YAAcb,QAAQtI,IAC1B,IAAImI,SAAW3xC,KAAK0xC,UAAUiB,YAAYrC,UAC1C,IAAI9G,IAAMmI,SAASnI,IACnB,IAAIrkC,IAAM6rC,aAAa2B,YAAYxtC,IAAK,GACxCopC,MAAMppC,IAAKA,IAAKnF,KAAKmF,KAErB,IAAI+sC,KAAO,CACT1I,IAAAA,IACArkC,IAAAA,IACA6c,MAAOgvB,aAAaxH,IAAIxnB,MAAO,GAC/B3c,KAAM2rC,aAAaxH,IAAInkC,KAAM,GAC7BmrC,IAAKQ,aAAa2B,YAAYnC,IAAK,GACnCZ,MAAOoB,aAAaxH,IAAIoG,MAAO,GAC/BC,IAAKkB,UAAUvH,IAAIqG,KACnBC,QAASiB,UAAUvH,IAAIsG,SACvBC,SAAUgB,UAAUvH,IAAIuG,UACxBC,gBAAiBe,UAAUvH,IAAIwG,iBAC/BuB,IAAK,GAEP,IAAKvxC,KAAKyyC,aAAaP,KAAMQ,SAAU,CACrCf,SAASC,MAAMj5C,KAAKu5C,uDAIZt3B,GAAIk3B,SACd,IAAItI,IAAMsI,QAAQtI,IAElB,IAAKsI,QAAQE,SAAWhyC,KAAKuxC,KAAOO,QAAQpB,UAAU,GAAI,CACxDoB,QAAQE,QAAU,KAElBp3B,GAAK5a,KAAKuxC,IAAMO,QAAQpB,UAAU,GAClC,IAAIkC,IAAM7B,UAAUvH,IAAImH,cACxB,IAAK,IAAI9vC,GAAK,EAAGA,GAAK+xC,MAAO/xC,GAAI,CAC/Bb,KAAK6yC,aAAaj4B,GAAIk3B,SAExBA,QAAQC,UAAYhB,UAAUvH,IAAIiH,WAEpC,GAAIqB,QAAQE,UAAYF,QAAQG,QAAS,CAEvC,IAAIa,aAAel4B,GACnB,IAAIm4B,QAAUn4B,GACd,GAAI5a,KAAKuxC,KAAOO,QAAQpB,UAAU,GAAI,CACpCoB,QAAQG,QAAU,KAElBc,SAAW/yC,KAAKuxC,IAAMO,QAAQpB,UAAU,GAG1C,MAAOqC,SAAWjB,QAAQC,UAAW,CACnCgB,SAAWjB,QAAQC,UACnBe,cAAgBhB,QAAQC,UACxBD,QAAQC,UAAYhB,UAAUvH,IAAIiH,WAClCzwC,KAAK6yC,aAAaC,aAAchB,SAElCA,QAAQC,WAAagB,2CAIpBn4B,IACH,GAAI5a,KAAKwxC,UAAW,CAClB,OAAO,KAGT,IAAK,IAAI3wC,GAAKb,KAAK0xC,UAAUn+C,OAAS,EAAGsN,IAAM,IAAKA,GAAI,CACtDb,KAAKgzC,YAAYp4B,GAAI5a,KAAK0xC,UAAU7wC,KAGtCb,KAAKuxC,KAAO32B,GACZ,IAAK,IAAIq4B,KAAK,EAAGA,KAAKjzC,KAAK8wC,SAASv9C,SAAU0/C,KAAI,CAChDjzC,KAAKkzC,YAAYt4B,GAAI5a,KAAK8wC,SAASmC,OAGrC,OAAOjzC,KAAKuxC,KAAOvxC,KAAK6wC,iDAItBsC,2BACJ,SAAAA,kBACEnzC,KAAKozC,QAAU,iFAGJ5J,IAAKrkC,KAChB,IAAIkuC,OAAS,IAAIjC,eAAepxC,KAAMwpC,IAAKrkC,KAC3CnF,KAAKozC,QAAQz6C,KAAK06C,QAClB,OAAOA,yCAGJz4B,IACH,IAAK,IAAI/Z,GAAKb,KAAKozC,QAAQ7/C,OAAS,EAAGsN,IAAM,IAAKA,GAAI,CACpD,GAAIb,KAAKozC,QAAQvyC,IAAI6X,KAAKkC,IAAK,CAC7B5a,KAAKozC,QAAQvyC,IAAMb,KAAKozC,QAAQpzC,KAAKozC,QAAQ7/C,OAAS,GACtDyM,KAAKozC,QAAQx6C,sCAMd,SAASlF,SAAgB,IAAA,IAAAq2B,KAAAC,UAAAz2B,OAAN02B,KAAM/P,MAAA6P,MAAAupB,MAAA,EAAAA,MAAAvpB,KAAAupB,QAAA,CAANrpB,KAAMqpB,OAAAtpB,UAAAspB,OAC9B,OAAA,IAAAnpB,SAAArkB,UAAAkE,KAAAogB,MAAW+oB,gBAAX,CAAA,MAAA9oB,OAA8BJ,sICnYhBvW,UAAAA,kBAqIAvJ,KAAAA,KAjLhB,IAAMjJ,SAAWnO,QAAQ,8BACHA,QAAQ,aAAtBwK,mBAAAA,UACR,IAAM7C,OAAS3H,QAAQ,eACvB,IAAMoa,UAAYpa,QAAQ,aAC1B,IAAM0P,MAAQ1P,QAAQ,kBACd+a,IAAQtX,KAARsX,IACR,IAAMI,SAAWnb,QAAQ,iBACzB,IAAMm1C,GAAKn1C,QAAQ,yBACMA,QAAQ,cAAzBiU,eAAAA,KAAMusC,iBAAAA,OAEd,IAAIC,QAAU,GAEd,IAAMC,WAAa,EAEnB,IAAIC,WAAa1sC,KAAK,EAAG,EAAG,EAAG,IAC/B,IAAI2sC,cAAgB3sC,KAAK,EAAG,EAAG,EAAG,KAClC,IAAI4sC,QAAU5sC,OAGdkH,SAAStP,SAAS,CAChBgd,aAAc,CACZlb,cAAe,EACf1C,KAAMT,UAAU6gC,SAChBjgC,MAAO,CAAC,EAAG,IAEbuhB,SAAU,CACRxhB,MAAO,WACPwC,cAAe,EACf1C,KAAMT,UAAU6gC,SAChBjgC,MAAO,CAAC,EAAG,IAEb01C,UAAW,CACT31C,MAAO,YACPwC,cAAe,EACf1C,KAAMT,UAAU6gC,SAChBjgC,MAAO,CAAC,EAAG,MAIf,IAAI21C,UAAY3mC,UAAU/H,MAAM,CAC9Bqc,cAAe,EAAGC,cAAe,IACjCM,MAAO,aAGF,SAAStO,UAAUqgC,QACxB,GAAIA,OAAOlgC,WAAY,CACrBkgC,OAAOzsB,UAAYysB,OAAOz/B,OAAO/gB,OACjCwgD,OAAOC,aAAeD,OAAOl5C,KAAK4Y,QAAQlgB,OAASwgD,OAAOzsB,UAE5DysB,OAAOE,WAAah1C,OAAOD,KAAK+0C,OAAOjgC,QAAQvgB,OAC/C,GAAIwgD,OAAOx/B,eAAiBtT,UAAW,CACrC8yC,OAAOx/B,aAAew/B,OAAOE,WAAa,GAAKF,OAAOlgC,WAExD2/B,QAAQ76C,KAAKo7C,QAGf,SAASG,WAAWx3C,EAAGq3C,QACrB,IAAI7iC,KAAOxW,OAAOwW,KAClB,IAAIijC,IAAMV,WACV,IAAIW,mBAAqBlM,GAAGrmC,YAAc,IAC1C,IAAIpF,EAAIyE,SAAS7H,SAAW+6C,mBAAqBD,IACjD,IAAIz6C,GAAKgD,EACTA,GAAKy3C,IACL,IAAIE,YAAcnM,GAAGrmC,YACrB,IAAIyyC,YAAc,EAClB,IAAIC,WAAarmC,SAAS6lC,OAAOngC,WACjC,IAAI4gC,SAAW,MACf,IAAI5xB,MAAQ,EACZ,IAAK,IAAI1kB,SAAS61C,OAAOjgC,OAAQ,CAC/B,IAAIhR,MAAQixC,OAAOjgC,OAAO5V,SAC1B,GAAI4E,MAAO,CACT,IAAIsC,MAAQ0uC,UACZ,GAAIhxC,MAAM8f,MAAO,CACfA,MAAQ9f,MAAM8f,MACd9f,MAAQA,MAAMA,MACdsC,MAAQ+H,UAAUgT,WAAW2zB,UAAWlxB,OAE1C,IAAI6xB,QAAUvjC,KAAK+T,iBAAiB7f,MAAO3I,EAAGC,EAAG+E,EAAEizC,SAAW,EAAGL,YAAalnC,UAAUsT,MAAMG,OAAQ,EAAG,EAAG1iB,OAC5Go2C,YAAcxmC,IAAIwmC,YAAaG,SAC/BvjC,KAAK+T,iBAAiB7f,MAAO3I,EAAGC,EAAG+E,EAAEizC,SAAW,EAAGL,YAAalnC,UAAUsT,MAAMS,KAAMkzB,mBAAoB,EAAGtxC,OAC7GpG,GAAK23C,YACLG,SAAW,KAEb,MAAQD,WAAY,CAClB,OAGJ,IAAI16C,EAAIu6C,mBAAqBE,YAAcb,WAC3Ch3C,GAAK63C,YAAcb,WAEnB,IAAKe,SAAU,CACb,OAAO93C,EAAIy3C,IAGbz3C,GAAKy3C,IACL,IAAIQ,GAAKjB,WACT,IAAIjN,UAAY,CACdhqC,EAAGA,EAAI03C,IACPz3C,EAAGhD,GACHG,EAAGA,EAAIs6C,IAAM,EACbr6C,EAAG4C,EAAIhD,IAET,GAAIq6C,OAAOx/B,aAAc,CACvB,GAAI9R,MAAMo2B,YAAY4N,WAAY,CAChC,GAAIsN,OAAOE,WAAa,GAAK/lC,SAAS6lC,OAAOngC,YAAc,EAAG,CAC5D1F,SAAS1V,IAAIu7C,OAAOngC,UAAWmgC,OAAOE,iBACjC,GAAIF,OAAOlgC,aAAe3F,SAAS6lC,OAAOlgC,YAAa,CAC5D3F,SAAS1V,IAAIu7C,OAAOlgC,WAAY,OAC3B,CACL,GAAIkgC,OAAOlgC,WAAY,CACrB3F,SAAS1V,IAAIu7C,OAAOlgC,WAAY,GAElC3F,SAAS1V,IAAIu7C,OAAOngC,UAAW,IAGnC,GAAInR,MAAMy1B,UAAUuO,WAAY,CAC9BkO,GAAKhB,eAGT,GAAI/wB,QAAU,EAAG,CACfgxB,QAAQ,GAAKe,GAAG,GAAK/xB,MACrB+xB,GAAKpB,OAAOK,QAASe,IAEvBzM,GAAGxsB,SAAS+qB,UAAUhqC,EAAGgqC,UAAU/pC,EAAG+pC,UAAUhqC,EAAIgqC,UAAU5sC,EAAG6C,EAAG+E,EAAEizC,SAAUC,IAChF,OAAOj4C,EAGT,SAASk4C,gBAAgBl4C,EAAGq3C,QAC1B,IAAMc,MAAQn6C,OAAO6U,YAAc,IACnC,IAAMulC,WAAaD,MAAQ,EAAI,EAC/B,IAAME,SAAWF,MAAQ,EAAI,EAC7B,IAAMG,YAAcH,MAAQ,GAAK,IACjC,IAAMI,UAAYlB,OAAOC,aAAe,EACxC,IAAIn6C,GAAKi7C,WAAaC,UAAYE,UAClC,IAAIx4C,EAAIyE,SAAS7H,SAAWQ,EAC5B,IAAIC,EAAIk7C,YAAcD,SAAW,EACjC,IAAIvzC,EAAIC,EAAEizC,SACVxM,GAAGxsB,SAASjf,EAAGC,EAAI5C,EAAG2C,EAAI5C,EAAG6C,EAAG8E,IAAKkyC,YACrCj3C,GAAKs4C,SACLr4C,GAAKq4C,SACL,IAAIG,cAAgBnB,OAAOl5C,KAAK2Y,MAChC,IAAI2hC,WAAaH,YAAcjB,OAAO1/B,eACtC,IAAK,IAAIxT,GAAK,EAAGA,GAAKo0C,UAAWp0C,KAAM,CACrC,IAAIu0C,YAAcv0C,GAAKq0C,cAAgB,GAAKnB,OAAOC,aAAeD,OAAOzsB,UACzE,IAAIzsB,KAAOk5C,OAAOl5C,KAAK4Y,QACvB,IAAI4hC,QAAU,EACd,IAAK,IAAIv3B,GAAK,EAAGA,GAAKi2B,OAAOzsB,UAAWxJ,KAAM,CAC5C,IAAIw3B,QAAUz6C,KAAKu6C,WAAat3B,IAChC,IAAIy3B,aAAA,EACJ,GAAIxB,OAAOyB,WAAY,CACrBD,QAAUF,QACVA,SAAWC,YACN,CAEL,IAAIG,OAAS,EACb,IAAK,IAAI7H,GAAK,EAAGA,GAAKmG,OAAOzsB,UAAWsmB,KAAM,CAC5C,GAAIA,KAAO9vB,GAAI,CACb,SAEF,IAAI43B,QAAU76C,KAAKu6C,WAAaxH,IAChC,IAAK8H,QAAUJ,SAAWI,UAAYJ,SAAW1H,GAAK9vB,KAAO43B,QAAUD,OAAQ,CAC7EA,OAASC,SAGbH,QAAUE,OACVJ,QAAUC,QAEZ,IAAItzB,MAAQ+xB,OAAOz/B,OAAOwJ,IAC1BoqB,GAAGxsB,SAASjf,EAAGC,EAAI24C,QAAUF,WAAY14C,EAAIq4C,WAAYp4C,EAAI64C,QAAUJ,WAAY3zC,EAAGwgB,OAExFvlB,GAAKq4C,WAAaC,SAEpBvzC,GAAKyzC,UACLv4C,GAAKs4C,YAAcD,SACnB,OAAOr4C,EAGF,SAASyN,OACdjJ,SAASnI,eAAe2B,OAAO4U,WAAY5U,OAAO6U,aAClD,IAAI7S,EAAIwE,SAAS9H,SACjB,IAAIu8C,QAAUz0C,SAAS5H,SACvB,IAAK,IAAIuH,GAAK,EAAGA,GAAK2yC,QAAQjgD,SAAUsN,GAAI,CAC1C,IAAIkzC,OAASP,QAAQ3yC,IACrB,GAAIqN,SAAS6lC,OAAOngC,WAAY,CAC9BlX,EAAIw3C,WAAWx3C,EAAGq3C,QAClBr3C,GAAK+2C,WAEP,GAAIvlC,SAAS6lC,OAAOlgC,YAAa,CAC/B8hC,QAAUf,gBAAgBe,QAAS5B,QACnC4B,SAAWlC,8MCzLDhU,SAAAA,iBAQAM,KAAAA,aAMAH,MAAAA,cA2BAnlC,QAAAA,QA7ChB,IAAIm7C,iBAAmB,MACvB,IAAIpzC,UAAA,EACJ,IAAIqzC,iBAAA,EAEG,SAASpW,WACd,OAAOmW,iBAGT,SAASE,WAAWt+C,KAClBwiB,QAAQyD,IAAR,gBAA4BjmB,KAGvB,SAASuoC,OACd+V,WAAW,uBACXF,iBAAmB,MACnB3+C,SAAS8+C,kBAGJ,SAASnW,MAAMD,MACpBiW,iBAAmB,KACnBC,cACAC,WAAA,sCAAiDnW,MACjDn9B,KAAKwzC,qBAGP,SAASC,sBACP,GAAIh/C,SAASi/C,oBAAsBj/C,SAASk/C,uBAAyBl/C,SAASm/C,yBAA0B,CACtGN,WAAW,mBACX,IAAKF,iBAAkB,CACrBE,WAAW,sBACX7+C,SAAS8+C,uBAEN,CACL,GAAIH,iBAAkB,CACpBE,WAAW,aACXF,iBAAmB,QAKzB,SAASS,mBAAmB7jD,GAC1BsjD,WAAW,SACXF,iBAAmB,MAGd,SAASn7C,QAAQ67C,MAAOC,cAC7B/zC,KAAO8zC,MACPT,YAAcU,aAEd/zC,KAAKwzC,mBAAqBxzC,KAAKwzC,oBAAsBxzC,KAAKg0C,uBAAyBh0C,KAAKi0C,0BAA4B,aACpHx/C,SAAS8+C,gBAAkB9+C,SAAS8+C,iBAAmB9+C,SAASy/C,oBAAsBz/C,SAAS0/C,uBAAyB,aAExH1/C,SAAS4N,iBAAiB,oBAAqBoxC,oBAAqB,OACpEh/C,SAAS4N,iBAAiB,uBAAwBoxC,oBAAqB,OACvEh/C,SAAS4N,iBAAiB,0BAA2BoxC,oBAAqB,OAE1Eh/C,SAAS4N,iBAAiB,mBAAoBwxC,mBAAoB,OAClEp/C,SAAS4N,iBAAiB,sBAAuBwxC,mBAAoB,OACrEp/C,SAAS4N,iBAAiB,yBAA0BwxC,mBAAoB,+DC1D1E,IAAKlnB,WAAWrpB,UAAUhO,MAAO,CAC/BmH,OAAOkb,eAAegV,WAAWrpB,UAAW,QAAS,CACnDhD,MAAO,SAAAA,MAAU8zC,MAAOC,KAGtB,OAAO,IAAI1nB,WAAWjV,MAAMpU,UAAUhO,MAAMxE,KAAK0M,KAAM42C,MAAOC,SAGlE53C,OAAOkb,eAAeyW,UAAU9qB,UAAW,QAAS,CAClDhD,MAAO,SAAAA,MAAU8zC,MAAOC,KACtB,OAAO,IAAIjmB,UAAU1W,MAAMpU,UAAUhO,MAAMxE,KAAK0M,KAAM42C,MAAOC,SAGjE53C,OAAOkb,eAAe28B,WAAWhxC,UAAW,QAAS,CACnDhD,MAAO,SAAAA,MAAU8zC,MAAOC,KACtB,OAAO,IAAIC,WAAW58B,MAAMpU,UAAUhO,MAAMxE,KAAK0M,KAAM42C,MAAOC,SAGlE53C,OAAOkb,eAAevmB,aAAakS,UAAW,QAAS,CACrDhD,MAAO,SAAAA,MAAU8zC,MAAOC,KACtB,OAAO,IAAIjjD,aAAasmB,MAAMpU,UAAUhO,MAAMxE,KAAK0M,KAAM42C,MAAOC,SAKtE,IAAKC,WAAWhxC,UAAU9N,KAAM,CAC9BiH,OAAOkb,eAAe28B,WAAWhxC,UAAW,OAAQ,CAClDhD,MAAO,SAAAA,MAAUi0C,OACf,OAAO78B,MAAMpU,UAAU9N,KAAK1E,KAAK0M,KAAM+2C,UAK7C,IAAK5nB,WAAWrpB,UAAUkxC,KAAM,CAC9B,IAAIA,KAAO,SAAPA,KAAiBl0C,MAAO8zC,MAAOC,KACjC,GAAIA,MAAQ51C,UAAW,CACrB41C,IAAM72C,KAAKzM,OAEb,IAAK,IAAIsN,GAAK+1C,OAAS,EAAG/1C,GAAKg2C,MAAOh2C,GAAI,CACxCb,KAAKa,IAAMiC,MAEb,OAAO9C,MAETf,OAAOkb,eAAegV,WAAWrpB,UAAW,OAAQ,CAClDhD,MAAOk0C,OAET/3C,OAAOkb,eAAe0W,WAAW/qB,UAAW,OAAQ,CAClDhD,MAAOk0C,OAET/3C,OAAOkb,eAAe28B,WAAWhxC,UAAW,OAAQ,CAClDhD,MAAOk0C,OAIX,IAAKnmB,WAAW/qB,UAAU1G,KAAM,CAC9B,IAAI63C,WAAa,SAAbA,WAAuBhkD,EAAG6C,GAC5B,OAAO7C,EAAI6C,GAEb,IAAIsJ,KAAO,SAAPA,KAAiB83C,KACnBh9B,MAAMpU,UAAU1G,KAAK9L,KAAK0M,KAAMk3C,KAAOD,aAEzCh4C,OAAOkb,eAAe0W,WAAW/qB,UAAW,OAAQ,CAClDhD,MAAO1D,kkBC0gBK1L,OAAAA,OAvkBhB,IAAMsZ,OAASja,QAAQ,UACvB,IAAMmO,SAAWnO,QAAQ,iBACzB,IAAMgtB,YAAchtB,QAAQ,eAC5B,IAAMoO,WAAapO,QAAQ,cAC3B,IAAMoa,UAAYpa,QAAQ,aAC1B,IAAMqO,QAAUrO,QAAQ,wBACPA,QAAQ,cAAjBiU,cAAAA,KACR,IAAImwC,YAAc,SAEVtpC,IAAkBrX,KAAlBqX,IAAKC,IAAatX,KAAbsX,IAAKzE,IAAQ7S,KAAR6S,kBACwBtW,QAAQ,wBAA1CqkD,uBAAAA,aAAcC,gBAAAA,MAAO1oC,mBAAAA,SAE7B,IAAIuC,UAAA,EAEJ,IAAMomC,0BAA4BnqC,UAAU/H,MAAM,KAAM,CACtD4c,MAAO,aAGT,IAAMu1B,2BAA6BpqC,UAAU/H,MAAM,KAAM,CACvD4c,MAAO,aAGT,IAAMw1B,uBAAyBrqC,UAAU/H,MAAM,KAAM,CACnD4c,MAAO,MAGT,IAAMy1B,2BAA6BtqC,UAAU/H,MAAM,KAAM,CACvD4c,MAAO,aAGF,IAAM01B,gBAAArkD,QAAAqkD,gBAAkB,CAC7BC,cAAeL,0BACfM,eAAgBL,2BAChBM,eAAgBJ,2BAChBK,WAAYN,uBACZO,cAAe,MACfC,WAAY,MACZC,SAAU,MACVC,OAAQ,KACRC,SAAU,EACV3zB,KAAM,EAEN4zB,WAAY,OAGd,IAAMC,aAAerxC,KAAK,KAAO,KAAO,KAAO,GAC/C,IAAMsxC,aAAetxC,KAAK,GAAO,GAAO,GAAO,GAC/C,IAAMuxC,aAAevxC,KAAK,KAAO,KAAO,KAAO,GAC/C,IAAMwxC,YAAcxxC,KAAK,EAAG,EAAG,EAAG,GAElC,IAAMyxC,mBAAqB,OAGdC,qBAAAA,aACX,SAAAA,aAAYn3C,QACVA,OAASA,QAAU,GACnB,GAAIA,kBAAkBm3C,aAAc,CAClC,IAAK,IAAI7iB,SAASt0B,OAAQ,CACxBvB,KAAK61B,OAASt0B,OAAOs0B,OAEvB,OAEF,UAAWt0B,SAAW,SAAU,CAC9BA,OAAS,CAAEoS,KAAMpS,QAEnBvB,KAAK2T,KAAOpS,OAAOoS,MAAQ,UAC3B3T,KAAKyf,MAAQle,OAAOke,OAAS,KAC7Bzf,KAAK4U,GAAKrT,OAAOqT,IAAM,KAEvB5U,KAAK8C,MAAQ,KACb9C,KAAK24C,UAAY,EACjB34C,KAAK44C,UAAY,EACjB54C,KAAK64C,UAAY,EACjB74C,KAAK84C,IAAMv3C,OAAOu3C,KAAO,KAEzB94C,KAAK+/B,KAAOgZ,QAAQx3C,OAAOw+B,MAC3B//B,KAAKg5C,WAAaD,QAAQx3C,OAAOy3C,YACjCh5C,KAAKi5C,cAAgBF,QAAQx3C,OAAO03C,eACpCj5C,KAAKk5C,SAAWH,QAAQx3C,OAAO23C,UAC/Bl5C,KAAKm5C,OAASJ,QAAQx3C,OAAO43C,QAC7Bn5C,KAAKo5C,mBAAqBL,QAAQx3C,OAAO63C,oBACzCp5C,KAAKq5C,WAAaN,QAAQx3C,OAAO83C,YACjCr5C,KAAKs5C,SAAWP,QAAQx3C,OAAO+3C,UAC/Bt5C,KAAKi4C,SAAWc,QAAQx3C,OAAO02C,eAI7BsB,4BACJ,SAAAA,iBAAYh4C,QAEVvB,KAAKvD,EAAI,EACTuD,KAAKtD,EAAI,EACTsD,KAAKwB,EAAIC,EAAEC,GACX1B,KAAKjD,MAAQqE,QAAQO,aACrB3B,KAAKw5C,MAAQ,GACbx5C,KAAKy5C,YAAc,MACnBz5C,KAAK05C,gBAAkB,MACvB15C,KAAKs5C,SAAW,MAChBt5C,KAAK25C,QAAUvC,aAAaM,iBAC5B13C,KAAK45C,cAAgB,EACrB55C,KAAK6B,YAAcT,QAAQS,YAC3B7B,KAAK65C,aAAez4C,QAAQ04C,cAC5B95C,KAAK+5C,WAAa,KAClB/5C,KAAKmC,aAAe,KACpBnC,KAAKg6C,kBAAoB,EACzBh6C,KAAKsC,YAAYf,QAGjBvB,KAAKi6C,iBAAmB,MACxBj6C,KAAKk6C,SAAW,EAChBl6C,KAAKm6C,YAAc,MACnBn6C,KAAKo6C,kBAAoB,MACzBp6C,KAAKuC,WAAa,MAClBvC,KAAKq6C,kBAAoB,CAAEC,aAAc,GACzCt6C,KAAKu6C,WAAa,MAClBv6C,KAAKw6C,YAAc,EACnBx6C,KAAKy6C,YAAc,EACnBz6C,KAAK06C,YAAc,EACnB16C,KAAK26C,qBAAuB,EAC5B36C,KAAK46C,uBAAyB35C,uFAIpBM,QACV,IAAKA,OAAQ,CACX,OAEF,IAAK,IAAI1O,KAAK0O,OAAQ,CACpB,GAAI1O,IAAM,QAAS,CACjBmN,KAAKw5C,MAAQj4C,OAAOi4C,MAAMn6C,IAAI,SAAAw7C,MAAA,OAAQ,IAAInC,aAAamC,aAClD,GAAIhoD,IAAM,UAAW,CAC1BwkD,MAAMr3C,KAAK25C,QAASp4C,OAAO1O,QACtB,CACLmN,KAAKnN,GAAK0O,OAAO1O,mDAKZioD,cACT,UAAWA,eAAiB,SAAU,CACpC,OAAO96C,KAAKk6C,WAAaY,aAE3B,OAAO96C,KAAKw5C,MAAMx5C,KAAKk6C,UAAUpB,MAAQgC,+DAIzC,OAAO96C,KAAKw5C,MAAMx5C,KAAKk6C,wDAGb,IACJP,QAA0B35C,KAA1B25C,QAASE,aAAiB75C,KAAjB65C,aACf,GAAI75C,KAAKy5C,YAAa,CACpB,OAAOI,aAAe,EAExB,IAAIkB,YAAc/6C,KAAKw5C,MAAMjmD,OAASsmD,aACtC,IAAImB,UAAYh7C,KAAK45C,eAAiB55C,KAAKw5C,MAAMjmD,OAASsmD,aAAe75C,KAAK45C,cAC9E,GAAIoB,UAAW,CACbD,YAAc/6C,KAAK45C,cAErBmB,aAAe,EACf,IAAKpB,QAAQ5B,cAAe,CAC1BgD,aAAe,EAEjB,OAAOA,YAAc,kCAGnBx5C,QACFvB,KAAKsC,YAAYf,QADP,IAEJ9E,EAA0DuD,KAA1DvD,EAAGC,EAAuDsD,KAAvDtD,EAAG8E,EAAoDxB,KAApDwB,EAAGzE,MAAiDiD,KAAjDjD,MAAO8E,YAA0C7B,KAA1C6B,YAAag4C,aAA6B75C,KAA7B65C,aAAcE,WAAe/5C,KAAf+5C,WAFvC,IAGJj2C,KAAc3C,WAAd2C,KAAMg4B,IAAQ36B,WAAR26B,IAEZ,GAAIie,YAAc/5C,KAAK26C,uBAAyB56B,YAAY7T,gBAAiB,CAE3E,GAAIlM,KAAKw5C,MAAMx5C,KAAKg6C,qBAAuBh6C,KAAKw5C,MAAMx5C,KAAKg6C,mBAAmBV,SAAU,CACtFt5C,KAAKk6C,SAAWl6C,KAAKg6C,sBAChB,CAEL,IAAK,IAAIn5C,GAAK,EAAGA,GAAKb,KAAKw5C,MAAMjmD,SAAUsN,GAAI,CAC7C,IAAKb,KAAKw5C,MAAM34C,IAAIy4C,SAAU,CAC5Bt5C,KAAKk6C,SAAWr5C,GAChB,SAMR,IAAInH,GAAKgD,EACT,IAAIu+C,UAAA,EACJ,IAAItB,QAAU35C,KAAK25C,QACnB35C,KAAKm6C,YAAc,MACnBn6C,KAAKo6C,kBAAoB,MACzB,IAAIc,YAAc,MAElB,IAAIC,YAAcn7C,KAAKuC,WAEvB,IAAI64C,qBAAuB,MAC3B,IAAKp7C,KAAKs5C,WAAat5C,KAAKuC,WAAY,CACtC64C,qBAAuBh6C,QAAQiC,WAAWrD,KAAKq6C,mBAC/C,GAAIe,qBAAsB,CACxBh6C,QAAQ4B,WAAWhD,OAIvB,IAAIq7C,QAAUr7C,KAAKk6C,SACnB,IAAIz2C,QAAUzD,KAAKuC,WAAavC,KAAKs5C,SAAW,MAAQl4C,QAAQiC,WAAWrD,MAC3E,IAAIs7C,aAAe73C,UAAY03C,YAE/B,IAAK13C,SAAWzD,KAAKi6C,iBAAkB,CACrC,GAAIj6C,KAAK46C,yBAA2B35C,UAAW,CAE7CjB,KAAKk6C,SAAWl6C,KAAK46C,uBACrB56C,KAAK46C,uBAAyB35C,UAEhCjB,KAAKi6C,iBAAmB,MAG1B,IAAIsB,4BAA8B,EAClC,IAAIC,SAAW,EACf,IAAK,IAAIx/B,IAAK,EAAGA,IAAKhc,KAAKw5C,MAAMjmD,SAAUyoB,IAAI,CAC7C,IAAI6+B,KAAO76C,KAAKw5C,MAAMx9B,KACtB,IAAK6+B,KAAKvB,SAAU,CAClB,GAAIkC,WAAa,GAAKx7C,KAAKk6C,UAAYl+B,IAAI,CACzCw/B,QAAUD,4BAEZA,+BAIJ,GAAIC,WAAa,EAAG,CAElBA,QAAU,EAGZ,GAAIx7C,KAAK05C,iBAAmB4B,aAAc,CACxC,GAAIF,qBAAsB,CACxBI,QAAU,MACL,CACLA,QAAUD,4BAA8B,EAE1CL,YAAc,KAGhB,IAAKl7C,KAAKy5C,cAAgBE,QAAQ5B,cAAe,CAC/C,IAAI0D,UAAYz7C,KAAK07C,YACrB,GAAIj4C,QAAS,CACXrC,QAAQsa,SAASjf,EAAGC,EAAGD,EAAIM,MAAOL,EAAI++C,UAAY,EAAGj6C,EAAGg3C,aACxD97C,GAAK,EACLD,GAAK,EACLM,OAAS,EACTqE,QAAQsa,SAASjf,EAAGC,EAAGD,EAAIM,MAAOL,EAAI++C,UAAY,EAAGj6C,EAAI,GAAK62C,cAC9D37C,GAAK,EACLD,GAAK,EACLM,OAAS,MACJ,CACLqE,QAAQsa,SAASjf,EAAGC,EAAGD,EAAIM,MAAOL,EAAI++C,UAAY,EAAGj6C,EAAG62C,cACxD37C,GAAK,EACLD,GAAK,EACLM,OAAS,GAIb,IAAI4+C,WAAa37C,KAAK45C,cAAgB,GAAKC,aAE3C,GAAIp2C,QAAS,CACX,IAAIm4C,UAAYz6C,WAAWu3B,cAAcoD,IAAIa,gBAAkBx7B,WAAWu3B,cAAcoD,IAAIW,cAC5F,IAAI35B,MAAQ3B,WAAWq3B,YAAY10B,KAAKi3B,WAAa6gB,UAAYz6C,WAAWw3B,kBAAkBmD,IAAI/B,MAAQ,GAC1G,GAAIj3B,MAAO,CACT04C,SAAWG,UAAY74C,MACvB04C,QAAU3tC,IAAI2tC,QAASD,4BAA8B,GACrDv7C,KAAKu6C,WAAa,MAClBW,YAAc,KAEhBp4C,MAAQ3B,WAAWq3B,YAAY10B,KAAKg3B,SAAW8gB,UAAYz6C,WAAWw3B,kBAAkBmD,IAAIhC,IAAM,GAClG,GAAIh3B,MAAO,CACT04C,SAAWG,UAAY74C,MACvB04C,QAAU1tC,IAAI0tC,QAAS,GACvBx7C,KAAKu6C,WAAa,MAClBW,YAAc,KAEhBp4C,MAAQ3B,WAAWq3B,YAAY10B,KAAKi2B,MAAQ54B,WAAWq3B,YAAY10B,KAAK+3C,GAAK16C,WAAWw3B,kBAAkBmD,IAAI/B,MAC9G,GAAIj3B,MAAO,CACT04C,SAAW14C,MACX9C,KAAKu6C,WAAa,MAClBW,YAAc,KAEhBp4C,MAAQ3B,WAAWq3B,YAAY10B,KAAKg2B,IAAM34B,WAAWq3B,YAAY10B,KAAKg4C,GAAK36C,WAAWw3B,kBAAkBmD,IAAIhC,IAC5G,GAAIh3B,MAAO,CACT04C,SAAW14C,MACX9C,KAAKu6C,WAAa,MAClBW,YAAc,KAEhB,GAAI/5C,WAAWq3B,YAAY10B,KAAKm3B,MAAO,CACrCugB,QAAU,EACVx7C,KAAKu6C,WAAa,MAClBW,YAAc,KAEhB,GAAI/5C,WAAWq3B,YAAY10B,KAAKk3B,KAAM,CACpCwgB,QAAUD,4BAA8B,EACxCv7C,KAAKu6C,WAAa,MAClBW,YAAc,MAIlB,IAAIa,YAAc,MAClB,GAAIP,QAAU,EAAG,CACf,GAAIx7C,KAAK05C,gBAAiB,CACxB8B,QAAU,EACVO,YAAc,KACd36C,QAAQ46C,UAAUh8C,UACb,CACLw7C,QAAUD,4BAA8B,GAG5C,GAAIC,SAAWD,6BAA+BA,4BAA6B,CACzE,GAAIv7C,KAAK05C,gBAAiB,CACxB8B,QAAUD,4BAA8B,EACxCQ,YAAc,KACd36C,QAAQ8B,UAAUlD,UACb,CACLw7C,QAAU,GAKd,IAAK,IAAI5X,KAAK,EAAGA,KAAK5jC,KAAKw5C,MAAMjmD,SAAUqwC,KAAI,CAC7C,IAAIqY,MAAOj8C,KAAKw5C,MAAM5V,MACtB,IAAKqY,MAAK3C,SAAU,CAClB,IAAKkC,QAAS,CACZx7C,KAAKk6C,SAAWtW,KAChB,QAEA4X,SAIN,IAAIrH,IAAM,EAEV,GAAIn0C,KAAKy5C,YAAa,CAEpB,IAAIyC,OAAS1D,YACb,GAAIx4C,KAAKs5C,SAAU,CACjB4C,OAAS5D,aAQX,IAAKt4C,KAAKs5C,UAAYn4C,WAAWsE,MAAM,CACrChJ,EAAAA,EAAGC,EAAAA,EACH7C,EAAGkD,MAAOjD,EAAG+/C,eACX,CACFz4C,QAAQ4B,WAAWhD,MACnBA,KAAKi6C,kBAAoBj6C,KAAKi6C,iBAC9Bj6C,KAAK46C,uBAAyB56C,KAAKk6C,SACnCgC,OAAS3D,kBAEJ,IAAKv4C,KAAKs5C,UAAYn4C,WAAW+2B,UAAU,CAChDz7B,EAAAA,EAAGC,EAAAA,EAAG7C,EAAGkD,MAAOjD,EAAG+/C,eACjB,CACFz4C,QAAQ+6C,aAAan8C,MACrBk8C,OAAS3D,aAGXn3C,QAAQg7C,SAAS,CACf3/C,EAAAA,EAAGC,EAAAA,EAAG8E,EAAGA,EAAI,EACb3H,EAAGkD,MAAOjD,EAAG+/C,cACZz4C,QAAQkN,QAAQ+tC,YAAaH,QAIhChrC,KAAK+T,iBAAiBxhB,QAAUrC,QAAQk7C,mBAAqBl7C,QAAQm7C,kBAAmB9/C,EAAIk9C,QAAQn1B,KAAM9nB,EAAG8E,EAAI,EAAGK,YAAasL,UAAUsT,MAAMS,KAAO/T,UAAUsT,MAAMM,QACxKhkB,MAAQ48C,QAAQn1B,KAAOpjB,QAAQkN,QAAQ+tC,YAAYG,OAAOC,GAAG,GAAK5C,aAAcA,aAAc75C,KAAKw5C,MAAMx5C,KAAKk6C,UAAUvmC,MACxHjX,GAAKm9C,aACLoB,KAAOv+C,EAAI,EACX8E,GAAK,IAGP,IAAKxB,KAAKy5C,aAAez5C,KAAKi6C,iBAAkB,CAC9C,IAAIe,UAAYh7C,KAAK45C,eAAiB55C,KAAKw5C,MAAMjmD,OAASsmD,aAAe75C,KAAK45C,cAC9E,IAAKoB,WAAat+C,EAAIsD,KAAKw5C,MAAMjmD,OAASsmD,cAAgB34C,SAAStH,KAAM,CACvE8C,EAAIwE,SAAStH,KAAOoG,KAAKw5C,MAAMjmD,OAASsmD,aAE1C,IAAI6C,OAAShgD,EACb,IAAIigD,OAASlgD,EACb,IAAImgD,WAAa,EACjB,IAAIC,UAAY9/C,MAChB,GAAIi+C,UAAW,CAEb,GAAIE,YAAa,CAEf,IAAI9rB,OAASvhB,IAAI,IAAMgsC,cAAe75C,KAAK45C,cAAgBC,cAAgB,GAC3E,IAAIiD,eAAiBhvC,IAAI,EAAG9N,KAAKk6C,SAAWL,aAAezqB,QAC3D,IAAI2tB,eAAiB/8C,KAAKg9C,GAAGJ,WAC7B,GAAIE,eAAiB98C,KAAKg9C,GAAGJ,WAAY,CACvC58C,KAAKg9C,GAAGJ,WAAaE,eAEvB,IAAIG,eAAiBpvC,IAAI7N,KAAKw5C,MAAMjmD,OAASsmD,cAAe75C,KAAKk6C,SAAW,GAAKL,aAAezqB,QAAUpvB,KAAK45C,cAC/G,GAAIqD,eAAiBj9C,KAAKg9C,GAAGJ,WAAY,CACvC58C,KAAKg9C,GAAGJ,WAAaK,eAGvBj9C,KAAKg9C,GAAGE,WAAaH,eAAiB/8C,KAAKg9C,GAAGJ,WAEhD58C,KAAKg9C,GAAGpG,MAAMn6C,EAAGC,EAAG8E,EAAGzE,MAAOiD,KAAK45C,cAAepB,aAClDoE,WAAa58C,KAAKg9C,GAAGJ,WAAa58C,KAAKg9C,GAAGE,WAC1CxgD,EAAI,EACJD,EAAI,EAIN,IAAK,IAAI7J,EAAI,EAAGA,EAAIoN,KAAKw5C,MAAMjmD,OAAQX,IAAK,CAC1C,IAAIuqD,OAAOn9C,KAAKw5C,MAAM5mD,GACtB,IAAIwqD,eAAiBD,OAAK7D,SAC1B,IAAI+D,UAAY,KAChB,IAAKr9C,KAAKs5C,WAAa8D,gBAAkBj8C,WAAWsE,MAAM,CACxDhJ,EAAAA,EAAGC,EAAAA,EAAG7C,EAAGkD,MAAOjD,EAAG+/C,eACjB,CACFz4C,QAAQ4B,WAAWhD,MACnBA,KAAKm6C,YAAc,KACnBn6C,KAAKu6C,WAAa,KAClBv6C,KAAKk6C,SAAWtnD,EAElB,IAAKoN,KAAKs5C,WAAa8D,gBAAkBj8C,WAAWsE,MAAM,CACxDhJ,EAAAA,EAAGC,EAAAA,EAAG7C,EAAGkD,MAAOjD,EAAG+/C,eACjB,CACFz4C,QAAQ4B,WAAWhD,MACnBA,KAAKo6C,kBAAoB,KACzBp6C,KAAKu6C,WAAa,KAClBv6C,KAAKk6C,SAAWtnD,EAElB,IAAI0qD,aAAe,MACnB,IAAKt9C,KAAKs5C,WAAa8D,gBAAkBj8C,WAAW+2B,UAAU,CAC5Dz7B,EAAAA,EAAGC,EAAAA,EAAG7C,EAAGkD,MAAOjD,EAAG+/C,eACjB,CACF,IAAI0D,KAAOp8C,WAAW42B,WACtBulB,aAAe,KACf,GAAI75C,SAAWzD,KAAK05C,gBAAiB,CACnC,GAAI15C,KAAK26C,uBAAyB56B,YAAY7T,kBAAoBqxC,KAAK,KAAOv9C,KAAKw6C,cAAgB7rC,SAAS4uC,KAAK,GAAKX,WAAY58C,KAAKy6C,YAAa,OAAQ,CAC1Jz6C,KAAKu6C,WAAa,KAClBv6C,KAAKk6C,SAAWtnD,EAElBoN,KAAKw6C,YAAc+C,KAAK,GACxBv9C,KAAKy6C,YAAc8C,KAAK,GAAKX,YASjC,IAAIx3C,WAAA,EACJ,IAAIo4C,gBAAkBx9C,KAAKs5C,aAAet5C,KAAK05C,kBAAoB15C,KAAKuC,aAAe+6C,cACvF,IAAIpF,OAAS,MACb,GAAIl4C,KAAKk6C,WAAatnD,GAAK4qD,eAAgB,CACzCp4C,MAAQu0C,QAAQ/B,gBAAkBL,2BAClC8F,UAAYj8C,QAAQkN,QAAQmvC,cAC5B,GAAIH,cAAgBn8C,WAAWg3B,YAAa,CAC1C,GAAI/2B,QAAQkN,QAAQovC,UAAW,CAC7BL,UAAYj8C,QAAQkN,QAAQovC,cACvB,CACLt4C,MAAQu0C,QAAQ7B,YAAcN,wBAGlC,GAAImC,QAAQzB,SAAWl4C,KAAKy5C,YAAa,CACvC,IAAIkE,GAAK59B,YAAY5T,aACrB,GAAInM,KAAKk6C,WAAamB,QAAS,CAC7BnD,OAAS,KACTl4C,KAAK06C,YAAcjC,wBACd,GAAIkF,IAAM39C,KAAK06C,YAAa,CACjC16C,KAAK06C,YAAc,MACd,CACLxC,OAAS,KACTl4C,KAAK06C,aAAeiD,UAGnB,GAAIP,eAAgB,CACzBh4C,MAAQu0C,QAAQ9B,gBAAkBJ,2BAClC4F,UAAYj8C,QAAQkN,QAAQsvC,eACvB,CACLx4C,MAAQu0C,QAAQhC,eAAiBL,0BACjC+F,UAAYj8C,QAAQkN,QAAQsvC,WAE9B,IAAIn5B,MAAQ,EACZ,IAAIo5B,WAAa,EACjB,GAAI3F,OAAQ,CACV2F,WAAax0C,IAAIrJ,KAAK06C,YAAc,GAAKjC,mBAAqB,IAC9Dh0B,OAAS,EAAIo5B,WAAahE,aAAe,GAE3C,IAAKF,QAAQ3B,WAAY,CACvB52C,QAAQg7C,SAAS,CAAE3/C,EAAAA,EAAGC,EAAGA,EAAI+nB,MAAOjjB,EAAGA,EAAI,EAAG3H,EAAGgjD,UAAW/iD,EAAG+/C,cAAgBwD,UAAW7E,aAG5F,IAAIsF,QAAU,MACd,IAAIC,OAASrhD,EAAI+nB,MACjB,GAAIk1B,QAAQxB,SAAU,CACpB,IAAIv6C,IAAMu/C,OAAKxpC,KACf,IAAIqqC,QAAUpgD,IAAIjG,QAAQ,MAC1B,GAAIqmD,WAAa,EAAG,CAClBF,QAAU,KACV,IAAIG,IAAMrgD,IAAI9F,MAAM,EAAGkmD,SACvB,IAAIE,KAAOtgD,IAAI9F,MAAMkmD,QAAU,GAC/B,IAAIrkD,GAAK8C,EAAIk9C,QAAQn1B,KACrB,IAAIiD,GAAKhrB,EAAIk9C,QAAQn1B,KAAOm1B,QAAQxB,SAAWhE,IAC/C,IAAIgK,GAAKxE,QAAQxB,SACjB,IAAIiG,GAAKvB,UAAYlD,QAAQxB,SAAWwB,QAAQn1B,KAAO,EAAI2vB,IAC3D,GAAIwF,QAAQvB,WAAY,CACtB,IAAIiG,GAAK,GACTA,GAAGj5B,MAAQjY,UAAUsT,MAAMS,KAC3Bm9B,GAAGh5B,OAASg5B,GAAG/4B,OAASzjB,YACxBw8C,GAAGxkD,EAAIskD,GACPE,GAAGvkD,EAAI,EACPukD,GAAGj5C,MAAQA,MACX+xC,YAAYmH,MAAMD,GAAI1kD,GAAIokD,OAAQv8C,EAAI,EAAGy8C,KACzCI,GAAGxkD,EAAIukD,GACPjH,YAAYmH,MAAMD,GAAI52B,GAAIs2B,OAAQv8C,EAAI,EAAG08C,UACpC,CACLhtC,KAAK+T,iBAAiB7f,MAAOzL,GAAIokD,OAAQv8C,EAAI,EAAGK,YAAasL,UAAUsT,MAAMS,KAAO/T,UAAUsT,MAAMM,QACpGo9B,GAAItE,aAAcoE,KAClB/sC,KAAK+T,iBAAiB7f,MAAOqiB,GAAIs2B,OAAQv8C,EAAI,EAAGK,YAAasL,UAAUsT,MAAMS,KAAO/T,UAAUsT,MAAMM,QACpGq9B,GAAIvE,aAAcqE,QAIxB,IAAKJ,QAAS,CACZ,IAAIS,IAAK,GAETA,IAAGn5B,OAAS+3B,OAAKlF,UAAY0B,QAAQ1B,SAAW9qC,UAAUsT,MAAMW,WAAajU,UAAUsT,MAAMS,MAAQ/T,UAAUsT,MAAMM,QACrHw9B,IAAGl5B,OAASk5B,IAAGj5B,OAASzjB,YACxB08C,IAAG1kD,EAAIgjD,UAAYlD,QAAQn1B,KAAO,EAClC+5B,IAAGzkD,EAAI+/C,aACP0E,IAAGn5C,MAAQA,MACX,IAAIo5C,GAAK/hD,EAAIk9C,QAAQn1B,KACrB,IAAIi6B,GAAKj9C,EAAI,EACb,GAAIm4C,QAAQvB,WAAY,CACtBjB,YAAYmH,MAAMC,IAAIC,GAAIT,OAAQU,GAAItB,OAAKxpC,UACtC,CACLzC,KAAK+T,iBAAiBs5B,IAAGn5C,MAAOo5C,GAAIT,OAAQU,GAAIF,IAAGl5B,OAAQk5B,IAAGn5B,MAAOm5B,IAAG1kD,EAAG0kD,IAAGzkD,EAAGqjD,OAAKxpC,OAU1FjX,GAAKm9C,aAEP,GAAImB,UAAW,CACbh7C,KAAKg9C,GAAGnG,IAAIn6C,GACZA,EAAIggD,OAAS18C,KAAK45C,cAClBn9C,EAAIkgD,OAGN,GAAI38C,KAAKm6C,aAAen6C,KAAKy5C,YAAa,CACxCz5C,KAAKi6C,iBAAmB,OAI5B,GAAIj6C,KAAKk6C,WAAamB,SAAWU,YAAa,CAC5C36C,QAAQs9C,YAAY,YAGtB,GAAIj7C,SAAWzD,KAAKmC,aAAc,CAChC,GAAIhB,WAAWsE,MAAM,CAAEC,KAAM,OAAS,CACpCtE,QAAQ4B,WAAW,WAIvBhD,KAAK26C,qBAAuB56B,YAAY7T,gBAAkB,EAC1DzP,EAAI,GACJC,GAAK,EACL,IAAKsD,KAAKy5C,YAAa,CACrBwB,KAAOv+C,EAETsQ,OAAOgI,MAAMimC,KAAOvhD,GAAIsG,KAAK07C,aAC7B,OAAOT,KAAOvhD,kCAIX,SAAShG,SACd,IAAKwd,KAAM,CACTA,KAAO9P,QAAQ8P,KAFa,IAAA,IAAA6Y,KAAAC,UAAAz2B,OAAN02B,KAAM/P,MAAA6P,MAAAG,KAAA,EAAAA,KAAAH,KAAAG,OAAA,CAAND,KAAMC,MAAAF,UAAAE,MAI9B,OAAA,IAAAC,SAAArkB,UAAAkE,KAAAogB,MAAWmvB,iBAAX,CAAA,MAAAlvB,OAA+BJ,2MCvkBjB7rB,IAAAA,YAIA5F,IAAAA,YAMAoG,SAAAA,sBAfM7L,QAAQ,wBAAtB4rD,mBAAAA,wBACc5rD,QAAQ,aAAtBwK,oBAAAA,UAERlK,QAAQurD,KAAO,KAER,SAASxgD,IAAIqJ,KAClB,OAAOpU,QAAQoU,KAGV,SAASjP,IAAIiP,IAAK3E,OACvB,GAAIzP,QAAQoU,OAAS3E,MAAO,CAC1BvF,UAAUM,OAAO,KAAS4J,IAA1B,IAAiC3E,MAAS,OAIvC,SAASlE,SAASmwC,MACvB9vC,OAAOD,KAAK+vC,MAAM7I,QAAQ,SAAUz+B,KAClC,IAAI+hC,IAAMuF,KAAKtnC,KACfpU,QAAQoU,KAAO+hC,IAAI9oC,cACnBnD,UAAUQ,cAAc0J,IAAK,CAC3BzJ,KAAMwrC,IAAIxrC,KACVE,MAAOsrC,IAAItrC,OAASygD,UAAUl3C,IAAIxP,QAAQ,KAAM,MAChDkG,MAAOqrC,IAAIrrC,MACXC,IAAK,SAAAA,MAAA,OAAM/K,QAAQoU,MACnBjP,IAAK,SAAAA,IAAA8F,GAAA,OAAKjL,QAAQoU,KAAOnJ,GACzBE,MAAO,KACPqgD,IAAKrV,IAAIqV,IACThgD,KAAM2qC,IAAI3qC,KACV4B,MAAO+oC,IAAI/oC,UAKjB7B,SAAS,CACPgd,aAAc,CACZlb,cAAe,EACf1C,KAAMT,UAAU6gC,SAChBjgC,MAAO,CAAC,EAAG,IAEboa,QAAS,CACPra,MAAO,UACPwC,cAAe,EACf1C,KAAMT,UAAUU,4VCIJ6gD,WAAAA,mBA+FAprD,OAAAA,eAoGAsW,KAAAA,aAuCAvP,QAAAA,gBAQAskD,UAAAA,UAhShB,IAAM/xC,OAASja,QAAQ,UACvB,IAAM2H,OAAS3H,QAAQ,4BAEFA,QAAQ,wBAArBisD,kBAAAA,SAER,IAAIC,QAAU,EAEd,IAAIC,WAAa,KAEV,IAAM12C,SAAAnV,QAAAmV,SAAW,CACtB22C,MAAS,EACT12C,SAAY,EACZ22C,MAAS,EACTC,MAAS,EACTC,QAAW,EACXC,MAAS,EACTC,SAAY,EACZC,WAAc,EACdC,MAAS,EACTC,OAAU,EACVC,MAAS,EACTC,WAAc,GAGT,IAAIC,QAAAzsD,QAAAysD,aAAA,EACX,IAAIpgD,aAAA,EAEJ,IAAIqgD,cAAA,EACJ,IAAIC,cAAA,EAEJ,IAAMC,cAAgB,6BACtB,IAAMC,cAAgB,+EACtB,IAAMC,cAAgB,+BACtB,IAAMC,cAAgB,wBAEtB,IAAMC,UAAY,CAChBC,MAAO,EACPx5C,KAAM,EAAI,EACVC,KAAM,EAAI,EACVC,KAAM,EAAI,EACV6H,KAAM,EAAI,EACVC,KAAM,EAAI,GAGZ,IAAIyxC,SAAW,GAER,SAASzB,WAAWr3C,IAAK3F,MAC9BkL,QAAQuzC,SAAS94C,MACjB84C,SAAS94C,KAAT,sBAAsCA,IAAtC,OAAgD3F,KAAhD,KAGF,IAAI0+C,cAAgB,MACpB,IAAIC,mBAAA,EACJ,SAASC,kBAAkBC,KACzB,SAASC,WACP5zC,OAAO,MAAP,yBAAuCyzC,cAAczoD,KAAK,WAC1DyoD,cAAgB,KAElB,IAAKD,cAAe,CAClB/nC,WAAWmoC,SAAU,KACrBJ,cAAgB,KAChBC,cAAgB,GAElBA,cAAc9nD,KAAKgoD,KAGrB,SAASE,cAAc/+C,MACrB,IAAIg/C,kBAAoB,GACxBh/C,KAAK7J,QAAQioD,cAAe,SAAUtiD,IAAK6J,KACzCq5C,kBAAkBr5C,KAAO,OAE3B3F,KAAOA,KAAK7J,QAAQmoD,cAAe,SAAUxiD,IAAKmjD,UAChD,IAAIC,YAAcT,SAASQ,UAC3B,IAAKC,YAAa,CAChBhnC,QAAQiB,MAAR,sBAAoCrd,KACpC,OAAOA,IAGTojD,YAAcA,YAAY/oD,QAAQioD,cAAe,SAAUe,KAAMx5C,KAC/D,GAAIq5C,kBAAkBr5C,KAAM,CAC1B,MAAA,eAAsBA,IAAtB,IAEFq5C,kBAAkBr5C,KAAO,KACzB,OAAOw5C,OAET,OAAOD,cAET,OAAOl/C,KAGT,IAAMo/C,cAAgB,CAAC,kBAAmB,kBAAkBlpD,KAAK,MACjE,IAAMmpD,iBAAmB,CAACD,cAAe,qBAAsB,2BAA4B,iCAAkC,4BAA6B,IAAIlpD,KAAK,MACnK,IAAMopD,iBAAmB,CAACF,cAAe,sBAAuB,uBAAwB,IAAIlpD,KAAK,MAEjG,SAASqpD,OAAOrjD,KAAM2V,KAAM7R,MAC1BkL,OAAOgI,aAAalT,OAApB,YAAA,YAAAmT,QAAoBnT,MAAM,UAC1B9B,KAAK2T,KAAOA,KACZ,IAAI2tC,OAAS,GACb,GAAI5mD,OAAOiF,QAAUmC,KAAKnK,QAAQ,qBAAuB,EAAG,CAC1D2pD,OAAStjD,OAAS6J,GAAGE,cAAgBq5C,iBAAmBD,iBAE1Dr/C,KAAA,GAAUw/C,OAAS5hD,QAAUoC,KAC7BA,KAAO++C,cAAc/+C,MACrBA,KAAOA,KAAK7J,QAAQ,mBAAoB,IACxC+H,KAAK4H,OAASC,GAAG05C,aAAavjD,MAC9B,GAAIA,OAAS6J,GAAGE,cAAe,CAC7B/H,KAAKwhD,SAAW,GAChBxhD,KAAKqtC,WAAa2R,SAASl9C,KAAMm+C,eAGjCjgD,KAAKqtC,WAAWnH,QAAQ,SAAA5nC,GAAA,OAAK0O,OAAOxE,SAASlK,KAAO2C,iBAC/C,CACLjB,KAAKwgC,KAAOye,QACZj/C,KAAK2sC,SAAWqS,SAASl9C,KAAMq+C,eAE/B,IAAIsB,MAAQ,GACZzhD,KAAK2sC,SAASzG,QAAQ,SAAA5nC,GACpB,IAAIs0C,IAAMhyC,OAAOtC,EAAExG,OAAO,IAC1BkV,QAAQ00C,MAAM9O,MACd5lC,QAAQy0C,MAAM7O,MACd6O,MAAM7O,KAAO,OAGjB5yC,KAAK2hD,SAAW3C,SAASl9C,KAAMo+C,eAE/BlgD,KAAK2hD,SAASzb,QAAQ,SAAA5nC,GACpB,IAAIsjD,UAAYtjD,EAAEvG,MAAM,KAAK,GAC7BiV,OAAOqzC,UAAUuB,cAEnB/5C,GAAGg6C,aAAa7hD,KAAK4H,OAAQ9F,MAC7B+F,GAAGi6C,cAAc9hD,KAAK4H,QAEtB,IAAKC,GAAGk6C,mBAAmB/hD,KAAK4H,OAAQC,GAAGm6C,gBAAiB,CAC1D,IAAIC,WAAap6C,GAAGq6C,iBAAiBliD,KAAK4H,QAAQ3P,QAAQ,MAAO,IAAIkqD,OACrEnoC,QAAQiB,MAAR,mBAAiCtH,KAAjC,KAA0CsuC,YAC1CvB,kBAAqB/sC,KAArB,KAA8BsuC,YAE9BjoC,QAAQyD,IAAI3b,KAAK/J,MAAM,MAAMsH,IAAI,SAAChI,KAAM8a,KAAP,OAAkBA,IAAM,EAAxB,KAA8B9a,OAAQW,KAAK,QAIzE,SAAStE,OAAOsK,KAAM2V,KAAM7R,MACjC,OAAO,IAAIu/C,OAAOrjD,KAAM2V,KAAM7R,MAGhC,SAASsgD,gBAAgBC,MACvB,OAAQA,KAAKtlD,OACX,KAAK,EACH8K,GAAGy6C,WAAWD,KAAKxqD,SAAUwqD,KAAKv/C,OAClC,MACF,KAAK,EACH+E,GAAG06C,WAAWF,KAAKxqD,SAAUwqD,KAAKv/C,OAClC,MACF,KAAK,EACH+E,GAAG26C,WAAWH,KAAKxqD,SAAUwqD,KAAKv/C,OAClC,MACF,KAAK,EACH+E,GAAG46C,WAAWJ,KAAKxqD,SAAUwqD,KAAKv/C,OAClC,MACF,KAAK,EACH+E,GAAG66C,iBAAiBL,KAAKxqD,SAAU,MAAOwqD,KAAKv/C,OAC/C,MACF,KAAK,GACH+E,GAAG86C,iBAAiBN,KAAKxqD,SAAU,MAAOwqD,KAAKv/C,OAC/C,OAIN,SAASilC,KAAK3gC,GAAIC,IAChB,IAAIu7C,KAAOx7C,GAAGo6C,SAASn6C,GAAGm5B,IAAM,CAC9B3iC,OAAQgK,GAAGg7C,gBACXlB,SAAU,MAEZ95C,GAAGi7C,aAAaF,KAAK/kD,OAAQuJ,GAAGQ,QAChCC,GAAGi7C,aAAaF,KAAK/kD,OAAQwJ,GAAGO,QAEhC,IAAK,IAAI/G,GAAK,EAAGA,GAAKuG,GAAGimC,WAAW95C,SAAUsN,GAAI,CAChDgH,GAAGk7C,mBAAmBH,KAAK/kD,OAAQ2K,SAASpB,GAAGimC,WAAWxsC,KAAMuG,GAAGimC,WAAWxsC,KAEhFgH,GAAGm7C,YAAYJ,KAAK/kD,QAEpB+kD,KAAKpwB,MAAQ3qB,GAAGo7C,oBAAoBL,KAAK/kD,OAAQgK,GAAGq7C,aACpD,IAAKN,KAAKpwB,MAAO,CACfkuB,kBAAA,sBAAwCt5C,GAAGuM,KAA3C,MAAqDtM,GAAGsM,KAAxD,MAAkE9L,GAAGs7C,kBAAkBP,KAAK/kD,SAC5Fmc,QAAQiB,MAAR,sBAAoCpT,GAAGs7C,kBAAkBP,KAAK/kD,SAGhEgK,GAAGu7C,WAAWR,KAAK/kD,QACnBqhD,WAAa0D,KAEb,IAAIjB,SAAWv6C,GAAGu6C,SAAS7pD,MAAM,GACjC,IAAK,IAAIkkB,IAAK,EAAGA,IAAK3U,GAAGs6C,SAASpuD,SAAUyoB,IAAI,CAC9C,IAAIrI,KAAOtM,GAAGs6C,SAAS3lC,KACvB,GAAI2lC,SAAShqD,QAAQgc,SAAW,EAAG,CACjCguC,SAAShpD,KAAKgb,OAGlBivC,KAAKjB,SAAWA,SAAStiD,IAAI,SAAAf,GAC3BA,EAAIA,EAAEvG,MAAM,KACZ,IAAIiG,KAAOM,EAAE,GACb,IAAIqV,KAAOrV,EAAE,GACb,IAAI+uB,MAAQ,EACZ,IAAInb,EAAIyB,KAAK/B,MAAM,oBACnB,GAAIM,EAAG,CACLyB,KAAOzB,EAAE,GACTmb,MAAQzsB,OAAOsR,EAAE,IAEnB,IAAIra,SAAWgQ,GAAGw7C,mBAAmBT,KAAK/kD,OAAQ8V,MAClD,GAAI9b,WAAa,KAAM,CAErB,OAAO,KAET,IAAIkF,MAAQsjD,UAAUriD,MACtB,IAAIqH,KAAOtI,MAAQswB,MACnB,IAAIi2B,KAAOxD,QAAQnsC,MACnB,IAAI7Q,MAAQ,IAAIlP,aAAayR,MAE7B,IAAIg9C,KAAO,CACT1uC,KAAAA,KACAtO,KAAAA,KACAtI,MAAAA,MACAswB,MAAAA,MACAvqB,MAAAA,MACAjL,SAAAA,SACAyrD,KAAAA,MAEFlB,gBAAgBC,MAChB,OAAOA,OACNnjD,OAAO,SAAAZ,GAAA,OAAKA,IAEf,IAAK,IAAIslC,KAAK,EAAGA,KAAKv8B,GAAGslC,SAASp5C,SAAUqwC,KAAI,CAC9C,IAAI2f,MAAOl8C,GAAGslC,SAAS/I,MACvB,IAAIgP,IAAMhyC,OAAO2iD,MAAKzrD,OAAO,IAC7B,IAAID,SAAWgQ,GAAGw7C,mBAAmBT,KAAK/kD,OAAQ0lD,OAClD,GAAI1rD,WAAa,KAAM,CACrBgQ,GAAG27C,UAAU3rD,SAAU+6C,MAG3B,OAAOgQ,KAGF,SAAS54C,KAAK5C,GAAIC,GAAI9F,QAC3B,IAAIqhD,KAAOx7C,GAAGo6C,SAASn6C,GAAGm5B,IAC1B,IAAKoiB,KAAM,CACTA,KAAO7a,KAAK3gC,GAAIC,IAElB,IAAKu7C,KAAKpwB,MAAO,CACfowB,KAAO7a,KAAK3gC,GAAI24C,UAChB,IAAK6C,KAAKpwB,MAAO,CACfowB,KAAO7a,KAAKiY,SAAUD,UAExB34C,GAAGo6C,SAASn6C,GAAGm5B,IAAMoiB,KAEvB,GAAIA,OAAS1D,WAAY,CACvBA,WAAa0D,KACb/6C,GAAGu7C,WAAWR,KAAK/kD,QAErB,IAAK,IAAIgD,GAAK,EAAGA,GAAK+hD,KAAKjB,SAASpuD,SAAUsN,GAAI,CAChD,IAAIwhD,KAAOO,KAAKjB,SAAS9gD,IACzB,IAAIiC,MAAQvB,OAAO8gD,KAAK1uC,OAAS0uC,KAAKiB,KACtC,IAAKxgD,MAAO,CACV,SAEF,IAAI2gD,KAAO,MACX,IAAK,IAAI3lC,GAAK,EAAGA,GAAKukC,KAAKh9C,OAAQyY,GAAI,CACrC,GAAIhb,MAAMgb,MAAQukC,KAAKv/C,MAAMgb,IAAK,CAChC2lC,KAAO,KACP,OAGJ,GAAIA,KAAM,CACR,IAAK,IAAIC,IAAK,EAAGA,IAAKrB,KAAKh9C,OAAQq+C,IAAI,CACrCrB,KAAKv/C,MAAM4gD,KAAM5gD,MAAM4gD,KAEzBtB,gBAAgBC,QAKtB,IAAMsB,SAAW,CAAEC,OAAQ,GACpB,SAASnpD,QAAQopD,UACtBnkD,QAAUT,OAAOD,KAAKtE,OAAOgF,SAASL,IAAI,SAAAf,GAAA,OAAKqlD,SAASrlD,GAAK,GAAd,WAA8BA,EAA9B,OAAqCtG,KAAK,IACzF3E,QAlQSysD,QAkQTA,QAAU+D,SAEV9D,SAAWrsD,OAAOmU,GAAGC,gBAAiB,WAAY,uFAClDk4C,SAAWtsD,OAAOmU,GAAGE,cAAe,WAAY,4SAG3C,SAASg3C,UAAUt3C,IAAK4nC,KAC7BriC,QAAQ8yC,QAAQr4C,MAChBq4C,QAAQr4C,KAAO4nC,mnBCnCD37C,OAAAA,OA1PhB,IAAMsZ,OAASja,QAAQ,UACvB,IAAMmO,SAAWnO,QAAQ,iBACzB,IAAMgtB,YAAchtB,QAAQ,eAC5B,IAAMoO,WAAapO,QAAQ,cAC3B,IAAM+wD,cAAgB/wD,QAAQ,sBAC9B,IAAMqO,QAAUrO,QAAQ,wBACAA,QAAQ,cAAxB0b,eAAAA,MAAOzH,cAAAA,SAEPlD,KAAc3C,WAAd2C,KAAMg4B,IAAQ36B,WAAR26B,IAEd,IAAMioB,cAAgB/8C,KAAK,GAAO,IAAK,GAAO,IAAK,GAAO,IAAK,IAAO,SAEhEg9C,0BACJ,SAAAA,eAAYziD,QACVA,OAASA,QAAU,GACnBvB,KAAKikD,QAAUH,cAAcpwD,OAAO6N,QACpCvB,KAAKkkD,YAAc,EAGnBlkD,KAAKk6C,UAAY,mEAIjB94C,QAAQ4B,WAAWhD,KAAKikD,mDAGjBzwC,MAAOirB,OAAO,IACf+a,MAAUx5C,KAAKikD,QAAfzK,MACNxsC,OAAOwG,OAAS,GAAKA,MAAQgmC,MAAMjmD,QACnC,IAAI4wD,UAAY3K,MAAMhmC,OACtB,IAAI4wC,MAAQ,MACZ,GAAI3lB,QAAU,EAAG,CACfA,MAAQ,EACR2lB,MAAQ,KAEV,GAAID,UAAUvvC,GAAI,CAChBuvC,UAAUvvC,KAEZ,IAAKuvC,UAAU1kC,MAAO,CACpB,GAAI0kC,UAAUrhD,QAAU,OAASqhD,UAAUnL,YAAcmL,UAAUlL,eAAgB,CAGjFj5C,KAAKqoC,SAAS6b,WAAa1wC,WAEtB,GAAI2wC,UAAUrhD,QAAU,KAAM,CACnC,GAAI3B,WAAWo3B,QAAQz0B,KAAK42B,SAAW0pB,MAAO,CAC5C3lB,OAAS,EAEX0lB,UAAUrhD,OAAS27B,MAAQ0lB,UAAUtL,UACrC,GAAIsL,UAAUhL,QAAUgL,UAAU9K,WAAY,CAE5C8K,UAAUrhD,MAAQ2L,MAAM01C,UAAUrhD,MAAOqhD,UAAUxL,UAAWwL,UAAUvL,eACnE,CACL,GAAIuL,UAAUrhD,MAAQqhD,UAAUxL,UAAW,CACzCwL,UAAUrhD,MAAQqhD,UAAUvL,UAE9B,GAAIuL,UAAUrhD,MAAQqhD,UAAUvL,UAAW,CACzCuL,UAAUrhD,MAAQqhD,UAAUxL,gBAI3B,OAIF,CACL54B,YAAY1T,SAAS83C,UAAU1kC,wCAK/Ble,QAAQ,IACJ0iD,QAAYjkD,KAAZikD,QACNA,QAAQ3hD,YAAYf,QAFV,IAIFi4C,MAAgByK,QAAhBzK,MAAO/8C,EAASwnD,QAATxnD,EAAG+E,EAAMyiD,QAANziD,EAClB,IAAM9H,GAAKuqD,QAAQvnD,EACnB,IAAI2nD,YAAc,EAClB,IAAK,IAAIzxD,EAAI,EAAGA,EAAI4mD,MAAMjmD,SAAUX,EAAG,CACrC,GAAI4mD,MAAM5mD,GAAGmtC,KAAM,CACjBskB,WAAazxD,GAKjB,IAAI0xD,eAAiB,KACrB,GAAItkD,KAAKkkD,YAAc,GAAKlkD,KAAKkkD,WAAa1K,MAAMjmD,OAAQ,CAC1D+wD,eAAiB,MACjBljD,QAAQsa,SAASxa,SAASzH,KAAMyH,SAASxH,KAAMwH,SAASvH,KAAMuH,SAAStH,KAAM4H,EAAI,EAAGuiD,eAetFE,QAAQ3K,UAAYgL,eAGpB,IAAI3K,QAAUsK,QAAQtK,QACtB,IAAK,IAAI94C,GAAK,EAAGA,GAAK24C,MAAMjmD,OAAQsN,KAAM,CACxC,IAAIsjD,UAAY3K,MAAM34C,IACtB,GAAIsjD,UAAUhL,OAAQ,CACpB,IAAIA,OAASgL,UAAU9b,SAAS8Q,OAChC,IAAKA,OAAQ,EAGbA,OAAOoL,WAAa,KAEpBpL,OAAOG,SAAW6K,UAAU7K,SAC5B,IAAIkL,aAAe,IACnB,IAAIC,SAAWhoD,EAAIwnD,QAAQlnD,MAAQynD,aAAe,GAClD,IAAIlmD,EAAI6lD,UAAUrhD,MAAQqhD,UAAUxL,UACpC,IAAI32B,MAAQ23B,QAAQhC,cAAc31B,MAIlC,GAAIm3B,OAAOG,SAAU,CACnBt3B,MAAQ23B,QAAQ9B,eAAe71B,MAEjC1jB,EAAI66C,OAAOuL,IAAI,CACbjoD,EAAGgoD,SACH/nD,EAAGhD,GAAKmH,GAAK,GAAK,EAClBW,EAAGA,EAAI,EACP3H,EAAG2qD,aAEHxiC,MAAAA,MACAlf,MAAOxE,EACPwP,IAAKq2C,UAAUvL,UAAYuL,UAAUxL,YAEvCwL,UAAUrhD,MAAQxE,EAAI6lD,UAAUxL,UAChC,GAAIQ,OAAO35B,UAAY25B,OAAOwL,QAAS,CAErC,GAAIV,QAAQ/J,WAAar5C,GAAI,CAC3BojD,QAAQ/J,SAAWr5C,GACnBO,QAAQs9C,YAAY,iBAGnB,GAAIyF,UAAU9K,WAAY,CAC/BrsC,cAAcm3C,UAAUrhD,QAAU,SAAU,8CAC5CkK,OAAOm3C,UAAUtL,UAAW,8CAC5B,IAAI+L,cAAgB,GACpB,IAAIzQ,IAAM,EACV,IAAIxyC,cAAgBijD,cAAgBzQ,KAAO,EAC3C,IAAI0Q,SAAWpoD,EAAIwnD,QAAQlnD,MAAQ6nD,cACnC,IAAInmB,MAAQ,EAEZ,GAAIr9B,QAAQ0jD,WAAW,CACrBC,SAAU,KACVtoD,EAAGooD,SACHnoD,EAAGhD,GAAKmH,GAAK,GAAK,EAClBW,EAAGA,EAAI,EACP3H,EAAG8H,aACH7H,EAAGsH,QAAQ04C,cAAgB,IAC3Bh4C,KAAM,MACJ,CACF28B,OAAS,EAEX,IAAIumB,WAAa5jD,QAAQ6jD,iBACzB,GAAI7jD,QAAQ0jD,WAAW,CACrBC,SAAU,KACVtoD,EAAGooD,SAAW1Q,IAAMxyC,aACpBjF,EAAGhD,GAAKmH,GAAK,GAAK,EAClBW,EAAGA,EAAI,EACP3H,EAAG8H,aACH7H,EAAGsH,QAAQ04C,cAAgB,IAC3Bh4C,KAAM,MACJ,CACF28B,MAAQ,EAEV,IAAIymB,UAAY9jD,QAAQ6jD,iBAExB,GAAIxmB,MAAO,CACT0lB,UAAUrhD,OAAS27B,MAAQ0lB,UAAUtL,UACrCsL,UAAUrhD,MAAQ2L,MAAM01C,UAAUrhD,MAAOqhD,UAAUxL,UAAWwL,UAAUvL,WAE1E,GAAIoM,YAAcE,UAAW,CAE3B,GAAIjB,QAAQ/J,WAAar5C,GAAI,CAC3BojD,QAAQ/J,SAAWr5C,GACnBO,QAAQs9C,YAAY,aAM5B,IAAIhiD,EAAIhD,GACRgD,GAAKunD,QAAQS,MAEb,IAAIxK,UAAY,EAChB,GAAImK,cAAgB,IAAMljD,WAAWq3B,YAAY10B,KAAKC,OAASy1C,MAAM6K,YAAYjL,oBAAsBj4C,WAAWw3B,kBAAkBmD,IAAIj2B,SAAU,CAChJ7F,KAAKmlD,SAASd,WAAY,GAC1BnK,SAAWmK,WAIb,IAAIe,iBAAmB5L,MAAMyK,QAAQ/J,UAAUp3C,QAAU,KACzD,GAAImhD,QAAQ9J,aAAe8J,QAAQ1hD,aAAepB,WAAWq3B,YAAY10B,KAAK+2B,QAAU15B,WAAWq3B,YAAY10B,KAAK02B,QAAUr5B,WAAWw3B,kBAAkBmD,IAAIE,SAAU,CACvKh8B,KAAKmlD,SAASlB,QAAQ/J,SAAU,GAChCA,SAAW+J,QAAQ/J,SAErB,GAAI+J,QAAQ1hD,YAAc6iD,mBAAqBjkD,WAAWq3B,YAAY10B,KAAKq3B,QAAUh6B,WAAWq3B,YAAY10B,KAAKuhD,IAAMlkD,WAAWw3B,kBAAkBmD,IAAIX,QAAS,CAC/Jn7B,KAAKmlD,SAASlB,QAAQ/J,SAAU,GAChCA,SAAW+J,QAAQ/J,SAErB,GAAI+J,QAAQqB,iBAAmBrB,QAAQ1hD,YAAc6iD,mBAGrDjkD,WAAWq3B,YAAY10B,KAAKo3B,OAAS/5B,WAAWq3B,YAAY10B,KAAKi4B,IAAM56B,WAAWw3B,kBAAkBmD,IAAIZ,OAAQ,CAC9Gl7B,KAAKmlD,SAASlB,QAAQ/J,UAAW,GACjCA,SAAW+J,QAAQ/J,SAErBl6C,KAAKk6C,SAAWA,SAChB,GAAIA,YAAc,IAAMV,MAAMU,UAAUhB,SAAU,CAChD,GAAIM,MAAMU,UAAUna,KAAM,CACxB3+B,QAAQs9C,YAAY,cACf,CACLt9C,QAAQs9C,YAAY,WAIxB,OAAOhiD,EAAIhD,iDAGFohD,cACT,GAAI96C,KAAKk6C,YAAc,EAAG,CACxB,OAAO,MAET,GAAIY,eAAiB75C,UAAW,CAC9B,OAAOjB,KAAKikD,QAAQzK,MAAMx5C,KAAKk6C,UAAUpB,KAAO,KAElD,OAAO94C,KAAKikD,QAAQsB,WAAWzK,0EAI/B,OAAO96C,KAAKk6C,mEAIZ,OAAOl6C,KAAKikD,QAAQzK,MAAMx5C,KAAKk6C,uCAI5B,SAASxmD,SAAgB,IAAA,IAAAq2B,KAAAC,UAAAz2B,OAAN02B,KAAM/P,MAAA6P,MAAAG,KAAA,EAAAA,KAAAH,KAAAG,OAAA,CAAND,KAAMC,MAAAF,UAAAE,MAC9B,OAAA,IAAAC,SAAArkB,UAAAkE,KAAAogB,MAAW45B,eAAX,CAAA,MAAA35B,OAA6BJ,0LCxMf7b,aAAAA,qBAiBAo3C,UAAAA,kBA8EAlsB,YAAAA,oBAKAmsB,aAAAA,qBAIAp3C,UAAAA,kBAuDAq3C,UAAAA,kBAqCAC,eAAAA,uBAuDAx3C,aAAAA,aAlTT,IAAMy3C,aAAAvyD,QAAAuyD,aAAe,EACrB,IAAMC,SAAAxyD,QAAAwyD,SAAW,EACjB,IAAMC,QAAAzyD,QAAAyyD,QAAU,EAChB,IAAMC,KAAA1yD,QAAA0yD,KAAOF,SAAWC,QAE/B,IAAM94C,OAASja,QAAQ,uBACDA,QAAQ,aAAtBwK,mBAAAA,wBACiBxK,QAAQ,qCAAzBizD,eAAAA,KAAMC,iBAAAA,WACN5sB,IAAiC7iC,KAAjC6iC,IAAKzrB,MAA4BpX,KAA5BoX,MAAOE,IAAqBtX,KAArBsX,IAAKD,IAAgBrX,KAAhBqX,IAAKjJ,OAAWpO,KAAXoO,OAC9B,IAAMsJ,SAAWnb,QAAQ,+BACEA,QAAQ,wBAA3B2b,mBAAAA,SAAUE,eAAAA,KAElB,IAAMs3C,kBAAoB,KAE1B,IAAIC,OAAS,GACb,IAAIC,YAAc,EAIlB,IAAMC,eAAiB,CACrBC,SAAU,CAAC,MAAO,OAElBC,UAAWL,mBAEb,IAAIM,kBAAA,EAEJ,IAAIC,YAAc,GAClB,IAAIl0C,aAAe,EACnB,IAAIm0C,MAAQ,GACZ,IAAIC,WAAA,EAEJz4C,SAAStP,SAAS,CAChBgoD,OAAQ,CACNlmD,cAAe,EACf1C,KAAMT,UAAUU,WAChBE,MAAO,CAAC,EAAG,MAIf+P,SAAStP,SAAS,CAChBwgB,MAAO,CACL1e,cAAe,EACf1C,KAAMT,UAAU6gC,SAChBjgC,MAAO,CAAC,EAAG,MAIf+P,SAAStP,SAAS,CAChB+nD,MAAO,CACLjmD,cAAe,EACf1C,KAAMT,UAAU6gC,SAChBjgC,MAAO,CAAC,EAAG,MAIR,SAASiQ,aAAa7M,QAC3BilD,aAAe93C,SAASnN,QAAU,GAAI8kD,gBAGtCM,MAAQ,GACR,IAAK,IAAI9lD,GAAK,EAAGA,GAAK,IAAKA,GAAI,CAC7B8lD,MAAMhuD,KAAK,CACTymB,MAAO,KACPohB,GAAI,EACJqmB,eAAgB,EAChBC,cAAe,EACfC,WAAY,EACZC,UAAW,SAKV,SAASxB,UAAUyB,KAAM1iB,KAAM3vB,IACpC2vB,KAAOA,MAAQ,GACf,GAAIrqB,MAAM+b,QAAQgxB,MAAO,CACvBj6C,QAAQ4H,IACR,IAAK,IAAI/T,GAAK,EAAGA,GAAKomD,KAAK1zD,SAAUsN,GAAI,CACvC2kD,UAAUyB,KAAKpmD,IAAK0jC,MAEtB,OAEF,IAAI98B,IAAMw/C,KACV,GAAId,OAAO1+C,KAAM,CACf,GAAImN,GAAI,CACNA,KAEF,OAEF,IAAI1C,EAAI+0C,KAAKr1C,MAAM,2LACnB,IAAIs1C,mBAAA,EACJ,GAAIh1C,EAAG,CACL+0C,KAAO/0C,EAAE,GACTg1C,cAAgBh1C,EAAE,GAEpB,IAAIzW,IAAA,UAAgBwrD,KACpB,IAAIE,KAAO,GACX,GAAID,cAAe,CACjBC,KAAKxuD,KAAQ8C,IAAb,IAAoByrD,eAEtB,IAAK,IAAIlrC,IAAK,EAAGA,IAAKwqC,aAAaF,SAAS/yD,SAAUyoB,IAAI,CACxD,IAAIorC,IAAMZ,aAAaF,SAAStqC,KAChC,GAAIorC,MAAQF,cAAe,CACzBC,KAAKxuD,KAAQ8C,IAAb,IAAoB2rD,MAMxB,SAASC,QAAQl1C,KACf,GAAIA,MAAQg1C,KAAK5zD,OAAQ,CACvBymB,QAAQiB,MAAR,uBAAqCgsC,KAArC,wCACA,GAAIryC,GAAI,CACNA,GAAG,uBAEL,SAEAwxC,YACF,IAAIkB,KAAO,MACX,IAAIloC,MAAQ,IAAI4mC,KAAK,CACnBvqD,IAAK0rD,KAAKrvD,MAAMqa,KAChBo1C,MAAOxO,QAAQxU,KAAKijB,WACpBC,KAAM1O,QAAQxU,KAAKkjB,MACnBb,OAAQ,EACR9vD,OAAQ,SAAAA,SACN,IAAKwwD,KAAM,GACPlB,YACFkB,KAAO,KACPnB,OAAO1+C,KAAO2X,MACd,GAAIxK,GAAI,CACNA,GAAG,SAIT8yC,YAAa,SAAAA,YAAUlnB,GAAImgB,IAAKgH,OAC9B,GAAIx1C,MAAQg1C,KAAK5zD,OAAS,EAAG,CAC3BymB,QAAQiB,MAAR,uBAAqCksC,KAAKh1C,KAA1C,KAAmDwuC,SAC9C,CACL3mC,QAAQyD,IAAR,uBAAmC0pC,KAAKh1C,KAAxC,KAAiDwuC,IAAjD,wBAEF,IAAK2G,KAAM,GACPlB,YACFkB,KAAO,KACPD,QAAQl1C,IAAM,OAKtBk1C,QAAQ,GAGH,SAAS/tB,eAKT,SAASmsB,eACd,OAAQQ,OAAO2B,SAAW3B,OAAO4B,WAG5B,SAASx5C,UAAUuM,IACxBrI,cAAgBqI,GAChB,IAAK6qC,eAAgB,CACnB,OAKF,IAAIqC,SAAWltC,GAAK4rC,aAAaD,UACjC,IAAK,IAAI1lD,GAAK,EAAGA,GAAK8lD,MAAMpzD,SAAUsN,GAAI,CACxC,IAAIknD,IAAMpB,MAAM9lD,IAChB,IAAKknD,IAAI3oC,MAAO,CACd,SAEF,IAAIwc,OAAS1tB,SAASy4C,MAAQoB,IAAIjB,cAAgB,EAClD,GAAIiB,IAAIlB,iBAAmBjrB,OAAQ,CACjC,IAAI6C,MAAQ7C,OAASmsB,IAAIlB,eACzB,IAAImB,SAAWn6C,IAAIwrB,IAAIoF,OAAQqpB,UAC/B,GAAIrpB,MAAQ,EAAG,CACbspB,IAAIlB,eAAiB/4C,IAAI8tB,OAAQmsB,IAAIlB,eAAiBmB,cACjD,CACLD,IAAIlB,eAAiBh5C,IAAI+tB,OAAQmsB,IAAIlB,eAAiBmB,UAExD,IAAKD,IAAIjB,gBAAkBiB,IAAIlB,eAAgB,CAC7C,IAAKkB,IAAIf,UAAW,CAClBe,IAAI3oC,MAAM6oC,KAAKF,IAAIvnB,IAErBunB,IAAI3oC,MAAQ,MAGhB,GAAI2oC,IAAI3oC,MAAO,CACb,IAAI2nC,WAAagB,IAAIlB,eAAiB34C,SAAS04C,OAC/C,GAAImB,IAAIf,UAAW,CACjBe,IAAIf,UAAY,MAChBe,IAAIvnB,GAAKunB,IAAI3oC,MAAM8oC,OACnBH,IAAIhB,YAAc,EAEpB,GAAIgB,IAAIhB,aAAeA,WAAY,CACjCgB,IAAI3oC,MAAMwnC,OAAOG,WAAYgB,IAAIvnB,IACjCunB,IAAIhB,WAAaA,aAKvB,IAAK,IAAInjB,KAAK8iB,MAAMnzD,OAAS,EAAGqwC,MAAM,IAAKA,KAAI,CAC7C,IAAIukB,KAAOzB,MAAM9iB,MACjBukB,KAAKvB,OAAS94C,IAAI,EAAGq6C,KAAKvB,OAASkB,UACnCK,KAAK/oC,MAAMwnC,OAAOuB,KAAKvB,OAAS14C,SAAS04C,OAAQuB,KAAK3nB,IACtD,IAAK2nB,KAAKvB,OAAQ,CAChBuB,KAAK/oC,MAAM6oC,KAAKE,KAAK3nB,IACrB5xB,KAAK83C,MAAO9iB,QAKX,SAAS8hB,UAAU0C,UAAWxB,OAAQyB,UAC3CzB,OAASA,QAAU,EACnB,IAAKyB,WAAan6C,SAASkR,OAASipC,WAAan6C,SAASy4C,MAAO,CAC/D,OAAO,KAET,IAAKlB,eAAgB,CACnB,OAAO,KAET,GAAIvrC,MAAM+b,QAAQmyB,WAAY,CAC5BA,UAAYA,UAAUx6C,MAAMhJ,SAAWwjD,UAAU70D,SAEnD,IAAI6rB,MAAQ+mC,OAAOiC,WACnB,IAAKhpC,MAAO,CACV,OAAO,KAET,IAAIkpC,iBAAmB7B,YAAY2B,aAAe,IAClD,GAAI71C,aAAe+1C,iBAAmB,GAAI,CACxC,OAAO,KAGT,IAAI9nB,GAAKphB,MAAM8oC,KAAKjnD,UAAW2lD,OAAS14C,SAAS04C,QAEjDH,YAAY2B,WAAa71C,aACzB,MAAO,CACL01C,KAAM7oC,MAAM6oC,KAAKj+C,KAAKoV,MAAOohB,IAC7B+nB,QAASnpC,MAAMmpC,QAAQv+C,KAAKoV,MAAOohB,IACnCgoB,QAAS,SAAAA,QAAA3gB,MACP6e,MAAM/tD,KAAK,CACTiuD,OAAAA,OACAxnC,MAAAA,MACAohB,GAAAA,GACAqH,KAAAA,SAMD,SAAS8d,eAAeyC,UAAWxB,OAAQ6B,YAChD,IAAKv6C,SAASy4C,MAAO,CACnB,OAEF,GAAIC,SAAW3lD,UAAW,CACxB2lD,OAAS,EAEX6B,WAAaA,YAAc7C,aAC3BJ,UAAU4C,UAAW,CAAEZ,UAAW,KAAMC,KAAM,MAAQ,SAAA9G,KACpD3zC,QAAQ2zC,KACR,IAAIvhC,MAAQ+mC,OAAOiC,WACnBp7C,OAAOoS,OACP,GAAIunC,MAAM,GAAGvnC,QAAUA,MAAO,CAE5BunC,MAAM,GAAGG,cAAgBF,OACzB,IAAK6B,WAAY,CACf,IAAK7B,OAAQ,CACXxnC,MAAM6oC,KAAKtB,MAAM,GAAGnmB,IACpBmmB,MAAM,GAAGvnC,MAAQ,SACZ,CACL,IAAI2nC,WAAaJ,MAAM,GAAGI,WAAaH,OAAS14C,SAAS04C,OACzDxnC,MAAMwnC,OAAOG,WAAYJ,MAAM,GAAGnmB,KAGtC,OAGF,GAAImmB,MAAM,GAAGE,eAAgB,CAC3B,GAAI4B,WAAa5C,SAAU,CAEzB,IAAIzwC,KAAOuxC,MAAM,GACjBA,MAAM,GAAKA,MAAM,GACjBA,MAAM,GAAKvxC,KACXuxC,MAAM,GAAGG,cAAgB,GAG7B,GAAIH,MAAM,GAAGvnC,MAAO,CAClBunC,MAAM,GAAGvnC,MAAM6oC,KAAKtB,MAAM,GAAGnmB,IAE/BmmB,MAAM,GAAGvnC,MAAQA,MACjBunC,MAAM,GAAGG,cAAgBF,OACzB,IAAI8B,UAAYD,WAAa3C,QAAU,EAAIc,OAC3CD,MAAM,GAAGE,eAAiB6B,UAC1B,GAAIjD,eAAgB,CAClB,IAAIkD,YAAaD,UAAYx6C,SAAS04C,OACtCD,MAAM,GAAGnmB,GAAKphB,MAAM8oC,KAAKjnD,UAAW0nD,aAEpChC,MAAM,GAAGI,WAAa4B,YACtBhC,MAAM,GAAGK,UAAY,UAChB,CACLL,MAAM,GAAGK,UAAY,QAKpB,SAAS74C,eACd,OAAOi4C,wLC/QO1yD,OAAAA,WArCRka,MAAkBpX,KAAlBoX,MAAOhJ,OAAWpO,KAAXoO,OAEf,SAASgkD,oBAAoBrnD,QAC3BvB,KAAKwoC,MAAQ,EACbxoC,KAAK6nC,KAAO,EACZ7nC,KAAKyf,MAAQ,KACbzf,KAAK6oD,KAAO,KACZ7oD,KAAK8oD,SAAW,EAEhB,GAAIvnD,kBAAkBqnD,oBAAqB,CACzC5oD,KAAKnF,KAAO0G,OAAO1G,KACnBmF,KAAKqM,SAAS9K,OAAOke,WAChB,CACLzf,KAAKnF,KAAO0G,OACZ,IAAK,IAAIkG,OAAOzH,KAAKnF,KAAM,CACzB,IAAIguD,KAAO7oD,KAAKnF,KAAK4M,KACrB,UAAWohD,KAAKE,SAAW,SAAU,CACnCF,KAAKE,OAAS,CAACF,KAAKE,QAEtB,UAAWF,KAAKG,QAAU,SAAU,CAClC,IAAI58B,IAAM,IAAIlS,MAAM2uC,KAAKE,OAAOx1D,QAChC,IAAK,IAAIsN,GAAK,EAAGA,GAAKgoD,KAAKE,OAAOx1D,SAAUsN,GAAI,CAC9CurB,IAAIvrB,IAAMgoD,KAAKG,MAEjBH,KAAKG,MAAQ58B,IAEfy8B,KAAKI,WAAa,EAClB,IAAK,IAAIjtC,IAAK,EAAGA,IAAK6sC,KAAKG,MAAMz1D,SAAUyoB,IAAI,CAC7C6sC,KAAKI,YAAcJ,KAAKG,MAAMhtC,KAEhC,GAAI6sC,KAAKpB,OAASxmD,UAAW,CAC3B4nD,KAAKpB,KAAO,QAMb,SAAS/zD,OAAO6N,QACrB,OAAO,IAAIqnD,oBAAoBrnD,QAGjCqnD,oBAAoB9iD,UAAUojD,MAAQ,WACpC,OAAO,IAAIN,oBAAoB5oD,OAGjC4oD,oBAAoB9iD,UAAUuG,SAAW,SAAUoT,MAAO2kC,OACxD,GAAI3kC,QAAUzf,KAAKyf,QAAU2kC,MAAO,CAClC,OAAOpkD,KAETA,KAAKyf,MAAQA,MACbzf,KAAK6oD,KAAO7oD,KAAKnF,KAAK4kB,OACtB,GAAIzf,KAAK6oD,KAAKM,UAAW,CACvBnpD,KAAK6nC,KAAOj6B,MAAMhJ,SAAW5E,KAAK6oD,KAAKM,eAClC,CACLnpD,KAAK6nC,KAAO,EAEd7nC,KAAK8oD,SAAW,EAChB9oD,KAAKwoC,MAAQxoC,KAAK6oD,KAAKE,OAAO/oD,KAAK8oD,UACnC,OAAO9oD,MAGT4oD,oBAAoB9iD,UAAUsjD,SAAW,WACvC,IAAKppD,KAAK6oD,KAAM,CACd,OAAO,EAET,IAAIhhB,KAAO7nC,KAAK6nC,KAChB,IAAK,IAAIhnC,GAAK,EAAGA,GAAKb,KAAK8oD,WAAYjoD,GAAI,CACzCgnC,MAAQ7nC,KAAK6oD,KAAKG,MAAMnoD,IAE1B,OAAOgnC,KAAO7nC,KAAK6oD,KAAKI,YAG1BL,oBAAoB9iD,UAAUqoB,OAAS,SAAUvT,IAC/C,IAAK5a,KAAK6oD,KAAM,CACd,OAEF7oD,KAAK6nC,MAAQjtB,GACb,GAAI5a,KAAK6nC,KAAO7nC,KAAK6oD,KAAKG,MAAMhpD,KAAK8oD,UAAW,CAC9C9oD,KAAK6nC,MAAQ7nC,KAAK6oD,KAAKG,MAAMhpD,KAAK8oD,UAClC9oD,KAAK8oD,SAAW9oD,KAAK8oD,SAAW,EAChC,GAAI9oD,KAAK8oD,WAAa9oD,KAAK6oD,KAAKE,OAAOx1D,OAAQ,CAC7C,GAAIyM,KAAK6oD,KAAKpB,KAAM,CAClBznD,KAAK8oD,SAAW9oD,KAAK8oD,SAAW9oD,KAAK6oD,KAAKE,OAAOx1D,WAC5C,CAELyM,KAAK6oD,KAAO,KACZ,QAGJ7oD,KAAKwoC,MAAQxoC,KAAK6oD,KAAKE,OAAO/oD,KAAK8oD,UACnC,GAAI9oD,KAAK6nC,MAAQ7nC,KAAK6oD,KAAKG,MAAMhpD,KAAK8oD,UAAW,CAC/C9oD,KAAK6nC,KAAO7nC,KAAK6oD,KAAKG,MAAMhpD,KAAK8oD,UAAY,KAKnDF,oBAAoB9iD,UAAUujD,SAAW,SAAUzuC,IACjD,GAAIA,KAAO3Z,UAAW,CACpBjB,KAAKmuB,OAAOvT,IAEd,OAAO5a,KAAKwoC,sECnCE8gB,QAAAA,gBAYA/W,UAAAA,kBA4CA/oB,SAAAA,iBAIA+/B,YAAAA,oBAyGAC,KAAAA,aA4IAr/C,KAAAA,aA6DAs/C,WAAAA,mBAyHA/1D,OAAAA,eAIA+G,QAAAA,QA1iBhB,IAAMuS,OAASja,QAAQ,UACvB,IAAMmO,SAAWnO,QAAQ,iBACzB,IAAM2H,OAAS3H,QAAQ,eAEvB,IAAMwM,KAAOxM,QAAQ,iBACboW,IAA8B3S,KAA9B2S,IAAK2E,IAAyBtX,KAAzBsX,IAAKD,IAAoBrX,KAApBqX,IAAKlT,MAAenE,KAAfmE,MAAO0O,IAAQ7S,KAAR6S,IAC9B,IAAM5L,SAAW1K,QAAQ,iBACzB,IAAM8T,QAAU9T,QAAQ,6BACUA,QAAQ,wBAAlC22D,+BAAAA,oCACe32D,QAAQ,cAAvB+T,eAAAA,KAAME,eAAAA,KAEP,IAAM2nC,YAAAt7C,QAAAs7C,YAAc,EACpB,IAAME,eAAAx7C,QAAAw7C,eAAiB,EAE9B,IAAI8a,oBAAA,EACJ,IAAIC,oBAAA,EACJ,IAAIC,yBAAA,EACJ,IAAI5hD,WAAajB,OACjB,IAAI8iD,qBAAuB,CACzB7hD,WAAAA,YAEF,IAAI8hD,SAAW,EAEf,IAAIC,aAAe,GAEnB,IAAIC,gBAAkB,GAEtB,SAASC,aAIPlqD,KAAKnF,KAAO,IAAIjH,aAAa,IAE7BoM,KAAKkK,KAAO,KACZlK,KAAK4H,OAAS,KACd5H,KAAKmqD,cAAgB,KACrBnqD,KAAKvD,EAAI,EACTuD,KAAKtD,EAAI,EACTsD,KAAKwB,EAAI,EACTxB,KAAKyvC,MAAQ,EACbzvC,KAAKoqD,IAAM,EAGb,SAASC,kBACP,GAAIJ,gBAAgB12D,OAAQ,CAC1B,OAAO02D,gBAAgBrxD,MAEzB,OAAO,IAAIsxD,WAGb,SAASI,UAAUr3D,EAAG6C,GACpB,GAAI7C,EAAEuO,IAAM1L,EAAE0L,EAAG,CACf,OAAOvO,EAAEuO,EAAI1L,EAAE0L,EAEjB,GAAIvO,EAAEyJ,IAAM5G,EAAE4G,EAAG,CACf,OAAOzJ,EAAEyJ,EAAI5G,EAAE4G,EAEjB,GAAIzJ,EAAEwJ,IAAM3G,EAAE2G,EAAG,CACf,OAAOxJ,EAAEwJ,EAAI3G,EAAE2G,EAEjB,OAAOxJ,EAAEm3D,IAAMt0D,EAAEs0D,IAGZ,SAASd,QAAQ9nD,EAAGuT,IACzB/H,OAAO4a,SAASpmB,IAChBwoD,aAAarxD,KAAK,CAChBoc,GAAAA,GACAtY,EAAG,EACHC,EAAG,EACH8E,EAAAA,EACA4oD,MAAOL,WAKJ,SAASxX,UAAUroC,KAAMzQ,GAAIC,GAAIC,GAAIC,GAAI6tB,GAAID,GAAI+iC,GAAIC,GAAIhpD,EAAG4nB,GAAIE,GAAID,GAAIE,GAAIvH,MAAOpa,OAAQuiD,cAAe1a,OAC/GziC,OAAO4a,SAASpmB,IAChB,IAAIgB,KAAO6nD,kBACX,IAAIxvD,KAAO2H,KAAK3H,KAKhBA,KAAK,IAAMpB,GAAKyH,SAASrG,KAAK,IAAMqG,SAASrG,KAAK,GAClDA,KAAK,IAAMnB,GAAKwH,SAASrG,KAAK,IAAMqG,SAASrG,KAAK,GAClDA,KAAK,IAAMlB,GAAKuH,SAASrG,KAAK,IAAMqG,SAASrG,KAAK,GAClDA,KAAK,IAAMjB,GAAKsH,SAASrG,KAAK,IAAMqG,SAASrG,KAAK,GAClDA,KAAK,IAAM4sB,GAAKvmB,SAASrG,KAAK,IAAMqG,SAASrG,KAAK,GAClDA,KAAK,IAAM2sB,GAAKtmB,SAASrG,KAAK,IAAMqG,SAASrG,KAAK,GAClDA,KAAK,IAAM0vD,GAAKrpD,SAASrG,KAAK,IAAMqG,SAASrG,KAAK,GAClDA,KAAK,IAAM2vD,GAAKtpD,SAASrG,KAAK,IAAMqG,SAASrG,KAAK,GAClDA,KAAK,GAAKmnB,MAAM,GAChBnnB,KAAK,GAAKmnB,MAAM,GAChBnnB,KAAK,IAAMmnB,MAAM,GACjBnnB,KAAK,IAAMmnB,MAAM,GACjBnnB,KAAK,IAAMuuB,GACXvuB,KAAK,IAAMyuB,GACXzuB,KAAK,IAAMwuB,GACXxuB,KAAK,IAAM0uB,GAEX/mB,KAAK0H,KAAOA,KACZ1H,KAAK/F,EAAI5B,KAAK,GACd2H,KAAK9F,EAAI7B,KAAK,GACd2H,KAAKhB,EAAIA,EACTgB,KAAKoF,OAASA,QAAU,KACxB,GAAIuiD,cAAe,CACjBA,cAAcliD,WAAa6hD,qBAAqB7hD,WAChDzF,KAAK2nD,cAAgBA,kBAChB,CACL3nD,KAAK2nD,cAAgB,KAEvB3nD,KAAKitC,MAAQA,OAAS,EAGtBjtC,KAAK4nD,MAAQL,SACbC,aAAarxD,KAAK6J,MAClB,OAAOA,KAGF,SAASgnB,SAAStf,KAAMzN,EAAGC,EAAG8E,EAAG3H,EAAGC,EAAGsvB,GAAIE,GAAID,GAAIE,GAAIvH,MAAOpa,OAAQuiD,cAAe1a,OAC1F,OAAO8C,UAAUroC,KAAMzN,EAAGC,EAAGD,EAAGC,EAAI5C,EAAG2C,EAAI5C,EAAG6C,EAAI5C,EAAG2C,EAAI5C,EAAG6C,EAAG8E,EAAG4nB,GAAIE,GAAID,GAAIE,GAAIvH,MAAOpa,OAAQuiD,cAAe1a,OAG3G,SAAS8Z,YAAYkB,OAAQhuD,EAAGC,EAAG8E,EAAG3H,EAAGC,EAAG+1C,IAAK6a,IAAK1oC,MAAOpa,OAAQuiD,cAAeQ,QACzF39C,OAAO4a,SAASpmB,IAChB,IAAIgB,KAAO6nD,kBACX7nD,KAAK0H,KAAOugD,OAAOvgD,KACnB1H,KAAK/F,EAAIA,GAAKA,EAAIyE,SAASrG,KAAK,IAAMqG,SAASrG,KAAK,GACpD2H,KAAK9F,EAAIA,GAAKA,EAAIwE,SAASrG,KAAK,IAAMqG,SAASrG,KAAK,GACpD2H,KAAKhB,EAAIA,EACT3H,GAAKqH,SAASrG,KAAK,GACnBf,GAAKoH,SAASrG,KAAK,GACnBmnB,MAAQA,OAASyoC,OAAOzoC,MACxB,IAAInnB,KAAO2H,KAAK3H,KAChB,IAAKg1C,IAAK,CACR,IAAIl2C,GAAK8C,EAAIguD,OAAO7yD,OAAO,GAAKiC,EAChC,IAAID,GAAK8C,EAAI+tD,OAAO7yD,OAAO,GAAKkC,EAChC,IAAI2tB,GAAK9tB,GAAKE,EACd,IAAI2tB,GAAK5tB,GAAKE,EACde,KAAK,GAAKlB,GACVkB,KAAK,GAAKjB,GACViB,KAAK,GAAKlB,GACVkB,KAAK,GAAK2sB,GACV3sB,KAAK,GAAK4sB,GACV5sB,KAAK,GAAK2sB,GACV3sB,KAAK,GAAK4sB,GACV5sB,KAAK,GAAKjB,OACL,CACL,IAAIgxD,GAAKH,OAAO7yD,OAAO,GAAKiC,EAC5B,IAAIgxD,GAAKJ,OAAO7yD,OAAO,GAAKkC,EAE5B,IAAIgxD,KAAO3hD,IAAI0mC,KACf,IAAIkb,KAAO1hD,IAAIwmC,KAEf,IAAI3qB,GAAKzoB,EAAIquD,KAAOF,GAAKG,KAAOF,GAChC,IAAI1lC,GAAKzoB,EAAIquD,KAAOH,GAAKE,KAAOD,GAChC,IAAIG,GAAKF,KAAOhxD,EAChB,IAAImxD,GAAKH,KAAOjxD,EAChB,IAAIqxD,GAAKH,KAAOjxD,EAChB,IAAIqxD,GAAKJ,KAAOlxD,EAEhBgB,KAAK,GAAKqqB,GACVrqB,KAAK,GAAKsqB,GACVtqB,KAAK,GAAKqqB,GAAKgmC,GACfrwD,KAAK,GAAKsqB,GAAK6lC,GACfnwD,KAAK,GAAKqqB,GAAK+lC,GAAKC,GACpBrwD,KAAK,GAAKsqB,GAAKgmC,GAAKH,GACpBnwD,KAAK,GAAKqqB,GAAK+lC,GACfpwD,KAAK,GAAKsqB,GAAKgmC,GAGjBtwD,KAAK,GAAKmnB,MAAM,GAChBnnB,KAAK,GAAKmnB,MAAM,GAChBnnB,KAAK,IAAMmnB,MAAM,GACjBnnB,KAAK,IAAMmnB,MAAM,GAEjB,IAAIopC,MAAQ,EACZ,IAAIC,MAAQ,EACZ,IAAI7rD,IAAMgD,KAAK0H,KAAK,GACpB,IAAKygD,SAAWnrD,IAAImrD,OAAQ,CAM1B,IAAIW,WAAax9C,KAAK48C,IAAI,GAAKA,IAAI,IAAMlrD,IAAIzC,MAAQlD,GAAI6wD,IAAI,GAAKA,IAAI,IAAMlrD,IAAI3C,OAAS/C,GACzF,GAAIwxD,WAAa,EAAG,CAElB,GAAI9rD,IAAIgL,aAAe3C,GAAG0C,OAAQ,CAEhC6gD,MAAQC,MAAQ,QACX,GAAI7rD,IAAIgL,aAAe3C,GAAGuQ,SAAW1d,OAAO2U,UAAW,CAG5D+7C,MAAQC,MAAQC,WAAa,QAE1B,GAAIA,WAAa,EAAG,CAGzB,IAAIC,cAAgBD,WAAa,EACjCF,MAAQC,MAAQ,GAAME,cAExB,GAAIb,IAAI,GAAKA,IAAI,GAAI,CACnBU,QAAU,EAEZ,GAAIV,IAAI,GAAKA,IAAI,GAAI,CACnBW,QAAU,GAIdxwD,KAAK,IAAM6vD,IAAI,GAAKU,MAAQ5rD,IAAIzC,MAChClC,KAAK,IAAM6vD,IAAI,GAAKW,MAAQ7rD,IAAI3C,OAChChC,KAAK,IAAM6vD,IAAI,GAAKU,MAAQ5rD,IAAIzC,MAChClC,KAAK,IAAM6vD,IAAI,GAAKW,MAAQ7rD,IAAI3C,OAEhC2F,KAAK4nD,MAAQL,SACbvnD,KAAKoF,OAASA,QAAU,KACxBpF,KAAKitC,MAAQ,EAEb,GAAI0a,cAAe,CACjBA,cAAcliD,WAAa6hD,qBAAqB7hD,WAChDzF,KAAK2nD,cAAgBA,kBAChB,CACL3nD,KAAK2nD,cAAgB,KAEvBH,aAAarxD,KAAK6J,MAGb,SAASgnD,KAAKgC,QAASC,MAAOhvD,EAAGC,EAAG7C,EAAGC,GAC5C,IAAI4xD,GAAK5kD,OACT5F,SAAS3I,gBAAgBmzD,GAAI,CAACjvD,EAAGC,IACjC,IAAI+/C,GAAK31C,OACT5F,SAAS3I,gBAAgBkkD,GAAI,CAAChgD,EAAI5C,EAAG6C,EAAI5C,IACzC4xD,GAAG,GAAK/wD,MAAM+wD,GAAG,IACjBA,GAAG,GAAK/wD,MAAM+wD,GAAG,IACjBjP,GAAG,GAAK9hD,MAAM8hD,GAAG,IAAMiP,GAAG,GAC1BjP,GAAG,GAAK9hD,MAAM8hD,GAAG,IAAMiP,GAAG,GAG1B,IAAIC,KAAOjxD,OAAOO,eAAiBP,OAAOmC,OAC1C,IAAI+uD,QAAU,CAACF,GAAG,GAAIC,MAAQD,GAAG,GAAKjP,GAAG,IAAKA,GAAG,GAAIA,GAAG,IACxD6M,QAAQkC,QAAU,IAAM,WACtB3jD,GAAGyR,OAAOzR,GAAGgkD,cACbhkD,GAAG+jD,QAAQA,QAAQ,GAAIA,QAAQ,GAAIA,QAAQ,GAAIA,QAAQ,MAEzDtC,QAAQmC,MAAQ,IAAM,WACpB5jD,GAAGiU,QAAQjU,GAAGgkD,gBAIlB,SAASC,aAAaC,MAAOC,OAC3B,GAAID,MAAMx4D,SAAWy4D,MAAMz4D,OAAQ,CACjC,OAAO,KAET,IAAK,IAAIsN,GAAK,EAAGA,GAAKkrD,MAAMx4D,SAAUsN,GAAI,CACxC,GAAIkrD,MAAMlrD,MAAQmrD,MAAMnrD,IAAK,CAC3B,OAAO,MAGX,OAAO,MAGT,IAAIorD,iBAAA,EACJ,IAAIC,iBAAA,EACJ,IAAIC,mBAAA,EACJ,IAAIC,kBAAoB,EACxB,IAAIC,0BAA4B,EAChC,IAAIC,kBAAoB,EACxB,IAAIC,qBAAA,EACJ,IAAIC,uBAAA,EACJ,IAAMC,eAAiB,MACvB,IAAIC,QAAU,GAEd,SAASC,SACP,GAAIL,oBAAsBD,0BAA2B,CACnD,OAEFK,QAAQ/zD,KAAK,CACX8mB,MAAOwsC,YACPW,MAAOP,0BACPxV,IAAKyV,oBAEPD,0BAA4BC,kBAG9B,SAASO,iBACPF,SACA,IAAKD,QAAQn5D,OAAQ,CACnB,OAEFyZ,OAAOs/C,mBACPJ,YAAY/9B,OAAOg+B,cAAeG,mBAClCJ,YAAYliD,OAEZ,IAAK,IAAInJ,GAAK,EAAGA,GAAK6rD,QAAQn5D,SAAUsN,GAAI,CAC1C,IAAIisD,MAAQJ,QAAQ7rD,IADsB,IAEpC4e,MAAsBqtC,MAAtBrtC,MAAOmtC,MAAeE,MAAfF,MAAO/V,IAAQiW,MAARjW,IACpB,GAAI2V,oBAAsB/sC,MAAM7X,QAAU6X,MAAM0qC,cAAe,CAC7DtjD,QAAQmD,KAAK2/C,eAAgBlqC,MAAM7X,QAAUgiD,eAAgBnqC,MAAM0qC,eAAiBL,sBACpF0C,kBAAoB/sC,MAAM7X,OAE5B,GAAI2kD,kBAAoB9sC,MAAMgwB,MAAO,CACnC8c,gBAAkB9sC,MAAMgwB,MACxB,GAAI8c,kBAAoB1d,eAAgB,CACtChnC,GAAGsR,UAAUtR,GAAGuR,UAAWvR,GAAGklD,SACzB,CACLllD,GAAGsR,UAAUtR,GAAGuR,UAAWvR,GAAGwR,sBAGlC5b,SAASwM,UAAUwV,MAAMvV,MACzBrC,GAAG8mB,aAAau9B,YAAYz+B,MAAOopB,IAAM+V,OAAS,EAAI,EAAG/kD,GAAG+mB,eAAgBg+B,MAAQ,GAGtFF,QAAQn5D,OAAS,EACjB+4D,kBAAoB,EACpBD,0BAA4B,EAG9B,SAASW,iBAAiBnyD,MACxB,IAAI2Y,MAAQ84C,kBAAoB,EAChCA,mBAAqB,EAErB,IAAIW,GAAKpyD,KAAK,GACd,IAAIqyD,GAAKryD,KAAK,GACd,IAAIsyD,GAAKtyD,KAAK,IACd,IAAIuyD,GAAKvyD,KAAK,IACd,IAAIwuB,GAAKxuB,KAAK,IACd,IAAI0uB,GAAK1uB,KAAK,IACd,IAAIwyD,GAAKxyD,KAAK,IACd,IAAIyyD,GAAKzyD,KAAK,IAEdsxD,cAAc34C,OAAS3Y,KAAK,GAC5BsxD,cAAc34C,MAAQ,GAAK3Y,KAAK,GAChCsxD,cAAc34C,MAAQ,GAAKy5C,GAC3Bd,cAAc34C,MAAQ,GAAK05C,GAC3Bf,cAAc34C,MAAQ,GAAK25C,GAC3BhB,cAAc34C,MAAQ,GAAK45C,GAC3BjB,cAAc34C,MAAQ,GAAK6V,GAC3B8iC,cAAc34C,MAAQ,GAAK+V,GAE3B4iC,cAAc34C,MAAQ,GAAK3Y,KAAK,GAChCsxD,cAAc34C,MAAQ,GAAK3Y,KAAK,GAChCsxD,cAAc34C,MAAQ,IAAMy5C,GAC5Bd,cAAc34C,MAAQ,IAAM05C,GAC5Bf,cAAc34C,MAAQ,IAAM25C,GAC5BhB,cAAc34C,MAAQ,IAAM45C,GAC5BjB,cAAc34C,MAAQ,IAAM6V,GAC5B8iC,cAAc34C,MAAQ,IAAM85C,GAE5BnB,cAAc34C,MAAQ,IAAM3Y,KAAK,GACjCsxD,cAAc34C,MAAQ,IAAM3Y,KAAK,GACjCsxD,cAAc34C,MAAQ,IAAMy5C,GAC5Bd,cAAc34C,MAAQ,IAAM05C,GAC5Bf,cAAc34C,MAAQ,IAAM25C,GAC5BhB,cAAc34C,MAAQ,IAAM45C,GAC5BjB,cAAc34C,MAAQ,IAAM65C,GAC5BlB,cAAc34C,MAAQ,IAAM85C,GAE5BnB,cAAc34C,MAAQ,IAAM3Y,KAAK,GACjCsxD,cAAc34C,MAAQ,IAAM3Y,KAAK,GACjCsxD,cAAc34C,MAAQ,IAAMy5C,GAC5Bd,cAAc34C,MAAQ,IAAM05C,GAC5Bf,cAAc34C,MAAQ,IAAM25C,GAC5BhB,cAAc34C,MAAQ,IAAM45C,GAC5BjB,cAAc34C,MAAQ,IAAM65C,GAC5BlB,cAAc34C,MAAQ,IAAM+V,GAGvB,SAASpf,OACd,IAAK6/C,aAAaz2D,OAAQ,CACxB,OAEFsU,GAAGiU,QAAQjU,GAAG2R,YACd3R,GAAG4R,UAAU,OACb5R,GAAGyR,OAAOzR,GAAG0R,OAEbtR,WAAW,GAAK,EAAIvN,OAAOsC,SAAS,GACpCiL,WAAW,IAAM,EAAIvN,OAAOsC,SAAS,GAErCuvD,iBAAmB,EACnBC,mBAAqB,EAErB,IAAKN,YAAa,CAChBA,YAAc3sD,KAAK7L,OAAO,CAAC,CAACmT,QAAQ2B,SAASC,SAAUZ,GAAGa,MAAO,EAAG,OAAQ,CAAC7B,QAAQ2B,SAAS62C,MAAOx3C,GAAGa,MAAO,EAAG,OAAQ,CAAC7B,QAAQ2B,SAASg3C,SAAU33C,GAAGa,MAAO,EAAG,QAAS,GAAI,KAAMnJ,KAAKoJ,OAC3LwjD,cAAgB,IAAIv4D,aAAa,MACjCw4D,kBAAoBD,cAAc54D,OAAS,EAG7Cy2D,aAAa5qD,KAAKkrD,WAElB2B,YAAc,KACdj/C,OAAOgI,MAAMs3C,kBAAmB,GAChCt/C,OAAOgI,MAAMq3C,0BAA2B,GACxCr/C,OAAOgI,MAAM03C,QAAQn5D,OAAQ,GAC7B,IAAK,IAAIsN,GAAK,EAAGA,GAAKmpD,aAAaz2D,SAAUsN,GAAI,CAC/C,IAAI2B,KAAOwnD,aAAanpD,IACxB,GAAI2B,KAAKuS,GAAI,CACX83C,iBACAZ,YAAc,KACdO,mBAAqB,EACrBhqD,KAAKuS,SACA,CACL,IAAKk3C,aAAeH,aAAatpD,KAAK0H,KAAM+hD,YAAY/hD,OAAS1H,KAAKoF,SAAWqkD,YAAYrkD,QAAUpF,KAAK2nD,gBAAkB8B,YAAY9B,eAAiB3nD,KAAKitC,QAAUwc,YAAYxc,MAAO,CAC3Lkd,SACAV,YAAczpD,KAEhB,GAAI8pD,kBAAoB,EAAIF,kBAAmB,CAC7CS,iBAEA,GAAIT,oBAAsBK,eAAgB,CACxC,IAAIc,WAAa1/C,IAAIu+C,kBAAoB,KAAO,GAAK,EAAGK,gBACxDL,kBAAoBmB,WACpBpB,cAAgB,IAAIv4D,aAAa25D,WAAa,IAIlDP,iBAAiBxqD,KAAK3H,MACtBovD,gBAAgBtxD,KAAK6J,OAGzBqqD,iBAEA7C,aAAaz2D,OAAS,EACtB,GAAIg5D,kBAAoB5d,YAAa,CAEnC9mC,GAAGsR,UAAUtR,GAAGuR,UAAWvR,GAAGwR,sBAI3B,SAASowC,WAAW+D,GAAIC,IAC7B,IAAIC,MAAQ,GACZ,IAAIC,QAAU,EACd,IAAK,IAAI9sD,GAAK,EAAGA,GAAK2sD,GAAGj6D,SAAUsN,GAAI,CACrC8sD,SAAWH,GAAG3sD,IAEhB,IAAI+sD,QAAU,EACd,IAAK,IAAI5xC,IAAK,EAAGA,IAAKyxC,GAAGl6D,SAAUyoB,IAAI,CACrC4xC,SAAWH,GAAGzxC,KAEhB,IAAIgI,MAAQ0lC,sBAAsBiE,SAClC,IAAIzpC,MAAQwlC,sBAAsBkE,SAClC,IAAInR,GAAK,GACT,IAAK,IAAI7Y,KAAK,EAAGA,KAAK4pB,GAAGj6D,SAAUqwC,KAAI,CACrC6Y,GAAG9jD,KAAK60D,GAAG5pB,MAAMgqB,SAEnB,IAAIC,GAAK,GACT,IAAK,IAAI7f,KAAK,EAAGA,KAAKyf,GAAGl6D,SAAUy6C,KAAI,CACrC6f,GAAGl1D,KAAK80D,GAAGzf,MAAM2f,SAEnB,IAAIt3D,OAAS,GACb,IAAIy3D,WAAa,MACjB,IAAIpxD,EAAI,EACR,IAAK,IAAIohB,GAAK,EAAGA,GAAK2vC,GAAGl6D,SAAUuqB,GAAI,CACrC,IAAIrhB,EAAI,EACR,IAAK,IAAIw2C,KAAK,EAAGA,KAAKua,GAAGj6D,SAAU0/C,KAAI,CACrC,IAAI1gD,EAAIyU,KAAKvK,EAAIunB,MAAOtnB,EAAIwnB,OAAQznB,EAAI+wD,GAAGva,OAAOjvB,OAAQtnB,EAAI+wD,GAAG3vC,KAAOoG,OACxEwpC,MAAM/0D,KAAKpG,GACX,IAAIw7D,IAAMP,GAAGva,MAAMwa,GAAG3vC,IACtB,GAAIiwC,MAAQ,EAAG,CACbD,WAAa,KAEfz3D,OAAOsC,KAAKo1D,KACZtxD,GAAK+wD,GAAGva,MAEVv2C,GAAK+wD,GAAG3vC,IAEV,MAAO,CACLkwC,OAAQR,GACRS,QAASR,GACThR,GAAAA,GACAoR,GAAAA,GACAH,MAAAA,MACAr3D,OAAQy3D,WAAaz3D,OAAS,KAC9Bs3D,QAAAA,QACAC,QAAAA,SAIJ,SAASM,OAAO3sD,QAAQ,IAAA4C,MAAAnE,KACtB,GAAIuB,OAAO2I,KAAM,CACflK,KAAKkK,KAAO3I,OAAO2I,SACd,CACLlK,KAAKkK,KAAO,GACZ,GAAI3I,OAAO/B,IAAK,CACdQ,KAAKkK,KAAKvR,KAAK4I,OAAO/B,UACjB,GAAI+B,OAAO4sD,OAAQ,CACxBnhD,OAAOzL,OAAOoS,MACd3T,KAAKkK,KAAO,GACZ,IAAK,IAAIrJ,GAAK,EAAGA,GAAKU,OAAO4sD,SAAUttD,GAAI,CACzCb,KAAKkK,KAAKvR,KAAK8E,SAASomB,KAAK,CAC3BpH,IAAA,OAAYlb,OAAOoS,KAAnB,IAA2B9S,GAA3B,OACAyJ,WAAY/I,OAAO+I,WACnBE,WAAYjJ,OAAOiJ,WACnBC,OAAQlJ,OAAOkJ,OACfE,OAAQpJ,OAAOoJ,gBAGd,GAAIpJ,OAAOoS,KAAM,CACtB3T,KAAKkK,KAAKvR,KAAK8E,SAASomB,KAAK,CAC3BpH,IAAA,OAAYlb,OAAOoS,KAAnB,OACArJ,WAAY/I,OAAO+I,WACnBE,WAAYjJ,OAAOiJ,WACnBC,OAAQlJ,OAAOkJ,OACfE,OAAQpJ,OAAOoJ,cAEZ,CACLqC,OAAOzL,OAAOkb,KACdzc,KAAKkK,KAAKvR,KAAK8E,SAASomB,KAAKtiB,UAIjCvB,KAAKpI,OAAS2J,OAAO3J,QAAUkP,KAAK,EAAG,GACvC9G,KAAKqF,KAAO9D,OAAO8D,MAAQyB,KAAK,EAAG,GACnC9G,KAAKgiB,MAAQzgB,OAAOygB,OAAShb,KAAK,EAAG,EAAG,EAAG,GAC3ChH,KAAK0qD,IAAMnpD,OAAOmpD,KAAO1jD,KAAK,EAAG,EAAG,EAAG,GACvC,IAAKzF,OAAOmpD,IAAK,CAEf1qD,KAAKkK,KAAK,GAAGkkD,OAAO,SAAA5uD,KAClB2E,MAAKumD,IAAI,GAAKlrD,IAAI6uD,UAAY7uD,IAAIzC,MAClCoH,MAAKumD,IAAI,GAAKlrD,IAAI8uD,WAAa9uD,IAAI3C,SAIvC,GAAI0E,OAAOisD,GAAI,CACbxtD,KAAKw8C,OAASiN,WAAWloD,OAAOisD,GAAIjsD,OAAOksD,IAE7CztD,KAAK4H,OAASrG,OAAOqG,QAAU,KAMjCsmD,OAAOpoD,UAAUqE,KAAO,SAAU5I,QAChC,GAAIA,OAAO1H,IAAM,GAAK0H,OAAOzH,IAAM,EAAG,CACpC,OAEF,IAAID,GAAK0H,OAAO1H,GAAK,GAAKmG,KAAKqF,KAAK,GACpC,IAAIvL,GAAKyH,OAAOzH,GAAK,GAAKkG,KAAKqF,KAAK,GACpC,IAAIqlD,WAAanpD,OAAOinC,QAAU,SAAWxoC,KAAKw8C,OAAOkR,MAAMnsD,OAAOinC,OAASjnC,OAAOmpD,KAAO1qD,KAAK0qD,IAClGnB,YAAYvpD,KAAMuB,OAAO9E,EAAG8E,OAAO7E,EAAG6E,OAAOC,GAAKC,EAAEC,GAAI7H,EAAGC,EAAGyH,OAAOsuC,IAAK6a,IAAKnpD,OAAOygB,OAAShiB,KAAKgiB,MAAOzgB,OAAOqG,QAAU5H,KAAK4H,OAAQrG,OAAO4oD,cAAe5oD,OAAOopD,SAGxKuD,OAAOpoD,UAAUyoD,aAAe,SAAUhtD,QACxCA,OAAOqG,OAASiiD,oBAChBtoD,OAAO4oD,cAAgB,CACrBqE,OAAQjtD,OAAOitD,QAEjBxuD,KAAKmK,KAAK5I,SAGL,SAAS7N,OAAO6N,QACrB,OAAO,IAAI2sD,OAAO3sD,QAGb,SAAS9G,UACdwN,WAAW,IAAM,EACjBA,WAAW,GAAK,EAChB0hD,eAAiB9iD,QAAQnT,OAAOmU,GAAGE,cAAe,YAAa,gjBAC/D6hD,eAAiB/iD,QAAQnT,OAAOmU,GAAGC,gBAAiB,YAAa,wPACjE+hD,oBAAsBhjD,QAAQnT,OAAOmU,GAAGC,gBAAiB,iBAAkB,2xBC7hB7DgX,eAAAA,uBAsCA9U,KAAAA,aAMAC,UAAAA,kBAeAwkD,aAAAA,qBA+RAz2C,iBAAAA,yBAgBA6L,KAAAA,aASAvjB,MAAAA,cAWAouD,sBAAAA,8BAWAj0D,QAAAA,QA5ZhB,IAAMuS,OAASja,QAAQ,UACvB,IAAM2H,OAAS3H,QAAQ,eACvB,IAAMuK,cAAgBvK,QAAQ,sBAEvB,IAAI0K,SAAApK,QAAAoK,SAAW,GACf,IAAIkiB,WAAAtsB,QAAAssB,WAAa,EACxB,IAAIgvC,MAAQ,EACZ,IAAIC,UAAY,EAChB,IAAIC,gBAAA,EAEJ,IAAIC,wBAAA,EACJ,IAAIC,wBAAA,EAEG,IAAMliC,OAAAx5B,QAAAw5B,OAAS,CACpBmiC,GAAI,CAAE3hC,MAAO,GACb4hC,KAAM,CAAE5hC,MAAO,GACf6hC,MAAO,CAAE7hC,MAAO,IAGX,SAASvO,eAAejR,IAAKshD,KAClCL,mBAAqBjhD,IACrBkhD,mBAAqBI,iBAGyBp8D,QAAQ,wBAAhDq8D,sBAAAA,aAAc1F,+BAAAA,sBAEtB,IAAI2F,WAAa,KACjB,IAAIC,UAAY,GAEhB,IAAIC,oBAAA,EACJ,IAAIC,kBAAA,EAEJ,SAASC,QAAQC,MACf,GAAIA,OAASL,WAAY,CACvBxnD,GAAG8nD,cAAc9nD,GAAG+nD,SAAWF,MAC/BL,WAAaK,MAIjB,SAASG,WAAWH,KAAM9zB,OAAQ/9B,QAChC,GAAIyxD,UAAUI,QAAU7xD,OAAQ,CAC9B4xD,QAAQC,MACR7nD,GAAGioD,YAAYl0B,OAAQ/9B,QACvByxD,UAAUI,MAAQ7xD,QAItB,SAASkyD,aAAan0B,OAAQ/9B,QAC5B,IAAK,IAAI6xD,KAAO,EAAGA,KAAOJ,UAAU/7D,SAAUm8D,KAAM,CAClD,GAAIJ,UAAUI,QAAU7xD,OAAQ,CAC9B4xD,QAAQC,MACR7nD,GAAGioD,YAAYl0B,OAAQ,MACvB0zB,UAAUI,MAAQ,OAKjB,SAAS1lD,KAAK0lD,KAAMlwD,KAEzBqwD,WAAWH,KAAMlwD,IAAIo8B,OAAQp8B,IAAIwwD,YAI5B,SAAS/lD,UAAUC,MACxB,IAAK,IAAIrJ,GAAK,EAAGA,GAAKqJ,KAAK3W,SAAUsN,GAAI,CACvC,IAAIrB,IAAM0K,KAAKrJ,IACf,IAAIhD,OAAS2B,IAAIwwD,WACjB,GAAIV,UAAUzuD,MAAQhD,OAAQ,CAC5B,GAAIgD,KAAOwuD,WAAY,CACrBxnD,GAAG8nD,cAAc9nD,GAAG+nD,SAAW/uD,IAC/BwuD,WAAaxuD,GAEfgH,GAAGioD,YAAYtwD,IAAIo8B,OAAQ/9B,QAC3ByxD,UAAUzuD,IAAMhD,SAKf,SAAS4wD,aAAavkD,MAC3B,IAAK,IAAIrJ,GAAK,EAAGA,GAAKqJ,KAAK3W,SAAUsN,GAAI,CACvC,IAAIrB,IAAM0K,KAAKrJ,IACf,IAAIhD,OAAS2B,IAAIwwD,WACjB,GAAIV,UAAUzuD,MAAQhD,OAAQ,CAC5B,OAAO,OAGX,OAAO,KAGT,SAASoyD,QAAQ1uD,QACfvB,KAAK2T,KAAOpS,OAAOoS,KACnB3T,KAAKkwD,OAAS,MACdlwD,KAAKmwD,UAAY,MACjBnwD,KAAK47B,OAASr6B,OAAOq6B,QAAU/zB,GAAGuoD,WAClCpwD,KAAKqwD,SAAWrwD,KAAK47B,SAAW/zB,GAAGyoD,iBACnCtwD,KAAKnC,OAASgK,GAAG0oD,gBACjBvwD,KAAKgwD,WAAaT,eAClBvvD,KAAKqK,gBAAgB9I,QACrBvB,KAAKquD,UAAYruD,KAAKsuD,WAAa,EACnCtuD,KAAKjD,MAAQiD,KAAKnD,OAAS,EAC3BmD,KAAK2qD,OAASppD,OAAOopD,QAAU,MAC/B3qD,KAAKwwD,QAAU,GACfxwD,KAAKb,QAAU,EAEfa,KAAK6sB,OAAStrB,OAAOsrB,QAAUA,OAAOqiC,MAEtC,GAAI3tD,OAAO1G,KAAM,CACf,IAAI8lD,IAAM3gD,KAAKywD,WAAWlvD,OAAOxE,MAAOwE,OAAO1E,OAAQ0E,OAAO1G,MAC9DmS,QAAQ2zC,IAAKA,UACR,GAAIp/C,OAAOkb,IAAK,CACrBzc,KAAK0wD,QAAQnvD,OAAOkb,MAIxBwzC,QAAQnqD,UAAU6qD,aAAe,WAC/B,IAAIC,SAAW5wD,KAAKjD,MAAQiD,KAAKnD,OAASmD,KAAK6sB,OAAOQ,MACtD,GAAIrtB,KAAK6wD,QAAS,CAChBD,UAAY,IAEd,IAAInN,KAAOmN,SAAW5wD,KAAKb,QAC3BzE,OAAO4E,WAAWH,QAAQK,KAAOikD,KACjCzjD,KAAKb,QAAUskD,MAGjBwM,QAAQnqD,UAAUuE,gBAAkB,SAAU9I,QAC5C,IAAIq6B,OAAS57B,KAAK47B,OAClB6zB,QAAQ,GACRH,UAAU,GAAK,KACfO,WAAW,EAAGj0B,OAAQ57B,KAAKnC,QAE3BmC,KAAKsK,WAAa/I,OAAO+I,YAAcwkD,mBACvC9uD,KAAKwK,WAAajJ,OAAOiJ,YAAcukD,mBACvClnD,GAAGipD,cAAcl1B,OAAQ/zB,GAAGkpD,mBAAoB/wD,KAAKsK,YACrDzC,GAAGipD,cAAcl1B,OAAQ/zB,GAAGmpD,mBAAoBhxD,KAAKwK,YACrDxK,KAAKyK,OAASlJ,OAAOkJ,QAAU5C,GAAGwQ,OAClCrY,KAAK2K,OAASpJ,OAAOoJ,QAAU9C,GAAGwQ,OAClCxQ,GAAGipD,cAAcl1B,OAAQ/zB,GAAGopD,eAAgBjxD,KAAKyK,QACjD5C,GAAGipD,cAAcl1B,OAAQ/zB,GAAGqpD,eAAgBlxD,KAAK2K,QAEjD3K,KAAK6wD,QAAU7wD,KAAKsK,YAAc,MAAUtK,KAAKsK,YAAc,KAE/D,GAAIskD,UAAW,CACb,GAAI5uD,KAAK6wD,SAAWtvD,OAAOiJ,aAAe3C,GAAGuQ,QAAS,CACpDvQ,GAAGspD,cAActpD,GAAGuoD,WAAYvB,WAAYF,WACvC,CACL9mD,GAAGspD,cAActpD,GAAGuoD,WAAYvB,WAAY,MAKlDoB,QAAQnqD,UAAU2qD,WAAa,SAASA,WAAW52D,EAAGC,EAAGe,MACvD40D,QAAQ,GACRH,UAAU,GAAK,KACfO,WAAW,EAAG7vD,KAAK47B,OAAQ57B,KAAKnC,QAChCmC,KAAKquD,UAAYx0D,EACjBmG,KAAKsuD,WAAax0D,EAClBkG,KAAKjD,MAAQlD,EACbmG,KAAKnD,OAAS/C,EACd+N,GAAGupD,WAEH,IAAIC,MAAQjC,aAAav1D,KAAOu1D,aAAat1D,MAAQkG,KAAKqwD,aAAerwD,KAAK6wD,SAAW7wD,KAAKyK,SAAW5C,GAAG6C,eAAiB1K,KAAK2K,SAAW9C,GAAG6C,eAChJ,GAAI2mD,IAAK,CACPrxD,KAAKjD,MAAQ2sD,sBAAsB7vD,GACnCmG,KAAKnD,OAAS6sD,sBAAsB5vD,GACpC+N,GAAGypD,WAAWtxD,KAAK47B,OAAQ,EAAG57B,KAAK6sB,OAAO0kC,cAAevxD,KAAKjD,MAAOiD,KAAKnD,OAAQ,EAAGmD,KAAK6sB,OAAO0kC,cAAevxD,KAAK6sB,OAAO2kC,QAAS,MAEvI,GAAI32D,gBAAgBs0B,WAAY,CAC9BniB,OAAOnS,KAAKtH,QAAUsG,EAAIC,EAAIkG,KAAK6sB,OAAOQ,OAC1C,GAAIrtB,KAAKqwD,SAAU,CACjB,IAAIoB,WAAa33D,EAAID,EACrBgO,GAAG6pD,WAAW1xD,KAAK47B,OAAQ,EAAG57B,KAAK6sB,OAAO0kC,cAAe13D,EAAGA,EAAG43D,WAAY,EAAGzxD,KAAK6sB,OAAO0kC,cAAevxD,KAAK6sB,OAAO2kC,QAAS32D,WACzH,GAAIw2D,IAAK,CAGdxpD,GAAG8pD,cAAc3xD,KAAK47B,OAAQ,EAAG,EAAG,EAAG/hC,EAAGC,EAAGkG,KAAK6sB,OAAO0kC,cAAevxD,KAAK6sB,OAAO2kC,QAAS32D,UACxF,CACLgN,GAAGypD,WAAWtxD,KAAK47B,OAAQ,EAAG57B,KAAK6sB,OAAO0kC,cAAe13D,EAAGC,EAAG,EAAGkG,KAAK6sB,OAAO0kC,cAAevxD,KAAK6sB,OAAO2kC,QAAS32D,WAE/G,CACLmS,OAAOnS,KAAKkC,OACZ,GAAIiD,KAAKqwD,SAAU,CACjB,IAAIuB,YAAa93D,EAAID,EACrBgO,GAAG6pD,WAAW1xD,KAAK47B,OAAQ,EAAG57B,KAAK6sB,OAAO0kC,cAAe13D,EAAGA,EAAG+3D,YAAY,EAAG5xD,KAAK6sB,OAAO0kC,cAAevxD,KAAK6sB,OAAO2kC,QAAS32D,MAE9H,GAAIgN,GAAGupD,WAAY,CAGjB,IAAIjiD,OAASlY,SAASyN,cAAc,UACpCyK,OAAOpS,MAAQlD,EACfsV,OAAOtS,OAAS/C,EAChB,IAAI+3D,IAAM1iD,OAAO4O,WAAW,MAC5B8zC,IAAIC,UAAUj3D,KAAM,EAAG,GACvBgN,GAAG6pD,WAAW1xD,KAAK47B,OAAQ,EAAG57B,KAAK6sB,OAAO0kC,cAAe13D,EAAGA,EAAG+3D,YAAY,EAAG5xD,KAAK6sB,OAAO0kC,cAAevxD,KAAK6sB,OAAO2kC,QAASriD,cAE3H,GAAIkiD,IAAK,CAGd,GAAIx3D,IAAMmG,KAAKjD,MAAO,CACpB8K,GAAG8pD,cAAc3xD,KAAK47B,OAAQ,EAAG,EAAG,EAAG57B,KAAK6sB,OAAO0kC,cAAevxD,KAAK6sB,OAAO2kC,QAAS32D,MAEzF,GAAIf,IAAMkG,KAAKnD,OAAQ,CACrBgL,GAAG8pD,cAAc3xD,KAAK47B,OAAQ,EAAG,EAAG,EAAG57B,KAAK6sB,OAAO0kC,cAAevxD,KAAK6sB,OAAO2kC,QAAS32D,MAEzFgN,GAAG8pD,cAAc3xD,KAAK47B,OAAQ,EAAG,EAAG,EAAG57B,KAAK6sB,OAAO0kC,cAAevxD,KAAK6sB,OAAO2kC,QAAS32D,UAClF,CACLgN,GAAGypD,WAAWtxD,KAAK47B,OAAQ,EAAG57B,KAAK6sB,OAAO0kC,cAAevxD,KAAK6sB,OAAO0kC,cAAevxD,KAAK6sB,OAAO2kC,QAAS32D,OAG7G,IAAIk3D,OAASlqD,GAAGupD,WAChB,GAAIW,OAAQ,CACV,OAAOA,OAET,GAAI/xD,KAAK6wD,QAAS,CAChBhpD,GAAGmqD,eAAehyD,KAAK47B,QACvB5uB,QAAQnF,GAAGupD,YAEbpxD,KAAK2wD,eACL3wD,KAAKgwD,WAAahwD,KAAKnC,OACvBmC,KAAKkwD,OAAS,KAEd,IAAI9jC,IAAMpsB,KAAKwwD,QACfxwD,KAAKwwD,QAAU,GACf,IAAK,IAAI3vD,GAAK,EAAGA,GAAKurB,IAAI74B,SAAUsN,GAAI,CACtCurB,IAAIvrB,IAAIb,MAGV,OAAO,GAGTiwD,QAAQnqD,UAAUsoD,OAAS,SAAUx5C,IACnC,GAAI5U,KAAKkwD,OAAQ,CACft7C,GAAG5U,UACE,CACLA,KAAKwwD,QAAQ73D,KAAKic,MAItB,IAAMq9C,gBAAkB,EACxBhC,QAAQnqD,UAAU4qD,QAAU,SAASA,QAAQj0C,IAAKvd,QAChD,IAAIM,IAAMQ,KAEV,SAASqnD,QAAQ6K,MACf,IAAIC,SAAW,MACf,SAASC,KAAKl9B,KACZ,IAAKi9B,SAAU,CACbA,SAAW,KACX,YAAYD,KAAKh9B,MAIrB,IAAIA,IAAM,IAAIC,MACdD,IAAIp+B,OAAS,WACXs7D,KAAKl9B,MAEP,SAASm9B,OACPD,KAAK,MAEPl9B,IAAI/9B,QAAUk7D,KAiCdn9B,IAAIo9B,YAAc,YAClBp9B,IAAIz5B,IAAMghB,IAGZppB,QAjSSssB,WAiSPA,YAAF,EACA,IAAI4yC,QAAU,EACd,SAASC,WAAWt9B,KAClB,IAAIu9B,YAAc,GAClB,GAAIv9B,IAAK,CACP11B,IAAIqtB,OAASA,OAAOqiC,MACpB,GAAIhwD,OAAQ,CACVg2B,IAAMh2B,OAAOM,IAAK01B,KAEpB,IAAIw9B,KAAMlzD,IAAIixD,WAAWv7B,IAAIn4B,MAAOm4B,IAAIr4B,OAAQq4B,KAChD,GAAIw9B,KAAK,CACPD,YAAA,aAA2BC,KAA3B,IAGA,GAAIlzD,IAAI6wD,WAAa1vD,OAAO+xD,QAAS,QAAU/xD,OAAO+xD,QAAS,SAAWh4D,OAAOiF,SAAWjF,OAAOqS,MAAO,CACxGzP,cAAc0D,QAAQ,iBAAkB,CACtCwQ,GAAIC,UAAUC,UACd8L,GAAI/C,KAAKD,QAEXR,QAAQiB,MAAR,gCAA8CwB,IAA9C,IAAqDg2C,YAArD,gCACAx7D,SAASY,SAASkY,SAClB,OAEFwiD,QAAUN,oBACL,CACL5+D,QA1TGssB,WA0TDA,YAAF,EACA,QAGJ,IAAIghC,IAAA,0BAAgClkC,IAAhC,IAAuCg2C,YAC3CF,UACA,GAAIA,QAAUN,gBAAiB,CAC7B5+D,QAjUKssB,WAiUHA,YAAF,EACAngB,IAAIwwD,WAAaR,aACjBhwD,IAAI2wD,UAAY,KAChBn2C,QAAQiB,MAAR,GAAiB0lC,KAAM8R,YAAc,GAAK,qBAC1CzlD,OAAO,MAAO2zC,KACd,OAEF3mC,QAAQiB,MAAS0lC,IAAjB,kBACAloC,WAAW4uC,QAAQr9C,KAAK,KAAMwoD,YAAa,IAAMD,QAAUA,SAE7DlL,QAAQmL,aAGVvC,QAAQnqD,UAAUqS,aAAe,SAAU1b,EAAGC,EAAG7C,EAAGC,GAClDkT,OAAOnT,GAAKC,GACZ+1D,WAAW,EAAG7vD,KAAK47B,OAAQ57B,KAAKnC,QAChCgK,GAAG8qD,eAAe3yD,KAAK47B,OAAQ,EAAG/zB,GAAG+qD,IAAKn2D,EAAGC,EAAG7C,EAAGC,EAAG,GACtDkG,KAAKquD,UAAYruD,KAAKjD,MAAQlD,EAC9BmG,KAAKsuD,WAAatuD,KAAKnD,OAAS/C,EAChCkG,KAAK2wD,gBAGPV,QAAQnqD,UAAUuP,QAAU,WAC1BrI,OAAOhN,KAAK2T,aACLlW,SAASuC,KAAK2T,MACrBo8C,aAAa/vD,KAAK47B,OAAQ57B,KAAKnC,QAC/BgK,GAAGgrD,cAAc7yD,KAAKnC,QACtBmC,KAAKjD,MAAQiD,KAAKnD,OAAS,EAC3BmD,KAAK2wD,gBAGP,SAASj9D,OAAO6N,QACdyL,OAAOzL,OAAOoS,MACd,IAAIwL,QAAU,IAAI8wC,QAAQ1uD,QAC1B9D,SAAS8D,OAAOoS,MAAQwL,QACxB,OAAOA,QAGT,IAAI2zC,kBAAoB,EACjB,SAAS96C,iBAAiB+6C,aAC/B,IAAIp/C,KAAOo/C,aAAA,2BAAyCD,kBACpD9lD,QAAQvP,SAASkW,OACjB,IAAIwL,QAAUzrB,OAAO,CACnB4W,WAAYzC,GAAGuQ,QACf5N,WAAY3C,GAAGuQ,QACf3N,OAAQ5C,GAAG6C,cACXC,OAAQ9C,GAAG6C,cACXmiB,OAAQA,OAAOoiC,KACft7C,KAAAA,OAEFwL,QAAQ+wC,OAAS,KACjB/wC,QAAQ6wC,WAAa7wC,QAAQthB,OAC7B,OAAOshB,QAGF,SAAS0E,KAAKtiB,QACnB,IAAIkG,IAAMlG,OAAOoS,KAAOpS,OAAOoS,MAAQpS,OAAOkb,IAC9CzP,OAAOvF,KACP,GAAIhK,SAASgK,KAAM,CACjB,OAAOhK,SAASgK,KAElB,OAAO/T,OAAO6N,QAGT,SAASjB,MAAMmH,KACpB,IAAI0K,IAAM1K,IAAIkV,YAAY,KAC1B,GAAIxK,OAAS,EAAG,CACd1K,IAAMA,IAAI3P,MAAMqa,IAAM,GAExBA,IAAM1K,IAAI9P,QAAQ,KAClB,GAAIwa,OAAS,EAAG,CACd1K,IAAMA,IAAI3P,MAAM,EAAGqa,KAErB,OAAO1K,IAAIpH,cAEN,SAASquD,sBAAsBsE,YACpCA,WAAa1yD,MAAM0yD,YACnB,IAAK,IAAIvrD,OAAOhK,SAAU,CACxB,IAAIw1D,YAAc3yD,MAAMmH,KACxB,GAAIwrD,cAAgBD,WAAY,CAC9B,OAAOv1D,SAASgK,MAGpB,OAAO,KAGF,SAAShN,UAEdq0D,mBAAqBjnD,GAAGkX,qBACxBgwC,mBAAqBlnD,GAAG0C,OAExBsiB,OAAOmiC,GAAGuC,cAAgB1pD,GAAGqrD,UAC7BrmC,OAAOmiC,GAAGwC,QAAU3pD,GAAGsrD,cACvBtmC,OAAOoiC,KAAKsC,cAAgB1pD,GAAG+qD,IAC/B/lC,OAAOoiC,KAAKuC,QAAU3pD,GAAGsrD,cACzBtmC,OAAOqiC,MAAMqC,cAAgB1pD,GAAGurD,KAChCvmC,OAAOqiC,MAAMsC,QAAU3pD,GAAGsrD,cAE1B,IAAIE,gBAAkBxrD,GAAGyrD,aAAa,mCAAqCzrD,GAAGyrD,aAAa,uCAAyCzrD,GAAGyrD,aAAa,yCACpJ,GAAID,gBAAiB,CACnBxE,WAAawE,gBAAgBE,2BAC7B5E,MAAQC,UAAY/mD,GAAG2rD,aAAaH,gBAAgBI,gCAGtDjE,aAAe3rC,KAAK,CAClBlQ,KAAM,QACN5W,MAAO,EAAGF,OAAQ,EAClB8tD,OAAQ,KACR99B,OAAQA,OAAOqiC,MACf1kD,WAAY3C,GAAGuQ,QACfvd,KAAM,IAAIs0B,WAAW,CAAC,IAAK,GAAI,IAAK,IAAK,IAAK,EAAG,EAAG,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,QAC1FtxB,OAEH0xD,eAAiB1rC,KAAK,CACpBlQ,KAAM,UACN5W,MAAO,EAAGF,OAAQ,EAClB8tD,OAAQ,KACR99B,OAAQA,OAAOqiC,MACfr0D,KAAM,IAAIs0B,WAAW,CAAC,IAAK,IAAK,IAAK,IAAK,EAAG,EAAG,EAAG,IAAK,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,QACvFtxB,OAEHgmB,KAAK,CACHlQ,KAAM,QACN5W,MAAO,EAAGF,OAAQ,EAClB8tD,OAAQ,KACR99B,OAAQA,OAAOqiC,MACfr0D,KAAM,IAAIs0B,WAAW,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,QAGnGtL,KAAK,CACHlQ,KAAM,YACN5W,MAAO,EAAGF,OAAQ,EAClB8tD,OAAQ,KACR99B,OAAQA,OAAOqiC,MACfr0D,KAAM,IAAIs0B,WAAW,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,kJC5ZvDukC,MAAAA,cA+BA73C,OAAAA,eAsBA83C,OAAAA,eAwMAxL,KAAAA,aASAyL,YAAAA,oBAKAC,SAAAA,iBAQAC,iBAAAA,iBApUhB,IAAM9mD,OAASja,QAAQ,UACvB,IAAMmO,SAAWnO,QAAQ,iBACzB,IAAMgtB,YAAchtB,QAAQ,eAE5B,IAAMub,QAAUvb,QAAQ,gBACxB,IAAM8T,QAAU9T,QAAQ,gBACxB,IAAM0K,SAAW1K,QAAQ,iBACzB,IAAMqO,QAAUrO,QAAQ,wBAEJA,QAAQ,wBAApBghE,iBAAAA,sBACmBhhE,QAAQ,cAA3BihE,mBAAAA,SAAUhtD,eAAAA,SACV4G,MAA4BpX,KAA5BoX,MAAOC,IAAqBrX,KAArBqX,IAAKomD,IAAgBz9D,KAAhBy9D,IAAKrvD,OAAWpO,KAAXoO,OAEzB,IAAIsvD,YAAc,GAEX,IAAMC,UAAA9gE,QAAA8gE,UAAY,YAElB,IAAMC,OAAA/gE,QAAA+gE,OAAS,SACf,IAAMC,SAAAhhE,QAAAghE,SAAW,WAExB,IAAMntD,YAAc,CAClBotD,oBAAqB,CACnBjtD,GAAI,u9BAIR,SAASM,UAAUF,KACjB,IAAIjF,KAAO0E,YAAYO,KACvB,IAAKjF,KAAKoF,OAAQ,CAChBpF,KAAKoF,OAASf,QAAQnT,OAAOmU,GAAGC,gBAAiBL,IAAKjF,KAAK6E,IAE7D,OAAO7E,KAAKoF,WAGR2sD,eACJ,SAAAA,eAAY/yD,EAAG1C,MACbkB,KAAKwB,EAAIA,EACTxB,KAAKw0D,QAAU,KACfx0D,KAAKlB,KAAOA,KACZkB,KAAKy0D,WAAa,GAItB,SAASC,kBAAkBC,OACzB3nD,QAAQ2nD,MAAMH,SACdG,MAAMH,QAAU/2D,SAASua,mBACzB+H,YAAYhV,mBAAmB4pD,MAAMH,SAGhC,SAASd,MAAMlyD,EAAGuT,IACvB,IAAI6/C,UAAY,MAChB,GAAIpzD,IAAM2yD,UAAW,CACnBS,UAAY,KACZpzD,EAAIC,EAAEozD,iBAGR,IAAK,IAAIh0D,GAAK,EAAGA,GAAKqzD,YAAY3gE,SAAUsN,GAAI,CAC9C,IAAIi0D,OAAQZ,YAAYrzD,IACxB,GAAIi0D,OAAMtzD,IAAMA,EAAG,CAEjBwL,OAAO8nD,OAAMN,SACb,IAAKM,OAAMN,QAAS,CAElB,OAAO,QAIb,IAAIG,MAAQ,IAAIJ,eAAe/yD,EAAGuT,IAClCm/C,YAAYv7D,KAAKg8D,OAEjB,GAAIC,UAAW,CACbF,kBAAkBC,OAEpB,OAAO,KAGT,SAASI,eAAev1D,KACtBA,IAAI6V,UAGC,SAASwG,OAAOjB,IACrBA,GAAK/M,IAAI+M,GAAI,KACb,IAAK,IAAIo6C,UAAY,EAAGA,UAAYd,YAAY3gE,SAAUyhE,UAAW,CACnE,IAAIL,MAAQT,YAAYc,WACxBL,MAAMF,YAAc75C,GACpB,IAAK+5C,MAAMH,QAAS,CAElBlmD,QAAQg7C,QAAQqL,MAAMnzD,EAAIC,EAAEwzD,iBAAkBP,kBAAkB1qD,KAAK,KAAM2qD,aACtE,GAAIA,MAAMH,QAAS,CAGxB,IAAIU,UAAYF,UAAYd,YAAY3gE,OAAS,EACjD,IAAIkvB,IAAMkyC,MAAM71D,KAAK61D,MAAMnzD,EAAGmzD,MAAMH,QAASG,MAAMF,WAAYS,WAC/D,GAAIzyC,MAAQ2xC,OAAQ,CAClB37C,WAAWs8C,eAAe/qD,KAAK,KAAM2qD,MAAMH,SAAU,GACrDN,YAAYv2C,OAAOq3C,UAAW,GAC9BA,eAMD,SAASrB,SACd,OAAOO,YAAY3gE,OAGrB,SAAS4hE,uBAAuBC,UAAW5zD,EAAG6zD,QAASC,eAAgBJ,WACrE,IAAI9L,SAAWv7C,IAAIynD,eAAiBF,UAAW,GAC/C,IAAIxyC,MAAQ,EAAImxC,QAAQ3K,SAAU,GAClC,IAAIpnC,MAAQhb,KAAK,EAAG,EAAG,EAAG4b,OAC1B1hB,SAAShI,gBACToV,QAAQikC,UAAU,CAAC8iB,SAAU,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG7zD,EAAG,EAAG,EAAG,EAAG,EAAGwgB,OAEpE,GAAIkzC,WAAa9L,WAAa,EAAG,CAC/B,OAAOgL,OAET,OAAOC,SAwGT,SAASkB,8BAA8B1tB,KAAM2tB,aAAcC,aAAcj0D,EAAGhC,IAAK81D,eAAgBJ,WAC/F,IAAI9jD,aAAepK,KAAK,EAAG,EAAG,EAAG,GACjC,IAAIoiD,SAAW2K,QAAQlmD,IAAIynD,eAAiBztB,KAAM,GAAI,GACtD3mC,SAAShI,gBAET,IAAIwxD,IAAM,CAAC,CAAC,EAAG,GAAI,CAAC,EAAG,IAEvB,IAAInjC,MAAQ6hC,SACZ,IAAIsM,OAAShL,IAAI,GAAG,IAAMA,IAAI,GAAG,GAAKA,IAAI,GAAG,IAAM,EACnD,GAAI+K,aAAc,CAEhBnnD,QAAQkb,SAAS,CAAChqB,KAAM,EAAG,EAAGgC,EAAG,EAAI+lB,MAAO,EAAI,EAAG,EAAGmjC,IAAI,GAAG,GAAIA,IAAI,GAAG,IAAM,EAAItB,UAAWsM,OAAQ1B,UACrG1lD,QAAQkb,SAAS,CAAChqB,KAAM,EAAI+nB,MAAO,EAAI,EAAG/lB,EAAG,EAAI+lB,MAAO,EAAI,EAAGmjC,IAAI,GAAG,GAAKtB,SAAUsM,OAAQhL,IAAI,GAAG,GAAIA,IAAI,GAAG,GAAIsJ,cAC9G,CAEL1lD,QAAQkb,SAAS,CAAChqB,KAAM,EAAI+nB,MAAO,EAAG/lB,EAAG,EAAG,EAAI,EAAGkpD,IAAI,GAAG,GAAIA,IAAI,GAAG,GAAIA,IAAI,GAAG,GAAIgL,OAAQ1B,UAC5F1lD,QAAQkb,SAAS,CAAChqB,KAAM,EAAI+nB,MAAO,EAAI,EAAG/lB,EAAG,EAAG,EAAI,EAAGkpD,IAAI,GAAG,GAAIgL,OAAQhL,IAAI,GAAG,GAAIA,IAAI,GAAG,GAAIsJ,UAElG,IAAI2B,qBAAuB9nD,IAAIu7C,SAAW,EAAG,GAC7Ch4C,aAAa,GAAKukD,qBAClBH,cAAgBG,qBAGhBv0D,QAAQsa,SAAS,EAAG,GAAM85C,aAAc,EAAIjuC,MAAO,GAAK/lB,EAAI,EAAG4P,cAC/DhQ,QAAQsa,SAAS,EAAI6L,MAAQiuC,aAAc,EAAG,EAAIjuC,MAAO,GAAK/lB,EAAI,EAAG4P,cACrEhQ,QAAQsa,SAAS6L,MAAO,GAAK,EAAG,GAAMiuC,aAAch0D,EAAI,EAAG4P,cAC3DhQ,QAAQsa,SAAS6L,MAAO,GAAKA,MAAQiuC,aAAc,EAAGh0D,EAAI,EAAG4P,cAE7D,GAAI8jD,WAAa9L,WAAa,EAAG,CAC/B,OAAOgL,OAET,OAAOC,SAGT,IAAMuB,aAAe,EACrB,IAAIC,iCAAA,EAEJ,SAASC,4BACP,IAAKD,4BAA6B,CAChCA,4BAA8Bp4D,SAASua,mBAEzC+H,YAAYhV,mBAAmB8qD,6BAGjC,SAASE,2BAA2BluB,KAAMrmC,EAAGhC,IAAK81D,eAAgBJ,WAIhE,IAAIc,SAAWj2C,YAAYhjB,MAC3B,IAAIqsD,SAAWv7C,IAAIynD,eAAiBztB,KAAM,GAC1C3mC,SAAShI,gBAET,GAAIkwD,SAAW,GAAK,CAClB96C,QAAQg7C,QAAQ9nD,EAAGs0D,2BACnB,GAAID,4BAA6B,CAC/Br2D,IAAMq2D,6BAIV,IAAII,kBAAoB7M,SAAW,GAAM,EAAIA,SAAWA,UAAY,EAGpE,IAAIzxC,YAAcs8C,IAAI,EAAGrmD,MAAMqoD,iBAAmB,MAAQ,KAAOD,SAAWJ,aAE5E,IAAI3yC,OAASjc,KAAKxH,IAAIzC,MAAQ4a,YAAanY,IAAI3C,OAAS8a,YAAaA,YAAcnY,IAAIzC,MAAO4a,YAAcnY,IAAI3C,QAChH,IAAIq5D,OAASlvD,KAAK,GAAMxH,IAAIzC,MAAO,GAAMyC,IAAI3C,QAAS2C,IAAI22D,SAAW,GAAK32D,IAAIzC,OAAQyC,IAAI42D,SAAW,GAAK52D,IAAI3C,QAE9GyR,QAAQkb,SAAS,CAAChqB,KAAM,EAAG,EAAGgC,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAGwyD,SAAUrsD,UAAU,uBAAwB,CACjGsb,OAAAA,OACAizC,OAAAA,SAGF,GAAIhB,WAAa9L,WAAa,EAAG,CAC/B,GAAIyM,4BAA6B,CAC/Bp9C,WAAWs8C,eAAe/qD,KAAK,KAAM6rD,6BAA8B,GAErEA,4BAA8B,KAC9B,OAAOzB,OAET,OAAOC,SAGF,SAASlM,KAAKiN,WACnB,OAAOD,uBAAuBnrD,KAAK,KAAMorD,WAQpC,SAASxB,YAAY/rB,KAAM2tB,aAAcC,cAC9CD,cAAgBt0D,SAASrH,IACzB,OAAO07D,8BAA8BvrD,KAAK,KAAM69B,KAAM2tB,aAAcC,cAG/D,SAAS5B,SAASuB,WACvB,OAAOW,2BAA2B/rD,KAAK,KAAMorD,WAOxC,SAAStB,iBAAiBuC,iBAC/BA,gBAAkBA,iBAAmB,EACrC,IAAIlkD,IAAMvE,MAAMhJ,SAAW,GAC3B,OAAQuN,KACN,KAAK,EACH,OAAOg2C,KAAK,IAAMkO,iBACpB,KAAK,EACH,OAAOzC,YAAY,IAAMyC,gBAAiB,EAAG,OAC/C,KAAK,EACH,OAAOxC,SAAS,IAAMwC,iBAWxB,QACErpD,OAAO,GAEX,OAAO,ucChTO3L,SAAAA,iBAIAi1D,aAAAA,qBA4IAC,aAAAA,qBAmBA97D,QAAAA,gBAwCA8J,QAAAA,gBA2BA8a,WAAAA,mBAOA+8B,SAAAA,iBAqBAoa,SAAAA,iBAqBAC,QAAAA,gBA+BA/X,YAAAA,oBASAvC,aAAAA,qBAQAn5C,WAAAA,mBAQAiB,YAAAA,oBAIAyyD,cAAAA,sBAGAC,UAAAA,kBAeAzzD,UAAAA,kBAWA84C,UAAAA,kBAWA34C,WAAAA,mBA2BAuzD,MAAAA,cAYAC,YAAAA,oBAiCAC,aAAAA,qBA6EAC,eAAAA,uBAkBAjS,WAAAA,mBAgBAkS,YAAAA,oBAiEA1Y,MAAAA,cAKA2Y,YAAAA,oBASAC,iBAAAA,yBAyIAC,eAAAA,uBAgDAC,cAAAA,sBASAje,OAAAA,eAsFAh+B,OAAAA,eA4DAY,SAAAA,iBAsBAs7C,OAAAA,eAsCAC,kBAAAA,0BAaA57C,SAAAA,iBAuCA67C,WAAAA,mBA2BAC,iBAAAA,yBAgCAzuB,SAAAA,iBAoCA0uB,SAAAA,iBA0CAC,WAAAA,mBAgBAC,cAAAA,sBAQAC,cAAAA,sBAIAC,gBAAAA,gBApxChBhhE,OAAO4K,EAAI5K,OAAO4K,GAAK,GACvBA,EAAEka,QAAUla,EAAEka,SAAW,GACzBla,EAAEC,GAAKD,EAAEC,IAAM,IACfD,EAAEq2D,MAAQr2D,EAAEq2D,OAAS,IACrBr2D,EAAEs2D,QAAUt2D,EAAEs2D,SAAW,IACzBt2D,EAAEsL,MAAQtL,EAAEsL,OAAS,KAGrBtL,EAAEozD,iBAAmBpzD,EAAEozD,kBAAoB,KAE3CpzD,EAAEwzD,iBAAmBxzD,EAAEwzD,kBAAoB,GAE3CxzD,EAAEizC,SAAWjzC,EAAEizC,UAAY,IAE3B,IAAM1nC,OAASja,QAAQ,UACvB,IAAMmO,SAAWnO,QAAQ,iBACzB,IAAMilE,cAAgBjlE,QAAQ,iBAC9B,IAAMma,QAAUna,QAAQ,gBACxB,IAAMgtB,YAAchtB,QAAQ,eAC5B,IAAMoa,UAAYpa,QAAQ,aAC1B,IAAMoO,WAAapO,QAAQ,2BACNA,QAAQ,aAArBk1C,kBAAAA,aACA5O,IAA+B7iC,KAA/B6iC,IAAKvrB,IAA0BtX,KAA1BsX,IAAKD,IAAqBrX,KAArBqX,IAAKlT,MAAgBnE,KAAhBmE,MAAOoT,KAASvX,KAATuX,mBACGhb,QAAQ,cAAjCyyD,oBAAAA,UAAWE,oBAAAA,UACnB,IAAMuS,aAAellE,QAAQ,gBAC7B,IAAM0K,SAAW1K,QAAQ,+BACaA,QAAQ,wBAAtC0b,gBAAAA,MAAOy6C,gBAAAA,MAAOgP,eAAAA,KAAM7gB,gBAAAA,oBACWtkD,QAAQ,cAAvC82C,gBAAAA,MAAOC,sBAAAA,YAAaC,iBAAAA,qBACIh3C,QAAQ,cAAhC+T,eAAAA,KAAME,eAAAA,KAAMqZ,kBAAAA,QAEpB,IAAM83C,aAAe,IACrB,IAAIr0D,UAAA,EACJ,IAAIg4B,SAAA,EAEJ,IAAMs8B,yBAA2B,CAC/B50D,KAAM,CAAC,KAAO,MACd60D,WAAY,CAAC,GAAK,IAClBC,WAAY,CAAC,EAAG,EAAIH,cACpBI,gBAAiBvxD,KAAK,EAAG,EAAG,EAAGmxD,cAC/B32D,EAAGC,EAAEq2D,OAGA,SAASz2D,YAIT,SAASi1D,aAAat0C,OAC3B,IAAIS,IAAM,CACR+1C,QAASxxD,OACTwY,SAAUxY,OACVo4B,KAAMp4B,OACNsyC,SAAUtyC,QAEZqZ,QAAQoC,IAAI+1C,QAASx2C,MAAO,GAC5B3B,QAAQoC,IAAIjD,SAAUwC,MAAO,IAC7B3B,QAAQoC,IAAI2c,KAAMpd,MAAO,IACzB3B,QAAQoC,IAAI62B,SAAUt3B,MAAO,IAC7B,IAAK,IAAI6T,SAASpT,IAAK,CACrBA,IAAIoT,OAAO,GAAK7T,MAAM,GAExB,OAAOS,IAGT,SAASg2C,aAAa97D,OAAQ4E,QAC5B5E,OAASu7D,KAAKv7D,OAAQ4E,OAAOiC,KAAK,GAAIjC,OAAOiC,KAAK,IAClD,GAAI7G,OAAQ,CACVuQ,QAAQvG,kBAAkB,CACxByD,OAAQ2V,YAAYhV,qBACpBvH,KAAM7G,UAMZ,IAAI+7D,iBAAmB7uB,QACvB,IAAI8uB,eAAiB9uB,QACrB,SAAS+uB,mBAAmBj8D,OAAQ4E,QAClC,IAAI82D,WAAaH,KAAKv7D,OAAQ4E,OAAO82D,WAAW,GAAI92D,OAAO82D,WAAW,IACtE,IAAIC,WAAaJ,KAAKv7D,OAAQ4E,OAAO+2D,WAAW,GAAI/2D,OAAO+2D,WAAW,IACtE,GAAID,aAAe,GAAKC,aAAe,EAAG,CACxC,OAEFxuB,YAAY4uB,kBAEZxrD,QAAQ/G,iBAAiBwyD,eAAgBN,YACzCtuB,OAAO2uB,iBAAkBA,iBAAkBC,gBAE3CzrD,QAAQ5G,sBAAsBqyD,eAAgBL,YAC9CvuB,OAAO2uB,iBAAkBA,iBAAkBC,gBA8B3CzrD,QAAQtG,iBAAiB,CACvBgC,YAAa8vD,iBACbtuD,OAAQ2V,YAAYhV,uBAKjB,IAAI+uC,cAAAzmD,QAAAymD,cAAgB,GACpB,IAAIj4C,YAAAxO,QAAAwO,YAAc,GAClB,IAAIF,aAAAtO,QAAAsO,aAAe,IACnB,IAAIk3D,mBAAAxlE,QAAAwlE,mBAAqB,IACzB,IAAIC,gBAAAzlE,QAAAylE,gBAAkBhf,cACtB,IAAIif,YAAA1lE,QAAA0lE,YAAc,IAClB,IAAIC,SAAA3lE,QAAA2lE,SAAW,IACf,IAAIC,kBAAA5lE,QAAA4lE,kBAAoB,IACxB,IAAIC,UAAA7lE,QAAA6lE,UAAY,GAChB,IAAIC,kBAAA9lE,QAAA8lE,kBAAoB,GAAK,GAC7B,IAAIC,0BAAA/lE,QAAA+lE,0BAA4BD,kBAChC,IAAIE,cAAAhmE,QAAAgmE,cAAgB,IACpB,IAAIC,YAAAjmE,QAAAimE,YAAc,EAElB,IAAIhd,mBAAAjpD,QAAAipD,mBAAqBnvC,UAAU/H,MAAM,KAAM,CACpD4c,MAAO,IACPP,cAAe,EACfC,cAAe,aAEV,IAAI66B,kBAAAlpD,QAAAkpD,kBAAoBpvC,UAAU+S,aAAa,KAAM,KAErD,IAAIhP,KAAA7d,QAAA6d,UAAA,EACJ,IAAI5C,QAAAjb,QAAAib,QAAU,GAEd,IAAIirD,aAAAlmE,QAAAkmE,aAAejD,aAAa,CAAC,EAAG,EAAG,EAAG,IAC1C,IAAIkD,YAAAnmE,QAAAmmE,YAAcxyD,KAAK,EAAG,EAAG,IAAM,GACnC,IAAIyyD,iBAAApmE,QAAAomE,iBAAmBtsD,UAAU+S,aAAa,KAAM,KAE3D,IAAIimC,OAAS,GACN,IAAIlB,iBAAA5xD,QAAA4xD,iBAAmB,MACvB,IAAIyU,eAAArmE,QAAAqmE,eAAiB,MACrB,IAAIn6C,aAAAlsB,QAAAksB,aAAe,KACnB,IAAIo6C,oBAAAtmE,QAAAsmE,oBAAsB,MAEjC,IAAIC,4BAA8B,MAClC,IAAIC,uBAAyB,MAE7B,IAAIC,aAAe,KACnB,IAAIC,qBAAuB,MACpB,IAAIC,QAAA3mE,QAAA2mE,QAAU,MACrB,IAAIC,iBAAmB5iB,MAAM,GAAI+gB,0BACjC,IAAI8B,aAAe,EAEnB7mE,QAAQiR,sBAAwB,GAChC,IAAI61D,sBAAwB,GAC5B,IAAIC,UAAY,GAChB,IAAIC,iBAAmB,EAGvB,IAAIC,iBAAA,EAEJ,IAAIC,wBAAA,EACJ,IAAIC,wBAAA,EACJ,IAAIC,qBAAA,EACJ,IAAIC,iBAAA,EACJ,IAAIC,uBAAA,EACJ,IAAIC,uBAAA,EAEJ,IAAIC,oBAAA,EACJ,IAAIC,qBAAA,EAEG,SAASvE,aAAa5iD,KAAM65C,GAAIC,GAAIsN,UAAWC,eACpD,IAAIC,SAAWF,WAAaA,UAAUpnD,MACtC,GAAIsnD,WAAa,KAAM,OAEhB,GAAIA,SAAU,CACnB3sD,QAAQqF,MAAQskD,aAAavkE,OAAO,CAClCigB,KAAMsnD,SAAS,GACfzN,GAAIyN,SAAS,GACbxN,GAAIwN,SAAS,UAEV,IAAKD,cAAe,CACzB1sD,QAAQqF,MAAQskD,aAAavkE,OAAO,CAClCigB,KAAA,MAAYA,KACZ65C,GAAAA,GACAC,GAAAA,MAKC,SAAShzD,QAAQ8oB,OACtBlwB,QA5DS6d,KA4DTA,KAAOqS,MAAMrS,KACb,IAAI6pD,UAAYx3C,MAAM23C,WACtBp3D,KAAO3C,WAAW2C,KAClBg4B,IAAM36B,WAAW26B,IACjB,GAAIvY,MAAM43C,eAAgB,CACxBN,eAAiB/+B,IAAIZ,KACrB4/B,gBAAkBh/B,IAAIX,UACjB,CACL0/B,eAAiB/+B,IAAIO,YACrBy+B,gBAAkBh/B,IAAIS,aAGxBg6B,aAAa,SAAU,CAAC,EAAG,EAAG,GAAI,CAAC,IAAKwE,WACxCzsD,QAAQ8sD,eAAiB9sD,QAAQspB,OACjC2+B,aAAa,kBAAmB,CAAC,EAAG,EAAG,GAAI,CAAC,IAAKwE,UAAW,MAC5DxE,aAAa,cAAe,CAAC,EAAG,EAAG,GAAI,CAAC,IAAKwE,WAC7CxE,aAAa,kBAAmB,CAAC,EAAG,EAAG,GAAI,CAAC,IAAKwE,WACjDxE,aAAa,QAAS,CAAC,EAAG,EAAG,GAAI,CAAC,EAAG,GAAI,GAAIwE,WAC7CxE,aAAa,aAAc,CAAC,EAAG,EAAG,GAAI,CAAC,IAAKwE,WAC5CxE,aAAa,gBAAiB,CAAC,EAAG,EAAG,GAAI,CAAC,IAAKwE,WAC/CxE,aAAa,YAAa,CAAC,EAAG,EAAG,GAAI,CAAC,IAAKwE,WAC3CxE,aAAa,cAAe,CAAC,EAAG,EAAG,IAAK,CAAC,IAAKwE,WAC9CxE,aAAa,SAAU,CAAC,EAAG,EAAG,GAAI,CAAC,IAAKwE,WAExCxE,aAAa,gBAAiB,CAAC,GAAI,CAAC,IAAKwE,WAEzCzsD,QAAQ+sD,MAAQpD,aAAavkE,OAAO,CAAE+oB,IAAK,UAE3C69C,YAAc,CACZgB,GAAI,CAAE7zD,IAAK,CAAC3D,KAAKy3D,GAAIpnB,IAAK,CAACrY,IAAII,IAC/Bs/B,OAAQ,CAAE/zD,IAAK,CAAC3D,KAAKC,KAAMowC,IAAK,CAACrY,IAAIG,EAAGH,IAAIK,KAE9Cm+B,YAAYmB,IAAMvS,MAAMoR,YAAYgB,IACpChB,YAAYmB,IAAIh0D,IAAI9O,KAAKmL,KAAKq4B,GAC9Bm+B,YAAYoB,GAAKxS,MAAMoR,YAAYkB,QACnClB,YAAYoB,GAAGj0D,IAAI9O,KAAKmL,KAAK63D,GAG/B,IAAIC,uBAAA,EACG,SAASr3D,QAAQ3C,YAAai6D,WACnC,GAAI/B,eAAiBl4D,YAAa,CAChC,OAAO,KAET,GAAIy4D,kBAAoBD,UAAU7mE,SAAWsoE,UAAW,CACtD,IAAIvlB,MAAOr/C,SAASyN,cAAc,OAClC4xC,MAAK3xC,aAAa,QAAS,kBAC3B,IAAKi3D,kBAAmB,CACtBA,kBAAoB3kE,SAASC,eAAe,gBAE9C0kE,kBAAkB52D,YAAYsxC,OAC9B8jB,UAAUzhE,KAAK29C,OACfulB,UAAYvlB,MAEd,GAAI8jB,UAAUC,oBAAsBwB,UAAW,CAC7C,IAAK,IAAIh7D,GAAKw5D,iBAAmB,EAAGx5D,GAAKu5D,UAAU7mE,SAAUsN,GAAI,CAC/D,GAAIu5D,UAAUv5D,MAAQg7D,UAAW,CAC/BzB,UAAUv5D,IAAMu5D,UAAUC,kBAC1BD,UAAUC,kBAAoBwB,YAIpC,IAAIr5D,KAAO43D,UAAUC,kBACrBA,mBACA,OAAO73D,KAGF,SAAS6c,WAAWy8C,SACzB3V,OAAS2V,QACT,IAAK,IAAIr0D,OAAO0+C,OAAQ,CACtBX,UAAUW,OAAO1+C,OAId,SAAS20C,SAAS2f,OAAQ3yD,EAAG4Y,OAClC,IAAIw6B,OAASpzC,EAAEozC,OACf,IAAIgR,GAAK,CAAChR,OAAOC,GAAG,GAAKsf,OAAOjiE,EAAG,EAAG0iD,OAAOC,GAAG,GAAKsf,OAAOjiE,GAC5D,IAAI2C,EAAIs/D,OAAOt/D,EACf+wD,GAAG,GAAK1/C,IAAI,EAAGiuD,OAAOliE,EAAI2zD,GAAG,GAAKA,GAAG,IACrC,IAAK,IAAI3sD,GAAK,EAAGA,GAAK2sD,GAAGj6D,SAAUsN,GAAI,CACrC,IAAIm7D,KAAOxO,GAAG3sD,IACduI,EAAEe,KAAK,CACL1N,EAAAA,EACAC,EAAGq/D,OAAOr/D,EACV8E,EAAGu6D,OAAOv6D,EACVwgB,MAAAA,MACAnoB,EAAGmiE,KACHliE,EAAGiiE,OAAOjiE,EACV4wD,IAAKlO,OAAOkR,MAAM7sD,MAGpBpE,GAAKu/D,MAIF,SAASxF,SAASuF,OAAQ3yD,EAAG4Y,OAClC,IAAIw6B,OAASpzC,EAAEozC,OACf,IAAIiR,GAAK,CAACjR,OAAOqR,GAAG,GAAKkO,OAAOliE,EAAG,EAAG2iD,OAAOqR,GAAG,GAAKkO,OAAOliE,GAC5D,IAAI6C,EAAIq/D,OAAOr/D,EACf+wD,GAAG,GAAK3/C,IAAI,EAAGiuD,OAAOjiE,EAAI2zD,GAAG,GAAKA,GAAG,IACrC,IAAK,IAAI5sD,GAAK,EAAGA,GAAK4sD,GAAGl6D,SAAUsN,GAAI,CACrC,IAAIo7D,KAAOxO,GAAG5sD,IACduI,EAAEe,KAAK,CACL1N,EAAGs/D,OAAOt/D,EACVC,EAAAA,EACA8E,EAAGu6D,OAAOv6D,EACVwgB,MAAAA,MACAnoB,EAAGkiE,OAAOliE,EACVC,EAAGmiE,KACHvR,IAAKlO,OAAOkR,MAAM7sD,MAGpBnE,GAAKu/D,MAIF,SAASxF,QAAQsF,OAAQ3yD,EAAGuO,YAAaqK,OAC9C,IAAIw6B,OAASpzC,EAAEozC,OACf,IAAIjzC,MAAQoO,YACZ,IAAI61C,GAAK,CAAChR,OAAOwR,OAAO,GAAKzkD,MAAO,EAAGizC,OAAOwR,OAAO,GAAKzkD,OAC1DikD,GAAG,GAAK1/C,IAAI,EAAGiuD,OAAOliE,EAAI2zD,GAAG,GAAKA,GAAG,IACrC,IAAIC,GAAK,CAACjR,OAAOyR,QAAQ,GAAK1kD,MAAO,EAAGizC,OAAOyR,QAAQ,GAAK1kD,OAC5DkkD,GAAG,GAAK3/C,IAAI,EAAGiuD,OAAOjiE,EAAI2zD,GAAG,GAAKA,GAAG,IACrC,IAAIhxD,EAAIs/D,OAAOt/D,EACf,IAAK,IAAIoE,GAAK,EAAGA,GAAK2sD,GAAGj6D,SAAUsN,GAAI,CACrC,IAAIm7D,KAAOxO,GAAG3sD,IACd,GAAIm7D,KAAM,CACR,IAAIt/D,EAAIq/D,OAAOr/D,EACf,IAAK,IAAIohB,GAAK,EAAGA,GAAK2vC,GAAGl6D,SAAUuqB,GAAI,CACrC,IAAIm+C,KAAOxO,GAAG3vC,IACd,GAAIm+C,KAAM,CACR7yD,EAAEe,KAAK,CACL1N,EAAAA,EAAGC,EAAAA,EAAG8E,EAAGu6D,OAAOv6D,EAChBwgB,MAAAA,MACAnoB,EAAGmiE,KACHliE,EAAGmiE,KACHvR,IAAKlO,OAAOkR,MAAM5vC,GAAK,EAAIjd,IAC3B8pD,OAAQ,OAEVjuD,GAAKu/D,MAGTx/D,GAAKu/D,OAKJ,SAAStd,YAAY/qC,KAAMizC,QAChC,GAAIjzC,OAAS,SAAU,CACrBA,KAAO,eAET,GAAIwyC,OAAOxyC,MAAO,CAChB+xC,UAAUS,OAAOxyC,MAAOizC,SAIrB,SAASzK,aAAa10C,IAAKy0D,OAChC,GAAItC,8BAAgCnyD,KAAOoyD,yBAA2BpyD,MAAQy0D,MAAO,CACnFxd,YAAY,YAEdmb,uBAAyBpyD,IACzBpU,QApNS4xD,iBAoNTA,iBAAmB,KAGd,SAASjiD,WAAWyE,KACzB,GAAIA,MAAQizD,YAAa,CACvBr5D,SAAS,cAAeoG,KAE1B+yD,mBAAqB,KACrBE,YAAcjzD,IAGT,SAASxD,cACdjB,WAAW,UAGN,SAAS0zD,cAAcjvD,KAC5B,OAAOizD,cAAgBjzD,IAElB,SAASkvD,UAAUlvD,KACxB,GAAIA,MAAQmzD,kBAAmB,CAC7BD,kBAAoBC,kBACpBA,kBAAoBnzD,IAEtB,GAAIA,MAAQizD,aAAejzD,MAAQgzD,kBAAoBD,qBAAuBD,mBAAoB,CAChG,GAAI9yD,MAAQizD,YAAa,CACvBr5D,SAAS,yBAEX2B,WAAWyE,KACX,OAAO,KAET,OAAO,MAGF,SAASvE,UAAUuE,KACxBpG,SAAS,aAAcoG,KACvBi3C,YAAY,YACZgc,YAAc,KACdH,mBAAqBC,mBAAqB,MAC1CC,gBAAkBhzD,IAGlBtG,WAAW22B,cAGN,SAASkkB,UAAUv0C,KACxBpG,SAAS,aAAcoG,KACvBi3C,YAAY,YACZ,GAAIj3C,MAAQmzD,kBAAmB,CAC7B53D,WAAW23D,uBACN,CACL33D,WAAW43D,mBAEbz5D,WAAW22B,cAGN,SAASz0B,WAAWoE,KACzB,GAAIsyD,qBAAsB,CAExB,OAAO,MAGT,IAAIt2D,QAAUkzD,UAAUlvD,KACxB,GAAIhE,QAAS,CACX,GAAItC,WAAWq3B,YAAY10B,KAAKy2B,KAAM,CACpC,GAAIp5B,WAAWo3B,QAAQz0B,KAAK42B,OAAQ,CAClCshB,UAAUv0C,SACL,CACLvE,UAAUuE,KACVhE,QAAU,OAGd,GAAItC,WAAWw3B,kBAAkBmiC,iBAAkB,CACjD53D,UAAUuE,KACVhE,QAAU,MAEZ,GAAItC,WAAWw3B,kBAAkBkiC,gBAAiB,CAChD7e,UAAUv0C,MAGd,OAAOhE,QAGF,SAASmzD,MAAMrzC,OACpBvW,cAAcuW,MAAM9mB,IAAM,UAC1BuQ,cAAcuW,MAAM7mB,IAAM,UAC1BsQ,cAAcuW,MAAM1pB,IAAM,UAC1BmT,cAAcuW,MAAMzpB,IAAM,UAC1BypB,MAAM/hB,EAAI+hB,MAAM/hB,GAAKC,EAAEC,GAAK,EAC5B,IAAIsgB,MAAQuB,MAAMvB,OAASw3C,YAC3B/C,QAAQlzC,MAAOjV,QAAQsoD,MAAOrzC,MAAM5L,aAAewhD,kBAAmBn3C,OACtE7gB,WAAWsE,MAAM8d,OACjBpiB,WAAW+2B,UAAU3U,OAGhB,SAASszC,YAAYtzC,OAC1BvW,cAAcuW,MAAM9mB,IAAM,UAC1BuQ,cAAcuW,MAAM7mB,IAAM,UAC1BsQ,cAAcuW,MAAM44C,UAAY,UAEhC,IAAIC,UAAY74C,MAAM81C,eAAiBA,cACvC,IAAI58D,EAAI8mB,MAAM9mB,EACd,GAAIA,EAAI2/D,UAAYl7D,SAASvH,KAAM,CACjC8C,EAAIyE,SAASvH,KAAOyiE,UAEtB,IAAI56D,EAAI+hB,MAAM/hB,GAAKC,EAAEs2D,QACrB,IAAIsE,WAAa94C,MAAM7mB,EACvB,IAAI4/D,gBAAkB/4C,MAAM+1C,aAAeA,YAC3C,IAAIz/D,EAAIuiE,UAAYE,gBAAkB,EACtC,GAAI/4C,MAAMg5C,cAAe,CACvBF,YAAcx6D,YAAcqP,KAAK6U,SAAS0zC,iBAAkB5/D,EAAG,EAAGgI,YAAa0hB,MAAM44C,SAAWG,gBAAkB,EAEpH,IAAI5/D,EAAI2/D,WAAaC,gBACrB5/D,GAAKwU,KAAKyU,iBAAiB8zC,iBAAkBh9D,EAAI6/D,gBAAiB5/D,EAAG8E,EAAI,EAAG3H,EAAG,EAAGgI,YAAa0hB,MAAM44C,SACrGz/D,GAAK4/D,gBACL,IAAI3kD,YAAc4L,MAAM5L,aAAeyhD,0BAEvCxC,MAAM,CACJn6D,EAAAA,EACAC,EAAG2/D,WACH76D,EAAAA,EACA3H,EAAGuiE,UACHtiE,EAAG4C,EAAI2/D,WACP1kD,YAAAA,cAKG,SAASm/C,aAAavzC,OAC3B,IAAI9D,MAAQ,UACZ,IAAIgD,IAAM,MACV,GAAIc,MAAMi5C,UAAW,CACnB,MAAO,CAAE/5C,IAAAA,IAAKhD,MAAAA,OAEhB,IAAIhY,IAAM8b,MAAM9b,KAAU8b,MAAM9mB,EAAtB,IAA2B8mB,MAAM7mB,EAC3C,IAAI+/D,eAAiBl5C,MAAMk5C,eAC3B,IAAIh5D,SAAW8f,MAAM+1B,WAAa/1B,MAAMwhC,UAAY1hD,WAAWoE,KAC/D,IAAIi1D,SAAWn5C,MAAM5f,YAAc,CAAEA,YAAa4f,MAAM5f,aAAgB,KACxEtQ,QA7VS4xD,iBA6VTA,iBAAmB,MACnB,GAAI1hC,MAAM+1B,SAAU,CAClBn4C,WAAW+2B,UAAU3U,OACrB9D,MAAQ,gBACH,GAAI8D,MAAMmjB,cAAgBjkB,IAAMthB,WAAW+3B,SAAS3V,QAAS,CAClEvJ,QAAQyD,IAAI,YACZ,IAAK8F,MAAMo5C,qBAAuBx7D,WAAWi3B,kBAAmB,CAC9D+jB,aAAa10C,IAAKg1D,gBAEpB,IAAKl5C,MAAMwhC,SAAU,CACnB/hD,WAAWyE,KACXhE,QAAU,WAEP,IAAIpQ,QAxWFksB,aAwWGA,aAAepe,WAAWsE,MAAM8d,SAAWA,MAAMukB,aAANz0C,QAxW9CksB,aAwWmEA,aAAepe,WAAW83B,UAAU1V,QAAS,CACvH,IAAKA,MAAMo5C,qBAAuBx7D,WAAWi3B,kBAAmB,CAC9D+jB,aAAa10C,IAAKg1D,gBAEpB,GAAIl5C,MAAMq5C,aAAez7D,WAAWi3B,oBAAsB30B,QAAS,CAEjEpQ,QA7WKsmE,oBA6WLA,oBAAsB,SACjB,CACLl3C,IAAM,KAER,IAAKc,MAAMwhC,SAAU,CACnB/hD,WAAWyE,KACXhE,QAAU,WAEP,GAAI8f,MAAMmjB,aAAevlC,WAAWg4B,SAAS5V,OAAQ,CAE1D44B,aAAa10C,IAAKg1D,gBAClBh9C,MAAQte,WAAWg3B,YAAc,OAAS,gBACrC,GAAI5U,MAAMs5C,WAAa17D,WAAWg4B,SAAS5V,OAAQ,OAEnD,GAAIpiB,WAAW+2B,UAAU3U,OAAQ,CACtC,GAAIA,MAAMo5C,oBAAsBx7D,WAAWi3B,kBAAmB,OAEvD,GAAI7U,MAAMq5C,cAAgBn5D,SAAWtC,WAAWi3B,kBAAmB,MAEnE,CACL+jB,aAAa10C,IAAKg1D,gBAClBh9C,MAAQte,WAAWg3B,YAAc,OAAS,YAG9C9kC,QAvYSqmE,eAuYTA,eAAiBj2D,QACjB,GAAIA,QAAS,CACX,GAAItC,WAAWq3B,YAAY10B,KAAK+2B,MAAO6hC,WAAav7D,WAAWq3B,YAAY10B,KAAK22B,OAAQiiC,WAAav7D,WAAWw3B,kBAAkBmD,IAAIC,GAAI,CACxItZ,IAAM,MAGV,GAAIA,IAAK,CACPhD,MAAQ,OACRi/B,YAAY,gBAEd,GAAIuG,kBAAoB1hC,MAAM44C,QAAS,CACrCtF,YAAY,CACVp6D,EAAG8mB,MAAM9mB,EACTC,EAAG6mB,MAAMg5C,cAAgBh5C,MAAM7mB,EAAI,EAAI6mB,MAAM7mB,EAAI6mB,MAAMzpB,EAAI,EAC3DyiE,cAAeh5C,MAAMg5C,cACrBJ,QAAS54C,MAAM44C,QACf9C,cAAe91C,MAAM81C,gBAGzB91C,MAAM/hB,GAAK+hB,MAAMu5C,QAAUv5C,MAAMu5C,OAAOr9C,QAAU,EAClD,MAAO,CAAEgD,IAAAA,IAAKhD,MAAAA,MAAOhc,QAAAA,SAGhB,IAAIs5D,kBAAA1pE,QAAA0pE,uBAAA,EACJ,SAAShG,eAAexzC,MAAO9D,MAAOhc,SAC3C,IAAI6Q,OAASiP,MAAMjP,QAAUilD,aAC7B,IAAIv3C,MAAA3uB,QAHK0pE,kBAGGA,kBAAoBzoD,OAAOmL,OACvC,IAAIu9C,UAAYz5C,MAAMy5C,WAAa,SACnC,IAAIC,YAAiBD,UAAjB,IAA8Bv9C,MAClC,IAAIgrC,OAASn8C,QAAQ2uD,aAErB,IAAKxS,OAAQ,CACXA,OAASn8C,QAAQ0uD,WAGnB5gB,SAAS74B,MAAOknC,OAAQzoC,OACxB,IAAIk7C,KAAOrvD,IAAI0V,MAAM1hB,YAAc,IAAM0hB,MAAM1pB,EAAI,IACnDqX,KAAK+T,iBAAiBxhB,QAAU64C,mBAAqBC,kBAAmBh5B,MAAM9mB,EAAIygE,KAAM35C,MAAM7mB,EAAG6mB,MAAM/hB,EAAI,GAE3G+hB,MAAM1hB,YAAasL,UAAUsT,MAAMW,WAAajU,UAAUsT,MAAMM,QAASwC,MAAM1pB,EAAIqjE,KAAO,EAAG35C,MAAMzpB,EAAGypB,MAAMzhB,MAGvG,SAASgjD,WAAWvhC,OAEzBvW,cAAcuW,MAAM9mB,IAAM,UAC1BuQ,cAAcuW,MAAM7mB,IAAM,UAC1BsQ,cAAcuW,MAAMzhB,OAAS,UAE7ByhB,MAAM/hB,EAAI+hB,MAAM/hB,GAAKC,EAAEC,GACvB6hB,MAAM1pB,EAAI0pB,MAAM1pB,GAAK8H,aACrB4hB,MAAMzpB,EAAIypB,MAAMzpB,GAAKggD,cACrBv2B,MAAM1hB,YAAc0hB,MAAM1hB,aAAeA,YATT,IAAAs7D,cAWFrG,aAAavzC,OAArCd,IAX0B06C,cAW1B16C,IAAKhD,MAXqB09C,cAWrB19C,MAAOhc,QAXc05D,cAWd15D,QAClBszD,eAAexzC,MAAO9D,MAAOhc,SAC7B,OAAOgf,IAGF,SAASu0C,YAAYzzC,OAE1BvW,cAAcuW,MAAM9mB,IAAM,UAC1BuQ,cAAcuW,MAAM7mB,IAAM,UAC1BsQ,OAAOuW,MAAM2R,KAAO3R,MAAM2R,IAAI/qB,MAE9BoZ,MAAM/hB,EAAI+hB,MAAM/hB,GAAKC,EAAEC,GACvB6hB,MAAM1pB,EAAI0pB,MAAM1pB,GAAKi/D,gBACrBv1C,MAAMzpB,EAAIypB,MAAMzpB,GAAKypB,MAAM1pB,GAAKi/D,gBAChCv1C,MAAM65C,OAAS75C,MAAM65C,QAAU,IAE/B,IAAI1S,IAAMnnC,MAAM85C,SAChB,UAAW95C,MAAMilB,QAAU,SAAU,CACnCkiB,IAAMnnC,MAAM2R,IAAIsnB,OAAOkR,MAAMnqC,MAAMilB,OAbJ,IAAA80B,eAgBZxG,aAAavzC,OAA5Bd,IAhB2B66C,eAgB3B76C,IAAKhD,MAhBsB69C,eAgBtB79C,MACX,IAAInL,OAASiP,MAAMjP,QAAUilD,aAC7B,IAAIv3C,MAAA3uB,QArDK0pE,kBAqDGA,kBAAoBzoD,OAAOmL,OACvC,IAAK8D,MAAMg6C,MAAO,CAChB,IAAIP,UAAYz5C,MAAMy5C,WAAa,SACnC,IAAIC,YAAiBD,UAAjB,IAA8Bv9C,MAClC,IAAIgrC,OAASn8C,QAAQ2uD,aACrB,IAAKxS,OAAQ,CACXA,OAASn8C,QAAQ0uD,WAGnB5gB,SAAS74B,MAAOknC,OAAQzoC,OAE1B,IAAIw7C,WAAaj6C,MAAM2R,IAAIt9B,OAC3B,IAAI6lE,MAAQl6C,MAAM2R,IAAI7vB,KAAK,GAC3B,IAAIq4D,MAAQn6C,MAAM2R,IAAI7vB,KAAK,GAC3B,IAAIhP,OAASonE,MAAQC,MACrB,UAAWn6C,MAAMilB,QAAU,SAAU,CACnCnyC,OAASktB,MAAM2R,IAAIsnB,OAAOnmD,OAASktB,MAAM2R,IAAIsnB,OAAOnmD,OAAOktB,MAAMilB,OAAS,EAE5E,IAAIm1B,gBAAkBp6C,MAAM1pB,EAAI0pB,MAAM65C,OACtC,IAAIQ,eAAiBr6C,MAAMzpB,EAAIypB,MAAM65C,OAAS/mE,OAC9ConE,MAAQ5vD,IAAI8vD,gBAAiBC,gBAC7BF,MAAQD,MAAQpnE,OAChB,IAAIwnE,SAAWt6C,MAAMzpB,EAAI4jE,OAAS,EAClC,IAAII,WAAa,CACfrhE,EAAG8mB,MAAM9mB,GAAK8mB,MAAMw6C,WAAaF,SAAWt6C,MAAM1pB,EAAI4jE,OAAS,GAAKD,WAAW,GAAKC,MACpF/gE,EAAG6mB,MAAM7mB,EAAImhE,QAAUL,WAAW,GAAKE,MACvCl8D,EAAG+hB,MAAM/hB,EAAI,GACbwgB,MAAOuB,MAAMirC,QAAUjrC,MAAMvB,MAAQuB,MAAMvB,MAAQA,MACnDwsC,OAAQjrC,MAAMirC,OACd30D,EAAG4jE,MAAQl6C,MAAM2R,IAAI7vB,KAAK,GAC1BvL,EAAG4jE,MAAQn6C,MAAM2R,IAAI7vB,KAAK,GAC1BqlD,IAAAA,IACA7a,IAAKtsB,MAAMy6C,UAEb,GAAIz6C,MAAM06C,KAAM,CAAA,IACRxhE,EAASqhE,WAATrhE,EAAG5C,EAAMikE,WAANjkE,EACTikE,WAAWrhE,EAAIA,EAAI5C,EACnBikE,WAAWjkE,GAAKA,EAElB,GAAI0pB,MAAMirC,OAAQ,CAChBjrC,MAAM2R,IAAIq5B,aAAauP,gBAClB,CACLv6C,MAAM2R,IAAI/qB,KAAK2zD,YAEjB,OAAOr7C,IAGF,SAAS67B,MAAMl5C,MAAO3I,EAAGC,EAAG8E,EAAGM,MACpC,OAAOoP,KAAK6T,UAAU3f,MAAO3I,EAAGC,EAAG8E,EAAGK,YAAaC,MAI9C,SAASm1D,YAAY1zC,OAC1BvW,QAAQuW,MAAM26C,cAAgB36C,MAAM26C,QAAU,UAC9ClxD,QAAQuW,MAAMzhB,aAAeyhB,MAAMzhB,OAAS,UAC5CkL,OAAOiI,QAAOsO,MAAMqiB,WAAY,UAChC54B,OAAO/N,OAAOD,KAAKukB,MAAMqiB,SAASryC,QAElCumE,aAAev2C,MAGV,SAAS2zC,mBACd4C,aAAe,KAGjB,IAAIqE,gBAAkBr3D,KAAK,GAAI,IAC/B,IAAIs3D,aAAet3D,OACnB,SAASu3D,iBACPn9D,SAAS9G,kBAAkBgkE,aAAcD,iBACzC,IAAIG,gBAAkB,MACtB,IAAIC,gBAAkBzE,aAAaj4D,aAAeA,YAClD,IAAI28D,kBAAoB1kB,cACxB,IAAI3F,IAAM+kB,UACV,IAAIuF,KAAOvF,UAAY,GACvB,IAAIwF,cAAgB,EACpB,GAAIN,aAAa,GAAK,GAAMl9D,SAASpH,KAAOoH,SAASrH,IAAMqH,SAASpH,IAAM,EAAG,CAG3EwkE,gBAAkB,KAClBE,kBAAoBD,gBACpBE,KAAOtqB,IAAM,EAEb,IAAIwqB,MAAQz9D,SAASpH,IACrBoH,SAASvI,OACTuI,SAASlI,gBAAgB,EAAGulE,iBAAmBtF,kBAAoB,GAAK9kB,IAAM,KAC9EuqB,cAAgBx9D,SAASpH,IAAM6kE,MAlBT,IAAAC,cAqBU9E,aAA5Bl0B,QArBkBg5B,cAqBlBh5B,QAASi5B,eArBSD,cAqBTC,eACf,IAAI7/D,KAAOC,OAAOD,KAAK4mC,SAEvB,IAAMt2B,WAAapO,SAASvH,KAAOuH,SAASzH,KAC5C,IAAMqlE,gBAAkBR,gBAAkBhvD,WAAawqD,aAAa/8D,OAASg8D,YAC7E,IAAIgG,iBAAmBjF,aAAan4D,cAAgBk3D,mBACpD,IAAImG,uBAAyBF,gBAAkB,EAAI,EACnDC,iBAAmBlxD,IAAIkxD,iBAAkBC,uBAAyBhgE,KAAKzL,QACvE,IAAM0rE,OAASH,gBAAkB3qB,IAAM,EACvC,IAAM16C,GAAKyH,SAASzH,KAAOkB,OAAO2U,WAAawvD,iBAAmB,GAClE,IAAIriE,EAAIhD,GAAK06C,IACb,IAAMz6C,GAAK4kE,gBAAkB,EAAIxE,aAAapgE,IAAMs/D,SACpD,IAAIt8D,EAAIhD,GAAKy6C,IAEb,GAAIhzC,WAAW02B,gBAAiB,CAC9B12B,WAAW8B,kBAGb,GAAI62D,aAAaoE,MAAO,CACtB,GAAII,gBAAiB,CACnBptD,KAAK+T,iBAAiBw0C,iBAAkBh9D,EAAGC,EAAG+E,EAAEq2D,MAAOyG,gBAAkBtF,kBAAmB9rD,UAAUsT,MAAMS,KAAM+9C,OAAQ,EAAGnF,aAAaoE,OAC1IxhE,GAAK6hE,gBAAkBtF,sBAClB,CACLv8D,GAAKwU,KAAKyU,iBAAiB8zC,iBAAkBh9D,EAAGC,EAAG+E,EAAEq2D,MAAOmH,OAAQ,EAAGV,gBAAkBtF,kBAAmBa,aAAaoE,OAE3HxhE,GAAK/B,MAAM8jE,KAAO,KAGpB,GAAI3E,aAAah4D,KAAM,CACrB,GAAIw8D,gBAAiB,CACnBptD,KAAK+T,iBAAiBw0C,iBAAkBh9D,EAAGC,EAAG+E,EAAEq2D,MAAOyG,gBAAiBpxD,UAAUsT,MAAMS,KAAM+9C,OAAQ,EAAGnF,aAAah4D,MACtHpF,GAAK6hE,oBACA,CACL7hE,GAAKwU,KAAKyU,iBAAiB8zC,iBAAkBh9D,EAAGC,EAAG+E,EAAEq2D,MAAOmH,OAAQ,EAAGV,gBAAiBzE,aAAah4D,MAEvGpF,GAAK+hE,KAGP,IAAIS,cAAA,EACJ,GAAIpF,aAAaphD,KAAM,CACrB,IAAIymD,YAAcL,gBAAkB3qB,IAAM,EAC1C,GAAImqB,gBAAiB,CACnBa,cAAgBhrB,IAAM4qB,kBAAoB//D,KAAKzL,OAEjD,IAAIgwB,MAAQ,CACV9mB,EAAAA,EAAGC,EAAAA,EACHq8D,YAAa+F,gBACbK,YAAAA,YACAt9D,YAAa08D,gBACbD,gBAAAA,iBAEFY,SAAWpF,aAAaphD,KAAK6K,OAC7B7mB,EAAI6mB,MAAM7mB,EAGZD,EAAIhD,GAAKqlE,iBAAmB3qB,IAAM4qB,kBAAoB//D,KAAKzL,OAC3D,IAAK,IAAIsN,GAAK,EAAGA,GAAK7B,KAAKzL,SAAUsN,GAAI,CACvC,IAAI4G,IAAMzI,KAAK6B,IACf,IAAIu+D,gBAAkB9E,YAAY7yD,IAAIpH,eACtC,IAAIg/D,QAAU,EACd,GAAID,gBAAiB,CACnB,IAAK,IAAIthD,GAAK,EAAGA,GAAKshD,gBAAgB33D,IAAIlU,SAAUuqB,GAAI,CACtDuhD,SAAWl+D,WAAWq3B,YAAY4mC,gBAAgB33D,IAAIqW,KACtD,GAAIshD,gBAAgB33D,IAAIqW,MAAQohD,SAAU,CACxCG,WAGJ,IAAK,IAAI3b,IAAK,EAAGA,IAAK0b,gBAAgBjrB,IAAI5gD,SAAUmwD,IAAI,CACtD2b,SAAWl+D,WAAWw3B,kBAAkBymC,gBAAgBjrB,IAAIuP,OAGhE,GAAImb,gBAAkBh+D,KAAO,GAAKM,WAAWsE,QAAS,GAClD45D,QAEJ,GAAIA,QAAS,CACX3gB,YAAY,gBAEd,GAAIoG,WAAW,CACbroD,EAAGA,EACHC,EAAAA,EACA8E,EAAGC,EAAEq2D,MACLj+D,EAAGklE,iBACHjlE,EAAG0kE,kBACH18D,KAAM2F,OACF43D,QAAS,CACbvF,aAAe,KACf,GAAIl0B,QAAQn+B,KAAM,CAChBm+B,QAAQn+B,QAGZhL,GAAK03C,IAAM4qB,iBAEbriE,GAAK8hE,kBACL9hE,GAAK+hE,KAAOtqB,IACZyiB,MAAM,CACJn6D,EAAGhD,GACHiD,EAAGhD,GACH8H,EAAGC,EAAEq2D,MAAQ,EACbj+D,EAAGilE,gBACHhlE,GAAIwkE,gBAAkBp9D,SAAStH,KAAO8C,GAAKhD,GAC3Cie,YAAawhD,kBAAoBuF,gBAGnCv9D,WAAW22B,cACXiiC,qBAAuB,KACvB,GAAIuE,gBAAiB,CACnBp9D,SAAStI,OAIN,SAASu+D,eAAe5zC,OAC7B,IAAI+7C,GAAKtH,cAActkE,OAAO,CAC5BkO,YAAa,KACbK,cAAe,KACfI,WAAY,MACZD,eAAgB,KAChBN,KAAMyhB,MAAMg8C,UACZv9D,QAASuhB,MAAMvhB,UAEjB,IAAI4jC,QAAU,GACd,IAAK,IAAIn+B,OAAO8b,MAAMqiB,QAAS,CAC7B,IAAI45B,IAAMj8C,MAAMqiB,QAAQn+B,KACxB,UAAW+3D,MAAQ,WAAY,CAC7BA,IAAM,SAAUC,QACd,OAAO,WACLA,OAAOH,GAAGI,YAFR,CAIJF,KAEJ55B,QAAQn+B,KAAO+3D,IAEjBj8C,MAAMqiB,QAAUA,QAChBriB,MAAMzhB,KAAN,IAAgByhB,MAAMzhB,MAAQ,IAC9B,IAAI69D,SAAWp8C,MAAM7K,KACrB6K,MAAM7K,KAAO,SAAUnX,QACrB,IAAIq+D,OAASN,GAAG5a,IAAI,CAClBjoD,EAAG8E,OAAO9E,EACVC,EAAG6E,OAAO7E,EACV7C,EAAG0H,OAAO49D,aAAe57C,MAAMs8C,OAC/Bh+D,YAAaN,OAAOM,cAEtB,IAAKN,OAAO+8D,gBAAiB,CAC3B/8D,OAAO7E,GAAK6E,OAAOM,YAAcq3D,UAEnC,IAAIz2C,SAAA,EACJ,GAAIm9C,SAAWN,GAAG15D,OAAQ,CACxB6c,IAAM3e,KAAKy3D,OACN,GAAIqE,SAAWN,GAAGz5D,OAAQ,CAC/B4c,IAAM3e,KAAKC,IAEb,GAAI47D,SAAU,CACZl9C,IAAMk9C,SAASp+D,SAAWkhB,IAE5B,OAAOA,KAETw0C,YAAY1zC,OAGP,SAAS6zC,cAAc7zC,OAC5B,OAAOy0C,cAActkE,OAAO6vB,OAG9B,IAAMu8C,oBAAsB94D,KAAK,EAAG,EAAG,EAAG,GAC1C,IAAM+4D,yBAA2B/4D,KAAK,GAAK,GAAK,GAAK,GACrD,IAAMg5D,yBAA2Bh5D,KAAK,IAAM,IAAM,IAAM,GACjD,IAAIi5D,gBAAA5sE,QAAA4sE,gBAAkB,MAEtB,SAAS9mB,OAAOr2C,MAAOygB,OAE5BvW,cAAcuW,MAAM9mB,IAAM,UAC1BuQ,cAAcuW,MAAM7mB,IAAM,UAC1BsQ,OAAOuW,MAAM1V,IAAM0V,MAAMzV,KAEzByV,MAAM/hB,EAAI+hB,MAAM/hB,GAAKC,EAAEC,GACvB6hB,MAAM1pB,EAAI0pB,MAAM1pB,GAAK8H,aACrB4hB,MAAMzpB,EAAIypB,MAAMzpB,GAAKggD,cACrB,IAAIR,SAAW/1B,MAAM+1B,UAAY,MAEjCjmD,QAbS4sE,gBAaTA,gBAAkB,MAElB7jB,SAAS74B,MAAOjV,QAAQ6qC,OAAQ51B,MAAMvB,OAEtC,IAAIuF,MAAQ5sB,MAAM2T,QAAQ6qC,OAAOqD,OAAOC,GAAG,GAAKl5B,MAAMzpB,EAAI,GAC1D,IAAIomE,gBAAkB38C,MAAM1pB,EAAI0tB,MAAQ,EAyBxC,IAAIyR,MAAQsgB,UAAYn4C,WAAW63B,KAAKzV,OACxC,IAAIohC,QAAU5L,QAAQ/f,MACtB,IAAIvzB,MAAQtE,WAAWsE,MAAM8d,OAC7B,GAAI9d,MAAO,CACTk/C,QAAU,MAEV7hD,OAAS2C,MAAMN,IAAI,IAAMoe,MAAM9mB,EAAI8qB,QAAU24C,gBAC7Cp9D,MAAQygB,MAAM1V,KAAO0V,MAAMzV,IAAMyV,MAAM1V,KAAOY,MAAM3L,MAAO,EAAG,GAC9D47C,YAAY,qBACP,GAAIiG,QAAS,CAElB7hD,OAASk2B,KAAK2F,QAAQ,IAAMpb,MAAM9mB,EAAI8qB,QAAU24C,gBAChDp9D,MAAQygB,MAAM1V,KAAO0V,MAAMzV,IAAMyV,MAAM1V,KAAOY,MAAM3L,MAAO,EAAG,GAE9D3B,WAAW+2B,YACX7kC,QA1DO4sE,gBA0DPA,gBAAkB,KAEpB,IAAIzgD,UAAY85B,UAAYn4C,WAAW+2B,UAAU3U,OACjD,IAAI48C,kBAAoB58C,MAAM9mB,EAAI8qB,MAAQ24C,iBAAmBp9D,MAAQygB,MAAM1V,MAAQ0V,MAAMzV,IAAMyV,MAAM1V,KACrG,IAAIuyD,SAAW78C,MAAMzpB,EACrB,IAAIumE,SAAW/xD,QAAQgyD,cAAc9jB,OAAOC,GAAG,GAAK2jB,SACpD,IAAIG,SAAWJ,kBAAoBE,SAAW,EAC9C,IAAIG,SAAWj9C,MAAM7mB,EAAI6mB,MAAMzpB,EAAI,EAAIsmE,SAAW,EAClD,IAAIK,aAAeX,oBACnB,GAAInb,QAAS,CACX8b,aAAeV,8BACV,GAAIvgD,SAAU,CACnBihD,aAAeT,yBAGjB1xD,QAAQgyD,cAAcn2D,KAAK,CACzB1N,EAAG8jE,SACH7jE,EAAG8jE,SACHh/D,EAAG+hB,MAAM/hB,EAAI,GACb3H,EAAGwmE,SACHvmE,EAAGsmE,SACHp+C,MAAOy+C,aACPj4B,MAAO,IAGT,OAAO1lC,MAGT,IAAI49D,cAAgB,EAEb,SAASvlD,OAAOP,IACrBg/C,4BAA8BC,uBAC9BA,uBAAyB,MACzBU,mBAAqBC,mBACrBA,mBAAqB,MACrBC,gBAAkB,KAClBV,qBAAuB,MACvB1mE,QA7yBSsmE,oBA6yBTA,oBAAsB,MAEtBQ,sBAAwB9mE,QAAQiR,sBAChCjR,QAAQiR,sBAAwB,GAChC2jC,WAEAoyB,iBAAmB,EAEnB,IAAIsG,cAAgB,MACpB,GAAI7G,cAAgBE,QAAS,CAC3B,IAAIz4D,OAAS04D,iBACb,IAAKD,QAAS,CAEZz4D,OAAS62D,yBAEX8B,cAAgBt/C,GAEhB,IAAIje,OAASkR,IAAIqsD,aAAe,IAAK,GACrC,GAAIn6C,YAAYhO,iBAAmBgO,YAAYrgB,QAAQkhE,KAAM,CAC3D3I,aAAa3O,QAAQ/nD,OAAOC,EAAI,EAAGi3D,aAAazuD,KAAK,KAAMrN,OAAQ4E,SACnE02D,aAAa3O,QAAQ/nD,OAAOC,EAAI,EAAGo3D,mBAAmB5uD,KAAK,KAAMrN,OAAQ4E,SACzEo/D,cAAgB,SACX,CAELryD,QAAQ+sD,MAAMlxD,KAAK,CACjB1N,EAAGyE,SAAS/H,SACZuD,EAAGwE,SAAS9H,SACZoI,EAAGD,OAAOC,EAAI,EACdwgB,MAAOzgB,OAAOg3D,gBACd1+D,EAAGqH,SAAS3H,QACZO,EAAGoH,SAAS1H,eAGX,CACL0gE,aAAe,EAEjB7mE,QA10BS2mE,QA00BTA,QAAU,MAEV,IAAKj6C,YAAYnN,YAAcmN,YAAY3T,mBAAqB,IAAMu0D,cAAe,CACnFD,eAAiBA,eAAiB,GAAK,EACvC,GAAIA,eAAiB,EAAG,CAEtB3gD,YAAYhU,oBAAoB,aAE7B,GAAI20D,cAAe,CACxBA,cAAgB,EAGlB,GAAI5G,aAAc,CAChBuE,kBAIG,SAAStiD,WACd,GAAI5a,WAAWsE,MAAM,CACnBhJ,GAAI+pC,SAAU9pC,GAAI8pC,SAClB3sC,EAAG2sC,SAAU1sC,EAAG0sC,WACd,CACFxjC,WAAW,UAGb,IAAK,IAAInC,GAAK,EAAGA,GAAKs5D,sBAAsB5mE,SAAUsN,GAAI,CACxD,IAAIggE,SAAW1G,sBAAsBt5D,IACrC,IAAIsR,IAAM9e,QAAQiR,sBAAsB3M,QAAQkpE,UAChD,GAAI1uD,OAAS,EAAG,CACd0uD,SAASC,SAIb,MAAOzG,iBAAmBD,UAAU7mE,OAAQ,CAC1C,IAAIiP,KAAO43D,UAAUxhE,MACrBgjE,kBAAkBmF,YAAYv+D,OAI3B,SAAS60D,OAAO9zC,OACrB8zB,MAAM4iB,iBAAkB7B,0BACxB,GAAI70C,MAAO,CACT8zB,MAAM4iB,iBAAkB12C,OAE1BlwB,QAt3BS2mE,QAs3BTA,QAAU,KACVD,qBAAuB,KACvB54D,WAAW22B,cAGb,SAASkpC,oBAAoBl/D,MAC3B,IAAIm/D,SAAWhqE,SAASyN,cAAc,YACtCu8D,SAAS77D,MAAM87D,SAAW,QAC1BD,SAAS77D,MAAMrJ,IAAM,EACrBklE,SAAS77D,MAAMvJ,KAAO,EACtBolE,SAAS77D,MAAMrI,MAAQ,MACvBkkE,SAAS77D,MAAMvI,OAAS,MACxBokE,SAAS77D,MAAM+7D,OAAS,OACxBF,SAAS77D,MAAMskB,QAAU,OACzBu3C,SAAS77D,MAAMg8D,UAAY,OAC3BH,SAAS77D,MAAMi8D,WAAa,cAC5BJ,SAASn+D,MAAQhB,KAEjB7K,SAAS+f,KAAKhS,YAAYi8D,UAC1BA,SAASl+D,QACTk+D,SAAS/7D,SAET,IAAIud,IAAM,MACV,IACEA,IAAMxrB,SAASqqE,YAAY,QAC3B,MAAO3gB,MAIT1pD,SAAS+f,KAAK+pD,YAAYE,UAC1B,OAAOx+C,IAGF,SAAS60C,kBAAkB4G,MAAOqD,MAAO3jE,KAC9C,IAAI4jE,aAAeR,oBAAoBpjE,KACvCu5D,eAAe,CACb0I,OAAQ,IACRN,UAAW3hE,IACXsgE,MAAAA,MACAp8D,KAAM0/D,aAAkBD,MAAlB,wBAAiD,qDACvD37B,QAAS,CACP67B,GAAI,QAKH,SAAS/lD,SAASjiB,GAAIC,GAAIC,GAAIC,GAAI4H,EAAGwgB,OAC1C,IAAI0/C,GAAK7zD,IAAIpU,GAAIE,IACjB,IAAIgoE,GAAK9zD,IAAInU,GAAIE,IACjB,IAAIgoE,GAAK9zD,IAAIrU,GAAIE,IACjB,IAAIkoE,GAAK/zD,IAAIpU,GAAIE,IACjB0U,QAAQ+sD,MAAMlxD,KAAK,CACjB1N,EAAGilE,GACHhlE,EAAGilE,GACHngE,EAAAA,EACAwgB,MAAAA,MACAnoB,EAAG+nE,GAAKF,GACR5nE,EAAG+nE,GAAKF,KAIZ,SAASG,iBAAiB15C,QAKxBA,OAASva,IAAIC,IAAIsa,OAAQ,GAAI,KAE7B,IAAIvF,YAAc,CAChBI,OAAQjc,KAAK,EAAG,EAAG,EAAG,IAGxB6b,YAAYI,OAAO,GAAK,GAAK,EAAImF,QACjCvF,YAAYI,OAAO,IAAM,GAAMJ,YAAYI,OAAO,GAAK,GACvD,OAAOJ,YAGT,SAASk/C,mBAAmBtX,OAAQhuD,EAAGC,EAAG8E,EAAGjP,EAAG61B,OAAQ45C,IAAKC,IAAKC,IAAKC,IAAKngD,OAC1E,IAAIvoB,GAAKgD,EAAIlK,EAAI,EAAIA,EAAI,EAAIyvE,IAC7B,IAAIroE,GAAK8C,EAAIlK,EAAI,EAAIA,EAAI,EAAI2vE,IAC7B,IAAIxoE,GAAKgD,EAAInK,EAAI,EAAIA,EAAI,EAAI0vE,IAC7B,IAAIroE,GAAK8C,EAAInK,EAAI,EAAIA,EAAI,EAAI4vE,IAC7BlK,aAAazuC,SAASihC,OAAOvgD,KAAMzQ,GAAIC,GAAI8H,EAAG7H,GAAKF,GAAIG,GAAKF,GAAIsoE,IAAKC,IAAKC,IAAKC,IAAKngD,MAAO7U,UAAUkV,aAAa0B,QAAS+9C,iBAAiB15C,SAGvI,SAASmvC,WAAW96D,EAAGC,EAAG8E,EAAGjP,EAAG61B,OAAQpG,OAC7C,IAAK1T,QAAQ8zD,OAAQ,CACnB,IAAMC,YAAc,GACpB,IAAIxnE,KAAO,IAAIs0B,WAAWkzC,YAAcA,aACxC,IAAIC,MAAQD,YAAc,GAAK,EAC/B,IAAK,IAAIzvE,EAAI,EAAGA,EAAIyvE,YAAazvE,IAAK,CACpC,IAAK,IAAI2vE,EAAI,EAAGA,EAAIF,YAAaE,IAAK,CACpC,IAAIC,EAAIz0D,MAAMnb,EAAI0vE,OAAS1vE,EAAI0vE,OAASC,EAAID,OAASC,EAAID,OAASA,KAClE,IAAIhkE,EAAImQ,MAAM,EAAI+zD,EAAG,EAAG,GACxB3nE,KAAKjI,EAAI2vE,EAAIF,aAAe/jE,EAAI,KAGpCgQ,QAAQ8zD,OAASnK,aAAavkE,OAAO,CACnC+oB,IAAK,SACL1f,MAAOslE,YAAaxlE,OAAQwlE,YAC5Bx1C,OAAQpvB,SAASovB,OAAOmiC,GACxBn0D,KAAAA,KACAyP,WAAYzC,GAAG0C,OACfk4D,WAAY56D,GAAG0C,OACfE,OAAQ5C,GAAG6C,cACXC,OAAQ9C,GAAG6C,cACX9S,OAAQkP,KAAK,GAAK,MAGtBi7D,mBAAmBzzD,QAAQ8zD,OAAQ3lE,EAAGC,EAAG8E,EAAGjP,EAAG61B,OAAQ,EAAG,EAAG,EAAG,EAAGpG,OAG9D,SAASw1C,iBAAiB/6D,EAAGC,EAAG8E,EAAGjP,EAAG61B,OAAQpG,OACnD,IAAK1T,QAAQo0D,cAAe,CAC1B,IAAML,YAAc,IACpB,IAAMM,OAAS,EACf,IAAI9nE,KAAO,IAAIs0B,WAAWkzC,YAAcA,aACxC,IAAIC,MAAQD,YAAc,GAAK,EAC/B,IAAK,IAAIzvE,EAAI,EAAGA,EAAIyvE,YAAazvE,IAAK,CACpC,IAAK,IAAI2vE,EAAI,EAAGA,EAAIF,YAAaE,IAAK,CACpC,IAAIC,EAAIz0D,MAAMnb,EAAI0vE,OAAS1vE,EAAI0vE,OAASC,EAAID,OAASC,EAAID,OAASA,KAClE,IAAIhkE,EAAImQ,MAAM,EAAI+zD,EAAG,EAAG,GACxB,GAAIlkE,EAAI,GAAK,CACXA,EAAI,EAAIA,EAEVA,GAAKqkE,OAASN,YACdxnE,KAAKjI,EAAI2vE,EAAIF,aAAe/jE,EAAI,KAGpCgQ,QAAQo0D,cAAgBzK,aAAavkE,OAAO,CAC1C+oB,IAAK,gBACL1f,MAAOslE,YAAaxlE,OAAQwlE,YAC5Bx1C,OAAQpvB,SAASovB,OAAOmiC,GACxBn0D,KAAAA,KACAyP,WAAYzC,GAAG0C,OACfk4D,WAAY56D,GAAG0C,OACfE,OAAQ5C,GAAG6C,cACXC,OAAQ9C,GAAG6C,cACX9S,OAAQkP,KAAK,GAAK,MAGtBi7D,mBAAmBzzD,QAAQo0D,cAAejmE,EAAGC,EAAG8E,EAAGjP,EAAG61B,OAAQ,EAAG,EAAG,EAAG,EAAGpG,OAGrE,SAAS+mB,SAAStvC,GAAIC,GAAIC,GAAIC,GAAI4H,EAAG3H,EAAGuuB,OAAQpG,OACrD,IAAK1T,QAAQjX,KAAM,CACjB,IAAMurE,UAAY,GAClB,IAAI/nE,KAAO,IAAIs0B,WAAWyzC,UAAYA,WACtC,IAAIN,MAAQM,UAAY,GAAK,EAC7B,IAAK,IAAIhwE,EAAI,EAAGA,EAAIgwE,UAAWhwE,IAAK,CAClC,IAAK,IAAI2vE,EAAI,EAAGA,EAAIK,UAAWL,IAAK,CAClC,IAAIC,EAAInpC,KAAKzmC,EAAI0vE,MAAQA,MACzB,IAAIhkE,EAAImQ,MAAM,EAAI+zD,EAAG,EAAG,GACxB3nE,KAAKjI,EAAI2vE,EAAIK,WAAatkE,EAAI,KAGlCgQ,QAAQjX,KAAO4gE,aAAavkE,OAAO,CACjC+oB,IAAK,OACL1f,MAAO6lE,UAAW/lE,OAAQ+lE,UAC1B/1C,OAAQpvB,SAASovB,OAAOmiC,GACxBn0D,KAAAA,KACAyP,WAAYzC,GAAG0C,OACfk4D,WAAY56D,GAAG0C,OACfE,OAAQ5C,GAAG6C,cACXC,OAAQ9C,GAAG6C,cACX9S,OAAQkP,KAAK,GAAK,MAItB,IAAI8jD,GAAKjxD,GAAKF,GACd,IAAIoxD,GAAKjxD,GAAKF,GACd,IAAInG,OAASiD,KAAKuX,KAAK68C,GAAKA,GAAKC,GAAKA,IACtCD,IAAMr3D,OACNs3D,IAAMt3D,OACN,IAAIsvE,OAAShY,GAAKhxD,EAClB,IAAIipE,MAAQlY,GAAK/wD,EAEjBo+D,aAAa1lB,UAAUjkC,QAAQjX,KAAK6S,KAAMzQ,GAAKopE,MAAOnpE,GAAKopE,MAAOnpE,GAAKkpE,MAAOjpE,GAAKkpE,MAAOnpE,GAAKkpE,MAAOjpE,GAAKkpE,MAAOrpE,GAAKopE,MAAOnpE,GAAKopE,MAAOthE,EAAG,EAAG,EAAG,EAAG,EAAGwgB,MAAO7U,UAAUkV,aAAa0B,QAAS+9C,iBAAiB15C,SAG5M,SAASqvC,SAASh+D,GAAIC,GAAIC,GAAIC,GAAI4H,EAAGuhE,GAAI5kB,GAAI/1B,OAAQpG,OAC1D,IAAK1T,QAAQ00D,KAAM,CACjB,IAAMC,UAAY,GAClB,IAAIpoE,KAAO,IAAIs0B,WAAW8zC,UAAYA,WACtC,IAAIX,MAAQW,UAAY,GAAK,EAC7B,IAAK,IAAIrwE,EAAI,EAAGA,EAAIqwE,UAAWrwE,IAAK,CAClC,IAAK,IAAI2vE,EAAI,EAAGA,EAAIU,UAAWV,IAAK,CAClC,IAAIW,IAAK,EACT,IAAIC,IAAK,EACT,IAAIX,EAAI,EACR,GAAI5vE,EAAI0vE,KAAM,CACZY,KAAMtwE,EAAI0vE,MAAQA,KAClBa,IAAK9pC,IAAIkpC,EAAID,MAAQA,KACrB,IAAIc,QAAUr1D,KAAKm1D,IAAKA,IAAKC,IAAKA,KAClCX,EAAIU,IAAKE,QAEX,IAAI9kE,EAAImQ,MAAM,EAAI+zD,EAAG,EAAG,GACxB3nE,KAAKjI,EAAI2vE,EAAIU,WAAa3kE,EAAI,KAGlCgQ,QAAQ00D,KAAO/K,aAAavkE,OAAO,CACjC+oB,IAAK,OACL1f,MAAOkmE,UAAWpmE,OAAQomE,UAC1Bp2C,OAAQpvB,SAASovB,OAAOmiC,GACxBn0D,KAAAA,KACAyP,WAAYzC,GAAG0C,OACfk4D,WAAY56D,GAAG0C,OACfE,OAAQ5C,GAAG6C,cACXC,OAAQ9C,GAAG6C,cACX9S,OAAQkP,KAAK,GAAK,MAGtB,IAAI8jD,GAAKjxD,GAAKF,GACd,IAAIoxD,GAAKjxD,GAAKF,GACd,IAAInG,OAASiD,KAAKuX,KAAK68C,GAAKA,GAAKC,GAAKA,IACtCD,IAAMr3D,OACNs3D,IAAMt3D,OACN,IAAIsvE,OAAShY,GACb,IAAIiY,MAAQlY,GACZqN,aAAa1lB,UAAUjkC,QAAQ00D,KAAK94D,KAAMzQ,GAAKopE,MAAQE,GAAIrpE,GAAKopE,MAAQC,GAAItpE,GAAKopE,MAAQE,GAAIrpE,GAAKopE,MAAQC,GAAIppE,GAAKkpE,MAAQ1kB,GAAIvkD,GAAKkpE,MAAQ3kB,GAAIxkD,GAAKkpE,MAAQ1kB,GAAIvkD,GAAKkpE,MAAQ3kB,GAAI38C,EAAG,EAAG,EAAG,EAAG,EAAGwgB,MAAO7U,UAAUkV,aAAa0B,QAAS+9C,iBAAiB15C,SAGpP,SAASsvC,WAAWnuD,OACzBlW,QA5nCSymD,cA4nCTA,cAAgBn/C,MAAM,GAAK4O,OAC3BlW,QA5nCSwO,YA4nCTA,YAAclH,MAAM,GAAK4O,OACzBlW,QA5nCSsO,aA4nCTA,aAAehH,MAAM,IAAM4O,OAC3BlW,QA3nCSylE,gBA2nCTA,gBAAkBhf,cAClBzmD,QA7nCSwlE,mBA6nCTA,mBAAqBl+D,MAAMgH,aAAe,GAC1CtO,QA5nCS0lE,YA4nCTA,YAAcp+D,MAAM,IAAM4O,OAC1BlW,QA5nCS2lE,SA4nCTA,SAAWr+D,MAAM,IAAM4O,OACvBlW,QA5nCS4lE,kBA4nCTA,kBAAoB,IACpB5lE,QA5nCS6lE,UA4nCTA,UAAYv+D,MAAM,GAAK4O,OACvBlW,QA1nCSgmE,cA0nCTA,cAAgB1+D,MAAM,IAAM4O,OAC5BlW,QA1nCSimE,YA0nCTA,YAAc3+D,MAAM,EAAI4O,OACxBlW,QA9nCS8lE,kBA8nCTA,kBAAoBrf,cAAgB,GACpCzmD,QA9nCS+lE,0BA8nCTA,0BAA4BD,kBAGvB,SAASxB,cAAc0L,oBAAqBtmE,MAAOrD,GAAI4pE,YAAanvB,KACzE9gD,QAzoCSwlE,mBAyoCTA,mBAAqBwK,qBAAuB1oE,MAAMgH,aAAe,GACjEtO,QAxoCS0lE,YAwoCTA,YAAch8D,OAAS,IACvB1J,QAxoCS2lE,SAwoCTA,SAAWt/D,IAAM,IACjBrG,QAxoCS4lE,kBAwoCTA,kBAAoBqK,aAAe,IACnCjwE,QAxoCS6lE,UAwoCTA,UAAY/kB,KAAO+kB,UAGd,SAAStB,cAAc2L,cAC5BlwE,QAnpCSwO,YAmpCTA,YAAc0hE,aAGT,SAAS1L,gBAAgB2L,eAAgBC,4BAC9CpwE,QA7oCSgmE,cA6oCTA,cAAgBmK,eAChBnwE,QA/oCS+lE,0BA+oCTA,0BAA4BqK,2BAC5BpwE,QA9oCSimE,YA8oCTA,YAAcJ,UAAY,EAAIuK,2BAGhC/L,WAAW,iTCztCKhT,IAAAA,YAiFAgf,YAAAA,YAnJhB,IAAM12D,OAASja,QAAQ,UACvB,IAAMgtB,YAAchtB,QAAQ,eAC5B,IAAMoa,UAAYpa,QAAQ,aAC1B,IAAMoO,WAAapO,QAAQ,cAC3B,IAAM4wE,iBAAmB5wE,QAAQ,oBACjC,IAAM6wE,mBAAqB7wE,QAAQ,sBACnC,IAAMqO,QAAUrO,QAAQ,eAEhBy3B,KAAiBh0B,KAAjBg0B,KAAM5lB,OAAWpO,KAAXoO,OAEd,IAAIi/D,eAAA,EACJ,IAAIC,aAAe,MACnB,IAAIC,iBAAA,EACJ,IAAIxhD,gBAAA,EAEJ,IAAIva,YAAA,EACJ,IAAIg8D,eAAA,EACJ,IAAIC,eAAA,EACJ,IAAIC,kBAAA,EACJ,IAAIC,kBAAA,EACJ,IAAIC,aAAe,EACnB,SAASC,KAAK5nE,EAAGC,EAAG4nE,cAClBN,UAAY5iE,QAAQg2D,cAAc,CAChC36D,EAAGA,EAAI6nE,aACP5nE,EAAGA,EACH7C,EAAGyqE,aAAe,IAEpBL,UAAY7iE,QAAQg2D,cAAc,CAChC36D,EAAGA,EAAI6nE,aAAeA,aACtB5nE,EAAGA,EACH7C,EAAGyqE,aAAe,IAEpBT,UAAYF,iBAAiBjwE,OAAO,CAClC8lD,MAAO,CAAC,WAAY,CAClB7lC,KAAM,WACNmlC,IAAK,QACJ,CACDnlC,KAAM,WACNiB,GAAI,SAAAA,KACFmvD,YAAc,0BAIpBxhD,WAAapV,UAAU/H,MAAM,KAAM,CACjCqc,cAAe,EACfC,cAAe,WACfC,WAAY,KACZC,WAAY,KACZC,YAAa,IACbC,WAAY,EACZC,WAAY,MAGdmiD,aAAeN,mBAAmBlwE,OAAO,CACvC8lD,MAAO,CAAC,SAAU,UAAW,aAC7Bh4C,EAAGC,EAAEC,GACL3E,MAAOunE,aAAe,IAExBH,aAAeP,mBAAmBlwE,OAAO,CACvC8lD,MAAO,CAAC,SAAU,UAAW,aAC7BC,YAAa,KACbj4C,EAAGC,EAAEC,GACL3E,MAAOunE,aAAe,IAInB,SAAS5f,IAAIjoD,EAAGC,EAAG8E,GACxBA,EAAIA,GAAKC,EAAEC,GACX,IAAI2yC,YAAcjzC,QAAQ04C,cAAgB,EAC1C,IAAIwqB,aAAeljE,QAAQO,aAAe,EAC1C,GAAIqG,SAAcvL,EAAd,IAAmBC,EAAnB,IAAwB4nE,aAAgB,CAC1CD,KAAK5nE,EAAGC,EAAG4nE,cACXt8D,OAAYvL,EAAZ,IAAiBC,EAAjB,IAAsB4nE,aAGxB,GAAIR,aAAc,CAChBC,YAAc,GACdF,UAAUnf,IAAI,CAAEjoD,EAAGA,EAAI2E,QAAQO,aAAcjF,EAAGA,EAAI23C,YAAa7yC,EAAGC,EAAEq2D,QACtE,GAAI+L,UAAUte,aAAc,CAC1B,GAAIse,UAAUte,WAAW,QAAS,CAChCwe,YAAc,6BAEhB,IAAKA,YAAa,CAChBA,YAAA,kBAAgCF,UAAUU,kBAAkB5wD,KAE9DmwD,aAAe,MAEjB1iE,QAAQi2D,SACRl2D,WAAW22B,cAGb,IAAIqc,IAAM,EACV,IAAIt6C,EAAIuH,QAAQk9C,MAAM/7B,WAAY9lB,EAAI6nE,aAAe,EAAG5nE,EAAI,GAAI8E,EAAxD,kBAA6EwiE,UAAUliE,KAAvF,IAA+FmiE,UAAUniE,MACjHjI,EAAIrD,KAAKsX,IAAIjU,EAAGuH,QAAQk9C,MAAM/7B,WAAY9lB,EAAI6nE,aAAc5nE,EAAI,GAAK0E,QAAQS,YAAcsyC,IAAK3yC,EAAhF,WAA8FuiE,cAC9G3iE,QAAQw1D,MAAM,CAAEn6D,EAAGA,EAAI6nE,aAAe,EAAInwB,IAAKz3C,EAAGA,EAAI,GAAKy3C,IAAK3yC,EAAGA,EAAI,EACrE3H,EAAGA,EAAIs6C,IAAM,EAAGr6C,EAAGsH,QAAQS,YAAc,EAAIsyC,IAAM,IAErD,GAAI/yC,QAAQ0jD,WAAW,CAAEroD,EAAAA,EAAGC,EAAAA,EAAG8E,EAAAA,EAAGM,KAAM,eAAgBq6D,QAAS,yBAA2B,CAC1F4H,YAAc,GACd3iE,QAAQ61D,YAAY,CAClBiH,MAAO,eACPp8D,KAAM,0BACN8jC,QAAS,CACP67B,GAAM,SAAAA,KACJsC,YAAc,cAEhBS,OAAU,QAIhB9nE,GAAK23C,YAEL,GAAI2vB,UAAUtf,QAAUsf,UAAUp+D,OAAQ,CACxCxE,QAAQ61D,YAAY,CAClBiH,MAAO,eACPp8D,KAAA,gCAAsCkiE,UAAUliE,KAChD8jC,QAAS,CACP67B,GAAM,QAIZ,GAAIwC,UAAUvf,QAAUuf,UAAUr+D,OAAQ,CACxCq+D,UAAUjgE,QAAQ,IAGpB,GAAI5C,QAAQ0jD,WAAW,CAAEroD,EAAAA,EAAGC,EAAAA,EAAG8E,EAAAA,EAAGM,KAAM,OAAQq6D,QAAS,iBAAmB,CAC1E2H,aAAe,KAEjBpnE,GAAK23C,YAEL,GAAIjzC,QAAQ0jD,WAAW,CAAEroD,EAAAA,EAAGC,EAAAA,EAAG8E,EAAAA,EAAGM,KAAM,WAAYq6D,QAAS,oBAAqB7iB,SAAU,OAAS,CACnGtsC,OAAO,OAETtQ,GAAK23C,YAEL33C,GAAKwnE,aAAaxf,IAAI,CAAEjoD,EAAAA,EAAGC,EAAAA,EAAG8E,EAAAA,IAC9B9E,GAAKynE,aAAazf,IAAI,CAAEjoD,EAAAA,EAAGC,EAAAA,EAAG8E,EAAAA,IAE9B4iE,aAAehjE,QAAQ+3C,OAAOirB,aAAc,CAC1C3nE,EAAAA,EAAGC,EAAAA,EAAG8E,EAAAA,EACNqM,IAAK,EACLC,IAAK,IAEP1M,QAAQk9C,MAAM,KAAM7hD,EAAI2E,QAAQO,aAAewyC,IAAKz3C,EAAG8E,EAAvD,GAA6D4iE,aAAazlE,QAAQ,IAClFjC,GAAK0E,QAAQ04C,cAGR,SAAS4pB,YAAYjnE,EAAGC,GAC7B,IAAM+nE,UAAY,WAClB,IAAMC,YAAc,SACpB,IAAMC,YAAc,WACpB,IAAMC,gBAAkB,EACxB,IAAIpjE,EAAIC,EAAEC,GACV,IAAIwP,KAAO6O,YAAY7O,KAEvB,IAAIsK,UAAYpa,QAAQS,YAAc,EACtCqP,KAAK6T,UAAU,KAAMtoB,EAAGC,EAAG8E,EAAGga,UAA9B,WAAoDA,UAApD,IAAiE5W,SAASjG,QAAQ,IAClFjC,GAAK8e,UACLtK,KAAK6T,UAAU,KAAMtoB,EAAGC,EAAG8E,EAAGga,UAAY,EAA1C,WAAwDA,UAAY,EAApE,uCACA9e,GAAK8tB,KAAKhP,UAAY,GACtBtK,KAAK6T,UAAU,KAAMtoB,EAAGC,EAAG8E,EAAGga,UAAY,EAA1C,WAAwDA,UAAY,EAApE,kEACA9e,GAAK8tB,KAAKhP,UAAY,GAEtB,IAAMqpD,mBAAqB13D,UAAU/H,MAAM,KAAM,CAC/Cqc,cAAe,EAAGC,cAAe+iD,UACjC9iD,WAAY,EAAGC,WAAY,EAAGC,WAAY,EAAGC,WAAY,EAAGC,WAAY6iD,gBACxE5iD,MAAO2iD,cAETzzD,KAAK6T,UAAU8/C,mBAAoBpoE,EAAGC,EAAG8E,EAAGga,UAAW,WACvD9e,GAAK8e,UAEL,IAAMspD,gBAAkB33D,UAAU/H,MAAM,KAAM,CAC5Cqc,cAAe,EAAGC,cAAekjD,gBACjCjjD,WAAY,EAAGC,WAAY,EAAGC,YAAa,EAAGC,WAAY,EAAGC,WAAY2iD,YACzE1iD,MAAO2iD,cAETzzD,KAAK6T,UAAU+/C,gBAAiBroE,EAAGC,EAAG8E,EAAGga,UAAW,QACpD9e,GAAK8e,UAEL,IAAMupD,kBAAoB53D,UAAU/H,MAAM,KAAM,CAC9Cqc,cAAe,EAAGC,cAAekjD,gBACjCjjD,WAAY,KAAMC,WAAY,KAAMC,YAAa,IAAKC,WAAY,EAAGC,WAAY2iD,YACjF1iD,MAAO2iD,cAETzzD,KAAK6T,UAAUggD,kBAAmBtoE,EAAGC,EAAG8E,EAAGga,UAAW,qBACtD9e,GAAK8e,UAEL,IAAMwpD,gBAAkB73D,UAAU/H,MAAM,KAAM,CAC5Cqc,cAAe,EAAGC,cAAe+iD,UACjC9iD,WAAY,EAAGC,WAAY,EAAGC,WAAY,EAAGC,WAAY,EAAGC,WAAY2iD,YACxE1iD,MAAO2iD,cAETzzD,KAAK6T,UAAUigD,gBAAiBvoE,EAAGC,EAAG8E,EAAGga,UAAW,YACpD9e,GAAK8e,UAEL,IAAIypD,WAAa,GACjB,IAAMC,iBAAmB/3D,UAAU/H,MAAM,KAAM,CAC7Cqc,cAAe,KAAMC,cAAe+iD,UACpC9iD,WAAY,IAAMC,WAAY,IAAMC,WAAY,EAAGC,WAAY,EAAGC,WAAY,WAC9EC,MAAO2iD,cAETzzD,KAAK+T,iBAAiBigD,iBAAkBzoE,EAAGC,EAAG8E,EAAGyjE,WAAY93D,UAAUsT,MAAMS,KAAM9f,QAAQO,aAAe,EAAG,EAAG,0DAChHjF,GAAKuoE,WACL/zD,KAAK+T,iBAAiBigD,iBAAkBzoE,EAAGC,EAAG8E,EAAGyjE,WAAY93D,UAAUsT,MAAMS,KAAM,IAAK,EAAG,4BAC3FxkB,GAAKuoE,WAEL,IAAI37B,KAAO,OAEX,GAAIA,OAAS,UAAW,CACtB,IAAM67B,oBAAsBh4D,UAAU/H,MAAM,KAAM,CAChDqc,cAAe,EAAGC,cAAe+iD,UACjC9iD,WAAY,EAAGC,WAAY,EAAGC,WAAY,EAAGC,WAAY,EAAGC,WAAY6iD,gBACxE5iD,MAAO2iD,cAET,IAAK,IAAI9jE,GAAK,EAAGA,IAAM,EAAGA,KAAM,CAC9BskE,oBAAoB1jD,cAAgB5gB,GAAK,EACzCqQ,KAAK+T,iBAAiBkgD,oBAAqB1oE,EAAGC,EAAG8E,EAAGyjE,WAAY93D,UAAUsT,MAAMC,MAAO,IAAK,EAA5F,qBAAoH7f,GAAK,GACzHnE,GAAKuoE,iBAUF,GAAI37B,OAAS,OAAQ,CAC1B,IAAM87B,iBAAmBj4D,UAAU/H,MAAM,KAAM,CAC7Cqc,cAAe,EAAGC,cAAekjD,gBACjCjjD,WAAY,EAAGC,WAAY,EAAGC,WAAY,EAAGC,WAAY,EAAGC,WAAY0iD,UACxEziD,MAAO2iD,cAET,IAAK,IAAI3oD,IAAK,EAAGA,KAAM,EAAGA,MAAM,CAE9BopD,iBAAiBtjD,WAAa9F,IAAK,EACnC9K,KAAK+T,iBAAiBmgD,iBAAkB3oE,EAAGC,EAAG8E,EAAGyjE,WAAY93D,UAAUsT,MAAMC,MAAO,IAAK,EAAzF,cAA0G1E,IAAK,GAC/Gtf,GAAKuoE,iBAUF,GAAI37B,OAAS,OAAQ,CAC1B5sC,GAAKwU,KAAKyU,iBAAiB,KAAMlpB,EAAGC,EAAG8E,EAAG,IAAK,GAAIyjE,WAAY,WAAY,iFAAmF,iOC/MlJvoD,WAAAA,mBAIA2oD,SAAAA,iBAuBAC,MAAAA,cA+KAC,aAAAA,qBAyDA9qE,QAAAA,gBAaAmE,SAAAA,iBAwCApG,IAAAA,YAgBA4F,IAAAA,YAMAonE,GAAAA,GA7VhB,IAAMx4D,OAASja,QAAQ,UAEvB,IAAM0yE,oBAAsB,IAErB,IAAIj2D,SAAAnc,QAAAmc,SAAW,MACf,IAAIhP,YAAAnN,QAAAmN,YAAc,SAEzB,IAAIe,OAAS,GAEb,IAAImkE,aAAe,GAEnB,IAAIC,UAAY1uE,SAASY,SAAS+kB,MAAQ,IAAIhL,MAAM,WAAW,GAE/D,IAAIg0D,UAAY,GAET,SAASlpD,aACd,OAAOipD,SAGF,SAASN,SAASzwD,IACvBgxD,UAAUjtE,KAAKic,IAGjB,SAASixD,WAAW5yE,EAAG6C,GACrB,IAAI0sE,EAAI1sE,EAAEkJ,KAAKzL,OAASN,EAAE+L,KAAKzL,OAC/B,GAAIivE,EAAG,CACL,OAAOA,EAGT,IAAK,IAAI3hE,GAAK,EAAGA,GAAK5N,EAAE+L,KAAKzL,SAAUsN,GAAI,CACzC,GAAI5N,EAAE+L,KAAK6B,IAAM/K,EAAEkJ,KAAK6B,IAAK,CAC3B,OAAQ,OACH,GAAI5N,EAAE+L,KAAK6B,IAAM/K,EAAEkJ,KAAK6B,IAAK,CAClC,OAAO,GAGXmM,OAAO,OACP,OAAO,EAGT,IAAM84D,kBAAoB,UAC1B,IAAIC,OAAS,GACN,SAAST,MAAMU,cACpB,IAAIhnE,KAAO,GAEX,IAAIioD,KAAO+e,aAAa/tE,QAAQ6tE,kBAAmB,SAAU3/C,QAASvU,OACpE5S,KAAKrG,KAAKiZ,OACV,MAAO,cAET,IAAIq0D,MAAQ,IAAIt8B,OAAJ,IAAesd,KAAf,aACZ,IAAIif,UAAY,CACdF,aAAAA,aACAC,MAAAA,MACAjnE,KAAAA,MAEF,IAAK,IAAI6B,GAAK,EAAGA,GAAK7B,KAAKzL,SAAUsN,GAAI,CACvC,IAAI0jC,KAAOhjC,OAAOvC,KAAK6B,KAEvBmM,OAAOu3B,MACPA,KAAKwhC,OAASxhC,KAAKwhC,QAAU,GAC7BxhC,KAAKwhC,OAAOptE,KAAKutE,WAEnBH,OAAOptE,KAAKutE,WACZH,OAAO3mE,KAAKymE,YAGd,SAASM,cACP,IAAIvpD,KAAOjc,OAAO1J,SAASY,UAC3B,OAAO+kB,KAAK9kB,MAAM6tE,SAASpyE,QAG7B,IAAM6yE,YAAc,mBACpB,SAASC,SAASC,aAAc/hC,MAC9B,GAAIA,KAAKwhC,OAAQ,CACf,IAAK,IAAIllE,GAAK,EAAGA,GAAK0jC,KAAKwhC,OAAOxyE,SAAUsN,GAAI,CAC9C,IAAItO,EAAIgyC,KAAKwhC,OAAOllE,IACpB,IAAI0lE,GAAID,aAAa10D,MAAMrf,EAAE0zE,OAC7B,GAAIM,GAAG,CACL,IAAIp0D,IAAM5f,EAAEyM,KAAKrH,QAAQ4sC,KAAK98B,KAC9B,OAAO8+D,GAAE,EAAIp0D,OAInB,IAAID,EAAIo0D,aAAa10D,MAAM2yB,KAAK0hC,QAAU,GAC1C,GAAI1hC,KAAKvmC,OAASwR,SAAU,CAC1B,IAAIg3D,GAAI,GACR,IAAK,IAAIxqD,IAAK,EAAGA,IAAK9J,EAAE3e,SAAUyoB,IAAI,CACpC,IAAIyqD,GAAKv0D,EAAE8J,KAAIpK,MAAMw0D,aACrBp5D,OAAOy5D,IACPD,GAAEC,GAAG,IAAM,EAEb,OAAOD,OACF,CACL,OAAOt0D,EAAE,IAAMqyB,KAAKiF,KAIxB,IAAIk9B,iBAAmB,KAEvB,SAASC,WAAWL,cAGlB,IAAIzrD,OAAS,GACb,IAAK,IAAIpT,OAAOlG,OAAQ,CACtB,IAAIgjC,KAAOhjC,OAAOkG,KAClB,GAAI88B,KAAKqiC,MAAO,CACd,GAAIP,SAASC,aAAc/hC,MAAO,CAChC,IAAK,IAAIsiC,YAAYtiC,KAAKqiC,MAAO,CAC/B/rD,OAAOgsD,UAAY,KAM3B,IAAIC,MAAQ,GACZ,IAAK,IAAI58C,QAAO3oB,OAAQ,CACtB,GAAIsZ,OAAOqP,MAAM,CACf,SAEF,IAAI68C,MAAOxlE,OAAO2oB,MAClB,IAAI88C,UAAYX,SAASC,aAAcS,OACvC,GAAIA,MAAK/oE,OAASwR,SAAU,CAC1B,IAAK,IAAIlR,KAAK0oE,UAAW,CACvB,IAAKD,MAAKjkE,MAAMxE,GAAI,CAClByoE,MAAKjkE,MAAMxE,GAAK,EAChBwoE,MAAM58C,MAAO,MAGjB,IAAK,IAAI+8C,MAAKF,MAAKjkE,MAAO,CACxB,IAAKkkE,UAAUC,IAAI,QACVF,MAAKjkE,MAAMmkE,IAClBH,MAAM58C,MAAO,WAGZ,CACL,GAAI88C,YAAcD,MAAKjkE,MAAO,CAC5BgkE,MAAM58C,MAAO,KACb68C,MAAKjkE,MAAQkkE,YAMnB,IAAK,IAAI1zB,SAAOwzB,MAAO,CACrB,IAAII,OAAO3lE,OAAO+xC,OAClB,GAAI4zB,OAAKz3D,OAAQ,CACfy3D,OAAKz3D,OAAOy3D,OAAKpkE,QAGrB,IAAK,IAAIjC,GAAK,EAAGA,GAAK+kE,UAAUryE,SAAUsN,GAAI,CAC5C+kE,UAAU/kE,OAId,IAAIsmE,eAAA,EACJ,SAASC,WACPD,UAAY,GACZ,IAAIE,OAAS,GACb,IAAIxsD,OAAS,GACb,IAAK,IAAIpT,OAAOlG,OAAQ,CACtB,IAAIgjC,KAAOhjC,OAAOkG,KAClB,GAAI88B,KAAKqiC,OAASriC,KAAKzhC,MAAO,CAC5B,IAAK,IAAI+jE,YAAYtiC,KAAKqiC,MAAO,CAC/B/rD,OAAOgsD,UAAY,IAIzB,IAAIS,WAAa,GACjBC,MACA,IAAK,IAAI1mE,GAAK,EAAGA,GAAKklE,OAAOxyE,SAAUsN,GAAI,CACzC,IAAItO,EAAIwzE,OAAOllE,IACf,IAAK,IAAIid,GAAK,EAAGA,GAAKvrB,EAAEyM,KAAKzL,SAAUuqB,GAAI,CACzC,IAAI0pD,MAAMj1E,EAAEyM,KAAK8e,IACjB,GAAIjD,OAAO2sD,OAAM,CACf,SAASD,MAEX,IAAIE,OAAOlmE,OAAOimE,OAClB,GAAIC,OAAKC,YAAYD,OAAK3kE,OAAQ,CAChC,SAASykE,OAKbD,WAAa/0E,EAAEyzE,aAAa/tE,QAAQ6tE,kBAAmB,SAAU3/C,QAAS1e,KACxEoT,OAAOpT,KAAO,KACd,OAAO9G,OAAOY,OAAOkG,KAAK3E,SAE5B,MAEF,IAAK,IAAI6kE,SAAOpmE,OAAQ,CACtB,GAAIsZ,OAAO8sD,OAAM,CACf,SAEF,IAAIC,OAAOrmE,OAAOomE,OAClB,GAAIC,OAAK5pE,OAASwR,SAAU,CAC1B,IAAK,IAAIlR,KAAKspE,OAAK9kE,MAAO,CACxBukE,OAAO1uE,KAAQgvE,MAAf,IAAsBrpE,QAEnB,CACL,IAAKspE,OAAKF,YAAYE,OAAK9kE,OAAQ,CACjCukE,OAAO1uE,KAAQgvE,MAAf,IAAsBC,OAAK9kE,OAC3B,IAAKqkE,WAAaS,OAAK1J,MAAO,CAC5BiJ,UAAYS,OAAK1J,MAAM0J,OAAK9kE,UAKpC,GAAI4iE,aAAc,CAChB,GAAIyB,UAAW,CACbA,UAAeA,UAAf,MAA8BzB,iBACzB,CACLyB,UAAYzB,cAGhB,MAAA,GAAU4B,YAAaD,OAAO9zE,OAAS,IAAM,IAAK8zE,OAAOrvE,KAAK,KAGzD,SAASutE,eACd6B,WACA,GAAID,WAAaA,YAAclwE,SAASinE,MAAO,CAC7CjnE,SAASinE,MAAQiJ,WAIrB,SAASU,uBACPtC,eACA9sD,WAAWovD,qBAAsB,KAGnC,SAASC,aACP,IAAIxB,aAAeH,cACnBO,iBAAmBJ,aACnBK,WAAWL,cACXf,eAGF,IAAIwC,sBAAwB,EAC5B,IAAIC,UAAY,MAChB,IAAIC,gBAAkB,MACtB,SAASC,cAAcC,qBACrB,IAAIC,QAAUhB,WACd,GAAIV,mBAAqB0B,QAAS,CAChC,OAEFH,gBAAkBA,iBAAmBE,oBACrCzB,iBAAmB0B,QACnB,GAAIJ,UAAW,CAEb,OAEF,IAAIK,MAAQ5C,oBACZ,GAAIhrD,KAAKD,MAAQutD,sBAAwBtC,oBAAqB,CAG5D4C,MAAQ,EAEVL,UAAY,KACZvvD,WAAW,WACTuvD,UAAY,MACZD,sBAAwBttD,KAAKD,MAC7B,GAAIytD,gBAAiB,CACnBA,gBAAkB,MAClBpxE,OAAO4c,QAAQ60D,UAAUrnE,UAAWkmE,UAApC,GAAkDxB,SAAWe,sBACxD,CACL7vE,OAAO4c,QAAQ80D,aAAatnE,UAAWkmE,UAAvC,GAAqDxB,SAAWe,kBAElE,GAAIS,UAAW,CACblwE,SAASinE,MAAQiJ,YAGlBkB,OAIE,SAAS5tE,QAAQ8oB,OACtBvW,QAAQ04D,cACRA,aAAeniD,MAAMmiD,aAGrBwC,cAAc,OAEd,GAAIxC,aAAc,CAChBH,eACA9sD,WAAWovD,qBAAsB,MAI9B,SAASjpE,SAAS2lC,MACvBv3B,OAAOu3B,KAAK98B,KACZuF,QAAQzL,OAAOgjC,KAAK98B,MACpB88B,KAAKvmC,KAAOumC,KAAKvmC,MAAQwC,YACzB,IAAIgoE,aAAA,aAA4BjkC,KAAK98B,IAAjC,WACJ,IAAIghE,WAAa,GACjB,GAAIlkC,KAAKvmC,OAASwR,SAAU,CAC1Bi5D,WAAa,QACR,CACLlkC,KAAKiF,IAAMjF,KAAKiF,KAAO,GACvBjF,KAAKmjC,YAAcnjC,KAAKmjC,aAAe,GACvCnjC,KAAKmjC,YAAYnjC,KAAKiF,KAAO,KAE/BjF,KAAK0hC,MAAQ,IAAIt8B,OAAO6+B,aAAcC,YACtClnE,OAAOgjC,KAAK98B,KAAO88B,KAEnBA,KAAKzhC,MAAQujE,SAASF,cAAe5hC,MACrC,IAAI9hB,IAAM8hB,KAAKzhC,MACf,GAAIyhC,KAAKvmC,OAASwR,iBAAmBmsB,QAAU,WAAY,CAEzDlZ,IAAM,IAAIkZ,MAAM4I,KAAKzhC,MAAO,CAC1BtK,IAAK,SAAAA,IAAUojC,OAAQC,KAAM/4B,OAC3B,GAAIA,MAAO,CACT84B,OAAOC,MAAQ,MACV,QACED,OAAOC,MAEhBqsC,gBACA,OAAO,QAKb,IAAKrxE,OAAO6xE,WAAY,CACtB7xE,OAAO6xE,WAAaZ,WAGtB,OAAOrlD,IAGF,SAASjqB,IAAIiP,IAAK3E,MAAO2lB,QAC9B,IAAI8b,KAAOhjC,OAAOkG,KAClBuF,OAAOu3B,MACP,GAAIA,KAAKvmC,OAASwR,SAAU,CAC1B,GAAIupC,QAAQxU,KAAKzhC,MAAMA,UAAYi2C,QAAQtwB,QAAS,CAClD8b,KAAKzhC,MAAMA,OAAS2lB,OAAS,EAAI,EACjCy/C,cAAc3jC,KAAK5rC,WAEhB,CACL,GAAI4rC,KAAKzhC,QAAUA,MAAO,CACxByhC,KAAKzhC,MAAQA,MACbolE,cAAc3jC,KAAK5rC,QAKlB,SAASyF,IAAIqJ,KAClB,IAAI88B,KAAOhjC,OAAOkG,KAClBuF,OAAOu3B,MACP,OAAOA,KAAKzhC,MAGP,SAAS0iE,GAAGc,cAEjBK,WAAWL,cACX4B,cAAc,+EClXAS,KAAAA,aAIA7hE,KAAAA,aASAC,KAAAA,aAUAC,KAAAA,aAoBA4hE,MAAAA,cAMArvC,MAAAA,cAMAsvC,WAAAA,mBAMArvC,OAAAA,eAMAsvC,SAAAA,iBAIAC,MAAAA,cAMAC,QAAAA,gBAMAvvC,WAAAA,mBAIA4U,OAAAA,eAOAC,MAAAA,cAMA26B,YAAAA,oBAUAC,OAAAA,eAIAvvC,QAAAA,gBAMAD,MAAAA,cAMAE,MAAAA,cAMA2U,MAAAA,cAOA46B,OAAAA,eAOAC,WAAAA,mBAOA71B,OAAAA,eAOA81B,QAAAA,gBAcAC,cAAAA,sBAuBAC,MAAAA,cAIAC,SAAAA,iBAIAC,MAAAA,cAOAC,SAAAA,iBAOAC,QAAAA,gBAOAC,WAAAA,mBAIAC,OAAAA,eAQAC,OAAAA,eAOAC,OAAAA,eAOAC,MAAAA,cAOAj7D,UAAAA,kBAUAk7D,YAAAA,oBAWAj7D,aAAAA,qBAcAk7D,qBAAAA,6BAYAC,QAAAA,gBAOAC,OAAAA,eAIAC,QAAAA,gBAOAC,MAAAA,cAOAC,MAAAA,cAOAC,OAAAA,eAOAC,OAAAA,eAKAC,MAAAA,cAQAtqD,QAAAA,gBAIAnR,OAAAA,eAQAu/B,OAAAA,eASAC,MAAAA,cAQAk8B,SAAAA,iBAQAz7D,OAAAA,eAIAmR,QAAAA,gBAQApZ,MAAAA,cAQA2jE,OAAAA,OApahBv3E,QAAQwb,KAAO9b,QAAQ,kBACvBM,QAAQyb,KAAO/b,QAAQ,sBAEfsmC,IAAsC7iC,KAAtC6iC,IAAKvrB,IAAiCtX,KAAjCsX,IAAKD,IAA4BrX,KAA5BqX,IAAKD,MAAuBpX,KAAvBoX,MAAOjT,MAAgBnE,KAAhBmE,MAAOoT,KAASvX,KAATuX,KAE9B,SAAS46D,KAAKrqE,GACnB,OAAO,IAAI1K,aAAa,CAAC0K,IAGpB,SAASwI,KAAK7T,EAAG6C,GACtB,IAAIvD,EAAI,IAAIqB,aAAa,GACzB,GAAIX,GAAK6C,EAAG,CACVvD,EAAE,GAAKU,EACPV,EAAE,GAAKuD,EAET,OAAOvD,EAGF,SAASwU,KAAK9T,EAAG6C,EAAGhD,GACzB,IAAIP,EAAI,IAAIqB,aAAa,GACzB,GAAIX,GAAK6C,GAAKhD,EAAG,CACfP,EAAE,GAAKU,EACPV,EAAE,GAAKuD,EACPvD,EAAE,GAAKO,EAET,OAAOP,EAGF,SAASyU,KAAK/T,EAAG6C,EAAGhD,EAAG0vE,GAC5B,IAAIjwE,EAAI,IAAIqB,aAAa,GACzB,GAAIX,GAAK6C,GAAKhD,GAAK0vE,EAAG,CACpBjwE,EAAE,GAAKU,EACPV,EAAE,GAAKuD,EACPvD,EAAE,GAAKO,EACPP,EAAE,GAAKiwE,EAET,OAAOjwE,EAGF,IAAMyhE,SAAA3gE,QAAA2gE,SAAWhtD,KAAK,EAAG,EAAG,EAAG,GAC/B,IAAM6jE,SAAAx3E,QAAAw3E,SAAW7jE,KAAK,GAAK,GAAK,GAAK,IACrC,IAAM8jE,SAAAz3E,QAAAy3E,SAAW9jE,OACjB,IAAM+jE,cAAA13E,QAAA03E,cAAgB13E,QAAQwb,OAC9B,IAAMm8D,cAAA33E,QAAA23E,cAAgB33E,QAAQyb,OAC9B,IAAMm8D,MAAA53E,QAAA43E,MAAQjkE,KAAK,EAAG,EAAG,EAAG,GAC5B,IAAMkkE,MAAA73E,QAAA63E,MAAQlkE,KAAK,EAAG,EAAG,EAAG,GAC5B,IAAMmkE,MAAA93E,QAAA83E,MAAQnkE,KAAK,EAAG,EAAG,EAAG,GAE5B,SAAS4hE,MAAMj1E,IAAKV,GACzBU,IAAI,GAAK0lC,IAAIpmC,EAAE,IACfU,IAAI,GAAK0lC,IAAIpmC,EAAE,IACf,OAAOU,IAGF,SAAS4lC,MAAM5lC,IAAKV,EAAG6C,GAC5BnC,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAClBnC,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAClB,OAAOnC,IAGF,SAASk1E,WAAWl1E,IAAKV,EAAG6C,EAAGsT,GACpCzV,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAAKsT,EACvBzV,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAAKsT,EACvB,OAAOzV,IAGF,SAAS6lC,OAAO7lC,IAAKV,GAC1BU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,GACX,OAAOU,IAGF,SAASm1E,SAAS71E,EAAG6C,GAC1B,OAAQ7C,EAAE,GAAK6C,EAAE,KAAO7C,EAAE,GAAK6C,EAAE,KAAO7C,EAAE,GAAK6C,EAAE,KAAO7C,EAAE,GAAK6C,EAAE,IAG5D,SAASizE,MAAMp1E,IAAKV,EAAG6C,GAC5BnC,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAClBnC,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAClB,OAAOnC,IAGF,SAASq1E,QAAQr1E,IAAKV,GAC3BU,IAAI,GAAKia,MAAM3a,EAAE,IACjBU,IAAI,GAAKia,MAAM3a,EAAE,IACjB,OAAOU,IAGF,SAAS8lC,WAAWxmC,GACzB,OAAOA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAGzB,SAASo7C,OAAO16C,IAAKjB,EAAGO,EAAG6C,GAChC,IAAIs1E,GAAK,EAAI14E,EACbiB,IAAI,GAAKy3E,GAAKn4E,EAAE,GAAKP,EAAIoD,EAAE,GAC3BnC,IAAI,GAAKy3E,GAAKn4E,EAAE,GAAKP,EAAIoD,EAAE,GAC3B,OAAOnC,IAGF,SAAS26C,MAAM36C,IAAKV,EAAG6C,GAC5BnC,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAClBnC,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAClB,OAAOnC,IAGF,SAASs1E,YAAYt1E,IAAKV,GAC/B,IAAImf,IAAMnf,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GACjC,GAAImf,IAAM,EAAG,CACXA,IAAM,EAAIrE,KAAKqE,KACfze,IAAI,GAAKV,EAAE,GAAKmf,IAChBze,IAAI,GAAKV,EAAE,GAAKmf,IAElB,OAAOze,IAGF,SAASu1E,OAAOj2E,EAAG6C,GACxB,OAAO7C,EAAE,KAAO6C,EAAE,IAAM7C,EAAE,KAAO6C,EAAE,GAG9B,SAAS6jC,QAAQhmC,IAAKV,EAAGmW,GAC9BzV,IAAI,GAAKV,EAAE,GAAKmW,EAChBzV,IAAI,GAAKV,EAAE,GAAKmW,EAChB,OAAOzV,IAGF,SAAS+lC,MAAM/lC,IAAKV,EAAG6C,GAC5BnC,IAAI,GAAKV,EACTU,IAAI,GAAKmC,EACT,OAAOnC,IAGF,SAASimC,MAAMjmC,IAAKV,EAAG6C,GAC5BnC,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAClBnC,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAClB,OAAOnC,IAGF,SAAS46C,MAAM56C,IAAKV,EAAG6C,GAC5BnC,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAClBnC,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAClBnC,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAClB,OAAOnC,IAGF,SAASw1E,OAAOl2E,EAAG6C,GACxB7C,EAAE,IAAM6C,EAAE,GACV7C,EAAE,IAAM6C,EAAE,GACV7C,EAAE,IAAM6C,EAAE,GACV,OAAO7C,EAGF,SAASm2E,WAAWz1E,IAAKV,EAAG6C,EAAGsT,GACpCzV,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAAKsT,EACvBzV,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAAKsT,EACvBzV,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAAKsT,EACvB,OAAOzV,IAGF,SAAS4/C,OAAO5/C,IAAKV,GAC1BU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,GACX,OAAOU,IAGF,SAAS01E,QAAQ11E,IAAKV,EAAG6C,GAC9B,IAAIk0C,GAAK/2C,EAAE,GACX,IAAIg3C,GAAKh3C,EAAE,GACX,IAAIi3C,GAAKj3C,EAAE,GACX,IAAI8C,GAAKD,EAAE,GACX,IAAIE,GAAKF,EAAE,GACX,IAAIG,GAAKH,EAAE,GACXnC,IAAI,GAAKs2C,GAAKh0C,GAAKi0C,GAAKl0C,GACxBrC,IAAI,GAAKu2C,GAAKn0C,GAAKi0C,GAAK/zC,GACxBtC,IAAI,GAAKq2C,GAAKh0C,GAAKi0C,GAAKl0C,GACxB,OAAOpC,IAIF,SAAS21E,cAAcr2E,EAAG6C,EAAGhD,GAUlC,IAAIkB,IAAMf,EAAE,GACZ,IAAIgB,IAAM6B,EAAE,GACZ,IAAI5B,IAAMpB,EAAE,GACZ,IAAIsB,IAAMnB,EAAE,GACZ,IAAIoB,IAAMyB,EAAE,GACZ,IAAIxB,IAAMxB,EAAE,GACZ,IAAI0B,IAAMvB,EAAE,GACZ,IAAIwB,IAAMqB,EAAE,GACZ,IAAIpB,IAAM5B,EAAE,GAEZ,OAAOkB,KAAOU,IAAML,IAAMC,IAAMG,KAAOR,MAAQS,IAAMN,IAAME,IAAME,KAAON,KAAOO,IAAML,IAAMC,IAAMG,KAG5F,SAAS+0E,MAAMt2E,EAAG6C,GACvB,OAAO7C,EAAE,GAAK6C,EAAE,GAAK7C,EAAE,GAAK6C,EAAE,GAAK7C,EAAE,GAAK6C,EAAE,GAGvC,SAAS0zE,SAASv2E,EAAG6C,GAC1B,OAAQ7C,EAAE,GAAK6C,EAAE,KAAO7C,EAAE,GAAK6C,EAAE,KAAO7C,EAAE,GAAK6C,EAAE,KAAO7C,EAAE,GAAK6C,EAAE,KAAO7C,EAAE,GAAK6C,EAAE,KAAO7C,EAAE,GAAK6C,EAAE,IAG5F,SAAS2zE,MAAM91E,IAAKV,EAAG6C,GAC5BnC,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAClBnC,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAClBnC,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAClB,OAAOnC,IAGF,SAAS+1E,SAASz2E,GACvBA,EAAE,GAAK2a,MAAM3a,EAAE,IACfA,EAAE,GAAK2a,MAAM3a,EAAE,IACfA,EAAE,GAAK2a,MAAM3a,EAAE,IACf,OAAOA,EAGF,SAAS02E,QAAQh2E,IAAKV,GAC3BU,IAAI,GAAKia,MAAM3a,EAAE,IACjBU,IAAI,GAAKia,MAAM3a,EAAE,IACjBU,IAAI,GAAKia,MAAM3a,EAAE,IACjB,OAAOU,IAGF,SAASi2E,WAAW32E,GACzB,OAAOA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAGvC,SAAS42E,OAAOl2E,IAAKjB,EAAGO,EAAG6C,GAChC,IAAIs1E,GAAK,EAAI14E,EACbiB,IAAI,GAAKy3E,GAAKn4E,EAAE,GAAKP,EAAIoD,EAAE,GAC3BnC,IAAI,GAAKy3E,GAAKn4E,EAAE,GAAKP,EAAIoD,EAAE,GAC3BnC,IAAI,GAAKy3E,GAAKn4E,EAAE,GAAKP,EAAIoD,EAAE,GAC3B,OAAOnC,IAGF,SAASm2E,OAAO72E,EAAG6C,GACxB7C,EAAE,GAAK6a,IAAI7a,EAAE,GAAI6C,EAAE,IACnB7C,EAAE,GAAK6a,IAAI7a,EAAE,GAAI6C,EAAE,IACnB7C,EAAE,GAAK6a,IAAI7a,EAAE,GAAI6C,EAAE,IACnB,OAAO7C,EAGF,SAAS82E,OAAO92E,EAAG6C,GACxB7C,EAAE,GAAK4a,IAAI5a,EAAE,GAAI6C,EAAE,IACnB7C,EAAE,GAAK4a,IAAI5a,EAAE,GAAI6C,EAAE,IACnB7C,EAAE,GAAK4a,IAAI5a,EAAE,GAAI6C,EAAE,IACnB,OAAO7C,EAGF,SAAS+2E,MAAMr2E,IAAKV,EAAG6C,GAC5BnC,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAClBnC,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAClBnC,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAClB,OAAOnC,IAGF,SAASob,UAAUpb,IAAKV,EAAGif,GAChC,IAAIzV,EAAIxJ,EAAE,GACV,IAAIyJ,EAAIzJ,EAAE,GACV,IAAIuO,EAAIvO,EAAE,GACVU,IAAI,GAAK8I,EAAIyV,EAAE,GAAKxV,EAAIwV,EAAE,GAAK1Q,EAAI0Q,EAAE,GACrCve,IAAI,GAAK8I,EAAIyV,EAAE,GAAKxV,EAAIwV,EAAE,GAAK1Q,EAAI0Q,EAAE,GACrCve,IAAI,GAAK8I,EAAIyV,EAAE,GAAKxV,EAAIwV,EAAE,GAAK1Q,EAAI0Q,EAAE,IACrC,OAAOve,IAGF,SAASs2E,YAAYt2E,IAAKV,GAC/B,IAAImf,IAAMnf,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAC/C,GAAImf,IAAM,EAAG,CACXA,IAAM,EAAIrE,KAAKqE,KACfze,IAAI,GAAKV,EAAE,GAAKmf,IAChBze,IAAI,GAAKV,EAAE,GAAKmf,IAChBze,IAAI,GAAKV,EAAE,GAAKmf,IAElB,OAAOze,IAGF,SAASqb,aAAa/b,GAC3B,IAAImf,IAAMnf,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAC/C,GAAImf,IAAM,EAAG,CACXA,IAAM,EAAIrE,KAAKqE,KACfnf,EAAE,IAAMmf,IACRnf,EAAE,IAAMmf,IACRnf,EAAE,IAAMmf,IAEV,OAAOnf,EAMF,SAASi3E,qBAAqBv2E,IAAKV,EAAGif,GAC3C,IAAIzV,EAAIxJ,EAAE,GACV,IAAIyJ,EAAIzJ,EAAE,GACV,IAAIuO,EAAIvO,EAAE,GACV,IAAI4G,EAAIqY,EAAE,GAAKzV,EAAIyV,EAAE,GAAKxV,EAAIwV,EAAE,IAAM1Q,EAAI0Q,EAAE,IAC5C,IAAIm5D,KAAO,IAAOxxE,GAAK,MACvBlG,IAAI,IAAMue,EAAE,GAAKzV,EAAIyV,EAAE,GAAKxV,EAAIwV,EAAE,GAAK1Q,EAAI0Q,EAAE,KAAOm5D,KAAO,GAC3D13E,IAAI,IAAMue,EAAE,GAAKzV,EAAIyV,EAAE,GAAKxV,EAAIwV,EAAE,GAAK1Q,EAAI0Q,EAAE,MAAQm5D,KAAO,GAC5D13E,IAAI,GAAKue,EAAE,GAAKzV,EAAIyV,EAAE,GAAKxV,EAAIwV,EAAE,IAAM1Q,EAAI0Q,EAAE,IAC7C,OAAOve,IAGF,SAASw2E,QAAQx2E,IAAKV,GAC3BU,IAAI,GAAKgH,MAAM1H,EAAE,IACjBU,IAAI,GAAKgH,MAAM1H,EAAE,IACjBU,IAAI,GAAKgH,MAAM1H,EAAE,IACjB,OAAOU,IAGF,SAASy2E,OAAOn3E,EAAG6C,GACxB,OAAO7C,EAAE,KAAO6C,EAAE,IAAM7C,EAAE,KAAO6C,EAAE,IAAM7C,EAAE,KAAO6C,EAAE,GAG/C,SAASu0E,QAAQ12E,IAAKV,EAAGmW,GAC9BzV,IAAI,GAAKV,EAAE,GAAKmW,EAChBzV,IAAI,GAAKV,EAAE,GAAKmW,EAChBzV,IAAI,GAAKV,EAAE,GAAKmW,EAChB,OAAOzV,IAGF,SAAS22E,MAAM32E,IAAKV,EAAG6C,EAAGhD,GAC/Ba,IAAI,GAAKV,EACTU,IAAI,GAAKmC,EACTnC,IAAI,GAAKb,EACT,OAAOa,IAGF,SAAS42E,MAAM52E,IAAKV,EAAG6C,GAC5BnC,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAClBnC,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAClBnC,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAClB,OAAOnC,IAGF,SAAS62E,OAAOv3E,EAAG6C,GACxB7C,EAAE,IAAM6C,EAAE,GACV7C,EAAE,IAAM6C,EAAE,GACV7C,EAAE,IAAM6C,EAAE,GACV,OAAO7C,EAGF,SAASw3E,OAAO92E,KACrBA,IAAI,GAAKA,IAAI,GAAKA,IAAI,GAAK,EAC3B,OAAOA,IAGF,SAAS+2E,MAAM/2E,IAAKV,EAAG6C,GAC5BnC,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAClBnC,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAClBnC,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAClBnC,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAClB,OAAOnC,IAGF,SAASysB,QAAQntB,GACtB,OAAOA,EAAE6E,MAAM,GAGV,SAASmX,OAAOtb,IAAKV,GAC1BU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,GACXU,IAAI,GAAKV,EAAE,GACX,OAAOU,IAGF,SAAS66C,OAAO76C,IAAKjB,EAAGO,EAAG6C,GAChC,IAAIs1E,GAAK,EAAI14E,EACbiB,IAAI,GAAKy3E,GAAKn4E,EAAE,GAAKP,EAAIoD,EAAE,GAC3BnC,IAAI,GAAKy3E,GAAKn4E,EAAE,GAAKP,EAAIoD,EAAE,GAC3BnC,IAAI,GAAKy3E,GAAKn4E,EAAE,GAAKP,EAAIoD,EAAE,GAC3BnC,IAAI,GAAKy3E,GAAKn4E,EAAE,GAAKP,EAAIoD,EAAE,GAC3B,OAAOnC,IAGF,SAAS86C,MAAM96C,IAAKV,EAAG6C,GAC5BnC,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAClBnC,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAClBnC,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAClBnC,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAClB,OAAOnC,IAGF,SAASg3E,SAASh3E,IAAKV,EAAG6C,EAAGhD,GAClCa,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAAKhD,EAAE,GACzBa,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAAKhD,EAAE,GACzBa,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAAKhD,EAAE,GACzBa,IAAI,GAAKV,EAAE,GAAK6C,EAAE,GAAKhD,EAAE,GACzB,OAAOa,IAGF,SAASub,OAAOjc,EAAG6C,GACxB,OAAO7C,EAAE,KAAO6C,EAAE,IAAM7C,EAAE,KAAO6C,EAAE,IAAM7C,EAAE,KAAO6C,EAAE,IAAM7C,EAAE,KAAO6C,EAAE,GAGhE,SAASuqB,QAAQ1sB,IAAKV,EAAGmW,GAC9BzV,IAAI,GAAKV,EAAE,GAAKmW,EAChBzV,IAAI,GAAKV,EAAE,GAAKmW,EAChBzV,IAAI,GAAKV,EAAE,GAAKmW,EAChBzV,IAAI,GAAKV,EAAE,GAAKmW,EAChB,OAAOzV,IAGF,SAASsT,MAAMtT,IAAKV,EAAG6C,EAAGhD,EAAG0vE,GAClC7uE,IAAI,GAAKV,EACTU,IAAI,GAAKmC,EACTnC,IAAI,GAAKb,EACTa,IAAI,GAAK6uE,EACT,OAAO7uE,IAGF,SAASi3E,OAAOj3E,KACrBA,IAAI,GAAKA,IAAI,GAAKA,IAAI,GAAKA,IAAI,GAAK,EACpC,OAAOA,oFC5aTF,OAAAJ,QAAA,CAAAmoB,UAAA,EAAAyI,OAAA,IAAAE,OAAA,IAAAiE,OAAA,EAAAtE,SAAA,EAAAwnD,SAAA,EAAAlnD,WAAA,CAAA,CAAAtxB,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA8qB,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,EAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,EAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,EAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,EAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,EAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,EAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,EAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,EAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,EAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,GAAA8qB,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,MAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,OAAA2G,GAAA,EAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,GAAAC,EAAA,GAAA,CAAAhH,EAAA,OAAA2G,GAAA,GAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,+CCAArG,OAAAJ,QAAA,CAAAmoB,UAAA,GAAAyI,OAAA,KAAAE,OAAA,GAAAiE,OAAA,EAAAtE,SAAA,EAAAwnD,SAAA,EAAAlnD,WAAA,CAAA,CAAAtxB,EAAA,GAAA2G,GAAA,IAAAC,GAAA,GAAA8qB,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,GAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,MAAA,GAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,MAAA,GAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,EAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,GAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,EAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,GAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA8qB,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,MAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,OAAA2G,GAAA,GAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,OAAA2G,GAAA,GAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,EAAA3qB,EAAA,GAAAC,EAAA,gDCAArG,OAAAJ,QAAA,CAAAmoB,UAAA,GAAAyI,OAAA,KAAAE,OAAA,IAAAiE,OAAA,EAAAkjD,SAAA,EAAAlnD,WAAA,CAAA,CAAAtxB,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAAG,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA8qB,KAAA,QAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,EAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAA5qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAA5qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAA5qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAA5qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAA5qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAA5qB,EAAA,GAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,KAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,EAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,MAAA3qB,EAAA,GAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,MAAA3qB,EAAA,GAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,GAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,GAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,OAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,KAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,EAAAC,GAAA,EAAAG,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,EAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,MAAA3qB,EAAA,GAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,OAAA,EAAA5qB,EAAA,GAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA8qB,KAAA,QAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,KAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,KAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA8qB,KAAA,QAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,MAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,GAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAA5qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,EAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,SAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,MAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,KAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,SAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,OAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,OAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,OAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,OAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAAG,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,OAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,OAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,OAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,OAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,OAAA,EAAA5qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA8qB,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA8qB,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,OAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,EAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAAG,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,OAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,SAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA8qB,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,EAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,OAAA,EAAAD,KAAA,KAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,KAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAAG,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,MAAA,EAAA5qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,QAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,OAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAAG,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,EAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,GAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA8qB,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,EAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,OAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,EAAAC,GAAA,IAAA+qB,OAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,IAAA+qB,OAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,OAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,OAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,OAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,OAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA8qB,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,EAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,EAAAC,GAAA,GAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,OAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,OAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,EAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,OAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,GAAAC,GAAA,GAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,IAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,KAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,OAAA3qB,EAAA,EAAAC,EAAA,GAAA,CAAAhH,EAAA,KAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,KAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,KAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,KAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,KAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAAD,KAAA,QAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,KAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,GAAAD,KAAA,MAAA3qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,KAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,KAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,IAAA,CAAAhH,EAAA,MAAA2G,GAAA,IAAAC,GAAA,IAAA+qB,MAAA,EAAA5qB,EAAA,GAAAC,EAAA,qECkGgB/C,KAAAA,KAjGhB,IAAMw0E,mBAAqBx4E,QAAQ,2BACnCw4E,mBAAmBpiC,eAAiB,oBAEpC,IAAMppB,YAAchtB,QAAQ,oBAC5B,IAAMoa,UAAYpa,QAAQ,kBAC1B,IAAM0P,MAAQ1P,QAAQ,mBACtB,IAAMqc,eAAiBrc,QAAQ,uBAC/B,IAAMklE,aAAellE,QAAQ,qBAC7B,IAAMy4E,sBAAwBz4E,QAAQ,8BACtC,IAAMwb,gBAAkBxb,QAAQ,wBAChC,IAAMqO,QAAUrO,QAAQ,gBACxB,IAAM04E,aAAe14E,QAAQ,qBAC7B,IAAM+7C,cAAgB/7C,QAAQ,mCACsCA,QAAQ,mBAApEyyD,mBAAAA,UAAWE,mBAAAA,UAAWC,wBAAAA,eAAgBG,iBAAAA,QAASD,kBAAAA,uBACf9yD,QAAQ,mBAAxC+T,eAAAA,KAAME,eAAAA,KAAMoZ,kBAAAA,QAASnR,iBAAAA,OAE7BpY,OAAO4K,EAAI5K,OAAO4K,GAAK,GACvBA,EAAEiqE,WAAa,EACfjqE,EAAEkqE,QAAU,GACZlqE,EAAEmqE,UAAY,GACdnqE,EAAEoqE,QAAU,IAIL,IAAMv8D,WAAAjc,QAAAic,WAAa,IACnB,IAAMC,YAAAlc,QAAAkc,YAAc,IAEpB,IAAIjB,QAAAjb,QAAAib,QAAU,GAErB,IAAMw9D,WAAa,kBAGnB,IAAIC,MAAQ,GACZ,SAASC,QAAQvkE,IAAKwkE,MACpB,GAAIF,MAAMtkE,OAASxG,UAAW,CAC5B8qE,MAAMtkE,KAAO8jE,mBAAmBxqE,QAAnB,QAAmC0G,IAAOwkE,OAAS,MAElE,OAAOF,MAAMtkE,KAEf,SAASykE,WAAWzkE,KAClBskE,MAAMtkE,MAAQukE,QAAQvkE,KACtB8jE,mBAAmBvqE,QAAnB,QAAmCyG,IAAOskE,MAAMtkE,MAElD,SAAS0kE,QAAQ1kE,IAAK3E,OACpBipE,MAAMtkE,KAAO3E,MACbyoE,mBAAmBvqE,QAAnB,QAAmCyG,IAAOskE,MAAMtkE,MAGlD,IAAM+wC,YAAcxxC,KAAK,EAAG,EAAG,EAAG,GAElC,SAASolE,kBACP,IAAK99D,QAAQg7B,KAAM,CACjBh7B,QAAQg7B,KAAO,CAAC2uB,aAAavkE,OAAO,CAAEigB,KAAM,OAAQtO,KAAMyB,KAAK,EAAG,GAAIlP,OAAQkP,KAAK,GAAK,MAASmxD,aAAavkE,OAAO,CAAE+oB,IAAK,iBAAkBpX,KAAMyB,KAAK,EAAG,GAAIlP,OAAQkP,KAAK,GAAK,OAGpL,IAAI2mB,KAAO,EACX,IAAIJ,MAAQ,CAAC,IACb,IACA,IACA,IACA,KAAOI,MACP,GAAIA,OAAS,GAAKA,OAAS,EAAG,CAC5B,IAAK,IAAI5sB,GAAK,EAAGA,GAAKwsB,OAAQ,CAC5B,IAAIg/C,KAAO71E,KAAKoX,MAAM,IAAMpX,KAAKoO,SAAW,KAC5C,IAAIuN,IAAMsb,MAAQ,EAAI,EAAIj3B,KAAKmE,MAAMnE,KAAKoO,UAC1C,IAAI6lD,OAASn8C,QAAQg7B,KAAKn3B,KAC1B,IAAI3Q,EAAIhL,KAAKoO,SACb,IAAK,IAAIkZ,GAAK,EAAGA,GAAKuuD,OAAQvuD,GAAI,CAChC,GAAI2P,OAAS,EAAG,CAIdwqC,aAAa1O,YAAYkB,OAAQj0D,KAAKoO,SAAW0K,WAAY9Y,KAAKoO,SAAW2K,YAAa/N,EAAG,EAAIipD,OAAOplD,KAAK,GAAI,EAAIolD,OAAOplD,KAAK,GAAI,EAAGolD,OAAOC,IAAKlS,iBAC/I,CACLlqC,QAAQg7B,KAAKn3B,KAAKhI,KAAK,CACrB1N,EAAGjG,KAAKoO,SAAW0K,WACnB5S,EAAGlG,KAAKoO,SAAW2K,YACnB/N,EAAAA,EACA3H,EAAG,EAAGC,EAAG,KAIf+G,IAAMwrE,UAEH,CACL,IAAK,IAAIrwD,IAAK,EAAGA,IAAKqR,QAASrR,IAAI,CACjC,IAAIswD,KAAM7+C,MAAQ,EAAI,EAAIj3B,KAAKmE,MAAMnE,KAAKoO,UAC1C0J,QAAQg7B,KAAKgjC,MAAKniE,KAAK,CACrB1N,EAAGjG,KAAKoO,SAAW0K,WACnB5S,EAAGlG,KAAKoO,SAAW2K,YACnB/N,EAAGisB,OAAS,EAAIzR,IAAKxlB,KAAKoO,SAC1B/K,EAAG,EAAGC,EAAG,MAMV,SAAS/C,OACd,IAAKgpB,YAAYtlB,QAAQ,CACvB6U,WAAAA,WACAC,YAAAA,YACA4N,OAAQ6uD,QAAQ,SAAU,MAC1B9tD,qBAAsB,QACpB,CACF,OAMF9c,QAAQs2D,WAAW,GAAK,IACxBt2D,QAAQw2D,cAAc,GAEtB,IAAM2U,aAAetU,aAAavkE,OAClC,IAAM84E,gBAAkBhB,sBAAsB93E,OAE9C,IAAM+4E,UAAYzlE,KAAK,EAAG,EAAG,EAAG,GAChC,IAAM0lE,aAAe1lE,KAAK,EAAG,EAAG,EAAG,GAGnC,IAAMlD,KAAOrB,MAAMqB,KACnB,IAAMg4B,IAAMr5B,MAAMq5B,IAElB,IAAM6wC,YAAc,GACpB,SAASC,eACPx9D,eAAeg/B,oBAAoBU,eAEnC0W,UAAU,QAEVl3C,QAAQ+sD,MAAQkR,aAAa,CAAE9vD,IAAK,UAEpCnO,QAAQu+D,UAAYN,aAAa,CAC/B54D,KAAM,SACN65C,GAAI,CAAC,GAAI,GAAI,GAAI,IACjBC,GAAI,CAAC,GAAI,GAAI,IACbpoD,KAAMyB,KAAK6lE,YAAaA,aACxBxe,OAAQ,EACRv2D,OAAQkP,KAAK,GAAK,MAEpBwH,QAAQw+D,UAAYN,gBAAgB,CAClCO,UAAW,CACThkB,OAAQ,CAAC,EAAG,GACZC,MAAO,CAAC,IAAK,MAEfgkB,WAAY,CACVjkB,OAAQ,CAAC,EAAG,GACZC,MAAO,CAAC,IAAK,QAGjB16C,QAAQw+D,UAAUzgE,SAAS,aAE3BiC,QAAQ2+D,QAAUV,aAAa,CAC7B9vD,IAAK,QACLpX,KAAMyB,KAAKwI,WAAYC,eAI3B,IAAI29D,eAAiB,EAErB,SAAS5jC,KAAK1uB,IACZ,IAAK0uB,KAAK6jC,aAAc,CACtB7jC,KAAK6jC,aAAe/sD,QAAQo4B,aAC5BlP,KAAK8jC,UAAY,CACf3wE,EAAGjG,KAAKoO,UAAY0K,WAAaq9D,YAAc,KAAOA,YAAc,GAAM,IAC1EjwE,EAAGlG,KAAKoO,UAAY2K,YAAco9D,aAAeA,YAAc,IAInE,GAAIX,QAAQ,WAAY,CAGtBP,aAAa/mB,IAAI,GAAI,GAAIjjD,EAAEoqE,SAE7B,GAAIG,QAAQ,aAAc,CACxBP,aAAa/H,YAAY,IAAK,IAGhCp6B,KAAK8jC,UAAUxiB,GAAK,EACpBthB,KAAK8jC,UAAUxiB,IAAMnoD,MAAM81B,QAAQz0B,KAAKo3B,MAAQz4B,MAAM81B,QAAQz0B,KAAKi4B,GAAKt5B,MAAMi2B,cAAcoD,IAAIZ,MAChGoO,KAAK8jC,UAAUxiB,IAAMnoD,MAAM81B,QAAQz0B,KAAKq3B,OAAS14B,MAAM81B,QAAQz0B,KAAKuhD,GAAK5iD,MAAMi2B,cAAcoD,IAAIX,OACjGmO,KAAK8jC,UAAUviB,GAAK,EACpBvhB,KAAK8jC,UAAUviB,IAAMpoD,MAAM81B,QAAQz0B,KAAKg2B,IAAMr3B,MAAM81B,QAAQz0B,KAAKg4C,GAAKr5C,MAAMi2B,cAAcoD,IAAIhC,IAC9FwP,KAAK8jC,UAAUviB,IAAMpoD,MAAM81B,QAAQz0B,KAAKi2B,MAAQt3B,MAAM81B,QAAQz0B,KAAK+3C,GAAKp5C,MAAMi2B,cAAcoD,IAAI/B,MAChG,GAAIuP,KAAK8jC,UAAUxiB,GAAK,EAAG,CACzBt8C,QAAQw+D,UAAUzgE,SAAS,kBACtB,GAAIi9B,KAAK8jC,UAAUxiB,GAAK,EAAG,CAChCt8C,QAAQw+D,UAAUzgE,SAAS,cAG7Bi9B,KAAK8jC,UAAU3wE,GAAK6sC,KAAK8jC,UAAUxiB,GAAK,IACxCthB,KAAK8jC,UAAU1wE,GAAK4sC,KAAK8jC,UAAUviB,GAAK,IACxC,IAAIwiB,OAAS,CACX5wE,EAAG6sC,KAAK8jC,UAAU3wE,EAAIkwE,YAAc,EACpCjwE,EAAG4sC,KAAK8jC,UAAU1wE,EAAIiwE,YAAc,EACpC9yE,EAAG8yE,YACH7yE,EAAG6yE,aAEL,GAAIlqE,MAAM01B,aAAe11B,MAAMy1B,UAAUm1C,QAAS,CAChDp+D,OAAOq6B,KAAK6jC,aAAcT,mBACrB,GAAIjqE,MAAMgD,MAAM4nE,QAAS,CAC9Bp+D,OAAOq6B,KAAK6jC,aAAc7jC,KAAK6jC,aAAa,KAAO,EAAI30B,YAAci0B,WACrE/mB,UAAU,aACL,GAAIjjD,MAAMy1B,UAAUm1C,QAAS,CAClCp+D,OAAOq6B,KAAK6jC,aAAc30B,aAC1BlP,KAAK6jC,aAAa,GAAK,OAClB,CACLl+D,OAAOq6B,KAAK6jC,aAAc30B,aAC1BlP,KAAK6jC,aAAa,GAAK,EAGzB7+D,QAAQ2+D,QAAQ9iE,KAAK,CACnB1N,EAAG,EAAGC,EAAG,EAAG8E,EAAGC,EAAEiqE,WACjB1pD,MAAO,CAAC,EAAG,IAAM,EAAG,KAEtB1T,QAAQu+D,UAAUte,aAAa,CAC7B9xD,EAAG6sC,KAAK8jC,UAAU3wE,EAClBC,EAAG4sC,KAAK8jC,UAAU1wE,EAClB8E,EAAGC,EAAEkqE,QACL3pD,MAAO,CAAC,EAAG,EAAG,EAAG,GACjBwsC,OAAQ,CAAC,EAAG,EAAG,EAAG,GAClBhmB,MAAOl6B,QAAQw+D,UAAUzjB,SAASzuC,MAGpC,IAAI0yD,cAAgB,EAEpBlsE,QAAQk9C,MAAMnxC,UAAU+S,aAAa,KAAM,KAAaopB,KAAK8jC,UAAU3wE,EAAG6sC,KAAK8jC,UAAU1wE,KAAM4wE,cAAgB,GAAI7rE,EAAEkqE,QAAS,SAC9H,IAAIppD,WAAapV,UAAU/H,MAAM,KAAM,CACrCqc,cAAe,EACfC,cAAe,WACfC,WAAY,KACZC,WAAY,KACZC,YAAa,IACbC,WAAY,EACZC,WAAY,MAEd3gB,QAAQk9C,MAAM/7B,WAAY+mB,KAAK8jC,UAAU3wE,EAAG6sC,KAAK8jC,UAAU1wE,KAAM4wE,cAAgBlsE,QAAQS,YAAaJ,EAAEkqE,QAAS,2BAEjH,IAAIlvE,EAAI2E,QAAQ04C,cAChB,IAAIyzB,eAAiBnsE,QAAQ04C,cAAgB,EAC7C,IAAIp9C,EAAI6S,YAAc,GAAKg+D,eAAiB,EAC5C,GAAInsE,QAAQ0jD,WAAW,CAAEroD,EAAAA,EAAGC,EAAAA,EAAGoF,KAAA,YAAiBkqE,QAAQ,WAAa,OACnE7P,QAAS,qDAAuD,CAChE,GAAI6P,QAAQ,YAAc,SAAU,CAClCG,QAAQ,SAAU,YACb,GAAIH,QAAQ,YAAc,KAAM,CACrCG,QAAQ,SAAU,cACb,CACLA,QAAQ,SAAU,MAEpB,GAAIl1E,SAASY,SAASkY,OAAQ,CAC5B9Y,SAASY,SAASkY,aACb,CACL9Y,SAASY,SAAW8I,OAAO1J,SAASY,WAGxC6E,GAAK6wE,eAEL,GAAInsE,QAAQ0jD,WAAW,CAAEroD,EAAAA,EAAGC,EAAAA,EAAGoF,KAAA,WAAgBkqE,QAAQ,SAAW,KAAO,OACvE7P,QAAS,qDAAuD,CAChE+P,WAAW,SACX,GAAIF,QAAQ,SAAU,CACpBrmB,eAAemmB,WAAY,EAAGhmB,aACzB,CACLH,eAAemmB,WAAY,EAAGjmB,WAGlCnpD,GAAK6wE,eAEL,GAAInsE,QAAQ0jD,WAAW,CAAEroD,EAAAA,EAAGC,EAAAA,EAAGoF,KAAA,eAAoBkqE,QAAQ,aAAe,KAAO,OAC/E7P,QAAS,6CAA+C,CACxD+P,WAAW,aACX39D,gBAAgBmlD,MAAMjyD,EAAEozD,iBAAkBtmD,gBAAgBulD,oBAE5Dp3D,GAAK6wE,eAEL,GAAInsE,QAAQ0jD,WAAW,CAAEroD,EAAAA,EAAGC,EAAAA,EAAGoF,KAAA,aAAkBkqE,QAAQ,WAAa,KAAO,OAC3E7P,QAAS,2CAA6C,CACtD+P,WAAW,WAEbxvE,GAAK6wE,eAEL,GAAInsE,QAAQ0jD,WAAW,CAAEroD,EAAAA,EAAGC,EAAAA,EAAGoF,KAAA,eAAoBkqE,QAAQ,YAAa,MAAQ,KAAO,OACrF7P,QAAS,sBAAwB,CACjC+P,WAAW,aAEb,GAAIF,QAAQ,aAAc,CACxB,GAAIjsD,YAAY9T,oBAAsBihE,eAAiB,IAAM,CAC3DA,eAAiBntD,YAAY9T,oBAC7B8T,YAAY3Q,eAAeo+D,aAAa1+B,cAAcC,KAAK0+B,UAE3D,CAAC,IAAMj3E,KAAKoO,SAAW,IAAK,IAAMpO,KAAKoO,SAAW,IAAKnD,EAAEmqE,aAI7D,GAAII,QAAQ,aAAc,CACxBI,mBAiBJ,SAASsB,SAAS9yD,IAChBmF,YAAY1T,SAASi9B,MACrB,GAAI0iC,QAAQ,SAAU,CACpBrmB,eAAemmB,YAEjBxiC,KAAK1uB,IAGPgyD,eACA7sD,YAAY1T,SAASqhE,kXClUhB,IAAI3+B,KAAA17C,QAAA07C,KAAO,GAElBA,KAAK0+B,UAAY,CACfx+B,UAAW,CACT0+B,MAAO,CACLl+B,MAAO,QACPtwB,QAAS,qBACT6C,MAAO,CAAC,EAAG,EAAG,EAAG,GACjB0tB,YAAa,CAEb,CAAEh9C,EAAG,EAAK4L,EAAG,CAAC,EAAG,EAAG,EAAG,IAAM,CAAE5L,EAAG,GAAK4L,EAAG,CAAC,EAAG,EAAG,EAAG,IAAM,CAAE5L,EAAG,GAAK4L,EAAG,CAAC,EAAG,EAAG,GAAK,KAAQ,CAAE5L,EAAG,EAAK4L,EAAG,CAAC,EAAG,EAAG,EAAG,KAClH+G,KAAM,CAAC,CAAC,GAAI,GAAI,CAAC,GAAI,IACrBsqC,WAAY,CAEZ,CAAEj9C,EAAG,EAAK4L,EAAG,CAAC,EAAG,IAAM,CAAE5L,EAAG,GAAK4L,EAAG,CAAC,EAAG,IAAM,CAAE5L,EAAG,GAAK4L,EAAG,CAAC,EAAG,IAAM,CAAE5L,EAAG,EAAK4L,EAAG,CAAC,IAAK,OACxFsxC,MAAO,CAAC,EAAG,EAAG,GACdC,IAAK,CAAC,EAAG,KACTC,QAAS,CAAC,GAAI,GACdC,SAAU,CAAC,KAAM,GACjBC,gBAAiB,IAGrBc,SAAU,CACR68B,MAAO,CACLp9B,SAAU,QAEVprC,IAAK,CAAC,EAAE,GAAI,IAAK,EAAE,GAAI,IAAK,GAC5BqrC,IAAK,CAAC,EAAG,EAAG,GACZC,UAAW,CAAC,GAAI,GAEhBC,UAAW,CAAC,EAAG,KACfC,aAAc,GACdi9B,UAAWpnC,WAGfqK,gBAAiB,6DChCnB,SAASyqB,GAAGuS,IAAKr2E,KACf,GAAIq2E,IAAK,CACP,OAEF,MAAM,IAAI36E,MAAJ,sBAA+BsE,IAAMA,IAAMq2E,MAAQ5sE,UAAY,GAAK8xB,KAAKwW,UAAUskC,OAE3Fp6E,OAAOJ,QAAUioE,GACjB7nE,OAAOJ,QAAQioE,GAAKA,GAEpB,SAAStmD,MAAM/hB,EAAG6C,GAChB,GAAI7C,IAAM6C,EAAG,CACX,OAEF,MAAM,IAAI5C,MAAJ,sBAAgCD,EAAhC,QAAyC6C,EAAzC,KAERrC,OAAOJ,QAAQ2hB,MAAQA,6DCbvBvhB,OAAOJ,QAAU,2SCUDyK,eAAAA,uBAqOApK,OAAAA,OAjPhB,IAAMsZ,OAASja,QAAQ,uBACDA,QAAQ,aAAtB+6E,mBAAAA,UAER,SAAS3tE,UAAUxC,KACjB,OAAOA,IAAI0C,cAAcpI,QAAQ,QAAS,IAGrC,IAAMmmC,SAAA/qC,QAAA+qC,SAAW,EACjB,IAAMngC,WAAA5K,QAAA4K,WAAa,EACnB,IAAMuC,YAAAnN,QAAAmN,YAAc,EAC3B,IAAMutE,UAAY,CAAC,UAAW,SAAU,UAEjC,SAASjwE,eAAe6iD,IAAKqtB,MAClC,GAAIrtB,IAAK,CACP3mC,QAAQiB,MAAM0lC,IAAKqtB,UACd,CACLh0D,QAAQkF,KAAK8uD,OAIjB,SAASC,YAAYhuE,OAAQH,MAC3B,GAAIA,KAAM,CACR,IAAK,IAAIe,GAAK,EAAGA,GAAKf,KAAKvM,SAAUsN,GAAI,CACvC,IAAKZ,SAAWA,OAAOH,KAAKe,KAAM,CAChC,OAAO,QAIb,OAAO,KAGT,SAASqtE,SAAS3sE,QAChBvB,KAAKiN,KAAO,GACZjN,KAAKmuE,kBAAoBnuE,KAAKiN,KAC9BjN,KAAKouE,cAAgB,MACrBpuE,KAAKxC,QAAU+D,QAAUA,OAAO/D,QAChCwC,KAAKquE,gBAAkBvwE,eACvBkC,KAAKpB,SAAS,CACZjB,IAAK,WACLmB,KAAMkB,KAAKsuE,QAAQtkE,KAAKhK,MACxBuuE,YAAa,CAAC,YAGlBL,SAASpoE,UAAUwoE,QAAU,SAAU1wE,IAAKmB,WAC1C,IAAKiB,KAAKwuE,SAAU,CAClB,IAAI1uE,KAAOE,KAAKwuE,SAAW,GAC3B,IAAK,IAAI7wE,OAAOqC,KAAKiN,KAAM,CACzB,IAAIpN,SAAWG,KAAKiN,KAAKtP,KACzB,IAAIsC,OAAS,GACb,GAAIJ,SAAS0uE,YAAa,CACxBtuE,OAASA,OAAOoqB,OAAOxqB,SAAS0uE,aAElC,GAAI1uE,SAAS4uE,WAAY,CACvBxuE,OAASA,OAAOoqB,OAAOxqB,SAAS4uE,YAElC,GAAIxuE,OAAOtI,QAAQ,aAAe,EAAG,CACnC,SAEF,IAAIkD,KAAO,CACT8Y,KAAM9T,SAAS8T,KACf9U,KAAMgB,SAAShB,MAEjB,GAAIgB,SAASY,MAAO,CAClB5F,KAAK4F,MAAQZ,SAASY,MAExB,GAAIR,OAAO1M,OAAQ,CACjBsH,KAAK0zE,YAActuE,OAErBH,KAAKnC,KAAO9C,MAGhBkE,UAAU,KAAMiB,KAAKwuE,WAGvBN,SAASpoE,UAAU4oE,kBAAoB,SAAU35D,IAC/C/H,OAAOhN,KAAKquE,kBAAoBvwE,gBAChCkC,KAAKquE,gBAAkBt5D,IAEzBm5D,SAASpoE,UAAUjI,OAAS,SAAUm0B,KAAMp0B,IAAKmB,WAC/CA,UAAYA,WAAaiB,KAAKquE,gBAC9BruE,KAAKouE,cAAgB,MACrB,IAAIl8D,EAAItU,IAAIgU,MAAM,0BAClB,IAAKM,EAAG,CACNnT,UAAU,mBACV,OAAO,KAET,IAAIpB,IAAMwC,UAAU+R,EAAE,IACtB,IAAIrS,SAAWG,KAAKiN,KAAKtP,KACzB,GAAIkC,WAAaouE,YAAYj8C,MAAQA,KAAK/xB,OAAQJ,SAAS4uE,YAAa,CAEtE1vE,UAAA,mBAA6BmT,EAAE,GAA/B,KACA,OAAO,MAET,IAAKrS,SAAU,CACbG,KAAKouE,cAAgB,KACrBrvE,UAAA,qBAA+BmT,EAAE,GAAjC,KACA,OAAO,MAETrS,SAASkV,GAAGzhB,KAAK0+B,KAAM9f,EAAE,IAAM,GAAInT,WACnC,OAAO,MAGTmvE,SAASpoE,UAAUlH,SAAW,SAAU2kB,OACtCvW,OAAOgI,aAAauO,QAApB,YAAA,YAAAtO,QAAoBsO,OAAO,UADkB,IAEvC5lB,IAAoD4lB,MAApD5lB,IAAKmB,KAA+CykB,MAA/CzkB,KAAMD,KAAyC0kB,MAAzC1kB,KAAM4B,MAAmC8iB,MAAnC9iB,MAAO8tE,YAA4BhrD,MAA5BgrD,YAAaE,WAAelrD,MAAfkrD,WAC3CzhE,OAAOrP,KAAOmB,MACdkB,KAAKiN,KAAK9M,UAAUxC,MAAQ,CAC1BgW,KAAMhW,IACNoX,GAAIjW,KACJD,KAAMA,MAAQ,GACd4B,MAAOA,OAASQ,UAChBstE,YAAAA,YACAE,WAAAA,aAIJP,SAASpoE,UAAU/H,cAAgB,SAAUJ,IAAK4lB,OAAO,IAAApf,MAAAnE,KACvDgN,OAAO+gE,UAAUxqD,MAAMvlB,QAAUulB,MAAM/qB,KACvCwU,OAAOuW,MAAM/qB,KAAO+qB,MAAMnlB,KAC1B,IAAIF,MAAQqlB,MAAMrlB,OAASP,IAC3B,IAAIa,MAAQ+kB,MAAM/kB,OAASwB,KAAKxC,SAAW,MAC3C,IAAImxE,UAAA,aAAyBxuE,UAAUxC,KACvC,GAAI4lB,MAAMs7B,IAAK,CACb8vB,WAAA,IAAiBprD,MAAMs7B,IAEzB,GAAIrgD,MAAO,CACTwO,OAAOuW,MAAM/qB,KACb,IAAIo2E,WAAa5uE,KAAKxC,QAAQuD,QAAQ4tE,WACtC,GAAIC,aAAe3tE,UAAW,CAC5BsiB,MAAM/qB,IAAIo2E,aAGd,IAAI75D,GAAK,SAALA,GAAMnX,IAAKmB,WACb,SAAS+D,QACP/D,UAAU,KAASb,MAAnB,MAA8BqlB,MAAMnlB,OAEtC,SAASqC,QACP1B,UAAA,WAAqBpB,IAArB,IAA4BowE,UAAUxqD,MAAMvlB,OAE9C,IAAKJ,IAAK,CACR,GAAI2lB,MAAMnlB,IAAK,CACb,OAAO0E,YACF,CACL,OAAOrC,SAGX,IAAK8iB,MAAM/qB,IAAK,CACd,OAAOuG,UAAA,WAAqBpB,KAE9B,IAAIlL,EAAImO,OAAOhD,KACf,GAAI2lB,MAAMplB,MAAO,CACf,GAAI1L,EAAI8wB,MAAMplB,MAAM,GAAI,CACtB1L,EAAI8wB,MAAMplB,MAAM,QACX,GAAI1L,EAAI8wB,MAAMplB,MAAM,GAAI,CAC7B1L,EAAI8wB,MAAMplB,MAAM,IAGpB,IAAI0wE,YAAcp8E,EAClB,GAAI8wB,MAAMvlB,OAASogC,SAAU,CAC3B,IAAK0vC,UAAUr7E,GAAI,CACjB,OAAOgO,QAET8iB,MAAM/qB,IAAI/F,QACL,GAAI8wB,MAAMvlB,OAASC,WAAY,CACpC,IAAK2pB,SAASn1B,GAAI,CAChB,OAAOgO,QAET8iB,MAAM/qB,IAAI/F,OACL,CACLo8E,YAAcjxE,IACd2lB,MAAM/qB,IAAIoF,KAEZ,GAAIY,MAAO,CACT2F,MAAK3G,QAAQwD,QAAQ2tE,UAAWE,aAElC,GAAItrD,MAAMnlB,IAAK,CACb,OAAO0E,YACF,CACL,OAAO/D,UAAU,KAASb,MAAnB,cAGX8B,KAAKpB,SAAS,CACZjB,IAAAA,IACAmB,KAAMiW,GACNlW,KAAM0kB,MAAM1kB,OAAS0kB,MAAMnlB,KAAOmlB,MAAM/qB,IAAnB,mBAA4C0F,MAA5C,UAA6DqlB,MAAM/qB,IAAN,QAAoB0F,MAApB,UAAA,YAAiDA,MAAjD,WAClFuC,MAAO8iB,MAAM9iB,QAAU8iB,MAAMnlB,IAAN,YAAwBF,MAAxB,sBAAmDP,IAAnD,KAA6D,KAAO4lB,MAAM/qB,IAAN,QAAoB0F,MAApB,sBAA+CP,IAA/C,YAAgE,IAC3J4wE,YAAahrD,MAAMgrD,YACnBE,WAAYlrD,MAAMkrD,cAItB,SAASK,OAAO77E,EAAG6C,GACjB,GAAI7C,EAAEqN,MAAQxK,EAAEwK,MAAO,CACrB,OAAQ,EAEV,OAAO,EAIT4tE,SAASpoE,UAAUipE,kBAAoB,SAAUC,UAC/C,IAAI/hE,KAAOjN,KAAKmuE,kBAChB,GAAInuE,KAAKmuE,oBAAsBnuE,KAAKiN,KAAM,CACxCA,KAAOjN,KAAKmuE,kBAAoB,GAChC,IAAK,IAAI7tE,SAASN,KAAKiN,KAAM,CAC3BA,KAAK3M,OAASN,KAAKiN,KAAK3M,QAG5B,IAAK,IAAI2uE,UAASD,SAAU,CAC1B,IAAK/hE,KAAKgiE,QAAQ,CAChBhiE,KAAKgiE,QAASD,SAASC,WAK7Bf,SAASpoE,UAAU/F,aAAe,SAAUnC,IAAKqC,QAC/C,IAAIH,KAAO,GACXlC,IAAMA,IAAI7F,MAAM,KAChB,IAAIm3E,UAAY/uE,UAAUvC,IAAI,IAC9B,IAAK,IAAI0C,SAASN,KAAKmuE,kBAAmB,CACxC,GAAIvwE,IAAIrK,SAAW,GAAK+M,MAAMxI,MAAM,EAAGo3E,UAAU37E,UAAY27E,WAAatxE,IAAIrK,OAAS,GAAK+M,QAAU4uE,UAAW,CAC/G,IAAIrvE,SAAWG,KAAKmuE,kBAAkB7tE,OACtC,GAAI2tE,YAAYhuE,OAAQJ,SAAS0uE,cAAgBN,YAAYhuE,OAAQJ,SAAS4uE,YAAa,CACzF3uE,KAAKnH,KAAK,CACR2H,MAAAA,MACA3C,IAAKkC,SAAS8T,KACd9U,KAAMgB,SAAShB,KACf4B,MAAOZ,SAASY,UAKxBX,KAAKV,KAAK0vE,QACV,OAAOhvE,MAGTouE,SAASpoE,UAAU3F,UAAYA,UAE/B+tE,SAASpoE,UAAUs4B,SAAWA,SAC9B8vC,SAASpoE,UAAU7H,WAAaA,WAChCiwE,SAASpoE,UAAUtF,YAAcA,YAE1B,SAAS9M,OAAO6N,QACrB,OAAO,IAAI2sE,SAAS3sE,gGC/ON4tE,IAAAA,YAIAC,MAAAA,cAOAC,UAAAA,kBAKAC,OAAAA,eAIAvb,QAAAA,gBAIA7K,MAAAA,cAIA7R,MAAAA,cAOAk4B,IAAAA,YAIA7gE,SAAAA,iBASA0oC,aAAAA,qBAIA3oC,MAAAA,cAIAypD,KAAAA,aAIAsX,IAAAA,YAKAC,KAAAA,aAKAC,KAAAA,aASA9gE,KAAAA,aAKA+gE,SAAAA,iBAIAC,UAAAA,kBAIAC,MAAAA,cAIAlhE,SAAAA,iBAIAgwC,UAAAA,kBAOAmxB,oBAAAA,4BAsBAC,SAAAA,iBAeA3gB,aAAAA,qBAIA1F,sBAAAA,8BASAsmB,QAAAA,gBAWAlC,UAAAA,kBAIAmC,SAAAA,iBAIAC,UAAAA,kBAQAC,QAAAA,gBAIAnxB,SAAAA,SA/LhB,IAAMhyC,OAASja,QAAQ,cACfsmC,IAAmD7iC,KAAnD6iC,IAAKzrB,MAA8CpX,KAA9CoX,MAAOC,IAAuCrX,KAAvCqX,IAAKC,IAAkCtX,KAAlCsX,IAAKlJ,OAA6BpO,KAA7BoO,OAAQjK,MAAqBnE,KAArBmE,MAAOs5D,IAAcz9D,KAAdy9D,IAAKlmD,KAASvX,KAATuX,KAE3C,SAASohE,OAIT,SAASC,MAAM1nE,KACpB,IAAK,IAAID,OAAOC,IAAK,CACnB,OAAO,MAET,OAAO,KAGF,SAAS2nE,UAAU/wE,EAAGrL,GAC3B,IAAIm9E,GAAKnc,IAAI31D,EAAGrL,GAChB,OAAOm9E,IAAMA,GAAKnc,IAAI,EAAI31D,EAAGrL,IAGxB,SAASq8E,OAAOhxE,EAAGrL,GACxB,OAAO,EAAIo8E,UAAU,GAAM/wE,EAAGrL,GAGzB,SAAS8gE,QAAQz1D,EAAGrL,GACzB,OAAO,EAAIo8E,UAAU,GAAM,GAAM/wE,EAAGrL,GAAK,EAGpC,SAASi2D,MAAMxhD,KACpB,OAAOqrB,KAAKC,MAAMD,KAAKwW,UAAU7hC,MAG5B,SAAS2vC,MAAMg5B,KAAM50E,KAC1B,IAAK,IAAI5I,KAAK4I,IAAK,CACjB40E,KAAKx9E,GAAK4I,IAAI5I,GAEhB,OAAOw9E,KAGF,SAASd,IAAI7nE,IAAKmuB,OACvB,OAAO52B,OAAO6G,UAAUwqE,eAAeh9E,KAAKoU,IAAKmuB,OAG5C,SAASnnB,SAAS2hE,KAAM50E,KAC7B,IAAK,IAAI5I,KAAK4I,IAAK,CACjB,IAAK8zE,IAAIc,KAAMx9E,GAAI,CACjBw9E,KAAKx9E,GAAK4I,IAAI5I,IAGlB,OAAOw9E,KAGF,SAASj5B,aAAa37C,KAC3B,OAAO47C,MAAM,GAAI57C,KAGZ,SAASgT,MAAMnQ,EAAGiyE,GAAI7O,IAC3B,OAAO7zD,IAAIC,IAAIyiE,GAAIjyE,GAAIojE,IAGlB,SAASxJ,KAAKjlE,EAAGq2B,GAAIC,IAC1B,OAAQ,EAAIt2B,GAAKq2B,GAAKr2B,EAAIs2B,GAGrB,SAASimD,IAAIlmD,GAAIC,GAAIt2B,GAE1B,OAAQ,EAAIA,GAAKq2B,GAAKr2B,EAAIs2B,GAGrB,SAASkmD,KAAKx8E,GACnB,OAAOA,EAAI,GAAK,EAAIA,EAAI,EAAI,EAAI,EAI3B,SAASy8E,KAAKlQ,KACnB,IAAK,IAAI3+D,GAAK,EAAGid,GAAK,GAAIjd,KAAO,IAAKid,GAAI,CAExC,GAAIjd,IAAM2+D,IAAK,CACb,OAAO1hD,KAKN,SAASlP,KAAKwd,IAAKja,KACxBia,IAAIja,KAAOia,IAAIA,IAAI74B,OAAS,GAC5B64B,IAAIxzB,MAGC,SAAS+2E,SAAS18E,GACvB,OAAO0H,MAAM1H,EAAI,KAAO,IAGnB,SAAS28E,UAAU38E,GACxB,OAAO0H,MAAM1H,EAAI,KAAQ,IAGpB,SAAS48E,MAAM58E,GACpB,OAAOA,EAAI2a,MAAM3a,GAGZ,SAAS0b,SAAS1b,EAAG6C,EAAG06E,KAC7B,OAAOn3C,IAAIvjC,EAAI7C,IAAMu9E,IAGhB,SAAS7xB,UAAU/gD,KACxB,OAAOA,IAAI7F,MAAM,KAAKsH,IAAI,SAAAgnB,MAAA,MAAA,GAAWA,KAAK,GAAG5mB,cAAgB4mB,KAAKvuB,MAAM,KAAME,KAAK,KAGrF,IAAMy4E,QAAU,KAGT,SAASX,oBAAoBY,GAAIC,GAAIC,QAASC,QACnD,IAAIC,GAAK,CAACH,GAAG,GAAKD,GAAG,GAAIC,GAAG,GAAKD,GAAG,IACpC,IAAIz9E,EAAI69E,GAAG,GAAKA,GAAG,GAAKA,GAAG,GAAKA,GAAG,GACnC,IAAIh7E,EAAI,GAAKg7E,GAAG,IAAMJ,GAAG,GAAKE,QAAQ,IAAME,GAAG,IAAMJ,GAAG,GAAKE,QAAQ,KACrE,IAAI99E,EAAI89E,QAAQ,GAAKA,QAAQ,GAAKA,QAAQ,GAAKA,QAAQ,GACvD99E,GAAK49E,GAAG,GAAKA,GAAG,GAAKA,GAAG,GAAKA,GAAG,GAChC59E,GAAK,GAAK89E,QAAQ,GAAKF,GAAG,GAAKE,QAAQ,GAAKF,GAAG,IAC/C59E,GAAK+9E,OAASA,OACd,IAAIE,MAAQj7E,EAAIA,EAAI,EAAI7C,EAAIH,EAC5B,GAAIumC,IAAIpmC,GAAKw9E,SAAWM,MAAQ,EAAG,CACjC,OAAO,MAGT,IAAIC,MAAQl7E,EAAIiY,KAAKgjE,SAAW,EAAI99E,GACpC,IAAIg+E,MAAQn7E,EAAIiY,KAAKgjE,SAAW,EAAI99E,GACpC,GAAI+9E,KAAO,GAAKA,KAAO,GAAKC,KAAO,GAAKA,KAAO,EAAG,CAChD,OAAO,KAGT,OAAO,MAGF,SAASlB,SAASmB,KAAMC,WAE7BnkE,cAAcmkE,YAAc,YAG5BD,KAAKprE,UAAY7G,OAAOvL,OAAOy9E,UAAUrrE,UAAW,CAClDsrE,YAAa,CACXtuE,MAAOouE,KACP92D,WAAY,MACZi3D,SAAU,KACVC,aAAc,QAKb,SAASliB,aAAa38D,GAC3B,OAAQA,EAAIA,EAAI,KAAO,EAGlB,SAASi3D,sBAAsBjtD,KAClCA,EACF,IAAK,IAAI7J,EAAI,EAAGA,EAAI,GAAIA,IAAM,EAAG,CAE/B6J,GAAKA,GAAK7J,EAEZ,OAAO6J,EAAI,EAGN,SAASuzE,QAAQn1E,MACtB,GAAIA,OAASoG,UAAW,CACtB,MAAO,GAET,IAAI1O,EAAIwgC,KAAKwW,UAAU1uC,MACvB,GAAItI,EAAEgB,OAAS,IAAK,CAClB,OAAOhB,EAET,OAAUA,EAAEuF,MAAM,EAAG,IAAM,GAA3B,MAGK,SAASg2E,UAAUxvE,GACxB,cAAcA,IAAM,UAAYspB,SAAStpB,IAAMsP,MAAMtP,KAAOA,EAGvD,SAAS2xE,SAAS3xE,GACvB,OAAOsC,OAAOtC,GAGT,SAAS4xE,UAAUqB,UAAWC,WACnC,IAAIxK,eAAA,EACJ,EAAG,CACDA,UAAYp5D,MAAMhJ,SAAW4sE,iBACtBxK,YAAcuK,WACvB,OAAOvK,UAGF,SAASmJ,QAAQsB,YACtB,OAAOv3D,MAAMpU,UAAUhO,MAAMxE,KAAKm+E,YAG7B,SAASzyB,SAASphD,IAAK8zE,IAC5B,IAAIjvD,IAAM,GACV,IAAIvQ,OAAA,EACJ,EAAG,CACDA,EAAIw/D,GAAGC,KAAK/zE,KACZ,GAAIsU,EAAG,CACLuQ,IAAI9pB,KAAKuZ,EAAE,WAENA,GACT,OAAOuQ,wFCtLR,WAEC,aASA,IAAImvD,aAAe,SAAfA,eACF5xE,KAAKqkE,QAEPuN,aAAa9rE,UAAY,CAKvBu+D,KAAM,SAAAA,OACJ,IAAIryC,KAAOhyB,MAAQimD,OAGnBj0B,KAAK6/C,SAAW,IAGhB7/C,KAAK8/C,gBAAkB,GACvB9/C,KAAK+/C,cAAgB,GAGrB//C,KAAKggD,QAAU,GACfhgD,KAAKigD,OAAS,GACdjgD,KAAKkgD,OAAS,MACdlgD,KAAKmgD,QAAU,EACfngD,KAAKogD,cAAgB,iBACrBpgD,KAAKqgD,kBAAqBx7E,SAAW,aAAeA,OAAO4a,UAAa5a,OAAO4a,UAAY,KAG3FugB,KAAKsgD,WAAa,KAClBtgD,KAAK41B,QAAU,MACf51B,KAAKugD,cAAgB,KACrBvgD,KAAKwgD,YAAc,KACnBxgD,KAAK6/B,IAAM,KACX7/B,KAAK61B,WAAa,MAGlB71B,KAAKygD,WAAa,KAGlBzgD,KAAK0gD,SAEL,OAAO1gD,MAQT40B,OAAQ,SAAAA,OAAS+rB,KACf,IAAI3gD,KAAOhyB,MAAQimD,OACnB0sB,IAAMC,WAAWD,KAGjB,IAAK3gD,KAAK6/B,IAAK,CACbghB,oBAGF,UAAWF,MAAQ,aAAeA,KAAO,GAAKA,KAAO,EAAG,CACtD3gD,KAAKmgD,QAAUQ,IAGf,GAAI3gD,KAAKkgD,OAAQ,CACf,OAAOlgD,KAIT,GAAIA,KAAKugD,cAAe,CACtBvgD,KAAKsgD,WAAWQ,KAAKC,eAAeJ,IAAK1sB,OAAO4L,IAAImhB,aAItD,IAAK,IAAIpgF,EAAE,EAAGA,EAAEo/B,KAAKigD,OAAO1+E,OAAQX,IAAK,CACvC,IAAKo/B,KAAKigD,OAAOr/E,GAAGqgF,UAAW,CAE7B,IAAIC,IAAMlhD,KAAKigD,OAAOr/E,GAAGugF,eAGzB,IAAK,IAAI5Q,EAAE,EAAGA,EAAE2Q,IAAI3/E,OAAQgvE,IAAK,CAC/B,IAAInjD,MAAQ4S,KAAKigD,OAAOr/E,GAAGwgF,WAAWF,IAAI3Q,IAE1C,GAAInjD,OAASA,MAAMi0D,MAAO,CACxBj0D,MAAMi0D,MAAMzsB,OAASxnC,MAAM+yD,QAAUQ,OAM7C,OAAO3gD,KAGT,OAAOA,KAAKmgD,SAOdmB,KAAM,SAAAA,KAASC,OACb,IAAIvhD,KAAOhyB,MAAQimD,OAGnB,IAAKj0B,KAAK6/B,IAAK,CACbghB,oBAGF7gD,KAAKkgD,OAASqB,MAGd,GAAIvhD,KAAKugD,cAAe,CACtBvgD,KAAKsgD,WAAWQ,KAAKC,eAAeQ,MAAQ,EAAIvhD,KAAKmgD,QAASlsB,OAAO4L,IAAImhB,aAI3E,IAAK,IAAIpgF,EAAE,EAAGA,EAAEo/B,KAAKigD,OAAO1+E,OAAQX,IAAK,CACvC,IAAKo/B,KAAKigD,OAAOr/E,GAAGqgF,UAAW,CAE7B,IAAIC,IAAMlhD,KAAKigD,OAAOr/E,GAAGugF,eAGzB,IAAK,IAAI5Q,EAAE,EAAGA,EAAE2Q,IAAI3/E,OAAQgvE,IAAK,CAC/B,IAAInjD,MAAQ4S,KAAKigD,OAAOr/E,GAAGwgF,WAAWF,IAAI3Q,IAE1C,GAAInjD,OAASA,MAAMi0D,MAAO,CACxBj0D,MAAMi0D,MAAME,MAASA,MAAS,KAAOn0D,MAAM8yD,UAMnD,OAAOlgD,MAMTi2B,KAAM,SAAAA,OACJ,IAAIj2B,KAAOhyB,MAAQimD,OAGnB,IAAK,IAAIrzD,EAAE,EAAGA,EAAEo/B,KAAKigD,OAAO1+E,OAAQX,IAAK,CACvCo/B,KAAKigD,OAAOr/E,GAAGq1D,OAGjB,OAAOj2B,MAOTwhD,OAAQ,SAAAA,SACN,IAAIxhD,KAAOhyB,MAAQimD,OAEnB,IAAK,IAAIrzD,EAAEo/B,KAAKigD,OAAO1+E,OAAO,EAAGX,GAAG,EAAGA,IAAK,CAC1Co/B,KAAKigD,OAAOr/E,GAAG4gF,SAIjB,GAAIxhD,KAAKugD,eAAiBvgD,KAAK6/B,YAAc7/B,KAAK6/B,IAAI4hB,QAAU,YAAa,CAC3EzhD,KAAK6/B,IAAI4hB,QACTzhD,KAAK6/B,IAAM,KACXghB,oBAGF,OAAO7gD,MAQT0hD,OAAQ,SAAAA,OAAStsB,KACf,OAAQpnD,MAAQimD,QAAQ+rB,QAAQ5qB,IAAInvD,QAAQ,MAAO,MAOrDy6E,OAAQ,SAAAA,SACN,IAAI1gD,KAAOhyB,MAAQimD,OAGnBj0B,KAAKvS,MAAQuS,KAAK6/B,IAAM7/B,KAAK6/B,IAAIpyC,OAAS,YAAc,YACxD,GAAKuS,KAAKvS,QAAU,UAAW,CAC7BuS,KAAK61B,WAAa,KAIpB71B,KAAK2hD,eAGL,IAAK3hD,KAAKugD,cAAe,CAEvB,UAAWqB,QAAU,YAAa,CAChC,IACE,IAAItqC,KAAO,IAAIsqC,MAGf,UAAWtqC,KAAKuqC,mBAAqB,YAAa,CAChD7hD,KAAKogD,cAAgB,WAEvB,MAAM5/E,GACNw/B,KAAK41B,QAAU,UAEZ,CACL51B,KAAK41B,QAAU,MAKnB,IACE,IAAIte,KAAO,IAAIsqC,MACf,GAAItqC,KAAKiqC,MAAO,CACdvhD,KAAK41B,QAAU,MAEjB,MAAOp1D,IAGT,IAAKw/B,KAAK41B,QAAS,CACjB51B,KAAK8hD,eAGP,OAAO9hD,MAOT8hD,aAAc,SAAAA,eACZ,IAAI9hD,KAAOhyB,MAAQimD,OACnB,IAAI8tB,UAAY,KAGhB,IACEA,iBAAoBH,QAAU,YAAe,IAAIA,MAAU,KAC3D,MAAOjzB,KACP,OAAO3uB,KAGT,IAAK+hD,kBAAoBA,UAAUC,cAAgB,WAAY,CAC7D,OAAOhiD,KAGT,IAAIiiD,SAAWF,UAAUC,YAAY,eAAe/7E,QAAQ,OAAQ,IAGpE,IAAIi8E,WAAaliD,KAAKqgD,YAAcrgD,KAAKqgD,WAAW3gE,UAAUE,MAAM,kBACpE,IAAIuiE,WAAcD,YAAc3+C,SAAS2+C,WAAW,GAAGn8E,MAAM,KAAK,GAAI,IAAM,GAE5Ei6B,KAAKggD,QAAU,CACboC,QAASD,aAAeF,UAAYF,UAAUC,YAAY,cAAc/7E,QAAQ,OAAQ,MACxFo8E,OAAQJ,SACRK,OAAQP,UAAUC,YAAY,4BAA4B/7E,QAAQ,OAAQ,IAC1Es8E,MAAOR,UAAUC,YAAY,8BAA8B/7E,QAAQ,OAAQ,IAC3Eu8E,MAAOT,UAAUC,YAAY,8BAA8B/7E,QAAQ,OAAQ,IAC3Ew8E,MAAOV,UAAUC,YAAY,yBAAyB/7E,QAAQ,OAAQ,IACtEy8E,MAAOX,UAAUC,YAAY,cAAc/7E,QAAQ,OAAQ,IAC3D08E,MAAOZ,UAAUC,YAAY,gBAAgB/7E,QAAQ,OAAQ,IAC7D28E,OAAQb,UAAUC,YAAY,iBAAmBD,UAAUC,YAAY,eAAiBD,UAAUC,YAAY,eAAe/7E,QAAQ,OAAQ,IAC7I48E,OAAQd,UAAUC,YAAY,iBAAmBD,UAAUC,YAAY,eAAiBD,UAAUC,YAAY,eAAe/7E,QAAQ,OAAQ,IAC7I68E,OAAQf,UAAUC,YAAY,+BAA+B/7E,QAAQ,OAAQ,IAC7E88E,OAAQhB,UAAUC,YAAY,+BAA+B/7E,QAAQ,OAAQ,IAC7E+8E,QAASjB,UAAUC,YAAY,4BAA4B/7E,QAAQ,OAAQ,IAC3Eg9E,QAASlB,UAAUC,YAAY,kBAAoBD,UAAUC,YAAY,gBAAgB/7E,QAAQ,OAAQ,KAG3G,OAAO+5B,MASTkjD,aAAc,SAAAA,eACZ,IAAIljD,KAAOhyB,MAAQimD,OAQnBj0B,KAAKmjD,eAAiB,MACtBnjD,KAAKygD,WAAa,MAElB,GAAIzgD,KAAK6/B,IAAK,CAIZ,IAAK7/B,KAAKojD,iBAAmBpjD,KAAK6/B,IAAIwjB,aAAe,MAAO,CAC1DrjD,KAAKojD,gBAAkB,KACvBpjD,KAAKwhD,SAKPxhD,KAAKsjD,eAAiBtjD,KAAK6/B,IAAI1lC,aAAa,EAAG,EAAG,OAMpD,IAAIopD,OAAS,SAATA,OAAkB/iF,GAOpB,IAAK,IAAII,EAAE,EAAGA,EAAEo/B,KAAK+/C,cAAen/E,IAAK,CACvC,IACE,IAAI4iF,UAAY,IAAI5B,MAIpB4B,UAAUC,UAAY,KAGtBzjD,KAAK0jD,mBAAmBF,WACxB,MAAOhjF,GACPw/B,KAAK41B,QAAU,MAKnB,IAAK,IAAIh1D,EAAE,EAAGA,EAAEo/B,KAAKigD,OAAO1+E,OAAQX,IAAK,CACvC,IAAKo/B,KAAKigD,OAAOr/E,GAAGqgF,UAAW,CAE7B,IAAIC,IAAMlhD,KAAKigD,OAAOr/E,GAAGugF,eAGzB,IAAK,IAAI5Q,EAAE,EAAGA,EAAE2Q,IAAI3/E,OAAQgvE,IAAK,CAC/B,IAAInjD,MAAQ4S,KAAKigD,OAAOr/E,GAAGwgF,WAAWF,IAAI3Q,IAE1C,GAAInjD,OAASA,MAAMi0D,QAAUj0D,MAAMi0D,MAAMoC,UAAW,CAClDr2D,MAAMi0D,MAAMoC,UAAY,KACxBr2D,MAAMi0D,MAAMxvD,UAOpBmO,KAAK2jD,cAEL,SAASC,iBAEP5jD,KAAKmjD,eAAiB,KACtBnjD,KAAK61B,WAAa,KAGlB5wD,SAASgqC,oBAAoB,aAAcs0C,OAAQ,MACnDt+E,SAASgqC,oBAAoB,WAAYs0C,OAAQ,MACjDt+E,SAASgqC,oBAAoB,QAASs0C,OAAQ,MAC9Ct+E,SAASgqC,oBAAoB,YAAas0C,OAAQ,MAClDt+E,SAASgqC,oBAAoB,UAAWs0C,OAAQ,MAGhD,IAAK,IAAI3iF,EAAE,EAAGA,EAAEo/B,KAAKigD,OAAO1+E,OAAQX,IAAK,CACvCo/B,KAAKigD,OAAOr/E,GAAGijF,MAAM,WAIzB,GAAI7jD,KAAK6/B,IAAK,CAEZ,IAAIznD,OAAS4nB,KAAK6/B,IAAIikB,qBACtB1rE,OAAOglB,OAAS4C,KAAKsjD,eACrBlrE,OAAO2rE,QAAQ/jD,KAAK6/B,IAAImkB,aAGxB,UAAW5rE,OAAOwiD,QAAU,YAAa,CACvCxiD,OAAO6rE,OAAO,OACT,CACL7rE,OAAOwiD,MAAM,GAIf,UAAW56B,KAAK6/B,IAAIqkB,SAAW,WAAY,CACzClkD,KAAK6/B,IAAIqkB,SAIX9rE,OAAO+rE,QAAU,WACf/rE,OAAOgsE,WAAW,GAClBR,sBAEG,CAELA,mBAKJ3+E,SAAS4N,iBAAiB,aAAc0wE,OAAQ,MAChDt+E,SAAS4N,iBAAiB,WAAY0wE,OAAQ,MAC9Ct+E,SAAS4N,iBAAiB,QAAS0wE,OAAQ,MAC3Ct+E,SAAS4N,iBAAiB,YAAa0wE,OAAQ,MAC/Ct+E,SAAS4N,iBAAiB,UAAW0wE,OAAQ,MAE7C,OAAOvjD,MAQTqkD,kBAAmB,SAAAA,oBACjB,IAAIrkD,KAAOhyB,MAAQimD,OAGnB,GAAIj0B,KAAK8/C,gBAAgBv+E,OAAQ,CAC/B,OAAOy+B,KAAK8/C,gBAAgBl5E,MAY9B,OAAO,IAAIg7E,OAOb8B,mBAAoB,SAAAA,mBAASY,OAC3B,IAAItkD,KAAOhyB,MAAQimD,OAGnB,GAAIqwB,MAAMb,UAAW,CACnBzjD,KAAK8/C,gBAAgBn5E,KAAK29E,OAG5B,OAAOtkD,MAQT2hD,aAAc,SAAAA,eACZ,IAAI3hD,KAAOhyB,KAEX,IAAKgyB,KAAKwgD,cAAgBxgD,KAAK6/B,YAAc7/B,KAAK6/B,IAAI0kB,UAAY,cAAgBtwB,OAAOssB,cAAe,CACtG,OAAOvgD,KAIT,IAAK,IAAIp/B,EAAE,EAAGA,EAAEo/B,KAAKigD,OAAO1+E,OAAQX,IAAK,CACvC,GAAIo/B,KAAKigD,OAAOr/E,GAAGqgF,UAAW,CAC5B,IAAK,IAAI1Q,EAAE,EAAGA,EAAEvwC,KAAKigD,OAAOr/E,GAAGkpE,QAAQvoE,OAAQgvE,IAAK,CAClD,IAAKvwC,KAAKigD,OAAOr/E,GAAGkpE,QAAQyG,GAAGiU,QAAS,CACtC,OAAOxkD,QAMf,GAAIA,KAAKykD,cAAe,CACtBC,aAAa1kD,KAAKykD,eAIpBzkD,KAAKykD,cAAgBh+D,WAAW,WAC9B,IAAKuZ,KAAKwgD,YAAa,CACrB,OAGFxgD,KAAKykD,cAAgB,KACrBzkD,KAAKvS,MAAQ,aACbuS,KAAK6/B,IAAI0kB,UAAUI,KAAK,WACtB3kD,KAAKvS,MAAQ,YAEb,GAAIuS,KAAK4kD,oBAAqB,QACrB5kD,KAAK4kD,oBACZ5kD,KAAK2jD,kBAGR,KAEH,OAAO3jD,MAOT2jD,YAAa,SAAAA,cACX,IAAI3jD,KAAOhyB,KAEX,IAAKgyB,KAAK6/B,YAAc7/B,KAAK6/B,IAAIqkB,SAAW,cAAgBjwB,OAAOssB,cAAe,CAChF,OAAOvgD,KAGT,GAAIA,KAAKvS,QAAU,WAAauS,KAAKykD,cAAe,CAClDC,aAAa1kD,KAAKykD,eAClBzkD,KAAKykD,cAAgB,UAChB,GAAIzkD,KAAKvS,QAAU,YAAa,CACrCuS,KAAK6/B,IAAIqkB,SAASS,KAAK,WACrB3kD,KAAKvS,MAAQ,UAEb,IAAK,IAAI7sB,EAAE,EAAGA,EAAEo/B,KAAKigD,OAAO1+E,OAAQX,IAAK,CACvCo/B,KAAKigD,OAAOr/E,GAAGijF,MAAM,aAIzB,GAAI7jD,KAAKykD,cAAe,CACtBC,aAAa1kD,KAAKykD,eAClBzkD,KAAKykD,cAAgB,WAElB,GAAIzkD,KAAKvS,QAAU,aAAc,CACtCuS,KAAK4kD,oBAAsB,KAG7B,OAAO5kD,OAKX,IAAIi0B,OAAS,IAAI2rB,aASjB,IAAI5rB,KAAO,SAAPA,KAAgBrzD,GAClB,IAAIq/B,KAAOhyB,KAGX,IAAKrN,EAAE8I,KAAO9I,EAAE8I,IAAIlI,SAAW,EAAG,CAChCymB,QAAQiB,MAAM,8DACd,OAGF+W,KAAKqyC,KAAK1xE,IAEZqzD,KAAKlgD,UAAY,CAMfu+D,KAAM,SAAAA,KAAS1xE,GACb,IAAIq/B,KAAOhyB,KAGX,IAAKimD,OAAO4L,IAAK,CACfghB,oBAIF7gD,KAAK6kD,UAAYlkF,EAAEmkF,UAAY,MAC/B9kD,KAAK+kD,eAAkBpkF,EAAEk6B,SAAW,SAAYl6B,EAAEk6B,OAAS,CAACl6B,EAAEk6B,QAC9DmF,KAAKglD,OAASrkF,EAAE40D,OAAS,MACzBv1B,KAAKkgD,OAASv/E,EAAE2gF,MAAQ,MACxBthD,KAAKilD,MAAQtkF,EAAE80D,MAAQ,MACvBz1B,KAAKklD,MAAQvkF,EAAEwkF,MAAQ,EACvBnlD,KAAKolD,gBAAmBzkF,EAAE0kF,UAAY,UAAa1kF,EAAE0kF,QAAU,KAC/DrlD,KAAKslD,MAAQ3kF,EAAE4kF,MAAQ,EACvBvlD,KAAKwlD,QAAU7kF,EAAE83D,QAAU,GAC3Bz4B,KAAKylD,YAAe9kF,EAAE8I,MAAQ,SAAY9I,EAAE8I,IAAM,CAAC9I,EAAE8I,KACrDu2B,KAAKmgD,QAAUx/E,EAAEi0D,SAAW3lD,UAAYtO,EAAEi0D,OAAS,EACnD50B,KAAK0lD,oBAAsB/kF,EAAEglF,oBAAsB,MACnD3lD,KAAK4lD,YAAcjlF,EAAEklF,YAAc,KAGnC7lD,KAAK8lD,UAAY,EACjB9lD,KAAK+lD,OAAS,WACd/lD,KAAK8pC,QAAU,GACf9pC,KAAKgmD,WAAa,GAClBhmD,KAAKimD,OAAS,GACdjmD,KAAKkmD,UAAY,MAGjBlmD,KAAKmmD,OAASxlF,EAAEylF,MAAQ,CAAC,CAACrjE,GAAIpiB,EAAEylF,QAAU,GAC1CpmD,KAAKqmD,QAAU1lF,EAAE2lF,OAAS,CAAC,CAACvjE,GAAIpiB,EAAE2lF,SAAW,GAC7CtmD,KAAKumD,QAAU5lF,EAAEmE,OAAS,CAAC,CAACie,GAAIpiB,EAAEmE,SAAW,GAC7Ck7B,KAAKwmD,aAAe7lF,EAAE+0D,YAAc,CAAC,CAAC3yC,GAAIpiB,EAAE+0D,cAAgB,GAC5D11B,KAAKymD,aAAe9lF,EAAE+lF,YAAc,CAAC,CAAC3jE,GAAIpiB,EAAE+lF,cAAgB,GAC5D1mD,KAAK2mD,SAAWhmF,EAAEimF,QAAU,CAAC,CAAC7jE,GAAIpiB,EAAEimF,UAAY,GAChD5mD,KAAK6mD,QAAUlmF,EAAEmmF,OAAS,CAAC,CAAC/jE,GAAIpiB,EAAEmmF,SAAW,GAC7C9mD,KAAK+mD,QAAUpmF,EAAEqmF,OAAS,CAAC,CAACjkE,GAAIpiB,EAAEqmF,SAAW,GAC7ChnD,KAAKinD,QAAUtmF,EAAEumF,OAAS,CAAC,CAACnkE,GAAIpiB,EAAEumF,SAAW,GAC7ClnD,KAAKmnD,UAAYxmF,EAAEymF,SAAW,CAAC,CAACrkE,GAAIpiB,EAAEymF,WAAa,GACnDpnD,KAAKqnD,QAAU1mF,EAAE2mF,OAAS,CAAC,CAACvkE,GAAIpiB,EAAE2mF,SAAW,GAC7CtnD,KAAKunD,QAAU5mF,EAAE6mF,OAAS,CAAC,CAACzkE,GAAIpiB,EAAE6mF,SAAW,GAC7CxnD,KAAKynD,UAAY9mF,EAAE+mF,SAAW,CAAC,CAAC3kE,GAAIpiB,EAAE+mF,WAAa,GACnD1nD,KAAK2nD,UAAY,GAGjB3nD,KAAKihD,UAAYhtB,OAAOssB,gBAAkBvgD,KAAKglD,OAG/C,GAAI/wB,OAAOwsB,WAAY,CACrBxsB,OAAOivB,eAITjvB,OAAOgsB,OAAOt5E,KAAKq5B,MAGnB,GAAIA,KAAK6kD,UAAW,CAClB7kD,KAAKimD,OAAOt/E,KAAK,CACf6+B,MAAO,OACPoiD,OAAQ,SAAAA,SACN5nD,KAAKk2B,UAMX,GAAIl2B,KAAKolD,SAAU,CACjBplD,KAAKnO,OAGP,OAAOmO,MAOTnO,KAAM,SAAAA,OACJ,IAAImO,KAAOhyB,KACX,IAAIyc,IAAM,KAGV,GAAIwpC,OAAO2B,QAAS,CAClB51B,KAAK6jD,MAAM,YAAa,KAAM,qBAC9B,OAAO7jD,KAIT,UAAWA,KAAKylD,OAAS,SAAU,CACjCzlD,KAAKylD,KAAO,CAACzlD,KAAKylD,MAIpB,IAAK,IAAI7kF,EAAE,EAAGA,EAAEo/B,KAAKylD,KAAKlkF,OAAQX,IAAK,CACrC,IAAIw0D,IAAKxpD,IAET,GAAIo0B,KAAK+kD,SAAW/kD,KAAK+kD,QAAQnkF,GAAI,CAEnCw0D,IAAMp1B,KAAK+kD,QAAQnkF,OACd,CAELgL,IAAMo0B,KAAKylD,KAAK7kF,GAChB,UAAWgL,MAAQ,SAAU,CAC3Bo0B,KAAK6jD,MAAM,YAAa,KAAM,0DAC9B,SAIFzuB,IAAM,0BAA0BuqB,KAAK/zE,KACrC,IAAKwpD,IAAK,CACRA,IAAM,aAAauqB,KAAK/zE,IAAI7F,MAAM,IAAK,GAAG,IAG5C,GAAIqvD,IAAK,CACPA,IAAMA,IAAI,GAAG/mD,eAKjB,IAAK+mD,IAAK,CACRptC,QAAQyY,KAAK,8FAIf,GAAI20B,KAAOnB,OAAOytB,OAAOtsB,KAAM,CAC7B3qC,IAAMuV,KAAKylD,KAAK7kF,GAChB,OAIJ,IAAK6pB,IAAK,CACRuV,KAAK6jD,MAAM,YAAa,KAAM,gDAC9B,OAAO7jD,KAGTA,KAAKylD,KAAOh7D,IACZuV,KAAK+lD,OAAS,UAId,GAAIlhF,OAAOgB,SAASywC,WAAa,UAAY7rB,IAAI3kB,MAAM,EAAG,KAAO,QAAS,CACxEk6B,KAAKglD,OAAS,KACdhlD,KAAKihD,UAAY,MAInB,IAAI4G,MAAM7nD,MAGV,GAAIA,KAAKihD,UAAW,CAClB6G,WAAW9nD,MAGb,OAAOA,MAUTk2B,KAAM,SAAAA,KAASuC,OAAQ7D,OAAQve,UAC7B,IAAIrW,KAAOhyB,KACX,IAAIwgC,GAAK,KAGT,UAAWiqB,SAAW,SAAU,CAC9BjqB,GAAKiqB,OACLA,OAAS,UACJ,UAAWA,SAAW,UAAYz4B,KAAK+lD,SAAW,WAAa/lD,KAAKwlD,QAAQ/sB,QAAS,CAE1F,OAAO,UACF,UAAWA,SAAW,YAAa,CAExCA,OAAS,YAIT,IAAKz4B,KAAKkmD,UAAW,CACnB,IAAItlC,IAAM,EACV,IAAK,IAAIhgD,EAAE,EAAGA,EAAEo/B,KAAK8pC,QAAQvoE,OAAQX,IAAK,CACxC,GAAIo/B,KAAK8pC,QAAQlpE,GAAG4jF,UAAYxkD,KAAK8pC,QAAQlpE,GAAGmnF,OAAQ,CACtDnnC,MACApS,GAAKxO,KAAK8pC,QAAQlpE,GAAGixC,KAIzB,GAAI+O,MAAQ,EAAG,CACb6X,OAAS,SACJ,CACLjqB,GAAK,OAMX,IAAIphB,MAAQohB,GAAKxO,KAAKohD,WAAW5yC,IAAMxO,KAAKgoD,iBAG5C,IAAK56D,MAAO,CACV,OAAO,KAIT,GAAIohB,KAAOiqB,OAAQ,CACjBA,OAASrrC,MAAMo4D,SAAW,YAM5B,GAAIxlD,KAAK+lD,SAAW,SAAU,CAE5B34D,MAAMo4D,QAAU/sB,OAGhBrrC,MAAM26D,OAAS,MAGf,IAAIE,QAAU76D,MAAMykB,IACpB7R,KAAKimD,OAAOt/E,KAAK,CACf6+B,MAAO,OACPoiD,OAAQ,SAAAA,SACN5nD,KAAKk2B,KAAK+xB,YAId,OAAOA,QAIT,GAAIz5C,KAAOphB,MAAMo3D,QAAS,CAExB,IAAKnuC,SAAU,CACbrW,KAAKkoD,WAAW,QAGlB,OAAO96D,MAAMykB,IAIf,GAAI7R,KAAKihD,UAAW,CAClBhtB,OAAO0vB,cAIT,IAAIwE,KAAO3jF,KAAKsX,IAAI,EAAGsR,MAAMg7D,MAAQ,EAAIh7D,MAAMg7D,MAAQpoD,KAAKwlD,QAAQ/sB,QAAQ,GAAK,KACjF,IAAI4vB,SAAW7jF,KAAKsX,IAAI,GAAKkkB,KAAKwlD,QAAQ/sB,QAAQ,GAAKz4B,KAAKwlD,QAAQ/sB,QAAQ,IAAM,IAAQ0vB,MAC1F,IAAIG,QAAWD,SAAW,IAAQ7jF,KAAK6iC,IAAIja,MAAMk4D,OAEjDgD,SAAW,IACX,IAAI1tB,MAAQ56B,KAAKwlD,QAAQ/sB,QAAQ,GAAK,IACtC,IAAIxC,MAAQj2B,KAAKwlD,QAAQ/sB,QAAQ,GAAKz4B,KAAKwlD,QAAQ/sB,QAAQ,IAAM,IACjErrC,MAAMo4D,QAAU/sB,OAIhBrrC,MAAM26D,OAAS,MAGf,IAAIQ,UAAY,SAAZA,YACFn7D,MAAMo3D,QAAU,MAChBp3D,MAAMg7D,MAAQD,KACd/6D,MAAMo7D,OAAS5tB,MACfxtC,MAAMq7D,MAAQxyB,KACd7oC,MAAM63D,SAAW73D,MAAM63D,OAASjlD,KAAKwlD,QAAQ/sB,QAAQ,KAIvD,GAAI0vB,MAAQlyB,KAAM,CAChBj2B,KAAK+nD,OAAO36D,OACZ,OAAO,KAGT,IAAIs7D,oBAAsB9zB,SAAW,SAAWA,OAASxnC,MAAM+yD,QAG/D,IAAIwI,KAAOv7D,MAAMi0D,MACjB,GAAIrhD,KAAKihD,UAAW,CAElB,IAAI2H,aAAe,SAAfA,eACF5oD,KAAKkmD,UAAY,MACjBqC,YACAvoD,KAAK6oD,eAAez7D,OAGpB,IAAIuzD,IAAOvzD,MAAM8yD,QAAUlgD,KAAKkgD,OAAU,EAAIwI,aAC9CC,KAAK7H,KAAKC,eAAeJ,IAAK1sB,OAAO4L,IAAImhB,aACzC5zD,MAAM07D,WAAa70B,OAAO4L,IAAImhB,YAG9B,UAAW2H,KAAKI,aAAanuB,QAAU,YAAa,CAClDxtC,MAAM63D,MAAQ0D,KAAKI,aAAaC,YAAY,EAAGb,KAAM,OAASQ,KAAKI,aAAaC,YAAY,EAAGb,KAAME,cAChG,CACLj7D,MAAM63D,MAAQ0D,KAAKI,aAAanuB,MAAM,EAAGutB,KAAM,OAASQ,KAAKI,aAAanuB,MAAM,EAAGutB,KAAME,UAI3F,GAAIC,UAAY9zC,SAAU,CACxBxU,KAAKgmD,WAAW54D,MAAMykB,KAAOprB,WAAWuZ,KAAK+nD,OAAO/vE,KAAKgoB,KAAM5S,OAAQk7D,SAGzE,IAAKjyC,SAAU,CACb5vB,WAAW,WACTuZ,KAAK6jD,MAAM,OAAQz2D,MAAMykB,KACzB7R,KAAKkoD,cACJ,KAIP,GAAIj0B,OAAOxmC,QAAU,UAAW,CAC9Bm7D,mBACK,CACL5oD,KAAKkmD,UAAY,KAGjBlmD,KAAKs1B,KAAK,SAAUszB,cAGpB5oD,KAAKipD,YAAY77D,MAAMykB,UAEpB,CAEL,IAAIq3C,UAAY,SAAZA,YACFP,KAAK3H,YAAcmH,KACnBQ,KAAKpH,MAAQn0D,MAAM8yD,QAAUlgD,KAAKkgD,QAAUjsB,OAAOisB,QAAUyI,KAAKpH,MAClEoH,KAAK/zB,OAAS8zB,aAAez0B,OAAOW,SACpC+zB,KAAKQ,aAAe/7D,MAAMk4D,MAG1B,IACE,IAAIpvB,KAAOyyB,KAAKzyB,OAGhB,GAAIA,aAAekzB,UAAY,cAAgBlzB,gBAAgBkzB,gBAAkBlzB,KAAKyuB,OAAS,YAAa,CAE1G3kD,KAAKkmD,UAAY,KAGjBqC,YAGAryB,KACGyuB,KAAK,WACJ3kD,KAAKkmD,UAAY,MACjByC,KAAKlF,UAAY,KACjB,IAAKptC,SAAU,CACbrW,KAAK6jD,MAAM,OAAQz2D,MAAMykB,KACzB7R,KAAKkoD,gBAGRmB,MAAM,WACLrpD,KAAKkmD,UAAY,MACjBlmD,KAAK6jD,MAAM,YAAaz2D,MAAMykB,IAAK,gEACjC,kFAGFzkB,MAAM26D,OAAS,KACf36D,MAAMo3D,QAAU,YAEf,IAAKnuC,SAAU,CACpBrW,KAAKkmD,UAAY,MACjBqC,YACAvoD,KAAK6jD,MAAM,OAAQz2D,MAAMykB,KACzB7R,KAAKkoD,aAIPS,KAAKQ,aAAe/7D,MAAMk4D,MAG1B,GAAIqD,KAAKW,OAAQ,CACftpD,KAAK6jD,MAAM,YAAaz2D,MAAMykB,IAAK,gEACjC,kFACF,OAIF,GAAI4mB,SAAW,aAAerrC,MAAM63D,MAAO,CACzCjlD,KAAKgmD,WAAW54D,MAAMykB,KAAOprB,WAAWuZ,KAAK+nD,OAAO/vE,KAAKgoB,KAAM5S,OAAQk7D,aAClE,CACLtoD,KAAKgmD,WAAW54D,MAAMykB,KAAO,WAE3B7R,KAAK+nD,OAAO36D,OAGZu7D,KAAK15C,oBAAoB,QAASjP,KAAKgmD,WAAW54D,MAAMykB,KAAM,QAEhE82C,KAAK91E,iBAAiB,QAASmtB,KAAKgmD,WAAW54D,MAAMykB,KAAM,QAE7D,MAAO8c,KACP3uB,KAAK6jD,MAAM,YAAaz2D,MAAMykB,IAAK8c,OAKvC,GAAIg6B,KAAKl/E,MAAQ,yFAA0F,CACzGk/E,KAAKl/E,IAAMu2B,KAAKylD,KAChBkD,KAAK92D,OAIP,IAAI03D,mBAAsB1kF,QAAUA,OAAO2kF,SAAab,KAAKc,YAAcx1B,OAAOosB,WAAWqJ,WAC7F,GAAIf,KAAKc,YAAc,GAAKF,mBAAoB,CAC9CL,gBACK,CACLlpD,KAAKkmD,UAAY,KAEjB,IAAIyD,SAAW,SAAXA,WAEFT,YAGAP,KAAK15C,oBAAoBglB,OAAOmsB,cAAeuJ,SAAU,QAE3DhB,KAAK91E,iBAAiBohD,OAAOmsB,cAAeuJ,SAAU,OAGtD3pD,KAAKipD,YAAY77D,MAAMykB,MAI3B,OAAOzkB,MAAMykB,KAQf+3C,MAAO,SAAAA,MAASp7C,IACd,IAAIxO,KAAOhyB,KAGX,GAAIgyB,KAAK+lD,SAAW,UAAY/lD,KAAKkmD,UAAW,CAC9ClmD,KAAKimD,OAAOt/E,KAAK,CACf6+B,MAAO,QACPoiD,OAAQ,SAAAA,SACN5nD,KAAK4pD,MAAMp7C,OAIf,OAAOxO,KAIT,IAAIkhD,IAAMlhD,KAAKmhD,aAAa3yC,IAE5B,IAAK,IAAI5tC,EAAE,EAAGA,EAAEsgF,IAAI3/E,OAAQX,IAAK,CAE/Bo/B,KAAKipD,YAAY/H,IAAItgF,IAGrB,IAAIwsB,MAAQ4S,KAAKohD,WAAWF,IAAItgF,IAEhC,GAAIwsB,QAAUA,MAAMo3D,QAAS,CAE3Bp3D,MAAMg7D,MAAQpoD,KAAKmoD,KAAKjH,IAAItgF,IAC5BwsB,MAAMy8D,UAAY,EAClBz8D,MAAMo3D,QAAU,KAGhBxkD,KAAK8pD,UAAU5I,IAAItgF,IAEnB,GAAIwsB,MAAMi0D,MAAO,CACf,GAAIrhD,KAAKihD,UAAW,CAElB,IAAK7zD,MAAMi0D,MAAM0H,aAAc,CAC7B,SAGF,UAAW37D,MAAMi0D,MAAM0H,aAAa9yB,OAAS,YAAa,CACxD7oC,MAAMi0D,MAAM0H,aAAagB,QAAQ,OAC5B,CACL38D,MAAMi0D,MAAM0H,aAAa9yB,KAAK,GAIhCj2B,KAAKgqD,aAAa58D,MAAMi0D,YACnB,IAAK3xB,MAAMtiC,MAAMi0D,MAAMgH,WAAaj7D,MAAMi0D,MAAMgH,WAAa7zC,SAAU,CAC5EpnB,MAAMi0D,MAAMuI,UAMlB,IAAK5xD,UAAU,GAAI,CACjBgI,KAAK6jD,MAAM,QAASz2D,MAAQA,MAAMykB,IAAM,OAI5C,OAAO7R,MASTi2B,KAAM,SAAAA,KAASznB,GAAI6H,UACjB,IAAIrW,KAAOhyB,KAGX,GAAIgyB,KAAK+lD,SAAW,UAAY/lD,KAAKkmD,UAAW,CAC9ClmD,KAAKimD,OAAOt/E,KAAK,CACf6+B,MAAO,OACPoiD,OAAQ,SAAAA,SACN5nD,KAAKi2B,KAAKznB,OAId,OAAOxO,KAIT,IAAIkhD,IAAMlhD,KAAKmhD,aAAa3yC,IAE5B,IAAK,IAAI5tC,EAAE,EAAGA,EAAEsgF,IAAI3/E,OAAQX,IAAK,CAE/Bo/B,KAAKipD,YAAY/H,IAAItgF,IAGrB,IAAIwsB,MAAQ4S,KAAKohD,WAAWF,IAAItgF,IAEhC,GAAIwsB,MAAO,CAETA,MAAMg7D,MAAQh7D,MAAMo7D,QAAU,EAC9Bp7D,MAAMy8D,UAAY,EAClBz8D,MAAMo3D,QAAU,KAChBp3D,MAAM26D,OAAS,KAGf/nD,KAAK8pD,UAAU5I,IAAItgF,IAEnB,GAAIwsB,MAAMi0D,MAAO,CACf,GAAIrhD,KAAKihD,UAAW,CAElB,GAAI7zD,MAAMi0D,MAAM0H,aAAc,CAC5B,UAAW37D,MAAMi0D,MAAM0H,aAAa9yB,OAAS,YAAa,CACxD7oC,MAAMi0D,MAAM0H,aAAagB,QAAQ,OAC5B,CACL38D,MAAMi0D,MAAM0H,aAAa9yB,KAAK,GAIhCj2B,KAAKgqD,aAAa58D,MAAMi0D,aAErB,IAAK3xB,MAAMtiC,MAAMi0D,MAAMgH,WAAaj7D,MAAMi0D,MAAMgH,WAAa7zC,SAAU,CAC5EpnB,MAAMi0D,MAAML,YAAc5zD,MAAMo7D,QAAU,EAC1Cp7D,MAAMi0D,MAAMuI,QAGZ,GAAIx8D,MAAMi0D,MAAMgH,WAAa7zC,SAAU,CACrCxU,KAAKiqD,YAAY78D,MAAMi0D,SAK7B,IAAKhrC,SAAU,CACbrW,KAAK6jD,MAAM,OAAQz2D,MAAMykB,OAK/B,OAAO7R,MASTshD,KAAM,SAAAA,KAASC,MAAO/yC,IACpB,IAAIxO,KAAOhyB,KAGX,GAAIgyB,KAAK+lD,SAAW,UAAW/lD,KAAKkmD,UAAW,CAC7ClmD,KAAKimD,OAAOt/E,KAAK,CACf6+B,MAAO,OACPoiD,OAAQ,SAAAA,SACN5nD,KAAKshD,KAAKC,MAAO/yC,OAIrB,OAAOxO,KAIT,UAAWwO,KAAO,YAAa,CAC7B,UAAW+yC,QAAU,UAAW,CAC9BvhD,KAAKkgD,OAASqB,UACT,CACL,OAAOvhD,KAAKkgD,QAKhB,IAAIgB,IAAMlhD,KAAKmhD,aAAa3yC,IAE5B,IAAK,IAAI5tC,EAAE,EAAGA,EAAEsgF,IAAI3/E,OAAQX,IAAK,CAE/B,IAAIwsB,MAAQ4S,KAAKohD,WAAWF,IAAItgF,IAEhC,GAAIwsB,MAAO,CACTA,MAAM8yD,OAASqB,MAGf,GAAIn0D,MAAM88D,UAAW,CACnBlqD,KAAK8pD,UAAU18D,MAAMykB,KAGvB,GAAI7R,KAAKihD,WAAa7zD,MAAMi0D,MAAO,CACjCj0D,MAAMi0D,MAAMP,KAAKC,eAAeQ,MAAQ,EAAIn0D,MAAM+yD,QAASlsB,OAAO4L,IAAImhB,kBACjE,GAAI5zD,MAAMi0D,MAAO,CACtBj0D,MAAMi0D,MAAME,MAAQttB,OAAOisB,OAAS,KAAOqB,MAG7CvhD,KAAK6jD,MAAM,OAAQz2D,MAAMykB,MAI7B,OAAO7R,MAWT40B,OAAQ,SAAAA,SACN,IAAI50B,KAAOhyB,KACX,IAAIiqB,KAAOD,UACX,IAAI2oD,IAAKnyC,GAGT,GAAIvW,KAAK12B,SAAW,EAAG,CAErB,OAAOy+B,KAAKmgD,aACP,GAAIloD,KAAK12B,SAAW,GAAK02B,KAAK12B,SAAW,UAAY02B,KAAK,KAAO,YAAa,CAEnF,IAAIipD,IAAMlhD,KAAKmhD,eACf,IAAI3/D,MAAQ0/D,IAAIv7E,QAAQsyB,KAAK,IAC7B,GAAIzW,OAAS,EAAG,CACdgtB,GAAKjL,SAAStL,KAAK,GAAI,QAClB,CACL0oD,IAAMC,WAAW3oD,KAAK,UAEnB,GAAIA,KAAK12B,QAAU,EAAG,CAC3Bo/E,IAAMC,WAAW3oD,KAAK,IACtBuW,GAAKjL,SAAStL,KAAK,GAAI,IAIzB,IAAI7K,MACJ,UAAWuzD,MAAQ,aAAeA,KAAO,GAAKA,KAAO,EAAG,CAEtD,GAAI3gD,KAAK+lD,SAAW,UAAW/lD,KAAKkmD,UAAW,CAC7ClmD,KAAKimD,OAAOt/E,KAAK,CACf6+B,MAAO,SACPoiD,OAAQ,SAAAA,SACN5nD,KAAK40B,OAAOx8B,MAAM4H,KAAM/H,SAI5B,OAAO+H,KAIT,UAAWwO,KAAO,YAAa,CAC7BxO,KAAKmgD,QAAUQ,IAIjBnyC,GAAKxO,KAAKmhD,aAAa3yC,IACvB,IAAK,IAAI5tC,EAAE,EAAGA,EAAE4tC,GAAGjtC,OAAQX,IAAK,CAE9BwsB,MAAQ4S,KAAKohD,WAAW5yC,GAAG5tC,IAE3B,GAAIwsB,MAAO,CACTA,MAAM+yD,QAAUQ,IAGhB,IAAK1oD,KAAK,GAAI,CACZ+H,KAAK8pD,UAAUt7C,GAAG5tC,IAGpB,GAAIo/B,KAAKihD,WAAa7zD,MAAMi0D,QAAUj0D,MAAM8yD,OAAQ,CAClD9yD,MAAMi0D,MAAMP,KAAKC,eAAeJ,IAAK1sB,OAAO4L,IAAImhB,kBAC3C,GAAI5zD,MAAMi0D,QAAUj0D,MAAM8yD,OAAQ,CACvC9yD,MAAMi0D,MAAMzsB,OAAS+rB,IAAM1sB,OAAOW,SAGpC50B,KAAK6jD,MAAM,SAAUz2D,MAAMykB,WAG1B,CACLzkB,MAAQohB,GAAKxO,KAAKohD,WAAW5yC,IAAMxO,KAAK8pC,QAAQ,GAChD,OAAO18C,MAAQA,MAAM+yD,QAAU,EAGjC,OAAOngD,MAWTm2B,KAAM,SAAAA,KAASg0B,KAAMC,GAAIhqE,IAAKouB,IAC5B,IAAIxO,KAAOhyB,KAGX,GAAIgyB,KAAK+lD,SAAW,UAAY/lD,KAAKkmD,UAAW,CAC9ClmD,KAAKimD,OAAOt/E,KAAK,CACf6+B,MAAO,OACPoiD,OAAQ,SAAAA,SACN5nD,KAAKm2B,KAAKg0B,KAAMC,GAAIhqE,IAAKouB,OAI7B,OAAOxO,KAITmqD,KAAOvJ,WAAWuJ,MAClBC,GAAKxJ,WAAWwJ,IAChBhqE,IAAMwgE,WAAWxgE,KAGjB4f,KAAK40B,OAAOu1B,KAAM37C,IAGlB,IAAI0yC,IAAMlhD,KAAKmhD,aAAa3yC,IAC5B,IAAK,IAAI5tC,EAAE,EAAGA,EAAEsgF,IAAI3/E,OAAQX,IAAK,CAE/B,IAAIwsB,MAAQ4S,KAAKohD,WAAWF,IAAItgF,IAGhC,GAAIwsB,MAAO,CAET,IAAKohB,GAAI,CACPxO,KAAK8pD,UAAU5I,IAAItgF,IAIrB,GAAIo/B,KAAKihD,YAAc7zD,MAAM8yD,OAAQ,CACnC,IAAIc,YAAc/sB,OAAO4L,IAAImhB,YAC7B,IAAIn8B,IAAMm8B,YAAe5gE,IAAM,IAC/BgN,MAAM+yD,QAAUgK,KAChB/8D,MAAMi0D,MAAMP,KAAKC,eAAeoJ,KAAMnJ,aACtC5zD,MAAMi0D,MAAMP,KAAKuJ,wBAAwBD,GAAIvlC,KAG/C7kB,KAAKsqD,mBAAmBl9D,MAAO+8D,KAAMC,GAAIhqE,IAAK8gE,IAAItgF,UAAW4tC,KAAO,cAIxE,OAAOxO,MAYTsqD,mBAAoB,SAAAA,mBAASl9D,MAAO+8D,KAAMC,GAAIhqE,IAAKouB,GAAI+7C,SACrD,IAAIvqD,KAAOhyB,KACX,IAAI2yE,IAAMwJ,KACV,IAAI14B,KAAO24B,GAAKD,KAChB,IAAIK,MAAQhmF,KAAK6iC,IAAIoqB,KAAO,KAC5B,IAAIg5B,QAAUjmF,KAAKsX,IAAI,EAAI0uE,MAAQ,EAAKpqE,IAAMoqE,MAAQpqE,KACtD,IAAIsqE,SAAWjiE,KAAKD,MAGpB4E,MAAMu9D,QAAUP,GAGhBh9D,MAAM88D,UAAYU,YAAY,WAE5B,IAAIlkE,MAAQ+B,KAAKD,MAAQkiE,UAAYtqE,IACrCsqE,SAAWjiE,KAAKD,MAChBm4D,KAAOlvB,KAAO/qC,KAGdi6D,IAAMn8E,KAAKsX,IAAI,EAAG6kE,KAClBA,IAAMn8E,KAAKqX,IAAI,EAAG8kE,KAGlBA,IAAMn8E,KAAKmE,MAAMg4E,IAAM,KAAO,IAG9B,GAAI3gD,KAAKihD,UAAW,CAClB7zD,MAAM+yD,QAAUQ,QACX,CACL3gD,KAAK40B,OAAO+rB,IAAKvzD,MAAMykB,IAAK,MAI9B,GAAI04C,QAAS,CACXvqD,KAAKmgD,QAAUQ,IAIjB,GAAKyJ,GAAKD,MAAQxJ,KAAOyJ,IAAQA,GAAKD,MAAQxJ,KAAOyJ,GAAK,CACxDS,cAAcz9D,MAAM88D,WACpB98D,MAAM88D,UAAY,KAClB98D,MAAMu9D,QAAU,KAChB3qD,KAAK40B,OAAOw1B,GAAIh9D,MAAMykB,KACtB7R,KAAK6jD,MAAM,OAAQz2D,MAAMykB,OAE1B44C,UASLX,UAAW,SAAAA,UAASt7C,IAClB,IAAIxO,KAAOhyB,KACX,IAAIof,MAAQ4S,KAAKohD,WAAW5yC,IAE5B,GAAIphB,OAASA,MAAM88D,UAAW,CAC5B,GAAIlqD,KAAKihD,UAAW,CAClB7zD,MAAMi0D,MAAMP,KAAKgK,sBAAsB72B,OAAO4L,IAAImhB,aAGpD6J,cAAcz9D,MAAM88D,WACpB98D,MAAM88D,UAAY,KAClBlqD,KAAK40B,OAAOxnC,MAAMu9D,QAASn8C,IAC3BphB,MAAMu9D,QAAU,KAChB3qD,KAAK6jD,MAAM,OAAQr1C,IAGrB,OAAOxO,MAWTy1B,KAAM,SAAAA,OACJ,IAAIz1B,KAAOhyB,KACX,IAAIiqB,KAAOD,UACX,IAAIy9B,KAAMjnB,GAAIphB,MAGd,GAAI6K,KAAK12B,SAAW,EAAG,CAErB,OAAOy+B,KAAKilD,WACP,GAAIhtD,KAAK12B,SAAW,EAAG,CAC5B,UAAW02B,KAAK,KAAO,UAAW,CAChCw9B,KAAOx9B,KAAK,GACZ+H,KAAKilD,MAAQxvB,SACR,CAELroC,MAAQ4S,KAAKohD,WAAW79C,SAAStL,KAAK,GAAI,KAC1C,OAAO7K,MAAQA,MAAM63D,MAAQ,YAE1B,GAAIhtD,KAAK12B,SAAW,EAAG,CAC5Bk0D,KAAOx9B,KAAK,GACZuW,GAAKjL,SAAStL,KAAK,GAAI,IAIzB,IAAIipD,IAAMlhD,KAAKmhD,aAAa3yC,IAC5B,IAAK,IAAI5tC,EAAE,EAAGA,EAAEsgF,IAAI3/E,OAAQX,IAAK,CAC/BwsB,MAAQ4S,KAAKohD,WAAWF,IAAItgF,IAE5B,GAAIwsB,MAAO,CACTA,MAAM63D,MAAQxvB,KACd,GAAIz1B,KAAKihD,WAAa7zD,MAAMi0D,OAASj0D,MAAMi0D,MAAM0H,aAAc,CAC7D37D,MAAMi0D,MAAM0H,aAAatzB,KAAOA,KAChC,GAAIA,KAAM,CACRroC,MAAMi0D,MAAM0H,aAAagC,UAAY39D,MAAMo7D,QAAU,EACrDp7D,MAAMi0D,MAAM0H,aAAaiC,QAAU59D,MAAMq7D,SAMjD,OAAOzoD,MAWTulD,KAAM,SAAAA,OACJ,IAAIvlD,KAAOhyB,KACX,IAAIiqB,KAAOD,UACX,IAAIutD,KAAM/2C,GAGV,GAAIvW,KAAK12B,SAAW,EAAG,CAErBitC,GAAKxO,KAAK8pC,QAAQ,GAAGj4B,SAChB,GAAI5Z,KAAK12B,SAAW,EAAG,CAE5B,IAAI2/E,IAAMlhD,KAAKmhD,eACf,IAAI3/D,MAAQ0/D,IAAIv7E,QAAQsyB,KAAK,IAC7B,GAAIzW,OAAS,EAAG,CACdgtB,GAAKjL,SAAStL,KAAK,GAAI,QAClB,CACLstD,KAAO3E,WAAW3oD,KAAK,UAEpB,GAAIA,KAAK12B,SAAW,EAAG,CAC5BgkF,KAAO3E,WAAW3oD,KAAK,IACvBuW,GAAKjL,SAAStL,KAAK,GAAI,IAIzB,IAAI7K,MACJ,UAAWm4D,OAAS,SAAU,CAE5B,GAAIvlD,KAAK+lD,SAAW,UAAY/lD,KAAKkmD,UAAW,CAC9ClmD,KAAKimD,OAAOt/E,KAAK,CACf6+B,MAAO,OACPoiD,OAAQ,SAAAA,SACN5nD,KAAKulD,KAAKntD,MAAM4H,KAAM/H,SAI1B,OAAO+H,KAIT,UAAWwO,KAAO,YAAa,CAC7BxO,KAAKslD,MAAQC,KAIf/2C,GAAKxO,KAAKmhD,aAAa3yC,IACvB,IAAK,IAAI5tC,EAAE,EAAGA,EAAE4tC,GAAGjtC,OAAQX,IAAK,CAE9BwsB,MAAQ4S,KAAKohD,WAAW5yC,GAAG5tC,IAE3B,GAAIwsB,MAAO,CAGT,GAAI4S,KAAKu2B,QAAQ/nB,GAAG5tC,IAAK,CACvBwsB,MAAMy8D,UAAY7pD,KAAKmoD,KAAK35C,GAAG5tC,IAC/BwsB,MAAM07D,WAAa9oD,KAAKihD,UAAYhtB,OAAO4L,IAAImhB,YAAc5zD,MAAM07D,WAErE17D,MAAMk4D,MAAQC,KAGd,GAAIvlD,KAAKihD,WAAa7zD,MAAMi0D,OAASj0D,MAAMi0D,MAAM0H,aAAc,CAC7D37D,MAAMi0D,MAAM0H,aAAaI,aAAapI,eAAewE,KAAMtxB,OAAO4L,IAAImhB,kBACjE,GAAI5zD,MAAMi0D,MAAO,CACtBj0D,MAAMi0D,MAAM8H,aAAe5D,KAI7B,IAAI4C,KAAOnoD,KAAKmoD,KAAK35C,GAAG5tC,IACxB,IAAIynF,UAAaroD,KAAKwlD,QAAQp4D,MAAMo4D,SAAS,GAAKxlD,KAAKwlD,QAAQp4D,MAAMo4D,SAAS,IAAM,IAAQ2C,KAC5F,IAAIG,QAAWD,SAAW,IAAQ7jF,KAAK6iC,IAAIja,MAAMk4D,OAGjD,GAAItlD,KAAKgmD,WAAWx3C,GAAG5tC,MAAQwsB,MAAMo3D,QAAS,CAC5CxkD,KAAKipD,YAAYz6C,GAAG5tC,IACpBo/B,KAAKgmD,WAAWx3C,GAAG5tC,IAAM6lB,WAAWuZ,KAAK+nD,OAAO/vE,KAAKgoB,KAAM5S,OAAQk7D,SAGrEtoD,KAAK6jD,MAAM,OAAQz2D,MAAMykB,WAGxB,CACLzkB,MAAQ4S,KAAKohD,WAAW5yC,IACxB,OAAOphB,MAAQA,MAAMk4D,MAAQtlD,KAAKslD,MAGpC,OAAOtlD,MAWTmoD,KAAM,SAAAA,OACJ,IAAInoD,KAAOhyB,KACX,IAAIiqB,KAAOD,UACX,IAAImwD,KAAM35C,GAGV,GAAIvW,KAAK12B,SAAW,EAAG,CAErBitC,GAAKxO,KAAK8pC,QAAQ,GAAGj4B,SAChB,GAAI5Z,KAAK12B,SAAW,EAAG,CAE5B,IAAI2/E,IAAMlhD,KAAKmhD,eACf,IAAI3/D,MAAQ0/D,IAAIv7E,QAAQsyB,KAAK,IAC7B,GAAIzW,OAAS,EAAG,CACdgtB,GAAKjL,SAAStL,KAAK,GAAI,SAClB,GAAI+H,KAAK8pC,QAAQvoE,OAAQ,CAC9BitC,GAAKxO,KAAK8pC,QAAQ,GAAGj4B,IACrBs2C,KAAOvH,WAAW3oD,KAAK,UAEpB,GAAIA,KAAK12B,SAAW,EAAG,CAC5B4mF,KAAOvH,WAAW3oD,KAAK,IACvBuW,GAAKjL,SAAStL,KAAK,GAAI,IAIzB,UAAWuW,KAAO,YAAa,CAC7B,OAAOxO,KAIT,GAAIA,KAAK+lD,SAAW,UAAY/lD,KAAKkmD,UAAW,CAC9ClmD,KAAKimD,OAAOt/E,KAAK,CACf6+B,MAAO,OACPoiD,OAAQ,SAAAA,SACN5nD,KAAKmoD,KAAK/vD,MAAM4H,KAAM/H,SAI1B,OAAO+H,KAIT,IAAI5S,MAAQ4S,KAAKohD,WAAW5yC,IAE5B,GAAIphB,MAAO,CACT,UAAW+6D,OAAS,UAAYA,MAAQ,EAAG,CAEzC,IAAI5xB,QAAUv2B,KAAKu2B,QAAQ/nB,IAC3B,GAAI+nB,QAAS,CACXv2B,KAAK4pD,MAAMp7C,GAAI,MAIjBphB,MAAMg7D,MAAQD,KACd/6D,MAAM26D,OAAS,MACf/nD,KAAKipD,YAAYz6C,IAGjB,IAAKxO,KAAKihD,WAAa7zD,MAAMi0D,QAAU3xB,MAAMtiC,MAAMi0D,MAAMgH,UAAW,CAClEj7D,MAAMi0D,MAAML,YAAcmH,KAI5B,IAAI8C,YAAc,SAAdA,cACFjrD,KAAK6jD,MAAM,OAAQr1C,IAGnB,GAAI+nB,QAAS,CACXv2B,KAAKk2B,KAAK1nB,GAAIv/B,UAAW,QAK7B,GAAIsnD,UAAYv2B,KAAKihD,UAAW,CAC9B,IAAIiK,SAAW,SAAXA,WACF,IAAKlrD,KAAKkmD,UAAW,CACnB+E,kBACK,CACLxkE,WAAWykE,SAAU,KAGzBzkE,WAAWykE,SAAU,OAChB,CACLD,mBAEG,CACL,GAAIjrD,KAAKihD,UAAW,CAClB,IAAIkK,SAAWnrD,KAAKu2B,QAAQ/nB,IAAMylB,OAAO4L,IAAImhB,YAAc5zD,MAAM07D,WAAa,EAC9E,IAAIsC,SAAWh+D,MAAMy8D,UAAYz8D,MAAMy8D,UAAYz8D,MAAMg7D,MAAQ,EACjE,OAAOh7D,MAAMg7D,OAASgD,SAAWD,SAAW3mF,KAAK6iC,IAAIja,MAAMk4D,YACtD,CACL,OAAOl4D,MAAMi0D,MAAML,cAKzB,OAAOhhD,MAQTu2B,QAAS,SAAAA,QAAS/nB,IAChB,IAAIxO,KAAOhyB,KAGX,UAAWwgC,KAAO,SAAU,CAC1B,IAAIphB,MAAQ4S,KAAKohD,WAAW5yC,IAC5B,OAAOphB,OAASA,MAAMo3D,QAAU,MAIlC,IAAK,IAAI5jF,EAAE,EAAGA,EAAEo/B,KAAK8pC,QAAQvoE,OAAQX,IAAK,CACxC,IAAKo/B,KAAK8pC,QAAQlpE,GAAG4jF,QAAS,CAC5B,OAAO,MAIX,OAAO,OAQT6D,SAAU,SAAAA,SAAS75C,IACjB,IAAIxO,KAAOhyB,KACX,IAAIq6E,SAAWroD,KAAK8lD,UAGpB,IAAI14D,MAAQ4S,KAAKohD,WAAW5yC,IAC5B,GAAIphB,MAAO,CACTi7D,SAAWroD,KAAKwlD,QAAQp4D,MAAMo4D,SAAS,GAAK,IAG9C,OAAO6C,UAOT56D,MAAO,SAAAA,QACL,OAAOzf,KAAK+3E,QAOdvE,OAAQ,SAAAA,SACN,IAAIxhD,KAAOhyB,KAGX,IAAImmD,OAASn0B,KAAK8pC,QAClB,IAAK,IAAIlpE,EAAE,EAAGA,EAAEuzD,OAAO5yD,OAAQX,IAAK,CAElC,IAAKuzD,OAAOvzD,GAAG4jF,QAAS,CACtBxkD,KAAKi2B,KAAK9B,OAAOvzD,GAAGixC,KAItB,IAAK7R,KAAKihD,UAAW,CAEnBjhD,KAAKiqD,YAAY91B,OAAOvzD,GAAGygF,OAG3BltB,OAAOvzD,GAAGygF,MAAMpyC,oBAAoB,QAASklB,OAAOvzD,GAAGyqF,SAAU,OACjEl3B,OAAOvzD,GAAGygF,MAAMpyC,oBAAoBglB,OAAOmsB,cAAejsB,OAAOvzD,GAAG0qF,QAAS,OAG7Er3B,OAAOyvB,mBAAmBvvB,OAAOvzD,GAAGygF,cAI/BltB,OAAOvzD,GAAGygF,MAGjBrhD,KAAKipD,YAAY90B,OAAOvzD,GAAGixC,KAI7B,IAAIrwB,MAAQyyC,OAAOgsB,OAAOt6E,QAAQq6B,MAClC,GAAIxe,OAAS,EAAG,CACdyyC,OAAOgsB,OAAOt0D,OAAOnK,MAAO,GAI9B,IAAI+pE,SAAW,KACf,IAAK3qF,EAAE,EAAGA,EAAEqzD,OAAOgsB,OAAO1+E,OAAQX,IAAK,CACrC,GAAIqzD,OAAOgsB,OAAOr/E,GAAG6kF,OAASzlD,KAAKylD,MAAQzlD,KAAKylD,KAAK9/E,QAAQsuD,OAAOgsB,OAAOr/E,GAAG6kF,OAAS,EAAG,CACxF8F,SAAW,MACX,OAIJ,GAAIC,OAASD,SAAU,QACdC,MAAMxrD,KAAKylD,MAIpBxxB,OAAO2B,QAAU,MAGjB51B,KAAK+lD,OAAS,WACd/lD,KAAK8pC,QAAU,GACf9pC,KAAO,KAEP,OAAO,MAWTqF,GAAI,SAAAA,GAASG,MAAOziB,GAAIyrB,GAAI8mB,MAC1B,IAAIt1B,KAAOhyB,KACX,IAAIy9E,OAASzrD,KAAK,MAAQwF,OAE1B,UAAWziB,KAAO,WAAY,CAC5B0oE,OAAO9kF,KAAK2uD,KAAO,CAAC9mB,GAAIA,GAAIzrB,GAAIA,GAAIuyC,KAAMA,MAAQ,CAAC9mB,GAAIA,GAAIzrB,GAAIA,KAGjE,OAAOid,MAUT0rD,IAAK,SAAAA,IAASlmD,MAAOziB,GAAIyrB,IACvB,IAAIxO,KAAOhyB,KACX,IAAIy9E,OAASzrD,KAAK,MAAQwF,OAC1B,IAAI5kC,EAAI,EAGR,UAAWmiB,KAAO,SAAU,CAC1ByrB,GAAKzrB,GACLA,GAAK,KAGP,GAAIA,IAAMyrB,GAAI,CAEZ,IAAK5tC,EAAE,EAAGA,EAAE6qF,OAAOlqF,OAAQX,IAAK,CAC9B,IAAI+qF,KAAQn9C,KAAOi9C,OAAO7qF,GAAG4tC,GAC7B,GAAIzrB,KAAO0oE,OAAO7qF,GAAGmiB,IAAM4oE,OAAS5oE,IAAM4oE,KAAM,CAC9CF,OAAO9/D,OAAO/qB,EAAG,GACjB,aAGC,GAAI4kC,MAAO,CAEhBxF,KAAK,MAAQwF,OAAS,OACjB,CAEL,IAAIx4B,KAAOC,OAAOD,KAAKgzB,MACvB,IAAKp/B,EAAE,EAAGA,EAAEoM,KAAKzL,OAAQX,IAAK,CAC5B,GAAKoM,KAAKpM,GAAG+E,QAAQ,SAAW,GAAMuiB,MAAM+b,QAAQjE,KAAKhzB,KAAKpM,KAAM,CAClEo/B,KAAKhzB,KAAKpM,IAAM,KAKtB,OAAOo/B,MAUTs1B,KAAM,SAAAA,KAAS9vB,MAAOziB,GAAIyrB,IACxB,IAAIxO,KAAOhyB,KAGXgyB,KAAKqF,GAAGG,MAAOziB,GAAIyrB,GAAI,GAEvB,OAAOxO,MAUT6jD,MAAO,SAAAA,MAASr+C,MAAOgJ,GAAIhpC,KACzB,IAAIw6B,KAAOhyB,KACX,IAAIy9E,OAASzrD,KAAK,MAAQwF,OAG1B,IAAK,IAAI5kC,EAAE6qF,OAAOlqF,OAAO,EAAGX,GAAG,EAAGA,IAAK,CAErC,IAAK6qF,OAAO7qF,GAAG4tC,IAAMi9C,OAAO7qF,GAAG4tC,KAAOA,IAAMhJ,QAAU,OAAQ,CAC5D/e,WAAW,SAAS1D,IAClBA,GAAGzhB,KAAK0M,KAAMwgC,GAAIhpC,MAClBwS,KAAKgoB,KAAMyrD,OAAO7qF,GAAGmiB,IAAK,GAG5B,GAAI0oE,OAAO7qF,GAAG00D,KAAM,CAClBt1B,KAAK0rD,IAAIlmD,MAAOimD,OAAO7qF,GAAGmiB,GAAI0oE,OAAO7qF,GAAG4tC,MAM9CxO,KAAKkoD,WAAW1iD,OAEhB,OAAOxF,MASTkoD,WAAY,SAAAA,WAAS1iD,OACnB,IAAIxF,KAAOhyB,KAEX,GAAIgyB,KAAKimD,OAAO1kF,OAAS,EAAG,CAC1B,IAAIqqF,KAAO5rD,KAAKimD,OAAO,GAGvB,GAAI2F,KAAKpmD,QAAUA,MAAO,CACxBxF,KAAKimD,OAAO4F,QACZ7rD,KAAKkoD,aAIP,IAAK1iD,MAAO,CACVomD,KAAKhE,UAIT,OAAO5nD,MAQT+nD,OAAQ,SAAAA,OAAS36D,OACf,IAAI4S,KAAOhyB,KACX,IAAIyqD,OAASrrC,MAAMo4D,QAKnB,IAAKxlD,KAAKihD,WAAa7zD,MAAMi0D,QAAUj0D,MAAMi0D,MAAMiI,SAAWl8D,MAAMi0D,MAAMyK,OAAS1+D,MAAMi0D,MAAML,YAAc5zD,MAAMq7D,MAAO,CACxHhiE,WAAWuZ,KAAK+nD,OAAO/vE,KAAKgoB,KAAM5S,OAAQ,KAC1C,OAAO4S,KAIT,IAAIy1B,QAAUroC,MAAM63D,OAASjlD,KAAKwlD,QAAQ/sB,QAAQ,IAGlDz4B,KAAK6jD,MAAM,MAAOz2D,MAAMykB,KAGxB,IAAK7R,KAAKihD,WAAaxrB,KAAM,CAC3Bz1B,KAAKi2B,KAAK7oC,MAAMykB,IAAK,MAAMqkB,KAAK9oC,MAAMykB,KAIxC,GAAI7R,KAAKihD,WAAaxrB,KAAM,CAC1Bz1B,KAAK6jD,MAAM,OAAQz2D,MAAMykB,KACzBzkB,MAAMg7D,MAAQh7D,MAAMo7D,QAAU,EAC9Bp7D,MAAMy8D,UAAY,EAClBz8D,MAAM07D,WAAa70B,OAAO4L,IAAImhB,YAE9B,IAAIsH,SAAYl7D,MAAMq7D,MAAQr7D,MAAMo7D,QAAU,IAAQhkF,KAAK6iC,IAAIja,MAAMk4D,OACrEtlD,KAAKgmD,WAAW54D,MAAMykB,KAAOprB,WAAWuZ,KAAK+nD,OAAO/vE,KAAKgoB,KAAM5S,OAAQk7D,SAIzE,GAAItoD,KAAKihD,YAAcxrB,KAAM,CAC3BroC,MAAMo3D,QAAU,KAChBp3D,MAAM26D,OAAS,KACf36D,MAAMg7D,MAAQh7D,MAAMo7D,QAAU,EAC9Bp7D,MAAMy8D,UAAY,EAClB7pD,KAAKipD,YAAY77D,MAAMykB,KAGvB7R,KAAKgqD,aAAa58D,MAAMi0D,OAGxBptB,OAAO0tB,eAIT,IAAK3hD,KAAKihD,YAAcxrB,KAAM,CAC5Bz1B,KAAKi2B,KAAK7oC,MAAMykB,IAAK,MAGvB,OAAO7R,MAQTipD,YAAa,SAAAA,YAASz6C,IACpB,IAAIxO,KAAOhyB,KAEX,GAAIgyB,KAAKgmD,WAAWx3C,IAAK,CAEvB,UAAWxO,KAAKgmD,WAAWx3C,MAAQ,WAAY,CAC7Ck2C,aAAa1kD,KAAKgmD,WAAWx3C,SACxB,CACL,IAAIphB,MAAQ4S,KAAKohD,WAAW5yC,IAC5B,GAAIphB,OAASA,MAAMi0D,MAAO,CACxBj0D,MAAMi0D,MAAMpyC,oBAAoB,QAASjP,KAAKgmD,WAAWx3C,IAAK,eAI3DxO,KAAKgmD,WAAWx3C,IAGzB,OAAOxO,MAQTohD,WAAY,SAAAA,WAAS5yC,IACnB,IAAIxO,KAAOhyB,KAGX,IAAK,IAAIpN,EAAE,EAAGA,EAAEo/B,KAAK8pC,QAAQvoE,OAAQX,IAAK,CACxC,GAAI4tC,KAAOxO,KAAK8pC,QAAQlpE,GAAGixC,IAAK,CAC9B,OAAO7R,KAAK8pC,QAAQlpE,IAIxB,OAAO,MAOTonF,eAAgB,SAAAA,iBACd,IAAIhoD,KAAOhyB,KAEXgyB,KAAK+rD,SAGL,IAAK,IAAInrF,EAAE,EAAGA,EAAEo/B,KAAK8pC,QAAQvoE,OAAQX,IAAK,CACxC,GAAIo/B,KAAK8pC,QAAQlpE,GAAGmnF,OAAQ,CAC1B,OAAO/nD,KAAK8pC,QAAQlpE,GAAGorF,SAK3B,OAAO,IAAInE,MAAM7nD,OAMnB+rD,OAAQ,SAAAA,SACN,IAAI/rD,KAAOhyB,KACX,IAAIi+E,MAAQjsD,KAAKklD,MACjB,IAAIgH,IAAM,EACV,IAAItrF,EAAI,EAGR,GAAIo/B,KAAK8pC,QAAQvoE,OAAS0qF,MAAO,CAC/B,OAIF,IAAKrrF,EAAE,EAAGA,EAAEo/B,KAAK8pC,QAAQvoE,OAAQX,IAAK,CACpC,GAAIo/B,KAAK8pC,QAAQlpE,GAAGmnF,OAAQ,CAC1BmE,OAKJ,IAAKtrF,EAAEo/B,KAAK8pC,QAAQvoE,OAAS,EAAGX,GAAG,EAAGA,IAAK,CACzC,GAAIsrF,KAAOD,MAAO,CAChB,OAGF,GAAIjsD,KAAK8pC,QAAQlpE,GAAGmnF,OAAQ,CAE1B,GAAI/nD,KAAKihD,WAAajhD,KAAK8pC,QAAQlpE,GAAGygF,MAAO,CAC3CrhD,KAAK8pC,QAAQlpE,GAAGygF,MAAM+C,WAAW,GAInCpkD,KAAK8pC,QAAQn+C,OAAO/qB,EAAG,GACvBsrF,SAUN/K,aAAc,SAAAA,aAAS3yC,IACrB,IAAIxO,KAAOhyB,KAEX,UAAWwgC,KAAO,YAAa,CAC7B,IAAI0yC,IAAM,GACV,IAAK,IAAItgF,EAAE,EAAGA,EAAEo/B,KAAK8pC,QAAQvoE,OAAQX,IAAK,CACxCsgF,IAAIv6E,KAAKq5B,KAAK8pC,QAAQlpE,GAAGixC,KAG3B,OAAOqvC,QACF,CACL,MAAO,CAAC1yC,MASZq6C,eAAgB,SAAAA,eAASz7D,OACvB,IAAI4S,KAAOhyB,KAGXof,MAAMi0D,MAAM0H,aAAe90B,OAAO4L,IAAIikB,qBACtC12D,MAAMi0D,MAAM0H,aAAa3rD,OAASouD,MAAMxrD,KAAKylD,MAG7C,GAAIr4D,MAAM++D,QAAS,CACjB/+D,MAAMi0D,MAAM0H,aAAahF,QAAQ32D,MAAM++D,aAClC,CACL/+D,MAAMi0D,MAAM0H,aAAahF,QAAQ32D,MAAMi0D,OAIzCj0D,MAAMi0D,MAAM0H,aAAatzB,KAAOroC,MAAM63D,MACtC,GAAI73D,MAAM63D,MAAO,CACf73D,MAAMi0D,MAAM0H,aAAagC,UAAY39D,MAAMo7D,QAAU,EACrDp7D,MAAMi0D,MAAM0H,aAAaiC,QAAU59D,MAAMq7D,OAAS,EAEpDr7D,MAAMi0D,MAAM0H,aAAaI,aAAapI,eAAe3zD,MAAMk4D,MAAOrxB,OAAO4L,IAAImhB,aAE7E,OAAOhhD,MAQTgqD,aAAc,SAAAA,aAASrB,MACrB,IAAI3oD,KAAOhyB,KACX,IAAIo+E,MAAQn4B,OAAOosB,YAAcpsB,OAAOosB,WAAWgM,OAAO1mF,QAAQ,UAAY,EAE9E,GAAIsuD,OAAOqvB,gBAAkBqF,KAAKI,aAAc,CAC9CJ,KAAKI,aAAa5E,QAAU,KAC5BwE,KAAKI,aAAa3E,WAAW,GAC7B,GAAIgI,MAAO,CACT,IAAMzD,KAAKI,aAAa3rD,OAAS62B,OAAOqvB,eAAkB,MAAM9iF,MAGpEmoF,KAAKI,aAAe,KAEpB,OAAO/oD,MAOTiqD,YAAa,SAAAA,YAAStB,MACpB,IAAI2D,QAAU,kBAAkBh1C,KAAK2c,OAAOosB,YAAcpsB,OAAOosB,WAAW3gE,WAC5E,IAAK4sE,QAAS,CACZ3D,KAAKl/E,IAAM,4FAYjB,IAAIo+E,MAAQ,SAARA,MAAiB0E,MACnBv+E,KAAKw+E,QAAUD,KACfv+E,KAAKqkE,QAEPwV,MAAM/zE,UAAY,CAKhBu+D,KAAM,SAAAA,OACJ,IAAIryC,KAAOhyB,KACX,IAAIqxC,OAASrf,KAAKwsD,QAGlBxsD,KAAKkgD,OAAS7gC,OAAO6gC,OACrBlgD,KAAKilD,MAAQ5lC,OAAO4lC,MACpBjlD,KAAKmgD,QAAU9gC,OAAO8gC,QACtBngD,KAAKslD,MAAQjmC,OAAOimC,MACpBtlD,KAAKooD,MAAQ,EACbpoD,KAAKwkD,QAAU,KACfxkD,KAAK+nD,OAAS,KACd/nD,KAAKwlD,QAAU,YAGfxlD,KAAK6R,MAAQoiB,OAAO4rB,SAGpBxgC,OAAOyqB,QAAQnjE,KAAKq5B,MAGpBA,KAAKt+B,SAEL,OAAOs+B,MAOTt+B,OAAQ,SAAAA,SACN,IAAIs+B,KAAOhyB,KACX,IAAIqxC,OAASrf,KAAKwsD,QAClB,IAAI53B,OAAUX,OAAOisB,QAAUlgD,KAAKkgD,QAAUlgD,KAAKwsD,QAAQtM,OAAU,EAAIlgD,KAAKmgD,QAE9E,GAAI9gC,OAAO4hC,UAAW,CAEpBjhD,KAAKqhD,aAAgBptB,OAAO4L,IAAI4sB,aAAe,YAAex4B,OAAO4L,IAAI6sB,iBAAmBz4B,OAAO4L,IAAI4sB,aACvGzsD,KAAKqhD,MAAMP,KAAKC,eAAensB,OAAQX,OAAO4L,IAAImhB,aAClDhhD,KAAKqhD,MAAMiI,OAAS,KACpBtpD,KAAKqhD,MAAM0C,QAAQ9vB,OAAOqsB,iBACrB,IAAKrsB,OAAO2B,QAAS,CAE1B51B,KAAKqhD,MAAQptB,OAAOowB,oBAGpBrkD,KAAKqrD,SAAWrrD,KAAK2sD,eAAe30E,KAAKgoB,MACzCA,KAAKqhD,MAAMxuE,iBAAiB,QAASmtB,KAAKqrD,SAAU,OAGpDrrD,KAAKsrD,QAAUtrD,KAAK4sD,cAAc50E,KAAKgoB,MACvCA,KAAKqhD,MAAMxuE,iBAAiBohD,OAAOmsB,cAAepgD,KAAKsrD,QAAS,OAGhEtrD,KAAKqhD,MAAM53E,IAAM41C,OAAOomC,KAExBzlD,KAAKqhD,MAAMgE,QAAUhmC,OAAO2lC,OAAS,WAAa,OAClDhlD,KAAKqhD,MAAMzsB,OAASA,OAASX,OAAOW,SAGpC50B,KAAKqhD,MAAMxvD,OAGb,OAAOmO,MAOTgsD,MAAO,SAAAA,QACL,IAAIhsD,KAAOhyB,KACX,IAAIqxC,OAASrf,KAAKwsD,QAGlBxsD,KAAKkgD,OAAS7gC,OAAO6gC,OACrBlgD,KAAKilD,MAAQ5lC,OAAO4lC,MACpBjlD,KAAKmgD,QAAU9gC,OAAO8gC,QACtBngD,KAAKslD,MAAQjmC,OAAOimC,MACpBtlD,KAAKooD,MAAQ,EACbpoD,KAAK6pD,UAAY,EACjB7pD,KAAKwkD,QAAU,KACfxkD,KAAK+nD,OAAS,KACd/nD,KAAKwlD,QAAU,YAGfxlD,KAAK6R,MAAQoiB,OAAO4rB,SAEpB,OAAO7/C,MAMT2sD,eAAgB,SAAAA,iBACd,IAAI3sD,KAAOhyB,KAGXgyB,KAAKwsD,QAAQ3I,MAAM,YAAa7jD,KAAK6R,IAAK7R,KAAKqhD,MAAMp4D,MAAQ+W,KAAKqhD,MAAMp4D,MAAM9nB,KAAO,GAGrF6+B,KAAKqhD,MAAMpyC,oBAAoB,QAASjP,KAAKqrD,SAAU,QAMzDuB,cAAe,SAAAA,gBACb,IAAI5sD,KAAOhyB,KACX,IAAIqxC,OAASrf,KAAKwsD,QAGlBntC,OAAOymC,UAAYthF,KAAKg0B,KAAKwH,KAAKqhD,MAAMgH,SAAW,IAAM,GAGzD,GAAIp7E,OAAOD,KAAKqyC,OAAOmmC,SAASjkF,SAAW,EAAG,CAC5C89C,OAAOmmC,QAAU,CAACqH,UAAW,CAAC,EAAGxtC,OAAOymC,UAAY,MAGtD,GAAIzmC,OAAO0mC,SAAW,SAAU,CAC9B1mC,OAAO0mC,OAAS,SAChB1mC,OAAOwkC,MAAM,QACbxkC,OAAO6oC,aAITloD,KAAKqhD,MAAMpyC,oBAAoBglB,OAAOmsB,cAAepgD,KAAKsrD,QAAS,SAOvE,IAAIE,MAAQ,GAMZ,IAAI1D,WAAa,SAAbA,WAAsB9nD,MACxB,IAAIvV,IAAMuV,KAAKylD,KAGf,GAAI+F,MAAM/gE,KAAM,CAEduV,KAAK8lD,UAAY0F,MAAM/gE,KAAK49D,SAG5ByE,UAAU9sD,MAEV,OAGF,GAAI,sBAAsBsX,KAAK7sB,KAAM,CAEnC,IAAI5hB,KAAOkkF,KAAKtiE,IAAI1kB,MAAM,KAAK,IAC/B,IAAIk6B,SAAW,IAAI9C,WAAWt0B,KAAKtH,QACnC,IAAK,IAAIX,EAAE,EAAGA,EAAEiI,KAAKtH,SAAUX,EAAG,CAChCq/B,SAASr/B,GAAKiI,KAAK6rB,WAAW9zB,GAGhCosF,gBAAgB/sD,SAAS7C,OAAQ4C,UAC5B,CAEL,IAAInV,IAAM,IAAIC,eACdD,IAAIE,KAAK,MAAON,IAAK,MACrBI,IAAIoiE,gBAAkBjtD,KAAK0lD,oBAC3B76D,IAAI0uB,aAAe,cAGnB,GAAIvZ,KAAK4lD,YAAa,CACpB34E,OAAOD,KAAKgzB,KAAK4lD,aAAa1xC,QAAQ,SAASz+B,KAC7CoV,IAAIqiE,iBAAiBz3E,IAAKuqB,KAAK4lD,YAAYnwE,QAI/CoV,IAAI/lB,OAAS,WAEX,IAAI3D,MAAQ0pB,IAAI6uB,OAAS,IAAI,GAC7B,GAAIv4C,OAAS,KAAOA,OAAS,KAAOA,OAAS,IAAK,CAChD6+B,KAAK6jD,MAAM,YAAa,KAAM,0CAA4Ch5D,IAAI6uB,OAAS,KACvF,OAGFszC,gBAAgBniE,IAAI4uB,SAAUzZ,OAEhCnV,IAAI1lB,QAAU,WAEZ,GAAI66B,KAAKihD,UAAW,CAClBjhD,KAAKglD,OAAS,KACdhlD,KAAKihD,UAAY,MACjBjhD,KAAK8pC,QAAU,UACR0hB,MAAM/gE,KACbuV,KAAKnO,SAGTs7D,YAAYtiE,OAQhB,IAAIsiE,YAAc,SAAdA,YAAuBtiE,KACzB,IACEA,IAAIG,OACJ,MAAOxqB,GACPqqB,IAAI1lB,YASR,IAAI6nF,gBAAkB,SAAlBA,gBAA2BI,YAAaptD,MAE1C,IAAI/W,MAAQ,SAARA,QACF+W,KAAK6jD,MAAM,YAAa,KAAM,gCAIhC,IAAIwJ,QAAU,SAAVA,QAAmBjwD,QACrB,GAAIA,QAAU4C,KAAK8pC,QAAQvoE,OAAS,EAAG,CACrCiqF,MAAMxrD,KAAKylD,MAAQroD,OACnB0vD,UAAU9sD,KAAM5C,YACX,CACLnU,UAKJ,UAAWmgE,UAAY,aAAen1B,OAAO4L,IAAImtB,gBAAgBzrF,SAAW,EAAG,CAC7E0yD,OAAO4L,IAAImtB,gBAAgBI,aAAazI,KAAK0I,SAAShE,MAAMpgE,WACvD,CACLgrC,OAAO4L,IAAImtB,gBAAgBI,YAAaC,QAASpkE,SASrD,IAAI6jE,UAAY,SAAZA,UAAqB9sD,KAAM5C,QAE7B,GAAIA,SAAW4C,KAAK8lD,UAAW,CAC7B9lD,KAAK8lD,UAAY1oD,OAAOirD,SAI1B,GAAIp7E,OAAOD,KAAKgzB,KAAKwlD,SAASjkF,SAAW,EAAG,CAC1Cy+B,KAAKwlD,QAAU,CAACqH,UAAW,CAAC,EAAG7sD,KAAK8lD,UAAY,MAIlD,GAAI9lD,KAAK+lD,SAAW,SAAU,CAC5B/lD,KAAK+lD,OAAS,SACd/lD,KAAK6jD,MAAM,QACX7jD,KAAKkoD,eAOT,IAAIrH,kBAAoB,SAApBA,oBAEF,IAAK5sB,OAAOssB,cAAe,CACzB,OAIF,IACE,UAAW+M,eAAiB,YAAa,CACvCr5B,OAAO4L,IAAM,IAAIytB,kBACZ,UAAWC,qBAAuB,YAAa,CACpDt5B,OAAO4L,IAAM,IAAI0tB,uBACZ,CACLt5B,OAAOssB,cAAgB,OAEzB,MAAM//E,GACNyzD,OAAOssB,cAAgB,MAIzB,IAAKtsB,OAAO4L,IAAK,CACf5L,OAAOssB,cAAgB,MAKzB,IAAIiN,IAAO,iBAAiBl2C,KAAK2c,OAAOosB,YAAcpsB,OAAOosB,WAAWoN,UACxE,IAAIC,WAAaz5B,OAAOosB,YAAcpsB,OAAOosB,WAAWqN,WAAW9tE,MAAM,0BACzE,IAAI0gB,QAAUotD,WAAanqD,SAASmqD,WAAW,GAAI,IAAM,KACzD,GAAIF,KAAOltD,SAAWA,QAAU,EAAG,CACjC,IAAIqtD,OAAS,SAASr2C,KAAK2c,OAAOosB,YAAcpsB,OAAOosB,WAAW3gE,UAAUrR,eAC5E,GAAI4lD,OAAOosB,aAAesN,OAAQ,CAChC15B,OAAOssB,cAAgB,OAK3B,GAAItsB,OAAOssB,cAAe,CACxBtsB,OAAOqsB,kBAAqBrsB,OAAO4L,IAAI4sB,aAAe,YAAex4B,OAAO4L,IAAI6sB,iBAAmBz4B,OAAO4L,IAAI4sB,aAC9Gx4B,OAAOqsB,WAAWQ,KAAKC,eAAe9sB,OAAOisB,OAAS,EAAIjsB,OAAOksB,QAASlsB,OAAO4L,IAAImhB,aACrF/sB,OAAOqsB,WAAWyD,QAAQ9vB,OAAO4L,IAAImkB,aAIvC/vB,OAAOysB,UAIT,UAAWkN,SAAW,YAAcA,OAAOC,IAAK,CAC9CD,OAAO,GAAI,WACT,MAAO,CACL35B,OAAQA,OACRD,KAAMA,QAMZ,UAAW3yD,UAAY,YAAa,CAClCA,QAAQ4yD,OAASA,OACjB5yD,QAAQ2yD,KAAOA,KAIjB,UAAWnvD,SAAW,YAAa,CACjCA,OAAO+6E,aAAeA,aACtB/6E,OAAOovD,OAASA,OAChBpvD,OAAOmvD,KAAOA,KACdnvD,OAAOgjF,MAAQA,WACV,UAAWiG,SAAW,YAAa,CACxCA,OAAOlO,aAAeA,aACtBkO,OAAO75B,OAASA,OAChB65B,OAAO95B,KAAOA,KACd85B,OAAOjG,MAAQA,QAr+ElB","file":"app.bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","module.exports = create\n\n/**\n * Creates a new identity mat3\n *\n * @alias mat3.create\n * @returns {mat3} a new 3x3 matrix\n */\nfunction create() {\n  var out = new Float32Array(9)\n  out[0] = 1\n  out[1] = 0\n  out[2] = 0\n  out[3] = 0\n  out[4] = 1\n  out[5] = 0\n  out[6] = 0\n  out[7] = 0\n  out[8] = 1\n  return out\n}\n","module.exports = fromMat4\n\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @alias mat3.fromMat4\n * @param {mat3} out the receiving 3x3 matrix\n * @param {mat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\nfunction fromMat4(out, a) {\n  out[0] = a[0]\n  out[1] = a[1]\n  out[2] = a[2]\n  out[3] = a[4]\n  out[4] = a[5]\n  out[5] = a[6]\n  out[6] = a[8]\n  out[7] = a[9]\n  out[8] = a[10]\n  return out\n}\n","module.exports = copy;\n\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nfunction copy(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n};","module.exports = create;\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\nfunction create() {\n    var out = new Float32Array(16);\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n};","module.exports = invert;\n\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nfunction invert(out, a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15],\n\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32,\n\n        // Calculate the determinant\n        det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n    if (!det) { \n        return null; \n    }\n    det = 1.0 / det;\n\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n\n    return out;\n};","module.exports = multiply;\n\n/**\n * Multiplies two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nfunction multiply(out, a, b) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n    // Cache only the current line of the second matrix\n    var b0  = b[0], b1 = b[1], b2 = b[2], b3 = b[3];  \n    out[0] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[1] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[2] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[3] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[4]; b1 = b[5]; b2 = b[6]; b3 = b[7];\n    out[4] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[5] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[6] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[7] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[8]; b1 = b[9]; b2 = b[10]; b3 = b[11];\n    out[8] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[9] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[10] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[11] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[12]; b1 = b[13]; b2 = b[14]; b3 = b[15];\n    out[12] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[13] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[14] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[15] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n    return out;\n};","module.exports = perspective;\n\n/**\n * Generates a perspective projection matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nfunction perspective(out, fovy, aspect, near, far) {\n    var f = 1.0 / Math.tan(fovy / 2),\n        nf = 1 / (near - far);\n    out[0] = f / aspect;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = f;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = (far + near) * nf;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = (2 * far * near) * nf;\n    out[15] = 0;\n    return out;\n};","module.exports = transpose;\n\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nfunction transpose(out, a) {\n    // If we are transposing ourselves we can skip a few steps but have to cache some values\n    if (out === a) {\n        var a01 = a[1], a02 = a[2], a03 = a[3],\n            a12 = a[6], a13 = a[7],\n            a23 = a[11];\n\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a01;\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a02;\n        out[9] = a12;\n        out[11] = a[14];\n        out[12] = a03;\n        out[13] = a13;\n        out[14] = a23;\n    } else {\n        out[0] = a[0];\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a[1];\n        out[5] = a[5];\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a[2];\n        out[9] = a[6];\n        out[10] = a[10];\n        out[11] = a[14];\n        out[12] = a[3];\n        out[13] = a[7];\n        out[14] = a[11];\n        out[15] = a[15];\n    }\n    \n    return out;\n};","/* eslint global-require:off */\n\n// Startup code.\n\nlet called_once = false;\nwindow.onload = function () {\n  if (called_once) {\n    return;\n  }\n  called_once = true;\n  require('./glov/bootstrap.js');\n  require('./main.js').main();\n};","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\n// Things that should be done before requiring or running any user-level code or other engine code\n\nrequire('./polyfill.js');\n\nlet debug = document.getElementById('debug');\nwindow.onerror = function (e, file, line, col, errorobj) {\n  let msg = `${e}\\n  at ${file}(${line}:${col})`;\n  if (errorobj && errorobj.stack) {\n    msg = `${errorobj.stack}`;\n    if (errorobj.message) {\n      if (msg.indexOf(errorobj.message) === -1) {\n        msg = `${errorobj.message}\\n${msg}`;\n      }\n    }\n    let origin = document.location.origin || '';\n    if (origin) {\n      if (origin.slice(-1) !== '/') {\n        origin += '/';\n      }\n      msg = msg.split(origin).join(''); // replace\n    }\n    // fixup weird Firefox weirdness\n    msg = msg.replace(/\\[\\d+\\]</g, '') // remove funny [123] at start of stack lines\n    .replace(/<?\\/<?/g, '/') // remove funny <s, they mess up people's copy and paste\n    .replace(/\\n([^ ])/g, '\\n  $1'); // add indentation if missing\n  }\n  let show = true;\n  if (window.glov_error_report) {\n    show = window.glov_error_report(msg, file, line, col);\n  }\n  if (show) {\n    debug.innerText = `${msg}\\n\\nPlease report this error to the developer, and then reload this page.`;\n  }\n};\nwindow.debugmsg = function (msg, clear) {\n  if (clear) {\n    debug.innerText = msg;\n  } else {\n    debug.innerText += `${msg}\\n`;\n  }\n};","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint no-shadow:off */\n\nconst engine = require('./engine.js');\n\nconst { round } = Math;\n\nconst safearea_pad = new Float32Array(4); // left, right, top, bottom\n// 0: x0_real\n// 1: y0_real\n// 2: x1_real\n// 3: y1_real\n// 4: x_scale\n// 5: y_scale\n// 6: css_to_real\n// 7: inverse viewport x_scale\n// 8: inverse viewport y_scale\n// 9: x0\n// 10: y0\n// 11: x1\n// 12: y1\nexport const data = new Float32Array(13);\n\nlet screen_width;\nlet screen_height;\n// Note: render_* not used by FRVR at this time\nlet render_width;\nlet render_height;\nexport let render_viewport_w;\nexport let render_viewport_h;\nexport let render_offset_x;\nlet render_offset_y_top;\nexport let render_offset_y_bottom;\n\nfunction reapply() {\n  if (render_width) {\n    data[4] = render_width / (data[2] - data[0]);\n    data[5] = render_height / (data[3] - data[1]);\n    data[7] = (data[2] - data[0]) / render_viewport_w;\n    data[8] = (data[3] - data[1]) / render_viewport_h;\n  } else {\n    data[4] = screen_width / (data[2] - data[0]);\n    data[5] = screen_height / (data[3] - data[1]);\n  }\n}\n\n// To get to coordinates used by OpenGL / canvas\nexport function virtualToCanvas(dst, src) {\n  dst[0] = (src[0] - data[0]) * data[4];\n  dst[1] = (src[1] - data[1]) * data[5];\n}\n\n// Sets the 2D \"camera\" used to translate sprite positions to screen space.  Affects sprites queued\n//  after this call\nexport function set(x0, y0, x1, y1, ignore_safe_area) {\n  if (ignore_safe_area || render_width) {\n    data[9] = data[0] = x0;\n    data[10] = data[1] = y0;\n    data[11] = data[2] = x1;\n    data[12] = data[3] = y1;\n  } else {\n    data[9] = x0;\n    data[10] = y0;\n    data[11] = x1;\n    data[12] = y1;\n    let wscale = (x1 - x0) / (screen_width - safearea_pad[0] - safearea_pad[1]);\n    let hscale = (y1 - y0) / (screen_height - safearea_pad[2] - safearea_pad[3]);\n    data[0] = x0 - safearea_pad[0] * wscale;\n    data[1] = y0 - safearea_pad[2] * hscale;\n    data[2] = x1 + safearea_pad[1] * wscale;\n    data[3] = y1 + safearea_pad[3] * hscale;\n  }\n\n  reapply();\n}\n\nexport function setSafeAreaPadding(left, right, top, bottom) {\n  safearea_pad[0] = round(left);\n  safearea_pad[1] = round(right);\n  safearea_pad[2] = round(top);\n  safearea_pad[3] = round(bottom);\n  // Called while updating screen width/height, reapply() should get called later\n}\n\nexport function safeAreaPadding() {\n  return safearea_pad;\n}\n\nconst stack = [];\nexport function push() {\n  stack.push(data.slice(0));\n}\nexport function pop() {\n  let old = stack.pop();\n  set(old[0], old[1], old[2], old[3], true);\n}\n\nexport function domToCanvasRatio() {\n  return data[6];\n}\n\nexport function screenAspect() {\n  return (screen_width - safearea_pad[0] - safearea_pad[1]) / (screen_height - safearea_pad[2] - safearea_pad[3]);\n}\n\n// Drawing area 0,0-w,h\n// But keep the aspect ratio of those things drawn to be correct\n// This may create a padding or margin on either top and bottom or sides of the screen\n// User users constant values in this range for consistent UI on all devices\nexport function setAspectFixed(w, h) {\n  let pa = render_width ? 1 : engine.pixel_aspect;\n  let inv_aspect = h / pa / w;\n  let inv_desired_aspect;\n  if (render_width) {\n    inv_desired_aspect = render_height / render_width;\n  } else {\n    inv_desired_aspect = 1 / screenAspect();\n  }\n  if (inv_aspect > inv_desired_aspect) {\n    let margin = (h / pa / inv_desired_aspect - w) / 2;\n    set(-margin, 0, w + margin, h, false);\n  } else {\n    let margin = (w * pa * inv_desired_aspect - h) / 2;\n    set(0, -margin, w, h + margin, false);\n  }\n}\n\n// Primary drawing area at least W x H\n// But keep the aspect ratio of those things drawn to be correct\n// Similar to setAspectFixed() but keeps (0,0) in the upper left (all padding\n//   is added to right and bottom)\n// Requires users to use camera2d.w()/ and camera2d.h() to determine reasonable\n//   UI positioning\nexport function setAspectFixed2(w, h) {\n  let pa = render_width ? 1 : engine.pixel_aspect;\n  let inv_aspect = h / pa / w;\n  let inv_desired_aspect;\n  if (render_width) {\n    inv_desired_aspect = render_height / render_width;\n  } else {\n    inv_desired_aspect = 1 / screenAspect();\n  }\n  if (inv_aspect > inv_desired_aspect) {\n    let margin = h / pa / inv_desired_aspect - w;\n    set(0, 0, w + margin, h, false);\n  } else {\n    let margin = w * pa * inv_desired_aspect - h;\n    set(0, 0, w, h + margin, false);\n  }\n}\n\nexport function zoom(x, y, factor) {\n  let inv_factor = 1.0 / factor;\n  set(x - (x - data[0]) * inv_factor, y - (y - data[1]) * inv_factor, x + (data[2] - x) * inv_factor, y + (data[3] - y) * inv_factor, true);\n}\n\nexport function setNormalized() {\n  set(0, 0, 1, 1, true);\n}\n\nexport function x0Real() {\n  return data[0];\n}\nexport function y0Real() {\n  return data[1];\n}\nexport function x1Real() {\n  return data[2];\n}\nexport function y1Real() {\n  return data[3];\n}\nexport function wReal() {\n  return data[2] - data[0];\n}\nexport function hReal() {\n  return data[3] - data[1];\n}\nexport function x0() {\n  return data[9];\n}\nexport function y0() {\n  return data[10];\n}\nexport function x1() {\n  return data[11];\n}\nexport function y1() {\n  return data[12];\n}\nexport function w() {\n  return data[11] - data[9];\n}\nexport function h() {\n  return data[12] - data[10];\n}\nexport function xScale() {\n  return data[4];\n}\nexport function yScale() {\n  return data[5];\n}\n\nexport function htmlPos(x, y) {\n  if (render_width) {\n    return [100 * (((x - data[0]) / data[7] + render_offset_x) / screen_width), 100 * (((y - data[1]) / data[8] + render_offset_y_top) / screen_height)];\n  } else {\n    return [100 * (x - data[0]) / (data[2] - data[0]), 100 * (y - data[1]) / (data[3] - data[1])];\n  }\n}\nexport function htmlSize(w, h) {\n  if (render_width) {\n    return [100 * w / data[7] / screen_width, 100 * h / data[8] / screen_height];\n  } else {\n    return [100 * w / (data[2] - data[0]), 100 * h / (data[3] - data[1])];\n  }\n}\n\nexport function domToVirtual(dst, src) {\n  if (render_width) {\n    dst[0] = (src[0] * data[6] - render_offset_x) * data[7] + data[0];\n    dst[1] = (src[1] * data[6] - render_offset_y_top) * data[8] + data[1];\n  } else {\n    dst[0] = src[0] * data[6] / data[4] + data[0];\n    dst[1] = src[1] * data[6] / data[5] + data[1];\n  }\n}\n\nexport function domDeltaToVirtual(dst, src) {\n  if (render_width) {\n    dst[0] = src[0] * data[6] * data[7];\n    dst[1] = src[1] * data[6] * data[8];\n  } else {\n    dst[0] = src[0] * data[6] / data[4];\n    dst[1] = src[1] * data[6] / data[5];\n  }\n}\n\n// To get to coordinates used by mouse events\nexport function virtualToDom(dst, src) {\n  if (render_width) {\n    dst[0] = (render_offset_x + (src[0] - data[0]) / data[7]) / data[6];\n    dst[1] = (render_offset_y_top + (src[1] - data[1]) / data[8]) / data[6];\n  } else {\n    dst[0] = (src[0] - data[0]) * data[4] / data[6];\n    dst[1] = (src[1] - data[1]) * data[5] / data[6];\n  }\n}\n\nexport function virtualToFontSize(height) {\n  if (render_width) {\n    return height / (data[6] * data[8]) * 0.84;\n  } else {\n    return height * data[5] / data[6] * 0.84;\n  }\n}\n\n// dst/src are x/y/w/h objects (e.g. from input system)\nexport function virtualToDomPosParam(dst, src) {\n  if (render_width) {\n    dst.x = (render_offset_x + (src.x - data[0]) / data[7]) / data[6];\n    dst.w = src.w / data[7] / data[6];\n    dst.y = (render_offset_y_top + (src.y - data[1]) / data[8]) / data[6];\n    dst.h = src.h / data[8] / data[6];\n  } else {\n    dst.x = (src.x - data[0]) * data[4] / data[6];\n    dst.w = src.w * data[4] / data[6];\n    dst.y = (src.y - data[1]) * data[5] / data[6];\n    dst.h = src.h * data[5] / data[6];\n  }\n}\n\nexport function tickCamera2D() {\n  data[6] = window.devicePixelRatio || 1; /* css_to_real */\n  screen_width = engine.width;\n  screen_height = engine.height;\n  let viewport = [0, 0, screen_width, screen_height];\n  if (engine.render_width) {\n    // Note: render_* not used by FRVR at this time\n    render_width = engine.render_width;\n    render_height = engine.render_height;\n    // Find an offset so this rendered viewport is centered while preserving aspect ratio, just like setAspectFixed\n    let pa = engine.pixel_aspect;\n    let inv_aspect = render_height / pa / render_width;\n    let eff_screen_width = screen_width - safearea_pad[0] - safearea_pad[1];\n    let eff_screen_height = screen_height - safearea_pad[2] - safearea_pad[3];\n    let inv_desired_aspect = eff_screen_height / eff_screen_width;\n    if (inv_aspect > inv_desired_aspect) {\n      let margin = (render_height / inv_desired_aspect - render_width * pa) / 2 * eff_screen_height / render_height;\n      render_offset_x = safearea_pad[0] + round(margin);\n      render_offset_y_top = safearea_pad[2];\n      render_offset_y_bottom = safearea_pad[3];\n      render_viewport_w = round(eff_screen_width - margin * 2);\n      render_viewport_h = eff_screen_height;\n    } else {\n      let margin = (render_width * inv_desired_aspect - render_height / pa) / 2 * eff_screen_width / render_width;\n      render_offset_x = safearea_pad[0];\n      render_offset_y_top = safearea_pad[2] + round(margin);\n      render_offset_y_bottom = safearea_pad[3] + round(margin);\n      render_viewport_w = eff_screen_width;\n      render_viewport_h = round(eff_screen_height - margin * 2);\n    }\n    viewport[2] = render_width;\n    viewport[3] = render_height;\n  } else {\n    render_width = render_height = 0;\n    render_offset_x = 0;\n    render_offset_y_top = 0;\n    render_offset_y_bottom = 0;\n  }\n\n  reapply();\n\n  // let screen_width = engine.width;\n  // let screen_height = engine.height;\n  // let screen_aspect = screen_width / screen_height;\n  // let view_aspect = game_width / game_height;\n  // if (screen_aspect > view_aspect) {\n  //   let viewport_width = game_height * screen_aspect;\n  //   let half_diff = (viewport_width - game_width) / 2;\n  //   viewportRectangle = [-half_diff, 0, game_width + half_diff, game_height];\n  // } else {\n  //   let viewport_height = game_width / screen_aspect;\n  //   let half_diff = (viewport_height - game_height) / 2;\n  //   viewportRectangle = [0, -half_diff, game_width, game_height + half_diff];\n  // }\n\n  engine.setViewport(viewport);\n}\n\nexport function startup() {\n  set(0, 0, engine.width, engine.height);\n  tickCamera2D();\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst cmd_parse_mod = require('../../common/cmd_parse.js');\nconst local_storage = require('./local_storage.js');\nexport let cmd_parse = cmd_parse_mod.create({ storage: local_storage });\n\nconst engine = require('./engine.js');\nconst textures = require('./textures.js');\nconst { PI, round } = Math;\n\nwindow.cmd = function (str) {\n  cmd_parse.handle(null, str, cmd_parse_mod.defaultHandler);\n};\n\ncmd_parse.registerValue('fov', {\n  type: cmd_parse.TYPE_FLOAT,\n  label: 'FOV',\n  range: [1, 179],\n  get: () => round(engine.fov_min * 180 / PI),\n  set: v => engine.setFOV(v * PI / 180),\n  store: true\n});\n\nfunction byteFormat(bytes) {\n  if (bytes > 850000) {\n    return `${(bytes / (1024 * 1024)).toFixed(2)}MB`;\n  }\n  if (bytes > 850) {\n    return `${(bytes / 1024).toFixed(2)}KB`;\n  }\n  return `${bytes}B`;\n}\n\ncmd_parse.register({\n  cmd: 'texmem',\n  help: 'Displays texture memory usage',\n  func: function (str, resp_func) {\n    let keys = Object.keys(textures.textures);\n    keys = keys.filter(a => textures.textures[a].gpu_mem > 1024);\n    keys.sort((a, b) => textures.textures[a].gpu_mem - textures.textures[b].gpu_mem);\n    resp_func(null, keys.map(a => `${byteFormat(textures.textures[a].gpu_mem)} ${a}`).join('\\n'));\n  }\n});\n\ncmd_parse.register({\n  cmd: 'gpumem',\n  help: 'Displays GPU memory usage summary',\n  func: function (str, resp_func) {\n    let { gpu_mem } = engine.perf_state;\n    resp_func(null, `${byteFormat(gpu_mem.geom)} Geo\\n${byteFormat(gpu_mem.tex)} Tex\\n${byteFormat(gpu_mem.geom + gpu_mem.tex)} Total`);\n  }\n});\n\ncmd_parse.register({\n  cmd: 'd',\n  help: 'Toggles a debug define',\n  func: function (str, resp_func) {\n    str = str.toUpperCase();\n    engine.defines[str] = !engine.defines[str];\n    resp_func(null, `D=${str} now ${engine.defines[str] ? 'SET' : 'unset'}`);\n  }\n});\n\ncmd_parse.register({\n  cmd: 'renderer',\n  help: 'Displays current renderer',\n  func: function (str, resp_func) {\n    resp_func(null, `Renderer=WebGL${engine.webgl2 ? 2 : 1}`);\n  }\n});\n\nfunction cmdDesc(cmd_data) {\n  return `/${cmd_data.cmd} - ${cmd_data.help}`;\n}\n\ncmd_parse.register({\n  cmd: 'help',\n  help: 'Searches commands',\n  func: function (str, resp_func) {\n    let list = cmd_parse.autoComplete('', this && this.access);\n    if (str) {\n      let str_cname = cmd_parse.canonical(str);\n      let str_lc = str.toLowerCase();\n      list = list.filter(cmd_data => cmd_data.cname.indexOf(str_cname) !== -1 || cmd_data.help.toLowerCase().indexOf(str_lc) !== -1);\n    }\n    if (!list.length) {\n      return void resp_func(null, `No commands found matching \"${str}\"`);\n    }\n    resp_func(null, list.map(cmdDesc).join('\\n'));\n  }\n});\n\nexport let safearea = [-1, -1, -1, -1];\ncmd_parse.registerValue('safe_area', {\n  label: 'Safe Area',\n  type: cmd_parse.TYPE_STRING,\n  usage: 'Safe Area value: Use -1 for auto based on browser environment,\\n' + 'or 0-25 for percentage of screen size\\n' + '  Usage: /safe_area [value]\\n' + '  Usage: /safe_area horizontal,vertical\\n' + '  Usage: /safe_area left,right,top,bottom',\n  default_value: '-1',\n  get: () => safearea[0] === -1 ? '-1 (auto)' : safearea.join(','),\n  set: v => {\n    v = String(v);\n    let keys = v.split(',');\n    if (v && keys.length === 1) {\n      safearea[0] = safearea[1] = safearea[2] = safearea[3] = Number(v);\n    } else if (keys.length === 2) {\n      safearea[0] = safearea[1] = Number(keys[0]);\n      safearea[2] = safearea[3] = Number(keys[1]);\n    } else if (keys.length === 4) {\n      for (let ii = 0; ii < 4; ++ii) {\n        safearea[ii] = Number(keys[ii]);\n      }\n    } else {\n      // error, ignore?\n    }\n  },\n  store: true\n});\n\ncmd_parse.register({\n  cmd: 'webgl2_auto',\n  help: 'Resets WebGL2 auto-detection',\n  func: function (str, resp_func) {\n    let disable_data = local_storage.getJSON('webgl2_disable');\n    if (!disable_data) {\n      return resp_func(null, 'WebGL2 is already being auto-detected');\n    }\n    local_storage.setJSON('webgl2_disable', undefined);\n    return resp_func(null, 'WebGL2 was disabled, will attempt to use it again on the next load');\n  }\n});","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst camera2d = require('./camera2d.js');\nconst engine = require('./engine.js');\nconst glov_input = require('./input.js');\nconst glov_ui = require('./ui.js');\n\nconst { focuslog } = glov_ui;\n\nclass GlovUIEditBox {\n  constructor(params) {\n    this.x = 0;\n    this.y = 0;\n    this.z = Z.UI; // actually in DOM, so above everything!\n    this.w = glov_ui.button_width;\n    this.type = 'text';\n    this.allow_modal = false;\n    // this.h = glov_ui.button_height;\n    this.font_height = glov_ui.font_height;\n    this.text = '';\n    this.placeholder = '';\n    this.max_len = 0;\n    this.initial_focus = false;\n    this.onetime_focus = false;\n    this.auto_unfocus = false;\n    this.initial_select = false;\n    this.spellcheck = true;\n    this.applyParams(params);\n    this.is_focused = false;\n\n    this.elem = null;\n    this.input = null;\n    this.submitted = false;\n    this.pointer_lock = false;\n    this.last_frame = 0;\n  }\n  applyParams(params) {\n    if (!params) {\n      return;\n    }\n    for (let f in params) {\n      this[f] = params[f];\n    }\n  }\n  getText() {\n    return this.text;\n  }\n  setText(new_text) {\n    if (this.input) {\n      this.input.value = new_text;\n    }\n    this.text = new_text;\n  }\n  focus() {\n    if (this.input) {\n      this.input.focus();\n    } else {\n      this.onetime_focus = true;\n    }\n    glov_ui.focusSteal(this);\n    this.is_focused = true;\n    if (this.pointer_lock) {\n      glov_input.pointerLockExit();\n    }\n  }\n  unfocus() {\n    glov_ui.focusNext(this);\n  }\n  isFocused() {\n    // call after .run()\n    return this.is_focused;\n  }\n\n  updateFocus() {\n    let was_glov_focused = this.is_focused;\n    let glov_focused = glov_ui.focusCheck(this);\n    let dom_focused = this.input && document.activeElement === this.input;\n    if (was_glov_focused !== glov_focused) {\n      // something external (from clicks/keys in GLOV) changed, apply it if it doesn't match\n      if (glov_focused && !dom_focused && this.input) {\n        focuslog('GLOV focused, DOM not, focusing', this);\n        this.input.focus();\n      }\n      if (!glov_focused && dom_focused) {\n        focuslog('DOM focused, GLOV not, and changed, blurring', this);\n        this.input.blur();\n      }\n    } else if (dom_focused && !glov_focused) {\n      focuslog('DOM focused, GLOV not, stealing', this);\n      glov_ui.focusSteal(this);\n      glov_focused = true;\n    } else if (!dom_focused && glov_focused) {\n      // Leave it alone, it may be a browser pop-up such as for passwords\n    }\n    let focused = glov_focused;\n\n    if (focused) {\n      let key_opt = this.pointer_lock && !this.text ? { in_event_cb: glov_input.pointerLockEnter } : null;\n      if (glov_input.keyUpEdge(glov_input.KEYS.ESC, key_opt)) {\n        if (this.text) {\n          this.setText('');\n        } else {\n          glov_ui.focusCanvas();\n          if (this.input) {\n            this.input.blur();\n          }\n          focused = false;\n          this.canceled = true;\n        }\n      }\n    }\n    this.is_focused = focused;\n    return focused;\n  }\n\n  run(params) {\n    this.applyParams(params);\n\n    if (this.last_frame !== engine.global_frame_index - 1) {\n      // it's been more than a frame, we must have not been running, discard async events\n      this.submitted = false;\n    }\n    this.last_frame = engine.global_frame_index;\n\n    this.canceled = false;\n    let focused = this.updateFocus();\n\n    glov_ui.this_frame_edit_boxes.push(this);\n    let elem = glov_ui.getElem(this.allow_modal, this.elem);\n    if (elem !== this.elem) {\n      if (elem) {\n        // new DOM element, initialize\n        elem.textContent = '';\n        let form = document.createElement('form');\n        form.setAttribute('autocomplete', 'off');\n        let input = document.createElement('input');\n        input.setAttribute('autocomplete', `auto_off_${Math.random()}`);\n        input.setAttribute('type', this.type);\n        input.setAttribute('placeholder', this.placeholder);\n        if (this.max_len) {\n          input.setAttribute('maxLength', this.max_len);\n        }\n        input.setAttribute('tabindex', 2);\n        form.addEventListener('submit', ev => {\n          ev.preventDefault();\n          this.submitted = true;\n          this.text = this.input.value;\n          if (this.pointer_lock && !this.text) {\n            glov_input.pointerLockEnter('edit_box_submit');\n          }\n        }, true);\n        form.appendChild(input);\n        let span = document.createElement('span');\n        span.setAttribute('tabindex', 3);\n        form.appendChild(span);\n        elem.appendChild(form);\n        input.value = this.text;\n        this.input = input;\n        if (this.initial_focus || this.onetime_focus) {\n          input.focus();\n          this.onetime_focus = false;\n        }\n        if (this.initial_select) {\n          input.select();\n        }\n      } else {\n        this.input = null;\n      }\n      this.submitted = false;\n      this.elem = elem;\n    } else {\n      if (this.input) {\n        this.text = this.input.value;\n      }\n    }\n    if (elem) {\n      let pos = camera2d.htmlPos(this.x, this.y);\n      if (!this.spellcheck) {\n        elem.spellcheck = false;\n      }\n      elem.style.left = `${pos[0]}%`;\n      elem.style.top = `${pos[1]}%`;\n      let size = camera2d.htmlSize(this.w, 0);\n      elem.style.width = `${size[0]}%`;\n      let old_fontsize = elem.style.fontSize || '?px';\n      let new_fontsize = `${camera2d.virtualToFontSize(this.font_height).toFixed(0)}px`;\n      if (new_fontsize !== old_fontsize) {\n        elem.style.fontSize = new_fontsize;\n      }\n    }\n\n    if (focused) {\n      if (this.auto_unfocus) {\n        if (glov_input.click({ peek: true })) {\n          glov_ui.focusSteal('canvas');\n        }\n      }\n      // keyboard input is handled by the INPUT element, but allow mouse events to trickle\n      glov_input.eatAllKeyboardInput();\n    }\n\n    if (this.submitted) {\n      this.submitted = false;\n      return this.SUBMIT;\n    }\n    if (this.canceled) {\n      this.canceled = false;\n      return this.CANCEL;\n    }\n    return null;\n  }\n  unrun() {\n    // remove from DOM or hide\n    this.elem = null;\n    this.input = null;\n  }\n}\nGlovUIEditBox.prototype.SUBMIT = 'submit';\nGlovUIEditBox.prototype.CANCEL = 'cancel';\n\nexport function create(params) {\n  return new GlovUIEditBox(params);\n}","\nconst engine = require('./engine.js'); // Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n// Some code from Turbulenz: Copyright (c) 2012-2013 Turbulenz Limited\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst geom = require('./geom.js');\nconst shaders = require('./shaders.js');\nconst textures = require('./textures.js');\n\nconst { vec2, vec3, vec4, v4set } = require('./vmath.js');\n\nconst shader_data = {\n  vp_copy: {\n    vp: '#pragma WebGL\\nprecision highp float;\\n\\nvarying vec2 interp_texcoord;\\nattribute vec2 POSITION;\\n\\nuniform vec2 copy_uv_scale;\\nuniform vec4 clip_space;\\n\\nvoid main()\\n{\\n  interp_texcoord = POSITION * copy_uv_scale;\\n  gl_Position = vec4(POSITION * clip_space.xy + clip_space.zw, 0, 1);\\n}'\n  },\n  copy: {\n    fp: '#pragma WebGL\\n\\nprecision lowp float;\\n\\nvarying vec2 interp_texcoord;\\n\\nuniform sampler2D inputTexture0;\\nvoid main()\\n{\\n  gl_FragColor = texture2D(inputTexture0, interp_texcoord);\\n}\\n'\n  },\n  pixely_expand: {\n    fp: '// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\\n// Released under MIT License: https://opensource.org/licenses/MIT\\n#pragma WebGL\\n\\nprecision mediump float;\\nprecision mediump int;\\n\\nvarying highp vec2 interp_texcoord;\\nuniform sampler2D inputTexture0; // source\\nuniform sampler2D inputTexture1; // hblur\\nuniform sampler2D inputTexture2; // hblur+vblur\\nuniform vec4 orig_pixel_size;\\n\\n// 1D Gaussian.\\nfloat Gaus(float pos, float scale) {\\n  return exp2(scale*pos*pos);\\n}\\n\\nconst float SHADE = 0.75;\\nconst float EASING = 1.25;\\n\\n#define DO_WARP\\n#ifdef DO_WARP\\n// Display warp.\\n// 0.0 = none\\n// 1.0/8.0 = extreme\\nconst vec2 WARP=vec2(1.0/32.0,1.0/24.0);\\n\\n// Distortion of scanlines, and end of screen alpha.\\nvec2 Warp(vec2 pos){\\n  pos=pos*2.0-1.0;\\n  pos*=vec2(1.0+(pos.y*pos.y)*WARP.x,1.0+(pos.x*pos.x)*WARP.y);\\n  return pos*0.5+0.5;\\n}\\n#else\\n#define Warp(v) v\\n#endif\\n\\nfloat easeInOut(float v) {\\n  float va = pow(v, EASING);\\n  return va / (va + pow((1.0 - v), EASING));\\n}\\n\\nfloat easeIn(float v) {\\n  return 2.0 * easeInOut(0.5 * v);\\n}\\n\\nfloat easeOut(float v) {\\n  return 2.0 * easeInOut(0.5 + 0.5 * v) - 1.0;\\n}\\n\\nvoid main()\\n{\\n  vec2 texcoords = Warp(interp_texcoord);\\n  vec2 intcoords = (floor(texcoords.xy * orig_pixel_size.xy) + 0.5) * orig_pixel_size.zw;\\n  vec2 deltacoords = (texcoords.xy - intcoords) * orig_pixel_size.xy; // -0.5 ... 0.5\\n  // for horizontal sampling, map [-0.5 .. -A .. A .. 0.5] -> [-0.5 .. 0 .. 0 .. 0.5];\\n  float A = 0.25;\\n  float Ainv = (0.5 - A) * 2.0;\\n  float uoffs = clamp((abs(deltacoords.x) - A) / Ainv, 0.0, 1.0) * orig_pixel_size.z;\\n  uoffs *= sign(deltacoords.x);\\n  vec2 sample_coords = vec2(intcoords.x + uoffs, intcoords.y);\\n  // sample_coords = intcoords;\\n  vec3 color = texture2D(inputTexture1, sample_coords).rgb;\\n  vec3 color_scanline = texture2D(inputTexture2, texcoords.xy + vec2(0.0, 0.5 * orig_pixel_size.w)).rgb * SHADE;\\n  // color_scanline = vec3(0);\\n\\n  // float mask = Gaus(deltacoords.y, -12.0);\\n  float mask = easeOut(2.0*(0.5 - abs(deltacoords.y)));\\n  // float mask = abs(deltacoords.y) > 0.25 ? 0.0 : 1.0;\\n  color = mix(color_scanline, color, mask);\\n  // color = vec3(mask);\\n\\n#ifdef DO_WARP\\n  // vignette\\n  float dist = min(1.0, 100.0 * min(0.5 - abs(texcoords.x - 0.5), 0.5 - abs(texcoords.y - 0.5)));\\n  color *= 0.5 + 0.5 * dist;\\n#endif\\n\\n  gl_FragColor = vec4(color, 1.0);\\n  // gl_FragColor = vec4(color_scanline, 1.0);\\n  // gl_FragColor = vec4(sample_coords, 0.0, 1.0);\\n}\\n'\n  },\n  gaussian_blur: {\n    fp: '#pragma WebGL\\n\\nprecision lowp float;\\n\\nvarying vec2 interp_texcoord;\\n\\nvec4 _ret_0;\\nvec4 _TMP2;\\nvec4 _TMP1;\\nvec2 _c0022;\\nvec2 _c0024;\\nuniform vec3 sampleRadius;\\nuniform sampler2D inputTexture0;\\n\\nvoid main()\\n{\\n  vec2 uv = interp_texcoord;\\n  vec2 step = sampleRadius.xy;\\n  float glow = sampleRadius.z;\\n  gl_FragColor =\\n    ((texture2D(inputTexture0, uv - step * 3.0) + texture2D(inputTexture0, uv + step * 3.0)) * 0.085625 +\\n    (texture2D(inputTexture0, uv - step * 2.0) + texture2D(inputTexture0, uv + step * 2.0)) * 0.12375 +\\n    (texture2D(inputTexture0, uv - step * 1.0) + texture2D(inputTexture0, uv + step * 1.0)) * 0.234375 +\\n    texture2D(inputTexture0, uv) * 0.3125) * 0.83333333333333333333333333333333 * glow;\\n}\\n'\n  },\n  // bloom_merge: {\n  //   fp: fs.readFileSync(`${__dirname}/shaders/effects_bloom_merge.fp`, 'utf8'),\n  // },\n  // bloom_threshold: {\n  //   fp: fs.readFileSync(`${__dirname}/shaders/effects_bloom_threshold.fp`, 'utf8'),\n  // },\n  color_matrix: {\n    fp: '#pragma WebGL\\n\\nprecision lowp float;\\n\\nvarying vec2 interp_texcoord;\\n\\nuniform vec4 colorMatrix[3];\\nuniform sampler2D tex0;\\n\\nvoid main()\\n{\\n  vec4 _color;\\n  vec4 _mutc;\\n  _color = texture2D(tex0, interp_texcoord);\\n  _mutc = _color;\\n  _mutc.w = 1.0;\\n  vec3 _r0019;\\n  _r0019.x = dot(colorMatrix[0], _mutc);\\n  _r0019.y = dot(colorMatrix[1], _mutc);\\n  _r0019.z = dot(colorMatrix[2], _mutc);\\n  _mutc.xyz = _r0019;\\n  _mutc.w = _color.w;\\n  gl_FragColor = _mutc;\\n}'\n  }\n  // distort: {\n  //   fp: fs.readFileSync(`${__dirname}/shaders/effects_distort.fp`, 'utf8'),\n  // },\n};\n\nexport function registerShader(key, obj) {\n  shader_data[key] = obj;\n}\n\nfunction getShader(key) {\n  let elem = shader_data[key];\n  if (!elem.shader) {\n    if (elem.fp) {\n      elem.shader = shaders.create(gl.FRAGMENT_SHADER, key, elem.fp);\n    } else {\n      elem.shader = shaders.create(gl.VERTEX_SHADER, key, elem.vp);\n    }\n  }\n  return elem.shader;\n}\n\nlet inited = false;\nlet clip_space = vec4(2, 2, -1, -1);\nlet copy_uv_scale = vec2(1, 1);\nlet shader_params_default = {\n  clip_space,\n  copy_uv_scale\n};\n// let shader_params_distort;\nlet shader_params_color_matrix;\n// let shader_params_bloom;\n// let shader_params_bloom_merge;\nlet shader_params_gaussian_blur;\nlet shader_params_pixely_expand;\nlet quad_geom;\nfunction startup() {\n  inited = true;\n\n  quad_geom = geom.create([[shaders.semantic.POSITION, gl.FLOAT, 2, false]], new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]), null, geom.QUADS); // TODO: use gl.TRIANGLE_STRIP instead, save index buffer binding\n\n  // shader_params_distort = {\n  //   clip_space,\n  //   copy_uv_scale,\n  //   strength: vec2(0, 0),\n  //   transform: new Float32Array([0, 0, 0, 0, 0, 0]),\n  //   invTransform: vec4(0, 0, 0, 0),\n  // };\n\n  shader_params_color_matrix = {\n    clip_space,\n    copy_uv_scale,\n    colorMatrix: new Float32Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])\n  };\n\n  // shader_params_bloom = {\n  //   clip_space,\n  //   copy_uv_scale,\n  //   bloomThreshold: 0,\n  //   thresholdCuttoff: 0,\n  // };\n\n  // shader_params_bloom_merge = {\n  //   clip_space,\n  //   copy_uv_scale,\n  //   bloomIntensity: 0,\n  //   bloomSaturation: 0,\n  //   originalIntensity: 0,\n  //   originalSaturation: 0,\n  // };\n\n  // Gaussian Blur effect (also used by bloom)\n  shader_params_gaussian_blur = {\n    clip_space,\n    copy_uv_scale,\n    sampleRadius: vec3(1, 1, 1),\n    Gauss: new Float32Array([0.93, 0.8, 0.7, 0.6, 0.5, 0.4, 0.3, 0.2, 0.1])\n  };\n\n  shader_params_pixely_expand = {\n    clip_space,\n    copy_uv_scale,\n    orig_pixel_size: vec4()\n  };\n}\n\nexport function grayScaleMatrix(dst) {\n  dst[0] = 0.2126;\n  dst[1] = 0.2126;\n  dst[2] = 0.2126;\n  dst[3] = 0.7152;\n  dst[4] = 0.7152;\n  dst[5] = 0.7152;\n  dst[6] = 0.0722;\n  dst[7] = 0.0722;\n  dst[8] = 0.0722;\n  dst[9] = dst[10] = dst[11] = 0;\n}\n\nexport function sepiaMatrix(dst) {\n  dst[0] = 0.393;\n  dst[1] = 0.349;\n  dst[2] = 0.272;\n  dst[3] = 0.769;\n  dst[4] = 0.686;\n  dst[5] = 0.534;\n  dst[6] = 0.189;\n  dst[7] = 0.168;\n  dst[8] = 0.131;\n  dst[9] = dst[10] = dst[11] = 0;\n}\n\nexport function negativeMatrix(dst) {\n  dst[0] = dst[4] = dst[8] = -1;\n  dst[1] = dst[2] = dst[3] = dst[5] = dst[6] = dst[7] = 0;\n  dst[9] = dst[10] = dst[11] = 1;\n}\n\nexport function saturationMatrix(dst, saturationScale) {\n  let is = 1 - saturationScale;\n  dst[0] = is * 0.2126 + saturationScale;\n  dst[1] = is * 0.2126;\n  dst[2] = is * 0.2126;\n  dst[3] = is * 0.7152;\n  dst[4] = is * 0.7152 + saturationScale;\n  dst[5] = is * 0.7152;\n  dst[6] = is * 0.0722;\n  dst[7] = is * 0.0722;\n  dst[8] = is * 0.0722 + saturationScale;\n  dst[9] = dst[10] = dst[11] = 0;\n}\n\nexport function hueMatrix(dst, angle) {\n  ////\n  //// Uncomment to calculate new coeffecients should luminance\n  //// values 0.2126 0.7152 0.0722 change.\n  //let lumR = 0.2126;\n  //let lumG = 0.7152;\n  //let lumB = 0.0722;\n  ////\n  //let r23 = Math.sqrt(2 / 3);\n  //let r12 = 1 / Math.sqrt(2);\n  //let r13 = 1 / Math.sqrt(3);\n  //let r16 = 1 / Math.sqrt(6);\n  //let M = [r23, 0, r13, -r16, r12, r13, -r16, -r12, r13, 0, 0, 0];\n  //let zx = (r23 * lumR) - (r16 * lumG) - (r16 * lumB);\n  //let zy =                (r12 * lumG) - (r12 * lumB);\n  //let zz = (r13 * lumR) + (r13 * lumG) + (r13 * lumB);\n  //let x = zx / zz;\n  //let y = zy / zz;\n  //let C = [1, 0, x, 0, 1, y, 0, 0, 1, 0, 0, 0];\n  //m43mul(M, M, C);\n  //console.log(\"Pre transform = \", M);\n  //let E = [1, 0, -x, 0, 1, -y, 0, 0, 1, 0, 0, 0];\n  //let N = [r23, -r16, -r16, 0, r12, -r12, r13, r13, r13, 0, 0, 0];\n  //m43mul(N, E, N);\n  //console.log(\"Post transform = \", N);\n  ////\n  //// Final matrix is then: m43Mul(Pre, [c, s, 0, -s, c, 0, 0, 0, 1, 0, 0, 0, ], Post);\n  //// for c = cos(angle), s = sin(angle)\n  ////\n  //let out = \"\";\n  //out += \"let c = Math.cos(angle);\\n\";\n  //out += \"let s = Math.sin(angle);\\n\";\n  //out += \"dst[0] = (\" + (N[0]*M[0]+N[3]*M[1]) + \" * c) + (\" + (N[3]*M[0]-N[0]*M[1]) + \" * s) + \" + lumR+\";\\n\";\n  //out += \"dst[1] = (\" + (-lumR)               + \" * c) + (\" + (N[4]*M[0]-N[1]*M[1]) + \" * s) + \" + lumR+\";\\n\";\n  //out += \"dst[2] = (\" + (-lumR)               + \" * c) + (\" + (N[5]*M[0]-N[2]*M[1]) + \" * s) + \" + lumR+\";\\n\";\n  //out += \"dst[3] = (\" + (-lumG)               + \" * c) + (\" + (N[3]*M[3]-N[0]*M[4]) + \" * s) + \" + lumG+\";\\n\";\n  //out += \"dst[4] = (\" + (N[1]*M[3]+N[4]*M[4]) + \" * c) + (\" + (N[4]*M[3]-N[1]*M[4]) + \" * s) + \" + lumG+\";\\n\";\n  //out += \"dst[5] = (\" + (-lumG)               + \" * c) + (\" + (N[5]*M[3]-N[2]*M[4]) + \" * s) + \" + lumG+\";\\n\";\n  //out += \"dst[6] = (\" + (-lumB)               + \" * c) + (\" + (N[3]*M[6]-N[0]*M[7]) + \" * s) + \" + lumB+\";\\n\";\n  //out += \"dst[7] = (\" + (-lumB)               + \" * c) + (\" + (N[4]*M[6]-N[1]*M[7]) + \" * s) + \" + lumB+\";\\n\";\n  //out += \"dst[8] = (\" + (N[2]*M[6]+N[5]*M[7]) + \" * c) + (\" + (N[5]*M[6]-N[2]*M[7]) + \" * s) + \" + lumB+\";\\n\";\n  //console.log(out);\n  let c = Math.cos(angle);\n  let s = Math.sin(angle);\n  dst[0] = 0.7874 * c + -0.3712362230889293 * s + 0.2126;\n  dst[1] = -0.2126 * c + 0.20611404610069642 * s + 0.2126;\n  dst[2] = -0.2126 * c + -0.9485864922785551 * s + 0.2126;\n  dst[3] = -0.7152 * c + -0.4962902913954023 * s + 0.7152;\n  dst[4] = 0.2848 * c + 0.08105997779422341 * s + 0.7152;\n  dst[5] = -0.7152 * c + 0.6584102469838492 * s + 0.7152;\n  dst[6] = -0.0722 * c + 0.8675265144843316 * s + 0.0722;\n  dst[7] = -0.0722 * c + -0.28717402389491986 * s + 0.0722;\n  dst[8] = 0.9278 * c + 0.290176245294706 * s + 0.0722;\n  dst[9] = dst[10] = dst[11] = 0;\n}\n\nexport function brightnessAddMatrix(dst, brightnessOffset) {\n  dst[0] = dst[4] = dst[8] = 1;\n  dst[1] = dst[2] = dst[3] = dst[5] = dst[6] = dst[7] = 0;\n  dst[9] = dst[10] = dst[11] = brightnessOffset;\n}\n\nexport function brightnessScaleMatrix(dst, scale) {\n  dst[0] = dst[4] = dst[8] = scale;\n  dst[1] = dst[2] = dst[3] = dst[5] = dst[6] = dst[7] = 0;\n  dst[9] = dst[10] = dst[11] = 0;\n}\n\nexport function additiveMatrix(dst, additiveRGB) {\n  dst[0] = dst[4] = dst[8] = 1;\n  dst[1] = dst[2] = dst[3] = dst[5] = dst[6] = dst[7] = 0;\n  dst[9] = additiveRGB[0];\n  dst[10] = additiveRGB[1];\n  dst[11] = additiveRGB[2];\n}\n\nexport function contrastMatrix(dst, contrastScale) {\n  dst[0] = dst[4] = dst[8] = contrastScale;\n  dst[1] = dst[2] = dst[3] = dst[5] = dst[6] = dst[7] = 0;\n  dst[9] = dst[10] = dst[11] = 0.5 * (1 - contrastScale);\n}\n\n// effect: { shader, params, texs }\nfunction applyEffect(effect, view_w, view_h) {\n  let viewport = engine.viewport;\n  let target_w = viewport[2];\n  let target_h = viewport[3];\n  view_w = view_w || target_w;\n  view_h = view_h || target_h;\n\n  // Set values for parameters used by all effects\n  clip_space[0] = 2.0 * view_w / target_w;\n  clip_space[1] = 2.0 * view_h / target_h;\n  // clip_space[2] = -1.0;\n  // clip_space[3] = -1.0;\n  // copy_uv_scale[0] = target_w / effect.coord_source.width;\n  // copy_uv_scale[1] = target_h / effect.coord_source.height;\n\n  shaders.bind(getShader('vp_copy'), getShader(effect.shader), effect.params);\n  textures.bindArray(effect.texs);\n  quad_geom.draw();\n}\n\n// // TODO: Update for RTBBCTT and port to new GLOV.js\n// function applyBloomTODO(params) {\n//   let source = params.source;\n//   let blur1 = params.blurTarget1;\n//   let blur2 = params.blurTarget2;\n//   let dest = params.destination;\n//   if (!source || !dest || !blur1 || !blur2 || !blur1.colorTexture0 ||\n//     !blur2.colorTexture0 || blur1 === blur2 || blur1 === dest ||\n//     source === blur1.colorTexture0 || source === dest.colorTexture0) {\n//     return false;\n//   }\n//\n//   let effectParams = this.effectParams;\n//   let techparams;\n//\n//   // Threshold copy.\n//   techparams = this.bloomThresholdParameters;\n//   effectParams.technique = this.bloomThresholdTechnique;\n//   effectParams.params = techparams;\n//\n//   techparams.bloomThreshold = (params.bloomThreshold !== undefined) ? params.bloomThreshold : 0.65;\n//   techparams.thresholdCutoff = Math.exp((params.thresholdCutoff !== undefined) ? params.thresholdCutoff : 3);\n//   techparams.inputTexture0 = source;\n//   effectParams.destination = blur1;\n//   this.applyEffect(effectParams);\n//\n//   // Gaussian blur.\n//   techparams = this.gaussianBlurParameters;\n//   effectParams.technique = this.gaussianBlurTechnique;\n//   effectParams.params = techparams;\n//\n//   let sampleRadius = (params.blurRadius || 20);\n//   techparams.sampleRadius[0] = sampleRadius / source.width;\n//   techparams.sampleRadius[1] = 0;\n//   techparams.sampleRadius[2] = 1;\n//   techparams.inputTexture0 = blur1.colorTexture0;\n//   effectParams.destination = blur2;\n//   this.applyEffect(effectParams);\n//\n//   techparams.sampleRadius[0] = 0;\n//   techparams.sampleRadius[1] = sampleRadius / source.height;\n//   techparams.sampleRadius[2] = 1;\n//   techparams.inputTexture0 = blur2.colorTexture0;\n//   effectParams.destination = blur1;\n//   this.applyEffect(effectParams);\n//\n//   // Merge.\n//   techparams = this.bloomMergeParameters;\n//   effectParams.technique = this.bloomMergeTechnique;\n//   effectParams.params = techparams;\n//\n//   techparams.bloomIntensity = (params.bloomIntensity !== undefined) ? params.bloomIntensity : 1.2;\n//   techparams.bloomSaturation = (params.bloomSaturation !== undefined) ? params.bloomSaturation : 1.2;\n//   techparams.originalIntensity = (params.originalIntensity !== undefined) ? params.originalIntensity : 1.0;\n//   techparams.originalSaturation = (params.originalSaturation !== undefined) ? params.originalSaturation : 1.0;\n//   techparams.inputTexture0 = source;\n//   techparams.inputTexture1 = blur1.colorTexture0;\n//   effectParams.destination = dest;\n//   this.applyEffect(effectParams);\n//\n//   return true;\n// }\n\nexport function applyCopy(params) {\n  if (!inited) {\n    startup();\n  }\n  applyEffect({\n    shader: params.shader || 'copy',\n    params: shader_params_default,\n    texs: [params.source]\n  });\n}\n\nexport function applyPixelyExpand(params) {\n  if (!inited) {\n    startup();\n  }\n  let source = params.source;\n  source.setSamplerState({\n    filter_min: gl.LINEAR,\n    filter_mag: gl.LINEAR,\n    wrap_s: gl.CLAMP_TO_EDGE,\n    wrap_t: gl.CLAMP_TO_EDGE\n  });\n\n  // do horizontal blur for primary lines\n  let resx = source.width;\n  let resy = source.height;\n  let sampleRadius = (params.hblur || 0.25) / resx;\n  shader_params_gaussian_blur.sampleRadius[0] = sampleRadius;\n  shader_params_gaussian_blur.sampleRadius[1] = 0;\n  shader_params_gaussian_blur.sampleRadius[2] = 1;\n  applyEffect({\n    shader: 'gaussian_blur',\n    params: shader_params_gaussian_blur,\n    texs: [source]\n  }, resx, resy);\n  let hblur = engine.captureFramebuffer(null, resx, resy, true, false);\n\n  // do seperable gaussian blur for scanlines (using horizontal blur from above)\n  sampleRadius = (params.vblur || 0.75) / resy;\n  shader_params_gaussian_blur.sampleRadius[0] = 0;\n  shader_params_gaussian_blur.sampleRadius[1] = sampleRadius;\n  shader_params_gaussian_blur.sampleRadius[2] = 1;\n  applyEffect({\n    shader: 'gaussian_blur',\n    params: shader_params_gaussian_blur,\n    texs: [hblur]\n  }, resx, resy);\n  let vblur = engine.captureFramebuffer(null, resx, resy, true, false);\n\n  // combine at full res\n  v4set(shader_params_pixely_expand.orig_pixel_size, source.width, source.height, 1 / source.width, 1 / source.height);\n\n  engine.setViewport(params.final_viewport);\n  if (params.clear_color) {\n    gl.clearColor(params.clear_color[0], params.clear_color[1], params.clear_color[2], params.clear_color[3]);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n  }\n\n  applyEffect({\n    shader: 'pixely_expand',\n    params: shader_params_pixely_expand,\n    texs: [source, hblur, vblur]\n  });\n}\n\nexport function applyGaussianBlur(params) {\n  if (!inited) {\n    startup();\n  }\n  let source = params.source;\n  source.setSamplerState({\n    filter_min: gl.LINEAR,\n    filter_mag: gl.LINEAR,\n    wrap_s: gl.CLAMP_TO_EDGE,\n    wrap_t: gl.CLAMP_TO_EDGE\n  });\n  let max_size = params.max_size || 512;\n  let min_size = params.min_size || 128;\n\n  // Quick shrink down to 512->256->128 (or other specified min/max size)\n  let inputTexture0 = source;\n\n  let viewport = engine.viewport;\n  let res = max_size;\n  while (res > viewport[2] || res > viewport[3]) {\n    res /= 2;\n  }\n\n  while (res > min_size) {\n    applyEffect({\n      shader: params.shader_copy || 'copy',\n      params: shader_params_default,\n      texs: [inputTexture0]\n    }, res, res);\n    inputTexture0 = engine.captureFramebuffer(null, res, res, true, false);\n    res /= 2;\n  }\n\n  // Do seperable blur\n  let sampleRadius = (params.blur || 1) / res;\n  shader_params_gaussian_blur.sampleRadius[0] = sampleRadius;\n  shader_params_gaussian_blur.sampleRadius[1] = 0;\n  shader_params_gaussian_blur.sampleRadius[2] = params.glow || 1;\n  applyEffect({\n    shader: 'gaussian_blur',\n    params: shader_params_gaussian_blur,\n    texs: [inputTexture0]\n  }, res, res);\n  let blur = engine.captureFramebuffer(null, res, res, true, false);\n\n  shader_params_gaussian_blur.sampleRadius[0] = 0;\n  shader_params_gaussian_blur.sampleRadius[1] = sampleRadius;\n  shader_params_gaussian_blur.sampleRadius[2] = params.glow || 1;\n  applyEffect({\n    shader: 'gaussian_blur',\n    params: shader_params_gaussian_blur,\n    texs: [blur]\n  });\n\n  return true;\n}\n\nexport function applyColorMatrix(params) {\n  if (!inited) {\n    startup();\n  }\n  let source = params.source;\n  source.setSamplerState({\n    filter_min: gl.LINEAR,\n    filter_mag: gl.LINEAR,\n    wrap_s: gl.CLAMP_TO_EDGE,\n    wrap_t: gl.CLAMP_TO_EDGE\n  });\n\n  let matrix = params.colorMatrix;\n  let mout = shader_params_color_matrix.colorMatrix;\n\n  mout[0] = matrix[0];\n  mout[1] = matrix[3];\n  mout[2] = matrix[6];\n  mout[3] = matrix[9];\n  mout[4] = matrix[1];\n  mout[5] = matrix[4];\n  mout[6] = matrix[7];\n  mout[7] = matrix[10];\n  mout[8] = matrix[2];\n  mout[9] = matrix[5];\n  mout[10] = matrix[8];\n  mout[11] = matrix[11];\n\n  applyEffect({\n    shader: 'color_matrix',\n    params: shader_params_color_matrix,\n    texs: [source]\n  });\n\n  return true;\n}\n\n// // TODO: Update for RTBBCTT and port to new GLOV.js\n// export function applyDistortTODO(params) {\n//   let source = params.source;\n//   let dest = params.destination;\n//   let distort = params.distortion;\n//   if (!source || !dest || !distort || !dest.colorTexture0 ||\n//     source === dest.colorTexture0 || distort === dest.colorTexture0) {\n//     return false;\n//   }\n//\n//   // input transform.\n//   //  a b tx\n//   //  c d ty\n//   let a;\n//   let b;\n//   let c;\n//   let d;\n//   let tx;\n//   let ty;\n//\n//   let transform = params.transform;\n//   if (transform) {\n//     // transform col-major.\n//     a = transform[0];\n//     b = transform[2];\n//     tx = transform[4];\n//     c = transform[1];\n//     d = transform[3];\n//     ty = transform[5];\n//   } else {\n//     a = d = 1;\n//     b = c = 0;\n//     tx = ty = 0;\n//   }\n//\n//   let effectParams = this.effectParams;\n//   let techparams = this.distortParameters;\n//   effectParams.technique = this.distortTechnique;\n//   effectParams.params = techparams;\n//\n//   // TODO: Cache 'transform', 'invTransform', etc in the code below\n//   techparams.transform[0] = a;\n//   techparams.transform[1] = b;\n//   techparams.transform[2] = tx;\n//   techparams.transform[3] = c;\n//   techparams.transform[4] = d;\n//   techparams.transform[5] = ty;\n//\n//   // Compute inverse transform to use in distort texture displacement..\n//   let idet = 1 / (a * d - b * c);\n//   let ia = techparams.invTransform[0] = (idet * d);\n//   let ib = techparams.invTransform[1] = (idet * -b);\n//   let ic = techparams.invTransform[2] = (idet * -c);\n//   let id = techparams.invTransform[3] = (idet * a);\n//\n//   // Compute max pixel offset after transform for normalisation.\n//   let x1 = ((ia + ib) * (ia + ib)) + ((ic + id) * (ic + id));\n//   let x2 = ((ia - ib) * (ia - ib)) + ((ic - id) * (ic - id));\n//   let x3 = ((-ia + ib) * (-ia + ib)) + ((-ic + id) * (-ic + id));\n//   let x4 = ((-ia - ib) * (-ia - ib)) + ((-ic - id) * (-ic - id));\n//   let xmax = 0.5 * Math.sqrt(Math.max(x1, x2, x3, x4));\n//\n//   let strength = (params.strength || 10);\n//   techparams.strength[0] = strength / (source.width * xmax);\n//   techparams.strength[1] = strength / (source.height * xmax);\n//\n//   techparams.inputTexture0 = source;\n//   techparams.distortTexture = distort; // linear / repeat\n//   effectParams.destination = dest;\n//   this.applyEffect(effectParams);\n//\n//   return true;\n// }","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint-env browser */\n\nrequire('./bootstrap.js'); // Just in case it's not in app.js\n\nexport let DEBUG = String(document.location).indexOf('http://localhost') === 0;\n\nrequire('not_worker'); // This module cannot be required from a worker bundle\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst cmds = require('./cmds.js');\nconst effects = require('./effects.js');\nconst glov_font = require('./font.js');\nconst font_info_palanquin32 = require('../img/font/palanquin32.json');\nconst geom = require('./geom.js');\nconst input = require('./input.js');\nconst local_storage = require('./local_storage.js');\nconst mat3FromMat4 = require('gl-mat3/fromMat4');\nconst mat4Copy = require('gl-mat4/copy');\nconst mat4Invert = require('gl-mat4/invert');\nconst mat4Mul = require('gl-mat4/multiply');\nconst mat4Transpose = require('gl-mat4/transpose');\nconst mat4Perspective = require('gl-mat4/perspective');\nconst { asin, cos, floor, min, max, PI, round, sin, sqrt } = Math;\nconst models = require('./models.js');\nconst perf = require('./perf.js');\nconst settings = require('./settings.js');\nconst shaders = require('./shaders.js');\nconst { soundLoading, soundStartup, soundTick } = require('./sound.js');\nconst sprites = require('./sprites.js');\nconst textures = require('./textures.js');\nconst glov_transition = require('./transition.js');\nconst glov_ui = require('./ui.js');\nconst urlhash = require('./urlhash.js');\nconst { clamp, defaults, nearSame, ridx } = require('../../common/util.js');\nconst { mat3, mat4, vec3, vec4, v3mulMat4, v3iNormalize, v4copy, v4same, v4set } = require('./vmath.js');\n\nexport let canvas;\nexport let webgl2;\nexport let glov_particles;\n\nexport let width;\nexport let height;\nexport let pixel_aspect = 1;\nexport let antialias;\n\nexport let game_width;\nexport let game_height;\n\nexport let render_width;\nexport let render_height;\n\n//eslint-disable-next-line no-use-before-define\nexport let defines = urlhash.register({ key: 'D', type: urlhash.TYPE_SET, change: definesChanged });\nlet initial_define_forcewebgl2 = defines.FORCEWEBGL2;\nlet initial_define_nowebgl2 = defines.NOWEBGL2;\nfunction definesChanged() {\n  if (defines.FORCEWEBGL2 !== initial_define_forcewebgl2 || defines.NOWEBGL2 !== initial_define_nowebgl2) {\n    document.location.reload();\n  }\n}\n\nexport let any_3d = false;\nexport let ZFAR;\nexport let ZNEAR;\nexport let fov_y = 1;\nexport let fov_x = 1;\nexport let fov_min = 60 * PI / 180;\n\nexport let mat_projection = mat4();\nexport let mat_view = mat4();\nlet mat_m = mat4();\nexport let mat_vp = mat4();\nlet mat_mv = mat4();\nlet mat_mv_no_skew = mat4();\nlet mat_mvp = mat4();\nlet mat_mv_inv_transform = mat3();\nlet projection_inverse = vec4();\n\nexport let light_diffuse = vec3(0.75, 0.75, 0.75);\nlet light_dir_vs = vec3(0, 0, 0);\nexport let light_ambient = vec3(0.25, 0.25, 0.25);\nexport let light_dir_ws = vec3(-1, -2, -3);\n\nexport let font;\nexport let app_state = null;\nexport const border_color = vec4(0, 0, 0, 1);\n\nexport function setGlobalMatrices(_mat_view) {\n  mat4Copy(mat_view, _mat_view);\n  mat4Mul(mat_vp, mat_projection, mat_view);\n  v3iNormalize(light_dir_ws);\n  v3mulMat4(light_dir_vs, light_dir_ws, mat_view);\n}\n\nexport function setFOV(new_fov) {\n  fov_min = new_fov;\n}\n\nexport function setGameDims(w, h) {\n  game_width = w;\n  game_height = h;\n}\n\nlet is_ios_safari = function () {\n  let ua = window.navigator.userAgent;\n  let is_ios = ua.match(/iPad/i) || ua.match(/iPhone/i);\n  let webkit = ua.match(/WebKit/i);\n  return is_ios && webkit && !ua.match(/CriOS/i);\n}();\n\n// Didn't need this for a while, but got slow on iOS recently :(\nconst postprocessing_reset_version = '3';\nexport let postprocessing = local_storage.get('glov_no_postprocessing') !== postprocessing_reset_version;\nexport function postprocessingAllow(allow) {\n  local_storage.set('glov_no_postprocessing', allow ? undefined : postprocessing_reset_version);\n  postprocessing = allow;\n}\n\nfunction normalizeRow(m, idx) {\n  let len = m[idx] * m[idx] + m[idx + 1] * m[idx + 1] + m[idx + 2] * m[idx + 2];\n  if (len > 0) {\n    len = 1 / sqrt(len);\n    m[idx] *= len;\n    m[idx + 1] *= len;\n    m[idx + 2] *= len;\n  }\n}\n\nlet mat_temp = mat4();\nexport function updateMatrices(mat_model) {\n  // PERFTODO: depending on rendering path, only some of these are needed (m + vp or just mvp)\n  mat4Copy(mat_m, mat_model);\n\n  mat4Mul(mat_mv, mat_view, mat_model);\n  mat4Mul(mat_mvp, mat_projection, mat_mv);\n  // TODO: Can expand and simplify all of this, especially below\n  // Compute the inverse transform of thee model_view matrix, discarding scale,\n  // to be used for getting normals into view space\n  mat4Copy(mat_temp, mat_model);\n  normalizeRow(mat_temp, 0);\n  normalizeRow(mat_temp, 4);\n  normalizeRow(mat_temp, 8);\n  mat4Mul(mat_mv_no_skew, mat_view, mat_temp);\n  mat4Invert(mat_temp, mat_mv_no_skew);\n  mat4Transpose(mat_temp, mat_temp);\n  mat3FromMat4(mat_mv_inv_transform, mat_temp);\n}\nexport let global_timer = 0;\nexport function getFrameTimestamp() {\n  return global_timer;\n}\n\nexport let global_frame_index = 0;\nexport function getFrameIndex() {\n  return global_frame_index;\n}\n\nexport let this_frame_time = 0;\nexport function getFrameDt() {\n  return this_frame_time;\n}\n\nexport let hrtime = 0;\n\n// Wall time, may contain large jumps, may be 0 or negative\nlet this_frame_time_actual = 0;\nexport function getFrameDtActual() {\n  return this_frame_time_actual;\n}\n\nlet after_loading_state = null;\nexport let is_loading = true;\nexport function setState(new_state) {\n  if (is_loading) {\n    after_loading_state = new_state;\n  } else {\n    app_state = new_state;\n  }\n}\n\nexport function stateActive(test_state) {\n  if (is_loading) {\n    return after_loading_state === test_state;\n  } else {\n    return app_state === test_state;\n  }\n}\n\nlet mspf = 1000;\nlet mspf_update_time = 0;\nlet mspf_frame_count = 0;\nlet last_tick_cpu = 0;\nlet mspf_tick = 1000;\n// let net_time = 1000;\nlet mspf_tick_accum = 0;\n// let net_time_accum = 0;\nexport const PERF_HISTORY_SIZE = 128;\nexport let perf_state = window.glov_perf_state = {\n  fpsgraph: {\n    index: 0,\n    history: new Float32Array(PERF_HISTORY_SIZE * 2)\n  },\n  gpu_mem: {\n    tex: 0,\n    geom: 0\n  }\n};\nlet fpsgraph = perf_state.fpsgraph;\n\nperf.addMetric({\n  name: 'fps',\n  show_stat: 'show_fps', // always, if we're showing any metrics\n  show_graph: 'fps_graph',\n  labels: {\n    'fps: ': () => (1000 / mspf).toFixed(1),\n    'ms/f: ': () => mspf.toFixed(0),\n    'cpu: ': () => mspf_tick.toFixed(0)\n    // 'net: ': () => net_time.toFixed(0),\n  },\n  data: fpsgraph, // contain .index and .history (stride of colors.length)\n  line_scale_top: 50,\n  colors: [\n  // vec4(0.161, 0.678, 1, 1), // net time\n  vec4(1, 0.925, 0.153, 1), // cpu/tick time\n  vec4(0, 0.894, 0.212, 1)],\n  interactable: DEBUG\n});\n\nlet do_borders = true;\nlet do_viewport_postprocess = false;\nlet need_repos = 0;\n\nlet app_tick_functions = [];\nexport function addTickFunc(cb) {\n  app_tick_functions.push(cb);\n}\n\nlet post_tick = [];\nexport function postTick(ticks, fn) {\n  assert.equal(typeof fn, 'function');\n  post_tick.push({ ticks, fn });\n}\n\nlet temporary_textures = {};\n\nfunction resetEffects() {\n  for (let key in temporary_textures) {\n    let temp = temporary_textures[key];\n    // Release unused textures\n    while (temp.list.length > temp.idx) {\n      temp.list.pop().destroy();\n    }\n    if (!temp.idx) {\n      delete temporary_textures[key];\n    } else {\n      temp.idx = 0;\n    }\n  }\n}\n\nconst SAFARI_FULLSCREEN_ASPECT = function () {\n  let screen = window.screen;\n  if (!is_ios_safari || !screen) {\n    return 0;\n  }\n  const SAFARI_DIMS = { // wxh : [fullscreen aspect]\n    // iPhone XR\n    // iPhone 11 Pro Max\n    // iPhone XS Max\n    // iPhone 11\n    '896,414': 896 / 414,\n    // iPhone 11 Pro\n    // iPhone X (probably)\n    '812,375': 812 / 375,\n    // iPhone 8 Plus\n    '736,414': 736 / 414,\n    // iPhone 6s+\n    // iPhone 6+\n    '716,414': 736 / 414, // (screen.availWidth reports 20 less)\n    // iPhone 8\n    // iPhone 7 (10.1)\n    // iPhone 7 (11.4)\n    '667,375': 667 / 375,\n    // iPhone 6s\n    // iPhone 6\n    '647,375': 667 / 375, // (screen.availWidth reports 20 less)\n    // iPhone 5s\n    '548,320': 568 / 320 // (screen.availWidth reports 20 less)\n  };\n  let key = `${max(screen.availWidth, screen.availHeight)},${min(screen.availWidth, screen.availHeight)}`;\n  return SAFARI_DIMS[key] || 0;\n}();\nfunction safariTopSafeArea(view_w, view_h) {\n  // Detect if the URL bar is hidden, but should be a safe area\n  if (SAFARI_FULLSCREEN_ASPECT && nearSame(view_w / view_h, SAFARI_FULLSCREEN_ASPECT, 0.001)) {\n    // Note: if user has scaling enabled, the padding required might be different\n    //   but the same holds true for the safe area padding detected via CSS!\n    return 50 * (window.devicePixelRatio || 1); // seems to be 50pts on all devices\n  }\n  return 0;\n}\n\nlet last_canvas_width;\nlet last_canvas_height;\nlet last_body_height;\nlet safearea_elem;\nlet safearea_ignore_bottom = false;\nlet safearea_values = [0, 0, 0, 0];\nlet last_safearea_values = [0, 0, 0, 0];\nfunction checkResize() {\n  // use VisualViewport on at least iOS Safari - deal with tabs and keyboard\n  //   shrinking the viewport without changing the window height\n  let vv = window.visualViewport || {};\n  let css_to_real = window.devicePixelRatio || 1;\n  let view_w = vv.width || window.innerWidth;\n  let view_h = vv.height || window.innerHeight;\n  if (view_h !== last_body_height) {\n    // set this *before* getting canvas and safearea_elem dims below\n    last_body_height = view_h;\n    document.body.style.height = `${view_h}px`;\n  }\n  let new_width = round(canvas.clientWidth * css_to_real) || 1;\n  let new_height = round(canvas.clientHeight * css_to_real) || 1;\n\n  if (cmds.safearea[0] === -1) {\n    if (safearea_elem) {\n      let sa_width = safearea_elem.offsetWidth;\n      let sa_height = safearea_elem.offsetHeight;\n      if (sa_width && sa_height) {\n        v4set(safearea_values, safearea_elem.offsetLeft * css_to_real, new_width - (sa_width + safearea_elem.offsetLeft) * css_to_real, max(safearea_elem.offsetTop * css_to_real, safariTopSafeArea(view_w, view_h)),\n        // Note: Possibly ignoring bottom safe area, it seems not useful on iPhones (does not\n        //  adjust when keyboard is up, only obscured in the middle, if obeying left/right safe area)\n        safearea_ignore_bottom ? 0 : new_height - (sa_height + safearea_elem.offsetTop) * css_to_real);\n      }\n    }\n  } else {\n    v4set(safearea_values, new_width * clamp(cmds.safearea[0], 0, 25) / 100, new_width * clamp(cmds.safearea[1], 0, 25) / 100, new_height * clamp(cmds.safearea[2], 0, 25) / 100, new_height * clamp(cmds.safearea[3], 0, 25) / 100);\n  }\n  if (!v4same(safearea_values, last_safearea_values)) {\n    v4copy(last_safearea_values, safearea_values);\n    camera2d.setSafeAreaPadding(safearea_values[0], safearea_values[1], safearea_values[2], safearea_values[3]);\n    need_repos = max(need_repos, 1);\n  }\n\n  if (new_width !== last_canvas_width || new_height !== last_canvas_height) {\n    window.pixel_scale = css_to_real; // for debug\n    last_canvas_width = canvas.width = new_width || 1;\n    last_canvas_height = canvas.height = new_height || 1;\n    // For the next 10 frames, make sure font size is correct\n    need_repos = 10;\n  }\n  if (is_ios_safari && (window.visualViewport || need_repos)) {\n    // we have accurate view information, or screen was just rotated / resized\n    // force scroll to top\n    window.scroll(0, 0);\n  }\n}\n\nexport let viewport = vec4(0, 0, 1, 1);\nexport function setViewport(xywh) {\n  v4copy(viewport, xywh);\n  gl.viewport(xywh[0], xywh[1], xywh[2], xywh[3]);\n}\n\nlet last_temp_idx = 0;\nexport function getTemporaryTexture(w, h) {\n  let key = w ? `${w}_${h}` : 'screen';\n  let temp = temporary_textures[key];\n  if (!temp) {\n    temp = temporary_textures[key] = { list: [], idx: 0 };\n  }\n  if (temp.idx >= temp.list.length) {\n    let tex = textures.createForCapture(`temp_${key}_${++last_temp_idx}`);\n    temp.list.push(tex);\n  }\n  let tex = temp.list[temp.idx++];\n  return tex;\n}\n\nexport function captureFramebuffer(tex, w, h, do_filter_linear, do_wrap) {\n  if (!w && render_width) {\n    w = render_width;\n    h = render_height;\n  }\n  if (!tex) {\n    tex = getTemporaryTexture(w, h);\n  }\n  if (w) {\n    tex.copyTexImage(viewport[0], viewport[1], w, h);\n  } else {\n    tex.copyTexImage(0, 0, width, height);\n  }\n  tex.setSamplerState({\n    filter_min: do_filter_linear ? gl.LINEAR : gl.NEAREST,\n    filter_mag: do_filter_linear ? gl.LINEAR : gl.NEAREST,\n    wrap_s: do_wrap ? gl.REPEAT : gl.CLAMP_TO_EDGE,\n    wrap_t: do_wrap ? gl.REPEAT : gl.CLAMP_TO_EDGE\n  });\n  return tex;\n}\n\nfunction requestFrame() {\n  let max_fps = settings.max_fps;\n  if (defines.SLOWLOAD && is_loading) {\n    // Safari on CrossBrowserTesting needs this in order to have some time to load/decode audio data\n    // TODO: Instead, generally, if loading, compare last_tick_cpu vs dt, and if\n    //   we're not idle for at least half of the time and we have *internal*\n    //   loads (textures, sounds, models, NOT user code), delay so that we are.\n    max_fps = 2;\n  }\n  if (max_fps) {\n    // eslint-disable-next-line no-use-before-define\n    setTimeout(tick, round(1000 / max_fps));\n  } else {\n    // eslint-disable-next-line no-use-before-define\n    requestAnimationFrame(tick);\n  }\n}\n\nlet mat_projection_10;\nexport let had_3d_this_frame;\n\nexport function setupProjection(use_fov_y, use_width, use_height, znear, zfar) {\n  mat4Perspective(mat_projection, use_fov_y, use_width / use_height, znear, zfar);\n  mat_projection_10 = mat_projection[10];\n  v4set(projection_inverse, 2 / (use_width * mat_projection[0]), // projection_matrix.m00),\n  2 / (use_height * mat_projection[5]), // projection_matrix.m11),\n  -(1 + mat_projection[8]) / mat_projection[0], // projection_matrix.m20) / projection_matrix.m00,\n  -(1 + mat_projection[9]) / mat_projection[5] // projection_matrix.m21) / projection_matrix.m11\n  );\n}\n\nexport function start3DRendering() {\n  had_3d_this_frame = true;\n  gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n  gl.enable(gl.BLEND);\n  gl.enable(gl.DEPTH_TEST);\n  gl.depthMask(true);\n\n  setupProjection(fov_y, width, height, ZNEAR, ZFAR);\n\n  gl.viewport(viewport[0], viewport[1], viewport[2], viewport[3]);\n  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT); // eslint-disable-line no-bitwise\n  gl.enable(gl.CULL_FACE);\n}\n\nexport function projectionZBias(dist, at_z) {\n  if (!dist) {\n    mat_projection[10] = mat_projection_10;\n    return;\n  }\n  //let e = 2 * ZFAR * ZNEAR / (ZFAR - ZNEAR) * (dist / (at_z * (at_z + dist)));\n  let e = 0.2 * (dist / (at_z * (at_z + dist)));\n  e = max(e, 2e-7);\n  mat_projection[10] = mat_projection_10 + e;\n}\n\nfunction fixNatives(is_startup) {\n  // If any browser extensions have added things to the Array prototype, remove them!\n  let b = [];\n  for (let a in b) {\n    console[is_startup ? 'log' : 'error'](`Found invasive enumerable property \"${a}\" on Array.prototype, removing...`);\n    let old_val = b[a];\n    delete Array.prototype[a];\n    // If this fails to work, perhaps try using Object.preventExtensions(Array.prototype) in an inline header script?\n    // eslint-disable-next-line no-extend-native\n    Object.defineProperty(Array.prototype, a, { value: old_val, enumerable: false });\n  }\n  for (let a in b) {\n    // Failed: code that iterates arrays will fail\n    assert(false, `Array.prototype has unremovable member ${a}`);\n  }\n}\n\nexport const hrnow = window.performance ? window.performance.now.bind(window.performance) : Date.now.bind(Date);\n\nlet last_tick = 0;\nfunction tick(timestamp) {\n  // if (timestamp < 1e12) { // high resolution timer\n  //   this ends up being a value way back in time, relative to what hrnow() returns,\n  //   causing timing confusion, so ignore it, just call hrnow()\n  //   hrtime = timestamp;\n  // } else { // probably integer milliseconds since epoch, or nothing\n  hrtime = hrnow();\n  // }\n  requestFrame();\n  let now = round(hrtime); // Code assumes integer milliseconds\n  if (!last_tick) {\n    last_tick = now;\n  }\n  this_frame_time_actual = now - last_tick;\n  let dt = min(max(this_frame_time_actual, 1), 250);\n  this_frame_time = dt;\n  last_tick = now;\n  global_timer += dt;\n  ++global_frame_index;\n\n  fixNatives(false);\n\n  // let this_net_time = wsclient.getNetTime();\n  // fpsgraph.history[(fpsgraph.index % PERF_HISTORY_SIZE) * 3 + 0] = this_net_time;\n  fpsgraph.history[fpsgraph.index % PERF_HISTORY_SIZE * 2 + 1] = this_frame_time_actual;\n  fpsgraph.index++;\n  fpsgraph.history[fpsgraph.index % PERF_HISTORY_SIZE * 2 + 0] = 0;\n\n  ++mspf_frame_count;\n  mspf_tick_accum += last_tick_cpu;\n  // net_time_accum += this_net_time;\n  if (now - mspf_update_time > 1000) {\n    if (!mspf_update_time) {\n      mspf_update_time = now;\n    } else {\n      mspf = (now - mspf_update_time) / mspf_frame_count;\n      mspf_tick = mspf_tick_accum / mspf_frame_count;\n      mspf_tick_accum = 0;\n      // net_time = net_time_accum / mspf_frame_count;\n      // net_time_accum = 0;\n      mspf_frame_count = 0;\n      mspf_update_time = now;\n    }\n  }\n\n  if (document.hidden || document.webkitHidden) {\n    resetEffects();\n    last_tick_cpu = 0;\n    // Maybe post-tick here too?\n    return;\n  }\n\n  had_3d_this_frame = false;\n  checkResize();\n  width = canvas.width;\n  height = canvas.height;\n\n  if (any_3d) {\n    // setting the fov values for the frame even if we don't do 3D this frame, because something\n    // might need it before start3DRendering() (e.g. mouse click inverse projection)\n    if (width > height) {\n      fov_y = fov_min;\n      let rise = width / height * sin(fov_y / 2) / cos(fov_y / 2);\n      fov_x = 2 * asin(rise / sqrt(rise * rise + 1));\n    } else {\n      fov_x = fov_min;\n      let rise = height / width * sin(fov_x / 2) / cos(fov_x / 2);\n      fov_y = 2 * asin(rise / sqrt(rise * rise + 1));\n    }\n  }\n  textures.bind(0, textures.textures.error);\n\n  camera2d.tickCamera2D();\n  camera2d.setAspectFixed(game_width, game_height);\n\n  soundTick(dt);\n  input.tickInput();\n  glov_ui.tickUI(dt);\n\n  if (need_repos) {\n    --need_repos;\n    let ul = [];\n    camera2d.virtualToDom(ul, [0, 0]);\n    let lr = [];\n    camera2d.virtualToDom(lr, [game_width - 1, game_height - 1]);\n    let viewport2 = [ul[0], ul[1], lr[0], lr[1]];\n    let view_height = viewport2[3] - viewport2[1];\n    // default font size of 16 when at height of game_height\n    let font_size = min(256, max(2, floor(view_height / 800 * 16)));\n    let elem_fullscreen = document.getElementById('fullscreen');\n    if (elem_fullscreen) {\n      elem_fullscreen.style['font-size'] = `${font_size}px`;\n    }\n  }\n\n  if (do_borders) {\n    // Borders\n    glov_ui.drawRect(camera2d.x0Real(), camera2d.y0Real(), camera2d.x1Real(), 0, Z.BORDERS, border_color);\n    glov_ui.drawRect(camera2d.x0Real(), game_height, camera2d.x1Real(), camera2d.y1Real(), Z.BORDERS, border_color);\n    glov_ui.drawRect(camera2d.x0Real(), 0, 0, game_height, Z.BORDERS, border_color);\n    glov_ui.drawRect(game_width, 0, camera2d.x1Real(), game_height, Z.BORDERS, border_color);\n  }\n\n  if (settings.show_metrics) {\n    perf.draw();\n  }\n\n  for (let ii = 0; ii < app_tick_functions.length; ++ii) {\n    app_tick_functions[ii](dt);\n  }\n  if (app_state) {\n    app_state(dt);\n  }\n\n  glov_particles.tick(dt); // *after* app_tick, so newly added/killed particles can be queued into the draw list\n  glov_transition.render(dt);\n\n  if (had_3d_this_frame) {\n    gl.disable(gl.CULL_FACE);\n  } else {\n    // delayed clear (and general GL init) until after app_state, app might change clear color\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n    gl.enable(gl.BLEND);\n    gl.disable(gl.DEPTH_TEST);\n    gl.depthMask(false);\n    gl.viewport(viewport[0], viewport[1], viewport[2], viewport[3]);\n    // TODO: for do_viewport_post_process, we need to enable gl.scissor to avoid clearing the whole screen!\n    // gl.scissor(0, 0, viewport[2] - viewport[0], viewport[3] - viewport[1]);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n  }\n\n  sprites.draw();\n\n  glov_ui.endFrame();\n\n  if (render_width) {\n    let source = captureFramebuffer();\n    let clear_color = [0, 0, 0, 1];\n    let final_viewport = [camera2d.render_offset_x, camera2d.render_offset_y_bottom, camera2d.render_viewport_w, camera2d.render_viewport_h];\n    if (do_viewport_postprocess) {\n      effects.applyPixelyExpand({ source, final_viewport, clear_color });\n    } else {\n      if (clear_color) {\n        gl.clearColor(clear_color[0], clear_color[1], clear_color[2], clear_color[3]);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n      }\n      setViewport(final_viewport);\n      // gl.scissor(0, 0, width, height);\n      effects.applyCopy({ source });\n    }\n  }\n\n  input.endFrame();\n  resetEffects();\n\n  for (let ii = post_tick.length - 1; ii >= 0; --ii) {\n    if (! --post_tick[ii].ticks) {\n      post_tick[ii].fn();\n      ridx(post_tick, ii);\n    }\n  }\n\n  last_tick_cpu = hrnow() - now;\n  fpsgraph.history[fpsgraph.index % PERF_HISTORY_SIZE * 2 + 0] = last_tick_cpu;\n}\n\nlet error_report_details = {};\nlet error_report_details_str = '';\nexport function setErrorReportDetails(key, value) {\n  if (value) {\n    error_report_details[key] = escape(String(value));\n  } else {\n    delete error_report_details[key];\n  }\n  error_report_details_str = `&${Object.keys(error_report_details).map(k => `${k}=${error_report_details[k]}`).join('&')}`;\n}\nsetErrorReportDetails('ver', BUILD_TIMESTAMP);\nlet last_error_time = 0;\nlet crash_idx = 0;\n// Errors from plugins that we don't want to get reported to us, or show the user!\nlet filtered_errors = /avast_submit|vc_request_action/;\nfunction glovErrorReport(msg, file, line, col) {\n  ++crash_idx;\n  let now = Date.now();\n  let dt = now - last_error_time;\n  last_error_time = now;\n  if (dt < 30 * 1000) {\n    // Less than 30 seconds since the last error, either we're erroring every\n    // frame, or this is a secondary error caused by the first, do not report it.\n    // Could maybe hash the error message and just report each message once, and\n    // flag errors as primary or secondary.\n    return false;\n  }\n  if (msg.match(filtered_errors)) {\n    return false;\n  }\n  // Post to an error reporting endpoint that (probably) doesn't exist - it'll get in the logs anyway!\n  let url = urlhash.getURLBase(); // base like http://foo.com/bar/index.html or http://foo.com/bar/\n  let idx = url.lastIndexOf('/'); // Remove anything after the last slash\n  if (idx !== -1 && idx > 8) {\n    // > 'https://'.length\n    url = url.slice(0, idx + 1);\n  }\n  url += `errorReport?cidx=${crash_idx}&file=${escape(file)}&line=${line}&col=${col}&url=${escape(location.href)}` + `&msg=${escape(msg)}${error_report_details_str}`;\n  let xhr = new XMLHttpRequest();\n  xhr.open('POST', url, true);\n  xhr.send(null);\n  return true;\n}\n\nexport function startup(params) {\n  fixNatives(true);\n\n  canvas = document.getElementById('canvas');\n  safearea_elem = document.getElementById('safearea');\n\n  if (params.error_report !== false) {\n    window.glov_error_report = glovErrorReport;\n  }\n\n  safearea_ignore_bottom = params.safearea_ignore_bottom || false;\n\n  // resize the canvas to fill browser window dynamically\n  window.addEventListener('resize', checkResize, false);\n  checkResize();\n\n  let is_pixely = params.pixely && params.pixely !== 'off';\n  antialias = params.antialias || !is_pixely && params.antialias !== false;\n  let powerPreference = params.high ? 'high-performance' : 'default';\n  let context_names = ['webgl2', 'webgl', 'experimental-webgl'];\n  let force_webgl1 = defines.NOWEBGL2;\n  let disable_data = local_storage.getJSON('webgl2_disable');\n  // Check if a previous, recent run had an error that hinted we should disable WebGL2\n  if (disable_data && disable_data.ua === navigator.userAgent && disable_data.ts > Date.now() - 7 * 24 * 60 * 60 * 1000) {\n    console.log('Disabling WebGL2 because a previous run encountered a related error');\n    force_webgl1 = true;\n  }\n  if (DEBUG && !defines.FORCEWEBGL2) {\n    let rc = local_storage.getJSON('run_count', 0) + 1;\n    local_storage.setJSON('run_count', rc);\n    if (rc % 2) {\n      force_webgl1 = true;\n    }\n  }\n  if (force_webgl1) {\n    context_names.splice(0, 1);\n  }\n  let context_opts = [{ antialias, powerPreference }, { powerPreference }, {}];\n  let good = false;\n  webgl2 = false;\n  for (let i = 0; !good && i < context_names.length; i += 1) {\n    for (let jj = 0; !good && jj < context_opts.length; ++jj) {\n      try {\n        window.gl = canvas.getContext(context_names[i], context_opts[jj]);\n        if (window.gl) {\n          if (context_names[i] === 'webgl2') {\n            webgl2 = true;\n          }\n          good = true;\n          break;\n        }\n      } catch (e) {\n        // ignore\n      }\n    }\n  }\n  if (!good) {\n    // eslint-disable-next-line no-alert\n    window.alert('Sorry, but your browser does not support WebGL or does not have it enabled.');\n    document.getElementById('loading').style.visibility = 'hidden';\n    document.getElementById('nowebgl').style.visibility = 'visible';\n    return false;\n  }\n  console.log(`Using WebGL${webgl2 ? 2 : 1}`);\n\n  assert(gl);\n  canvas.focus();\n  width = canvas.width;\n  height = canvas.height;\n  game_width = params.game_width || 1280;\n  game_height = params.game_height || 960;\n  any_3d = params.any_3d || false;\n  ZNEAR = params.znear || 0.7;\n  ZFAR = params.zfar || 10000;\n  if (params.pixely === 'strict') {\n    render_width = game_width;\n    render_height = game_height;\n    if (params.viewport_postprocess) {\n      do_viewport_postprocess = true;\n    }\n  } else {\n    render_width = undefined;\n    render_height = undefined;\n  }\n  pixel_aspect = params.pixel_aspect || 1;\n\n  gl.depthFunc(gl.LEQUAL);\n  // gl.enable(gl.SCISSOR_TEST);\n  if (!any_3d) {\n    gl.disable(gl.CULL_FACE);\n  }\n  gl.cullFace(gl.BACK);\n  gl.clearColor(0, 0.1, 0.2, 1);\n  gl.pixelStorei(gl.UNPACK_ALIGNMENT, 1); // Allow RGB texture data with non-mult-4 widths\n\n  textures.startup();\n  geom.startup();\n  shaders.startup({\n    light_diffuse,\n    light_dir_vs,\n    ambient: light_ambient,\n    mat_m: mat_m,\n    mat_mv: mat_mv,\n    mat_vp: mat_vp,\n    mvp: mat_mvp,\n    mv_inv_trans: mat_mv_inv_transform,\n    view: mat_view,\n    projection: mat_projection,\n    projection_inverse\n  });\n  camera2d.startup();\n  sprites.startup();\n  input.startup(canvas, params);\n  if (any_3d) {\n    models.startup();\n  }\n\n  /* eslint-disable global-require */\n  glov_particles = require('./particles.js').create();\n\n  if (is_pixely) {\n    textures.defaultFilters(gl.NEAREST, gl.NEAREST);\n  } else {\n    textures.defaultFilters(gl.LINEAR_MIPMAP_LINEAR, gl.LINEAR);\n  }\n\n  const font_info_04b03x2 = require('../img/font/04b03_8x2.json');\n  const font_info_04b03x1 = require('../img/font/04b03_8x1.json');\n  if (params.font) {\n    font = glov_font.create(params.font.info, params.font.texture);\n  } else if (params.pixely === 'strict') {\n    font = glov_font.create(font_info_04b03x1, 'font/04b03_8x1');\n  } else if (is_pixely) {\n    font = glov_font.create(font_info_04b03x2, 'font/04b03_8x2');\n  } else {\n    font = glov_font.create(font_info_palanquin32, 'font/palanquin32');\n  }\n  params.font = font;\n  glov_ui.startup(params);\n\n  soundStartup(params.sound);\n  glov_ui.bindSounds(defaults(params.ui_sounds || {}, {\n    button_click: 'button_click',\n    rollover: 'rollover'\n  }));\n\n  camera2d.setAspectFixed(game_width, game_height);\n\n  if (params.state) {\n    setState(params.state);\n  }\n  if (params.do_borders !== undefined) {\n    do_borders = params.do_borders;\n  }\n  if (params.show_fps !== undefined) {\n    settings.show_fps = params.show_fps;\n  }\n\n  requestFrame();\n  return true;\n}\n\nexport function loadsPending() {\n  return textures.load_count + soundLoading() + models.load_count;\n}\n\nfunction loading() {\n  let load_count = loadsPending();\n  let elem_loading_text = document.getElementById('loading_text');\n  if (elem_loading_text) {\n    elem_loading_text.innerText = `Loading (${load_count})...`;\n  }\n  if (!load_count) {\n    is_loading = false;\n    app_state = after_loading_state;\n    // Clear after next frame, so something is rendered to the canvas\n    postTick(2, function () {\n      let loading_elem = document.getElementById('loading');\n      if (loading_elem) {\n        loading_elem.style.visibility = 'hidden';\n      }\n    });\n  }\n}\napp_state = loading;\n\nwindow.glov_engine = exports;","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint no-bitwise:off, complexity:off, no-shadow:off */\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\n\nconst { floor, max, round } = Math;\nconst shaders = require('./shaders.js');\nconst sprites = require('./sprites.js');\nconst textures = require('./textures.js');\nconst { clamp } = require('../../common/util.js');\nconst { vec4, v4clone, v4scale } = require('./vmath.js');\n\n/*\n\nfont_style = glov_font.style(null, {\n  color: 0xFFFFFFff,\n  outline_width: 0,\n  outline_color: 0x00000000,\n  glow_xoffs: 0,\n  glow_yoffs: 0,\n  glow_inner: 0,\n  glow_outer: 0,\n  glow_color: 0x000000ff,\n});\n\n */\n\n// typedef struct FontCharInfo {\n//   int c;\n//   float x0;\n//   float y0;\n//   int w;\n//   int h;\n//   int imgIdx;\n// } FontCharInfo;\n\n// typedef struct FontInfo {\n//   AS_NAME(CharInfo) FontCharInfo **char_infos;\n//   int font_size;\n//   float x0;\n//   float y0;\n//   int imageW;\n//   int imageH;\n//   int spread;\n// } FontInfo;\n\nexport const COLOR_MODE = {\n  SINGLE: 0,\n  GRADIENT: 1\n};\n\nexport const ALIGN = {\n  HLEFT: 0,\n  HCENTER: 1,\n  HRIGHT: 2,\n  HMASK: 3,\n\n  VTOP: 0 << 2,\n  VCENTER: 1 << 2,\n  VBOTTOM: 2 << 2,\n  VMASK: 3 << 2,\n\n  HFIT: 1 << 4,\n  HWRAP: 1 << 5, // only for glovMarkup*, not drawSizedAligned below, use drawSizedWrapped below instead\n\n  HCENTERFIT: 1 | 1 << 4,\n  HVCENTER: 1 | 1 << 2, // to avoid doing bitwise ops elsewhere\n  HVCENTERFIT: 1 | 1 << 2 | 1 << 4 // to avoid doing bitwise ops elsewhere\n};\n\n// typedef struct GlovFontStyle\n// {\n//   // These members will never be changed (safe to initialize with GlovFontStyle foo = {1.0, 0xfff, etc};\n//   float outline_width;\n//   U32 outline_color;\n//   // Glow: can be used for a dropshadow as well\n//   //   inner can be negative to have the glow be less opaque (can also just change the alpha of the glow color)\n//   //   a glow would be e.g. (0, 0, -1, 5)\n//   //   a dropshadow would be e.g. (3.25, 3.25, -2.5, 5)\n//   float glow_xoffs;\n//   float glow_yoffs;\n//   float glow_inner;\n//   float glow_outer;\n//   U32 glow_color;\n//   U32 color; // upper left, or single color\n//   U32 colorUR; // upper right\n//   U32 colorLR; // lower right\n//   U32 colorLL; // lower left\n//   GlovFontColorMode color_mode;\n// } GlovFontStyle;\n\n/* Default GlovFontStyle:\n  font_style = {\n    outline_width: 0, outline_color: 0x00000000,\n    glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 0, glow_color: 0x00000000,\n    color: 0xFFFFFFff\n  };\n\n  font_style = {\n    outline_width: 0, outline_color: 0x00000000,\n    glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 0, glow_color: 0x00000000,\n    // Color gradient: UL, UR, LR, LL\n    color: 0xFFFFFFff, colorUR: 0xFFFFFFff, colorLR: 0x000000ff, colorLL: 0x000000ff,\n    color_mode: glov_font.COLOR_MODE.GRADIENT,\n  };\n*/\n\nfunction GlovFontStyle() {\n  this.color_vec4 = vec4(1, 1, 1, 1); // Matches GlovFontStyle.prototype.color below\n}\nGlovFontStyle.prototype.outline_width = 0;\nGlovFontStyle.prototype.outline_color = 0x00000000;\nGlovFontStyle.prototype.glow_xoffs = 0;\nGlovFontStyle.prototype.glow_yoffs = 0;\nGlovFontStyle.prototype.glow_inner = 0;\nGlovFontStyle.prototype.glow_outer = 0;\nGlovFontStyle.prototype.glow_color = 0x00000000;\nGlovFontStyle.prototype.color = 0xFFFFFFff;\nGlovFontStyle.prototype.colorUR = 0;\nGlovFontStyle.prototype.colorLR = 0;\nGlovFontStyle.prototype.colorLL = 0;\nGlovFontStyle.prototype.color_mode = COLOR_MODE.SINGLE;\n\nexport const font_shaders = {};\n\nexport function intColorFromVec4Color(v) {\n  return (v[0] * 255 | 0) << 24 | (v[1] * 255 | 0) << 16 | (v[2] * 255 | 0) << 8 | (v[3] * 255 | 0);\n}\n\nexport function vec4ColorFromIntColor(v, c) {\n  v[0] = (c >> 24 & 0xFF) / 255;\n  v[1] = (c >> 16 & 0xFF) / 255;\n  v[2] = (c >> 8 & 0xFF) / 255;\n  v[3] = (c & 0xFF) / 255;\n}\n\nexport const glov_font_default_style = new GlovFontStyle();\n\nexport function style(font_style, fields) {\n  let ret = new GlovFontStyle();\n  let { color_vec4 } = ret;\n  if (font_style) {\n    for (let f in font_style) {\n      ret[f] = font_style[f];\n    }\n  }\n  for (let f in fields) {\n    ret[f] = fields[f];\n  }\n  ret.color_vec4 = color_vec4; // Restore\n  vec4ColorFromIntColor(ret.color_vec4, ret.color);\n  return ret;\n}\n\nexport function styleColored(font_style, color) {\n  return style(font_style, {\n    color\n  });\n}\n\nfunction colorAlpha(color, alpha) {\n  alpha = clamp(round((color & 0xFF) * alpha), 0, 255);\n  return color & 0xFFFFFF00 | alpha;\n}\n\nexport function styleAlpha(font_style, alpha) {\n  return style(font_style, {\n    color: colorAlpha((font_style || glov_font_default_style).color, alpha),\n    outline_color: colorAlpha((font_style || glov_font_default_style).outline_color, alpha),\n    glow_color: colorAlpha((font_style || glov_font_default_style).glow_color, alpha)\n  });\n}\n\nlet tech_params = null;\nlet tech_params_dirty = false;\nlet temp_color = null;\n\nfunction createTechniqueParameters() {\n  if (tech_params) {\n    return;\n  }\n\n  tech_params = {\n    param0: vec4(),\n    outlineColor: vec4(),\n    glowColor: vec4(),\n    glowParams: vec4(),\n    tex0: null\n  };\n  if (!temp_color) {\n    temp_color = vec4();\n  }\n}\n\nfunction techParamsSet(param, value) {\n  let tpv = tech_params[param];\n  // not dirty, if anything changes, we need a new object!\n  if (!tech_params_dirty) {\n    if (tpv[0] !== value[0] || tpv[1] !== value[1] || tpv[2] !== value[2] || tpv[3] !== value[3]) {\n      // clone\n      tech_params = {\n        param0: v4clone(tech_params.param0),\n        outlineColor: v4clone(tech_params.outlineColor),\n        glowColor: v4clone(tech_params.glowColor),\n        glowParams: v4clone(tech_params.glowParams)\n      };\n      tech_params_dirty = true;\n      tpv = tech_params[param];\n    } else {\n      // identical, do nothing\n      return;\n    }\n  }\n  if (tech_params_dirty) {\n    // just set\n    tpv[0] = value[0];\n    tpv[1] = value[1];\n    tpv[2] = value[2];\n    tpv[3] = value[3];\n    // return;\n  }\n}\n\nfunction techParamsGet() {\n  tech_params_dirty = false;\n  return tech_params;\n}\n\nfunction GlovFont(font_info, texture_name) {\n  assert(font_info.font_size !== 0); // Got lost somewhere\n\n  this.texture = textures.load({\n    url: `img/${texture_name}.png`,\n    filter_min: font_info.noFilter ? gl.NEAREST : gl.LINEAR,\n    filter_mag: font_info.noFilter ? gl.NEAREST : gl.LINEAR,\n    wrap_s: gl.CLAMP_TO_EDGE,\n    wrap_t: gl.CLAMP_TO_EDGE\n  });\n  this.textures = [this.texture];\n\n  this.font_info = font_info;\n  this.shader = font_shaders.font_aa;\n  this.tex_w = font_info.imageW;\n  this.tex_h = font_info.imageH;\n\n  // Calculate inverse scale\n  for (let ii = 0; ii < font_info.char_infos.length; ++ii) {\n    let char_info = font_info.char_infos[ii];\n    char_info.scale = 1 / (char_info.sc || 1);\n  }\n\n  // build lookup\n  this.char_infos = [];\n  for (let ii = 0; ii < font_info.char_infos.length; ++ii) {\n    let char_info = font_info.char_infos[ii];\n    this.char_infos[font_info.char_infos[ii].c] = char_info;\n    char_info.xpad = char_info.xpad || 0;\n    char_info.yoffs = char_info.yoffs || 0;\n  }\n  this.replacement_character = this.infoFromChar(0xFFFD);\n  if (!this.replacement_character) {\n    this.replacement_character = this.infoFromChar(63); // '?'\n  }\n\n  this.default_style = new GlovFontStyle();\n  this.applied_style = new GlovFontStyle();\n\n  createTechniqueParameters();\n}\n\n// General draw functions return width\n// Pass NULL for style to use default style\n// If the function takes a color, this overrides the color on the style\nGlovFont.prototype.drawSizedColor = function (style, x, y, z, size, color, text) {\n  return this.drawSized(styleColored(style, color), x, y, z, size, text);\n};\nGlovFont.prototype.drawSized = function (style, x, y, z, size, text) {\n  return this.drawScaled(style, x, y, z, size / this.font_info.font_size, size / this.font_info.font_size, text);\n};\n\nGlovFont.prototype.drawSizedAligned = function (style, _x, _y, z, size, align, w, h, text) {\n  let x_size = size;\n  let y_size = size;\n  let width = this.getStringWidth(style, x_size, text);\n  if (align & ALIGN.HFIT && width > w) {\n    let scale = w / width;\n    x_size *= scale;\n    width = w;\n    // Additionally, if we're really squishing things horizontally, shrink the font size\n    // and offset to be centered.\n    if (scale < 0.5) {\n      if ((align & ALIGN.VMASK) !== ALIGN.VCENTER && (align & ALIGN.VMASK) !== ALIGN.VBOTTOM) {\n        // Offset to be roughly centered in the original line bounds\n        _y += (y_size - y_size * scale * 2) / 2;\n      }\n      y_size *= scale * 2;\n    }\n  }\n  let height = y_size;\n  let x;\n  let y;\n  switch (align & ALIGN.HMASK) {\n    case ALIGN.HCENTER:\n      x = _x + (w - width) / 2;\n      if (this.font_info.noFilter) {\n        x |= 0; // ensure integral\n      }\n      break;\n    case ALIGN.HRIGHT:\n      x = _x + w - width;\n      break;\n    case ALIGN.HLEFT:\n      x = _x;\n      break;\n    default:\n      x = _x;\n  }\n  switch (align & ALIGN.VMASK) {\n    case ALIGN.VCENTER:\n      y = _y + (h - height) / 2;\n      if (this.font_info.noFilter) {\n        y |= 0; // ensure integral\n      }\n      break;\n    case ALIGN.VBOTTOM:\n      y = _y + h - height;\n      break;\n    case ALIGN.VTOP:\n      y = _y;\n      break;\n    default:\n      y = _y;\n  }\n\n  return this.drawScaled(style, x, y, z, x_size / this.font_info.font_size, y_size / this.font_info.font_size, text);\n};\n\n// returns height\nGlovFont.prototype.drawSizedColorWrapped = function (style, x, y, z, w, indent, size, color, text) {\n  return this.drawScaledWrapped(styleColored(style, color), x, y, z, w, indent, size / this.font_info.font_size, size / this.font_info.font_size, text);\n};\nGlovFont.prototype.drawSizedWrapped = function (style, x, y, z, w, indent, size, text) {\n  return this.drawScaledWrapped(style, x, y, z, w, indent, size / this.font_info.font_size, size / this.font_info.font_size, text);\n};\n\nGlovFont.prototype.wrapLines = function (w, indent, size, text, word_cb /*(x, int linenum, const char *word)*/) {\n  return this.wrapLinesScaled(w, indent, size / this.font_info.font_size, text, word_cb);\n};\n\nGlovFont.prototype.numLines = function (style, w, indent, size, text) {\n  this.applyStyle(style);\n  let numlines = 0;\n  function wordCallback(ignored, linenum, word) {\n    numlines = max(numlines, linenum);\n  }\n  this.wrapLines(w, indent, size, text, wordCallback);\n  return numlines + 1;\n};\n\nGlovFont.prototype.infoFromChar = function (c) {\n  let ret = this.char_infos[c];\n  if (ret) {\n    return ret;\n  }\n  if (c > 127) {\n    // no char info, and non-ascii, non-control code\n    return this.replacement_character;\n  }\n  return null;\n};\n\nGlovFont.prototype.getCharacterWidth = function (style, x_size, c) {\n  assert.equal(typeof c, 'number');\n  this.applyStyle(style);\n  let char_info = this.infoFromChar(c);\n  let xsc = x_size / this.font_info.font_size;\n  let x_advance = this.calcXAdvance(xsc);\n  if (char_info) {\n    return (char_info.w + char_info.xpad) * xsc * char_info.scale + x_advance;\n  }\n  return 0;\n};\n\nGlovFont.prototype.getStringWidth = function (style, x_size, text) {\n  this.applyStyle(style);\n  let ret = 0;\n  let xsc = x_size / this.font_info.font_size;\n  let x_advance = this.calcXAdvance(xsc);\n  for (let ii = 0; ii < text.length; ++ii) {\n    let c = text.charCodeAt(ii);\n    let char_info = this.infoFromChar(c);\n    if (!char_info) {\n      char_info = this.infoFromChar(13);\n    }\n    if (char_info) {\n      ret += (char_info.w + char_info.xpad) * xsc * char_info.scale + x_advance;\n    }\n  }\n  return ret;\n};\n\n// word_cb(x, int linenum, const char *word)\nGlovFont.prototype.wrapLinesScaled = function (w, indent, xsc, text, word_cb) {\n  let len = text.length;\n  let s = 0;\n  let word_start = 0;\n  let word_x0 = 0;\n  let x = word_x0;\n  let linenum = 0;\n  let space_info = this.infoFromChar(32); // ' '\n  let space_size = (space_info ? space_info.w + space_info.xpad : this.font_info.font_size) * xsc;\n  let hard_wrap = false;\n  let x_advance = this.calcXAdvance(xsc);\n\n  do {\n    let c = s < len ? text.charCodeAt(s) : 0;\n    let newx = x;\n    let char_w;\n    if (c === 9) {\n      // '\\t') {\n      let tabsize = xsc * this.font_info.font_size * 4;\n      newx = (floor(x / tabsize) + 1) * tabsize;\n      char_w = tabsize;\n    } else {\n      let char_info = this.infoFromChar(c);\n      if (!char_info) {\n        char_info = this.infoFromChar(10);\n      }\n      if (char_info) {\n        char_w = (char_info.w + char_info.xpad) * xsc * char_info.scale + x_advance;\n        newx = x + char_w;\n      }\n    }\n    if (newx >= w && hard_wrap) {\n      // flush the word so far!\n      if (word_cb) {\n        word_cb(word_x0, linenum, text.slice(word_start, s));\n      }\n      word_start = s;\n      word_x0 = indent;\n      x = word_x0 + char_w;\n      linenum++;\n    } else {\n      x = newx;\n    }\n    if (!(c === 32 /*' '*/ || c === 0 || c === 10 /*'\\n'*/)) {\n      s++;\n      c = s < len ? text.charCodeAt(s) : 0;\n    }\n    if (c === 32 /*' '*/ || c === 0 || c === 10 /*'\\n'*/) {\n        hard_wrap = false;\n        // draw word until s\n        if (x > w) {\n          // maybe wrap\n          let word_width = x - word_x0;\n          if (word_width > w - indent) {\n            // not going to fit, split it up!\n            hard_wrap = true;\n            // recover and restart at word start\n            s = word_start;\n            x = word_x0;\n            continue;\n          } else {\n            word_x0 = indent;\n            x = word_x0 + word_width;\n            linenum++;\n          }\n        }\n        if (word_cb) {\n          word_cb(word_x0, linenum, text.slice(word_start, s));\n        }\n        word_start = s + 1;\n        if (c === 10 /*'\\n'*/) {\n            x = indent;\n            linenum++;\n          } else {\n          x += space_size;\n        }\n        word_x0 = x;\n        if (c === 32 /*' '*/ || c === 10 /*'\\n'*/) {\n            s++; // advance past space\n          }\n      }\n  } while (s < len);\n  ++linenum;\n  return linenum;\n};\n\nGlovFont.prototype.drawScaledWrapped = function (style, x, y, z, w, indent, xsc, ysc, text) {\n  if (text === null || text === undefined) {\n    text = '(null)';\n  }\n  this.applyStyle(style);\n  this.last_width = 0;\n  let num_lines = this.wrapLinesScaled(w, indent, xsc, text, (xoffs, linenum, word) => {\n    let y2 = y + this.font_info.font_size * ysc * linenum;\n    let x2 = x + xoffs;\n    let word_w = this.drawScaled(style, x2, y2, z, xsc, ysc, word);\n    this.last_width = max(this.last_width, xoffs + word_w);\n  });\n  return num_lines * this.font_info.font_size * ysc;\n};\n\nGlovFont.prototype.calcXAdvance = function (xsc) {\n  // Assume called: applyStyle(style);\n\n  // scale all supplied values by this so that if we swap in a font with twice the resolution (and twice the spread)\n  //   things look almost identical, just crisper\n  let font_texel_scale = this.font_info.font_size / 32;\n  // As a compromise, -2 bias here seems to work well\n  let x_advance = xsc * font_texel_scale * max(this.applied_style.outline_width - 2, 0);\n  // As a compromise, there's a -3 bias in there, so it only kicks in under extreme circumstances\n  x_advance = max(x_advance, xsc * font_texel_scale * max(this.applied_style.glow_outer - this.applied_style.glow_xoffs - 3, 0));\n  return x_advance;\n};\n\n//////////////////////////////////////////////////////////////////////////\n// Main implementation\n\nGlovFont.prototype.drawScaled = function (style, _x, y, z, xsc, ysc, text) {\n  let x = _x;\n  assert(isFinite(x));\n  assert(isFinite(y));\n  assert(isFinite(z));\n  let font_info = this.font_info;\n  // Debug: show expect area of glyphs\n  // require('./ui.js').drawRect(_x, y,\n  //   _x + xsc * font_info.font_size * 20, y + ysc * font_info.font_size,\n  //   1000, [1, 0, 1, 0.5]);\n  y += (font_info.y_offset || 0) * ysc;\n  let texs = this.textures;\n  if (text === null || text === undefined) {\n    text = '(null)';\n  }\n  const len = text.length;\n  if (xsc === 0 || ysc === 0) {\n    return 0;\n  }\n\n  this.applyStyle(style);\n\n  const avg_scale_font = (xsc + ysc) * 0.5;\n  const camera_xscale = camera2d.data[4];\n  const camera_yscale = camera2d.data[5];\n  let avg_scale_combined = (xsc * camera_xscale + ysc * camera_yscale) * 0.5;\n  // avg_scale_combined *= glov_settings.render_scale;\n\n  // scale all supplied values by this so that if we swap in a font with twice the resolution (and twice the spread)\n  //   things look almost identical, just crisper\n  let x_advance = this.calcXAdvance(xsc);\n  let font_texel_scale = font_info.font_size / 32;\n  let tile_state = 0;\n\n  let applied_style = this.applied_style;\n\n  // Calculate anti-aliasing values\n  let delta_per_source_pixel = 0.5 / font_info.spread;\n  let delta_per_dest_pixel = delta_per_source_pixel / avg_scale_combined;\n  let value = vec4(1 / delta_per_dest_pixel, // AA Mult and Outline Mult\n  -0.5 / delta_per_dest_pixel + 0.5, // AA Add\n  // Outline Add\n  -0.5 / delta_per_dest_pixel + 0.5 + applied_style.outline_width * font_texel_scale * avg_scale_combined, 0 // Unused\n  );\n  if (value[2] > 0) {\n    value[2] = 0;\n  }\n  let padding1 = max(0, applied_style.outline_width * font_texel_scale * avg_scale_font);\n  let padding4 = vec4();\n  const outer_scaled = applied_style.glow_outer * font_texel_scale;\n  padding4[0] = max(outer_scaled * xsc - applied_style.glow_xoffs * font_texel_scale * xsc, padding1);\n  padding4[2] = max(outer_scaled * xsc + applied_style.glow_xoffs * font_texel_scale * xsc, padding1);\n  padding4[1] = max(outer_scaled * ysc - applied_style.glow_yoffs * font_texel_scale * ysc, padding1);\n  padding4[3] = max(outer_scaled * ysc + applied_style.glow_yoffs * font_texel_scale * ysc, padding1);\n\n  techParamsSet('param0', value);\n  let value2 = vec4(0, // filled later\n  0, // filled later\n  // Glow mult\n  1 / ((applied_style.glow_outer - applied_style.glow_inner) * delta_per_source_pixel * font_texel_scale), -(0.5 - applied_style.glow_outer * delta_per_source_pixel * font_texel_scale) / ((applied_style.glow_outer - applied_style.glow_inner) * delta_per_source_pixel * font_texel_scale));\n  if (value2[3] > 0) {\n    value2[3] = 0;\n  }\n\n  let padding_in_font_space = vec4();\n  v4scale(padding_in_font_space, padding4, 1 / avg_scale_font);\n  for (let ii = 0; ii < 4; ++ii) {\n    if (padding_in_font_space[ii] > font_info.spread) {\n      // Not enough buffer\n      let sc = font_info.spread / padding_in_font_space[ii];\n      padding4[ii] *= sc;\n      padding_in_font_space[ii] *= sc;\n    }\n  }\n\n  // Choose appropriate z advance so that character are drawn left to right (or RTL if the glow is on the other side)\n  const z_advance = applied_style.glow_xoffs < 0 ? -0.0001 : 0.0001;\n\n  // For non-1:1 aspect ration rendering, need to scale our coordinates' padding differently in each axis\n  let rel_x_scale = xsc / avg_scale_font;\n  let rel_y_scale = ysc / avg_scale_font;\n\n  for (let i = 0; i < len; i++) {\n    const c = text.charCodeAt(i);\n    if (c === 9) {\n      // '\\t'.charCodeAt(0)) {\n      let tabsize = xsc * font_info.font_size * 4;\n      x = (((x - _x) / tabsize | 0) + 1) * tabsize + _x;\n    } else {\n      let char_info = this.infoFromChar(c);\n      if (!char_info) {\n        char_info = this.infoFromChar(13);\n      }\n      if (char_info) {\n        let char_scale = char_info.scale;\n        let xsc2 = xsc * char_scale;\n        if (char_info.w) {\n          let ysc2 = ysc * char_scale;\n          let pad_scale = 1 / char_scale;\n          let tile_width = this.tex_w;\n          let tile_height = this.tex_h;\n          // Lazy update params here\n          if (char_scale !== tile_state) {\n            value2[0] = -applied_style.glow_xoffs * font_texel_scale * pad_scale / tile_width;\n            value2[1] = -applied_style.glow_yoffs * font_texel_scale * pad_scale / tile_height;\n            techParamsSet('glowParams', value2);\n          }\n\n          let u0 = (char_info.x0 - padding_in_font_space[0] * pad_scale) / tile_width;\n          let u1 = (char_info.x0 + char_info.w + padding_in_font_space[2] * pad_scale) / tile_width;\n          let v0 = (char_info.y0 - padding_in_font_space[1] * pad_scale) / tile_height;\n          let v1 = (char_info.y0 + char_info.h + padding_in_font_space[3] * pad_scale) / tile_height;\n\n          let w = char_info.w * xsc2 + (padding4[0] + padding4[2]) * rel_x_scale;\n          let h = char_info.h * ysc2 + (padding4[1] + padding4[3]) * rel_y_scale;\n\n          sprites.queueraw(texs, x - rel_x_scale * padding4[0], y - rel_y_scale * padding4[2] + char_info.yoffs * ysc2, z + z_advance * i, w, h, u0, v0, u1, v1, applied_style.color_vec4, this.shader, techParamsGet());\n\n          // require('./ui.js').drawRect(x - rel_x_scale * padding4[0],\n          //   y - rel_y_scale * padding4[2] + char_info.yoffs * ysc2,\n          //   w + x - rel_x_scale * padding4[0],\n          //   h + y - rel_y_scale * padding4[2] + char_info.yoffs * ysc2,\n          //   1000, [i & 1, (i & 2)>>1, (i & 4)>>2, 0.5]);\n        }\n\n        x += (char_info.w + char_info.xpad) * xsc2 + x_advance;\n      }\n    }\n  }\n  return x - _x;\n};\n\nGlovFont.prototype.determineShader = function () {\n  let outline = this.applied_style.outline_width && this.applied_style.outline_color & 0xff;\n  let glow = this.applied_style.glow_outer > 0 && this.applied_style.glow_color & 0xff;\n  if (outline) {\n    if (glow) {\n      this.shader = font_shaders.font_aa_outline_glow;\n    } else {\n      this.shader = font_shaders.font_aa_outline;\n    }\n  } else if (glow) {\n    this.shader = font_shaders.font_aa_glow;\n  } else {\n    this.shader = font_shaders.font_aa;\n  }\n};\n\nGlovFont.prototype.applyStyle = function (style) {\n  if (!style) {\n    style = this.default_style;\n  }\n  // outline\n  vec4ColorFromIntColor(temp_color, style.outline_color);\n  techParamsSet('outlineColor', temp_color);\n\n  // glow\n  vec4ColorFromIntColor(temp_color, style.glow_color);\n  techParamsSet('glowColor', temp_color);\n\n  // everything else\n  this.applied_style.outline_width = style.outline_width;\n  this.applied_style.outline_color = style.outline_color;\n  this.applied_style.glow_xoffs = style.glow_xoffs;\n  this.applied_style.glow_yoffs = style.glow_yoffs;\n  this.applied_style.glow_inner = style.glow_inner;\n  this.applied_style.glow_outer = style.glow_outer;\n  this.applied_style.glow_color = style.glow_color;\n  this.applied_style.color = style.color;\n  this.applied_style.color_vec4 = style.color_vec4;\n  this.applied_style.colorUR = style.colorUR;\n  this.applied_style.colorLR = style.colorLR;\n  this.applied_style.colorLL = style.colorLL;\n  this.applied_style.color_mode = style.color_mode;\n\n  if (this.applied_style.color_mode === COLOR_MODE.SINGLE) {\n    this.applied_style.colorUR = this.applied_style.colorLL = this.applied_style.colorLR = this.applied_style.color;\n  }\n\n  this.determineShader();\n};\n\n// Replicate constants and utility functions on all font instances as well\nGlovFont.prototype.COLOR_MODE = COLOR_MODE;\nGlovFont.prototype.ALIGN = ALIGN;\nGlovFont.prototype.style = style;\nGlovFont.prototype.styleAlpha = styleAlpha;\nGlovFont.prototype.styleColored = styleColored;\n\nfunction fontShadersInit() {\n  if (font_shaders.font_aa) {\n    return;\n  }\n  font_shaders.font_aa = shaders.create(gl.FRAGMENT_SHADER, 'font_aa', '#pragma WebGL2\\n\\nprecision lowp float;\\n\\nvarying vec2 interp_texcoord;\\nvarying lowp vec4 interp_color;\\nvec4 _ret_0;\\nuniform sampler2D tex0;\\nuniform vec4 param0;\\nvoid main()\\n{\\n  float texture0 = texture2D(tex0,interp_texcoord).r;\\n  float res = clamp(texture0 * param0.x + param0.y, 0.0, 1.0);\\n  gl_FragColor = vec4(interp_color.rgb, interp_color.a * res);\\n}\\n');\n  font_shaders.font_aa_glow = shaders.create(gl.FRAGMENT_SHADER, 'font_aa_glow', '#pragma WebGL2\\n\\nprecision lowp float;\\n\\nvarying vec2 interp_texcoord;\\nvarying lowp vec4 interp_color;\\nvec4 _ret_0;\\nuniform sampler2D tex0;\\nuniform vec4 param0;\\nuniform vec4 glowColor;\\nuniform vec4 glowParams;\\nvoid main()\\n{\\n  float texture0=texture2D(tex0,interp_texcoord).r;\\n  // Glow\\n  vec2 glowCoord = interp_texcoord + glowParams.xy;\\n  float textureGlow = texture2D(tex0, glowCoord).r;\\n  float t = clamp(textureGlow * glowParams.z + glowParams.w, 0.0, 1.0);\\n  vec4 outcolor = vec4(glowColor.xyz, t * glowColor.w);\\n  // Main body\\n  t = clamp(texture0 * param0.x + param0.y, 0.0, 1.0);\\n  gl_FragColor = mix(outcolor, interp_color, t);\\n}\\n');\n  font_shaders.font_aa_outline = shaders.create(gl.FRAGMENT_SHADER, 'font_aa_outline', '#pragma WebGL2\\n\\nprecision lowp float;\\n\\nvarying highp vec2 interp_texcoord;\\nvarying lowp vec4 interp_color;\\nvec4 _ret_0;\\nuniform sampler2D tex0;\\nuniform vec4 param0;\\nuniform vec4 outlineColor;\\nvoid main()\\n{\\n  float texture0=texture2D(tex0,interp_texcoord).r;\\n  // Outline\\n  vec4 outcolor = vec4(outlineColor.xyz, 0);\\n  outcolor.w = clamp(texture0 * param0.x + param0.z, 0.0, 1.0);\\n  outcolor.w = outcolor.w * outlineColor.w;\\n  // outcolor = mix(outcolor, outlineColor, outcolor.w); // Makes a blackish border\\n  // Main body\\n  float t = clamp(texture0 * param0.x + param0.y, 0.0, 1.0);\\n  gl_FragColor = mix(outcolor, interp_color, t);\\n}\\n');\n  font_shaders.font_aa_outline_glow = shaders.create(gl.FRAGMENT_SHADER, 'font_aa_outline_glow', '#pragma WebGL2\\n\\nprecision lowp float;\\n\\nvarying highp vec2 interp_texcoord;\\nvarying lowp vec4 interp_color;\\nvec4 _ret_0;\\nuniform sampler2D tex0;\\nuniform vec4 param0;\\nuniform vec4 outlineColor;\\nuniform vec4 glowColor;\\nuniform vec4 glowParams;\\nvoid main()\\n{\\n  float texture0=texture2D(tex0,interp_texcoord).r;\\n  // Glow\\n  vec2 glowCoord = interp_texcoord + glowParams.xy;\\n  float textureGlow = texture2D(tex0, glowCoord).r;\\n  float t = clamp(textureGlow * glowParams.z + glowParams.w, 0.0, 1.0);\\n  vec4 outcolor = vec4(glowColor.xyz, t * glowColor.w);\\n  // vec4outclor = t * glowColor.xyz;\\n  // Outline\\n  t = clamp(texture0 * param0.x + param0.z, 0.0, 1.0);\\n  t = t * outlineColor.w;\\n  outcolor = mix(outcolor, outlineColor, t);\\n  // Main body\\n  t = clamp(texture0 * param0.x + param0.y, 0.0, 1.0);\\n  gl_FragColor = mix(outcolor, interp_color, t);\\n}\\n');\n}\n\nexport function create(...args) {\n  fontShadersInit();\n  return new GlovFont(...args);\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint no-bitwise:off */\n\nconst assert = require('assert');\nconst engine = require('./engine.js');\nconst { ceil, max, min } = Math;\n\nexport const TRIANGLES = 4;\nexport const TRIANGLE_FAN = 6;\nexport const QUADS = 7;\n\nconst gl_byte_size = {\n  0x1400: 1, // GL_BYTE\n  0x1401: 1, // GL_UNSIGNED_BYTE\n  0x1402: 2, // GL_SHORT\n  0x1403: 2, // GL_UNSIGNED_SHORT\n  0x1406: 4 // GL_FLOAT\n};\n\n// let unit_buf;\n// let unit_buf_len = 0;\n\nlet bound_geom;\n\nlet bound_array_buf = null;\nlet bound_index_buf = null;\n\nlet quad_index_buf;\nlet quad_index_buf_len = 0;\n\nfunction deleteBuffer(handle) {\n  if (!handle) {\n    return;\n  }\n  if (bound_array_buf === handle) {\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n    bound_array_buf = null;\n  }\n  if (bound_index_buf === handle) {\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n    bound_index_buf = null;\n  }\n  gl.deleteBuffer(handle);\n}\n\nlet attrib_enabled = 0;\nfunction enableVertexAttribArray(bits) {\n  if (bits === attrib_enabled) {\n    return;\n  }\n  let disable_mask = attrib_enabled & ~bits;\n  let enable_mask = ~attrib_enabled & bits;\n  attrib_enabled = bits;\n\n  if (disable_mask) {\n    let n = 0;\n    do {\n      if (disable_mask & 1) {\n        gl.disableVertexAttribArray(n);\n      }\n      n++;\n      disable_mask >>= 1;\n    } while (disable_mask);\n  }\n\n  if (enable_mask) {\n    let n = 0;\n    do {\n      if (enable_mask & 1) {\n        gl.enableVertexAttribArray(n);\n      }\n      n++;\n      enable_mask >>= 1;\n    } while (enable_mask);\n  }\n}\n\n// function bindUnitBuf(arr_idx, len) {\n//   if (len > unit_buf_len) {\n//     deleteBuffer(unit_buf);\n//     unit_buf = gl.createBuffer();\n//     unit_buf_len = max(ceil(unit_buf_len * 1.5), len);\n//     gl.bindBuffer(gl.ARRAY_BUFFER, unit_buf);\n//     bound_array_buf = unit_buf;\n//     let arr = new Uint8Array(unit_buf_len * 4);\n//     for (let ii = 0; ii < unit_buf_len * 4; ++ii) {\n//       arr[ii] = 255;\n//     }\n//     gl.bufferData(gl.ARRAY_BUFFER, arr, gl.STATIC_DRAW);\n//   } else {\n//     if (bound_array_buf !== unit_buf) {\n//       gl.bindBuffer(gl.ARRAY_BUFFER, unit_buf);\n//       bound_array_buf = unit_buf;\n//     }\n//   }\n//   gl.vertexAttribPointer(arr_idx, 4, gl.UNSIGNED_BYTE, true, 0, 0);\n// }\n\n// Verts should be ordered counter-clockwise from the upper left\nfunction getQuadIndexBuf(quad_count) {\n  assert(quad_count <= 16384);\n  // If not, need to split into multiple vertex and index buffers (fairly easy),\n  //   or use the OES_element_index_uint extension (trivial, but probably slower, maybe not supported on mobile?)\n  if (quad_count * 6 > quad_index_buf_len) {\n    if (!quad_index_buf) {\n      quad_index_buf = gl.createBuffer();\n    } else {\n      // freeing old one\n      engine.perf_state.gpu_mem.geom -= quad_index_buf_len * 2;\n    }\n    quad_index_buf_len = max(ceil(quad_index_buf_len * 1.5), quad_count * 6);\n    if (bound_index_buf !== quad_index_buf) {\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, quad_index_buf);\n      bound_index_buf = quad_index_buf;\n    }\n    let arr = new Uint16Array(quad_index_buf_len);\n    let vidx = 0;\n    for (let ii = 0; ii < quad_index_buf_len;) {\n      arr[ii++] = vidx + 1;\n      arr[ii++] = vidx + 3;\n      arr[ii++] = vidx++; // 0\n      arr[ii++] = vidx++; // 1\n      arr[ii++] = vidx++; // 2\n      arr[ii++] = vidx++; // 3\n    }\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, arr, gl.STATIC_DRAW);\n    engine.perf_state.gpu_mem.geom += quad_index_buf_len * 2;\n  }\n  return quad_index_buf;\n}\n\nexport function createIndices(idxs) {\n  let ret = {\n    ibo: gl.createBuffer(),\n    ibo_size: idxs.length\n  };\n  gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ret.ibo);\n  bound_index_buf = ret.ibo;\n  gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, idxs, gl.STATIC_DRAW);\n  engine.perf_state.gpu_mem.geom += idxs.length * 2;\n  return ret;\n}\n\nfunction formatInfo(format) {\n  if (!format.info) {\n    let stride = 0;\n    let elem_count = 0;\n    let used_attribs = 0;\n    let common_byte_size = 0;\n    for (let ii = 0; ii < format.length; ++ii) {\n      let fmt = format[ii];\n      let sem = fmt[0];\n      let gltype = fmt[1];\n      let count = fmt[2];\n      used_attribs |= 1 << sem;\n      let byte_size = gl_byte_size[gltype];\n      assert(byte_size);\n      assert(!common_byte_size || byte_size === common_byte_size);\n      common_byte_size = byte_size;\n      fmt[3] = fmt[3] || false;\n      fmt[4] = byte_size;\n      stride += count * byte_size;\n      elem_count += count;\n    }\n    format.info = {\n      stride, elem_count, used_attribs, common_byte_size\n    };\n  }\n  return format.info;\n}\n\n// format is [shaders.semantic.foo, gl.FLOAT/UNSIGNED_BYTE/etc, count, normalized]\nfunction Geom(format, verts, idxs, mode) {\n  this.mode = mode || TRIANGLES;\n  this.format = format;\n  let info = this.format_info = formatInfo(format);\n  this.stride = info.stride;\n  this.used_attribs = info.used_attribs;\n\n  this.vert_count = verts.length / this.format_info.elem_count;\n  this.vert_gpu_mem = verts.length * this.format_info.common_byte_size;\n  if (verts.length) {\n    this.vbo = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.vbo);\n    bound_array_buf = this.vbo;\n    gl.bufferData(gl.ARRAY_BUFFER, verts, gl.STATIC_DRAW);\n    engine.perf_state.gpu_mem.geom += this.vert_gpu_mem;\n  }\n  this.orig_mode = mode;\n  if (idxs) {\n    if (idxs.ibo) {\n      this.ibo = idxs.ibo;\n      this.ibo_owned = false;\n      this.ibo_size = idxs.ibo_size;\n    } else {\n      this.ibo = gl.createBuffer();\n      this.ibo_owned = true;\n      this.ibo_size = idxs.length;\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibo);\n      bound_index_buf = this.ibo;\n      gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, idxs, gl.STATIC_DRAW);\n      engine.perf_state.gpu_mem.geom += idxs.length * 2;\n    }\n  } else if (mode === QUADS) {\n    assert.equal(this.vert_count % 4, 0);\n    let quad_count = this.vert_count / 4;\n    // PERFTODO: Use GL_QUADS_OES extension\n    this.ibo = getQuadIndexBuf(quad_count);\n    this.ibo_owned = false;\n    this.ibo_size = quad_count * 6;\n    this.mode = TRIANGLES;\n  } else if (mode === TRIANGLE_FAN) {\n    this.mode = TRIANGLE_FAN;\n  } else {\n    this.ibo = null;\n    this.ibo_owned = false;\n  }\n}\n\nGeom.prototype.updateSub = function (offset, verts) {\n  if (bound_array_buf !== this.vbo) {\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.vbo);\n    bound_array_buf = this.vbo;\n  }\n  gl.bufferSubData(gl.ARRAY_BUFFER, offset, verts);\n};\n\nGeom.prototype.update = function (verts, num_verts) {\n  assert.equal(this.ibo_owned, false);\n  if (num_verts > this.vert_count) {\n    if (bound_geom === this) {\n      bound_geom = null;\n    }\n    engine.perf_state.gpu_mem.geom -= this.vert_gpu_mem;\n    deleteBuffer(this.vbo);\n    // Note: matching size, ignoring num_verts\n    this.vert_count = verts.length / this.format_info.elem_count;\n    this.vert_gpu_mem = verts.length * this.format_info.common_byte_size;\n    this.vbo = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.vbo);\n    bound_array_buf = this.vbo;\n    gl.bufferData(gl.ARRAY_BUFFER, verts, gl.DYNAMIC_DRAW);\n    engine.perf_state.gpu_mem.geom += this.vert_gpu_mem;\n  } else {\n    // Fits\n    if (bound_array_buf !== this.vbo) {\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.vbo);\n      bound_array_buf = this.vbo;\n    }\n    gl.bufferSubData(gl.ARRAY_BUFFER, 0, verts.subarray(0, num_verts * this.format_info.elem_count));\n    // gl.bufferData(gl.ARRAY_BUFFER, verts, gl.DYNAMIC_DRAW);\n  }\n  if (this.orig_mode === QUADS) {\n    let quad_count = num_verts / 4;\n    this.ibo = getQuadIndexBuf(quad_count);\n    this.ibo_size = quad_count * 6;\n  }\n};\n\nGeom.prototype.dispose = function () {\n  if (this.ibo_owned) {\n    deleteBuffer(this.ibo);\n  }\n  this.ibo = null;\n  deleteBuffer(this.vbo);\n  this.vbo = null;\n  engine.perf_state.gpu_mem.geom -= this.vert_gpu_mem;\n  this.vert_gpu_mem = 0;\n};\n\nlet bound_attribs = function () {\n  let r = [];\n  for (let ii = 0; ii < 16; ++ii) {\n    r.push({\n      vbo: null,\n      offset: 0\n    });\n  }\n  return r;\n}();\nGeom.prototype.bind = function () {\n  if (bound_geom !== this) {\n    bound_geom = this;\n    let vbo = this.vbo;\n\n    let offset = 0;\n    for (let ii = 0; ii < this.format.length; ++ii) {\n      let fmt = this.format[ii];\n      let count = fmt[2];\n      let byte_size = fmt[4];\n      if (bound_attribs[ii].vbo === vbo) {//  && bound_attribs[ii].offset = offset\n        // already bound\n      } else {\n        if (bound_array_buf !== vbo) {\n          gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\n          bound_array_buf = vbo;\n        }\n        let sem = fmt[0];\n        let gltype = fmt[1];\n        let normalized = fmt[3];\n        gl.vertexAttribPointer(sem, count, gltype, normalized, this.stride, offset);\n        bound_attribs[ii].vbo = bound_array_buf;\n        // bound_attribs[ii].offset = offset;\n      }\n      offset += count * byte_size;\n    }\n    // if (!used[1]) { // COLOR\n    //   used_attribs |= 1 << shader.semantics.COLOR;\n    //   bindUnitBuf(1, this.vert_count);\n    // }\n    enableVertexAttribArray(this.used_attribs);\n  }\n\n  if (this.ibo && bound_index_buf !== this.ibo) {\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibo);\n    bound_index_buf = this.ibo;\n  }\n};\nGeom.prototype.draw = function () {\n  this.bind();\n  if (this.ibo) {\n    gl.drawElements(this.mode, this.ibo_size, gl.UNSIGNED_SHORT, 0);\n  } else {\n    gl.drawArrays(this.mode, 0, this.vert_count);\n  }\n};\n\nfunction GeomMultiQuads(format, verts) {\n  let format_info = formatInfo(format);\n  let ec = format_info.elem_count;\n  let vert_count = verts.length / ec;\n  this.geoms = [];\n  for (let idx = 0; idx < vert_count; idx += 65536) {\n    let num_sub_verts = min(vert_count - idx, 65536);\n    let sub_data = new Uint8Array(verts.buffer, idx * ec, num_sub_verts * ec);\n    this.geoms.push(new Geom(format, sub_data, null, QUADS));\n  }\n}\nGeomMultiQuads.prototype.draw = function () {\n  for (let ii = 0; ii < this.geoms.length; ++ii) {\n    this.geoms[ii].draw();\n  }\n};\nGeomMultiQuads.prototype.dispose = function () {\n  for (let ii = 0; ii < this.geoms.length; ++ii) {\n    this.geoms[ii].dispose();\n  }\n  this.geoms = null;\n};\n\nexport function create(...args) {\n  return new Geom(...args);\n}\n\nexport function createQuads(format, verts) {\n  let format_info = formatInfo(format);\n  assert(verts instanceof Uint8Array); // only one handled by GeomMultiQuads for now\n  let vert_count = verts.length / format_info.elem_count;\n  if (vert_count > 65536) {\n    return new GeomMultiQuads(format, verts);\n  }\n  return new Geom(format, verts, null, QUADS);\n}\n\nexport function startup() {\n  // Nothing for now.\n}","/* eslint no-bitwise:off */\n// From https://stackoverflow.com/questions/8936984/uint8array-to-string-in-javascript\n\nlet charCache = new Array(128); // Preallocate the cache for the common single byte chars\nlet charFromCodePt = String.fromCodePoint || String.fromCharCode;\nlet result = [];\nexport function decode(array) {\n  let codePt;\n  let byte1;\n  let buffLen = array.length;\n\n  result.length = 0;\n\n  for (let i = 0; i < buffLen;) {\n    byte1 = array[i++];\n\n    if (byte1 <= 0x7F) {\n      codePt = byte1;\n    } else if (byte1 <= 0xDF) {\n      codePt = (byte1 & 0x1F) << 6 | array[i++] & 0x3F;\n    } else if (byte1 <= 0xEF) {\n      codePt = (byte1 & 0x0F) << 12 | (array[i++] & 0x3F) << 6 | array[i++] & 0x3F;\n    } else if (String.fromCodePoint) {\n      codePt = (byte1 & 0x07) << 18 | (array[i++] & 0x3F) << 12 | (array[i++] & 0x3F) << 6 | array[i++] & 0x3F;\n    } else {\n      codePt = 63; // Cannot convert four byte code points, so use \"?\" instead\n      i += 3;\n    }\n\n    result.push(charCache[codePt] || (charCache[codePt] = charFromCodePt(codePt)));\n  }\n\n  return result.join('');\n}","// Derived from (MIT Licensed) https://github.com/uber-web/loaders.gl/tree/master/modules/gltf\n\nconst TYPES = ['SCALAR', 'VEC2', 'VEC3', 'VEC4'];\n\nexport function getAccessorTypeFromSize(size) {\n  const type = TYPES[size - 1];\n  return type || TYPES[0];\n}\n\n// glTF ACCESSOR CONSTANTS\n\nexport const ATTRIBUTE_TYPE_TO_COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\n\nexport const ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE = {\n  5120: 1,\n  5121: 1,\n  5122: 2,\n  5123: 2,\n  5125: 4,\n  5126: 4\n};\n\nexport const ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY = {\n  5120: Int8Array,\n  5121: Uint8Array,\n  5122: Int16Array,\n  5123: Uint16Array,\n  5125: Uint32Array,\n  5126: Float32Array\n};","// Derived from (MIT Licensed) https://github.com/uber-web/loaders.gl/tree/master/modules/gltf\n/* eslint-env browser */\n\nconst assert = require('assert');\n\n/* eslint-disable camelcase, max-statements */\nconst { unpackGLBBuffers } = require('./unpack-glb-buffers.js');\nconst { unpackBinaryJson } = require('./unpack-binary-json.js');\n\nfunction padTo4Bytes(byteLength) {\n  return byteLength + 3 & ~3; //eslint-disable-line no-bitwise\n}\n\nconst decode_utf8 = require('./decode-utf8.js');\n\nconst {\n  ATTRIBUTE_TYPE_TO_COMPONENTS,\n  ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE,\n  ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY\n} = require('./gltf-type-utils.js');\n\nconst MAGIC_glTF = 0x676c5446; // glTF in Big-Endian ASCII\n\nconst GLB_FILE_HEADER_SIZE = 12;\nconst GLB_CHUNK_HEADER_SIZE = 8;\n\nconst GLB_CHUNK_TYPE_JSON = 0x4e4f534a;\nconst GLB_CHUNK_TYPE_BIN = 0x004e4942;\n\nconst LE = true; // Binary GLTF is little endian.\nconst BE = false; // Magic needs to be written as BE\n\n// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#glb-file-format-specification\nfunction GLBParser() {\n  // Result\n  this.binaryByteOffset = null;\n  this.packedJson = null;\n  this.json = null;\n}\n\nfunction parseBinary(self) {\n  // GLB Header\n  const dataView = new DataView(self.glbArrayBuffer);\n  const magic1 = dataView.getUint32(0, BE); // Magic number (the ASCII string 'glTF').\n  const version = dataView.getUint32(4, LE); // Version 2 of binary glTF container format\n  const fileLength = dataView.getUint32(8, LE); // Total byte length of generated file\n\n  let valid = magic1 === MAGIC_glTF;\n  if (!valid) {\n    console.warn('Invalid GLB magic string');\n  }\n\n  assert(version === 2, `Invalid GLB version ${version}. Only .glb v2 supported`);\n  assert(fileLength > 20);\n\n  // Write the JSON chunk\n  const jsonChunkLength = dataView.getUint32(12, LE); // Byte length of json chunk\n  const jsonChunkFormat = dataView.getUint32(16, LE); // Chunk format as uint32\n\n  valid = jsonChunkFormat === GLB_CHUNK_TYPE_JSON || jsonChunkFormat === 0; // Back compat\n  assert(valid, `JSON chunk format ${jsonChunkFormat}`);\n\n  // Create a \"view\" of the binary encoded JSON data\n  const jsonChunkOffset = GLB_FILE_HEADER_SIZE + GLB_CHUNK_HEADER_SIZE; // First headers: 20 bytes\n  const jsonChunk = new Uint8Array(self.glbArrayBuffer, jsonChunkOffset, jsonChunkLength);\n\n  // Decode the JSON binary array into clear text\n  const jsonText = decode_utf8.decode(jsonChunk);\n\n  // Parse the JSON text into a JavaScript data structure\n  self.json = JSON.parse(jsonText);\n\n  // TODO - BIN chunk can be optional\n  const binaryChunkStart = jsonChunkOffset + padTo4Bytes(jsonChunkLength);\n  self.binaryByteOffset = binaryChunkStart + GLB_CHUNK_HEADER_SIZE;\n\n  const binChunkFormat = dataView.getUint32(binaryChunkStart + 4, LE); // Chunk format as uint32\n  valid = binChunkFormat === GLB_CHUNK_TYPE_BIN || binChunkFormat === 1; // Back compat\n  assert(valid, `BIN chunk format ${binChunkFormat}`);\n\n  return {\n    arrayBuffer: self.glbArrayBuffer,\n    binaryByteOffset: self.binaryByteOffset,\n    json: self.json\n  };\n}\n\nfunction parseInternal(self) {\n  const result = parseBinary(self);\n  self.packedJson = result.json;\n  self.unpackedBuffers = unpackGLBBuffers(self.glbArrayBuffer, self.json, self.binaryByteOffset);\n  self.json = unpackBinaryJson(self.json, self.unpackedBuffers);\n}\n\nGLBParser.prototype.parseSync = function (arrayBuffer) {\n  // Input\n  this.glbArrayBuffer = arrayBuffer;\n\n  // Only parse once\n  if (this.json === null && this.binaryByteOffset === null) {\n    parseInternal(this);\n  }\n  return this;\n};\n\n// Return the gltf JSON and the original arrayBuffer\nGLBParser.prototype.parse = function (arrayBuffer) {\n  return this.parseSync(arrayBuffer);\n};\n\n// Returns application JSON data stored in `key`\nGLBParser.prototype.getApplicationData = function (key) {\n  return this.json[key];\n};\n\n// Returns JSON envelope\nGLBParser.prototype.getJSON = function () {\n  return this.json;\n};\n\n// Return binary chunk\nGLBParser.prototype.getArrayBuffer = function () {\n  return this.glbArrayBuffer;\n};\n\n// Return index into binary chunk\nGLBParser.prototype.getBinaryByteOffset = function () {\n  return this.binaryByteOffset;\n};\n\n// Unpacks a bufferview into a new Uint8Array that is a view into the binary chunk\nGLBParser.prototype.getBufferView = function (glTFBufferView) {\n  const byteOffset = (glTFBufferView.byteOffset || 0) + this.binaryByteOffset;\n  return new Uint8Array(this.glbArrayBuffer, byteOffset, glTFBufferView.byteLength);\n};\n\n// Unpacks a glTF accessor into a new typed array that is a view into the binary chunk\nGLBParser.prototype.getBuffer = function (glTFAccessor) {\n  // Decode the glTF accessor format\n  const ArrayType = ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY[glTFAccessor.componentType];\n  const components = ATTRIBUTE_TYPE_TO_COMPONENTS[glTFAccessor.type];\n  const bytesPerComponent = ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE[glTFAccessor.componentType];\n  const length = glTFAccessor.count * components;\n  const byteLength = glTFAccessor.count * components * bytesPerComponent;\n\n  // Get the boundaries of the binary sub-chunk for this bufferView\n  const glTFBufferView = this.json.bufferViews[glTFAccessor.bufferView];\n  assert(byteLength >= 0 && glTFAccessor.byteOffset + byteLength <= glTFBufferView.byteLength);\n\n  const byteOffset = glTFBufferView.byteOffset + this.binaryByteOffset + glTFAccessor.byteOffset;\n  return new ArrayType(this.glbArrayBuffer, byteOffset, length);\n};\n\n// Unpacks an image into an HTML image\nGLBParser.prototype.getImageData = function (glTFImage) {\n  return {\n    typedArray: this.getBufferView(glTFImage.bufferView),\n    mimeType: glTFImage.mimeType || 'image/jpeg'\n  };\n};\n\nGLBParser.prototype.getImage = function (glTFImage) {\n  const arrayBufferView = this.getBufferView(glTFImage.bufferView);\n  const mimeType = glTFImage.mimeType || 'image/jpeg';\n  const blob = new Blob([arrayBufferView], { type: mimeType });\n  const urlCreator = window.URL || window.webkitURL;\n  const imageUrl = urlCreator.createObjectURL(blob);\n  const img = new Image();\n  img.src = imageUrl;\n  return img;\n};\n\n// GLBParser.prototype.getImageAsync = function (glTFImage) {\n//   return new Promise(resolve => {\n//     const arrayBufferView = this.getBufferView(glTFImage.bufferView);\n//     const mimeType = glTFImage.mimeType || 'image/jpeg';\n//     const blob = new Blob([arrayBufferView], {type: mimeType});\n//     const urlCreator = window.URL || window.webkitURL;\n//     const imageUrl = urlCreator.createObjectURL(blob);\n//     const img = new Image();\n//     img.onload = () => resolve(img);\n//     img.src = imageUrl;\n//   });\n// };\n\nmodule.exports = GLBParser;\nGLBParser.parse = function (data) {\n  let parser = new GLBParser();\n  return parser.parse(data);\n};","// Derived from (MIT Licensed) https://github.com/uber-web/loaders.gl/tree/master/modules/gltf\n\nfunction parseJSONPointer(value) {\n  if (typeof value === 'string') {\n    // Remove escape character\n    if (value.indexOf('##/') === 0) {\n      return value.slice(1);\n    }\n\n    let matches = value.match(/#\\/([a-z]+)\\/([0-9]+)/);\n    if (matches) {\n      const index = parseInt(matches[2], 10);\n      return [matches[1], index];\n    }\n\n    // Legacy: `$$$i`\n    matches = value.match(/\\$\\$\\$([0-9]+)/);\n    if (matches) {\n      const index = parseInt(matches[1], 10);\n      return ['accessors', index];\n    }\n  }\n\n  return null;\n}\n\nfunction decodeJSONPointer(object, buffers) {\n  const pointer = parseJSONPointer(object);\n  if (pointer) {\n    const field = pointer[0];\n    const index = pointer[1];\n    const buffer = buffers[field] && buffers[field][index];\n    if (buffer) {\n      return buffer;\n    }\n    console.error(`Invalid JSON pointer ${object}: #/${field}/${index}`);\n  }\n  return null;\n}\n\n// Recursively unpacks objects, replacing \"JSON pointers\" with typed arrays\nfunction unpackJsonArraysRecursive(json, topJson, buffers, options = {}) {\n  const object = json;\n\n  const buffer = decodeJSONPointer(object, buffers);\n  if (buffer) {\n    return buffer;\n  }\n\n  // Copy array\n  if (Array.isArray(object)) {\n    return object.map(element => unpackJsonArraysRecursive(element, topJson, buffers, options));\n  }\n\n  // Copy object\n  if (object !== null && typeof object === 'object') {\n    const newObject = {};\n    for (const key in object) {\n      newObject[key] = unpackJsonArraysRecursive(object[key], topJson, buffers, options);\n    }\n    return newObject;\n  }\n\n  return object;\n}\n\nexport function unpackBinaryJson(json, buffers, options = {}) {\n  return unpackJsonArraysRecursive(json, json, buffers, options);\n}","// Derived from (MIT Licensed) https://github.com/uber-web/loaders.gl/tree/master/modules/gltf\n\nconst assert = require('assert');\n\nconst {\n  ATTRIBUTE_TYPE_TO_COMPONENTS,\n  ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE,\n  ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY\n} = require('./gltf-type-utils.js');\n\n// Creates a new ArrayBuffer starting at the offset, containing all remaining bytes\n// TODO - should not be needed, see above\nfunction getArrayBufferAtOffset(arrayBuffer, byteOffset) {\n  const length = arrayBuffer.byteLength - byteOffset;\n  const binaryBuffer = new ArrayBuffer(length);\n  const sourceArray = new Uint8Array(arrayBuffer);\n  const binaryArray = new Uint8Array(binaryBuffer);\n  for (let i = 0; i < length; i++) {\n    binaryArray[i] = sourceArray[byteOffset + i];\n  }\n  return binaryBuffer;\n}\n\nfunction getArrayTypeAndLength(accessor, bufferView) {\n  const ArrayType = ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY[accessor.componentType];\n  const components = ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type];\n  const bytesPerComponent = ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE[accessor.componentType];\n  const length = accessor.count * components;\n  const byteLength = accessor.count * components * bytesPerComponent;\n  assert(byteLength >= 0 && byteLength <= bufferView.byteLength);\n  return { ArrayType, length, byteLength };\n}\n\nfunction unpackAccessors(arrayBuffer, bufferViews, json) {\n  // unpack accessors\n  const accessors = json.accessors || [];\n\n  const accessorBuffers = [];\n\n  for (let i = 0; i < accessors.length; ++i) {\n    const accessor = accessors[i];\n    assert(accessor);\n\n    const bufferView = bufferViews[accessor.bufferView];\n    // Draco encoded meshes don't have bufferView in accessor\n    if (bufferView) {\n      // Create a new typed array as a view into the combined buffer\n      const { ArrayType, length } = getArrayTypeAndLength(accessor, bufferView);\n      const array = new ArrayType(arrayBuffer, bufferView.byteOffset, length);\n      // Store the metadata on the array (e.g. needed to determine number of components per element)\n      array.accessor = accessor;\n      accessorBuffers.push(array);\n    }\n  }\n\n  return accessorBuffers;\n}\n\nfunction unpackImages(arrayBuffer, bufferViews, json) {\n  // unpack images\n  const images = json.images || [];\n\n  const imageBuffers = [];\n\n  for (let i = 0; i < images.length; ++i) {\n    const image = images[i];\n    assert(image);\n\n    if (image.bufferView === undefined) {\n      imageBuffers.push(null);\n      continue;\n    }\n\n    const bufferView = bufferViews[image.bufferView];\n    assert(bufferView);\n\n    // Create a new typed array as a view into the combined buffer\n    const array = new Uint8Array(arrayBuffer, bufferView.byteOffset, bufferView.byteLength);\n    // Store the metadata on the array (e.g. needed to determine number of components per element)\n    array.imate = image;\n    imageBuffers.push(array);\n  }\n\n  return imageBuffers;\n}\n\nexport function unpackGLBBuffers(arrayBuffer, json, binaryByteOffset) {\n  // TODO - really inefficient, should just use the offset into the original array buffer\n  if (binaryByteOffset) {\n    arrayBuffer = getArrayBufferAtOffset(arrayBuffer, binaryByteOffset);\n  }\n\n  const bufferViews = json.bufferViews || [];\n\n  for (let i = 0; i < bufferViews.length; ++i) {\n    const bufferView = bufferViews[i];\n    assert(bufferView.byteLength >= 0);\n  }\n\n  return {\n    // TODO: delete unpackAccessors and use buffer views only?\n    accessors: unpackAccessors(arrayBuffer, bufferViews, json),\n    images: unpackImages(arrayBuffer, bufferViews, json)\n  };\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\n// System for registering callbacks to run in event handlers on the next frame\n// Used to get around restrictions on APIs like pointer lock, fullscreen, or\n// screen orientation.\n\nconst assert = require('assert');\n\nlet cbs = {};\nexport function topOfFrame() {\n  cbs = {};\n}\n\nexport function on(type, code_or_pos, cb) {\n  let list = cbs[type] = cbs[type] || [];\n  if (typeof code_or_pos === 'number') {\n    list[code_or_pos] = cb;\n  } else {\n    list.push([code_or_pos, cb]);\n  }\n}\n\nexport function handle(type, event) {\n  let list = cbs[type];\n  if (!list) {\n    return;\n  }\n  switch (type) {\n    case 'keydown':\n    case 'keyup':\n      if (list[event.keyCode]) {\n        list[event.keyCode](type, event);\n      }\n      break;\n    case 'mouseup':\n    case 'mousedown':\n      {\n        let x = event.pageX;\n        let y = event.pageY;\n        let button = event.button;\n        for (let ii = 0; ii < list.length; ++ii) {\n          let elem = list[ii];\n          let pos = elem[0];\n          if (x >= pos.x && x < pos.x + pos.w && y >= pos.y && y < pos.y + pos.h && (pos.button < 0 || pos.button === button)) {\n            elem[1](type, event);\n            break;\n          }\n        }\n      }break;\n    default:\n      assert(false);\n  }\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n// Some code from Turbulenz: Copyright (c) 2012-2013 Turbulenz Limited\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* global navigator */\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst { cmd_parse } = require('./cmds.js');\nconst engine = require('./engine.js');\nconst in_event = require('./in_event.js');\nconst local_storage = require('./local_storage.js');\nconst { abs, min, sqrt } = Math;\nconst pointer_lock = require('./pointer_lock.js');\nconst { soundResume } = require('./sound.js');\nconst { vec2, v2add, v2copy, v2lengthSq, v2set, v2scale, v2sub } = require('./vmath.js');\n\nconst UP_EDGE = 0; // only for pads, which use === null as \"up\"\nconst UP = 0; // only for key/mouse\nconst DOWN = 1;\nconst DOWN_EDGE = 2; // only for pads\n\n// per-app overrideable options\nconst TOUCH_AS_MOUSE = true;\nlet map_analog_to_dpad = true;\n\nlet mouse_log = false;\n\nexport const ANY = -2;\nexport const POINTERLOCK = -1;\n\nexport let KEYS = {\n  BACKSPACE: 8,\n  TAB: 9,\n  ENTER: 13,\n  RETURN: 13,\n  SHIFT: 16,\n  CTRL: 17,\n  ALT: 18,\n  ESC: 27,\n  SPACE: 32,\n  PAGEUP: 33,\n  PAGEDOWN: 34,\n  END: 35,\n  HOME: 36,\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40,\n  INS: 45,\n  DEL: 46,\n  NUMPAD_DIVIDE: 111,\n  EQUALS: 187,\n  MINUS: 189,\n  SLASH: 191,\n  TILDE: 192\n};\n(function () {\n  for (let ii = 1; ii <= 12; ++ii) {\n    KEYS[`F${ii}`] = 111 + ii;\n  }\n  for (let ii = 48; ii <= 90; ++ii) {\n    // 0-9;A-Z\n    KEYS[String.fromCharCode(ii)] = ii;\n  }\n})();\nif (typeof Proxy === 'function') {\n  // Catch referencing keys that are not in our map\n  KEYS = new Proxy(KEYS, {\n    get: function (target, prop) {\n      let ret = target[prop];\n      assert(ret);\n      return ret;\n    }\n  });\n}\nexport const PAD = {\n  A: 0,\n  SELECT: 0, // GLOV name\n  B: 1,\n  CANCEL: 1, // GLOV name\n  X: 2,\n  Y: 3,\n  LB: 4,\n  LEFT_BUMPER: 4,\n  RB: 5,\n  RIGHT_BUMPER: 5,\n  LT: 6,\n  LEFT_TRIGGER: 6,\n  RT: 7,\n  RIGHT_TRIGGER: 7,\n  BACK: 8,\n  START: 9,\n  LEFT_STICK: 10,\n  RIGHT_STICK: 11,\n  UP: 12,\n  DOWN: 13,\n  LEFT: 14,\n  RIGHT: 15,\n  ANALOG_UP: 20,\n  ANALOG_LEFT: 21,\n  ANALOG_DOWN: 22,\n  ANALOG_RIGHT: 23\n};\n\nlet pad_to_touch;\n\nlet canvas;\nlet key_state_new = {};\nlet pad_states = []; // One map per gamepad to pad button states\nlet gamepad_data = []; // Other tracking data per gamepad\nlet mouse_pos = vec2(); // in DOM coordinates, not canvas or virtual\nlet last_mouse_pos = vec2();\nlet mouse_pos_is_touch = false;\nlet mouse_over_captured = false;\nlet mouse_down = [];\nlet mouse_wheel = 0;\nlet movement_questionable_frames = 0;\nconst MOVEMENT_QUESTIONABLE_FRAMES = 2; // Need at least 2\n\nlet input_eaten_kb = false;\nlet input_eaten_mouse = false;\n\nlet touches = {}; // `m${button}` or touch_id -> TouchData\n\nexport let touch_mode = local_storage.getJSON('touch_mode', false);\nexport let pad_mode = local_storage.getJSON('pad_mode', false);\n\ncmd_parse.registerValue('mouse_log', {\n  type: cmd_parse.TYPE_INT,\n  range: [0, 1],\n  get: () => mouse_log,\n  set: v => mouse_log = v\n});\n\nfunction eventTimestamp(event) {\n  if (event && event.timeStamp) {\n    // assert((event.timeStamp < 1e12) === (engine.hrtime < 1e12));\n    // Must both be high res times, or both not!\n    if (event.timeStamp < 1e12 !== engine.hrtime < 1e12) {\n      return engine.hrtime;\n    }\n    return event.timeStamp;\n  }\n  return engine.hrtime;\n}\n\nfunction TouchData(pos, touch, button, event) {\n  this.delta = vec2();\n  this.total = 0;\n  this.cur_pos = pos.slice(0);\n  this.start_pos = pos.slice(0);\n  this.touch = touch;\n  this.button = button;\n  this.start_time = Date.now();\n  this.dispatched = false;\n  this.dispatched_drag_over = false;\n  this.up_edge = 0;\n  this.down_edge = 0;\n  this.state = DOWN;\n  this.down_time = 0;\n  this.origin_time = eventTimestamp(event);\n}\nTouchData.prototype.down = function (event, is_edge) {\n  if (is_edge) {\n    this.down_edge++;\n  }\n  this.state = DOWN;\n  this.origin_time = eventTimestamp(event);\n};\n\nfunction KeyData() {\n  this.down_edge = 0;\n  // this.down_start = 0;\n  this.origin_time = 0;\n  this.down_time = 0;\n  this.up_edge = 0;\n  this.state = UP;\n}\nKeyData.prototype.keyUp = function (event) {\n  ++this.up_edge;\n  this.down_time += eventTimestamp(event) - this.origin_time;\n  this.state = UP;\n};\n\nfunction setMouseToMid() {\n  v2set(mouse_pos, engine.width * 0.5 / camera2d.domToCanvasRatio(), engine.height * 0.5 / camera2d.domToCanvasRatio());\n}\n\nexport function pointerLocked() {\n  return pointer_lock.isLocked();\n}\nlet pointerlock_touch_id = `m${POINTERLOCK}`;\n// only works reliably when called from an event handler\nexport function pointerLockEnter(when) {\n  pointer_lock.enter(when);\n}\nfunction onPointerLockEnter() {\n  if (touch_mode) {\n    return;\n  }\n  let touch_data = touches[pointerlock_touch_id];\n  setMouseToMid();\n  if (touch_data) {\n    v2copy(touch_data.start_pos, mouse_pos);\n    touch_data.state = DOWN;\n    touch_data.origin_time = engine.hrtime;\n  } else {\n    touch_data = touches[pointerlock_touch_id] = new TouchData(mouse_pos, false, POINTERLOCK, null);\n  }\n  movement_questionable_frames = MOVEMENT_QUESTIONABLE_FRAMES;\n}\nexport function pointerLockExit() {\n  let touch_data = touches[pointerlock_touch_id];\n  if (touch_data) {\n    v2copy(touch_data.cur_pos, mouse_pos);\n    // no UP_EDGE for this\n    touch_data.state = UP;\n  }\n  pointer_lock.exit();\n  movement_questionable_frames = MOVEMENT_QUESTIONABLE_FRAMES;\n}\n\nlet last_event;\nconst skip = { isTrusted: 1, sourceCapabilities: 1, path: 1, currentTarget: 1, view: 1 };\nfunction eventlog(event) {\n  if (event === last_event) {\n    return;\n  }\n  last_event = event;\n  let pairs = [];\n  for (let k in event) {\n    let v = event[k];\n    if (!v || typeof v === 'function' || k.toUpperCase() === k || skip[k]) {\n      continue;\n    }\n    pairs.push(`${k}:${v.id || v}`);\n  }\n  console.log(`${engine.global_frame_index} ${event.type} ${pointerLocked() ? 'ptrlck' : 'unlckd'} ${pairs.join(',')}`);\n}\n\nfunction letEventThrough(event) {\n  return event.target.tagName === 'INPUT' || String(event.target.className).indexOf('noglov') !== -1;\n}\n\nfunction ignored(event) {\n  // eventlog(event);\n  if (!letEventThrough(event)) {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n}\n\nlet unload_protected = false;\nfunction stopCtrlW(e) {\n  // Cancel the event\n  e.preventDefault();\n  // Chrome requires returnValue to be set\n  e.returnValue = 'Are you sure you want to quit?';\n}\nfunction protectUnload(enable) {\n  if (enable && !unload_protected) {\n    console.log('Adding handler');\n    window.addEventListener('beforeunload', stopCtrlW, false);\n    unload_protected = true;\n  } else if (!enable && unload_protected) {\n    console.log('Removing handler');\n    window.removeEventListener('beforeunload', stopCtrlW, false);\n    unload_protected = false;\n  }\n}\n\nfunction onKeyUp(event) {\n  protectUnload(event.ctrlKey);\n  let code = event.keyCode;\n  if (!letEventThrough(event)) {\n    event.stopPropagation();\n    event.preventDefault();\n  }\n\n  if (code === KEYS.ESC && pointerLocked()) {\n    pointerLockExit();\n  }\n  // Letting through to our code regardless of no_stop, because we handle things like ESC in INPUT elements\n\n  let ks = key_state_new[code];\n  if (ks && ks.state === DOWN) {\n    ks.keyUp(event);\n  }\n\n  in_event.handle('keyup', event);\n}\n\nfunction onKeyDown(event) {\n  protectUnload(event.ctrlKey);\n  let code = event.keyCode;\n  let no_stop = letEventThrough(event) || code >= KEYS.F5 && code <= KEYS.F12 || // Chrome debug hotkeys\n  code === KEYS.I && (event.altKey && event.metaKey || event.ctrlKey && event.shiftKey); // Safari, alternate Chrome\n  if (!no_stop) {\n    event.stopPropagation();\n    event.preventDefault();\n  }\n  // console.log(`${event.code} ${event.keyCode}`);\n  soundResume();\n\n  // Letting through to our code regardless of no_stop, because we handle things like ESC in INPUT elements\n  let ks = key_state_new[code];\n  if (!ks) {\n    ks = key_state_new[code] = new KeyData();\n  }\n  if (ks.state !== DOWN) {\n    // not a repeat event\n    ++ks.down_edge;\n    ks.state = DOWN;\n    ks.origin_time = eventTimestamp(event);\n    // ks.down_start = ks.origin_time;\n\n    in_event.handle('keydown', event);\n  }\n}\n\nlet mouse_moved = false;\nlet temp_delta = vec2();\nlet last_abs_move = 0;\nlet last_abs_move_time = 0;\nfunction onMouseMove(event, no_stop) {\n  /// eventlog(event);\n  // Don't block mouse button 3, that's the Back button\n  if (!letEventThrough(event) && !no_stop && event.button !== 3) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (touch_mode) {\n      local_storage.setJSON('touch_mode', false);\n      touch_mode = false;\n    }\n    if (pad_mode) {\n      local_storage.setJSON('pad_mode', false);\n      pad_mode = false;\n    }\n  }\n  mouse_moved = true;\n  // offsetX/layerX return position relative to text-entry boxes, not good!\n  // clientX/clientY do not handle weird scrolling that happens on iOS, but\n  //   should not affect mouse events (but maybe on Safari desktop?)\n  mouse_pos[0] = event.pageX;\n  mouse_pos[1] = event.pageY;\n  // if (event.offsetX !== undefined) {\n  //   mouse_pos[0] = event.offsetX;\n  //   mouse_pos[1] = event.offsetY;\n  // } else {\n  //   mouse_pos[0] = event.layerX;\n  //   mouse_pos[1] = event.layerY;\n  // }\n  mouse_pos_is_touch = false;\n\n  let any_movement = false;\n  if (pointerLocked()) {\n    setMouseToMid();\n    if (event.movementX || event.movementY) {\n      // Smooth out (ignore) large jumps in movement\n      // This is, I believe, just a bug with Chromium on Windows, as it repositions the hidden mouse cursor\n      let ts = event.timeStamp || Date.now();\n      let abs_move = abs(event.movementX) + abs(event.movementY);\n      if (abs_move > 200 && (abs_move > 3 * last_abs_move || ts - last_abs_move_time > 1000)) {\n        console.log(`Ignoring mousemove with sudden large delta: ${event.movementX},${event.movementY}`);\n      } else {\n        v2set(temp_delta, event.movementX || 0, event.movementY || 0);\n        any_movement = true;\n      }\n      last_abs_move = abs_move;\n      last_abs_move_time = ts;\n    }\n  } else {\n    v2sub(temp_delta, mouse_pos, last_mouse_pos);\n    if (temp_delta[0] || temp_delta[1]) {\n      any_movement = true;\n    }\n    v2copy(last_mouse_pos, mouse_pos);\n  }\n  if (any_movement && movement_questionable_frames && v2lengthSq(temp_delta) > 100 * 100) {\n    // giant movement right after entering or exiting pointer lock, ignore (Chrome bug)\n    // We get these unreasonable jumps in both movementXY and the other, presumably\n    // because pointerLocked() is slightly out of sync, though the large .movementX/Y\n    // is clearly erroneous.\n    any_movement = false;\n  }\n  if (any_movement) {\n    for (let button = POINTERLOCK; button < mouse_down.length; ++button) {\n      if (mouse_down[button] || button === POINTERLOCK && pointerLocked()) {\n        let touch_data = touches[`m${button}`];\n        if (touch_data) {\n          v2add(touch_data.delta, touch_data.delta, temp_delta);\n          touch_data.total += abs(temp_delta[0]) + abs(temp_delta[1]);\n          v2copy(touch_data.cur_pos, mouse_pos);\n        }\n      }\n    }\n  }\n}\n\nfunction onMouseDown(event) {\n  if (mouse_log) {\n    eventlog(event);\n  }\n  onMouseMove(event); // update mouse_pos\n  soundResume();\n  let no_click = letEventThrough(event);\n\n  let button = event.button;\n  mouse_down[button] = mouse_pos.slice(0);\n  let touch_id = `m${button}`;\n  if (touches[touch_id]) {\n    v2copy(touches[touch_id].start_pos, mouse_pos);\n  } else {\n    touches[touch_id] = new TouchData(mouse_pos, false, button, event);\n  }\n  touches[touch_id].down(event, !no_click);\n  if (!no_click) {\n    in_event.handle('mousedown', event);\n  }\n}\n\nfunction onMouseUp(event) {\n  if (mouse_log) {\n    eventlog(event);\n  }\n  onMouseMove(event); // update mouse_pos\n  let no_click = letEventThrough(event);\n  let button = event.button;\n  if (mouse_down[button]) {\n    let touch_id = `m${button}`;\n    let touch_data = touches[touch_id];\n    if (touch_data) {\n      v2copy(touch_data.cur_pos, mouse_pos);\n      if (!no_click) {\n        touch_data.up_edge++;\n      }\n      touch_data.state = UP;\n      touch_data.down_time += eventTimestamp(event) - touch_data.origin_time;\n    }\n    delete mouse_down[button];\n  }\n  if (!no_click) {\n    in_event.handle('mouseup', event);\n  }\n}\n\nfunction onWheel(event) {\n  onMouseMove(event, true);\n  let delta = -event.deltaY || event.wheelDelta || -event.detail;\n  if (delta > 0) {\n    mouse_wheel++;\n  } else if (delta < 0) {\n    mouse_wheel--;\n  }\n}\n\nlet touch_pos = vec2();\nlet released_touch_id = 0;\nfunction onTouchChange(event) {\n  // eventlog(event);\n  // Using .pageX/Y here because on iOS when a text entry is selected, it scrolls\n  // our canvas offscreen.  Should maybe have the canvas resize and use clientX\n  // instead, but this works well enough.\n  soundResume();\n  if (!touch_mode) {\n    local_storage.set('touch_mode', true);\n    touch_mode = true;\n  }\n  if (pad_mode) {\n    local_storage.set('pad_mode', true);\n    pad_mode = true;\n  }\n  if (event.cancelable !== false) {\n    event.preventDefault();\n  }\n  let ct = event.touches;\n  let seen = {};\n\n  let new_count = ct.length;\n  let old_count = new_count;\n  // Look for press and movement\n  for (let ii = 0; ii < new_count; ++ii) {\n    let touch = ct[ii];\n    let last_touch = touches[touch.identifier];\n    v2set(touch_pos, touch.pageX, touch.pageY);\n    if (!last_touch) {\n      last_touch = touches[touch.identifier] = new TouchData(touch_pos, true, 0, event);\n      last_touch.down(event, true);\n      --old_count;\n      in_event.handle('mousedown', touch);\n    } else {\n      v2sub(temp_delta, touch_pos, last_touch.cur_pos);\n      v2add(last_touch.delta, last_touch.delta, temp_delta);\n      last_touch.total += abs(temp_delta[0]) + abs(temp_delta[1]);\n      v2copy(last_touch.cur_pos, touch_pos);\n    }\n\n    seen[touch.identifier] = true;\n    if (TOUCH_AS_MOUSE && new_count === 1) {\n      // Single touch, treat as mouse movement\n      v2copy(mouse_pos, touch_pos);\n      mouse_pos_is_touch = true;\n    }\n  }\n  // Look for release, if releasing exactly one final touch\n  let released_touch;\n  let released_ids = [];\n  for (let id in touches) {\n    if (!seen[id]) {\n      let touch = touches[id];\n      if (touch.touch && touch.state === DOWN) {\n        ++old_count;\n        released_touch = touch;\n        released_ids.push(id);\n        in_event.handle('mouseup', { pageX: touch.cur_pos[0], pageY: touch.cur_pos[1] });\n        touch.up_edge++;\n        touch.state = UP;\n        touch.down_time += eventTimestamp(event) - touch.origin_time;\n        touch.release = true;\n      }\n    }\n  }\n  for (let ii = 0; ii < released_ids.length; ++ii) {\n    let id = released_ids[ii];\n    let touch = touches[id];\n    // get new id, not overlapping with touch.identifier values,\n    // so that if we get a new touch event before the next tick, we still see the release, etc\n    let new_id = `r${++released_touch_id}`;\n    delete touches[id];\n    touches[new_id] = touch;\n  }\n  if (TOUCH_AS_MOUSE) {\n    if (old_count === 1 && new_count === 0) {\n      delete mouse_down[0];\n      v2copy(mouse_pos, released_touch.cur_pos);\n      mouse_pos_is_touch = true;\n    } else if (new_count === 1) {\n      let touch = ct[0];\n      if (!old_count) {\n        mouse_down[0] = vec2(touch.pageX, touch.pageY);\n      }\n      v2set(mouse_pos, touch.pageX, touch.pageY);\n      mouse_pos_is_touch = true;\n    } else if (new_count > 1) {\n      // multiple touches, release mouse_down without emitting click\n      delete mouse_down[0];\n    }\n  }\n}\n\nfunction onBlurOrFocus(evt) {\n  protectUnload(false);\n  for (let code in key_state_new) {\n    let ks = key_state_new[code];\n    if (ks.state === DOWN) {\n      ks.keyUp(evt);\n    }\n  }\n}\n\nlet ANALOG_MAP = {};\nfunction genAnalogMap() {\n  if (map_analog_to_dpad) {\n    ANALOG_MAP[PAD.LEFT] = PAD.ANALOG_LEFT;\n    ANALOG_MAP[PAD.RIGHT] = PAD.ANALOG_RIGHT;\n    ANALOG_MAP[PAD.UP] = PAD.ANALOG_UP;\n    ANALOG_MAP[PAD.DOWN] = PAD.ANALOG_DOWN;\n  }\n}\n\nexport function startup(_canvas, params) {\n  canvas = _canvas;\n  pointer_lock.startup(canvas, onPointerLockEnter);\n  if (params.map_analog_to_dpad !== undefined) {\n    map_analog_to_dpad = params.map_analog_to_dpad;\n  }\n  pad_to_touch = params.pad_to_touch;\n  genAnalogMap();\n\n  let passive_param = false;\n  try {\n    let opts = Object.defineProperty({}, 'passive', {\n      get: function () {\n        passive_param = { passive: false };\n        return false;\n      }\n    });\n    window.addEventListener('test', null, opts);\n    window.removeEventListener('test', null, opts);\n  } catch (e) {\n    passive_param = false;\n  }\n\n  window.addEventListener('keydown', onKeyDown, false);\n  window.addEventListener('keyup', onKeyUp, false);\n\n  window.addEventListener('click', ignored, false);\n  window.addEventListener('contextmenu', ignored, false);\n  window.addEventListener('mousemove', onMouseMove, false);\n  window.addEventListener('mousedown', onMouseDown, false);\n  window.addEventListener('mouseup', onMouseUp, false);\n  if (window.WheelEvent) {\n    window.addEventListener('wheel', onWheel, passive_param);\n  } else {\n    window.addEventListener('DOMMouseScroll', onWheel, false);\n    window.addEventListener('mousewheel', onWheel, false);\n  }\n\n  window.addEventListener('blur', onBlurOrFocus, false);\n  window.addEventListener('focus', onBlurOrFocus, false);\n\n  canvas.addEventListener('touchstart', onTouchChange, passive_param);\n  canvas.addEventListener('touchmove', onTouchChange, passive_param);\n  canvas.addEventListener('touchend', onTouchChange, passive_param);\n  canvas.addEventListener('touchcancel', onTouchChange, passive_param);\n\n  // For iOS, this is needed in test_fullscreen, but not here, for some reason\n  //window.addEventListener('gesturestart', ignored, false);\n}\n\nconst DEADZONE = 0.26;\nconst DEADZONE_SQ = DEADZONE * DEADZONE;\nconst NUM_STICKS = 2;\nconst PAD_THRESHOLD = 0.25; // for turning analog motion into digital events\n\nfunction getGamepadData(idx) {\n  let gpd = gamepad_data[idx];\n  if (!gpd) {\n    gpd = gamepad_data[idx] = {\n      id: idx,\n      timestamp: 0,\n      sticks: new Array(NUM_STICKS)\n    };\n    for (let ii = 0; ii < NUM_STICKS; ++ii) {\n      gpd.sticks[ii] = vec2();\n    }\n    pad_states[idx] = {};\n  }\n  return gpd;\n}\n\nfunction updatePadState(gpd, ps, b, padcode) {\n  if (b && !ps[padcode]) {\n    ps[padcode] = DOWN_EDGE;\n    if (!pad_mode) {\n      local_storage.setJSON('pad_mode', true);\n      pad_mode = true;\n    }\n    if (padcode === pad_to_touch) {\n      let touch_id = `g${gpd.id}`;\n      if (touches[touch_id]) {\n        setMouseToMid();\n        v2copy(touches[touch_id].start_pos, mouse_pos);\n      } else {\n        touches[touch_id] = new TouchData(mouse_pos, false, 0, null);\n      }\n      touches[touch_id].down(null, true);\n    }\n  } else if (!b && ps[padcode]) {\n    ps[padcode] = UP_EDGE;\n    if (padcode === pad_to_touch) {\n      let touch_id = `g${gpd.id}`;\n      let touch_data = touches[touch_id];\n      if (touch_data) {\n        setMouseToMid();\n        v2copy(touch_data.cur_pos, mouse_pos);\n        touch_data.up_edge++;\n        touch_data.state = UP;\n        touch_data.down_time += engine.hrtime - touch_data.origin_time;\n      }\n    }\n  }\n}\n\nfunction gamepadUpdate() {\n  let gamepads = navigator.gamepads || navigator.webkitGamepads || navigator.getGamepads && navigator.getGamepads() || navigator.webkitGetGamepads && navigator.webkitGetGamepads();\n\n  if (gamepads) {\n    let numGamePads = gamepads.length;\n    for (let ii = 0; ii < numGamePads; ii++) {\n      let gamepad = gamepads[ii];\n      if (!gamepad) {\n        continue;\n      }\n      let gpd = getGamepadData(ii);\n      let ps = pad_states[ii];\n      // Update button states\n      if (gpd.timestamp < gamepad.timestamp) {\n        let buttons = gamepad.buttons;\n        gpd.timestamp = gamepad.timestamp;\n\n        let numButtons = buttons.length;\n        for (let n = 0; n < numButtons; n++) {\n          let value = buttons[n];\n          if (typeof value === 'object') {\n            value = value.value;\n          }\n          value = value > 0.5;\n          updatePadState(gpd, ps, value, n);\n        }\n      }\n\n      // Update axes states\n      let axes = gamepad.axes;\n      if (axes.length >= NUM_STICKS * 2) {\n        for (let n = 0; n < NUM_STICKS; ++n) {\n          let pair = gpd.sticks[n];\n          v2set(pair, axes[n * 2], -axes[n * 2 + 1]);\n          let magnitude = v2lengthSq(pair);\n          if (magnitude > DEADZONE_SQ) {\n            magnitude = sqrt(magnitude);\n\n            // Normalize lX and lY\n            v2scale(pair, pair, 1 / magnitude);\n\n            // Clip the magnitude at its max possible value\n            magnitude = min(magnitude, 1);\n\n            // Adjust magnitude relative to the end of the dead zone\n            magnitude = (magnitude - DEADZONE) / (1 - DEADZONE);\n\n            v2scale(pair, pair, magnitude);\n          } else {\n            v2set(pair, 0, 0);\n          }\n\n          // Apply \"movement\" to drag events\n          if (n <= 1 && pad_to_touch !== undefined) {\n            let touch_data = touches[`g${gpd.id}`];\n            if (touch_data) {\n              v2scale(temp_delta, pair, engine.this_frame_time);\n              v2add(touch_data.delta, touch_data.delta, temp_delta);\n              touch_data.total += abs(temp_delta[0]) + abs(temp_delta[1]);\n              setMouseToMid();\n              v2copy(touch_data.cur_pos, mouse_pos);\n            }\n          }\n        }\n\n        // Calculate virtual directional buttons\n        updatePadState(gpd, ps, gpd.sticks[0][0] < -PAD_THRESHOLD, PAD.ANALOG_LEFT);\n        updatePadState(gpd, ps, gpd.sticks[0][0] > PAD_THRESHOLD, PAD.ANALOG_RIGHT);\n        updatePadState(gpd, ps, gpd.sticks[0][1] < -PAD_THRESHOLD, PAD.ANALOG_DOWN);\n        updatePadState(gpd, ps, gpd.sticks[0][1] > PAD_THRESHOLD, PAD.ANALOG_UP);\n      }\n    }\n  }\n}\n\nexport function tickInput() {\n  // browser frame has occurred since the call to endFrame(),\n  // we should now have `touches` and `key_state` populated with edge events\n  if (movement_questionable_frames) {\n    --movement_questionable_frames;\n  }\n\n  // update timing of key down states\n  let hrtime = engine.hrtime;\n  for (let code in key_state_new) {\n    let ks = key_state_new[code];\n    if (ks.state === DOWN) {\n      ks.down_time += hrtime - ks.origin_time;\n      if (!ks.down_time) {\n        // happens on MacOS Safari\n        ks.down_time = 1;\n      }\n      // assert(hrtime >= ks.origin_time); - should be true, barring weird bugs\n      ks.origin_time = hrtime;\n    }\n  }\n\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (touch_data.state === DOWN) {\n      touch_data.down_time += hrtime - touch_data.origin_time;\n      // assert(hrtime >= touch_data.origin_time); - should be true, barring weird bugs\n      touch_data.origin_time = hrtime;\n    }\n  }\n\n  mouse_over_captured = false;\n  gamepadUpdate();\n  in_event.topOfFrame();\n  if (touches[pointerlock_touch_id] && !pointerLocked()) {\n    pointerLockExit();\n  }\n}\n\nfunction endFrameTickMap(map) {\n  Object.keys(map).forEach(keycode => {\n    switch (map[keycode]) {\n      case DOWN_EDGE:\n        map[keycode] = DOWN;\n        break;\n      case UP_EDGE:\n        delete map[keycode];\n        break;\n      default:\n    }\n  });\n}\nexport function endFrame(skip_mouse) {\n  for (let code in key_state_new) {\n    let ks = key_state_new[code];\n    if (ks.state === UP) {\n      key_state_new[code] = null;\n      delete key_state_new[code];\n    } else {\n      ks.up_edge = 0;\n      ks.down_edge = 0;\n      ks.down_time = 0;\n    }\n  }\n\n  pad_states.forEach(endFrameTickMap);\n  if (!skip_mouse) {\n    for (let touch_id in touches) {\n      let touch_data = touches[touch_id];\n      if (touch_data.state === UP) {\n        // Manually null out touches[touch_id] - some Chrome optimizer bug causes\n        // callers to later get this old value (instead of the newly added on with\n        // the same ID) unless we null it out (then they seem to get the new one).\n        touches[touch_id] = null;\n        delete touches[touch_id];\n      } else {\n        touch_data.delta[0] = touch_data.delta[1] = 0;\n        touch_data.dispatched = false;\n        touch_data.dispatched_drag_over = false;\n        touch_data.up_edge = 0;\n        touch_data.down_edge = 0;\n        touch_data.down_time = 0;\n      }\n    }\n    mouse_wheel = 0;\n    input_eaten_mouse = false;\n  }\n  input_eaten_kb = false;\n  mouse_moved = false;\n}\n\nexport function eatAllInput(skip_mouse) {\n  // destroy touches, remove all down and up edges\n  endFrame(skip_mouse);\n  if (!skip_mouse) {\n    mouse_over_captured = true;\n    input_eaten_mouse = true;\n  }\n  input_eaten_kb = true;\n}\n\nexport function eatAllKeyboardInput() {\n  eatAllInput(true);\n}\n\n// returns position mapped to current camera view\nexport function mousePos(dst) {\n  dst = dst || vec2();\n  camera2d.domToVirtual(dst, mouse_pos);\n  return dst;\n}\n\nexport function mouseMoved() {\n  return mouse_moved;\n}\n\nexport function mouseWheel() {\n  let ret = mouse_wheel;\n  mouse_wheel = 0;\n  return ret;\n}\n\nfunction mousePosParam(param) {\n  param = param || {};\n  return {\n    x: param.x === undefined ? camera2d.x0Real() : param.x,\n    y: param.y === undefined ? camera2d.y0Real() : param.y,\n    w: param.w === undefined ? camera2d.wReal() : param.w,\n    h: param.h === undefined ? camera2d.hReal() : param.h,\n    button: param.button === undefined ? ANY : param.button\n  };\n}\n\nlet check_pos = vec2();\nfunction checkPos(pos, param) {\n  camera2d.domToVirtual(check_pos, pos);\n  return check_pos[0] >= param.x && (param.w === Infinity || check_pos[0] < param.x + param.w) && check_pos[1] >= param.y && (param.h === Infinity || check_pos[1] < param.y + param.h);\n}\n\nexport function mouseOver(param) {\n  if (mouse_over_captured || pointerLocked()) {\n    return false;\n  }\n  param = param || {};\n  let pos_param = mousePosParam(param);\n\n  // eat mouse up/down/drag events\n  if (!param.peek) {\n    for (let id in touches) {\n      let touch = touches[id];\n      if (checkPos(touch.cur_pos, pos_param)) {\n        touch.down_edge = 0;\n        touch.up_edge = 0;\n        if (!param || !param.drag_target) {\n          touch.dispatched = true;\n        }\n      }\n    }\n  }\n\n  if (checkPos(mouse_pos, pos_param)) {\n    if (!param.peek) {\n      mouse_over_captured = true;\n    }\n    return true;\n  }\n  return false;\n}\n\nexport function mouseDown(button) {\n  if (button === ANY) {\n    return mouseDown(0) || mouseDown(2);\n  }\n  button = button || 0;\n  return !input_eaten_mouse && mouse_down[button];\n}\n\nexport function mousePosIsTouch() {\n  return mouse_pos_is_touch;\n}\n\nexport function isTouchDown(param) {\n  if (input_eaten_mouse) {\n    return false;\n  }\n  let pos_param = mousePosParam(param);\n  for (let id in touches) {\n    let touch = touches[id];\n    if (checkPos(touch.cur_pos, pos_param)) {\n      return check_pos.slice(0);\n    }\n  }\n  return false;\n}\n\nexport function numTouches() {\n  return Object.keys(touches).length;\n}\n\nexport function keyDown(keycode) {\n  if (input_eaten_kb) {\n    return 0;\n  }\n  let ks = key_state_new[keycode];\n  if (!ks) {\n    return 0;\n  }\n  if (ks.state === DOWN) {\n    assert(ks.down_time); // Will fire if we call keyDown() before tickInput()\n  }\n  return ks.down_time;\n}\nexport function keyDownEdge(keycode, opts) {\n  if (opts && opts.in_event_cb && !input_eaten_kb) {\n    in_event.on('keydown', keycode, opts.in_event_cb);\n  }\n\n  let ks = key_state_new[keycode];\n  if (!ks) {\n    return 0;\n  }\n  let r = ks.down_edge;\n  ks.down_edge = 0;\n  return r;\n}\nexport function keyUpEdge(keycode, opts) {\n  if (opts && opts.in_event_cb && !input_eaten_kb) {\n    in_event.on('keyup', keycode, opts.in_event_cb);\n  }\n\n  let ks = key_state_new[keycode];\n  if (!ks) {\n    return 0;\n  }\n  let r = ks.up_edge;\n  ks.up_edge = 0;\n  return r;\n}\n\nexport function padGetAxes(out, stickindex, padindex) {\n  assert(stickindex >= 0 && stickindex < NUM_STICKS);\n  if (padindex === undefined) {\n    let sub = vec2();\n    v2set(out, 0, 0);\n    for (let ii = 0; ii < gamepad_data.length; ++ii) {\n      padGetAxes(sub, stickindex, ii);\n      v2add(out, out, sub);\n    }\n    return;\n  }\n  let sticks = getGamepadData(padindex).sticks;\n  v2copy(out, sticks[stickindex]);\n}\n\nfunction padButtonDownInternal(gpd, ps, padcode) {\n  if (ps[padcode]) {\n    return engine.this_frame_time;\n  }\n  return 0;\n}\nfunction padButtonDownEdgeInternal(gpd, ps, padcode) {\n  if (ps[padcode] === DOWN_EDGE) {\n    ps[padcode] = DOWN;\n    return engine.this_frame_time;\n  }\n  return 0;\n}\nfunction padButtonUpEdgeInternal(gpd, ps, padcode) {\n  if (ps[padcode] === UP_EDGE) {\n    delete ps[padcode];\n    return engine.this_frame_time;\n  }\n  return 0;\n}\n\nfunction padButtonShared(fn, padcode, padindex) {\n  assert(padcode !== undefined);\n  let r = 0;\n  // Handle calling without a specific pad index\n  if (padindex === undefined) {\n    for (let ii = 0; ii < pad_states.length; ++ii) {\n      r += padButtonShared(fn, padcode, ii);\n    }\n    return r;\n  }\n\n  if (input_eaten_mouse) {\n    return 0;\n  }\n  let gpd = gamepad_data[padindex];\n  if (!gpd) {\n    return 0;\n  }\n  let ps = pad_states[padindex];\n\n  r += ANALOG_MAP[padcode] && fn(gpd, ps, ANALOG_MAP[padcode]) || 0;\n  r += fn(gpd, ps, padcode);\n  return r;\n}\nexport function padButtonDown(padcode, padindex) {\n  return padButtonShared(padButtonDownInternal, padcode, padindex);\n}\nexport function padButtonDownEdge(padcode, padindex) {\n  return padButtonShared(padButtonDownEdgeInternal, padcode, padindex);\n}\nexport function padButtonUpEdge(padcode, padindex) {\n  return padButtonShared(padButtonUpEdgeInternal, padcode, padindex);\n}\n\nlet start_pos = vec2();\nlet cur_pos = vec2();\nlet delta = vec2();\n\nexport function mouseUpEdge(param) {\n  param = param || {};\n  let pos_param = mousePosParam(param);\n  let button = pos_param.button;\n  let max_click_dist = param.max_dist || 50; // TODO: relative to camera distance?\n\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (!touch_data.up_edge || !(button === ANY || button === touch_data.button) || touch_data.total > max_click_dist) {\n      continue;\n    }\n    if (checkPos(touch_data.cur_pos, pos_param)) {\n      if (!param.peek) {\n        touch_data.up_edge = 0;\n      }\n      return {\n        button: touch_data.button,\n        pos: check_pos.slice(0),\n        start_time: touch_data.start_time\n      };\n    }\n  }\n\n  if (param.in_event_cb && !input_eaten_mouse && !mouse_over_captured) {\n    // TODO: Maybe need to also pass along earlier exclusions?  Working okay for now though.\n    if (!param.phys) {\n      param.phys = {};\n    }\n    param.phys.button = typeof param.in_event_button === 'number' ? param.in_event_button : button;\n    camera2d.virtualToDomPosParam(param.phys, pos_param);\n    in_event.on('mouseup', param.phys, param.in_event_cb);\n  }\n  return false;\n}\nexports.click = mouseUpEdge;\n\nexport function mouseDownEdge(param) {\n  param = param || {};\n  let pos_param = mousePosParam(param);\n  let button = pos_param.button;\n\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (!touch_data.down_edge || !(button === ANY || button === touch_data.button)) {\n      continue;\n    }\n    if (checkPos(touch_data.cur_pos, pos_param)) {\n      if (!param.peek) {\n        touch_data.down_edge = 0;\n      }\n      return {\n        button: touch_data.button,\n        pos: check_pos.slice(0),\n        start_time: touch_data.start_time\n      };\n    }\n  }\n\n  if (param.in_event_cb && !input_eaten_mouse && !mouse_over_captured) {\n    // TODO: Maybe need to also pass along earlier exclusions?  Working okay for now though.\n    if (!param.phys) {\n      param.phys = {};\n    }\n    param.phys.button = button;\n    camera2d.virtualToDomPosParam(param.phys, pos_param);\n    in_event.on('mousedown', param.phys, param.in_event_cb);\n  }\n  return false;\n}\n\n// Completely consume any clicks or drags coming from a mouse down event in this\n// area - used to catch focus leaving an edit box without wanting to do what\n// a click would normally do.\nexport function mouseConsumeClicks(param) {\n  param = param || {};\n  let pos_param = mousePosParam(param);\n  let button = pos_param.button;\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (!(button === ANY || button === touch_data.button)) {\n      continue;\n    }\n    if (checkPos(touch_data.start_pos, pos_param)) {\n      touch_data.down_edge = 0;\n      // Set start pos so that it will not pass checkPos\n      touch_data.start_pos[0] = touch_data.start_pos[1] = Infinity;\n      // Set .total so that mouseUpEdge will not detect it as a click\n      touch_data.total = Infinity;\n    }\n  }\n}\n\nexport function drag(param) {\n  param = param || {};\n  let pos_param = mousePosParam(param);\n  let button = pos_param.button;\n  let min_dist = param.min_dist || 0;\n\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (!(button === ANY || button === touch_data.button) || touch_data.dispatched) {\n      continue;\n    }\n    if (checkPos(touch_data.start_pos, pos_param)) {\n      camera2d.domDeltaToVirtual(delta, [touch_data.total / 2, touch_data.total / 2]);\n      let total = delta[0] + delta[1];\n      if (total < min_dist) {\n        continue;\n      }\n      if (!param.peek) {\n        touch_data.dispatched = true;\n      }\n      let is_down_edge = touch_data.down_edge;\n      if (param.eat_clicks) {\n        touch_data.down_edge = touch_data.up_edge = 0;\n      }\n      if (param.payload) {\n        touch_data.drag_payload = param.payload;\n      }\n      camera2d.domToVirtual(start_pos, touch_data.start_pos);\n      camera2d.domToVirtual(cur_pos, touch_data.cur_pos);\n      camera2d.domDeltaToVirtual(delta, touch_data.delta);\n      return {\n        cur_pos,\n        start_pos,\n        delta, // this frame's delta\n        total, // total (linear) distance dragged\n        button: touch_data.button,\n        touch: touch_data.touch,\n        start_time: touch_data.start_time,\n        is_down_edge,\n        down_time: touch_data.down_time\n      };\n    }\n  }\n  return null;\n}\n\n// a lot like drag(), refactor to share more?\nexport function longPress(param) {\n  param = param || {};\n  let pos_param = mousePosParam(param);\n  let button = pos_param.button;\n  let max_dist = param.max_dist || 0;\n  let min_time = param.min_time || 500;\n\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (!(button === ANY || button === touch_data.button) || touch_data.long_press_dispatched) {\n      continue;\n    }\n    if (checkPos(touch_data.start_pos, pos_param)) {\n      camera2d.domDeltaToVirtual(delta, [touch_data.total / 2, touch_data.total / 2]);\n      let total = delta[0] + delta[1];\n      if (total > max_dist) {\n        continue;\n      }\n      let time = Date.now() - touch_data.start_time;\n      if (time < min_time) {\n        continue;\n      }\n      if (!param.peek) {\n        // ? touch_data.dispatched = true;\n        touch_data.long_press_dispatched = true;\n      }\n      let is_down_edge = touch_data.down_edge;\n      if (param.eat_clicks) {\n        touch_data.down_edge = touch_data.up_edge = 0;\n      }\n      camera2d.domToVirtual(start_pos, touch_data.start_pos);\n      camera2d.domToVirtual(cur_pos, touch_data.cur_pos);\n      camera2d.domDeltaToVirtual(delta, touch_data.delta);\n      return {\n        long_press: true,\n        cur_pos,\n        start_pos,\n        delta, // this frame's delta\n        total, // total (linear) distance dragged\n        button: touch_data.button,\n        touch: touch_data.touch,\n        start_time: touch_data.start_time,\n        is_down_edge,\n        down_time: touch_data.down_time\n      };\n    }\n  }\n  return null;\n}\n\nexport function dragDrop(param) {\n  param = param || {};\n  let pos_param = mousePosParam(param);\n  let button = pos_param.button;\n\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    // Maybe touch_data.dispatched_drag_over instead/as well?\n    if (!(button === ANY || button === touch_data.button) || touch_data.dispatched || !touch_data.drag_payload) {\n      continue;\n    }\n    if (!touch_data.up_edge) {\n      continue;\n    }\n    if (checkPos(touch_data.cur_pos, pos_param)) {\n      if (!param.peek) {\n        // Maybe touch_data.dispatched_drag_over as well?\n        touch_data.dispatched = true;\n      }\n      return { drag_payload: touch_data.drag_payload };\n    }\n  }\n  return null;\n}\n\nexport function dragOver(param) {\n  param = param || {};\n  let pos_param = mousePosParam(param);\n  let button = pos_param.button;\n\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (!(button === ANY || button === touch_data.button) || touch_data.dispatched || touch_data.dispatched_drag_over || // Maybe not .dispatched?\n    !touch_data.drag_payload) {\n      continue;\n    }\n    if (touch_data.state !== DOWN) {\n      continue;\n    }\n    if (checkPos(touch_data.cur_pos, pos_param)) {\n      // Separate 'dispatched' for dragOver (target) and drag (source) - they both need one dispatch per frame\n      if (!param.peek) {\n        touch_data.dispatched_drag_over = true;\n      }\n      camera2d.domToVirtual(cur_pos, touch_data.cur_pos);\n      return {\n        cur_pos,\n        drag_payload: touch_data.drag_payload\n      };\n    }\n  }\n  return null;\n}","// Portions Copyright 2020 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst engine = require('./engine.js');\nconst camera2d = require('./camera2d.js');\nconst input = require('./input.js');\nconst ui = require('./ui.js');\n\nlet state_cache = {};\nlet good_url = /https?:\\/\\//;\n\n// Create an invisible A elem in the DOM so we get all of the good browsery\n// behavior for a link area.\nexport function link(param) {\n  let { x, y, w, h, url, internal, allow_modal } = param;\n  if (!url.match(good_url)) {\n    url = `${document.location.protocol}//${url}`;\n  }\n  let key = `${x}_${y}`;\n  let state = state_cache[key];\n  if (!state) {\n    state = state_cache[key] = { clicked: false };\n  }\n  let elem = ui.getElem(allow_modal, state.elem);\n  state.frame = engine.global_frame_index;\n  if (elem !== state.elem) {\n    state.elem = elem;\n    if (elem) {\n      // new DOM element, initialize\n      elem.textContent = '';\n      let a_elem = document.createElement('a');\n      a_elem.textContent = ' ';\n      a_elem.className = 'glovui_link noglov';\n      a_elem.setAttribute('target', '_blank');\n      a_elem.setAttribute('href', url);\n      state.url = url;\n      if (internal) {\n        a_elem.onclick = function (ev) {\n          ev.preventDefault();\n          state.clicked = true;\n        };\n      }\n      elem.appendChild(a_elem);\n      state.a_elem = a_elem;\n    }\n  }\n  if (elem) {\n    if (url !== state.url) {\n      state.a_elem.setAttribute('href', url);\n      state.url = url;\n    }\n\n    let pos = camera2d.htmlPos(x, y);\n    elem.style.left = `${pos[0]}%`;\n    elem.style.top = `${pos[1]}%`;\n    let size = camera2d.htmlSize(w, h);\n    elem.style.width = `${size[0]}%`;\n    elem.style.height = `${size[1]}%`;\n  }\n  let clicked = state.clicked;\n  state.clicked = false;\n  return clicked;\n}\n\nexport function linkText(param) {\n  let { style_link, style_link_hover, x, y, z, font_size, text } = param;\n  // Also: any parameter to link(), e.g. url\n  let w = ui.font.getStringWidth(style_link, font_size, text);\n  let h = font_size;\n  let mouseover = input.mouseOver({ x, y, w, h, peek: true }) && !input.mousePosIsTouch();\n  let style = mouseover ? style_link_hover : style_link;\n  ui.font.drawSized(style, x, y, z, font_size, text);\n  let underline_w = 1;\n  ui.drawLine(x, y + h - underline_w, x + w, y + h - underline_w, z - 0.5, underline_w, 0.99, style.color_vec4);\n  param.w = w;\n  param.h = h;\n  return link(param);\n}\n\nexport function linkTick() {\n  for (let key in state_cache) {\n    let state = state_cache[key];\n    if (state.frame !== engine.global_frame_index - 1) {\n      delete state_cache[key];\n    }\n  }\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint-env browser */\n\nexports.storage_prefix = 'demo';\n\nlet lsd = function () {\n  try {\n    localStorage.test = 'test';\n    return localStorage;\n  } catch (e) {\n    return {};\n  }\n}();\nexport function get(key) {\n  key = `${exports.storage_prefix}_${key}`;\n  let ret = lsd[key];\n  if (ret === 'undefined') {\n    ret = undefined;\n  }\n  return ret;\n}\n\nexport function set(key, value) {\n  key = `${exports.storage_prefix}_${key}`;\n  if (value === undefined || value === null) {\n    delete lsd[key];\n  } else {\n    lsd[key] = value;\n  }\n}\n\nexport function setJSON(key, value) {\n  set(key, JSON.stringify(value));\n}\n\nexport function getJSON(key, def) {\n  let value = get(key);\n  if (value === undefined) {\n    return def;\n  }\n  try {\n    return JSON.parse(value);\n  } catch (e) {\n    // ignore\n  }\n  return def;\n}\n\nexport function clearAll(key_prefix) {\n  let prefix = new RegExp(`^${exports.storage_prefix}_${key_prefix || ''}`, 'u');\n  for (let key in lsd) {\n    if (key.match(prefix)) {\n      delete lsd[key];\n    }\n  }\n}\n\nexport function exportAll() {\n  let obj = {};\n  let prefix = new RegExp(`^${exports.storage_prefix}_(.*)`, 'u');\n  for (let key in lsd) {\n    let m = key.match(prefix);\n    if (m) {\n      let v = lsd[key];\n      if (v && v !== 'undefined') {\n        obj[m[1]] = v;\n      }\n    }\n  }\n  return JSON.stringify(obj);\n}\n\nexport function importAll(serialized) {\n  let obj = JSON.parse(serialized);\n  clearAll();\n  for (let key in obj) {\n    set(key, obj[key]);\n  }\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n// Some code from Turbulenz: Copyright (c) 2012-2013 Turbulenz Limited\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nexport function mat43() {\n  let r = new Float32Array(12);\n  r[0] = r[4] = r[8] = 1;\n  return r;\n}\n\nexport function m43identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  out[9] = 0;\n  out[10] = 0;\n  out[11] = 0;\n}\n\nexport function m43mul(out, a, b) {\n  let a0 = a[0];\n  let a1 = a[1];\n  let a2 = a[2];\n  let a3 = a[3];\n  let a4 = a[4];\n  let a5 = a[5];\n  let a6 = a[6];\n  let a7 = a[7];\n  let a8 = a[8];\n  let a9 = a[9];\n  let a10 = a[10];\n  let a11 = a[11];\n\n  let b0 = b[0];\n  let b1 = b[1];\n  let b2 = b[2];\n  let b3 = b[3];\n  let b4 = b[4];\n  let b5 = b[5];\n  let b6 = b[6];\n  let b7 = b[7];\n  let b8 = b[8];\n\n  out[0] = b0 * a0 + b3 * a1 + b6 * a2;\n  out[1] = b1 * a0 + b4 * a1 + b7 * a2;\n  out[2] = b2 * a0 + b5 * a1 + b8 * a2;\n  out[3] = b0 * a3 + b3 * a4 + b6 * a5;\n  out[4] = b1 * a3 + b4 * a4 + b7 * a5;\n  out[5] = b2 * a3 + b5 * a4 + b8 * a5;\n  out[6] = b0 * a6 + b3 * a7 + b6 * a8;\n  out[7] = b1 * a6 + b4 * a7 + b7 * a8;\n  out[8] = b2 * a6 + b5 * a7 + b8 * a8;\n  out[9] = b0 * a9 + b3 * a10 + b6 * a11 + b[9];\n  out[10] = b1 * a9 + b4 * a10 + b7 * a11 + b[10];\n  out[11] = b2 * a9 + b5 * a10 + b8 * a11 + b[11];\n\n  return out;\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint-env browser */\n\n/*\n  Convert models to GLB with:\n  node_modules\\.bin\\gltf-pipeline.cmd -t -i src/client/models/box.gltf -o src/client/models/box.glb\n  // The -t tells it not to embed the textures, but just leave the URIs\n */\n\nconst assert = require('assert');\n\nconst geom = require('./geom.js');\nconst glb_parser = require('./glb/parser.js');\nconst { ATTRIBUTE_TYPE_TO_COMPONENTS } = require('./glb/gltf-type-utils.js');\nconst renderer = require('./engine.js');\nconst shaders = require('./shaders.js');\nconst textures = require('./textures.js');\nconst { vec4 } = require('./vmath.js');\n\nexport let load_count = 0;\n\nlet box_glb = 'glTF\\x02\\0\\0\\0\\xCC\\b\\0\\0h\\x05\\0\\0JSON{\"asset\":{\"generator\":\"COLLADA2GLTF\",\"version\":\"2.0\"},\"scene\":0,\"scenes\":[{\"nodes\":[0]}],\"nodes\":[{\"children\":[1],\"matrix\":[1,0,0,0,0,0,-1,0,0,1,0,0,0,0,0,1]},{\"mesh\":0}],\"meshes\":[{\"primitives\":[{\"attributes\":{\"NORMAL\":1,\"POSITION\":2,\"TEXCOORD_0\":3},\"indices\":0,\"mode\":4,\"material\":0}],\"name\":\"Mesh\"}],\"accessors\":[{\"bufferView\":0,\"byteOffset\":0,\"componentType\":5123,\"count\":36,\"max\":[23],\"min\":[0],\"type\":\"SCALAR\"},{\"bufferView\":1,\"byteOffset\":0,\"componentType\":5126,\"count\":24,\"max\":[1,1,1],\"min\":[-1,-1,-1],\"type\":\"VEC3\"},{\"bufferView\":1,\"byteOffset\":288,\"componentType\":5126,\"count\":24,\"max\":[0.5,0.5,0.5],\"min\":[-0.5,-0.5,-0.5],\"type\":\"VEC3\"},{\"bufferView\":2,\"byteOffset\":0,\"componentType\":5126,\"count\":24,\"max\":[6,1],\"min\":[0,0],\"type\":\"VEC2\"}],\"materials\":[{\"pbrMetallicRoughness\":{\"baseColorTexture\":{\"index\":0,\"texCoord\":0},\"metallicFactor\":0,\"baseColorFactor\":[1,1,1,1],\"roughnessFactor\":1},\"name\":\"Texture\",\"emissiveFactor\":[0,0,0],\"alphaMode\":\"OPAQUE\",\"doubleSided\":false}],\"textures\":[{\"sampler\":0,\"source\":0}],\"samplers\":[{\"magFilter\":9729,\"minFilter\":9986,\"wrapS\":10497,\"wrapT\":10497}],\"bufferViews\":[{\"buffer\":0,\"byteOffset\":0,\"byteLength\":72,\"target\":34963},{\"buffer\":0,\"byteOffset\":72,\"byteLength\":576,\"byteStride\":12,\"target\":34962},{\"buffer\":0,\"byteOffset\":648,\"byteLength\":192,\"byteStride\":8,\"target\":34962}],\"buffers\":[{\"name\":\"box_textured\",\"byteLength\":840}]}H\\x03\\0\\0BIN\\0\\0\\0\\x01\\0\\x02\\0\\x03\\0\\x02\\0\\x01\\0\\x04\\0\\x05\\0\\x06\\0\\x07\\0\\x06\\0\\x05\\0\\b\\0\\t\\0\\n\\0\\x0B\\0\\n\\0\\t\\0\\f\\0\\r\\0\\x0E\\0\\x0F\\0\\x0E\\0\\r\\0\\x10\\0\\x11\\0\\x12\\0\\x13\\0\\x12\\0\\x11\\0\\x14\\0\\x15\\0\\x16\\0\\x17\\0\\x16\\0\\x15\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\xC0@\\0\\0\\0\\0\\0\\0\\xA0@\\0\\0\\0\\0\\0\\0\\xC0@\\xFE\\xFF\\x7F?\\0\\0\\xA0@\\xFE\\xFF\\x7F?\\0\\0\\x80@\\0\\0\\0\\0\\0\\0\\xA0@\\0\\0\\0\\0\\0\\0\\x80@\\0\\0\\x80?\\0\\0\\xA0@\\0\\0\\x80?\\0\\0\\0@\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0@\\0\\0\\x80?\\0\\0\\x80?\\0\\0\\x80?\\0\\0@@\\0\\0\\0\\0\\0\\0\\x80@\\0\\0\\0\\0\\0\\0@@\\0\\0\\x80?\\0\\0\\x80@\\0\\0\\x80?\\0\\0@@\\0\\0\\0\\0\\0\\0\\0@\\0\\0\\0\\0\\0\\0@@\\0\\0\\x80?\\0\\0\\0@\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\xFE\\xFF\\x7F?\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\x80?\\xFE\\xFF\\x7F?';\n{\n  let arr = new Uint8Array(box_glb.length);\n  for (let ii = 0; ii < box_glb.length; ++ii) {\n    arr[ii] = box_glb.charCodeAt(ii);\n  }\n  box_glb = arr.buffer;\n}\n\nexport let models = {};\n\nexport let default_vshader;\nexport let default_fshader;\n\nfunction initShaders() {\n  default_vshader = shaders.create(gl.VERTEX_SHADER, 'default.vp', '// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\\n// Released under MIT License: https://opensource.org/licenses/MIT\\n#pragma WebGL\\nprecision highp float;\\n\\n// per-vertex input\\nattribute vec3 POSITION;\\n//attribute vec3 COLOR;\\nattribute vec2 TEXCOORD;\\nattribute vec3 NORMAL;\\n\\n// per-drawcall input\\nuniform mat3 mv_inv_trans;\\nuniform mat4 projection;\\nuniform mat4 mat_mv;\\nuniform vec4 color;\\n\\n// output\\nvarying vec4 interp_color;\\nvarying vec2 interp_texcoord;\\nvarying vec3 interp_normal_vs;\\n// varying vec3 interp_pos_vs;\\n\\nvoid main(void) {\\n  //interp_color = vec4(COLOR * color.rgb, color.a);\\n  interp_color = color;\\n  interp_texcoord = vec2(TEXCOORD);\\n  interp_normal_vs = mv_inv_trans * NORMAL;\\n  // gl_Position = vec4(POSITION, 1.0);\\n\\n  // gl_Position = mat_vp * (mat_m * vec4(POSITION, 1.0));\\n  // gl_Position = mvp * vec4(POSITION, 1.0);\\n  vec4 pos_vs = mat_mv * vec4(POSITION, 1.0);\\n  // interp_pos_vs = pos_vs.xyz;\\n  gl_Position = projection * pos_vs;\\n}');\n  default_fshader = shaders.create(gl.FRAGMENT_SHADER, 'default.fp', '// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\\n// Released under MIT License: https://opensource.org/licenses/MIT\\n#pragma WebGL\\n\\nprecision lowp float;\\n\\nuniform sampler2D tex0; // source\\n\\nuniform vec3 light_diffuse;\\nuniform vec3 light_dir_vs;\\nuniform vec3 ambient;\\n\\nvarying vec4 interp_color;\\nvarying vec2 interp_texcoord;\\nvarying vec3 interp_normal_vs;\\n\\nvoid main(void) {\\n  vec4 texture0 = texture2D(tex0, interp_texcoord.xy);\\n#ifndef NOGAMMA\\n  texture0.rgb = texture0.rgb * texture0.rgb; // pow(2)\\n#endif\\n  vec4 albedo = texture0 * interp_color;\\n  if (albedo.a < 0.01) // TODO: Probably don\\'t want this, but makes hacking transparent things together easier for now\\n    discard;\\n\\n  vec3 normal_vs = normalize(interp_normal_vs);\\n  float diffuse = max(0.0, 0.5 + 0.5 * dot(normal_vs, -light_dir_vs.rgb));\\n\\n  vec3 light_color = diffuse * light_diffuse.rgb + ambient.rgb;\\n  gl_FragColor = vec4(light_color * albedo.rgb, albedo.a);\\n\\n#ifndef NOGAMMA\\n  gl_FragColor.rgb = pow(gl_FragColor.rgb, vec3(1.0/2.0));\\n#endif\\n}');\n}\n\nfunction Model(url) {\n  this.url = url;\n  let idx = url.lastIndexOf('/');\n  if (idx !== -1) {\n    this.base_url = url.slice(0, idx + 1);\n  } else {\n    this.base_url = '';\n  }\n}\n\nModel.prototype.load = function () {\n  ++load_count;\n  let xhr = new XMLHttpRequest();\n  xhr.open('GET', this.url, true);\n  xhr.responseType = 'arraybuffer';\n  xhr.onload = () => {\n    --load_count;\n    try {\n      let array_buffer = xhr.response; // Note: not xhr.responseText\n      if ((xhr.status === 200 || xhr.status === 0) && array_buffer) {\n        this.parse(array_buffer);\n      }\n    } catch (e) {\n      window.onerror('Model loading error', 'models.js', 0, 0, e);\n    }\n  };\n  xhr.send(null);\n};\n\nconst skip_attr = {\n  'TANGENT': true\n};\n\nModel.prototype.parse = function (glb_data) {\n  let glb = glb_parser.parse(glb_data);\n  if (!glb) {\n    return;\n  }\n  // Make Geoms for each primitives within each mesh\n  let glb_json = glb.getJSON();\n  let objs = [];\n  for (let ii = 0; ii < glb_json.meshes.length; ++ii) {\n    let mesh = glb_json.meshes[ii];\n    for (let jj = 0; jj < mesh.primitives.length; ++jj) {\n      let primitives = mesh.primitives[jj];\n      let material = glb_json.materials[primitives.material];\n      let texture = null;\n      if (material) {\n        // Just grabbing the base color texture, nothing else\n        let bct = (material.pbrMetallicRoughness || {}).baseColorTexture || {};\n        let texture_def = glb_json.textures && glb_json.textures[bct.index] || {};\n        let sampler_def = glb_json.samplers && glb_json.samplers[texture_def.sampler] || {};\n        let image = glb_json.images && glb_json.images[texture_def.source] || {};\n        if (image.uri) {\n          let params = {\n            url: `${this.base_url}${image.uri}`,\n            filter_mag: sampler_def.magFilter,\n            filter_min: sampler_def.minFilter,\n            wrap_s: sampler_def.wrapS,\n            wrap_t: sampler_def.wrapT\n          };\n          texture = textures.load(params);\n        }\n      }\n      let format = [];\n      let buffers = [];\n      let bidx = [];\n      let total_size = 0;\n      let vert_count = 0;\n      for (let attr in primitives.attributes) {\n        if (skip_attr[attr]) {\n          continue;\n        }\n        assert(shaders.semantic[attr] !== undefined);\n        let accessor = glb_json.accessors[primitives.attributes[attr]];\n        assert.equal(accessor.componentType, 5126); // F32\n        let geom_format = gl.FLOAT;\n        let geom_count = ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type];\n        assert(geom_count);\n        let my_vert_count = accessor.count /* / geom_count*/;\n        if (!vert_count) {\n          vert_count = my_vert_count;\n        } else {\n          assert.equal(vert_count, my_vert_count);\n        }\n        format.push([shaders.semantic[attr], geom_format, geom_count]);\n        let buffer = glb.getBuffer(accessor);\n        buffers.push(buffer);\n        bidx.push(0);\n        total_size += buffer.length;\n      }\n      // Interleave\n      let verts = new Float32Array(total_size);\n      let idx = 0;\n      for (let vert = 0; vert < vert_count; ++vert) {\n        for (let attr = 0; attr < format.length; ++attr) {\n          for (let kk = 0; kk < format[attr][2]; ++kk) {\n            verts[idx++] = buffers[attr][bidx[attr]++];\n          }\n        }\n      }\n      // Get indices\n      let accessor = glb_json.accessors[primitives.indices];\n      assert(accessor); // must be an indexed primitive set\n      assert.equal(accessor.type, 'SCALAR');\n      let idxs = glb.getBuffer(accessor);\n      if (accessor.componentType === 5125) {\n        // Uint32\n        assert(vert_count < 65536); // Fits in 16-bits\n        // Just convert to 16-bit\n        idxs = new Uint16Array(idxs);\n      } else {\n        assert.equal(accessor.componentType, 5123); // Uint16\n      }\n      objs.push({\n        geom: geom.create(format, verts, idxs, primitives.mode),\n        texture\n      });\n    }\n  }\n  // TODO: Something with nodes to tie together and position the meshes\n  this.data = {\n    objs\n    // glb, - Don't keep this, release it and any unreferenced data/buffers\n  };\n};\n\nModel.prototype.draw = function (mat) {\n  renderer.updateMatrices(mat); // before setting shader\n  shaders.bind(default_vshader, default_fshader, {\n    color: vec4(1, 1, 1, 1)\n  });\n  let objs = this.data.objs;\n  for (let ii = 0; ii < objs.length; ++ii) {\n    let obj = objs[ii];\n    if (obj.texture) {\n      textures.bind(0, obj.texture);\n    }\n    obj.geom.draw();\n  }\n};\n\n// Just draw the geometry, without any other binding\nModel.prototype.drawGeom = function () {\n  let objs = this.data.objs;\n  for (let ii = 0; ii < objs.length; ++ii) {\n    let obj = objs[ii];\n    obj.geom.draw();\n  }\n};\n\nexport function load(url) {\n  if (models[url]) {\n    return models[url];\n  }\n  let model = models[url] = new Model(url);\n  model.data = models.box.data; // stub until loaded\n  model.load();\n  return model;\n}\n\nexport function startup() {\n  initShaders();\n  let model_box = models.box = new Model('box');\n  model_box.parse(box_glb);\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\n//////////////////////////////////////////////////////////////////////////\n// Particle System Spec\n\n/*\n// Definitions\n// value = number or\n// value = [base, add_max] -> generates a number in the range [base, base + add_max)\nlet def_fire = {\n  particles: {\n    fire: {\n      blend: 'additive',\n      texture: 'fire.png',\n      color: [1,1,1,1], // multiplied by animation track, default 1,1,1,1, can be omitted\n      color_track: [ // just values, NOT random range\n        { t: 0.0, v: [1,0.4,0.4,1] },\n        { t: 0.7, v: [1,0,0,1] },\n        { t: 0.9, v: [0.2,0,0,1] },\n        { t: 1.0, v: [0,0,0,1] },\n      ],\n      size: [[32,16], [32,16]], // multiplied by animation track\n      size_track: [ // just values, NOT random range\n        { t: 0.0, v: [1,1] },\n        { t: 0.4, v: [0.5,0.5] },\n        { t: 0.7, v: [1,1] },\n        { t: 1.0, v: [1.5,1.5] },\n      ],\n      accel: [0,0],\n      rot: [0,360], // degrees\n      rot_vel: [10,2], // degrees per second\n      lifespan: [450,0], // milliseconds\n      kill_time_accel: 5,\n    },\n  },\n  emitters: {\n    fire: {\n      particle: 'fire',\n      // Random ranges affect each emitted particle:\n      pos: [[0,28], [0,28]],\n      vel: [0,0],\n      emit_rate: [60,20], // emissions per second\n      // Random ranges only calculated upon instantiation:\n      emit_time: [0,Infinity],\n      emit_initial: 10,\n    },\n  },\n  system_lifespan: Infinity, // must be manually killed\n};\n\n// Usage\nlet system = glov_engine.glov_particles.createSystem(def_fire, [50, 50, Z.PARTICLES]);\nsystem.updatePos(75, 75);\nsystem.killSoft(); // stops emitting and speeds up particles by kill_time_accel\nsystem.killHard(); // immediately stops drawing\n\n*/\n\n//////////////////////////////////////////////////////////////////////////\n// Implementation\n\nconst assert = require('assert');\nconst sprites = require('./sprites.js');\nconst textures = require('./textures.js');\nconst { vec2, v2copy, v2lerp, v2mul } = require('./vmath.js');\nconst { vec3, vec4, v3add, v4copy, v4lerp, v4mul } = require('./vmath.js');\n\nconst blend_map = {\n  alpha: sprites.BLEND_ALPHA,\n  additive: sprites.BLEND_ADDITIVE\n};\n\nexport function preloadParticleData(particle_data) {\n  // Preload all referenced particle textures\n  for (let key in particle_data.defs) {\n    let def = particle_data.defs[key];\n    for (let part_name in def.particles) {\n      let part_def = def.particles[part_name];\n      textures.load({ url: `img/${part_def.texture}.png` });\n    }\n  }\n}\n\n// Expect all values to be a pair of [base, add_max]\nfunction normalizeValue(v) {\n  if (v instanceof Float32Array && v.length >= 2) {\n    return v;\n  } else if (typeof v === 'number') {\n    return vec2(v, 0);\n  } else if (Array.isArray(v) || v instanceof Float32Array) {\n    // already an array, convert to Vec2\n    return vec2(v[0] || 0, v[1] || 0);\n  } else {\n    return assert(false);\n  }\n}\n\nfunction normalizeValueVec(vec, length) {\n  assert(length);\n  assert(Array.isArray(vec));\n  let ret = new Array(length);\n  for (let ii = 0; ii < length; ++ii) {\n    ret[ii] = normalizeValue(vec[ii]);\n  }\n  return ret;\n}\n\nfunction normalizeParticle(def, particle_manager) {\n  if (!def.normalized) {\n    let norm = def.normalized = {\n      blend: blend_map[def.blend] || sprites.BLEND_ALPHA,\n      texture: textures.load({ url: def.texture ? `img/${def.texture}.png` : 'img/glov/util_circle.png' }),\n      color: normalizeValueVec(def.color || [1, 1, 1, 1], 4),\n      color_track: null,\n      size: normalizeValueVec(def.size || [1, 1], 2),\n      size_track: null,\n      accel: normalizeValueVec(def.accel || [0, 0, 0], 3),\n      rot: normalizeValue(def.rot || 0),\n      rot_vel: normalizeValue(def.rot || 0),\n      lifespan: normalizeValue(def.lifespan || 1000),\n      kill_time_accel: normalizeValue(def.kill_time_accel || 1)\n    };\n    assert(norm.kill_time_accel[0] >= 1); // cannot slow down on kill!\n    if (def.color_track && def.color_track.length) {\n      assert(def.color_track.length > 1);\n      norm.color_track = [];\n      for (let ii = 0; ii < def.color_track.length; ++ii) {\n        let e = def.color_track[ii];\n        assert(typeof e.t === 'number');\n        let arr = new Float32Array(5);\n        arr[0] = e.v[0];\n        arr[1] = e.v[1];\n        arr[2] = e.v[2];\n        arr[3] = e.v[3];\n        arr[4] = e.t;\n        norm.color_track.push(arr);\n      }\n    }\n    if (def.size_track && def.size_track.length) {\n      assert(def.size_track.length > 1);\n      norm.size_track = [];\n      for (let ii = 0; ii < def.size_track.length; ++ii) {\n        let e = def.size_track[ii];\n        assert(typeof e.t === 'number');\n        let arr = new Float32Array(3);\n        arr[0] = e.v[0];\n        arr[1] = e.v[1];\n        arr[2] = e.t;\n        norm.size_track.push(arr);\n      }\n    }\n  }\n  return def.normalized;\n}\n\nfunction findParticle(particles, name) {\n  assert(particles[name] !== undefined);\n  return particles[name];\n}\n\nfunction normalizeEmitter(def, part_map) {\n  if (!def.normalized) {\n    def.normalized = {\n      part_idx: findParticle(part_map, def.particle),\n      pos: normalizeValueVec(def.pos || [0, 0, 0], 3),\n      vel: normalizeValueVec(def.vel || [0, 0, 0], 3),\n      emit_rate: normalizeValue(def.emit_rate || 10),\n      emit_time: normalizeValueVec(def.emit_time || [0, Infinity], 2),\n      emit_initial: normalizeValue(def.emit_initial || 1)\n    };\n    // convert particles per second to ms per emission\n    let min = def.normalized.emit_rate[0];\n    let max = def.normalized.emit_rate[0] + def.normalized.emit_rate[1];\n    def.normalized.emit_rate[0] = 1000 / max;\n    def.normalized.emit_rate[1] = 1000 / min;\n    assert(def.normalized.emit_rate[0] > 1); // Not more than 1000 per second, that's ridic'.\n  }\n  return def.normalized;\n}\n\nfunction normalizeDef(def, particle_manager) {\n  if (!def.normalized) {\n    let norm = def.normalized = {\n      system_lifespan: normalizeValue(def.system_lifespan || Infinity),\n      particles: [],\n      emitters: []\n    };\n    let part_map = {};\n    for (let key in def.particles) {\n      part_map[key] = norm.particles.length;\n      norm.particles.push(normalizeParticle(def.particles[key], particle_manager));\n    }\n    for (let key in def.emitters) {\n      norm.emitters.push(normalizeEmitter(def.emitters[key], part_map));\n    }\n  }\n  return def.normalized;\n}\n\nfunction instValue(v) {\n  return v[0] + Math.random() * v[1];\n}\nfunction instValueVec(v) {\n  let ret = new Float32Array(v.length);\n  for (let ii = 0; ii < v.length; ++ii) {\n    ret[ii] = instValue(v[ii]);\n  }\n  return ret;\n}\n\nlet temp_color = vec4();\nlet temp_color2 = vec4();\nlet temp_size = vec2();\nlet temp_size2 = vec2();\n// let temp_pos = v3allocZero();\n\nclass ParticleSystem {\n  constructor(parent, def_in, pos) {\n    assert(pos.length === 3);\n    this.parent = parent;\n    this.def = normalizeDef(def_in, parent);\n    this.system_lifespan = instValue(this.def.system_lifespan);\n    assert(this.system_lifespan > 0);\n    this.age = 0;\n    this.kill_hard = false;\n    this.kill_soft = false;\n    this.pos = vec3(pos[0], pos[1], pos[2]);\n    this.part_sets = [];\n    for (let ii = 0; ii < this.def.particles.length; ++ii) {\n      let def = this.def.particles[ii];\n      let part_set = {\n        def,\n        parts: []\n      };\n      this.part_sets.push(part_set);\n    }\n    this.emitters = [];\n    // Instantiate emitters\n    for (let ii = 0; ii < this.def.emitters.length; ++ii) {\n      let def = this.def.emitters[ii];\n      let emitter = {\n        def,\n        emit_time: instValueVec(def.emit_time),\n        countdown: 0,\n        started: false,\n        stopped: false\n      };\n      this.emitters.push(emitter);\n    }\n    // do initial tick for things that have an emit_time[0] of 0 and have an emit_initial\n    this.tick(0);\n  }\n\n  tickParticle(part, dt) {\n    // eslint-disable-line class-methods-use-this\n    let def = part.def;\n    part.age += dt;\n    let age_norm = part.age / part.lifespan;\n    if (age_norm >= 1) {\n      return true;\n    }\n\n    // Pos, vel - incrementally computed\n    let dts = dt / 1000;\n    part.pos[0] += part.vel[0] * dts;\n    part.pos[1] += part.vel[1] * dts;\n    part.pos[2] += part.vel[2] * dts;\n    part.vel[0] += part.accel[0] * dts;\n    part.vel[1] += part.accel[1] * dts;\n    part.vel[2] += part.accel[2] * dts;\n\n    // Color, size, rot - explicitly computed\n    v4copy(temp_color, part.color, temp_color);\n    if (def.color_track) {\n      if (age_norm < def.color_track[0][4]) {\n        v4mul(temp_color, temp_color, def.color_track[0]);\n      } else if (age_norm >= def.color_track[def.color_track.length - 1][4]) {\n        v4mul(temp_color, temp_color, def.color_track[def.color_track.length - 1]);\n      } else {\n        for (let ii = 0; ii < def.color_track.length - 1; ++ii) {\n          if (age_norm >= def.color_track[ii][4] && age_norm < def.color_track[ii + 1][4]) {\n            let weight = (age_norm - def.color_track[ii][4]) / (def.color_track[ii + 1][4] - def.color_track[ii][4]);\n            v4lerp(temp_color2, weight, def.color_track[ii], def.color_track[ii + 1]);\n            v4mul(temp_color, temp_color, temp_color2);\n            break;\n          }\n        }\n      }\n    }\n\n    v2copy(temp_size, part.size);\n    if (def.size_track) {\n      if (age_norm < def.size_track[0][4]) {\n        v2mul(temp_size, temp_size, def.size_track[0]);\n      } else if (age_norm >= def.size_track[def.size_track.length - 1][4]) {\n        v2mul(temp_size, temp_size, def.size_track[def.size_track.length - 1]);\n      } else {\n        for (let ii = 0; ii < def.size_track.length - 1; ++ii) {\n          if (age_norm >= def.size_track[ii][4] && age_norm < def.size_track[ii + 1][4]) {\n            let weight = (age_norm - def.size_track[ii][4]) / (def.size_track[ii + 1][4] - def.size_track[ii][4]);\n            v2lerp(temp_size2, weight, def.size_track[ii], def.size_track[ii + 1]);\n            v2mul(temp_size, temp_size, temp_size2);\n            break;\n          }\n        }\n      }\n    }\n\n    // TODO: let rot = part.rot + part.age * part.rot_vel;\n\n    // TODO: draw using:\n    //   rot\n    let w = part.size[0];\n    let h = part.size[1];\n    let x = part.pos[0] - w / 2;\n    let y = part.pos[1] - h / 2;\n    let z = part.pos[2];\n    sprites.queueraw4([def.texture], x, y, x, y + h, x + w, y + h, x + w, y, z, 0, 0, 1, 1, temp_color, null, null, def.blend);\n\n    return false;\n  }\n\n  tickPartSet(dt_orig, part_set) {\n    //let def = part_set.def;\n    let parts = part_set.parts;\n    for (let ii = parts.length - 1; ii >= 0; --ii) {\n      let part = parts[ii];\n      let dt = this.kill_soft ? dt_orig * part.kill_time_accel : dt_orig;\n      if (this.tickParticle(part, dt)) {\n        parts[ii] = parts[parts.length - 1];\n        parts.pop();\n      }\n    }\n  }\n\n  emitParticle(init_dt, emitter) {\n    let emitter_def = emitter.def;\n    let part_set = this.part_sets[emitter_def.part_idx];\n    let def = part_set.def;\n    let pos = instValueVec(emitter_def.pos, 3);\n    v3add(pos, pos, this.pos);\n    // PERFTODO: Make the whole Particle just a data[] Float32Array\n    let part = {\n      def,\n      pos,\n      color: instValueVec(def.color, 4),\n      size: instValueVec(def.size, 4),\n      vel: instValueVec(emitter_def.vel, 3),\n      accel: instValueVec(def.accel, 3),\n      rot: instValue(def.rot),\n      rot_vel: instValue(def.rot_vel),\n      lifespan: instValue(def.lifespan),\n      kill_time_accel: instValue(def.kill_time_accel),\n      age: 0\n    };\n    if (!this.tickParticle(part, init_dt)) {\n      part_set.parts.push(part);\n    }\n  }\n\n  tickEmitter(dt, emitter) {\n    let def = emitter.def;\n    // check for initial emission\n    if (!emitter.started && this.age >= emitter.emit_time[0]) {\n      emitter.started = true;\n      // ignore time before we started emitting\n      dt = this.age - emitter.emit_time[0];\n      let num = instValue(def.emit_initial);\n      for (let ii = 0; ii < num; ++ii) {\n        this.emitParticle(dt, emitter);\n      }\n      emitter.countdown = instValue(def.emit_rate);\n    }\n    if (emitter.started && !emitter.stopped) {\n      // should we stop?\n      let remaining_dt = dt;\n      let emit_dt = dt;\n      if (this.age >= emitter.emit_time[1]) {\n        emitter.stopped = true;\n        // Do not emit during time after we stopped\n        emit_dt -= this.age - emitter.emit_time[1];\n      }\n      // Emit dt's worth of particles\n      while (emit_dt >= emitter.countdown) {\n        emit_dt -= emitter.countdown;\n        remaining_dt -= emitter.countdown;\n        emitter.countdown = instValue(def.emit_rate);\n        this.emitParticle(remaining_dt, emitter);\n      }\n      emitter.countdown -= emit_dt;\n    }\n  }\n\n  tick(dt) {\n    if (this.kill_hard) {\n      return true;\n    }\n    // tick existing particles\n    for (let ii = this.part_sets.length - 1; ii >= 0; --ii) {\n      this.tickPartSet(dt, this.part_sets[ii]);\n    }\n    // advance time and spawn new ones (with partial ticks)\n    this.age += dt;\n    for (let ii = 0; ii < this.emitters.length; ++ii) {\n      this.tickEmitter(dt, this.emitters[ii]);\n    }\n\n    return this.age >= this.system_lifespan; // kill if past lifespan\n  }\n}\n\nclass ParticleManager {\n  constructor() {\n    this.systems = [];\n  }\n\n  createSystem(def, pos) {\n    let system = new ParticleSystem(this, def, pos);\n    this.systems.push(system);\n    return system;\n  }\n\n  tick(dt) {\n    for (let ii = this.systems.length - 1; ii >= 0; --ii) {\n      if (this.systems[ii].tick(dt)) {\n        this.systems[ii] = this.systems[this.systems.length - 1];\n        this.systems.pop();\n      }\n    }\n  }\n}\n\nexport function create(...args) {\n  return new ParticleManager(...args);\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst camera2d = require('./camera2d.js');\nconst { cmd_parse } = require('./cmds.js');\nconst engine = require('./engine.js');\nconst glov_font = require('./font.js');\nconst input = require('./input.js');\nconst { max } = Math;\nconst settings = require('./settings.js');\nconst ui = require('./ui.js');\nconst { vec4, v3copy } = require('./vmath.js');\n\nlet metrics = [];\n\nconst METRIC_PAD = 2;\n\nlet bg_default = vec4(0, 0, 0, 0.5);\nlet bg_mouse_over = vec4(0, 0, 0, 0.75);\nlet bg_fade = vec4();\n\n// referenced in engine.js\nsettings.register({\n  show_metrics: {\n    default_value: 1,\n    type: cmd_parse.TYPE_INT,\n    range: [0, 1]\n  },\n  show_fps: {\n    label: 'Show FPS',\n    default_value: 1,\n    type: cmd_parse.TYPE_INT,\n    range: [0, 3]\n  },\n  fps_graph: {\n    label: 'FPS Graph',\n    default_value: 0,\n    type: cmd_parse.TYPE_INT,\n    range: [0, 1]\n  }\n});\n\nlet fps_style = glov_font.style({\n  outline_width: 2, outline_color: 0x00000080,\n  color: 0xFFFFFFff\n});\n\nexport function addMetric(metric) {\n  if (metric.show_graph) {\n    metric.num_lines = metric.colors.length;\n    metric.history_size = metric.data.history.length / metric.num_lines;\n  }\n  metric.num_labels = Object.keys(metric.labels).length;\n  if (metric.interactable === undefined) {\n    metric.interactable = metric.num_labels > 1 || metric.show_graph;\n  }\n  metrics.push(metric);\n}\n\nfunction showMetric(y, metric) {\n  let font = engine.font;\n  let pad = METRIC_PAD;\n  let METRIC_VALUE_WIDTH = ui.font_height * 2.5;\n  let x = camera2d.x1Real() - METRIC_VALUE_WIDTH - pad;\n  let y0 = y;\n  y += pad;\n  let line_height = ui.font_height;\n  let max_label_w = 0;\n  let max_labels = settings[metric.show_stat];\n  let drew_any = false;\n  let alpha = 1;\n  for (let label in metric.labels) {\n    let value = metric.labels[label]();\n    if (value) {\n      let style = fps_style;\n      if (value.alpha) {\n        alpha = value.alpha;\n        value = value.value;\n        style = glov_font.styleAlpha(fps_style, alpha);\n      }\n      let label_w = font.drawSizedAligned(style, x, y, Z.FPSMETER + 1, line_height, glov_font.ALIGN.HRIGHT, 0, 0, label);\n      max_label_w = max(max_label_w, label_w);\n      font.drawSizedAligned(style, x, y, Z.FPSMETER + 1, line_height, glov_font.ALIGN.HFIT, METRIC_VALUE_WIDTH, 0, value);\n      y += line_height;\n      drew_any = true;\n    }\n    if (! --max_labels) {\n      break;\n    }\n  }\n  let w = METRIC_VALUE_WIDTH + max_label_w + METRIC_PAD;\n  x -= max_label_w + METRIC_PAD;\n\n  if (!drew_any) {\n    return y - pad;\n  }\n\n  y += pad;\n  let bg = bg_default;\n  let pos_param = {\n    x: x - pad,\n    y: y0,\n    w: w + pad * 2,\n    h: y - y0\n  };\n  if (metric.interactable) {\n    if (input.mouseUpEdge(pos_param)) {\n      if (metric.num_labels > 1 && settings[metric.show_stat] <= 1) {\n        settings.set(metric.show_stat, metric.num_labels);\n      } else if (metric.show_graph && !settings[metric.show_graph]) {\n        settings.set(metric.show_graph, 1);\n      } else {\n        if (metric.show_graph) {\n          settings.set(metric.show_graph, 0);\n        }\n        settings.set(metric.show_stat, 1);\n      }\n    }\n    if (input.mouseOver(pos_param)) {\n      bg = bg_mouse_over;\n    }\n  }\n  if (alpha !== 1) {\n    bg_fade[3] = bg[3] * alpha;\n    bg = v3copy(bg_fade, bg);\n  }\n  ui.drawRect(pos_param.x, pos_param.y, pos_param.x + pos_param.w, y, Z.FPSMETER, bg);\n  return y;\n}\n\nfunction showMetricGraph(y, metric) {\n  const small = engine.game_height < 300;\n  const LINE_WIDTH = small ? 1 : 3;\n  const LINE_PAD = small ? 0 : 1;\n  const LINE_HEIGHT = small ? 64 : 128;\n  const NUM_LINES = metric.history_size - 1;\n  let w = (LINE_WIDTH + LINE_PAD) * NUM_LINES;\n  let x = camera2d.x1Real() - w;\n  let h = LINE_HEIGHT + LINE_PAD * 2;\n  let z = Z.FPSMETER;\n  ui.drawRect(x, y - h, x + w, y, z++, bg_default);\n  x += LINE_PAD;\n  y -= LINE_PAD;\n  let history_index = metric.data.index;\n  let line_scale = LINE_HEIGHT / metric.line_scale_top;\n  for (let ii = 0; ii < NUM_LINES; ii++) {\n    let line_index = (ii + history_index + 1) % metric.history_size * metric.num_lines;\n    let data = metric.data.history;\n    let bar_max = 0;\n    for (let jj = 0; jj < metric.num_lines; jj++) {\n      let line_jj = data[line_index + jj];\n      let bar_min;\n      if (metric.bars_stack) {\n        bar_min = bar_max;\n        bar_max += line_jj;\n      } else {\n        // bars overlap, figure out how big this bar should be relative to next smallest\n        let lesser = 0;\n        for (let kk = 0; kk < metric.num_lines; kk++) {\n          if (kk === jj) {\n            continue;\n          }\n          let line_kk = data[line_index + kk];\n          if ((line_kk < line_jj || line_kk === line_jj && kk < jj) && line_kk > lesser) {\n            lesser = line_kk;\n          }\n        }\n        bar_min = lesser;\n        bar_max = line_jj;\n      }\n      let color = metric.colors[jj];\n      ui.drawRect(x, y - bar_max * line_scale, x + LINE_WIDTH, y - bar_min * line_scale, z, color);\n    }\n    x += LINE_WIDTH + LINE_PAD;\n  }\n  z += NUM_LINES;\n  y -= LINE_HEIGHT + LINE_PAD;\n  return y;\n}\n\nexport function draw() {\n  camera2d.setAspectFixed(engine.game_width, engine.game_height);\n  let y = camera2d.y0Real();\n  let y_graph = camera2d.y1Real();\n  for (let ii = 0; ii < metrics.length; ++ii) {\n    let metric = metrics[ii];\n    if (settings[metric.show_stat]) {\n      y = showMetric(y, metric);\n      y += METRIC_PAD;\n    }\n    if (settings[metric.show_graph]) {\n      y_graph = showMetricGraph(y_graph, metric);\n      y_graph -= METRIC_PAD;\n    }\n  }\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nlet user_want_locked = false;\nlet elem;\nlet on_ptr_lock;\n\nexport function isLocked() {\n  return user_want_locked; // Either it's locked, or there's an async attempt to lock it outstanding\n}\n\nfunction pointerLog(msg) {\n  console.log(`PointerLock: ${msg}`); // TODO: Disable this after things settle\n}\n\nexport function exit() {\n  pointerLog('Lock exit requested');\n  user_want_locked = false;\n  document.exitPointerLock();\n}\n\nexport function enter(when) {\n  user_want_locked = true;\n  on_ptr_lock();\n  pointerLog(`Trying pointer lock in response to ${when}`);\n  elem.requestPointerLock();\n}\n\nfunction onPointerLockChange() {\n  if (document.pointerLockElement || document.mozPointerLockElement || document.webkitPointerLockElement) {\n    pointerLog('Lock successful');\n    if (!user_want_locked) {\n      pointerLog('User canceled lock');\n      document.exitPointerLock();\n    }\n  } else {\n    if (user_want_locked) {\n      pointerLog('Lock lost');\n      user_want_locked = false;\n    }\n  }\n}\n\nfunction onPointerLockError(e) {\n  pointerLog('Error');\n  user_want_locked = false;\n}\n\nexport function startup(_elem, _on_ptr_lock) {\n  elem = _elem;\n  on_ptr_lock = _on_ptr_lock;\n\n  elem.requestPointerLock = elem.requestPointerLock || elem.mozRequestPointerLock || elem.webkitRequestPointerLock || function () {/* nop */};\n  document.exitPointerLock = document.exitPointerLock || document.mozExitPointerLock || document.webkitExitPointerLock || function () {/* nop */};\n\n  document.addEventListener('pointerlockchange', onPointerLockChange, false);\n  document.addEventListener('mozpointerlockchange', onPointerLockChange, false);\n  document.addEventListener('webkitpointerlockchange', onPointerLockChange, false);\n\n  document.addEventListener('pointerlockerror', onPointerLockError, false);\n  document.addEventListener('mozpointerlockerror', onPointerLockError, false);\n  document.addEventListener('webkitpointerlockerror', onPointerLockError, false);\n}","/* eslint no-extend-native:off,no-var:off,func-style:off,no-invalid-this:off */\n\n// TypedArray.slice - not supported on IE, some older Safari\nif (!Uint8Array.prototype.slice) {\n  Object.defineProperty(Uint8Array.prototype, 'slice', {\n    value: function (begin, end) {\n      // PERFTODO: If we use this on any significant audience, this can be likely\n      // way faster by not making a temporary Array in the middle\n      return new Uint8Array(Array.prototype.slice.call(this, begin, end));\n    }\n  });\n  Object.defineProperty(Int8Array.prototype, 'slice', {\n    value: function (begin, end) {\n      return new Int8Array(Array.prototype.slice.call(this, begin, end));\n    }\n  });\n  Object.defineProperty(Int32Array.prototype, 'slice', {\n    value: function (begin, end) {\n      return new Int32Array(Array.prototype.slice.call(this, begin, end));\n    }\n  });\n  Object.defineProperty(Float32Array.prototype, 'slice', {\n    value: function (begin, end) {\n      return new Float32Array(Array.prototype.slice.call(this, begin, end));\n    }\n  });\n}\n\nif (!Int32Array.prototype.join) {\n  Object.defineProperty(Int32Array.prototype, 'join', {\n    value: function (delim) {\n      return Array.prototype.join.call(this, delim);\n    }\n  });\n}\n\nif (!Uint8Array.prototype.fill) {\n  var fill = function (value, begin, end) {\n    if (end === undefined) {\n      end = this.length;\n    }\n    for (var ii = begin || 0; ii < end; ++ii) {\n      this[ii] = value;\n    }\n    return this;\n  };\n  Object.defineProperty(Uint8Array.prototype, 'fill', {\n    value: fill\n  });\n  Object.defineProperty(Int16Array.prototype, 'fill', {\n    value: fill\n  });\n  Object.defineProperty(Int32Array.prototype, 'fill', {\n    value: fill\n  });\n}\n\nif (!Int16Array.prototype.sort) {\n  var cmpDefault = function (a, b) {\n    return a - b;\n  };\n  var sort = function (cmp) {\n    Array.prototype.sort.call(this, cmp || cmpDefault);\n  };\n  Object.defineProperty(Int16Array.prototype, 'sort', {\n    value: sort\n  });\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint complexity:off */\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst glov_engine = require('./engine.js');\nconst glov_input = require('./input.js');\nconst glov_font = require('./font.js');\nconst glov_ui = require('./ui.js');\nconst { vec4 } = require('./vmath.js');\nlet glov_markup = null; // Not ported\n\nconst { min, max, sin } = Math;\nconst { cloneShallow, merge, nearSame } = require('../../common/util.js');\n\nlet font;\n\nconst selbox_font_style_default = glov_font.style(null, {\n  color: 0xDFDFDFff\n});\n\nconst selbox_font_style_selected = glov_font.style(null, {\n  color: 0xFFFFFFff\n});\n\nconst selbox_font_style_down = glov_font.style(null, {\n  color: 0x000000ff\n});\n\nconst selbox_font_style_disabled = glov_font.style(null, {\n  color: 0x808080ff\n});\n\nexport const default_display = {\n  style_default: selbox_font_style_default,\n  style_selected: selbox_font_style_selected,\n  style_disabled: selbox_font_style_disabled,\n  style_down: selbox_font_style_down,\n  no_background: false,\n  no_buttons: false,\n  centered: false,\n  bounce: true,\n  tab_stop: 0,\n  xpad: 8,\n  // selection_highlight: null, // TODO: custom / better selection highlight for menus\n  use_markup: false // always false, Markup not ported\n};\n\nconst color_gray50 = vec4(0.313, 0.313, 0.313, 1.000);\nconst color_gray80 = vec4(0.500, 0.500, 0.500, 1.000);\nconst color_grayD0 = vec4(0.816, 0.816, 0.816, 1.000);\nconst color_white = vec4(1, 1, 1, 1);\n\nconst SELBOX_BOUNCE_TIME = 80;\n\n// Used by GlovSimpleMenu and GlovSelectionBox\nexport class GlovMenuItem {\n  constructor(params) {\n    params = params || {};\n    if (params instanceof GlovMenuItem) {\n      for (let field in params) {\n        this[field] = params[field];\n      }\n      return;\n    }\n    if (typeof params === 'string') {\n      params = { name: params };\n    }\n    this.name = params.name || 'NO_NAME'; // name to display\n    this.state = params.state || null; // state to set upon selection\n    this.cb = params.cb || null; // callback to call upon selection\n    // TODO - cb function on value change?\n    this.value = null; // can be number or string\n    this.value_min = 0;\n    this.value_max = 0;\n    this.value_inc = 0;\n    this.tag = params.tag || null; // for isSelected(tag)\n    // was bitmask\n    this.exit = Boolean(params.exit);\n    this.prompt_int = Boolean(params.prompt_int);\n    this.prompt_string = Boolean(params.prompt_string);\n    this.no_sound = Boolean(params.no_sound);\n    this.slider = Boolean(params.slider);\n    this.no_controller_exit = Boolean(params.no_controller_exit);\n    this.plus_minus = Boolean(params.plus_minus);\n    this.disabled = Boolean(params.disabled);\n    this.centered = Boolean(params.centered);\n  }\n}\n\nclass GlovSelectionBox {\n  constructor(params) {\n    // Options (and defaults)\n    this.x = 0;\n    this.y = 0;\n    this.z = Z.UI;\n    this.width = glov_ui.button_width;\n    this.items = [];\n    this.is_dropdown = false;\n    this.transient_focus = false;\n    this.disabled = false;\n    this.display = cloneShallow(default_display);\n    this.scroll_height = 0;\n    this.font_height = glov_ui.font_height;\n    this.entry_height = glov_ui.button_height;\n    this.auto_reset = true;\n    this.auto_unfocus = true;\n    this.initial_selection = 0;\n    this.applyParams(params);\n\n    // Run-time state\n    this.dropdown_visible = false;\n    this.selected = 0;\n    this.was_clicked = false;\n    this.was_right_clicked = false;\n    this.is_focused = false;\n    this.dummy_focus_check = { selbox_dummy: 1 };\n    this.mouse_mode = false;\n    this.last_mousex = 0;\n    this.last_mousey = 0;\n    this.bounce_time = 0;\n    this.expected_frame_index = 0;\n    this.pre_dropdown_selection = undefined;\n    // this.sa = TODO\n  }\n\n  applyParams(params) {\n    if (!params) {\n      return;\n    }\n    for (let f in params) {\n      if (f === 'items') {\n        this.items = params.items.map(item => new GlovMenuItem(item));\n      } else if (f === 'display') {\n        merge(this.display, params[f]);\n      } else {\n        this[f] = params[f];\n      }\n    }\n  }\n\n  isSelected(tag_or_index) {\n    if (typeof tag_or_index === 'number') {\n      return this.selected === tag_or_index;\n    }\n    return this.items[this.selected].tag === tag_or_index;\n  }\n\n  getSelected() {\n    return this.items[this.selected];\n  }\n\n  getHeight() {\n    let { display, entry_height } = this;\n    if (this.is_dropdown) {\n      return entry_height + 2;\n    }\n    let list_height = this.items.length * entry_height;\n    let do_scroll = this.scroll_height && this.items.length * entry_height > this.scroll_height;\n    if (do_scroll) {\n      list_height = this.scroll_height;\n    }\n    list_height += 2;\n    if (!display.no_background) {\n      list_height += 4;\n    }\n    return list_height + 3;\n  }\n\n  run(params) {\n    this.applyParams(params);\n    let { x, y, z, width, font_height, entry_height, auto_reset } = this;\n    let { KEYS, PAD } = glov_input;\n\n    if (auto_reset && this.expected_frame_index !== glov_engine.getFrameIndex()) {\n      // Reset\n      if (this.items[this.initial_selection] && !this.items[this.initial_selection].disabled) {\n        this.selected = this.initial_selection;\n      } else {\n        // Selection out of range or disabled, select first non-disabled entry\n        for (let ii = 0; ii < this.items.length; ++ii) {\n          if (!this.items[ii].disabled) {\n            this.selected = ii;\n            break;\n          }\n        }\n      }\n    }\n\n    let y0 = y;\n    let yret;\n    let display = this.display;\n    this.was_clicked = false;\n    this.was_right_clicked = false;\n    let pos_changed = false;\n\n    let was_focused = this.is_focused;\n    // Trick to detect if we gained focus from ahead or behind of ourselves, for transient_focus mode\n    let gained_focus_forward = false;\n    if (!this.disabled && !this.is_focused) {\n      gained_focus_forward = glov_ui.focusCheck(this.dummy_focus_check);\n      if (gained_focus_forward) {\n        glov_ui.focusSteal(this);\n      }\n    }\n\n    let old_sel = this.selected;\n    let focused = this.is_focused = this.disabled ? false : glov_ui.focusCheck(this);\n    let gained_focus = focused && !was_focused;\n\n    if (!focused && this.dropdown_visible) {\n      if (this.pre_dropdown_selection !== undefined) {\n        // Restore selection to before opening the dropdown\n        this.selected = this.pre_dropdown_selection;\n        this.pre_dropdown_selection = undefined;\n      }\n      this.dropdown_visible = false;\n    }\n\n    let num_non_disabled_selections = 0;\n    let eff_sel = -1;\n    for (let ii = 0; ii < this.items.length; ++ii) {\n      let item = this.items[ii];\n      if (!item.disabled) {\n        if (eff_sel === -1 && this.selected <= ii) {\n          eff_sel = num_non_disabled_selections;\n        }\n        num_non_disabled_selections++;\n      }\n    }\n    // This is OK, can have an empty selection box: assert(num_non_disabled_selections);\n    if (eff_sel === -1) {\n      // perhaps had the end selected, and selection became smaller\n      eff_sel = 0;\n    }\n\n    if (this.transient_focus && gained_focus) {\n      if (gained_focus_forward) {\n        eff_sel = 0;\n      } else {\n        eff_sel = num_non_disabled_selections - 1;\n      }\n      pos_changed = true;\n    }\n\n    if (!this.is_dropdown && !display.no_background) {\n      let bg_height = this.getHeight();\n      if (focused) {\n        glov_ui.drawRect(x, y, x + width, y + bg_height - 2, z, color_white);\n        y += 2;\n        x += 2;\n        width -= 4;\n        glov_ui.drawRect(x, y, x + width, y + bg_height - 6, z + 0.1, color_gray50);\n        y += 2;\n        x += 2;\n        width -= 4;\n      } else {\n        glov_ui.drawRect(x, y, x + width, y + bg_height - 2, z, color_gray50);\n        y += 4;\n        x += 4;\n        width -= 8;\n      }\n    }\n\n    let page_size = (this.scroll_height - 1) / entry_height;\n\n    if (focused) {\n      let pad_shift = glov_input.padButtonDown(PAD.RIGHT_TRIGGER) || glov_input.padButtonDown(PAD.LEFT_TRIGGER);\n      let value = glov_input.keyDownEdge(KEYS.PAGEDOWN) + (pad_shift ? glov_input.padButtonDownEdge(PAD.DOWN) : 0);\n      if (value) {\n        eff_sel += page_size * value;\n        eff_sel = min(eff_sel, num_non_disabled_selections - 1);\n        this.mouse_mode = false;\n        pos_changed = true;\n      }\n      value = glov_input.keyDownEdge(KEYS.PAGEUP) + (pad_shift ? glov_input.padButtonDownEdge(PAD.UP) : 0);\n      if (value) {\n        eff_sel -= page_size * value;\n        eff_sel = max(eff_sel, 0);\n        this.mouse_mode = false;\n        pos_changed = true;\n      }\n      value = glov_input.keyDownEdge(KEYS.DOWN) + glov_input.keyDownEdge(KEYS.S) + glov_input.padButtonDownEdge(PAD.DOWN);\n      if (value) {\n        eff_sel += value;\n        this.mouse_mode = false;\n        pos_changed = true;\n      }\n      value = glov_input.keyDownEdge(KEYS.UP) + glov_input.keyDownEdge(KEYS.W) + glov_input.padButtonDownEdge(PAD.UP);\n      if (value) {\n        eff_sel -= value;\n        this.mouse_mode = false;\n        pos_changed = true;\n      }\n      if (glov_input.keyDownEdge(KEYS.HOME)) {\n        eff_sel = 0;\n        this.mouse_mode = false;\n        pos_changed = true;\n      }\n      if (glov_input.keyDownEdge(KEYS.END)) {\n        eff_sel = num_non_disabled_selections - 1;\n        this.mouse_mode = false;\n        pos_changed = true;\n      }\n    }\n\n    let sel_changed = false;\n    if (eff_sel < 0) {\n      if (this.transient_focus) {\n        eff_sel = 0;\n        sel_changed = true;\n        glov_ui.focusPrev(this);\n      } else {\n        eff_sel = num_non_disabled_selections - 1;\n      }\n    }\n    if (eff_sel >= num_non_disabled_selections && num_non_disabled_selections) {\n      if (this.transient_focus) {\n        eff_sel = num_non_disabled_selections - 1;\n        sel_changed = true;\n        glov_ui.focusNext(this);\n      } else {\n        eff_sel = 0;\n      }\n    }\n\n    // Convert from eff_sel back to actual selection\n    for (let ii = 0; ii < this.items.length; ++ii) {\n      let item = this.items[ii];\n      if (!item.disabled) {\n        if (!eff_sel) {\n          this.selected = ii;\n          break;\n        }\n        --eff_sel;\n      }\n    }\n\n    let pad = 8;\n\n    if (this.is_dropdown) {\n      // display header\n      let color0 = color_white;\n      if (this.disabled) {\n        color0 = color_gray80;\n      }\n      // let color1 = color_white;\n      // let dropdown_rect = glov_ui.sprites.menu_header.uidata.rects[2];\n      // let dropdown_width = (dropdown_rect[2] - dropdown_rect[0]) / (dropdown_rect[3] - dropdown_rect[1]) *\n      //   entry_height;\n      // let dropdown_x = x + width - dropdown_width;\n      //int dropdown_w = glov_ui_menu_header.right.GetTileWidth();\n      if (!this.disabled && glov_input.click({\n        x, y,\n        w: width, h: entry_height\n      })) {\n        glov_ui.focusSteal(this);\n        this.dropdown_visible = !this.dropdown_visible;\n        this.pre_dropdown_selection = this.selected;\n        color0 = color_grayD0;\n        // color1 = color_gray80;\n      } else if (!this.disabled && glov_input.mouseOver({\n        x, y, w: width, h: entry_height\n      })) {\n        glov_ui.setMouseOver(this);\n        color0 = color_grayD0;\n        // color1 = color_gray80;\n      }\n      glov_ui.drawHBox({\n        x, y, z: z + 1,\n        w: width, h: entry_height\n      }, glov_ui.sprites.menu_header, color0); // TODO: only pieces 1 and 2?\n      // glov_ui.draw_list.queue(glov_ui.sprites.menu_header,\n      //   dropdown_x, y, z + 1.5, color1, [dropdown_width, entry_height, 1, 1],\n      //   glov_ui.sprites.menu_header.uidata.rects[2]);\n      font.drawSizedAligned(focused ? glov_ui.font_style_focused : glov_ui.font_style_normal, x + display.xpad, y, z + 2, font_height, glov_font.ALIGN.HFIT | glov_font.ALIGN.VCENTER, // eslint-disable-line no-bitwise\n      width - display.xpad - glov_ui.sprites.menu_header.uidata.wh[2] * entry_height, entry_height, this.items[this.selected].name);\n      y += entry_height;\n      yret = y + 2;\n      z += 1000; // drop-down part should be above everything\n    }\n\n    if (!this.is_dropdown || this.dropdown_visible) {\n      let do_scroll = this.scroll_height && this.items.length * entry_height > this.scroll_height;\n      if (!do_scroll && y + this.items.length * entry_height >= camera2d.y1()) {\n        y = camera2d.y1() - this.items.length * entry_height;\n      }\n      let y_save = y;\n      let x_save = x;\n      let scroll_pos = 0;\n      let eff_width = width;\n      if (do_scroll) {\n        // this.sa.display = &scroll_area_no_background;\n        if (pos_changed) {\n          // ensure part of visible scroll area includes the current selection\n          let buffer = min(1.5 * entry_height, (this.scroll_height - entry_height) / 2);\n          let min_scroll_pos = max(0, this.selected * entry_height - buffer);\n          let old_scroll_pos = this.sa.scroll_pos;\n          if (min_scroll_pos < this.sa.scroll_pos) {\n            this.sa.scroll_pos = min_scroll_pos;\n          }\n          let max_scroll_pos = min(this.items.length * entry_height, (this.selected + 1) * entry_height + buffer) - this.scroll_height;\n          if (max_scroll_pos > this.sa.scroll_pos) {\n            this.sa.scroll_pos = max_scroll_pos;\n          }\n          // Make it smooth/bouncy a bit\n          this.sa.overscroll = old_scroll_pos - this.sa.scroll_pos;\n        }\n        this.sa.begin(x, y, z, width, this.scroll_height, color_white);\n        scroll_pos = this.sa.scroll_pos + this.sa.overscroll;\n        y = 0;\n        x = 0;\n        // extern float glov_scrollbar_scale;\n        // eff_width = width - glov_ui_scrollbar_top.GetTileWidth() * glov_scrollbar_scale;\n      }\n      for (let i = 0; i < this.items.length; i++) {\n        let item = this.items[i];\n        let entry_disabled = item.disabled;\n        let image_set = null;\n        if (!this.disabled && !entry_disabled && glov_input.click({\n          x, y, w: width, h: entry_height\n        })) {\n          glov_ui.focusSteal(this);\n          this.was_clicked = true;\n          this.mouse_mode = true;\n          this.selected = i;\n        }\n        if (!this.disabled && !entry_disabled && glov_input.click({\n          x, y, w: width, h: entry_height\n        })) {\n          glov_ui.focusSteal(this);\n          this.was_right_clicked = true;\n          this.mouse_mode = true;\n          this.selected = i;\n        }\n        let is_mouseover = false;\n        if (!this.disabled && !entry_disabled && glov_input.mouseOver({\n          x, y, w: width, h: entry_height\n        })) {\n          let mpos = glov_input.mousePos();\n          is_mouseover = true;\n          if (focused || this.transient_focus) {\n            if (this.expected_frame_index === glov_engine.getFrameIndex() && (mpos[0] !== this.last_mousex || !nearSame(mpos[1] - scroll_pos, this.last_mousey, 1.25))) {\n              this.mouse_mode = true;\n              this.selected = i;\n            }\n            this.last_mousex = mpos[0];\n            this.last_mousey = mpos[1] - scroll_pos;\n          }\n          // Not used anymore because in mouse_mode, rollover *is* selection, don't have two cursors!\n          // if (this.mouse_mode) {\n          //   text_color = 0x000000ff;\n          //   image_set = &menu_rollover;\n          // }\n        }\n\n        let style;\n        let show_selection = !this.disabled && (!(this.transient_focus && !this.is_focused) || is_mouseover);\n        let bounce = false;\n        if (this.selected === i && show_selection) {\n          style = display.style_selected || selbox_font_style_selected;\n          image_set = glov_ui.sprites.menu_selected;\n          if (is_mouseover && glov_input.mouseDown()) {\n            if (glov_ui.sprites.menu_down) {\n              image_set = glov_ui.sprites.menu_down;\n            } else {\n              style = display.style_down || selbox_font_style_down;\n            }\n          }\n          if (display.bounce && !this.is_dropdown) {\n            let ms = glov_engine.getFrameDt();\n            if (this.selected !== old_sel) {\n              bounce = true;\n              this.bounce_time = SELBOX_BOUNCE_TIME;\n            } else if (ms >= this.bounce_time) {\n              this.bounce_time = 0;\n            } else {\n              bounce = true;\n              this.bounce_time -= ms;\n            }\n          }\n        } else if (entry_disabled) {\n          style = display.style_disabled || selbox_font_style_disabled;\n          image_set = glov_ui.sprites.menu_entry;\n        } else {\n          style = display.style_default || selbox_font_style_default;\n          image_set = glov_ui.sprites.menu_entry;\n        }\n        let yoffs = 0;\n        let bounce_amt = 0;\n        if (bounce) {\n          bounce_amt = sin(this.bounce_time * 20 / SELBOX_BOUNCE_TIME / 10);\n          yoffs = -4 * bounce_amt * entry_height / 32;\n        }\n        if (!display.no_buttons) {\n          glov_ui.drawHBox({ x, y: y + yoffs, z: z + 1, w: eff_width, h: entry_height }, image_set, color_white);\n        }\n        // spriteListClipperPush(x, y + yoffs, eff_width - pad, entry_height);\n        let did_tab = false;\n        let text_y = y + yoffs;\n        if (display.tab_stop) {\n          let str = item.name;\n          let tab_idx = str.indexOf('\\t');\n          if (tab_idx !== -1) {\n            did_tab = true;\n            let pre = str.slice(0, tab_idx);\n            let post = str.slice(tab_idx + 1);\n            let x1 = x + display.xpad;\n            let x2 = x + display.xpad + display.tab_stop + pad;\n            let w1 = display.tab_stop;\n            let w2 = eff_width - display.tab_stop - display.xpad * 2 - pad;\n            if (display.use_markup) {\n              let md = {};\n              md.align = glov_font.ALIGN.HFIT;\n              md.x_size = md.y_size = font_height;\n              md.w = w1;\n              md.h = 1;\n              md.style = style;\n              glov_markup.print(md, x1, text_y, z + 2, pre);\n              md.w = w2;\n              glov_markup.print(md, x2, text_y, z + 2, post);\n            } else {\n              font.drawSizedAligned(style, x1, text_y, z + 2, font_height, glov_font.ALIGN.HFIT | glov_font.ALIGN.VCENTER, // eslint-disable-line no-bitwise\n              w1, entry_height, pre);\n              font.drawSizedAligned(style, x2, text_y, z + 2, font_height, glov_font.ALIGN.HFIT | glov_font.ALIGN.VCENTER, // eslint-disable-line no-bitwise\n              w2, entry_height, post);\n            }\n          }\n        }\n        if (!did_tab) {\n          let md = {};\n          // eslint-disable-next-line no-bitwise\n          md.align = (item.centered || display.centered ? glov_font.ALIGN.HCENTERFIT : glov_font.ALIGN.HFIT) | glov_font.ALIGN.VCENTER;\n          md.x_size = md.y_size = font_height;\n          md.w = eff_width - display.xpad * 2;\n          md.h = entry_height;\n          md.style = style;\n          let xx = x + display.xpad;\n          let zz = z + 2;\n          if (display.use_markup) {\n            glov_markup.print(md, xx, text_y, zz, item.name);\n          } else {\n            font.drawSizedAligned(md.style, xx, text_y, zz, md.x_size, md.align, md.w, md.h, item.name);\n          }\n        }\n        // spriteListClipperPop();\n        // if (display.selection_highlight && this.selected === i && show_selection) {\n        //   let grow = 0.2 * (1 - bounce_amt);\n        //   display.selection_highlight.DrawStretched(\n        //     x - grow * eff_width, y - grow * entry_height, z + 1.5,\n        //     eff_width * (1 + 2 * grow), entry_height * (1 + 2 * grow), 0, 0xFF);\n        // }\n        y += entry_height;\n      }\n      if (do_scroll) {\n        this.sa.end(y);\n        y = y_save + this.scroll_height;\n        x = x_save;\n      }\n\n      if (this.was_clicked && this.is_dropdown) {\n        this.dropdown_visible = false;\n      }\n    }\n\n    if (this.selected !== old_sel || sel_changed) {\n      glov_ui.playUISound('rollover');\n    }\n\n    if (focused && this.auto_unfocus) {\n      if (glov_input.click({ peek: true })) {\n        glov_ui.focusSteal('canvas');\n      }\n    }\n\n    this.expected_frame_index = glov_engine.getFrameIndex() + 1;\n    x = 10;\n    y += 5;\n    if (!this.is_dropdown) {\n      yret = y;\n    }\n    assert.equal(yret - y0, this.getHeight());\n    return yret - y0;\n  }\n}\n\nexport function create(...args) {\n  if (!font) {\n    font = glov_ui.font;\n  }\n  return new GlovSelectionBox(...args);\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst { titleCase } = require('../../common/util.js');\nconst { cmd_parse } = require('./cmds.js');\n\nexports.true = true; // for perf.js\n\nexport function get(key) {\n  return exports[key];\n}\n\nexport function set(key, value) {\n  if (exports[key] !== value) {\n    cmd_parse.handle(null, `${key} ${value}`, null); // uses default cmd_parse handler\n  }\n}\n\nexport function register(defs) {\n  Object.keys(defs).forEach(function (key) {\n    let def = defs[key];\n    exports[key] = def.default_value;\n    cmd_parse.registerValue(key, {\n      type: def.type,\n      label: def.label || titleCase(key.replace(/_/g, ' ')),\n      range: def.range,\n      get: () => exports[key],\n      set: v => exports[key] = v,\n      store: true,\n      ver: def.ver,\n      help: def.help,\n      usage: def.usage\n    });\n  });\n}\n\nregister({\n  show_metrics: {\n    default_value: 1,\n    type: cmd_parse.TYPE_INT,\n    range: [0, 1]\n  },\n  max_fps: {\n    label: 'Max FPS',\n    default_value: 0,\n    type: cmd_parse.TYPE_FLOAT\n  }\n});","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst assert = require('assert');\nconst engine = require('./engine.js');\n\nconst { matchAll } = require('../../common/util.js');\n\nlet last_id = 0;\n\nlet bound_prog = null;\n\nexport const semantic = {\n  'ATTR0': 0,\n  'POSITION': 0,\n  'ATTR1': 1,\n  'COLOR': 1,\n  'COLOR_0': 1,\n  'ATTR2': 2,\n  'TEXCOORD': 2,\n  'TEXCOORD_0': 2,\n  'ATTR3': 3,\n  'NORMAL': 3,\n  'ATTR4': 4,\n  'TEXCOORD_1': 4\n};\n\nexport let globals;\nlet defines;\n\nlet error_fp;\nlet error_vp;\n\nconst vp_attr_regex = /attribute [^ ]+ ([^ ;]+);/g;\nconst uniform_regex = /uniform (?:(?:low|medium|high)p )?((?:(?:vec|mat)\\d(?:x\\d)?|float) [^ ;]+);/g;\nconst sampler_regex = /uniform sampler2D ([^ ;]+);/g;\nconst include_regex = /\\n#include \"([^\"]+)\"/g;\n\nconst type_size = {\n  float: 1,\n  vec2: 2 * 1,\n  vec3: 3 * 1,\n  vec4: 4 * 1,\n  mat3: 3 * 3,\n  mat4: 4 * 4\n};\n\nlet includes = {};\n\nexport function addInclude(key, text) {\n  assert(!includes[key]);\n  includes[key] = `\\n// from include \"${key}\":\\n${text}\\n`;\n}\n\nlet report_queued = false;\nlet shader_errors;\nfunction reportShaderError(err) {\n  function doReport() {\n    assert(false, `Shader error(s):\\n    ${shader_errors.join('\\n    ')}`);\n    shader_errors = null;\n  }\n  if (!report_queued) {\n    setTimeout(doReport, 1000);\n    report_queued = true;\n    shader_errors = [];\n  }\n  shader_errors.push(err);\n}\n\nfunction parseIncludes(text) {\n  let supplied_uniforms = {};\n  text.replace(uniform_regex, function (str, key) {\n    supplied_uniforms[key] = true;\n  });\n  text = text.replace(include_regex, function (str, filename) {\n    let replacement = includes[filename];\n    if (!replacement) {\n      console.error(`Could not evaluate ${str}`);\n      return str;\n    }\n    // Remove duplicate uniforms\n    replacement = replacement.replace(uniform_regex, function (str2, key) {\n      if (supplied_uniforms[key]) {\n        return `// [removed ${key}]`;\n      }\n      supplied_uniforms[key] = true;\n      return str2;\n    });\n    return replacement;\n  });\n  return text;\n}\n\nconst webgl2_header = ['#version 300 es', '#define WEBGL2'].join('\\n');\nconst webgl2_header_fp = [webgl2_header, '#define varying in', 'out lowp vec4 fragColor;', '#define gl_FragColor fragColor', '#define texture2D texture', ''].join('\\n');\nconst webgl2_header_vp = [webgl2_header, '#define varying out', '#define attribute in', ''].join('\\n');\n\nfunction Shader(type, name, text) {\n  assert.equal(typeof text, 'string');\n  this.name = name;\n  let header = '';\n  if (engine.webgl2 && text.indexOf('#pragma WebGL2') !== -1) {\n    header = type === gl.VERTEX_SHADER ? webgl2_header_vp : webgl2_header_fp;\n  }\n  text = `${header}${defines}${text}`;\n  text = parseIncludes(text);\n  text = text.replace(/#pragma WebGL2?/g, '');\n  this.shader = gl.createShader(type);\n  if (type === gl.VERTEX_SHADER) {\n    this.programs = {};\n    this.attributes = matchAll(text, vp_attr_regex);\n    // Ensure they are known names so we can give them indices\n    // Add to semantic[] above as needed\n    this.attributes.forEach(v => assert(semantic[v] !== undefined));\n  } else {\n    this.id = ++last_id;\n    this.samplers = matchAll(text, sampler_regex);\n    // Ensure all samplers end in a unique number\n    let found = [];\n    this.samplers.forEach(v => {\n      let num = Number(v.slice(-1));\n      assert(!isNaN(num));\n      assert(!found[num]);\n      found[num] = true;\n    });\n  }\n  this.uniforms = matchAll(text, uniform_regex);\n  // Ensure a known type\n  this.uniforms.forEach(v => {\n    let type_name = v.split(' ')[0];\n    assert(type_size[type_name]);\n  });\n  gl.shaderSource(this.shader, text);\n  gl.compileShader(this.shader);\n\n  if (!gl.getShaderParameter(this.shader, gl.COMPILE_STATUS)) {\n    let error_text = gl.getShaderInfoLog(this.shader).replace(/\\0/g, '').trim();\n    console.error(`Error compiling ${name}: ${error_text}`);\n    reportShaderError(`${name}: ${error_text}`);\n    // eslint-disable-next-line newline-per-chained-call\n    console.log(text.split('\\n').map((line, idx) => `${idx + 1}: ${line}`).join('\\n'));\n  }\n}\n\nexport function create(type, name, text) {\n  return new Shader(type, name, text);\n}\n\nfunction uniformSetValue(unif) {\n  switch (unif.width) {// eslint-disable-line default-case\n    case 1:\n      gl.uniform1fv(unif.location, unif.value);\n      break;\n    case 2:\n      gl.uniform2fv(unif.location, unif.value);\n      break;\n    case 3:\n      gl.uniform3fv(unif.location, unif.value);\n      break;\n    case 4:\n      gl.uniform4fv(unif.location, unif.value);\n      break;\n    case 9:\n      gl.uniformMatrix3fv(unif.location, false, unif.value);\n      break;\n    case 16:\n      gl.uniformMatrix4fv(unif.location, false, unif.value);\n      break;\n  }\n}\n\nfunction link(vp, fp) {\n  let prog = vp.programs[fp.id] = {\n    handle: gl.createProgram(),\n    uniforms: null\n  };\n  gl.attachShader(prog.handle, vp.shader);\n  gl.attachShader(prog.handle, fp.shader);\n  // call this for all relevant semantic\n  for (let ii = 0; ii < vp.attributes.length; ++ii) {\n    gl.bindAttribLocation(prog.handle, semantic[vp.attributes[ii]], vp.attributes[ii]);\n  }\n  gl.linkProgram(prog.handle);\n\n  prog.valid = gl.getProgramParameter(prog.handle, gl.LINK_STATUS);\n  if (!prog.valid) {\n    reportShaderError(`Shader link error (${vp.name} & ${fp.name}): ${gl.getProgramInfoLog(prog.handle)}`);\n    console.error(`Shader link error: ${gl.getProgramInfoLog(prog.handle)}`);\n  }\n\n  gl.useProgram(prog.handle);\n  bound_prog = prog;\n\n  let uniforms = vp.uniforms.slice(0);\n  for (let ii = 0; ii < fp.uniforms.length; ++ii) {\n    let name = fp.uniforms[ii];\n    if (uniforms.indexOf(name) === -1) {\n      uniforms.push(name);\n    }\n  }\n  prog.uniforms = uniforms.map(v => {\n    v = v.split(' ');\n    let type = v[0];\n    let name = v[1];\n    let count = 1;\n    let m = name.match(/([^[]+)\\[(\\d+)\\]/);\n    if (m) {\n      name = m[1];\n      count = Number(m[2]);\n    }\n    let location = gl.getUniformLocation(prog.handle, name);\n    if (location === null) {\n      // Not in either shader, (commented out?), remove (via filter below)\n      return null;\n    }\n    let width = type_size[type];\n    let size = width * count;\n    let glob = globals[name];\n    let value = new Float32Array(size);\n    // set initial value\n    let unif = {\n      name,\n      size,\n      width,\n      count,\n      value,\n      location,\n      glob\n    };\n    uniformSetValue(unif);\n    return unif;\n  }).filter(v => v);\n\n  for (let ii = 0; ii < fp.samplers.length; ++ii) {\n    let name = fp.samplers[ii];\n    let num = Number(name.slice(-1));\n    let location = gl.getUniformLocation(prog.handle, name);\n    if (location !== null) {\n      gl.uniform1i(location, num);\n    }\n  }\n  return prog;\n}\n\nexport function bind(vp, fp, params) {\n  let prog = vp.programs[fp.id];\n  if (!prog) {\n    prog = link(vp, fp);\n  }\n  if (!prog.valid) {\n    prog = link(vp, error_fp);\n    if (!prog.valid) {\n      prog = link(error_vp, error_fp);\n    }\n    vp.programs[fp.id] = prog;\n  }\n  if (prog !== bound_prog) {\n    bound_prog = prog;\n    gl.useProgram(prog.handle);\n  }\n  for (let ii = 0; ii < prog.uniforms.length; ++ii) {\n    let unif = prog.uniforms[ii];\n    let value = params[unif.name] || unif.glob;\n    if (!value) {\n      continue;\n    }\n    let diff = false;\n    for (let jj = 0; jj < unif.size; ++jj) {\n      if (value[jj] !== unif.value[jj]) {\n        diff = true;\n        break;\n      }\n    }\n    if (diff) {\n      for (let jj = 0; jj < unif.size; ++jj) {\n        unif.value[jj] = value[jj];\n      }\n      uniformSetValue(unif);\n    }\n  }\n}\n\nconst reserved = { WEBGL2: 1 };\nexport function startup(_globals) {\n  defines = Object.keys(engine.defines).map(v => reserved[v] ? '' : `#define ${v}\\n`).join('');\n  globals = _globals;\n\n  error_fp = create(gl.FRAGMENT_SHADER, 'error.fp', '#pragma WebGL\\n\\nvoid main(void) {\\n  gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\\n}\\n');\n  error_vp = create(gl.VERTEX_SHADER, 'error.vp', '// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\\n// Released under MIT License: https://opensource.org/licenses/MIT\\n#pragma WebGL\\nattribute vec2 POSITION;\\nvoid main() {\\n  gl_Position = vec4(POSITION.xy * vec2(2.0 / 1024.0, -2.04 / 1024.0) + vec2(-1.0, 1.0), 0.0, 1.0);\\n}\\n');\n}\n\nexport function addGlobal(key, vec) {\n  assert(!globals[key]);\n  globals[key] = vec;\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint complexity:off */\n\n//////////////////////////////////////////////////////////////////////////\n// GlovSimpleMenu is just a GlovSelectionBox plus some logic to activate\n// callbacks/etc upon selecting of elements.\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst glov_engine = require('./engine.js');\nconst glov_input = require('./input.js');\nconst selection_box = require('./selection_box.js');\nconst glov_ui = require('./ui.js');\nconst { clamp, vec4 } = require('./vmath.js');\n\nconst { KEYS, PAD } = glov_input;\n\nconst color101010C8 = vec4(0x10 / 255, 0x10 / 255, 0x10 / 255, 0xC8 / 255);\n\nclass GlovSimpleMenu {\n  constructor(params) {\n    params = params || {};\n    this.sel_box = selection_box.create(params);\n    this.edit_index = -1;\n\n    // Output members\n    this.selected = -1; // actually selected/acted on, not just current highlight, like this.sel_box.selected\n  }\n\n  focus() {\n    glov_ui.focusSteal(this.sel_box);\n  }\n\n  execItem(index, delta) {\n    let { items } = this.sel_box;\n    assert(index >= 0 && index < items.length);\n    let menu_item = items[index];\n    let force = false;\n    if (delta === 2) {\n      delta = 1;\n      force = true;\n    }\n    if (menu_item.cb) {\n      menu_item.cb();\n    }\n    if (!menu_item.state) {\n      if (menu_item.value !== null && (menu_item.prompt_int || menu_item.prompt_string)) {\n        // Open an edit box\n        // menu.internal.mte = GlovModalTextEntry::createInt(simpleMenuFieldName(menu_item.name), *menu_item.value);\n        this.internal.edit_index = index;\n        // glovInputReleaseAll();\n      } else if (menu_item.value !== null) {\n        if (glov_input.keyDown(KEYS.SHIFT) && !force) {\n          delta = -1;\n        }\n        menu_item.value += delta * menu_item.value_inc;\n        if (menu_item.slider || menu_item.plus_minus) {\n          // implicitly no wrapping, maybe make a separate flag for this?\n          menu_item.value = clamp(menu_item.value, menu_item.value_min, menu_item.value_max);\n        } else {\n          if (menu_item.value < menu_item.value_min) {\n            menu_item.value = menu_item.value_max;\n          }\n          if (menu_item.value > menu_item.value_max) {\n            menu_item.value = menu_item.value_min;\n          }\n        }\n        // TODO: some kind of callback on value change\n      } else {\n          // presumably tag or externally operated on, probably want to skip key repeat here too?\n          // glovInputReleaseAll();\n        }\n    } else {\n      glov_engine.setState(menu_item.state);\n      // glovInputReleaseAll();\n    }\n  }\n\n  run(params) {\n    let { sel_box } = this;\n    sel_box.applyParams(params); // Apply new list of items, positions, etc\n\n    const { items, x, z } = sel_box;\n    const y0 = sel_box.y;\n    let exit_index = -1;\n    for (let i = 0; i < items.length; ++i) {\n      if (items[i].exit) {\n        exit_index = i;\n      }\n    }\n\n    // Check to see if any selection has an editBox open first\n    let selbox_enabled = true;\n    if (this.edit_index >= 0 && this.edit_index < items.length) {\n      selbox_enabled = false;\n      glov_ui.drawRect(camera2d.x0(), camera2d.y0(), camera2d.x1(), camera2d.y1(), z + 2, color101010C8);\n      // TODO: Need modal text entry dialog\n      // let ret = this.internal.mte.run(z + 3);\n\n      // if (ret == 'ok') {\n      //   if (items[this.edit_index].prompt_int) {\n      //     items[this.edit_index].value = this.internal.mte.getInt();\n      //   } else {\n      //     items[this.edit_index].svalue = this.internal.mte.getString();\n      //   }\n      //   this.edit_index = -1;\n      // } else if (ret == 'cancel') {\n      //   this.edit_index = -1;\n      // }\n    }\n    sel_box.disabled = !selbox_enabled;\n\n    // Do all sliders, plus-minus-es - needs\n    let display = sel_box.display;\n    for (let ii = 0; ii < items.length; ii++) {\n      let menu_item = items[ii];\n      if (menu_item.slider) {\n        let slider = menu_item.internal.slider;\n        if (!slider) {\n          // slider = menu_item.internal.slider = glov_slider.create();\n        }\n        slider.no_notches = true;\n        // slider.sound_release = this.sound_accept;\n        slider.disabled = menu_item.disabled;\n        let slider_width = 160;\n        let slider_x = x + sel_box.width - slider_width - 12;\n        let v = menu_item.value - menu_item.value_min;\n        let color = display.style_default.color;\n        // if (display.style_default.color_mode == glov_font.COLOR_MODE.GRADIENT) {\n        //   color = colorIntLerp(display.style_default.color, display.style_default.colorLR, 0.5);\n        // }\n        if (slider.disabled) {\n          color = display.style_disabled.color;\n        }\n        v = slider.run({\n          x: slider_x,\n          y: y0 + ii * 24 + 2,\n          z: z + 3,\n          w: slider_width,\n          // scale: 1,\n          color,\n          value: v,\n          max: menu_item.value_max - menu_item.value_min\n        });\n        menu_item.value = v + menu_item.value_min;\n        if (slider.rollover || slider.grabbed) {\n          // expect our row to be selected\n          if (sel_box.selected !== ii) {\n            sel_box.selected = ii;\n            glov_ui.playUISound('select');\n          }\n        }\n      } else if (menu_item.plus_minus) {\n        assert(typeof menu_item.value === 'number', 'plus_minus items require a numerical value');\n        assert(menu_item.value_inc, 'plus_minus items require a value increment');\n        let buttons_width = 60;\n        let pad = 6;\n        let button_width = (buttons_width - pad) / 2;\n        let button_x = x + sel_box.width - buttons_width;\n        let delta = 0;\n        // if (!glovMasterControllerActive()) { // Don't show buttons if using a controller / no mouse\n        if (glov_ui.buttonText({\n          no_focus: true,\n          x: button_x,\n          y: y0 + ii * 24 + 2,\n          z: z + 3,\n          w: button_width,\n          h: glov_ui.button_height * 0.66,\n          text: '-'\n        })) {\n          delta = -1;\n        }\n        let minus_over = glov_ui.button_mouseover;\n        if (glov_ui.buttonText({\n          no_focus: true,\n          x: button_x + pad + button_width,\n          y: y0 + ii * 24 + 2,\n          z: z + 3,\n          w: button_width,\n          h: glov_ui.button_height * 0.66,\n          text: '+'\n        })) {\n          delta = 1;\n        }\n        let plus_over = glov_ui.button_mouseover;\n        // } end if (!glovMasterControllerActive())\n        if (delta) {\n          menu_item.value += delta * menu_item.value_inc;\n          menu_item.value = clamp(menu_item.value, menu_item.value_min, menu_item.value_max);\n        }\n        if (minus_over || plus_over) {\n          // expect our row to be selected\n          if (sel_box.selected !== ii) {\n            sel_box.selected = ii;\n            glov_ui.playUISound('select');\n          }\n        }\n      }\n    }\n\n    let y = y0;\n    y += sel_box.run();\n\n    let selected = -1;\n    if (exit_index !== -1 && (glov_input.keyDownEdge(KEYS.ESC) || !items[exit_index].no_controller_exit && glov_input.padButtonDownEdge(PAD.CANCEL))) {\n      this.execItem(exit_index, 1);\n      selected = exit_index;\n    }\n    // Only allow left/right to \"select\" a menu option if it's a toggle/increment\n    // kind of menu option, otherwise this just feels weird\n    let allow_left_right = items[sel_box.selected].value !== null;\n    if (sel_box.was_clicked || sel_box.is_focused && (glov_input.keyDownEdge(KEYS.SPACE) || glov_input.keyDownEdge(KEYS.ENTER) || glov_input.padButtonDownEdge(PAD.SELECT))) {\n      this.execItem(sel_box.selected, 1);\n      selected = sel_box.selected;\n    }\n    if (sel_box.is_focused && allow_left_right && (glov_input.keyDownEdge(KEYS.RIGHT) || glov_input.keyDownEdge(KEYS.D) || glov_input.padButtonDownEdge(PAD.RIGHT))) {\n      this.execItem(sel_box.selected, 2);\n      selected = sel_box.selected;\n    }\n    if (sel_box.wasRightClicked || sel_box.is_focused && allow_left_right && (\n    // This was UpHit before, some problem with it triggering an up on the next screen?  Should supress the next up\n    // events after eating a down for UI?\n    glov_input.keyDownEdge(KEYS.LEFT) || glov_input.keyDownEdge(KEYS.A) || glov_input.padButtonDownEdge(PAD.LEFT))) {\n      this.execItem(sel_box.selected, -1);\n      selected = sel_box.selected;\n    }\n    this.selected = selected;\n    if (selected !== -1 && !items[selected].no_sound) {\n      if (items[selected].exit) {\n        glov_ui.playUISound('cancel');\n      } else {\n        glov_ui.playUISound('select');\n      }\n    }\n\n    return y - y0;\n  }\n\n  isSelected(tag_or_index) {\n    if (this.selected === -1) {\n      return false;\n    }\n    if (tag_or_index === undefined) {\n      return this.sel_box.items[this.selected].tag || true;\n    }\n    return this.sel_box.isSelected(tag_or_index);\n  }\n\n  getSelectedIndex() {\n    return this.selected;\n  }\n\n  getSelectedItem() {\n    return this.sel_box.items[this.selected];\n  }\n}\n\nexport function create(...args) {\n  return new GlovSimpleMenu(...args);\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint callback-return:off */\n\nexport const FADE_DEFAULT = 0;\nexport const FADE_OUT = 1;\nexport const FADE_IN = 2;\nexport const FADE = FADE_OUT + FADE_IN;\n\nconst assert = require('assert');\nconst { cmd_parse } = require('./cmds.js');\nconst { Howl, Howler } = require('@jimbly/howler/src/howler.core.js');\nconst { abs, floor, max, min, random } = Math;\nconst settings = require('./settings.js');\nconst { defaults, ridx } = require('../../common/util.js');\n\nconst DEFAULT_FADE_RATE = 0.001;\n\nlet sounds = {};\nlet num_loading = 0;\n\n// Howler.usingWebAudio = false; // Disable WebAudio for testing HTML5 fallbacks\n\nconst default_params = {\n  ext_list: ['mp3', 'wav'], // (recommended) try loading .mp3 versions first, then fallback to .wav\n  //  also covers all browsers: ['webm', 'mp3']\n  fade_rate: DEFAULT_FADE_RATE\n};\nlet sound_params;\n\nlet last_played = {};\nlet global_timer = 0;\nlet fades = [];\nlet music;\n\nsettings.register({\n  volume: {\n    default_value: 1,\n    type: cmd_parse.TYPE_FLOAT,\n    range: [0, 1]\n  }\n});\n\nsettings.register({\n  sound: {\n    default_value: 1,\n    type: cmd_parse.TYPE_INT,\n    range: [0, 1]\n  }\n});\n\nsettings.register({\n  music: {\n    default_value: 1,\n    type: cmd_parse.TYPE_INT,\n    range: [0, 1]\n  }\n});\n\nexport function soundStartup(params) {\n  sound_params = defaults(params || {}, default_params);\n\n  // Music\n  music = []; // 0 is current, 1 is previous (fading out)\n  for (let ii = 0; ii < 2; ++ii) {\n    music.push({\n      sound: null,\n      id: 0,\n      current_volume: 0,\n      target_volume: 0,\n      sys_volume: 0,\n      need_play: false\n    });\n  }\n}\n\nexport function soundLoad(base, opts, cb) {\n  opts = opts || {};\n  if (Array.isArray(base)) {\n    assert(!cb);\n    for (let ii = 0; ii < base.length; ++ii) {\n      soundLoad(base[ii], opts);\n    }\n    return;\n  }\n  let key = base;\n  if (sounds[key]) {\n    if (cb) {\n      cb();\n    }\n    return;\n  }\n  let m = base.match(/^(.*)\\.(mp3|ogg|wav|webm)$/u);\n  let preferred_ext;\n  if (m) {\n    base = m[1];\n    preferred_ext = m[2];\n  }\n  let src = `sounds/${base}`;\n  let srcs = [];\n  if (preferred_ext) {\n    srcs.push(`${src}.${preferred_ext}`);\n  }\n  for (let ii = 0; ii < sound_params.ext_list.length; ++ii) {\n    let ext = sound_params.ext_list[ii];\n    if (ext !== preferred_ext) {\n      srcs.push(`${src}.${ext}`);\n    }\n  }\n  // Try loading desired sound types one at a time.\n  // Cannot rely on Howler's built-in support for this because it only continues\n  //   through the list on *some* load errors, not all :(.\n  function tryLoad(idx) {\n    if (idx === srcs.length) {\n      console.error(`Error loading sound ${base}: All fallbacks exhausted, giving up`);\n      if (cb) {\n        cb('Error loading sound');\n      }\n      return;\n    }\n    ++num_loading;\n    let once = false;\n    let sound = new Howl({\n      src: srcs.slice(idx),\n      html5: Boolean(opts.streaming),\n      loop: Boolean(opts.loop),\n      volume: 0,\n      onload: function () {\n        if (!once) {\n          --num_loading;\n          once = true;\n          sounds[key] = sound;\n          if (cb) {\n            cb(null);\n          }\n        }\n      },\n      onloaderror: function (id, err, extra) {\n        if (idx === srcs.length - 1) {\n          console.error(`Error loading sound ${srcs[idx]}: ${err}`);\n        } else {\n          console.log(`Error loading sound ${srcs[idx]}: ${err}, trying fallback...`);\n        }\n        if (!once) {\n          --num_loading;\n          once = true;\n          tryLoad(idx + 1);\n        }\n      }\n    });\n  }\n  tryLoad(0);\n}\n\nexport function soundResume() {\n  // Handled internally by Howler, leaving hooks in for now, though\n  // Maybe more reliable than `Howler.safeToPlay`...\n}\n\nexport function soundResumed() {\n  return !Howler.noAudio && Howler.safeToPlay;\n}\n\nexport function soundTick(dt) {\n  global_timer += dt;\n  if (!soundResumed()) {\n    return;\n  }\n  // Do music fading\n  // Cannot rely on Howler's fading because starting a fade when one is in progress\n  //   messes things up, as well causes snaps in volume :(\n  let max_fade = dt * sound_params.fade_rate;\n  for (let ii = 0; ii < music.length; ++ii) {\n    let mus = music[ii];\n    if (!mus.sound) {\n      continue;\n    }\n    let target = settings.music ? mus.target_volume : 0;\n    if (mus.current_volume !== target) {\n      let delta = target - mus.current_volume;\n      let fade_amt = min(abs(delta), max_fade);\n      if (delta < 0) {\n        mus.current_volume = max(target, mus.current_volume - fade_amt);\n      } else {\n        mus.current_volume = min(target, mus.current_volume + fade_amt);\n      }\n      if (!mus.target_volume && !mus.current_volume) {\n        if (!mus.need_play) {\n          mus.sound.stop(mus.id);\n        }\n        mus.sound = null;\n      }\n    }\n    if (mus.sound) {\n      let sys_volume = mus.current_volume * settings.volume;\n      if (mus.need_play) {\n        mus.need_play = false;\n        mus.id = mus.sound.play();\n        mus.sys_volume = -1;\n      }\n      if (mus.sys_volume !== sys_volume) {\n        mus.sound.volume(sys_volume, mus.id);\n        mus.sys_volume = sys_volume;\n      }\n    }\n  }\n\n  for (let ii = fades.length - 1; ii >= 0; --ii) {\n    let fade = fades[ii];\n    fade.volume = max(0, fade.volume - max_fade);\n    fade.sound.volume(fade.volume * settings.volume, fade.id);\n    if (!fade.volume) {\n      fade.sound.stop(fade.id);\n      ridx(fades, ii);\n    }\n  }\n}\n\nexport function soundPlay(soundname, volume, as_music) {\n  volume = volume || 1;\n  if (!as_music && !settings.sound || as_music && !settings.music) {\n    return null;\n  }\n  if (!soundResumed()) {\n    return null;\n  }\n  if (Array.isArray(soundname)) {\n    soundname = soundname[floor(random() * soundname.length)];\n  }\n  let sound = sounds[soundname];\n  if (!sound) {\n    return null;\n  }\n  let last_played_time = last_played[soundname] || -9e9;\n  if (global_timer - last_played_time < 45) {\n    return null;\n  }\n\n  let id = sound.play(undefined, volume * settings.volume);\n  // sound.volume(volume * settings.volume, id);\n  last_played[soundname] = global_timer;\n  return {\n    stop: sound.stop.bind(sound, id),\n    playing: sound.playing.bind(sound, id), // not reliable if it hasn't started yet? :(\n    fadeOut: time => {\n      fades.push({\n        volume,\n        sound,\n        id,\n        time\n      });\n    }\n  };\n}\n\nexport function soundPlayMusic(soundname, volume, transition) {\n  if (!settings.music) {\n    return;\n  }\n  if (volume === undefined) {\n    volume = 1;\n  }\n  transition = transition || FADE_DEFAULT;\n  soundLoad(soundname, { streaming: true, loop: true }, err => {\n    assert(!err);\n    let sound = sounds[soundname];\n    assert(sound);\n    if (music[0].sound === sound) {\n      // Same sound, just adjust volume, if required\n      music[0].target_volume = volume;\n      if (!transition) {\n        if (!volume) {\n          sound.stop(music[0].id);\n          music[0].sound = null;\n        } else {\n          let sys_volume = music[0].sys_volume = volume * settings.volume;\n          sound.volume(sys_volume, music[0].id);\n        }\n      }\n      return;\n    }\n    // fade out previous music, if any\n    if (music[0].current_volume) {\n      if (transition & FADE_OUT) {\n        // swap to position 1, start fadeout\n        let temp = music[1];\n        music[1] = music[0];\n        music[0] = temp;\n        music[1].target_volume = 0;\n      }\n    }\n    if (music[0].sound) {\n      music[0].sound.stop(music[0].id);\n    }\n    music[0].sound = sound;\n    music[0].target_volume = volume;\n    let start_vol = transition & FADE_IN ? 0 : volume;\n    music[0].current_volume = start_vol;\n    if (soundResumed()) {\n      let sys_volume = start_vol * settings.volume;\n      music[0].id = sound.play(undefined, sys_volume);\n      // sound.volume(sys_volume, music[0].id);\n      music[0].sys_volume = sys_volume;\n      music[0].need_play = false;\n    } else {\n      music[0].need_play = true;\n    }\n  });\n}\n\nexport function soundLoading() {\n  return num_loading;\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst { floor, random } = Math;\n\nfunction GlovSpriteAnimation(params) {\n  this.frame = 0;\n  this.time = 0;\n  this.state = null;\n  this.anim = null;\n  this.anim_idx = 0;\n\n  if (params instanceof GlovSpriteAnimation) {\n    this.data = params.data; // already initialized\n    this.setState(params.state);\n  } else {\n    this.data = params;\n    for (let key in this.data) {\n      let anim = this.data[key];\n      if (typeof anim.frames === 'number') {\n        anim.frames = [anim.frames];\n      }\n      if (typeof anim.times === 'number') {\n        let arr = new Array(anim.frames.length);\n        for (let ii = 0; ii < anim.frames.length; ++ii) {\n          arr[ii] = anim.times;\n        }\n        anim.times = arr;\n      }\n      anim.total_time = 0;\n      for (let ii = 0; ii < anim.times.length; ++ii) {\n        anim.total_time += anim.times[ii];\n      }\n      if (anim.loop === undefined) {\n        anim.loop = true;\n      }\n    }\n  }\n}\n\nexport function create(params) {\n  return new GlovSpriteAnimation(params);\n}\n\nGlovSpriteAnimation.prototype.clone = function () {\n  return new GlovSpriteAnimation(this);\n};\n\nGlovSpriteAnimation.prototype.setState = function (state, force) {\n  if (state === this.state && !force) {\n    return this;\n  }\n  this.state = state;\n  this.anim = this.data[state];\n  if (this.anim.init_time) {\n    this.time = floor(random() * this.anim.init_time);\n  } else {\n    this.time = 0;\n  }\n  this.anim_idx = 0;\n  this.frame = this.anim.frames[this.anim_idx];\n  return this;\n};\n\nGlovSpriteAnimation.prototype.progress = function () {\n  if (!this.anim) {\n    return 1;\n  }\n  let time = this.time;\n  for (let ii = 0; ii < this.anim_idx; ++ii) {\n    time += this.anim.times[ii];\n  }\n  return time / this.anim.total_time;\n};\n\nGlovSpriteAnimation.prototype.update = function (dt) {\n  if (!this.anim) {\n    return;\n  }\n  this.time += dt;\n  if (this.time > this.anim.times[this.anim_idx]) {\n    this.time -= this.anim.times[this.anim_idx];\n    this.anim_idx = this.anim_idx + 1;\n    if (this.anim_idx === this.anim.frames.length) {\n      if (this.anim.loop) {\n        this.anim_idx = this.anim_idx % this.anim.frames.length;\n      } else {\n        // keep final frame\n        this.anim = null;\n        return;\n      }\n    }\n    this.frame = this.anim.frames[this.anim_idx];\n    if (this.time >= this.anim.times[this.anim_idx]) {\n      this.time = this.anim.times[this.anim_idx] - 1;\n    }\n  }\n};\n\nGlovSpriteAnimation.prototype.getFrame = function (dt) {\n  if (dt !== undefined) {\n    this.update(dt);\n  }\n  return this.frame;\n};","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n// Some code from Turbulenz: Copyright (c) 2012-2013 Turbulenz Limited\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst engine = require('./engine.js');\n\nconst geom = require('./geom.js');\nconst { cos, max, min, round, sin } = Math;\nconst textures = require('./textures.js');\nconst shaders = require('./shaders.js');\nconst { nextHighestPowerOfTwo } = require('../../common/util.js');\nconst { vec2, vec4 } = require('./vmath.js');\n\nexport const BLEND_ALPHA = 0;\nexport const BLEND_ADDITIVE = 1;\n\nlet sprite_vshader;\nlet sprite_fshader;\nlet sprite_dual_fshader;\nlet clip_space = vec4();\nlet sprite_shader_params = {\n  clip_space\n};\nlet last_uid = 0;\n\nlet sprite_queue = [];\n\nlet sprite_freelist = [];\n\nfunction SpriteData() {\n  // x1 y1 x2 y2 x3 y3 x4 y4 - vertices [0,8)\n  // cr cg cb ca u1 v1 u2 v2 - normalized color + texture [8,16)\n  // data for GL queuing\n  this.data = new Float32Array(16);\n  // data for sorting/binding/etc\n  this.texs = null;\n  this.shader = null;\n  this.shader_params = null;\n  this.x = 0;\n  this.y = 0;\n  this.z = 0;\n  this.blend = 0; // BLEND_ALPHA\n  this.uid = 0;\n}\n\nfunction spriteDataAlloc() {\n  if (sprite_freelist.length) {\n    return sprite_freelist.pop();\n  }\n  return new SpriteData();\n}\n\nfunction cmpSprite(a, b) {\n  if (a.z !== b.z) {\n    return a.z - b.z;\n  }\n  if (a.y !== b.y) {\n    return a.y - b.y;\n  }\n  if (a.x !== b.x) {\n    return a.x - b.x;\n  }\n  return a.uid - b.uid;\n}\n\nexport function queuefn(z, fn) {\n  assert(isFinite(z));\n  sprite_queue.push({\n    fn,\n    x: 0,\n    y: 0,\n    z,\n    uid: ++last_uid\n  });\n}\n\n// coordinates must be in counter-clockwise winding order\nexport function queueraw4(texs, x0, y0, x1, y1, x2, y2, x3, y3, z, u0, v0, u1, v1, color, shader, shader_params, blend) {\n  assert(isFinite(z));\n  let elem = spriteDataAlloc();\n  let data = elem.data;\n  // x1 y1 x2 y2 x3 y3 x4 y4 - vertices [0,8)\n  // cr cg cb ca u1 v1 u2 v2 - normalized color + texture [8,16)\n  // Minor perf improvement: convert by clip_space here (still just a single MAD\n  //   if pre-calculated in the camera) and remove it from the shader.\n  data[0] = (x0 - camera2d.data[0]) * camera2d.data[4];\n  data[1] = (y0 - camera2d.data[1]) * camera2d.data[5];\n  data[2] = (x1 - camera2d.data[0]) * camera2d.data[4];\n  data[3] = (y1 - camera2d.data[1]) * camera2d.data[5];\n  data[4] = (x2 - camera2d.data[0]) * camera2d.data[4];\n  data[5] = (y2 - camera2d.data[1]) * camera2d.data[5];\n  data[6] = (x3 - camera2d.data[0]) * camera2d.data[4];\n  data[7] = (y3 - camera2d.data[1]) * camera2d.data[5];\n  data[8] = color[0];\n  data[9] = color[1];\n  data[10] = color[2];\n  data[11] = color[3];\n  data[12] = u0;\n  data[13] = v0;\n  data[14] = u1;\n  data[15] = v1;\n\n  elem.texs = texs;\n  elem.x = data[0];\n  elem.y = data[1];\n  elem.z = z;\n  elem.shader = shader || null;\n  if (shader_params) {\n    shader_params.clip_space = sprite_shader_params.clip_space;\n    elem.shader_params = shader_params;\n  } else {\n    elem.shader_params = null;\n  }\n  elem.blend = blend || 0; // BLEND_ALPHA\n  //elem.bucket = bucket || this.default_bucket;\n  //elem.tech_params = tech_params || null;\n  elem.uid = ++last_uid;\n  sprite_queue.push(elem);\n  return elem;\n}\n\nexport function queueraw(texs, x, y, z, w, h, u0, v0, u1, v1, color, shader, shader_params, blend) {\n  return queueraw4(texs, x, y, x, y + h, x + w, y + h, x + w, y, z, u0, v0, u1, v1, color, shader, shader_params, blend);\n}\n\nexport function queuesprite(sprite, x, y, z, w, h, rot, uvs, color, shader, shader_params, nozoom) {\n  assert(isFinite(z));\n  let elem = spriteDataAlloc();\n  elem.texs = sprite.texs;\n  elem.x = x = (x - camera2d.data[0]) * camera2d.data[4];\n  elem.y = y = (y - camera2d.data[1]) * camera2d.data[5];\n  elem.z = z;\n  w *= camera2d.data[4];\n  h *= camera2d.data[5];\n  color = color || sprite.color;\n  let data = elem.data;\n  if (!rot) {\n    let x1 = x - sprite.origin[0] * w;\n    let y1 = y - sprite.origin[1] * h;\n    let x2 = x1 + w;\n    let y2 = y1 + h;\n    data[0] = x1;\n    data[1] = y1;\n    data[2] = x1;\n    data[3] = y2;\n    data[4] = x2;\n    data[5] = y2;\n    data[6] = x2;\n    data[7] = y1;\n  } else {\n    let dx = sprite.origin[0] * w;\n    let dy = sprite.origin[1] * h;\n\n    let cosr = cos(rot);\n    let sinr = sin(rot);\n\n    let x1 = x - cosr * dx + sinr * dy;\n    let y1 = y - sinr * dx - cosr * dy;\n    let ch = cosr * h;\n    let cw = cosr * w;\n    let sh = sinr * h;\n    let sw = sinr * w;\n\n    data[0] = x1;\n    data[1] = y1;\n    data[2] = x1 - sh;\n    data[3] = y1 + ch;\n    data[4] = x1 + cw - sh;\n    data[5] = y1 + sw + ch;\n    data[6] = x1 + cw;\n    data[7] = y1 + sw;\n  }\n\n  data[8] = color[0];\n  data[9] = color[1];\n  data[10] = color[2];\n  data[11] = color[3];\n\n  let ubias = 0;\n  let vbias = 0;\n  let tex = elem.texs[0];\n  if (!nozoom && !tex.nozoom) {\n    // Bias the texture coordinates depending on the minification/magnification\n    //   level so we do not get pixels from neighboring frames bleeding in\n    // Use min here (was max in libGlov), to solve tooltip edges being wrong in strict pixely\n    // Use max here to solve box buttons not lining up, but instead using nozoom in drawBox/drawHBox,\n    //   but, that only works for magnification - need the max here for minification!\n    let zoom_level = max((uvs[2] - uvs[0]) * tex.width / w, (uvs[3] - uvs[1]) * tex.height / h); // in texels per pixel\n    if (zoom_level < 1) {\n      // magnification\n      if (tex.filter_mag === gl.LINEAR) {\n        // Need to bias by half a texel, so we're doing absolutely no blending with the neighboring texel\n        ubias = vbias = 0.5;\n      } else if (tex.filter_mag === gl.NEAREST && engine.antialias) {\n        // When antialiasing is on, even nearest sampling samples from adjacent texels, do slight bias\n        // Want to bias by one *pixel's* worth\n        ubias = vbias = zoom_level / 2;\n      }\n    } else if (zoom_level > 1) {\n      // minification\n      // need to apply this bias even with nearest filtering, not exactly sure why\n      let mipped_texels = zoom_level / 2;\n      ubias = vbias = 0.5 + mipped_texels;\n    }\n    if (uvs[0] > uvs[2]) {\n      ubias *= -1;\n    }\n    if (uvs[1] > uvs[3]) {\n      vbias *= -1;\n    }\n  }\n\n  data[12] = uvs[0] + ubias / tex.width;\n  data[13] = uvs[1] + vbias / tex.height;\n  data[14] = uvs[2] - ubias / tex.width;\n  data[15] = uvs[3] - vbias / tex.height;\n\n  elem.uid = ++last_uid;\n  elem.shader = shader || null;\n  elem.blend = 0; // BLEND_ALPHA\n\n  if (shader_params) {\n    shader_params.clip_space = sprite_shader_params.clip_space;\n    elem.shader_params = shader_params;\n  } else {\n    elem.shader_params = null;\n  }\n  sprite_queue.push(elem);\n}\n\nexport function clip(z_start, z_end, x, y, w, h) {\n  let xy = vec2();\n  camera2d.virtualToCanvas(xy, [x, y]);\n  let wh = vec2();\n  camera2d.virtualToCanvas(wh, [x + w, y + h]);\n  xy[0] = round(xy[0]);\n  xy[1] = round(xy[1]);\n  wh[0] = round(wh[0]) - xy[0];\n  wh[1] = round(wh[1]) - xy[1];\n\n  // let gd_w = engine.render_width || engine.width;\n  let gd_h = engine.render_height || engine.height;\n  let scissor = [xy[0], gd_h - (xy[1] + wh[1]), wh[0], wh[1]];\n  queuefn(z_start - 0.01, () => {\n    gl.enable(gl.SCISSOR_TEST);\n    gl.scissor(scissor[0], scissor[1], scissor[2], scissor[3]);\n  });\n  queuefn(z_end - 0.01, () => {\n    gl.disable(gl.SCISSOR_TEST);\n  });\n}\n\nfunction diffTextures(texsa, texsb) {\n  if (texsa.length !== texsb.length) {\n    return true;\n  }\n  for (let ii = 0; ii < texsa.length; ++ii) {\n    if (texsa[ii] !== texsb[ii]) {\n      return true;\n    }\n  }\n  return false;\n}\n\nlet batch_state;\nlet sprite_geom;\nlet sprite_buffer; // Float32Array with 8 entries per vert\nlet sprite_buffer_len = 0; // in verts\nlet sprite_buffer_batch_start = 0;\nlet sprite_buffer_idx = 0; // in verts\nlet last_blend_mode;\nlet last_bound_shader;\nconst MAX_VERT_COUNT = 65536;\nlet batches = [];\n\nfunction commit() {\n  if (sprite_buffer_idx === sprite_buffer_batch_start) {\n    return;\n  }\n  batches.push({\n    state: batch_state,\n    start: sprite_buffer_batch_start,\n    end: sprite_buffer_idx\n  });\n  sprite_buffer_batch_start = sprite_buffer_idx;\n}\n\nfunction commitAndFlush() {\n  commit();\n  if (!batches.length) {\n    return;\n  }\n  assert(sprite_buffer_idx);\n  sprite_geom.update(sprite_buffer, sprite_buffer_idx);\n  sprite_geom.bind();\n\n  for (let ii = 0; ii < batches.length; ++ii) {\n    let batch = batches[ii];\n    let { state, start, end } = batch;\n    if (last_bound_shader !== state.shader || state.shader_params) {\n      shaders.bind(sprite_vshader, state.shader || sprite_fshader, state.shader_params || sprite_shader_params);\n      last_bound_shader = state.shader;\n    }\n    if (last_blend_mode !== state.blend) {\n      last_blend_mode = state.blend;\n      if (last_blend_mode === BLEND_ADDITIVE) {\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE);\n      } else {\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n      }\n    }\n    textures.bindArray(state.texs);\n    gl.drawElements(sprite_geom.mode, (end - start) * 3 / 2, gl.UNSIGNED_SHORT, start * 3);\n  }\n\n  batches.length = 0;\n  sprite_buffer_idx = 0;\n  sprite_buffer_batch_start = 0;\n}\n\nfunction bufferSpriteData(data) {\n  let index = sprite_buffer_idx * 8;\n  sprite_buffer_idx += 4;\n\n  let c1 = data[8];\n  let c2 = data[9];\n  let c3 = data[10];\n  let c4 = data[11];\n  let u1 = data[12];\n  let v1 = data[13];\n  let u2 = data[14];\n  let v2 = data[15];\n\n  sprite_buffer[index] = data[0];\n  sprite_buffer[index + 1] = data[1];\n  sprite_buffer[index + 2] = c1;\n  sprite_buffer[index + 3] = c2;\n  sprite_buffer[index + 4] = c3;\n  sprite_buffer[index + 5] = c4;\n  sprite_buffer[index + 6] = u1;\n  sprite_buffer[index + 7] = v1;\n\n  sprite_buffer[index + 8] = data[2];\n  sprite_buffer[index + 9] = data[3];\n  sprite_buffer[index + 10] = c1;\n  sprite_buffer[index + 11] = c2;\n  sprite_buffer[index + 12] = c3;\n  sprite_buffer[index + 13] = c4;\n  sprite_buffer[index + 14] = u1;\n  sprite_buffer[index + 15] = v2;\n\n  sprite_buffer[index + 16] = data[4];\n  sprite_buffer[index + 17] = data[5];\n  sprite_buffer[index + 18] = c1;\n  sprite_buffer[index + 19] = c2;\n  sprite_buffer[index + 20] = c3;\n  sprite_buffer[index + 21] = c4;\n  sprite_buffer[index + 22] = u2;\n  sprite_buffer[index + 23] = v2;\n\n  sprite_buffer[index + 24] = data[6];\n  sprite_buffer[index + 25] = data[7];\n  sprite_buffer[index + 26] = c1;\n  sprite_buffer[index + 27] = c2;\n  sprite_buffer[index + 28] = c3;\n  sprite_buffer[index + 29] = c4;\n  sprite_buffer[index + 30] = u2;\n  sprite_buffer[index + 31] = v1;\n}\n\nexport function draw() {\n  if (!sprite_queue.length) {\n    return;\n  }\n  gl.disable(gl.DEPTH_TEST);\n  gl.depthMask(false);\n  gl.enable(gl.BLEND);\n\n  clip_space[0] = 2 / engine.viewport[2];\n  clip_space[1] = -2 / engine.viewport[3];\n\n  last_blend_mode = -1;\n  last_bound_shader = -1;\n\n  if (!sprite_geom) {\n    sprite_geom = geom.create([[shaders.semantic.POSITION, gl.FLOAT, 2, false], [shaders.semantic.COLOR, gl.FLOAT, 4, false], [shaders.semantic.TEXCOORD, gl.FLOAT, 2, false]], [], null, geom.QUADS);\n    sprite_buffer = new Float32Array(1024);\n    sprite_buffer_len = sprite_buffer.length / 8;\n  }\n\n  sprite_queue.sort(cmpSprite);\n\n  batch_state = null;\n  assert.equal(sprite_buffer_idx, 0);\n  assert.equal(sprite_buffer_batch_start, 0);\n  assert.equal(batches.length, 0);\n  for (let ii = 0; ii < sprite_queue.length; ++ii) {\n    let elem = sprite_queue[ii];\n    if (elem.fn) {\n      commitAndFlush();\n      batch_state = null;\n      last_bound_shader = -1;\n      elem.fn();\n    } else {\n      if (!batch_state || diffTextures(elem.texs, batch_state.texs) || elem.shader !== batch_state.shader || elem.shader_params !== batch_state.shader_params || elem.blend !== batch_state.blend) {\n        commit();\n        batch_state = elem;\n      }\n      if (sprite_buffer_idx + 4 > sprite_buffer_len) {\n        commitAndFlush();\n        // batch_state left alone\n        if (sprite_buffer_len !== MAX_VERT_COUNT) {\n          let new_length = min(sprite_buffer_len * 1.25 + 3 & ~3, MAX_VERT_COUNT); // eslint-disable-line no-bitwise\n          sprite_buffer_len = new_length;\n          sprite_buffer = new Float32Array(new_length * 8);\n        }\n      }\n\n      bufferSpriteData(elem.data);\n      sprite_freelist.push(elem);\n    }\n  }\n  commitAndFlush();\n\n  sprite_queue.length = 0;\n  if (last_blend_mode !== BLEND_ALPHA) {\n    // always reset to this\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n  }\n}\n\nexport function buildRects(ws, hs) {\n  let rects = [];\n  let total_w = 0;\n  for (let ii = 0; ii < ws.length; ++ii) {\n    total_w += ws[ii];\n  }\n  let total_h = 0;\n  for (let ii = 0; ii < hs.length; ++ii) {\n    total_h += hs[ii];\n  }\n  let tex_w = nextHighestPowerOfTwo(total_w);\n  let tex_h = nextHighestPowerOfTwo(total_h);\n  let wh = [];\n  for (let ii = 0; ii < ws.length; ++ii) {\n    wh.push(ws[ii] / total_h);\n  }\n  let hw = [];\n  for (let ii = 0; ii < hs.length; ++ii) {\n    hw.push(hs[ii] / total_w);\n  }\n  let aspect = [];\n  let non_square = false;\n  let y = 0;\n  for (let jj = 0; jj < hs.length; ++jj) {\n    let x = 0;\n    for (let ii = 0; ii < ws.length; ++ii) {\n      let r = vec4(x / tex_w, y / tex_h, (x + ws[ii]) / tex_w, (y + hs[jj]) / tex_h);\n      rects.push(r);\n      let asp = ws[ii] / hs[jj];\n      if (asp !== 1) {\n        non_square = true;\n      }\n      aspect.push(asp);\n      x += ws[ii];\n    }\n    y += hs[jj];\n  }\n  return {\n    widths: ws,\n    heights: hs,\n    wh,\n    hw,\n    rects,\n    aspect: non_square ? aspect : null,\n    total_w,\n    total_h\n  };\n}\n\nfunction Sprite(params) {\n  if (params.texs) {\n    this.texs = params.texs;\n  } else {\n    this.texs = [];\n    if (params.tex) {\n      this.texs.push(params.tex);\n    } else if (params.layers) {\n      assert(params.name);\n      this.texs = [];\n      for (let ii = 0; ii < params.layers; ++ii) {\n        this.texs.push(textures.load({\n          url: `img/${params.name}_${ii}.png`,\n          filter_min: params.filter_min,\n          filter_mag: params.filter_mag,\n          wrap_s: params.wrap_s,\n          wrap_t: params.wrap_t\n        }));\n      }\n    } else if (params.name) {\n      this.texs.push(textures.load({\n        url: `img/${params.name}.png`,\n        filter_min: params.filter_min,\n        filter_mag: params.filter_mag,\n        wrap_s: params.wrap_s,\n        wrap_t: params.wrap_t\n      }));\n    } else {\n      assert(params.url);\n      this.texs.push(textures.load(params));\n    }\n  }\n\n  this.origin = params.origin || vec2(0, 0); // [0,1] range\n  this.size = params.size || vec2(1, 1);\n  this.color = params.color || vec4(1, 1, 1, 1);\n  this.uvs = params.uvs || vec4(0, 0, 1, 1);\n  if (!params.uvs) {\n    // Fix up non-power-of-two textures\n    this.texs[0].onLoad(tex => {\n      this.uvs[2] = tex.src_width / tex.width;\n      this.uvs[3] = tex.src_height / tex.height;\n    });\n  }\n\n  if (params.ws) {\n    this.uidata = buildRects(params.ws, params.hs);\n  }\n  this.shader = params.shader || null;\n}\n\n// params:\n//   required: x, y\n//   optional: z, w, h, uvs, color\nSprite.prototype.draw = function (params) {\n  if (params.w === 0 || params.h === 0) {\n    return;\n  }\n  let w = (params.w || 1) * this.size[0];\n  let h = (params.h || 1) * this.size[1];\n  let uvs = typeof params.frame === 'number' ? this.uidata.rects[params.frame] : params.uvs || this.uvs;\n  queuesprite(this, params.x, params.y, params.z || Z.UI, w, h, params.rot, uvs, params.color || this.color, params.shader || this.shader, params.shader_params, params.nozoom);\n};\n\nSprite.prototype.drawDualTint = function (params) {\n  params.shader = sprite_dual_fshader;\n  params.shader_params = {\n    color1: params.color1\n  };\n  this.draw(params);\n};\n\nexport function create(params) {\n  return new Sprite(params);\n}\n\nexport function startup() {\n  clip_space[2] = -1;\n  clip_space[3] = 1;\n  sprite_vshader = shaders.create(gl.VERTEX_SHADER, 'sprite.vp', '// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\\n// Released under MIT License: https://opensource.org/licenses/MIT\\n#pragma WebGL2\\nprecision highp float;\\n\\n// per-vertex input\\nattribute vec2 POSITION;\\nattribute vec4 COLOR;\\nattribute vec2 TEXCOORD;\\n\\n// output\\nvarying lowp vec4 interp_color;\\nvarying vec2 interp_texcoord;\\n\\n// global parameters\\nuniform vec4 clip_space;\\n\\nvoid main()\\n{\\n  interp_texcoord = TEXCOORD;\\n  interp_color = COLOR;\\n  gl_Position = vec4(POSITION.xy * clip_space.xy + clip_space.zw, 0.0, 1.0);\\n}\\n');\n  sprite_fshader = shaders.create(gl.FRAGMENT_SHADER, 'sprite.fp', '#pragma WebGL2\\n\\nprecision lowp float;\\n\\nuniform sampler2D tex0;\\n\\nvarying lowp vec4 interp_color;\\nvarying vec2 interp_texcoord;\\n\\nvoid main(void) {\\n  vec4 tex = texture2D(tex0, interp_texcoord);\\n  gl_FragColor = tex * interp_color;\\n}\\n');\n  sprite_dual_fshader = shaders.create(gl.FRAGMENT_SHADER, 'sprite_dual.fp', '#pragma WebGL2\\n\\nprecision lowp float;\\n\\nuniform sampler2D tex0;\\nuniform sampler2D tex1;\\nuniform lowp vec4 color1;\\n\\nvarying lowp vec4 interp_color;\\nvarying vec2 interp_texcoord;\\n\\nvoid main(void) {\\n  vec4 tex0 = texture2D(tex0,interp_texcoord);\\n  vec2 tex1 = texture2D(tex1,interp_texcoord).rg;\\n  float value = dot(tex0.rgb, vec3(0.2, 0.5, 0.3));\\n  vec3 valueR = value * interp_color.rgb;\\n  vec3 valueG = value * color1.rgb;\\n  vec3 value3 = mix(tex0.rgb, valueG, tex1.g);\\n  value3 = mix(value3, valueR, tex1.r);\\n  gl_FragColor = vec4(value3, tex0.a * interp_color.a);\\n}\\n');\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint-env browser */\n\nconst assert = require('assert');\nconst engine = require('./engine.js');\nconst local_storage = require('./local_storage.js');\n\nexport let textures = {};\nexport let load_count = 0;\nlet aniso = 4;\nlet max_aniso = 0;\nlet aniso_enum;\n\nlet default_filter_min;\nlet default_filter_mag;\n\nexport const format = {\n  R8: { count: 1 },\n  RGB8: { count: 3 },\n  RGBA8: { count: 4 }\n};\n\nexport function defaultFilters(min, mag) {\n  default_filter_min = min;\n  default_filter_mag = mag;\n}\n\nconst { isPowerOfTwo, nextHighestPowerOfTwo } = require('../../common/util.js');\n\nlet bound_unit = null;\nlet bound_tex = [];\n\nlet handle_loading;\nlet handle_error;\n\nfunction setUnit(unit) {\n  if (unit !== bound_unit) {\n    gl.activeTexture(gl.TEXTURE0 + unit);\n    bound_unit = unit;\n  }\n}\n\nfunction bindHandle(unit, target, handle) {\n  if (bound_tex[unit] !== handle) {\n    setUnit(unit);\n    gl.bindTexture(target, handle);\n    bound_tex[unit] = handle;\n  }\n}\n\nfunction unbindHandle(target, handle) {\n  for (let unit = 0; unit < bound_tex.length; ++unit) {\n    if (bound_tex[unit] === handle) {\n      setUnit(unit);\n      gl.bindTexture(target, null);\n      bound_tex[unit] = null;\n    }\n  }\n}\n\nexport function bind(unit, tex) {\n  // May or may not change the unit\n  bindHandle(unit, tex.target, tex.eff_handle);\n}\n\n// hot path inlined for perf\nexport function bindArray(texs) {\n  for (let ii = 0; ii < texs.length; ++ii) {\n    let tex = texs[ii];\n    let handle = tex.eff_handle;\n    if (bound_tex[ii] !== handle) {\n      if (ii !== bound_unit) {\n        gl.activeTexture(gl.TEXTURE0 + ii);\n        bound_unit = ii;\n      }\n      gl.bindTexture(tex.target, handle);\n      bound_tex[ii] = handle;\n    }\n  }\n}\n\nexport function isArrayBound(texs) {\n  for (let ii = 0; ii < texs.length; ++ii) {\n    let tex = texs[ii];\n    let handle = tex.eff_handle;\n    if (bound_tex[ii] !== handle) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction Texture(params) {\n  this.name = params.name;\n  this.loaded = false;\n  this.load_fail = false;\n  this.target = params.target || gl.TEXTURE_2D;\n  this.is_array = this.target === gl.TEXTURE_2D_ARRAY;\n  this.handle = gl.createTexture();\n  this.eff_handle = handle_loading;\n  this.setSamplerState(params);\n  this.src_width = this.src_height = 1;\n  this.width = this.height = 1;\n  this.nozoom = params.nozoom || false;\n  this.on_load = [];\n  this.gpu_mem = 0;\n\n  this.format = params.format || format.RGBA8;\n\n  if (params.data) {\n    let err = this.updateData(params.width, params.height, params.data);\n    assert(!err, err);\n  } else if (params.url) {\n    this.loadURL(params.url);\n  }\n}\n\nTexture.prototype.updateGPUMem = function () {\n  let new_size = this.width * this.height * this.format.count;\n  if (this.mipmaps) {\n    new_size *= 1.5;\n  }\n  let diff = new_size - this.gpu_mem;\n  engine.perf_state.gpu_mem.tex += diff;\n  this.gpu_mem = diff;\n};\n\nTexture.prototype.setSamplerState = function (params) {\n  let target = this.target;\n  setUnit(0);\n  bound_tex[0] = null; // Force a re-bind, no matter what\n  bindHandle(0, target, this.handle);\n\n  this.filter_min = params.filter_min || default_filter_min;\n  this.filter_mag = params.filter_mag || default_filter_mag;\n  gl.texParameteri(target, gl.TEXTURE_MIN_FILTER, this.filter_min);\n  gl.texParameteri(target, gl.TEXTURE_MAG_FILTER, this.filter_mag);\n  this.wrap_s = params.wrap_s || gl.REPEAT;\n  this.wrap_t = params.wrap_t || gl.REPEAT;\n  gl.texParameteri(target, gl.TEXTURE_WRAP_S, this.wrap_s);\n  gl.texParameteri(target, gl.TEXTURE_WRAP_T, this.wrap_t);\n\n  this.mipmaps = this.filter_min >= 0x2700 && this.filter_min <= 0x2703; // Probably gl.LINEAR_MIPMAP_LINEAR\n\n  if (max_aniso) {\n    if (this.mipmaps && params.filter_mag !== gl.NEAREST) {\n      gl.texParameterf(gl.TEXTURE_2D, aniso_enum, aniso);\n    } else {\n      gl.texParameterf(gl.TEXTURE_2D, aniso_enum, 1);\n    }\n  }\n};\n\nTexture.prototype.updateData = function updateData(w, h, data) {\n  setUnit(0);\n  bound_tex[0] = null; // Force a re-bind, no matter what\n  bindHandle(0, this.target, this.handle);\n  this.src_width = w;\n  this.src_height = h;\n  this.width = w;\n  this.height = h;\n  gl.getError(); // clear the error flag if there is one\n  // Resize NP2 if this is not being used for a texture array, and it is not explicitly allowed (non-mipmapped, wrapped)\n  let np2 = (!isPowerOfTwo(w) || !isPowerOfTwo(h)) && !this.is_array && !(!this.mipmaps && this.wrap_s === gl.CLAMP_TO_EDGE && this.wrap_t === gl.CLAMP_TO_EDGE);\n  if (np2) {\n    this.width = nextHighestPowerOfTwo(w);\n    this.height = nextHighestPowerOfTwo(h);\n    gl.texImage2D(this.target, 0, this.format.internal_type, this.width, this.height, 0, this.format.internal_type, this.format.gl_type, null);\n  }\n  if (data instanceof Uint8Array) {\n    assert(data.length >= w * h * this.format.count);\n    if (this.is_array) {\n      let num_images = h / w; // assume square\n      gl.texImage3D(this.target, 0, this.format.internal_type, w, w, num_images, 0, this.format.internal_type, this.format.gl_type, data);\n    } else if (np2) {\n      // Could do multiple upload thing like below, but smarter, but we really shouldn't be doing this for\n      // in-process generated images!\n      gl.texSubImage2D(this.target, 0, 0, 0, w, h, this.format.internal_type, this.format.gl_type, data);\n    } else {\n      gl.texImage2D(this.target, 0, this.format.internal_type, w, h, 0, this.format.internal_type, this.format.gl_type, data);\n    }\n  } else {\n    assert(data.width); // instanceof Image fails with ublock AdBlocker; also, this is either an Image or Canvas\n    if (this.is_array) {\n      let num_images = h / w;\n      gl.texImage3D(this.target, 0, this.format.internal_type, w, w, num_images, 0, this.format.internal_type, this.format.gl_type, data);\n\n      if (gl.getError()) {\n        // Fix for Samsung devices (Chris's and Galaxy S8 on CrossBrowserTesting)\n        // Try drawing to canvas first\n        let canvas = document.createElement('canvas');\n        canvas.width = w;\n        canvas.height = h;\n        let ctx = canvas.getContext('2d');\n        ctx.drawImage(data, 0, 0);\n        gl.texImage3D(this.target, 0, this.format.internal_type, w, w, num_images, 0, this.format.internal_type, this.format.gl_type, canvas);\n      }\n    } else if (np2) {\n      // Pad up to power of two\n      // Duplicate right and bottom pixel row by sending image 3 times\n      if (w !== this.width) {\n        gl.texSubImage2D(this.target, 0, 1, 0, this.format.internal_type, this.format.gl_type, data);\n      }\n      if (h !== this.height) {\n        gl.texSubImage2D(this.target, 0, 0, 1, this.format.internal_type, this.format.gl_type, data);\n      }\n      gl.texSubImage2D(this.target, 0, 0, 0, this.format.internal_type, this.format.gl_type, data);\n    } else {\n      gl.texImage2D(this.target, 0, this.format.internal_type, this.format.internal_type, this.format.gl_type, data);\n    }\n  }\n  let gl_err = gl.getError();\n  if (gl_err) {\n    return gl_err;\n  }\n  if (this.mipmaps) {\n    gl.generateMipmap(this.target);\n    assert(!gl.getError());\n  }\n  this.updateGPUMem();\n  this.eff_handle = this.handle;\n  this.loaded = true;\n\n  let arr = this.on_load;\n  this.on_load = [];\n  for (let ii = 0; ii < arr.length; ++ii) {\n    arr[ii](this);\n  }\n\n  return 0;\n};\n\nTexture.prototype.onLoad = function (cb) {\n  if (this.loaded) {\n    cb(this); // eslint-disable-line callback-return\n  } else {\n    this.on_load.push(cb);\n  }\n};\n\nconst TEX_RETRY_COUNT = 4;\nTexture.prototype.loadURL = function loadURL(url, filter) {\n  let tex = this;\n\n  function tryLoad(next) {\n    let did_next = false;\n    function done(img) {\n      if (!did_next) {\n        did_next = true;\n        return void next(img);\n      }\n    }\n\n    let img = new Image();\n    img.onload = function () {\n      done(img);\n    };\n    function fail() {\n      done(null);\n    }\n    img.onerror = fail;\n    /* Turbulenz was doing it this way - some advantage?\n    if (typeof URL !== \"undefined\" && URL.createObjectURL) {\n      let xhr = new XMLHttpRequest();\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4) {\n          let xhrStatus = xhr.status;\n          // Sometimes the browser sets status to 200 OK when the connection is closed\n          // before the message is sent (weird!).\n          // In order to address this we fail any completely empty responses.\n          // Hopefully, nobody will get a valid response with no headers and no body!\n          if (xhr.getAllResponseHeaders() === \"\" && !xhr.response) {\n            fail();\n          } else {\n            if (xhrStatus === 200 || xhrStatus === 0) {\n              var blob = xhr.response;\n              img.onload = function blobImageLoadedFn() {\n                imageLoaded();\n                URL.revokeObjectURL(img.src);\n                blob = null;\n              };\n              img.src = URL.createObjectURL(blob);\n            } else {\n              fail();\n            }\n          }\n          xhr.onreadystatechange = null;\n        }\n      };\n      xhr.open('GET', src, true);\n      xhr.responseType = 'blob';\n      xhr.send();\n    } else { */\n    img.crossOrigin = 'anonymous';\n    img.src = url;\n  }\n\n  ++load_count;\n  let retries = 0;\n  function handleLoad(img) {\n    let err_details = '';\n    if (img) {\n      tex.format = format.RGBA8;\n      if (filter) {\n        img = filter(tex, img);\n      }\n      let err = tex.updateData(img.width, img.height, img);\n      if (err) {\n        err_details = `: GLError(${err})`;\n        // Samsung TV gets 1282 on texture arrays\n        // Samsung Galaxy S6 gets 1281 on texture arrays\n        if (tex.is_array && (String(err) === '1282' || String(err) === '1281') && engine.webgl2 && !engine.DEBUG) {\n          local_storage.setJSON('webgl2_disable', {\n            ua: navigator.userAgent,\n            ts: Date.now()\n          });\n          console.error(`Error loading array texture \"${url}\"${err_details}, reloading without WebGL2..`);\n          document.location.reload();\n          return;\n        }\n        retries = TEX_RETRY_COUNT; // do not retry this\n      } else {\n        --load_count;\n        return;\n      }\n    }\n    let err = `Error loading texture \"${url}\"${err_details}`;\n    retries++;\n    if (retries > TEX_RETRY_COUNT) {\n      --load_count;\n      tex.eff_handle = handle_error;\n      tex.load_fail = true;\n      console.error(`${err}${err_details ? '' : ', retries failed'}`);\n      assert(false, err);\n      return;\n    }\n    console.error(`${err}, retrying... `);\n    setTimeout(tryLoad.bind(null, handleLoad), 100 * retries * retries);\n  }\n  tryLoad(handleLoad);\n};\n\nTexture.prototype.copyTexImage = function (x, y, w, h) {\n  assert(w && h);\n  bindHandle(0, this.target, this.handle);\n  gl.copyTexImage2D(this.target, 0, gl.RGB, x, y, w, h, 0);\n  this.src_width = this.width = w;\n  this.src_height = this.height = h;\n  this.updateGPUMem();\n};\n\nTexture.prototype.destroy = function () {\n  assert(this.name);\n  delete textures[this.name];\n  unbindHandle(this.target, this.handle);\n  gl.deleteTexture(this.handle);\n  this.width = this.height = 0;\n  this.updateGPUMem();\n};\n\nfunction create(params) {\n  assert(params.name);\n  let texture = new Texture(params);\n  textures[params.name] = texture;\n  return texture;\n}\n\nlet last_temporary_id = 0;\nexport function createForCapture(unique_name) {\n  let name = unique_name || `screen_temporary_tex_${++last_temporary_id}`;\n  assert(!textures[name]);\n  let texture = create({\n    filter_min: gl.NEAREST,\n    filter_mag: gl.NEAREST,\n    wrap_s: gl.CLAMP_TO_EDGE,\n    wrap_t: gl.CLAMP_TO_EDGE,\n    format: format.RGB8,\n    name\n  });\n  texture.loaded = true;\n  texture.eff_handle = texture.handle;\n  return texture;\n}\n\nexport function load(params) {\n  let key = params.name = params.name || params.url;\n  assert(key);\n  if (textures[key]) {\n    return textures[key];\n  }\n  return create(params);\n}\n\nexport function cname(key) {\n  let idx = key.lastIndexOf('/');\n  if (idx !== -1) {\n    key = key.slice(idx + 1);\n  }\n  idx = key.indexOf('.');\n  if (idx !== -1) {\n    key = key.slice(0, idx);\n  }\n  return key.toLowerCase();\n}\nexport function findTexForReplacement(search_key) {\n  search_key = cname(search_key);\n  for (let key in textures) {\n    let compare_key = cname(key);\n    if (compare_key === search_key) {\n      return textures[key];\n    }\n  }\n  return null;\n}\n\nexport function startup() {\n\n  default_filter_min = gl.LINEAR_MIPMAP_LINEAR;\n  default_filter_mag = gl.LINEAR;\n\n  format.R8.internal_type = gl.LUMINANCE;\n  format.R8.gl_type = gl.UNSIGNED_BYTE;\n  format.RGB8.internal_type = gl.RGB;\n  format.RGB8.gl_type = gl.UNSIGNED_BYTE;\n  format.RGBA8.internal_type = gl.RGBA;\n  format.RGBA8.gl_type = gl.UNSIGNED_BYTE;\n\n  let ext_anisotropic = gl.getExtension('EXT_texture_filter_anisotropic') || gl.getExtension('MOZ_EXT_texture_filter_anisotropic') || gl.getExtension('WEBKIT_EXT_texture_filter_anisotropic');\n  if (ext_anisotropic) {\n    aniso_enum = ext_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT;\n    aniso = max_aniso = gl.getParameter(ext_anisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT);\n  }\n\n  handle_error = load({\n    name: 'error',\n    width: 2, height: 2,\n    nozoom: true,\n    format: format.RGBA8,\n    filter_mag: gl.NEAREST,\n    data: new Uint8Array([255, 20, 147, 255, 255, 0, 0, 255, 255, 255, 255, 255, 255, 20, 147, 255])\n  }).handle;\n\n  handle_loading = load({\n    name: 'loading',\n    width: 2, height: 2,\n    nozoom: true,\n    format: format.RGBA8,\n    data: new Uint8Array([127, 127, 127, 255, 0, 0, 0, 255, 64, 64, 64, 255, 127, 127, 127, 255])\n  }).handle;\n\n  load({\n    name: 'white',\n    width: 2, height: 2,\n    nozoom: true,\n    format: format.RGBA8,\n    data: new Uint8Array([255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255])\n  });\n\n  load({\n    name: 'invisible',\n    width: 2, height: 2,\n    nozoom: true,\n    format: format.RGBA8,\n    data: new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])\n  });\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst glov_engine = require('./engine.js');\n\nconst sprites = require('./sprites.js');\nconst shaders = require('./shaders.js');\nconst textures = require('./textures.js');\nconst glov_ui = require('./ui.js');\n\nconst { easeOut } = require('../../common/util.js');\nconst { unit_vec, vec4 } = require('./vmath.js');\nconst { floor, min, pow, random } = Math;\n\nlet transitions = [];\n\nexport const IMMEDIATE = 'immediate';\n\nexport const REMOVE = 'remove';\nexport const CONTINUE = 'continue';\n\nconst shader_data = {\n  transition_pixelate: {\n    fp: '#pragma WebGL2\\n\\nprecision lowp float;\\n\\nvarying highp vec2 interp_texcoord;\\n\\nuniform sampler2D tex0;\\nuniform vec4 param0;\\nuniform vec4 param1;\\n\\nvoid main(void)\\n{\\n  vec2 interp_uvs = interp_texcoord;\\n  // TODO: for best look, should generate an appropriate mipmap and sample from that/just render it w/ nearest neighbor\\n  // result = texture2D(tex0, min(floor(interp_uvs.xy * param0.xy + 0.5) * param0.zw - param1.xy, param1.zw) );\\n\\n  // Unlike ARBfp version, shift RGB channels separately (3x slowdown)\\n  vec4 texture0r = texture2D(tex0, min(floor(interp_uvs.xy * param0.xy + vec2(0.58, 0.5)) * param0.zw - param1.xy, param1.zw) );\\n  vec4 texture0g = texture2D(tex0, min(floor(interp_uvs.xy * param0.xy + vec2(0.5, 0.48)) * param0.zw - param1.xy, param1.zw) );\\n  vec4 texture0b = texture2D(tex0, min(floor(interp_uvs.xy * param0.xy + vec2(0.42, 0.5)) * param0.zw - param1.xy, param1.zw) );\\n  gl_FragColor = vec4(texture0r.r, texture0g.g, texture0b.b, 1);\\n}\\n'\n  }\n};\n\nfunction getShader(key) {\n  let elem = shader_data[key];\n  if (!elem.shader) {\n    elem.shader = shaders.create(gl.FRAGMENT_SHADER, key, elem.fp);\n  }\n  return elem.shader;\n}\n\nclass GlovTransition {\n  constructor(z, func) {\n    this.z = z;\n    this.capture = null;\n    this.func = func;\n    this.accum_time = 0;\n  }\n}\n\nfunction transitionCapture(trans) {\n  assert(!trans.capture);\n  trans.capture = textures.createForCapture();\n  glov_engine.captureFramebuffer(trans.capture);\n}\n\nexport function queue(z, fn) {\n  let immediate = false;\n  if (z === IMMEDIATE) {\n    immediate = true;\n    z = Z.TRANSITION_FINAL;\n  }\n\n  for (let ii = 0; ii < transitions.length; ++ii) {\n    let trans = transitions[ii];\n    if (trans.z === z) {\n      // same Z\n      assert(trans.capture);\n      if (!trans.capture) {\n        // two transitions at the same Z on one frame!  ignore second\n        return false;\n      }\n    }\n  }\n  let trans = new GlovTransition(z, fn);\n  transitions.push(trans);\n\n  if (immediate) {\n    transitionCapture(trans);\n  }\n  return true;\n}\n\nfunction destroyTexture(tex) {\n  tex.destroy();\n}\n\nexport function render(dt) {\n  dt = min(dt, 100); // debug: clamp frame times\n  for (let trans_idx = 0; trans_idx < transitions.length; ++trans_idx) {\n    let trans = transitions[trans_idx];\n    trans.accum_time += dt;\n    if (!trans.capture) {\n      // queue up a capture past the specified Z, so transitions rendering at that Z (plus a handful) get captured\n      sprites.queuefn(trans.z + Z.TRANSITION_RANGE, transitionCapture.bind(null, trans));\n    } else if (trans.capture) {\n      // call the function and give them the Z\n      // If not the last one, want it to end now!\n      let force_end = trans_idx < transitions.length - 1;\n      let ret = trans.func(trans.z, trans.capture, trans.accum_time, force_end);\n      if (ret === REMOVE) {\n        setTimeout(destroyTexture.bind(null, trans.capture), 0);\n        transitions.splice(trans_idx, 1);\n        trans_idx--;\n      }\n    }\n  }\n}\n\nexport function active() {\n  return transitions.length;\n}\n\nfunction glovTransitionFadeFunc(fade_time, z, initial, ms_since_start, force_end) {\n  let progress = min(ms_since_start / fade_time, 1);\n  let alpha = 1 - easeOut(progress, 2);\n  let color = vec4(1, 1, 1, alpha);\n  camera2d.setNormalized();\n  sprites.queueraw4([initial], 0, 0, 0, 1, 1, 1, 1, 0, z, 0, 1, 1, 0, color);\n\n  if (force_end || progress === 1) {\n    return REMOVE;\n  }\n  return CONTINUE;\n}\n\n/*\n  // Doesn't work because we need more than just 2 UV values in the queue call\nfunction glovTransitionWipeFunc(wipe_time, wipe_angle, z, tex, ms_since_start, force_end) {\n  let progress = min(ms_since_start / wipe_time, 1);\n\n  camera2d.setNormalized();\n\n  let uvs = [[0,1], [1,0]];\n\n  let points = [{}, {}, {}, {}];\n  for (let ii = 0; ii < 4; ii++) {\n    let x = (ii === 1 || ii === 2) ? 1 : 0;\n    let y = (ii >= 2) ? 1 : 0;\n    points[ii].x = x;\n    points[ii].y = y;\n  }\n\n  while (wipe_angle > PI) {\n    wipe_angle -= (2 * PI);\n  }\n  while (wipe_angle < -PI) {\n    wipe_angle += (2 * PI);\n  }\n\n  // TODO: if anyone ever uses this, change 0 degrees to be up, not right, to match other things?\n  if (wipe_angle >= -PI_4 && wipe_angle <= PI_4) {\n    // horizontal wipe from left to right\n    let x0 = progress * 2; // rightmost x\n    let x1 = x0 - sin(abs(wipe_angle)) / SQRT1_2; // leftmost x\n    if (wipe_angle < 0) {\n      points[0].x = x1;\n      points[3].x = x0;\n    } else {\n      points[0].x = x0;\n      points[3].x = x1;\n    }\n    points[1].x = points[2].x = 2;\n  } else if (wipe_angle >= PI_2 + PI_4 || wipe_angle <= -PI_2 - PI_4) {\n    // horizontal wipe from right to left\n    let x0 = 1 - progress * 2; // leftmost x\n    let x1 = x0 + sin(abs(wipe_angle)) / SQRT1_2; // rightmost x,\n    if (wipe_angle < 0) {\n      points[1].x = x1;\n      points[2].x = x0;\n    } else {\n      points[1].x = x0;\n      points[2].x = x1;\n    }\n    points[0].x = points[3].x = -1;\n  } else if (wipe_angle > PI_4 && wipe_angle <= PI_2 + PI_4) {\n    // vertical wipe, top to bottom\n    let y0 = progress * 2; // bottommost y\n    let offs = cos(wipe_angle) / SQRT1_2;\n    let y1 = y0 - abs(offs); // topmost y,\n    if (offs > 0) {\n      points[0].y = y0;\n      points[1].y = y1;\n    } else {\n      points[0].y = y1;\n      points[1].y = y0;\n    }\n    points[2].y = points[3].y = 2;\n  } else {\n    // vertical wipe, bottom to top\n    let y0 = 1 - progress * 2; // topmost y\n    let offs = cos(wipe_angle) / SQRT1_2;\n    let y1 = y0 + abs(offs); // bottommost y,\n    if (offs > 0) {\n      points[2].y = y1;\n      points[3].y = y0;\n    } else {\n      points[2].y = y0;\n      points[3].y = y1;\n    }\n    points[0].y = points[1].y = -1;\n  }\n  // interp UVs based on points\n  points[0].u = lerp(points[0].x, uvs[0][0], uvs[1][0]);\n  points[1].u = lerp(points[1].x, uvs[0][0], uvs[1][0]);\n  points[2].u = lerp(points[2].x, uvs[0][0], uvs[1][0]);\n  points[3].u = lerp(points[3].x, uvs[0][0], uvs[1][0]);\n  points[0].v = lerp(points[0].y, uvs[0][1], uvs[1][1]);\n  points[1].v = lerp(points[1].y, uvs[0][1], uvs[1][1]);\n  points[2].v = lerp(points[2].y, uvs[0][1], uvs[1][1]);\n  points[3].v = lerp(points[3].y, uvs[0][1], uvs[1][1]);\n\n  sprites.queueraw4([tex],\n    points[0].x, points[0].y, points[3].x, points[3].y,\n    points[2].x, points[2].y, points[1].x, points[1].y,\n    z,\n    points[0].u, points[0].v, points[2].u, points[2].v,\n    unit_vec, 'alpha_nearest');\n\n  if (force_end || progress === 1) {\n    return REMOVE;\n  }\n  return CONTINUE;\n}\n\n*/\n\nfunction glovTransitionSplitScreenFunc(time, border_width, slide_window, z, tex, ms_since_start, force_end) {\n  let border_color = vec4(1, 1, 1, 1);\n  let progress = easeOut(min(ms_since_start / time, 1), 2);\n  camera2d.setNormalized();\n\n  let uvs = [[0, 1], [1, 0]];\n\n  let xoffs = progress;\n  let v_half = uvs[0][1] + (uvs[1][1] - uvs[0][1]) / 2;\n  if (slide_window) {\n    // slide window\n    sprites.queueraw([tex], 0, 0, z, 1 - xoffs, 1 / 2, 0, uvs[0][1], uvs[1][0] * (1 - progress), v_half, unit_vec);\n    sprites.queueraw([tex], 0 + xoffs, 1 / 2, z, 1 - xoffs, 1 / 2, uvs[1][0] * progress, v_half, uvs[1][0], uvs[1][1], unit_vec);\n  } else {\n    // slide image\n    sprites.queueraw([tex], 0 - xoffs, 0, z, 1, 1 / 2, uvs[0][0], uvs[0][1], uvs[1][0], v_half, unit_vec);\n    sprites.queueraw([tex], 0 + xoffs, 1 / 2, z, 1, 1 / 2, uvs[0][0], v_half, uvs[1][0], uvs[1][1], unit_vec);\n  }\n  let border_grow_progress = min(progress * 4, 1);\n  border_color[3] = border_grow_progress;\n  border_width *= border_grow_progress;\n  // TODO: Would look better if the horizontal border grew from the middle out, so the overlapping bit is identical\n  // on both sides\n  glov_ui.drawRect(0, 0.5 - border_width, 1 - xoffs, 0.5, z + 1, border_color);\n  glov_ui.drawRect(1 - xoffs - border_width, 0, 1 - xoffs, 0.5, z + 1, border_color);\n  glov_ui.drawRect(xoffs, 0.5, 1, 0.5 + border_width, z + 1, border_color);\n  glov_ui.drawRect(xoffs, 0.5, xoffs + border_width, 1, z + 1, border_color);\n\n  if (force_end || progress === 1) {\n    return REMOVE;\n  }\n  return CONTINUE;\n}\n\nconst render_scale = 1;\nlet transition_pixelate_texture;\n\nfunction transitionPixelateCapture() {\n  if (!transition_pixelate_texture) {\n    transition_pixelate_texture = textures.createForCapture();\n  }\n  glov_engine.captureFramebuffer(transition_pixelate_texture);\n}\n\nfunction glovTransitionPixelateFunc(time, z, tex, ms_since_start, force_end) {\n  //ms_since_start %= time;\n  //let viewport = glov_engine.graphics_device.getViewport();\n  //let gd_width = viewport[2];\n  let gd_width = glov_engine.width;\n  let progress = min(ms_since_start / time, 1);\n  camera2d.setNormalized();\n\n  if (progress > 0.5) {\n    sprites.queuefn(z, transitionPixelateCapture);\n    if (transition_pixelate_texture) {\n      tex = transition_pixelate_texture;\n    }\n  }\n\n  let partial_progress = (progress > 0.5 ? 1 - progress : progress) * 2;\n  // Use power of two scalings, but then scale relative to a 1024px virtual screen, so the biggest\n  //  pixel is about the same percentage of the screen regardless of resolution.\n  let pixel_scale = pow(2, floor(partial_progress * 8.9)) / 1024 * gd_width * render_scale;\n\n  let param0 = vec4(tex.width / pixel_scale, tex.height / pixel_scale, pixel_scale / tex.width, pixel_scale / tex.height);\n  let param1 = vec4(0.5 / tex.width, 0.5 / tex.height, (tex.texSizeX - 1) / tex.width, (tex.texSizeY - 1) / tex.height);\n\n  sprites.queueraw([tex], 0, 0, z + 1, 1, 1, 0, 1, 1, 0, unit_vec, getShader('transition_pixelate'), {\n    param0,\n    param1\n  });\n\n  if (force_end || progress === 1) {\n    if (transition_pixelate_texture) {\n      setTimeout(destroyTexture.bind(null, transition_pixelate_texture), 0);\n    }\n    transition_pixelate_texture = null;\n    return REMOVE;\n  }\n  return CONTINUE;\n}\n\nexport function fade(fade_time) {\n  return glovTransitionFadeFunc.bind(null, fade_time);\n}\n\n// export function wipe(wipe_time, wipe_angle) {\n//   return glovTransitionWipeFunc.bind(null, wipe_time, wipe_angle);\n// }\n\n// border_width in camera-relative size\nexport function splitScreen(time, border_width, slide_window) {\n  border_width /= camera2d.w(); // convert to normalized units\n  return glovTransitionSplitScreenFunc.bind(null, time, border_width, slide_window);\n}\n\nexport function pixelate(fade_time) {\n  return glovTransitionPixelateFunc.bind(null, fade_time);\n}\n\n// export function logoZoom(time, logo) {\n//   return glovTransitionLogoZoomFunc.bind(null, time, logo);\n// }\n\nexport function randomTransition(fade_time_scale) {\n  fade_time_scale = fade_time_scale || 1;\n  let idx = floor(random() * 3);\n  switch (idx) {\n    case 0:\n      return fade(500 * fade_time_scale);\n    case 1:\n      return splitScreen(250 * fade_time_scale, 2, false);\n    case 2:\n      return pixelate(750 * fade_time_scale);\n    // case 3:\n    //   return wipe(250 * fade_time_scale, random() * 2 * PI);\n    // case 4:\n    //   if (!logo) {\n    //     GlovTextureLoadOptions options;\n    //     options.clamp_s = options.clamp_t = true;\n    //     logo = GlovTextures::loadtex(\"data/SampleLogoTransition.png\", &options);\n    //   }\n    //   glovTransitionQueue(Z_TRANSITION_FINAL, glovTransitionLogoZoom(500, logo));\n    //   break;\n    default:\n      assert(0);\n  }\n  return null;\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint no-underscore-dangle:off */\n\nwindow.Z = window.Z || {};\nZ.BORDERS = Z.BORDERS || 90;\nZ.UI = Z.UI || 100;\nZ.MODAL = Z.MODAL || 1000;\nZ.TOOLTIP = Z.TOOLTIP || 2000;\nZ.DEBUG = Z.DEBUG || 9800;\n\n// very high, but can still add integers\nZ.TRANSITION_FINAL = Z.TRANSITION_FINAL || 9900;\n// how much Z range can be used for rendering transitions - the capture happens at z + Z_TRANSITION_RANGE\nZ.TRANSITION_RANGE = Z.TRANSITION_RANGE || 10;\n\nZ.FPSMETER = Z.FPSMETER || 10000;\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst glov_edit_box = require('./edit_box.js');\nconst effects = require('./effects.js');\nconst glov_engine = require('./engine.js');\nconst glov_font = require('./font.js');\nconst glov_input = require('./input.js');\nconst { linkTick } = require('./link.js');\nconst { abs, max, min, round, sqrt } = Math;\nconst { soundLoad, soundPlay } = require('./sound.js');\nconst glov_sprites = require('./sprites.js');\nconst textures = require('./textures.js');\nconst { clamp, clone, lerp, merge } = require('../../common/util.js');\nconst { mat43, m43identity, m43mul } = require('./mat43.js');\nconst { vec2, vec4, v4scale } = require('./vmath.js');\n\nconst MODAL_DARKEN = 0.75;\nlet KEYS;\nlet PAD;\n\nconst menu_fade_params_default = {\n  blur: [0.125, 0.865],\n  saturation: [0.5, 0.1],\n  brightness: [1, 1 - MODAL_DARKEN],\n  fallback_darken: vec4(0, 0, 0, MODAL_DARKEN),\n  z: Z.MODAL\n};\n\nexport function focuslog(...args) {\n  // console.log(`focuslog(${glov_engine.global_frame_index}): `, ...args);\n}\n\nexport function makeColorSet(color) {\n  let ret = {\n    regular: vec4(),\n    rollover: vec4(),\n    down: vec4(),\n    disabled: vec4()\n  };\n  v4scale(ret.regular, color, 1);\n  v4scale(ret.rollover, color, 0.8); // because we do not have specific graphics\n  v4scale(ret.down, color, 0.7);\n  v4scale(ret.disabled, color, 0.4);\n  for (let field in ret) {\n    ret[field][3] = color[3];\n  }\n  return ret;\n}\n\nfunction doBlurEffect(factor, params) {\n  factor = lerp(factor, params.blur[0], params.blur[1]);\n  if (factor) {\n    effects.applyGaussianBlur({\n      source: glov_engine.captureFramebuffer(),\n      blur: factor\n      // min_size: 128,\n    });\n  }\n}\n\nlet desaturate_xform = mat43();\nlet desaturate_tmp = mat43();\nfunction doDesaturateEffect(factor, params) {\n  let saturation = lerp(factor, params.saturation[0], params.saturation[1]);\n  let brightness = lerp(factor, params.brightness[0], params.brightness[1]);\n  if (saturation === 1 && brightness === 1) {\n    return;\n  }\n  m43identity(desaturate_xform);\n\n  effects.saturationMatrix(desaturate_tmp, saturation);\n  m43mul(desaturate_xform, desaturate_xform, desaturate_tmp);\n\n  effects.brightnessScaleMatrix(desaturate_tmp, brightness);\n  m43mul(desaturate_xform, desaturate_xform, desaturate_tmp);\n\n  // if ((hue % (Math.PI * 2)) !== 0) {\n  //   effects.hueMatrix(tmp, hue);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (contrast !== 1) {\n  //   effects.contrastMatrix(tmp, contrast);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (brightness !== 0) {\n  //   effects.brightnessMatrix(tmp, brightness);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (additiveRGB[0] !== 0 || additiveRGB[1] !== 0 || additiveRGB[2] !== 0) {\n  //   effects.additiveMatrix(tmp, additiveRGB);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (grayscale) {\n  //   effects.grayScaleMatrix(tmp);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (negative) {\n  //   effects.negativeMatrix(tmp);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (sepia) {\n  //   effects.sepiaMatrix(tmp);\n  //   m43mul(xform, xform, tmp);\n  // }\n  effects.applyColorMatrix({\n    colorMatrix: desaturate_xform,\n    source: glov_engine.captureFramebuffer()\n  });\n}\n\n// overrideable default parameters\nexport let button_height = 32;\nexport let font_height = 24;\nexport let button_width = 200;\nexport let modal_button_width = 100;\nexport let button_img_size = button_height;\nexport let modal_width = 600;\nexport let modal_y0 = 200;\nexport let modal_title_scale = 1.2;\nexport let modal_pad = 16;\nexport let panel_pixel_scale = 32 / 13; // button_height / button pixel resolution\nexport let tooltip_panel_pixel_scale = panel_pixel_scale;\nexport let tooltip_width = 400;\nexport let tooltip_pad = 8;\n\nexport let font_style_focused = glov_font.style(null, {\n  color: 0x000000ff,\n  outline_width: 2,\n  outline_color: 0xFFFFFFff\n});\nexport let font_style_normal = glov_font.styleColored(null, 0x000000ff);\n\nexport let font;\nexport let sprites = {};\n\nexport let color_button = makeColorSet([1, 1, 1, 1]);\nexport let color_panel = vec4(1, 1, 0.75, 1);\nexport let modal_font_style = glov_font.styleColored(null, 0x000000ff);\n\nlet sounds = {};\nexport let button_mouseover = false; // for callers to poll the very last button\nexport let button_focused = false; // for callers to poll the very last button\nexport let button_click = null; // on click, for callers to poll which mouse button, etc\nexport let touch_changed_focus = false; // did a touch even this frame change focus?\n// For tracking global mouseover state\nlet last_frame_button_mouseover = false;\nlet frame_button_mouseover = false;\n\nlet modal_dialog = null;\nlet modal_stealing_focus = false;\nexport let menu_up = false; // Boolean to be set by app to impact behavior, similar to a modal\nlet menu_fade_params = merge({}, menu_fade_params_default);\nlet menu_up_time = 0;\n\nexports.this_frame_edit_boxes = [];\nlet last_frame_edit_boxes = [];\nlet dom_elems = [];\nlet dom_elems_issued = 0;\n\n// for modal dialogs\nlet button_keys;\n\nlet focused_last_frame;\nlet focused_this_frame;\nlet focused_key_not;\nlet focused_key;\nlet focused_key_prev1;\nlet focused_key_prev2;\n\nlet pad_focus_left;\nlet pad_focus_right;\n\nexport function loadUISprite(name, ws, hs, overrides, only_override) {\n  let override = overrides && overrides[name];\n  if (override === null) {\n    // skip it, assume not used\n  } else if (override) {\n    sprites[name] = glov_sprites.create({\n      name: override[0],\n      ws: override[1],\n      hs: override[2]\n    });\n  } else if (!only_override) {\n    sprites[name] = glov_sprites.create({\n      name: `ui/${name}`,\n      ws,\n      hs\n    });\n  }\n}\n\nexport function startup(param) {\n  font = param.font;\n  let overrides = param.ui_sprites;\n  KEYS = glov_input.KEYS;\n  PAD = glov_input.PAD;\n  if (param.pad_focus_dpad) {\n    pad_focus_left = PAD.LEFT;\n    pad_focus_right = PAD.RIGHT;\n  } else {\n    pad_focus_left = PAD.LEFT_BUMPER;\n    pad_focus_right = PAD.RIGHT_BUMPER;\n  }\n\n  loadUISprite('button', [4, 5, 4], [13], overrides);\n  sprites.button_regular = sprites.button;\n  loadUISprite('button_rollover', [4, 5, 4], [13], overrides, true);\n  loadUISprite('button_down', [4, 5, 4], [13], overrides);\n  loadUISprite('button_disabled', [4, 5, 4], [13], overrides);\n  loadUISprite('panel', [3, 2, 3], [3, 10, 3], overrides);\n  loadUISprite('menu_entry', [4, 5, 4], [13], overrides);\n  loadUISprite('menu_selected', [4, 5, 4], [13], overrides);\n  loadUISprite('menu_down', [4, 5, 4], [13], overrides);\n  loadUISprite('menu_header', [4, 5, 12], [13], overrides);\n  loadUISprite('slider', [6, 2, 6], [13], overrides);\n  // loadUISprite('slider_notch', [3], [13], overrides);\n  loadUISprite('slider_handle', [9], [13], overrides);\n\n  sprites.white = glov_sprites.create({ url: 'white' });\n\n  button_keys = {\n    ok: { key: [KEYS.O], pad: [PAD.X] },\n    cancel: { key: [KEYS.ESC], pad: [PAD.B, PAD.Y] }\n  };\n  button_keys.yes = clone(button_keys.ok);\n  button_keys.yes.key.push(KEYS.Y);\n  button_keys.no = clone(button_keys.cancel);\n  button_keys.no.key.push(KEYS.N);\n}\n\nlet dynamic_text_elem;\nexport function getElem(allow_modal, last_elem) {\n  if (modal_dialog && !allow_modal) {\n    return null;\n  }\n  if (dom_elems_issued >= dom_elems.length || !last_elem) {\n    let elem = document.createElement('div');\n    elem.setAttribute('class', 'glovui_dynamic');\n    if (!dynamic_text_elem) {\n      dynamic_text_elem = document.getElementById('dynamic_text');\n    }\n    dynamic_text_elem.appendChild(elem);\n    dom_elems.push(elem);\n    last_elem = elem;\n  }\n  if (dom_elems[dom_elems_issued] !== last_elem) {\n    for (let ii = dom_elems_issued + 1; ii < dom_elems.length; ++ii) {\n      if (dom_elems[ii] === last_elem) {\n        dom_elems[ii] = dom_elems[dom_elems_issued];\n        dom_elems[dom_elems_issued] = last_elem;\n      }\n    }\n  }\n  let elem = dom_elems[dom_elems_issued];\n  dom_elems_issued++;\n  return elem;\n}\n\nexport function bindSounds(_sounds) {\n  sounds = _sounds;\n  for (let key in sounds) {\n    soundLoad(sounds[key]);\n  }\n}\n\nexport function drawHBox(coords, s, color) {\n  let uidata = s.uidata;\n  let ws = [uidata.wh[0] * coords.h, 0, uidata.wh[2] * coords.h];\n  let x = coords.x;\n  ws[1] = max(0, coords.w - ws[0] - ws[2]);\n  for (let ii = 0; ii < ws.length; ++ii) {\n    let my_w = ws[ii];\n    s.draw({\n      x,\n      y: coords.y,\n      z: coords.z,\n      color,\n      w: my_w,\n      h: coords.h,\n      uvs: uidata.rects[ii]\n      // nozoom: true, // nozoom since different parts of the box get zoomed differently\n    });\n    x += my_w;\n  }\n}\n\nexport function drawVBox(coords, s, color) {\n  let uidata = s.uidata;\n  let hs = [uidata.hw[0] * coords.w, 0, uidata.hw[2] * coords.w];\n  let y = coords.y;\n  hs[1] = max(0, coords.h - hs[0] - hs[2]);\n  for (let ii = 0; ii < hs.length; ++ii) {\n    let my_h = hs[ii];\n    s.draw({\n      x: coords.x,\n      y,\n      z: coords.z,\n      color,\n      w: coords.w,\n      h: my_h,\n      uvs: uidata.rects[ii]\n      // nozoom: true, // nozoom since different parts of the box get zoomed differently\n    });\n    y += my_h;\n  }\n}\n\nexport function drawBox(coords, s, pixel_scale, color) {\n  let uidata = s.uidata;\n  let scale = pixel_scale;\n  let ws = [uidata.widths[0] * scale, 0, uidata.widths[2] * scale];\n  ws[1] = max(0, coords.w - ws[0] - ws[2]);\n  let hs = [uidata.heights[0] * scale, 0, uidata.heights[2] * scale];\n  hs[1] = max(0, coords.h - hs[0] - hs[2]);\n  let x = coords.x;\n  for (let ii = 0; ii < ws.length; ++ii) {\n    let my_w = ws[ii];\n    if (my_w) {\n      let y = coords.y;\n      for (let jj = 0; jj < hs.length; ++jj) {\n        let my_h = hs[jj];\n        if (my_h) {\n          s.draw({\n            x, y, z: coords.z,\n            color,\n            w: my_w,\n            h: my_h,\n            uvs: uidata.rects[jj * 3 + ii],\n            nozoom: true // nozoom since different parts of the box get zoomed differently\n          });\n          y += my_h;\n        }\n      }\n      x += my_w;\n    }\n  }\n}\n\nexport function playUISound(name, volume) {\n  if (name === 'select') {\n    name = 'button_click';\n  }\n  if (sounds[name]) {\n    soundPlay(sounds[name], volume);\n  }\n}\n\nexport function setMouseOver(key, quiet) {\n  if (last_frame_button_mouseover !== key && frame_button_mouseover !== key && !quiet) {\n    playUISound('rollover');\n  }\n  frame_button_mouseover = key;\n  button_mouseover = true;\n}\n\nexport function focusSteal(key) {\n  if (key !== focused_key) {\n    focuslog('focusSteal ', key);\n  }\n  focused_this_frame = true;\n  focused_key = key;\n}\n\nexport function focusCanvas() {\n  focusSteal('canvas');\n}\n\nexport function isFocusedPeek(key) {\n  return focused_key === key;\n}\nexport function isFocused(key) {\n  if (key !== focused_key_prev2) {\n    focused_key_prev1 = focused_key_prev2;\n    focused_key_prev2 = key;\n  }\n  if (key === focused_key || key !== focused_key_not && !focused_this_frame && !focused_last_frame) {\n    if (key !== focused_key) {\n      focuslog('isFocused->focusSteal');\n    }\n    focusSteal(key);\n    return true;\n  }\n  return false;\n}\n\nexport function focusNext(key) {\n  focuslog('focusNext ', key);\n  playUISound('rollover');\n  focused_key = null;\n  focused_last_frame = focused_this_frame = false;\n  focused_key_not = key;\n  // Eat input events so a pair of keys (e.g. SDLK_DOWN and SDLK_CONTROLLER_DOWN)\n  // don't get consumed by two separate widgets\n  glov_input.eatAllInput();\n}\n\nexport function focusPrev(key) {\n  focuslog('focusPrev ', key);\n  playUISound('rollover');\n  if (key === focused_key_prev2) {\n    focusSteal(focused_key_prev1);\n  } else {\n    focusSteal(focused_key_prev2);\n  }\n  glov_input.eatAllInput();\n}\n\nexport function focusCheck(key) {\n  if (modal_stealing_focus) {\n    // hidden by modal, etc\n    return false;\n  }\n  // Returns true even if focusing previous element, since for this frame, we are still effectively focused!\n  let focused = isFocused(key);\n  if (focused) {\n    if (glov_input.keyDownEdge(KEYS.TAB)) {\n      if (glov_input.keyDown(KEYS.SHIFT)) {\n        focusPrev(key);\n      } else {\n        focusNext(key);\n        focused = false;\n      }\n    }\n    if (glov_input.padButtonDownEdge(pad_focus_right)) {\n      focusNext(key);\n      focused = false;\n    }\n    if (glov_input.padButtonDownEdge(pad_focus_left)) {\n      focusPrev(key);\n    }\n  }\n  return focused;\n}\n\nexport function panel(param) {\n  assert(typeof param.x === 'number');\n  assert(typeof param.y === 'number');\n  assert(typeof param.w === 'number');\n  assert(typeof param.h === 'number');\n  param.z = param.z || Z.UI - 1;\n  let color = param.color || color_panel;\n  drawBox(param, sprites.panel, param.pixel_scale || panel_pixel_scale, color);\n  glov_input.click(param);\n  glov_input.mouseOver(param);\n}\n\nexport function drawTooltip(param) {\n  assert(typeof param.x === 'number');\n  assert(typeof param.y === 'number');\n  assert(typeof param.tooltip === 'string');\n\n  let tooltip_w = param.tooltip_width || tooltip_width;\n  let x = param.x;\n  if (x + tooltip_w > camera2d.x1()) {\n    x = camera2d.x1() - tooltip_w;\n  }\n  let z = param.z || Z.TOOLTIP;\n  let tooltip_y0 = param.y;\n  let eff_tooltip_pad = param.tooltip_pad || tooltip_pad;\n  let w = tooltip_w - eff_tooltip_pad * 2;\n  if (param.tooltip_above) {\n    tooltip_y0 -= font_height * font.numLines(modal_font_style, w, 0, font_height, param.tooltip) + eff_tooltip_pad * 2;\n  }\n  let y = tooltip_y0 + eff_tooltip_pad;\n  y += font.drawSizedWrapped(modal_font_style, x + eff_tooltip_pad, y, z + 1, w, 0, font_height, param.tooltip);\n  y += eff_tooltip_pad;\n  let pixel_scale = param.pixel_scale || tooltip_panel_pixel_scale;\n\n  panel({\n    x,\n    y: tooltip_y0,\n    z,\n    w: tooltip_w,\n    h: y - tooltip_y0,\n    pixel_scale\n  });\n}\n\n// eslint-disable-next-line complexity\nexport function buttonShared(param) {\n  let state = 'regular';\n  let ret = false;\n  if (param.draw_only) {\n    return { ret, state };\n  }\n  let key = param.key || `${param.x}_${param.y}`;\n  let rollover_quiet = param.rollover_quiet;\n  let focused = !param.disabled && !param.no_focus && focusCheck(key);\n  let key_opts = param.in_event_cb ? { in_event_cb: param.in_event_cb } : null;\n  button_mouseover = false;\n  if (param.disabled) {\n    glov_input.mouseOver(param); // Still eat mouse events\n    state = 'disabled';\n  } else if (param.drag_target && (ret = glov_input.dragDrop(param))) {\n    console.log('dragDrop');\n    if (!param.no_touch_mouseover || !glov_input.mousePosIsTouch()) {\n      setMouseOver(key, rollover_quiet);\n    }\n    if (!param.no_focus) {\n      focusSteal(key);\n      focused = true;\n    }\n  } else if ((button_click = glov_input.click(param)) || param.long_press && (button_click = glov_input.longPress(param))) {\n    if (!param.no_touch_mouseover || !glov_input.mousePosIsTouch()) {\n      setMouseOver(key, rollover_quiet);\n    }\n    if (param.touch_twice && glov_input.mousePosIsTouch() && !focused) {\n      // Just focus, show tooltip\n      touch_changed_focus = true;\n    } else {\n      ret = true;\n    }\n    if (!param.no_focus) {\n      focusSteal(key);\n      focused = true;\n    }\n  } else if (param.drag_target && glov_input.dragOver(param)) {\n    // Set this even if param.no_touch_mouse_over is set\n    setMouseOver(key, rollover_quiet);\n    state = glov_input.mouseDown() ? 'down' : 'rollover';\n  } else if (param.drag_over && glov_input.dragOver(param)) {\n    // do nothing\n  } else if (glov_input.mouseOver(param)) {\n    if (param.no_touch_mouseover && glov_input.mousePosIsTouch()) {\n      // do not set mouseover\n    } else if (param.touch_twice && !focused && glov_input.mousePosIsTouch()) {\n      // do not set mouseover\n    } else {\n      setMouseOver(key, rollover_quiet);\n      state = glov_input.mouseDown() ? 'down' : 'rollover';\n    }\n  }\n  button_focused = focused;\n  if (focused) {\n    if (glov_input.keyDownEdge(KEYS.SPACE, key_opts) || glov_input.keyDownEdge(KEYS.RETURN, key_opts) || glov_input.padButtonDownEdge(PAD.A)) {\n      ret = true;\n    }\n  }\n  if (ret) {\n    state = 'down';\n    playUISound('button_click');\n  }\n  if (button_mouseover && param.tooltip) {\n    drawTooltip({\n      x: param.x,\n      y: param.tooltip_above ? param.y - 2 : param.y + param.h + 2,\n      tooltip_above: param.tooltip_above,\n      tooltip: param.tooltip,\n      tooltip_width: param.tooltip_width\n    });\n  }\n  param.z += param.z_bias && param.z_bias[state] || 0;\n  return { ret, state, focused };\n}\n\nexport let button_last_color;\nexport function buttonTextDraw(param, state, focused) {\n  let colors = param.colors || color_button;\n  let color = button_last_color = colors[state];\n  let base_name = param.base_name || 'button';\n  let sprite_name = `${base_name}_${state}`;\n  let sprite = sprites[sprite_name];\n  // Note: was if (sprite) color = colors.regular for specific-sprite matches\n  if (!sprite) {\n    sprite = sprites[base_name];\n  }\n\n  drawHBox(param, sprite, color);\n  let hpad = min(param.font_height * 0.25, param.w * 0.1);\n  font.drawSizedAligned(focused ? font_style_focused : font_style_normal, param.x + hpad, param.y, param.z + 0.1,\n  // eslint-disable-next-line no-bitwise\n  param.font_height, glov_font.ALIGN.HCENTERFIT | glov_font.ALIGN.VCENTER, param.w - hpad * 2, param.h, param.text);\n}\n\nexport function buttonText(param) {\n  // required params\n  assert(typeof param.x === 'number');\n  assert(typeof param.y === 'number');\n  assert(typeof param.text === 'string');\n  // optional params\n  param.z = param.z || Z.UI;\n  param.w = param.w || button_width;\n  param.h = param.h || button_height;\n  param.font_height = param.font_height || font_height;\n\n  let { ret, state, focused } = buttonShared(param);\n  buttonTextDraw(param, state, focused);\n  return ret;\n}\n\nexport function buttonImage(param) {\n  // required params\n  assert(typeof param.x === 'number');\n  assert(typeof param.y === 'number');\n  assert(param.img && param.img.draw); // should be a sprite\n  // optional params\n  param.z = param.z || Z.UI;\n  param.w = param.w || button_img_size;\n  param.h = param.h || param.w || button_img_size;\n  param.shrink = param.shrink || 0.75;\n  //param.img_rect; null -> full image\n  let uvs = param.img_rect;\n  if (typeof param.frame === 'number') {\n    uvs = param.img.uidata.rects[param.frame];\n  }\n\n  let { ret, state } = buttonShared(param);\n  let colors = param.colors || color_button;\n  let color = button_last_color = colors[state];\n  if (!param.no_bg) {\n    let base_name = param.base_name || 'button';\n    let sprite_name = `${base_name}_${state}`;\n    let sprite = sprites[sprite_name];\n    if (!sprite) {\n      sprite = sprites[base_name];\n    }\n\n    drawHBox(param, sprite, color);\n  }\n  let img_origin = param.img.origin;\n  let img_w = param.img.size[0];\n  let img_h = param.img.size[1];\n  let aspect = img_w / img_h;\n  if (typeof param.frame === 'number') {\n    aspect = param.img.uidata.aspect ? param.img.uidata.aspect[param.frame] : 1;\n  }\n  let largest_w_horiz = param.w * param.shrink;\n  let largest_w_vert = param.h * param.shrink * aspect;\n  img_w = min(largest_w_horiz, largest_w_vert);\n  img_h = img_w / aspect;\n  let pad_top = (param.h - img_h) / 2;\n  let draw_param = {\n    x: param.x + (param.left_align ? pad_top : (param.w - img_w) / 2) + img_origin[0] * img_w,\n    y: param.y + pad_top + img_origin[1] * img_h,\n    z: param.z + 0.1,\n    color: param.color1 && param.color ? param.color : color, // use explicit tint if doing dual-tinting\n    color1: param.color1,\n    w: img_w / param.img.size[0],\n    h: img_h / param.img.size[1],\n    uvs,\n    rot: param.rotation\n  };\n  if (param.flip) {\n    let { x, w } = draw_param;\n    draw_param.x = x + w;\n    draw_param.w = -w;\n  }\n  if (param.color1) {\n    param.img.drawDualTint(draw_param);\n  } else {\n    param.img.draw(draw_param);\n  }\n  return ret;\n}\n\nexport function print(style, x, y, z, text) {\n  return font.drawSized(style, x, y, z, font_height, text);\n}\n\n// Note: modal dialogs not really compatible with HTML overlay on top of the canvas!\nexport function modalDialog(param) {\n  assert(!param.title || typeof param.title === 'string');\n  assert(!param.text || typeof param.text === 'string');\n  assert(typeof param.buttons === 'object');\n  assert(Object.keys(param.buttons).length);\n\n  modal_dialog = param;\n}\n\nexport function modalDialogClear() {\n  modal_dialog = null;\n}\n\nlet dom_requirement = vec2(24, 24);\nlet virtual_size = vec2();\nfunction modalDialogRun() {\n  camera2d.domDeltaToVirtual(virtual_size, dom_requirement);\n  let fullscreen_mode = false;\n  let eff_font_height = modal_dialog.font_height || font_height;\n  let eff_button_height = button_height;\n  let pad = modal_pad;\n  let vpad = modal_pad * 0.5;\n  let general_scale = 1;\n  if (virtual_size[0] > 0.1 * camera2d.h() && camera2d.w() > camera2d.h() * 2) {\n    // If a 24-pt font is more than 10% of the camera height, we're probably super-wide-screen\n    // on a mobile device due to keyboard being visible\n    fullscreen_mode = true;\n    eff_button_height = eff_font_height;\n    vpad = pad = 4;\n\n    let old_h = camera2d.h();\n    camera2d.push();\n    camera2d.setAspectFixed2(1, eff_font_height * (modal_title_scale + 2) + pad * 4.5);\n    general_scale = camera2d.h() / old_h;\n  }\n\n  let { buttons, click_anywhere } = modal_dialog;\n  let keys = Object.keys(buttons);\n\n  const game_width = camera2d.x1() - camera2d.x0();\n  const eff_modal_width = fullscreen_mode ? game_width : modal_dialog.width || modal_width;\n  let eff_button_width = modal_dialog.button_width || modal_button_width;\n  let max_total_button_width = eff_modal_width * 2 / 3;\n  eff_button_width = min(eff_button_width, max_total_button_width / keys.length);\n  const text_w = eff_modal_width - pad * 2;\n  const x0 = camera2d.x0() + round((game_width - eff_modal_width) / 2);\n  let x = x0 + pad;\n  const y0 = fullscreen_mode ? 0 : modal_dialog.y0 || modal_y0;\n  let y = y0 + pad;\n\n  if (glov_input.pointerLocked()) {\n    glov_input.pointerLockExit();\n  }\n\n  if (modal_dialog.title) {\n    if (fullscreen_mode) {\n      font.drawSizedAligned(modal_font_style, x, y, Z.MODAL, eff_font_height * modal_title_scale, glov_font.ALIGN.HFIT, text_w, 0, modal_dialog.title);\n      y += eff_font_height * modal_title_scale;\n    } else {\n      y += font.drawSizedWrapped(modal_font_style, x, y, Z.MODAL, text_w, 0, eff_font_height * modal_title_scale, modal_dialog.title);\n    }\n    y += round(vpad * 1.5);\n  }\n\n  if (modal_dialog.text) {\n    if (fullscreen_mode) {\n      font.drawSizedAligned(modal_font_style, x, y, Z.MODAL, eff_font_height, glov_font.ALIGN.HFIT, text_w, 0, modal_dialog.text);\n      y += eff_font_height;\n    } else {\n      y += font.drawSizedWrapped(modal_font_style, x, y, Z.MODAL, text_w, 0, eff_font_height, modal_dialog.text);\n    }\n    y += vpad;\n  }\n\n  let tick_key;\n  if (modal_dialog.tick) {\n    let avail_width = eff_modal_width - pad * 2;\n    if (fullscreen_mode) {\n      avail_width -= (pad + eff_button_width) * keys.length;\n    }\n    let param = {\n      x, y,\n      modal_width: eff_modal_width,\n      avail_width,\n      font_height: eff_font_height,\n      fullscreen_mode\n    };\n    tick_key = modal_dialog.tick(param);\n    y = param.y;\n  }\n\n  x = x0 + eff_modal_width - (pad + eff_button_width) * keys.length;\n  for (let ii = 0; ii < keys.length; ++ii) {\n    let key = keys[ii];\n    let eff_button_keys = button_keys[key.toLowerCase()];\n    let pressed = 0;\n    if (eff_button_keys) {\n      for (let jj = 0; jj < eff_button_keys.key.length; ++jj) {\n        pressed += glov_input.keyDownEdge(eff_button_keys.key[jj]);\n        if (eff_button_keys.key[jj] === tick_key) {\n          pressed++;\n        }\n      }\n      for (let jj = 0; jj < eff_button_keys.pad.length; ++jj) {\n        pressed += glov_input.padButtonDownEdge(eff_button_keys.pad[jj]);\n      }\n    }\n    if (click_anywhere && ii === 0 && glov_input.click()) {\n      ++pressed;\n    }\n    if (pressed) {\n      playUISound('button_click');\n    }\n    if (buttonText({\n      x: x,\n      y,\n      z: Z.MODAL,\n      w: eff_button_width,\n      h: eff_button_height,\n      text: key\n    }) || pressed) {\n      modal_dialog = null;\n      if (buttons[key]) {\n        buttons[key]();\n      }\n    }\n    x += pad + eff_button_width;\n  }\n  y += eff_button_height;\n  y += vpad + pad;\n  panel({\n    x: x0,\n    y: y0,\n    z: Z.MODAL - 1,\n    w: eff_modal_width,\n    h: (fullscreen_mode ? camera2d.y1() : y) - y0,\n    pixel_scale: panel_pixel_scale * general_scale\n  });\n\n  glov_input.eatAllInput();\n  modal_stealing_focus = true;\n  if (fullscreen_mode) {\n    camera2d.pop();\n  }\n}\n\nexport function modalTextEntry(param) {\n  let eb = glov_edit_box.create({\n    allow_modal: true,\n    initial_focus: true,\n    spellcheck: false,\n    initial_select: true,\n    text: param.edit_text,\n    max_len: param.max_len\n  });\n  let buttons = {};\n  for (let key in param.buttons) {\n    let val = param.buttons[key];\n    if (typeof val === 'function') {\n      val = function (old_fn) {\n        return function () {\n          old_fn(eb.getText());\n        };\n      }(val);\n    }\n    buttons[key] = val;\n  }\n  param.buttons = buttons;\n  param.text = `${param.text || ''}`;\n  let old_tick = param.tick;\n  param.tick = function (params) {\n    let eb_ret = eb.run({\n      x: params.x,\n      y: params.y,\n      w: params.avail_width || param.edit_w,\n      font_height: params.font_height\n    });\n    if (!params.fullscreen_mode) {\n      params.y += params.font_height + modal_pad;\n    }\n    let ret;\n    if (eb_ret === eb.SUBMIT) {\n      ret = KEYS.O; // Do OK, Yes\n    } else if (eb_ret === eb.CANCEL) {\n      ret = KEYS.ESC; // Do Cancel, No\n    }\n    if (old_tick) {\n      ret = old_tick(params) || ret;\n    }\n    return ret;\n  };\n  modalDialog(param);\n}\n\nexport function createEditBox(param) {\n  return glov_edit_box.create(param);\n}\n\nconst color_slider_handle = vec4(1, 1, 1, 1);\nconst color_slider_handle_grab = vec4(0.5, 0.5, 0.5, 1);\nconst color_slider_handle_over = vec4(0.75, 0.75, 0.75, 1);\nexport let slider_dragging = false; // for caller polling\n// Returns new value\nexport function slider(value, param) {\n  // required params\n  assert(typeof param.x === 'number');\n  assert(typeof param.y === 'number');\n  assert(param.min < param.max); // also must be numbers\n  // optional params\n  param.z = param.z || Z.UI;\n  param.w = param.w || button_width;\n  param.h = param.h || button_height;\n  let disabled = param.disabled || false;\n\n  slider_dragging = false;\n\n  drawHBox(param, sprites.slider, param.color);\n\n  let xoffs = round(sprites.slider.uidata.wh[0] * param.h / 2);\n  let draggable_width = param.w - xoffs * 2;\n\n  // Draw notches - would also need to quantize the values below\n  // if (!slider->no_notches) {\n  //   float space_for_notches = width - xoffs * 4;\n  //   int num_notches = max - 1;\n  //   float notch_w = tile_scale * glov_ui_slider_notch->GetTileWidth();\n  //   float notch_h = tile_scale * glov_ui_slider_notch->GetTileHeight();\n  //   float max_notches = space_for_notches / (notch_w + 2);\n  //   int notch_inc = 1;\n  //   if (num_notches > max_notches)\n  //     notch_inc = ceil(num_notches / floor(max_notches));\n\n  //   for (int ii = 1; ii*notch_inc <= num_notches; ii++) {\n  //     float notch_x_mid = x + xoffs + draggable_width * ii * notch_inc / (float)max;\n  //     if (notch_x_mid - notch_w/2 < x + xoffs * 2)\n  //       continue;\n  //     if (notch_x_mid + notch_w/2 > x + width - xoffs * 2)\n  //       continue;\n  //     glov_ui_slider_notch->DrawStretchedColor(notch_x_mid - notch_w / 2, y + yoffs,\n  //       z + 0.25, notch_w, notch_h, 0, color);\n  //   }\n  // }\n\n  // Handle\n  let drag = !disabled && glov_input.drag(param);\n  let grabbed = Boolean(drag);\n  let click = glov_input.click(param);\n  if (click) {\n    grabbed = false;\n    // update pos\n    value = (click.pos[0] - (param.x + xoffs)) / draggable_width;\n    value = param.min + (param.max - param.min) * clamp(value, 0, 1);\n    playUISound('button_click');\n  } else if (grabbed) {\n    // update pos\n    value = (drag.cur_pos[0] - (param.x + xoffs)) / draggable_width;\n    value = param.min + (param.max - param.min) * clamp(value, 0, 1);\n    // Eat all mouseovers while dragging\n    glov_input.mouseOver();\n    slider_dragging = true;\n  }\n  let rollover = !disabled && glov_input.mouseOver(param);\n  let handle_center_pos = param.x + xoffs + draggable_width * (value - param.min) / (param.max - param.min);\n  let handle_h = param.h;\n  let handle_w = sprites.slider_handle.uidata.wh[0] * handle_h;\n  let handle_x = handle_center_pos - handle_w / 2;\n  let handle_y = param.y + param.h / 2 - handle_h / 2;\n  let handle_color = color_slider_handle;\n  if (grabbed) {\n    handle_color = color_slider_handle_grab;\n  } else if (rollover) {\n    handle_color = color_slider_handle_over;\n  }\n\n  sprites.slider_handle.draw({\n    x: handle_x,\n    y: handle_y,\n    z: param.z + 0.1,\n    w: handle_w,\n    h: handle_h,\n    color: handle_color,\n    frame: 0\n  });\n\n  return value;\n}\n\nlet pp_bad_frames = 0;\n\nexport function tickUI(dt) {\n  last_frame_button_mouseover = frame_button_mouseover;\n  frame_button_mouseover = false;\n  focused_last_frame = focused_this_frame;\n  focused_this_frame = false;\n  focused_key_not = null;\n  modal_stealing_focus = false;\n  touch_changed_focus = false;\n\n  last_frame_edit_boxes = exports.this_frame_edit_boxes;\n  exports.this_frame_edit_boxes = [];\n  linkTick();\n\n  dom_elems_issued = 0;\n\n  let pp_this_frame = false;\n  if (modal_dialog || menu_up) {\n    let params = menu_fade_params;\n    if (!menu_up) {\n      // Modals get defaults\n      params = menu_fade_params_default;\n    }\n    menu_up_time += dt;\n    // Effects during modal dialogs\n    let factor = min(menu_up_time / 500, 1);\n    if (glov_engine.postprocessing && !glov_engine.defines.NOPP) {\n      glov_sprites.queuefn(params.z - 2, doBlurEffect.bind(null, factor, params));\n      glov_sprites.queuefn(params.z - 1, doDesaturateEffect.bind(null, factor, params));\n      pp_this_frame = true;\n    } else {\n      // Or, just darken\n      sprites.white.draw({\n        x: camera2d.x0Real(),\n        y: camera2d.y0Real(),\n        z: params.z - 2,\n        color: params.fallback_darken,\n        w: camera2d.wReal(),\n        h: camera2d.hReal()\n      });\n    }\n  } else {\n    menu_up_time = 0;\n  }\n  menu_up = false;\n\n  if (!glov_engine.is_loading && glov_engine.getFrameDtActual() > 50 && pp_this_frame) {\n    pp_bad_frames = (pp_bad_frames || 0) + 1;\n    if (pp_bad_frames >= 3) {\n      // 3 in a row, disable superfluous postprocessing\n      glov_engine.postprocessingAllow(false);\n    }\n  } else if (pp_bad_frames) {\n    pp_bad_frames = 0;\n  }\n\n  if (modal_dialog) {\n    modalDialogRun();\n  }\n}\n\nexport function endFrame() {\n  if (glov_input.click({\n    x: -Infinity, y: -Infinity,\n    w: Infinity, h: Infinity\n  })) {\n    focusSteal('canvas');\n  }\n\n  for (let ii = 0; ii < last_frame_edit_boxes.length; ++ii) {\n    let edit_box = last_frame_edit_boxes[ii];\n    let idx = exports.this_frame_edit_boxes.indexOf(edit_box);\n    if (idx === -1) {\n      edit_box.unrun();\n    }\n  }\n\n  while (dom_elems_issued < dom_elems.length) {\n    let elem = dom_elems.pop();\n    dynamic_text_elem.removeChild(elem);\n  }\n}\n\nexport function menuUp(param) {\n  merge(menu_fade_params, menu_fade_params_default);\n  if (param) {\n    merge(menu_fade_params, param);\n  }\n  menu_up = true;\n  modal_stealing_focus = true;\n  glov_input.eatAllInput();\n}\n\nfunction copyTextToClipboard(text) {\n  let textArea = document.createElement('textarea');\n  textArea.style.position = 'fixed';\n  textArea.style.top = 0;\n  textArea.style.left = 0;\n  textArea.style.width = '2em';\n  textArea.style.height = '2em';\n  textArea.style.border = 'none';\n  textArea.style.outline = 'none';\n  textArea.style.boxShadow = 'none';\n  textArea.style.background = 'transparent';\n  textArea.value = text;\n\n  document.body.appendChild(textArea);\n  textArea.focus();\n  textArea.select();\n\n  let ret = false;\n  try {\n    ret = document.execCommand('copy');\n  } catch (err) {\n    // do nothing\n  }\n\n  document.body.removeChild(textArea);\n  return ret;\n}\n\nexport function provideUserString(title, thing, str) {\n  let copy_success = copyTextToClipboard(str);\n  modalTextEntry({\n    edit_w: 400,\n    edit_text: str,\n    title,\n    text: copy_success ? `${thing} copied to clipboard!` : 'Copy to clipboard FAILED, please copy from below\\n',\n    buttons: {\n      OK: null\n    }\n  });\n}\n\nexport function drawRect(x0, y0, x1, y1, z, color) {\n  let mx = min(x0, x1);\n  let my = min(y0, y1);\n  let Mx = max(x0, x1);\n  let My = max(y0, y1);\n  sprites.white.draw({\n    x: mx,\n    y: my,\n    z,\n    color,\n    w: Mx - mx,\n    h: My - my\n  });\n}\n\nfunction spreadTechParams(spread) {\n  // spread=0 -> 1\n  // spread=0.5 -> 2\n  // spread=0.75 -> 4\n  // spread=1 -> large enough to AA\n  spread = min(max(spread, 0), 0.99);\n\n  let tech_params = {\n    param0: vec4(0, 0, 0, 0)\n  };\n\n  tech_params.param0[0] = 1 / (1 - spread);\n  tech_params.param0[1] = -0.5 * tech_params.param0[0] + 0.5;\n  return tech_params;\n}\n\nfunction drawCircleInternal(sprite, x, y, z, r, spread, tu1, tv1, tu2, tv2, color) {\n  let x0 = x - r * 2 + r * 4 * tu1;\n  let x1 = x - r * 2 + r * 4 * tu2;\n  let y0 = y - r * 2 + r * 4 * tv1;\n  let y1 = y - r * 2 + r * 4 * tv2;\n  glov_sprites.queueraw(sprite.texs, x0, y0, z, x1 - x0, y1 - y0, tu1, tv1, tu2, tv2, color, glov_font.font_shaders.font_aa, spreadTechParams(spread));\n}\n\nexport function drawCircle(x, y, z, r, spread, color) {\n  if (!sprites.circle) {\n    const CIRCLE_SIZE = 32;\n    let data = new Uint8Array(CIRCLE_SIZE * CIRCLE_SIZE);\n    let midp = (CIRCLE_SIZE - 1) / 2;\n    for (let i = 0; i < CIRCLE_SIZE; i++) {\n      for (let j = 0; j < CIRCLE_SIZE; j++) {\n        let d = sqrt((i - midp) * (i - midp) + (j - midp) * (j - midp)) / midp;\n        let v = clamp(1 - d, 0, 1);\n        data[i + j * CIRCLE_SIZE] = v * 255;\n      }\n    }\n    sprites.circle = glov_sprites.create({\n      url: 'circle',\n      width: CIRCLE_SIZE, height: CIRCLE_SIZE,\n      format: textures.format.R8,\n      data,\n      filter_min: gl.LINEAR,\n      filter_max: gl.LINEAR,\n      wrap_s: gl.CLAMP_TO_EDGE,\n      wrap_t: gl.CLAMP_TO_EDGE,\n      origin: vec2(0.5, 0.5)\n    });\n  }\n  drawCircleInternal(sprites.circle, x, y, z, r, spread, 0, 0, 1, 1, color);\n}\n\nexport function drawHollowCircle(x, y, z, r, spread, color) {\n  if (!sprites.hollow_circle) {\n    const CIRCLE_SIZE = 128;\n    const LINE_W = 2;\n    let data = new Uint8Array(CIRCLE_SIZE * CIRCLE_SIZE);\n    let midp = (CIRCLE_SIZE - 1) / 2;\n    for (let i = 0; i < CIRCLE_SIZE; i++) {\n      for (let j = 0; j < CIRCLE_SIZE; j++) {\n        let d = sqrt((i - midp) * (i - midp) + (j - midp) * (j - midp)) / midp;\n        let v = clamp(1 - d, 0, 1);\n        if (v > 0.5) {\n          v = 1 - v;\n        }\n        v += LINE_W / CIRCLE_SIZE;\n        data[i + j * CIRCLE_SIZE] = v * 255;\n      }\n    }\n    sprites.hollow_circle = glov_sprites.create({\n      url: 'hollow_circle',\n      width: CIRCLE_SIZE, height: CIRCLE_SIZE,\n      format: textures.format.R8,\n      data,\n      filter_min: gl.LINEAR,\n      filter_max: gl.LINEAR,\n      wrap_s: gl.CLAMP_TO_EDGE,\n      wrap_t: gl.CLAMP_TO_EDGE,\n      origin: vec2(0.5, 0.5)\n    });\n  }\n  drawCircleInternal(sprites.hollow_circle, x, y, z, r, spread, 0, 0, 1, 1, color);\n}\n\nexport function drawLine(x0, y0, x1, y1, z, w, spread, color) {\n  if (!sprites.line) {\n    const LINE_SIZE = 32;\n    let data = new Uint8Array(LINE_SIZE * LINE_SIZE);\n    let midp = (LINE_SIZE - 1) / 2;\n    for (let i = 0; i < LINE_SIZE; i++) {\n      for (let j = 0; j < LINE_SIZE; j++) {\n        let d = abs((i - midp) / midp);\n        let v = clamp(1 - d, 0, 1);\n        data[i + j * LINE_SIZE] = v * 255;\n      }\n    }\n    sprites.line = glov_sprites.create({\n      url: 'line',\n      width: LINE_SIZE, height: LINE_SIZE,\n      format: textures.format.R8,\n      data,\n      filter_min: gl.LINEAR,\n      filter_max: gl.LINEAR,\n      wrap_s: gl.CLAMP_TO_EDGE,\n      wrap_t: gl.CLAMP_TO_EDGE,\n      origin: vec2(0.5, 0.5)\n    });\n  }\n\n  let dx = x1 - x0;\n  let dy = y1 - y0;\n  let length = Math.sqrt(dx * dx + dy * dy);\n  dx /= length;\n  dy /= length;\n  let tangx = -dy * w;\n  let tangy = dx * w;\n\n  glov_sprites.queueraw4(sprites.line.texs, x0 + tangx, y0 + tangy, x1 + tangx, y1 + tangy, x1 - tangx, y1 - tangy, x0 - tangx, y0 - tangy, z, 0, 0, 1, 1, color, glov_font.font_shaders.font_aa, spreadTechParams(spread));\n}\n\nexport function drawCone(x0, y0, x1, y1, z, w0, w1, spread, color) {\n  if (!sprites.cone) {\n    const CONE_SIZE = 32;\n    let data = new Uint8Array(CONE_SIZE * CONE_SIZE);\n    let midp = (CONE_SIZE - 1) / 2;\n    for (let i = 0; i < CONE_SIZE; i++) {\n      for (let j = 0; j < CONE_SIZE; j++) {\n        let dx = 0;\n        let dy = 0;\n        let d = 0;\n        if (i > midp) {\n          dx = (i - midp) / midp;\n          dy = abs(j - midp) / midp;\n          let dCircle = sqrt(dx * dx + dy * dy);\n          d = dx * dCircle;\n        }\n        let v = clamp(1 - d, 0, 1);\n        data[i + j * CONE_SIZE] = v * 255;\n      }\n    }\n    sprites.cone = glov_sprites.create({\n      url: 'cone',\n      width: CONE_SIZE, height: CONE_SIZE,\n      format: textures.format.R8,\n      data,\n      filter_min: gl.LINEAR,\n      filter_max: gl.LINEAR,\n      wrap_s: gl.CLAMP_TO_EDGE,\n      wrap_t: gl.CLAMP_TO_EDGE,\n      origin: vec2(0.5, 0.5)\n    });\n  }\n  let dx = x1 - x0;\n  let dy = y1 - y0;\n  let length = Math.sqrt(dx * dx + dy * dy);\n  dx /= length;\n  dy /= length;\n  let tangx = -dy;\n  let tangy = dx;\n  glov_sprites.queueraw4(sprites.cone.texs, x0 - tangx * w0, y0 - tangy * w0, x0 + tangx * w0, y0 + tangy * w0, x1 + tangx * w1, y1 + tangy * w1, x1 - tangx * w1, y1 - tangy * w1, z, 0, 0, 1, 1, color, glov_font.font_shaders.font_aa, spreadTechParams(spread));\n}\n\nexport function scaleSizes(scale) {\n  button_height = round(32 * scale);\n  font_height = round(24 * scale);\n  button_width = round(200 * scale);\n  button_img_size = button_height;\n  modal_button_width = round(button_width / 2);\n  modal_width = round(600 * scale);\n  modal_y0 = round(200 * scale);\n  modal_title_scale = 1.2;\n  modal_pad = round(16 * scale);\n  tooltip_width = round(400 * scale);\n  tooltip_pad = round(8 * scale);\n  panel_pixel_scale = button_height / 13; // button_height / panel pixel resolution\n  tooltip_panel_pixel_scale = panel_pixel_scale;\n}\n\nexport function setModalSizes(_modal_button_width, width, y0, title_scale, pad) {\n  modal_button_width = _modal_button_width || round(button_width / 2);\n  modal_width = width || 600;\n  modal_y0 = y0 || 200;\n  modal_title_scale = title_scale || 1.2;\n  modal_pad = pad || modal_pad;\n}\n\nexport function setFontHeight(_font_height) {\n  font_height = _font_height;\n}\n\nexport function setTooltipWidth(_tooltip_width, _tooltip_panel_pixel_scale) {\n  tooltip_width = _tooltip_width;\n  tooltip_panel_pixel_scale = _tooltip_panel_pixel_scale;\n  tooltip_pad = modal_pad / 2 * _tooltip_panel_pixel_scale;\n}\n\nscaleSizes(1);","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst assert = require('assert');\nconst glov_engine = require('./engine.js');\nconst glov_font = require('./font.js');\nconst glov_input = require('./input.js');\nconst glov_simple_menu = require('./simple_menu.js');\nconst glov_selection_box = require('./selection_box.js');\nconst glov_ui = require('./ui.js');\n\nconst { ceil, random } = Math;\n\nlet demo_menu;\nlet demo_menu_up = false;\nlet demo_result;\nlet font_style;\n\nlet inited;\nlet edit_box1;\nlet edit_box2;\nlet test_select1;\nlet test_select2;\nlet slider_value = 1;\nfunction init(x, y, column_width) {\n  edit_box1 = glov_ui.createEditBox({\n    x: x + column_width,\n    y: y,\n    w: column_width - 8\n  });\n  edit_box2 = glov_ui.createEditBox({\n    x: x + column_width + column_width,\n    y: y,\n    w: column_width - 8\n  });\n  demo_menu = glov_simple_menu.create({\n    items: ['Option 1', {\n      name: 'Option 2',\n      tag: 'opt2'\n    }, {\n      name: 'Option C',\n      cb: () => {\n        demo_result = 'Callback the third';\n      }\n    }]\n  });\n  font_style = glov_font.style(null, {\n    outline_width: 1.0,\n    outline_color: 0x800000ff,\n    glow_xoffs: 3.25,\n    glow_yoffs: 3.25,\n    glow_inner: -2.5,\n    glow_outer: 5,\n    glow_color: 0x000000ff\n  });\n\n  test_select1 = glov_selection_box.create({\n    items: ['Apples', 'Bananas', 'Chameleon'],\n    z: Z.UI,\n    width: column_width - 8\n  });\n  test_select2 = glov_selection_box.create({\n    items: ['Apples', 'Bananas', 'Chameleon'],\n    is_dropdown: true,\n    z: Z.UI,\n    width: column_width - 8\n  });\n}\n\nexport function run(x, y, z) {\n  z = z || Z.UI;\n  let line_height = glov_ui.button_height + 2;\n  let column_width = glov_ui.button_width + 8;\n  if (inited !== `${x}_${y}_${column_width}`) {\n    init(x, y, column_width);\n    inited = `${x}_${y}_${column_width}`;\n  }\n\n  if (demo_menu_up) {\n    demo_result = '';\n    demo_menu.run({ x: x + glov_ui.button_width, y: y + line_height, z: Z.MODAL });\n    if (demo_menu.isSelected()) {\n      if (demo_menu.isSelected('opt2')) {\n        demo_result = 'Selected the second option';\n      }\n      if (!demo_result) {\n        demo_result = `Menu selected: ${demo_menu.getSelectedItem().name}`;\n      }\n      demo_menu_up = false;\n    }\n    glov_ui.menuUp();\n    glov_input.eatAllInput();\n  }\n\n  let pad = 8;\n  let w = glov_ui.print(font_style, x + column_width + 4, y + 40, z, `Edit Box Text: ${edit_box1.text}+${edit_box2.text}`);\n  w = Math.max(w, glov_ui.print(font_style, x + column_width, y + 40 + glov_ui.font_height + pad, z, `Result: ${demo_result}`));\n  glov_ui.panel({ x: x + column_width + 4 - pad, y: y + 40 - pad, z: z - 1,\n    w: w + pad * 2, h: glov_ui.font_height * 2 + pad * 3 });\n\n  if (glov_ui.buttonText({ x, y, z, text: 'Modal Dialog', tooltip: 'Shows a modal dialog' })) {\n    demo_result = '';\n    glov_ui.modalDialog({\n      title: 'Modal Dialog',\n      text: 'This is a modal dialog!',\n      buttons: {\n        'OK': function () {\n          demo_result = 'OK pushed!';\n        },\n        'Cancel': null // no callback\n      }\n    });\n  }\n  y += line_height;\n\n  if (edit_box1.run() === edit_box1.SUBMIT) {\n    glov_ui.modalDialog({\n      title: 'Modal Dialog',\n      text: `Edit box submitted with text ${edit_box1.text}`,\n      buttons: {\n        'OK': null\n      }\n    });\n  }\n  if (edit_box2.run() === edit_box2.SUBMIT) {\n    edit_box2.setText('');\n  }\n\n  if (glov_ui.buttonText({ x, y, z, text: 'Menu', tooltip: 'Shows a menu' })) {\n    demo_menu_up = true;\n  }\n  y += line_height;\n\n  if (glov_ui.buttonText({ x, y, z, text: 'Disabled', tooltip: 'A disabled button', disabled: true })) {\n    assert(false);\n  }\n  y += line_height;\n\n  y += test_select1.run({ x, y, z });\n  y += test_select2.run({ x, y, z });\n\n  slider_value = glov_ui.slider(slider_value, {\n    x, y, z,\n    min: 0,\n    max: 2\n  });\n  glov_ui.print(null, x + glov_ui.button_width + pad, y, z, `${slider_value.toFixed(2)}`);\n  y += glov_ui.button_height;\n}\n\nexport function runFontTest(x, y) {\n  const COLOR_RED = 0xFF0000ff;\n  const COLOR_GREEN = 0x00FF00ff;\n  const COLOR_WHITE = 0xFFFFFFff;\n  const COLOR_INVISIBLE = 0x00000000;\n  let z = Z.UI;\n  let font = glov_engine.font;\n\n  let font_size = glov_ui.font_height * 2;\n  font.drawSized(null, x, y, z, font_size, `Default ${font_size} ${random().toFixed(7)}`);\n  y += font_size;\n  font.drawSized(null, x, y, z, font_size / 2, `Default ${font_size / 2} Lorem ipsum dolor sit amet <[A|B]>`);\n  y += ceil(font_size / 2);\n  font.drawSized(null, x, y, z, font_size / 4, `Default ${font_size / 4} The quick brown fox jumped over the lazy dog rutabaga Alfalfa`);\n  y += ceil(font_size / 4);\n\n  const font_style_outline = glov_font.style(null, {\n    outline_width: 1, outline_color: COLOR_RED,\n    glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 0, glow_color: COLOR_INVISIBLE,\n    color: COLOR_WHITE\n  });\n  font.drawSized(font_style_outline, x, y, z, font_size, 'Outline');\n  y += font_size;\n\n  const font_style_glow = glov_font.style(null, {\n    outline_width: 0, outline_color: COLOR_INVISIBLE,\n    glow_xoffs: 0, glow_yoffs: 0, glow_inner: -1, glow_outer: 4, glow_color: COLOR_GREEN,\n    color: COLOR_WHITE\n  });\n  font.drawSized(font_style_glow, x, y, z, font_size, 'Glow');\n  y += font_size;\n\n  const font_style_shadow = glov_font.style(null, {\n    outline_width: 0, outline_color: COLOR_INVISIBLE,\n    glow_xoffs: 3.25, glow_yoffs: 3.25, glow_inner: -2.5, glow_outer: 5, glow_color: COLOR_GREEN,\n    color: COLOR_WHITE\n  });\n  font.drawSized(font_style_shadow, x, y, z, font_size, 'Glow (Shadow) O0O');\n  y += font_size;\n\n  const font_style_both = glov_font.style(null, {\n    outline_width: 1, outline_color: COLOR_RED,\n    glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 6, glow_color: COLOR_GREEN,\n    color: COLOR_WHITE\n  });\n  font.drawSized(font_style_both, x, y, z, font_size, 'Both 0O0');\n  y += font_size;\n\n  let font_size2 = 32;\n  const font_style_both2 = glov_font.style(null, {\n    outline_width: 1.75, outline_color: COLOR_RED,\n    glow_xoffs: 0.25, glow_yoffs: 0.25, glow_inner: 0, glow_outer: 5, glow_color: 0x7F7F7Fff,\n    color: COLOR_WHITE\n  });\n  font.drawSizedAligned(font_style_both2, x, y, z, font_size2, glov_font.ALIGN.HFIT, glov_ui.button_width * 2, 0, 'ALIGN.HFIT The quick brown fox jumps over the lazy dog');\n  y += font_size2;\n  font.drawSizedAligned(font_style_both2, x, y, z, font_size2, glov_font.ALIGN.HFIT, 140, 0, '0 Players (+1 Easy Bots)');\n  y += font_size2;\n\n  let test = 'glow';\n\n  if (test === 'outline') {\n    const font_style_outline2 = glov_font.style(null, {\n      outline_width: 1, outline_color: COLOR_RED,\n      glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 0, glow_color: COLOR_INVISIBLE,\n      color: COLOR_WHITE\n    });\n    for (let ii = 1; ii <= 4; ii++) {\n      font_style_outline2.outline_width = ii * 2;\n      font.drawSizedAligned(font_style_outline2, x, y, z, font_size2, glov_font.ALIGN.HLEFT, 400, 0, `Outline thickness ${ii * 2}`);\n      y += font_size2;\n    }\n\n    // Not allowing non-uniform scaling here, simulate with camera?\n    // font.drawSizedAligned(font_style_outline2, x, y, z, font_size2 * 2, font_size2, glov_font.ALIGN.HLEFT, 400, 0,\n    //   'Wide thick outline');\n    // y += font_size2;\n    // font.drawSizedAligned(font_style_outline2, x, y, z, font_size2, font_size2 * 2, glov_font.ALIGN.HLEFT, 400, 0,\n    //   'Tall thick outline');\n    // y += font_size2 * 2;\n  } else if (test === 'glow') {\n    const font_style_glow2 = glov_font.style(null, {\n      outline_width: 0, outline_color: COLOR_INVISIBLE,\n      glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 8, glow_color: COLOR_RED,\n      color: COLOR_WHITE\n    });\n    for (let ii = 1; ii <= 4; ii++) {\n      //font_style_glow2.glow_inner = ii * 2 - 1;\n      font_style_glow2.glow_outer = ii * 2;\n      font.drawSizedAligned(font_style_glow2, x, y, z, font_size2, glov_font.ALIGN.HLEFT, 400, 0, `Glow outer ${ii * 2}`);\n      y += font_size2;\n    }\n\n    // Not allowing non-uniform scaling here, simulate with camera?\n    // font.drawSizedAligned(font_style_glow2, x, y, z, font_size2 * 2, font_size2, glov_font.ALIGN.HLEFT, 400, 0,\n    //   'Wide thick glow \\x01\\x02\\xe5\\xae\\xb4\\xe8\\xaf\\xb7');\n    // y += font_size2;\n    // font.drawSizedAligned(font_style_glow2, x, y, z, font_size2, font_size2 * 2, glov_font.ALIGN.HLEFT, 400, 0,\n    //   'Tall thick glow');\n    // y += font_size2 * 2;\n  } else if (test === 'wrap') {\n    y += font.drawSizedWrapped(null, x, y, z, 400, 24, font_size2, 0xFFFFFFff, 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor' + ' incididunt utlaboreetdoloremagnaaliqua.');\n  }\n\n  // Gradient not supported\n  // y = y0;\n  // x += font_size * 8;\n  // const font_style_gradient = glov_font.style(null, {\n  //   outline_width: 1, outline_color: 0x777777ff,\n  //   glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 0, glow_color: COLOR_BLUE,\n  //   gradient: [COLOR_WHITE, COLOR_WHITE, COLOR_BLACK, COLOR_BLACK],\n  // });\n  // font.drawSized(font_style_gradient, x, y + Math.sin(glov_engine.getFrameTimestamp() * 0.005) * 20, z,\n  //   font_size*2, 'Gradient');\n  // y += font_size*2;\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\n/*\n  API usage:\n  engine.defines = urlhash.register({\n    key: 'D',\n    type: SET,\n  });\n  urlhash.register({\n    key: 'pos',\n    // type: TYPE_STRING,\n    change: (newvalue) => {},\n    title: (value) => 'string',\n    def: '1,2',\n    hides: { otherfield: true },\n    push: true, // do a pushState instead of replaceState when this changes\n    hide_values: { foo: true }, // do not add to URL if values is in the provided set\n  });\n  urlhash.set('pos', '3,4');\n  urlhash.get('pos')\n\n  urlhash.route('w/:w')     // use URLs like foo.com/w/1   instead of foo.com/?w=1\n  urlhash.route('w/:w/:wg')  // use URLs like foo.com/w/1/2 instead of foo.com/?w=1&wg=2\n\n  // Called whenever the URL state is pushed, even if to exactly the same URL (e.g. on link click)\n  urlhash.onChange(cb)\n*/\n\nconst assert = require('assert');\n\nconst HISTORY_UPDATE_TIME = 1000;\n\nexport let TYPE_SET = 'set';\nexport let TYPE_STRING = 'string';\n\nlet params = {};\n\nlet title_suffix = '';\n\nlet url_base = (document.location.href || '').match(/^[^#?]+/)[0];\n\nlet on_change = [];\n\nexport function getURLBase() {\n  return url_base;\n}\n\nexport function onChange(cb) {\n  on_change.push(cb);\n}\n\nfunction cmpNumKeys(a, b) {\n  let d = b.keys.length - a.keys.length;\n  if (d) {\n    return d;\n  }\n  // otherwise alphabetical for stability\n  for (let ii = 0; ii < a.keys.length; ++ii) {\n    if (a.keys[ii] < b.keys[ii]) {\n      return -1;\n    } else if (a.keys[ii] > b.keys[ii]) {\n      return 1;\n    }\n  }\n  assert(false); // two routes with identical keys\n  return 0;\n}\n\nconst route_param_regex = /:(\\w+)/g;\nlet routes = [];\nexport function route(route_string) {\n  let keys = [];\n  // foo/:key/:bar => foo/([^/&?]+)/([^/&?]+)\n  let base = route_string.replace(route_param_regex, function (ignored, match) {\n    keys.push(match);\n    return '([^/&?]+)';\n  });\n  let regex = new RegExp(`^${base}(?:$|\\\\?)`);\n  let new_route = {\n    route_string,\n    regex,\n    keys\n  };\n  for (let ii = 0; ii < keys.length; ++ii) {\n    let opts = params[keys[ii]];\n    // Must have already registered these keys\n    assert(opts);\n    opts.routes = opts.routes || [];\n    opts.routes.push(new_route);\n  }\n  routes.push(new_route);\n  routes.sort(cmpNumKeys);\n}\n\nfunction queryString() {\n  let href = String(document.location);\n  return href.slice(url_base.length);\n}\n\nconst regex_value = /[^\\w]\\w+=([^&]+)/;\nfunction getValue(query_string, opts) {\n  if (opts.routes) {\n    for (let ii = 0; ii < opts.routes.length; ++ii) {\n      let r = opts.routes[ii];\n      let m = query_string.match(r.regex);\n      if (m) {\n        let idx = r.keys.indexOf(opts.key);\n        return m[1 + idx];\n      }\n    }\n  }\n  let m = query_string.match(opts.regex) || [];\n  if (opts.type === TYPE_SET) {\n    let r = {};\n    for (let ii = 0; ii < m.length; ++ii) {\n      let m2 = m[ii].match(regex_value);\n      assert(m2);\n      r[m2[1]] = 1;\n    }\n    return r;\n  } else {\n    return m[1] || opts.def;\n  }\n}\n\nlet last_history_str = null; // always re-set it on the first update\n\nfunction goInternal(query_string) {\n  // with the '?'\n  // Update all values, except those hidden by what is currently in the query string\n  let hidden = {};\n  for (let key in params) {\n    let opts = params[key];\n    if (opts.hides) {\n      if (getValue(query_string, opts)) {\n        for (let otherkey in opts.hides) {\n          hidden[otherkey] = 1;\n        }\n      }\n    }\n  }\n\n  let dirty = {};\n  for (let key in params) {\n    if (hidden[key]) {\n      continue;\n    }\n    let opts = params[key];\n    let new_value = getValue(query_string, opts);\n    if (opts.type === TYPE_SET) {\n      for (let v in new_value) {\n        if (!opts.value[v]) {\n          opts.value[v] = 1;\n          dirty[key] = true;\n        }\n      }\n      for (let v in opts.value) {\n        if (!new_value[v]) {\n          delete opts.value[v];\n          dirty[key] = true;\n        }\n      }\n    } else {\n      if (new_value !== opts.value) {\n        dirty[key] = true;\n        opts.value = new_value;\n      }\n    }\n  }\n\n  // Call all change callbacks\n  for (let key in dirty) {\n    let opts = params[key];\n    if (opts.change) {\n      opts.change(opts.value);\n    }\n  }\n  for (let ii = 0; ii < on_change.length; ++ii) {\n    on_change[ii]();\n  }\n}\n\nlet eff_title;\nfunction toString() {\n  eff_title = '';\n  let values = [];\n  let hidden = {};\n  for (let key in params) {\n    let opts = params[key];\n    if (opts.hides && opts.value) {\n      for (let otherkey in opts.hides) {\n        hidden[otherkey] = 1;\n      }\n    }\n  }\n  let root_value = '';\n  outer: // eslint-disable-line no-labels\n  for (let ii = 0; ii < routes.length; ++ii) {\n    let r = routes[ii];\n    for (let jj = 0; jj < r.keys.length; ++jj) {\n      let key = r.keys[jj];\n      if (hidden[key]) {\n        continue outer; // eslint-disable-line no-labels\n      }\n      let opts = params[key];\n      if (opts.hide_values[opts.value]) {\n        continue outer; // eslint-disable-line no-labels\n      }\n      // has a value, is not hidden, continue\n    }\n    // route is good!\n    root_value = r.route_string.replace(route_param_regex, function (ignored, key) {\n      hidden[key] = true;\n      return String(params[key].value);\n    });\n    break;\n  }\n  for (let key in params) {\n    if (hidden[key]) {\n      continue;\n    }\n    let opts = params[key];\n    if (opts.type === TYPE_SET) {\n      for (let v in opts.value) {\n        values.push(`${key}=${v}`);\n      }\n    } else {\n      if (!opts.hide_values[opts.value]) {\n        values.push(`${key}=${opts.value}`);\n        if (!eff_title && opts.title) {\n          eff_title = opts.title(opts.value);\n        }\n      }\n    }\n  }\n  if (title_suffix) {\n    if (eff_title) {\n      eff_title = `${eff_title} | ${title_suffix}`;\n    } else {\n      eff_title = title_suffix;\n    }\n  }\n  return `${root_value}${values.length ? '?' : ''}${values.join('&')}`;\n}\n\nexport function refreshTitle() {\n  toString();\n  if (eff_title && eff_title !== document.title) {\n    document.title = eff_title;\n  }\n}\n\nfunction periodicRefreshTitle() {\n  refreshTitle();\n  setTimeout(periodicRefreshTitle, 1000);\n}\n\nfunction onPopState() {\n  let query_string = queryString();\n  last_history_str = query_string;\n  goInternal(query_string);\n  refreshTitle();\n}\n\nlet last_history_set_time = 0;\nlet scheduled = false;\nlet need_push_state = false;\nfunction updateHistory(new_need_push_state) {\n  let new_str = toString();\n  if (last_history_str === new_str) {\n    return;\n  }\n  need_push_state = need_push_state || new_need_push_state;\n  last_history_str = new_str;\n  if (scheduled) {\n    // already queued up\n    return;\n  }\n  let delay = HISTORY_UPDATE_TIME;\n  if (Date.now() - last_history_set_time > HISTORY_UPDATE_TIME) {\n    // Been awhile, apply \"instantly\" (but still wait until next tick to ensure\n    //   any other immediate changes are registered)\n    delay = 1;\n  }\n  scheduled = true;\n  setTimeout(function () {\n    scheduled = false;\n    last_history_set_time = Date.now();\n    if (need_push_state) {\n      need_push_state = false;\n      window.history.pushState(undefined, eff_title, `${url_base}${last_history_str}`);\n    } else {\n      window.history.replaceState(undefined, eff_title, `${url_base}${last_history_str}`);\n    }\n    if (eff_title) {\n      document.title = eff_title;\n    }\n    //window.history.replaceState(undefined, eff_title, `#${last_history_str}`);\n  }, delay);\n}\n\n// Optional startup\nexport function startup(param) {\n  assert(!title_suffix);\n  title_suffix = param.title_suffix;\n\n  // Refresh the current URL, it might be in the non-rooted format\n  updateHistory(false);\n\n  if (title_suffix) {\n    refreshTitle();\n    setTimeout(periodicRefreshTitle, 1000);\n  }\n}\n\nexport function register(opts) {\n  assert(opts.key);\n  assert(!params[opts.key]);\n  opts.type = opts.type || TYPE_STRING;\n  let regex_search = `(?:[^\\\\w])${opts.key}=([^&]+)`;\n  let regex_type = '';\n  if (opts.type === TYPE_SET) {\n    regex_type = 'g';\n  } else {\n    opts.def = opts.def || '';\n    opts.hide_values = opts.hide_values || {};\n    opts.hide_values[opts.def] = true;\n  }\n  opts.regex = new RegExp(regex_search, regex_type);\n  params[opts.key] = opts;\n  // Get initial value\n  opts.value = getValue(queryString(), opts);\n  let ret = opts.value;\n  if (opts.type === TYPE_SET && typeof Proxy === 'function') {\n    // Auto-apply changes to URL if someone modifies the proxy\n    ret = new Proxy(opts.value, {\n      set: function (target, prop, value) {\n        if (value) {\n          target[prop] = 1;\n        } else {\n          delete target[prop];\n        }\n        updateHistory();\n        return true;\n      }\n    });\n  }\n\n  if (!window.onpopstate) {\n    window.onpopstate = onPopState;\n  }\n\n  return ret;\n}\n\nexport function set(key, value, value2) {\n  let opts = params[key];\n  assert(opts);\n  if (opts.type === TYPE_SET) {\n    if (Boolean(opts.value[value]) !== Boolean(value2)) {\n      opts.value[value] = value2 ? 1 : 0;\n      updateHistory(opts.push);\n    }\n  } else {\n    if (opts.value !== value) {\n      opts.value = value;\n      updateHistory(opts.push);\n    }\n  }\n}\n\nexport function get(key) {\n  let opts = params[key];\n  assert(opts);\n  return opts.value;\n}\n\nexport function go(query_string) {\n  // with the '?'\n  goInternal(query_string);\n  updateHistory(true);\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint no-bitwise:off */\n\n// Vector math functions required by the rest of the engine taken piecemeal from\n// gl-matrix and related, as well as some generic math utilities\nexports.mat3 = require('gl-mat3/create');\nexports.mat4 = require('gl-mat4/create');\n\nconst { abs, max, min, floor, round, sqrt } = Math;\n\nexport function vec1(v) {\n  return new Float32Array([v]);\n}\n\nexport function vec2(a, b) {\n  let r = new Float32Array(2);\n  if (a || b) {\n    r[0] = a;\n    r[1] = b;\n  }\n  return r;\n}\n\nexport function vec3(a, b, c) {\n  let r = new Float32Array(3);\n  if (a || b || c) {\n    r[0] = a;\n    r[1] = b;\n    r[2] = c;\n  }\n  return r;\n}\n\nexport function vec4(a, b, c, d) {\n  let r = new Float32Array(4);\n  if (a || b || c || d) {\n    r[0] = a;\n    r[1] = b;\n    r[2] = c;\n    r[3] = d;\n  }\n  return r;\n}\n\nexport const unit_vec = vec4(1, 1, 1, 1);\nexport const half_vec = vec4(0.5, 0.5, 0.5, 0.5);\nexport const zero_vec = vec4();\nexport const identity_mat3 = exports.mat3();\nexport const identity_mat4 = exports.mat4();\nexport const xaxis = vec4(1, 0, 0, 0);\nexport const yaxis = vec4(0, 1, 0, 0);\nexport const zaxis = vec4(0, 0, 1, 0);\n\nexport function v2abs(out, a) {\n  out[0] = abs(a[0]);\n  out[1] = abs(a[1]);\n  return out;\n}\n\nexport function v2add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n\nexport function v2addScale(out, a, b, s) {\n  out[0] = a[0] + b[0] * s;\n  out[1] = a[1] + b[1] * s;\n  return out;\n}\n\nexport function v2copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n\nexport function v2distSq(a, b) {\n  return (a[0] - b[0]) * (a[0] - b[0]) + (a[1] - b[1]) * (a[1] - b[1]);\n}\n\nexport function v2div(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n\nexport function v2floor(out, a) {\n  out[0] = floor(a[0]);\n  out[1] = floor(a[1]);\n  return out;\n}\n\nexport function v2lengthSq(a) {\n  return a[0] * a[0] + a[1] * a[1];\n}\n\nexport function v2lerp(out, t, a, b) {\n  let it = 1 - t;\n  out[0] = it * a[0] + t * b[0];\n  out[1] = it * a[1] + t * b[1];\n  return out;\n}\n\nexport function v2mul(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n\nexport function v2normalize(out, a) {\n  let len = a[0] * a[0] + a[1] * a[1];\n  if (len > 0) {\n    len = 1 / sqrt(len);\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n  }\n  return out;\n}\n\nexport function v2same(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n\nexport function v2scale(out, a, s) {\n  out[0] = a[0] * s;\n  out[1] = a[1] * s;\n  return out;\n}\n\nexport function v2set(out, a, b) {\n  out[0] = a;\n  out[1] = b;\n  return out;\n}\n\nexport function v2sub(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n\nexport function v3add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n\nexport function v3iAdd(a, b) {\n  a[0] += b[0];\n  a[1] += b[1];\n  a[2] += b[2];\n  return a;\n}\n\nexport function v3addScale(out, a, b, s) {\n  out[0] = a[0] + b[0] * s;\n  out[1] = a[1] + b[1] * s;\n  out[2] = a[2] + b[2] * s;\n  return out;\n}\n\nexport function v3copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n\nexport function v3cross(out, a, b) {\n  let a0 = a[0];\n  let a1 = a[1];\n  let a2 = a[2];\n  let b0 = b[0];\n  let b1 = b[1];\n  let b2 = b[2];\n  out[0] = a1 * b2 - a2 * b1;\n  out[1] = a2 * b0 - a0 * b2;\n  out[2] = a0 * b1 - a1 * b0;\n  return out;\n}\n\n// determinant of the matrix made by (columns?) [a, b, c];\nexport function v3determinant(a, b, c) {\n  // let a00 = a[0];\n  // let a01 = a[1];\n  // let a02 = a[2];\n  // let a10 = b[0];\n  // let a11 = b[1];\n  // let a12 = b[2];\n  // let a20 = c[0];\n  // let a21 = c[2];\n  // let a22 = c[2];\n  let a00 = a[0];\n  let a01 = b[0];\n  let a02 = c[0];\n  let a10 = a[1];\n  let a11 = b[1];\n  let a12 = c[1];\n  let a20 = a[2];\n  let a21 = b[2];\n  let a22 = c[2];\n\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n\nexport function v3dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\nexport function v3distSq(a, b) {\n  return (a[0] - b[0]) * (a[0] - b[0]) + (a[1] - b[1]) * (a[1] - b[1]) + (a[2] - b[2]) * (a[2] - b[2]);\n}\n\nexport function v3div(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n\nexport function v3iFloor(a) {\n  a[0] = floor(a[0]);\n  a[1] = floor(a[1]);\n  a[2] = floor(a[2]);\n  return a;\n}\n\nexport function v3floor(out, a) {\n  out[0] = floor(a[0]);\n  out[1] = floor(a[1]);\n  out[2] = floor(a[2]);\n  return out;\n}\n\nexport function v3lengthSq(a) {\n  return a[0] * a[0] + a[1] * a[1] + a[2] * a[2];\n}\n\nexport function v3lerp(out, t, a, b) {\n  let it = 1 - t;\n  out[0] = it * a[0] + t * b[0];\n  out[1] = it * a[1] + t * b[1];\n  out[2] = it * a[2] + t * b[2];\n  return out;\n}\n\nexport function v3iMax(a, b) {\n  a[0] = max(a[0], b[0]);\n  a[1] = max(a[1], b[1]);\n  a[2] = max(a[2], b[2]);\n  return a;\n}\n\nexport function v3iMin(a, b) {\n  a[0] = min(a[0], b[0]);\n  a[1] = min(a[1], b[1]);\n  a[2] = min(a[2], b[2]);\n  return a;\n}\n\nexport function v3mul(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n\nexport function v3mulMat4(out, a, m) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  out[0] = x * m[0] + y * m[4] + z * m[8];\n  out[1] = x * m[1] + y * m[5] + z * m[9];\n  out[2] = x * m[2] + y * m[6] + z * m[10];\n  return out;\n}\n\nexport function v3normalize(out, a) {\n  let len = a[0] * a[0] + a[1] * a[1] + a[2] * a[2];\n  if (len > 0) {\n    len = 1 / sqrt(len);\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n    out[2] = a[2] * len;\n  }\n  return out;\n}\n\nexport function v3iNormalize(a) {\n  let len = a[0] * a[0] + a[1] * a[1] + a[2] * a[2];\n  if (len > 0) {\n    len = 1 / sqrt(len);\n    a[0] *= len;\n    a[1] *= len;\n    a[2] *= len;\n  }\n  return a;\n}\n\n// Treats `a` as vec3 input with w assumed to be 1\n// out[0]/[1] have had perspective divide and converted to normalized 0-1 range\n// out[2] is distance\nexport function v3perspectiveProject(out, a, m) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  let w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  let invw = 0.5 / (w || 0.00001);\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) * invw + 0.5;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) * -invw + 0.5;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14];\n  return out;\n}\n\nexport function v3round(out, a) {\n  out[0] = round(a[0]);\n  out[1] = round(a[1]);\n  out[2] = round(a[2]);\n  return out;\n}\n\nexport function v3same(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n\nexport function v3scale(out, a, s) {\n  out[0] = a[0] * s;\n  out[1] = a[1] * s;\n  out[2] = a[2] * s;\n  return out;\n}\n\nexport function v3set(out, a, b, c) {\n  out[0] = a;\n  out[1] = b;\n  out[2] = c;\n  return out;\n}\n\nexport function v3sub(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n\nexport function v3iSub(a, b) {\n  a[0] -= b[0];\n  a[1] -= b[1];\n  a[2] -= b[2];\n  return a;\n}\n\nexport function v3zero(out) {\n  out[0] = out[1] = out[2] = 0;\n  return out;\n}\n\nexport function v4add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n\nexport function v4clone(a) {\n  return a.slice(0);\n}\n\nexport function v4copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n\nexport function v4lerp(out, t, a, b) {\n  let it = 1 - t;\n  out[0] = it * a[0] + t * b[0];\n  out[1] = it * a[1] + t * b[1];\n  out[2] = it * a[2] + t * b[2];\n  out[3] = it * a[3] + t * b[3];\n  return out;\n}\n\nexport function v4mul(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n\nexport function v4mulAdd(out, a, b, c) {\n  out[0] = a[0] * b[0] + c[0];\n  out[1] = a[1] * b[1] + c[1];\n  out[2] = a[2] * b[2] + c[2];\n  out[3] = a[3] * b[3] + c[3];\n  return out;\n}\n\nexport function v4same(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n\nexport function v4scale(out, a, s) {\n  out[0] = a[0] * s;\n  out[1] = a[1] * s;\n  out[2] = a[2] * s;\n  out[3] = a[3] * s;\n  return out;\n}\n\nexport function v4set(out, a, b, c, d) {\n  out[0] = a;\n  out[1] = b;\n  out[2] = c;\n  out[3] = d;\n  return out;\n}\n\nexport function v4zero(out) {\n  out[0] = out[1] = out[2] = out[3] = 0;\n  return out;\n}","module.exports={\"font_size\":8,\"imageW\":128,\"imageH\":128,\"spread\":2,\"noFilter\":1,\"channels\":1,\"char_infos\":[{\"c\":32,\"x0\":61,\"y0\":63,\"xpad\":4,\"w\":0,\"h\":0},{\"c\":33,\"x0\":92,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":1,\"h\":5},{\"c\":34,\"x0\":16,\"y0\":63,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":2},{\"c\":35,\"x0\":98,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":36,\"x0\":38,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":37,\"x0\":108,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":38,\"x0\":118,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":39,\"x0\":24,\"y0\":63,\"yoffs\":1,\"xpad\":1,\"w\":1,\"h\":2},{\"c\":40,\"x0\":2,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":5},{\"c\":41,\"x0\":9,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":5},{\"c\":42,\"x0\":109,\"y0\":54,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":3},{\"c\":43,\"x0\":117,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":3,\"h\":3},{\"c\":44,\"x0\":30,\"y0\":63,\"yoffs\":5,\"xpad\":1,\"w\":2,\"h\":2},{\"c\":45,\"x0\":67,\"y0\":63,\"yoffs\":3,\"xpad\":1,\"w\":3,\"h\":1},{\"c\":46,\"x0\":75,\"y0\":63,\"yoffs\":5,\"xpad\":1,\"w\":1,\"h\":1},{\"c\":47,\"x0\":16,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":48,\"x0\":26,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":49,\"x0\":35,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":5},{\"c\":50,\"x0\":42,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":51,\"x0\":51,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":52,\"x0\":60,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":53,\"x0\":69,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":54,\"x0\":78,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":55,\"x0\":87,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":56,\"x0\":96,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":57,\"x0\":105,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":58,\"x0\":2,\"y0\":63,\"yoffs\":2,\"xpad\":1,\"w\":1,\"h\":3},{\"c\":59,\"x0\":115,\"y0\":44,\"yoffs\":2,\"xpad\":1,\"w\":1,\"h\":4},{\"c\":60,\"x0\":114,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":61,\"x0\":8,\"y0\":63,\"yoffs\":2,\"xpad\":1,\"w\":3,\"h\":3},{\"c\":62,\"x0\":122,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":63,\"x0\":2,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":64,\"x0\":11,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":65,\"x0\":21,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":66,\"x0\":30,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":67,\"x0\":39,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":68,\"x0\":47,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":69,\"x0\":56,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":70,\"x0\":64,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":71,\"x0\":72,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":72,\"x0\":81,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":73,\"x0\":90,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":74,\"x0\":98,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":75,\"x0\":107,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":76,\"x0\":116,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":77,\"x0\":2,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":78,\"x0\":12,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":79,\"x0\":21,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":80,\"x0\":30,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":81,\"x0\":47,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":82,\"x0\":39,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":83,\"x0\":48,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":84,\"x0\":57,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":85,\"x0\":65,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":86,\"x0\":74,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":87,\"x0\":83,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":88,\"x0\":93,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":89,\"x0\":102,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":90,\"x0\":111,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":91,\"x0\":119,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":5},{\"c\":92,\"x0\":2,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":93,\"x0\":12,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":5},{\"c\":94,\"x0\":37,\"y0\":63,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":2},{\"c\":95,\"x0\":81,\"y0\":63,\"yoffs\":5,\"xpad\":1,\"w\":4,\"h\":1},{\"c\":96,\"x0\":45,\"y0\":63,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":2},{\"c\":97,\"x0\":121,\"y0\":44,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":98,\"x0\":19,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":99,\"x0\":2,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":3,\"h\":4},{\"c\":100,\"x0\":28,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":101,\"x0\":10,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":102,\"x0\":37,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":103,\"x0\":56,\"y0\":2,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":104,\"x0\":45,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":105,\"x0\":54,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":1,\"h\":5},{\"c\":106,\"x0\":2,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":7},{\"c\":107,\"x0\":60,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":108,\"x0\":69,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":1,\"h\":5},{\"c\":109,\"x0\":19,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":5,\"h\":4},{\"c\":110,\"x0\":29,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":111,\"x0\":38,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":112,\"x0\":65,\"y0\":2,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":113,\"x0\":74,\"y0\":2,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":114,\"x0\":47,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":3,\"h\":4},{\"c\":115,\"x0\":55,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":116,\"x0\":75,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":117,\"x0\":64,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":118,\"x0\":73,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":119,\"x0\":82,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":5,\"h\":4},{\"c\":120,\"x0\":92,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":3,\"h\":4},{\"c\":121,\"x0\":83,\"y0\":2,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":122,\"x0\":100,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":123,\"x0\":83,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":124,\"x0\":91,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":1,\"h\":5},{\"c\":125,\"x0\":97,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":126,\"x0\":52,\"y0\":63,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":2},{\"c\":160,\"x0\":90,\"y0\":63,\"xpad\":3,\"w\":1,\"h\":1},{\"c\":65533,\"x0\":105,\"y0\":44,\"yoffs\":2,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":128263,\"x0\":9,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":10,\"h\":7},{\"c\":128264,\"x0\":24,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":9,\"h\":7}]}\n","module.exports={\"font_size\":16,\"imageW\":1024,\"imageH\":64,\"spread\":2,\"noFilter\":1,\"channels\":1,\"char_infos\":[{\"c\":32,\"x0\":172,\"y0\":21,\"xpad\":8,\"w\":0,\"h\":0},{\"c\":33,\"x0\":137,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":2,\"h\":10},{\"c\":34,\"x0\":81,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":4},{\"c\":35,\"x0\":144,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":36,\"x0\":59,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":37,\"x0\":159,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":38,\"x0\":174,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":39,\"x0\":92,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":2,\"h\":4},{\"c\":40,\"x0\":189,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":10},{\"c\":41,\"x0\":198,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":10},{\"c\":42,\"x0\":41,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":6},{\"c\":43,\"x0\":52,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":6,\"h\":6},{\"c\":44,\"x0\":99,\"y0\":21,\"yoffs\":11,\"xpad\":2,\"w\":4,\"h\":4},{\"c\":45,\"x0\":141,\"y0\":21,\"yoffs\":7,\"xpad\":2,\"w\":6,\"h\":2},{\"c\":46,\"x0\":152,\"y0\":21,\"yoffs\":11,\"xpad\":2,\"w\":2,\"h\":2},{\"c\":47,\"x0\":207,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":48,\"x0\":222,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":49,\"x0\":235,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":10},{\"c\":50,\"x0\":244,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":51,\"x0\":257,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":52,\"x0\":270,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":53,\"x0\":283,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":54,\"x0\":296,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":55,\"x0\":309,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":56,\"x0\":322,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":57,\"x0\":335,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":58,\"x0\":63,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":2,\"h\":6},{\"c\":59,\"x0\":877,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":2,\"h\":8},{\"c\":60,\"x0\":348,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":61,\"x0\":70,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":6,\"h\":6},{\"c\":62,\"x0\":359,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":63,\"x0\":370,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":64,\"x0\":383,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":65,\"x0\":398,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":66,\"x0\":411,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":67,\"x0\":424,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":68,\"x0\":435,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":69,\"x0\":448,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":70,\"x0\":459,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":71,\"x0\":470,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":72,\"x0\":483,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":73,\"x0\":496,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":74,\"x0\":507,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":75,\"x0\":520,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":76,\"x0\":533,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":77,\"x0\":544,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":78,\"x0\":559,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":79,\"x0\":572,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":80,\"x0\":585,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":81,\"x0\":72,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":82,\"x0\":598,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":83,\"x0\":611,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":84,\"x0\":624,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":85,\"x0\":635,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":86,\"x0\":648,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":87,\"x0\":661,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":88,\"x0\":676,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":89,\"x0\":689,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":90,\"x0\":702,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":91,\"x0\":713,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":10},{\"c\":92,\"x0\":722,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":93,\"x0\":737,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":10},{\"c\":94,\"x0\":108,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":4},{\"c\":95,\"x0\":159,\"y0\":21,\"yoffs\":11,\"xpad\":2,\"w\":8,\"h\":2},{\"c\":96,\"x0\":119,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":4},{\"c\":97,\"x0\":884,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":98,\"x0\":746,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":99,\"x0\":897,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":6,\"h\":8},{\"c\":100,\"x0\":759,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":101,\"x0\":908,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":102,\"x0\":772,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":103,\"x0\":85,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":104,\"x0\":783,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":105,\"x0\":796,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":2,\"h\":10},{\"c\":106,\"x0\":2,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":14},{\"c\":107,\"x0\":803,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":108,\"x0\":816,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":2,\"h\":10},{\"c\":109,\"x0\":921,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":10,\"h\":8},{\"c\":110,\"x0\":936,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":111,\"x0\":949,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":112,\"x0\":98,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":113,\"x0\":111,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":114,\"x0\":962,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":6,\"h\":8},{\"c\":115,\"x0\":973,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":116,\"x0\":823,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":117,\"x0\":986,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":118,\"x0\":999,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":119,\"x0\":2,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":10,\"h\":8},{\"c\":120,\"x0\":17,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":6,\"h\":8},{\"c\":121,\"x0\":124,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":122,\"x0\":28,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":123,\"x0\":834,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":124,\"x0\":845,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":2,\"h\":10},{\"c\":125,\"x0\":852,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":126,\"x0\":128,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":4},{\"c\":160,\"x0\":178,\"y0\":21,\"xpad\":7,\"w\":1,\"h\":1},{\"c\":65533,\"x0\":863,\"y0\":2,\"yoffs\":3,\"xpad\":1,\"w\":9,\"h\":10},{\"c\":128263,\"x0\":11,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":19,\"h\":14},{\"c\":128264,\"x0\":35,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":19,\"h\":14}]}\n","module.exports={\"font_size\":32,\"imageW\":1024,\"imageH\":512,\"spread\":8,\"channels\":1,\"char_infos\":[{\"c\":13,\"x0\":307,\"y0\":381,\"w\":1,\"h\":1},{\"c\":32,\"x0\":325,\"y0\":381,\"xpad\":6.10156,\"w\":1,\"h\":1},{\"c\":33,\"x0\":436,\"y0\":230,\"yoffs\":4,\"xpad\":1.13281,\"w\":6,\"h\":22},{\"c\":34,\"x0\":879,\"y0\":347,\"yoffs\":4,\"w\":10,\"h\":8},{\"c\":35,\"x0\":673,\"y0\":309,\"yoffs\":10,\"w\":16,\"h\":17},{\"c\":36,\"x0\":215,\"y0\":8,\"yoffs\":1,\"xpad\":1.32031,\"w\":15,\"h\":29},{\"c\":37,\"x0\":933,\"y0\":148,\"yoffs\":4,\"xpad\":0.773438,\"w\":26,\"h\":23},{\"c\":38,\"x0\":976,\"y0\":148,\"yoffs\":4,\"xpad\":0.570313,\"w\":20,\"h\":23},{\"c\":39,\"x0\":906,\"y0\":347,\"yoffs\":4,\"w\":5,\"h\":8},{\"c\":40,\"x0\":8,\"y0\":190,\"yoffs\":5,\"w\":8,\"h\":23},{\"c\":41,\"x0\":33,\"y0\":190,\"yoffs\":5,\"xpad\":0.890625,\"w\":7,\"h\":23},{\"c\":42,\"x0\":645,\"y0\":347,\"yoffs\":2,\"w\":11,\"h\":11},{\"c\":43,\"x0\":706,\"y0\":309,\"yoffs\":9,\"xpad\":0.414063,\"w\":15,\"h\":17},{\"c\":44,\"x0\":928,\"y0\":347,\"yoffs\":22,\"w\":5,\"h\":8},{\"c\":45,\"x0\":252,\"y0\":381,\"yoffs\":16,\"w\":9,\"h\":3},{\"c\":46,\"x0\":156,\"y0\":381,\"yoffs\":22,\"w\":5,\"h\":4},{\"c\":47,\"x0\":57,\"y0\":190,\"yoffs\":4,\"w\":13,\"h\":23},{\"c\":48,\"x0\":459,\"y0\":230,\"yoffs\":5,\"xpad\":0.671875,\"w\":17,\"h\":22},{\"c\":49,\"x0\":402,\"y0\":270,\"yoffs\":5,\"xpad\":5.67188,\"w\":12,\"h\":21},{\"c\":50,\"x0\":431,\"y0\":270,\"yoffs\":5,\"xpad\":1.67188,\"w\":16,\"h\":21},{\"c\":51,\"x0\":493,\"y0\":230,\"yoffs\":5,\"xpad\":1.67188,\"w\":16,\"h\":22},{\"c\":52,\"x0\":464,\"y0\":270,\"yoffs\":5,\"xpad\":0.671875,\"w\":17,\"h\":21},{\"c\":53,\"x0\":526,\"y0\":230,\"yoffs\":5,\"xpad\":1.67188,\"w\":16,\"h\":22},{\"c\":54,\"x0\":559,\"y0\":230,\"yoffs\":5,\"xpad\":0.671875,\"w\":17,\"h\":22},{\"c\":55,\"x0\":498,\"y0\":270,\"yoffs\":5,\"xpad\":1.67188,\"w\":16,\"h\":21},{\"c\":56,\"x0\":593,\"y0\":230,\"yoffs\":5,\"xpad\":0.671875,\"w\":17,\"h\":22},{\"c\":57,\"x0\":627,\"y0\":230,\"yoffs\":5,\"xpad\":0.671875,\"w\":17,\"h\":22},{\"c\":58,\"x0\":401,\"y0\":347,\"yoffs\":12,\"w\":5,\"h\":14},{\"c\":59,\"x0\":651,\"y0\":309,\"yoffs\":12,\"w\":5,\"h\":18},{\"c\":60,\"x0\":867,\"y0\":103,\"yoffs\":4,\"w\":12,\"h\":25},{\"c\":61,\"x0\":847,\"y0\":347,\"yoffs\":14,\"w\":15,\"h\":9},{\"c\":62,\"x0\":896,\"y0\":103,\"yoffs\":4,\"w\":12,\"h\":25},{\"c\":63,\"x0\":661,\"y0\":230,\"yoffs\":4,\"xpad\":0.195313,\"w\":12,\"h\":22},{\"c\":64,\"x0\":87,\"y0\":190,\"yoffs\":7,\"xpad\":1.21094,\"w\":23,\"h\":23},{\"c\":65,\"x0\":531,\"y0\":270,\"yoffs\":5,\"w\":19,\"h\":21},{\"c\":66,\"x0\":567,\"y0\":270,\"yoffs\":5,\"xpad\":0.882813,\"w\":18,\"h\":21},{\"c\":67,\"x0\":690,\"y0\":230,\"yoffs\":5,\"xpad\":0.945313,\"w\":17,\"h\":22},{\"c\":68,\"x0\":602,\"y0\":270,\"yoffs\":5,\"xpad\":1.01563,\"w\":20,\"h\":21},{\"c\":69,\"x0\":639,\"y0\":270,\"yoffs\":5,\"xpad\":0.617188,\"w\":16,\"h\":21},{\"c\":70,\"x0\":672,\"y0\":270,\"yoffs\":5,\"w\":15,\"h\":21},{\"c\":71,\"x0\":724,\"y0\":230,\"yoffs\":5,\"xpad\":1.75,\"w\":18,\"h\":22},{\"c\":72,\"x0\":704,\"y0\":270,\"yoffs\":5,\"xpad\":2.53906,\"w\":18,\"h\":21},{\"c\":73,\"x0\":739,\"y0\":270,\"yoffs\":5,\"xpad\":2.54688,\"w\":6,\"h\":21},{\"c\":74,\"x0\":759,\"y0\":230,\"yoffs\":5,\"xpad\":2.75781,\"w\":6,\"h\":22},{\"c\":75,\"x0\":762,\"y0\":270,\"yoffs\":5,\"w\":19,\"h\":21},{\"c\":76,\"x0\":798,\"y0\":270,\"yoffs\":5,\"w\":16,\"h\":21},{\"c\":77,\"x0\":831,\"y0\":270,\"yoffs\":5,\"xpad\":2.27344,\"w\":21,\"h\":21},{\"c\":78,\"x0\":869,\"y0\":270,\"yoffs\":5,\"xpad\":2.74219,\"w\":19,\"h\":21},{\"c\":79,\"x0\":127,\"y0\":190,\"yoffs\":4,\"xpad\":1.22656,\"w\":21,\"h\":23},{\"c\":80,\"x0\":905,\"y0\":270,\"yoffs\":5,\"xpad\":0.828125,\"w\":17,\"h\":21},{\"c\":81,\"x0\":165,\"y0\":190,\"yoffs\":4,\"xpad\":1.22656,\"w\":21,\"h\":23},{\"c\":82,\"x0\":939,\"y0\":270,\"yoffs\":5,\"w\":19,\"h\":21},{\"c\":83,\"x0\":203,\"y0\":190,\"yoffs\":4,\"xpad\":1.32031,\"w\":15,\"h\":23},{\"c\":84,\"x0\":975,\"y0\":270,\"yoffs\":5,\"w\":17,\"h\":21},{\"c\":85,\"x0\":782,\"y0\":230,\"yoffs\":5,\"xpad\":2.04688,\"w\":19,\"h\":22},{\"c\":86,\"x0\":8,\"y0\":309,\"yoffs\":5,\"w\":19,\"h\":21},{\"c\":87,\"x0\":44,\"y0\":309,\"yoffs\":5,\"w\":30,\"h\":21},{\"c\":88,\"x0\":818,\"y0\":230,\"yoffs\":5,\"w\":20,\"h\":22},{\"c\":89,\"x0\":91,\"y0\":309,\"yoffs\":5,\"w\":18,\"h\":21},{\"c\":90,\"x0\":126,\"y0\":309,\"yoffs\":5,\"xpad\":0.226563,\"w\":17,\"h\":21},{\"c\":91,\"x0\":925,\"y0\":103,\"yoffs\":4,\"w\":9,\"h\":25},{\"c\":92,\"x0\":235,\"y0\":190,\"yoffs\":4,\"w\":13,\"h\":23},{\"c\":93,\"x0\":951,\"y0\":103,\"yoffs\":4,\"xpad\":1.70313,\"w\":7,\"h\":25},{\"c\":94,\"x0\":950,\"y0\":347,\"yoffs\":14,\"xpad\":0.1875,\"w\":13,\"h\":8},{\"c\":95,\"x0\":278,\"y0\":381,\"yoffs\":23,\"xpad\":0.4375,\"w\":12,\"h\":3},{\"c\":96,\"x0\":57,\"y0\":381,\"yoffs\":3,\"w\":6,\"h\":6},{\"c\":97,\"x0\":738,\"y0\":309,\"yoffs\":10,\"xpad\":1.29688,\"w\":14,\"h\":17},{\"c\":98,\"x0\":265,\"y0\":190,\"yoffs\":4,\"xpad\":0.890625,\"w\":16,\"h\":23},{\"c\":99,\"x0\":769,\"y0\":309,\"yoffs\":10,\"xpad\":0.273438,\"w\":14,\"h\":17},{\"c\":100,\"x0\":298,\"y0\":190,\"yoffs\":4,\"xpad\":2.07031,\"w\":15,\"h\":23},{\"c\":101,\"x0\":800,\"y0\":309,\"yoffs\":10,\"xpad\":1.04688,\"w\":15,\"h\":17},{\"c\":102,\"x0\":855,\"y0\":230,\"yoffs\":4,\"w\":10,\"h\":22},{\"c\":103,\"x0\":330,\"y0\":190,\"yoffs\":10,\"xpad\":2.07031,\"w\":15,\"h\":23},{\"c\":104,\"x0\":882,\"y0\":230,\"yoffs\":4,\"xpad\":1.10156,\"w\":16,\"h\":22},{\"c\":105,\"x0\":160,\"y0\":309,\"yoffs\":5,\"xpad\":1.34375,\"w\":6,\"h\":21},{\"c\":106,\"x0\":78,\"y0\":57,\"yoffs\":5,\"xpad\":1.07031,\"w\":7,\"h\":28},{\"c\":107,\"x0\":915,\"y0\":230,\"yoffs\":4,\"xpad\":0.171875,\"w\":15,\"h\":22},{\"c\":108,\"x0\":947,\"y0\":230,\"yoffs\":4,\"xpad\":1.46875,\"w\":6,\"h\":22},{\"c\":109,\"x0\":50,\"y0\":347,\"yoffs\":10,\"xpad\":1.14063,\"w\":25,\"h\":16},{\"c\":110,\"x0\":92,\"y0\":347,\"yoffs\":10,\"xpad\":2.03906,\"w\":15,\"h\":16},{\"c\":111,\"x0\":832,\"y0\":309,\"yoffs\":10,\"xpad\":0.828125,\"w\":16,\"h\":17},{\"c\":112,\"x0\":362,\"y0\":190,\"yoffs\":10,\"xpad\":0.890625,\"w\":16,\"h\":23},{\"c\":113,\"x0\":395,\"y0\":190,\"yoffs\":10,\"xpad\":2.07031,\"w\":15,\"h\":23},{\"c\":114,\"x0\":184,\"y0\":347,\"yoffs\":11,\"xpad\":0.203125,\"w\":10,\"h\":15},{\"c\":115,\"x0\":865,\"y0\":309,\"yoffs\":10,\"xpad\":0.28125,\"w\":13,\"h\":17},{\"c\":116,\"x0\":587,\"y0\":309,\"yoffs\":7,\"xpad\":0.234375,\"w\":10,\"h\":20},{\"c\":117,\"x0\":124,\"y0\":347,\"yoffs\":11,\"xpad\":1.64844,\"w\":15,\"h\":16},{\"c\":118,\"x0\":211,\"y0\":347,\"yoffs\":11,\"w\":15,\"h\":15},{\"c\":119,\"x0\":243,\"y0\":347,\"yoffs\":11,\"w\":23,\"h\":15},{\"c\":120,\"x0\":283,\"y0\":347,\"yoffs\":11,\"w\":16,\"h\":15},{\"c\":121,\"x0\":970,\"y0\":230,\"yoffs\":11,\"w\":15,\"h\":22},{\"c\":122,\"x0\":316,\"y0\":347,\"yoffs\":11,\"xpad\":0.851563,\"w\":13,\"h\":15},{\"c\":123,\"x0\":1002,\"y0\":230,\"yoffs\":6,\"w\":9,\"h\":22},{\"c\":124,\"x0\":8,\"y0\":8,\"w\":7,\"h\":32},{\"c\":125,\"x0\":8,\"y0\":270,\"yoffs\":6,\"xpad\":0.460938,\"w\":8,\"h\":22},{\"c\":126,\"x0\":127,\"y0\":381,\"yoffs\":16,\"xpad\":0.3125,\"w\":12,\"h\":5},{\"c\":144,\"x0\":980,\"y0\":347,\"yoffs\":-5,\"w\":14,\"h\":8},{\"c\":160,\"x0\":343,\"y0\":381,\"xpad\":6.10156,\"w\":1,\"h\":1},{\"c\":161,\"x0\":33,\"y0\":270,\"yoffs\":4,\"xpad\":1.13281,\"w\":6,\"h\":22},{\"c\":162,\"x0\":427,\"y0\":190,\"yoffs\":7,\"xpad\":0.273438,\"w\":14,\"h\":23},{\"c\":163,\"x0\":183,\"y0\":309,\"yoffs\":5,\"xpad\":0.304688,\"w\":14,\"h\":21},{\"c\":164,\"x0\":614,\"y0\":309,\"yoffs\":9,\"xpad\":0.328125,\"w\":20,\"h\":20},{\"c\":165,\"x0\":214,\"y0\":309,\"yoffs\":5,\"w\":18,\"h\":21},{\"c\":166,\"x0\":458,\"y0\":190,\"yoffs\":4,\"xpad\":2.10156,\"w\":6,\"h\":23},{\"c\":167,\"x0\":102,\"y0\":57,\"yoffs\":2,\"xpad\":1.25,\"w\":17,\"h\":28},{\"c\":168,\"x0\":178,\"y0\":381,\"yoffs\":4,\"xpad\":0.453125,\"w\":9,\"h\":4},{\"c\":169,\"x0\":481,\"y0\":190,\"yoffs\":4,\"xpad\":0.625,\"w\":25,\"h\":23},{\"c\":170,\"x0\":551,\"y0\":347,\"yoffs\":4,\"xpad\":0.296875,\"w\":10,\"h\":12},{\"c\":171,\"x0\":673,\"y0\":347,\"yoffs\":13,\"xpad\":0.140625,\"w\":11,\"h\":11},{\"c\":172,\"x0\":729,\"y0\":347,\"yoffs\":13,\"xpad\":0.382813,\"w\":15,\"h\":10},{\"c\":173,\"x0\":361,\"y0\":381,\"xpad\":2.94531,\"w\":1,\"h\":1},{\"c\":174,\"x0\":249,\"y0\":309,\"yoffs\":1,\"xpad\":0.3125,\"w\":22,\"h\":21},{\"c\":175,\"x0\":204,\"y0\":381,\"yoffs\":4,\"w\":9,\"h\":4},{\"c\":176,\"x0\":32,\"y0\":381,\"yoffs\":4,\"w\":8,\"h\":7},{\"c\":177,\"x0\":895,\"y0\":309,\"yoffs\":9,\"w\":14,\"h\":17},{\"c\":178,\"x0\":423,\"y0\":347,\"yoffs\":2,\"xpad\":0.890625,\"w\":11,\"h\":14},{\"c\":179,\"x0\":156,\"y0\":347,\"yoffs\":2,\"xpad\":1.52344,\"w\":11,\"h\":16},{\"c\":180,\"x0\":80,\"y0\":381,\"yoffs\":3,\"w\":6,\"h\":6},{\"c\":181,\"x0\":56,\"y0\":270,\"yoffs\":11,\"xpad\":1.85938,\"w\":15,\"h\":22},{\"c\":182,\"x0\":288,\"y0\":309,\"yoffs\":5,\"xpad\":0.5,\"w\":26,\"h\":21},{\"c\":183,\"x0\":230,\"y0\":381,\"yoffs\":16,\"w\":5,\"h\":4},{\"c\":184,\"x0\":8,\"y0\":381,\"yoffs\":25,\"xpad\":0.0703125,\"w\":7,\"h\":8},{\"c\":185,\"x0\":451,\"y0\":347,\"yoffs\":2,\"xpad\":0.6875,\"w\":10,\"h\":14},{\"c\":186,\"x0\":578,\"y0\":347,\"yoffs\":4,\"xpad\":0.625,\"w\":11,\"h\":12},{\"c\":187,\"x0\":701,\"y0\":347,\"yoffs\":13,\"xpad\":0.140625,\"w\":11,\"h\":11},{\"c\":188,\"x0\":247,\"y0\":8,\"yoffs\":2,\"xpad\":0.0546875,\"w\":25,\"h\":29},{\"c\":189,\"x0\":136,\"y0\":57,\"yoffs\":2,\"xpad\":1.22656,\"w\":25,\"h\":28},{\"c\":190,\"x0\":289,\"y0\":8,\"yoffs\":2,\"xpad\":0.109375,\"w\":26,\"h\":29},{\"c\":191,\"x0\":88,\"y0\":270,\"yoffs\":6,\"xpad\":0.09375,\"w\":13,\"h\":22},{\"c\":192,\"x0\":178,\"y0\":57,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":193,\"x0\":214,\"y0\":57,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":194,\"x0\":250,\"y0\":57,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":195,\"x0\":648,\"y0\":103,\"w\":19,\"h\":26},{\"c\":196,\"x0\":252,\"y0\":103,\"yoffs\":-1,\"w\":19,\"h\":27},{\"c\":197,\"x0\":286,\"y0\":57,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":198,\"x0\":331,\"y0\":309,\"yoffs\":5,\"xpad\":0.28125,\"w\":27,\"h\":21},{\"c\":199,\"x0\":322,\"y0\":57,\"yoffs\":5,\"xpad\":0.945313,\"w\":17,\"h\":28},{\"c\":200,\"x0\":356,\"y0\":57,\"yoffs\":-2,\"xpad\":0.617188,\"w\":16,\"h\":28},{\"c\":201,\"x0\":389,\"y0\":57,\"yoffs\":-2,\"xpad\":0.617188,\"w\":16,\"h\":28},{\"c\":202,\"x0\":422,\"y0\":57,\"yoffs\":-2,\"xpad\":0.617188,\"w\":16,\"h\":28},{\"c\":203,\"x0\":288,\"y0\":103,\"yoffs\":-1,\"xpad\":0.617188,\"w\":16,\"h\":27},{\"c\":204,\"x0\":455,\"y0\":57,\"yoffs\":-2,\"xpad\":1.54688,\"w\":7,\"h\":28},{\"c\":205,\"x0\":479,\"y0\":57,\"yoffs\":-2,\"xpad\":0.546875,\"w\":8,\"h\":28},{\"c\":206,\"x0\":504,\"y0\":57,\"yoffs\":-2,\"w\":11,\"h\":28},{\"c\":207,\"x0\":321,\"y0\":103,\"yoffs\":-1,\"w\":9,\"h\":27},{\"c\":208,\"x0\":375,\"y0\":309,\"yoffs\":5,\"xpad\":1.22656,\"w\":20,\"h\":21},{\"c\":209,\"x0\":684,\"y0\":103,\"xpad\":2.74219,\"w\":19,\"h\":26},{\"c\":210,\"x0\":332,\"y0\":8,\"yoffs\":-2,\"xpad\":1.22656,\"w\":21,\"h\":29},{\"c\":211,\"x0\":370,\"y0\":8,\"yoffs\":-2,\"xpad\":1.22656,\"w\":21,\"h\":29},{\"c\":212,\"x0\":408,\"y0\":8,\"yoffs\":-2,\"xpad\":1.22656,\"w\":21,\"h\":29},{\"c\":213,\"x0\":347,\"y0\":103,\"xpad\":1.22656,\"w\":21,\"h\":27},{\"c\":214,\"x0\":532,\"y0\":57,\"yoffs\":-1,\"xpad\":1.22656,\"w\":21,\"h\":28},{\"c\":215,\"x0\":346,\"y0\":347,\"yoffs\":11,\"xpad\":0.359375,\"w\":15,\"h\":15},{\"c\":216,\"x0\":523,\"y0\":190,\"yoffs\":4,\"xpad\":1.22656,\"w\":21,\"h\":23},{\"c\":217,\"x0\":446,\"y0\":8,\"yoffs\":-2,\"xpad\":2.04688,\"w\":19,\"h\":29},{\"c\":218,\"x0\":482,\"y0\":8,\"yoffs\":-2,\"xpad\":2.04688,\"w\":19,\"h\":29},{\"c\":219,\"x0\":518,\"y0\":8,\"yoffs\":-2,\"xpad\":2.04688,\"w\":19,\"h\":29},{\"c\":220,\"x0\":570,\"y0\":57,\"yoffs\":-1,\"xpad\":2.04688,\"w\":19,\"h\":28},{\"c\":221,\"x0\":606,\"y0\":57,\"yoffs\":-2,\"w\":18,\"h\":28},{\"c\":222,\"x0\":412,\"y0\":309,\"yoffs\":5,\"xpad\":1.00781,\"w\":17,\"h\":21},{\"c\":223,\"x0\":446,\"y0\":309,\"yoffs\":5,\"xpad\":1.30469,\"w\":17,\"h\":21},{\"c\":224,\"x0\":69,\"y0\":148,\"yoffs\":3,\"xpad\":1.29688,\"w\":14,\"h\":24},{\"c\":225,\"x0\":100,\"y0\":148,\"yoffs\":3,\"xpad\":1.29688,\"w\":14,\"h\":24},{\"c\":226,\"x0\":131,\"y0\":148,\"yoffs\":3,\"xpad\":1.29688,\"w\":14,\"h\":24},{\"c\":227,\"x0\":561,\"y0\":190,\"yoffs\":4,\"xpad\":1.29688,\"w\":14,\"h\":23},{\"c\":228,\"x0\":592,\"y0\":190,\"yoffs\":4,\"xpad\":1.29688,\"w\":14,\"h\":23},{\"c\":229,\"x0\":975,\"y0\":103,\"yoffs\":2,\"xpad\":1.29688,\"w\":14,\"h\":25},{\"c\":230,\"x0\":926,\"y0\":309,\"yoffs\":10,\"xpad\":0.960938,\"w\":24,\"h\":17},{\"c\":231,\"x0\":623,\"y0\":190,\"yoffs\":10,\"xpad\":0.273438,\"w\":14,\"h\":23},{\"c\":232,\"x0\":162,\"y0\":148,\"yoffs\":3,\"xpad\":1.04688,\"w\":15,\"h\":24},{\"c\":233,\"x0\":194,\"y0\":148,\"yoffs\":3,\"xpad\":1.04688,\"w\":15,\"h\":24},{\"c\":234,\"x0\":226,\"y0\":148,\"yoffs\":3,\"xpad\":1.04688,\"w\":15,\"h\":24},{\"c\":235,\"x0\":654,\"y0\":190,\"yoffs\":4,\"xpad\":1.04688,\"w\":15,\"h\":23},{\"c\":236,\"x0\":686,\"y0\":190,\"yoffs\":3,\"xpad\":1.34375,\"w\":6,\"h\":23},{\"c\":237,\"x0\":709,\"y0\":190,\"yoffs\":3,\"w\":8,\"h\":23},{\"c\":238,\"x0\":734,\"y0\":190,\"yoffs\":3,\"w\":11,\"h\":23},{\"c\":239,\"x0\":118,\"y0\":270,\"yoffs\":4,\"w\":9,\"h\":22},{\"c\":240,\"x0\":762,\"y0\":190,\"yoffs\":4,\"xpad\":1.53125,\"w\":15,\"h\":23},{\"c\":241,\"x0\":144,\"y0\":270,\"yoffs\":4,\"xpad\":2.03906,\"w\":15,\"h\":22},{\"c\":242,\"x0\":258,\"y0\":148,\"yoffs\":3,\"xpad\":0.828125,\"w\":16,\"h\":24},{\"c\":243,\"x0\":291,\"y0\":148,\"yoffs\":3,\"xpad\":0.828125,\"w\":16,\"h\":24},{\"c\":244,\"x0\":324,\"y0\":148,\"yoffs\":3,\"xpad\":0.828125,\"w\":16,\"h\":24},{\"c\":245,\"x0\":794,\"y0\":190,\"yoffs\":4,\"xpad\":0.828125,\"w\":16,\"h\":23},{\"c\":246,\"x0\":827,\"y0\":190,\"yoffs\":4,\"xpad\":0.828125,\"w\":16,\"h\":23},{\"c\":247,\"x0\":478,\"y0\":347,\"yoffs\":11,\"xpad\":0.453125,\"w\":14,\"h\":14},{\"c\":248,\"x0\":967,\"y0\":309,\"yoffs\":10,\"xpad\":0.828125,\"w\":16,\"h\":17},{\"c\":249,\"x0\":357,\"y0\":148,\"yoffs\":3,\"xpad\":1.64844,\"w\":15,\"h\":24},{\"c\":250,\"x0\":389,\"y0\":148,\"yoffs\":3,\"xpad\":1.64844,\"w\":15,\"h\":24},{\"c\":251,\"x0\":421,\"y0\":148,\"yoffs\":3,\"xpad\":1.64844,\"w\":15,\"h\":24},{\"c\":252,\"x0\":860,\"y0\":190,\"yoffs\":4,\"xpad\":1.64844,\"w\":15,\"h\":23},{\"c\":253,\"x0\":64,\"y0\":8,\"yoffs\":3,\"w\":15,\"h\":30},{\"c\":254,\"x0\":554,\"y0\":8,\"yoffs\":4,\"xpad\":0.890625,\"w\":16,\"h\":29},{\"c\":255,\"x0\":587,\"y0\":8,\"yoffs\":4,\"w\":15,\"h\":29},{\"c\":256,\"x0\":720,\"y0\":103,\"w\":19,\"h\":26},{\"c\":257,\"x0\":892,\"y0\":190,\"yoffs\":4,\"xpad\":1.29688,\"w\":14,\"h\":23},{\"c\":258,\"x0\":385,\"y0\":103,\"yoffs\":-1,\"w\":19,\"h\":27},{\"c\":259,\"x0\":453,\"y0\":148,\"yoffs\":3,\"xpad\":1.29688,\"w\":14,\"h\":24},{\"c\":260,\"x0\":641,\"y0\":57,\"yoffs\":5,\"w\":21,\"h\":28},{\"c\":261,\"x0\":923,\"y0\":190,\"yoffs\":10,\"w\":16,\"h\":23},{\"c\":262,\"x0\":619,\"y0\":8,\"yoffs\":-2,\"xpad\":0.945313,\"w\":17,\"h\":29},{\"c\":263,\"x0\":484,\"y0\":148,\"yoffs\":3,\"xpad\":0.273438,\"w\":14,\"h\":24},{\"c\":268,\"x0\":653,\"y0\":8,\"yoffs\":-2,\"xpad\":0.945313,\"w\":17,\"h\":29},{\"c\":269,\"x0\":515,\"y0\":148,\"yoffs\":3,\"xpad\":0.273438,\"w\":14,\"h\":24},{\"c\":270,\"x0\":679,\"y0\":57,\"yoffs\":-2,\"xpad\":1.01563,\"w\":20,\"h\":28},{\"c\":271,\"x0\":956,\"y0\":190,\"yoffs\":4,\"w\":22,\"h\":23},{\"c\":272,\"x0\":480,\"y0\":309,\"yoffs\":5,\"xpad\":1.22656,\"w\":20,\"h\":21},{\"c\":273,\"x0\":995,\"y0\":190,\"yoffs\":4,\"xpad\":0.0703125,\"w\":17,\"h\":23},{\"c\":274,\"x0\":756,\"y0\":103,\"xpad\":0.617188,\"w\":16,\"h\":26},{\"c\":275,\"x0\":8,\"y0\":230,\"yoffs\":4,\"xpad\":1.04688,\"w\":15,\"h\":23},{\"c\":278,\"x0\":421,\"y0\":103,\"yoffs\":-1,\"xpad\":0.617188,\"w\":16,\"h\":27},{\"c\":279,\"x0\":40,\"y0\":230,\"yoffs\":4,\"xpad\":1.04688,\"w\":15,\"h\":23},{\"c\":280,\"x0\":716,\"y0\":57,\"yoffs\":5,\"xpad\":0.617188,\"w\":16,\"h\":28},{\"c\":281,\"x0\":72,\"y0\":230,\"yoffs\":10,\"xpad\":1.04688,\"w\":15,\"h\":23},{\"c\":282,\"x0\":749,\"y0\":57,\"yoffs\":-2,\"xpad\":0.617188,\"w\":16,\"h\":28},{\"c\":283,\"x0\":546,\"y0\":148,\"yoffs\":3,\"xpad\":1.04688,\"w\":15,\"h\":24},{\"c\":286,\"x0\":782,\"y0\":57,\"yoffs\":-1,\"xpad\":1.75,\"w\":18,\"h\":28},{\"c\":287,\"x0\":96,\"y0\":8,\"yoffs\":3,\"xpad\":2.07031,\"w\":15,\"h\":30},{\"c\":290,\"x0\":817,\"y0\":57,\"yoffs\":5,\"xpad\":1.75,\"w\":18,\"h\":28},{\"c\":291,\"x0\":32,\"y0\":8,\"yoffs\":2,\"xpad\":2.07031,\"w\":15,\"h\":31},{\"c\":298,\"x0\":789,\"y0\":103,\"w\":9,\"h\":26},{\"c\":299,\"x0\":176,\"y0\":270,\"yoffs\":4,\"w\":9,\"h\":22},{\"c\":302,\"x0\":852,\"y0\":57,\"yoffs\":5,\"xpad\":0.546875,\"w\":8,\"h\":28},{\"c\":303,\"x0\":877,\"y0\":57,\"yoffs\":5,\"w\":8,\"h\":28},{\"c\":304,\"x0\":454,\"y0\":103,\"yoffs\":-1,\"xpad\":1.54688,\"w\":7,\"h\":27},{\"c\":305,\"x0\":378,\"y0\":347,\"yoffs\":11,\"xpad\":1.34375,\"w\":6,\"h\":15},{\"c\":310,\"x0\":687,\"y0\":8,\"yoffs\":5,\"w\":19,\"h\":29},{\"c\":311,\"x0\":128,\"y0\":8,\"yoffs\":4,\"xpad\":0.171875,\"w\":15,\"h\":30},{\"c\":313,\"x0\":902,\"y0\":57,\"yoffs\":-2,\"w\":16,\"h\":28},{\"c\":314,\"x0\":815,\"y0\":103,\"w\":8,\"h\":26},{\"c\":315,\"x0\":723,\"y0\":8,\"yoffs\":5,\"w\":16,\"h\":29},{\"c\":316,\"x0\":160,\"y0\":8,\"yoffs\":4,\"xpad\":1.46875,\"w\":6,\"h\":30},{\"c\":317,\"x0\":202,\"y0\":270,\"yoffs\":4,\"w\":16,\"h\":22},{\"c\":318,\"x0\":235,\"y0\":270,\"yoffs\":4,\"w\":12,\"h\":22},{\"c\":321,\"x0\":517,\"y0\":309,\"yoffs\":5,\"xpad\":0.046875,\"w\":16,\"h\":21},{\"c\":322,\"x0\":264,\"y0\":270,\"yoffs\":4,\"w\":11,\"h\":22},{\"c\":323,\"x0\":935,\"y0\":57,\"yoffs\":-2,\"xpad\":2.74219,\"w\":19,\"h\":28},{\"c\":324,\"x0\":104,\"y0\":230,\"yoffs\":3,\"xpad\":2.03906,\"w\":15,\"h\":23},{\"c\":325,\"x0\":756,\"y0\":8,\"yoffs\":5,\"xpad\":2.74219,\"w\":19,\"h\":29},{\"c\":326,\"x0\":578,\"y0\":148,\"yoffs\":10,\"xpad\":2.03906,\"w\":15,\"h\":24},{\"c\":327,\"x0\":971,\"y0\":57,\"yoffs\":-2,\"xpad\":2.74219,\"w\":19,\"h\":28},{\"c\":328,\"x0\":136,\"y0\":230,\"yoffs\":3,\"xpad\":2.03906,\"w\":15,\"h\":23},{\"c\":332,\"x0\":478,\"y0\":103,\"xpad\":1.22656,\"w\":21,\"h\":27},{\"c\":333,\"x0\":168,\"y0\":230,\"yoffs\":4,\"xpad\":0.828125,\"w\":16,\"h\":23},{\"c\":336,\"x0\":792,\"y0\":8,\"yoffs\":-2,\"xpad\":1.22656,\"w\":21,\"h\":29},{\"c\":337,\"x0\":610,\"y0\":148,\"yoffs\":3,\"xpad\":0.828125,\"w\":16,\"h\":24},{\"c\":338,\"x0\":292,\"y0\":270,\"yoffs\":5,\"xpad\":0.390625,\"w\":29,\"h\":22},{\"c\":339,\"x0\":8,\"y0\":347,\"yoffs\":10,\"xpad\":0.65625,\"w\":25,\"h\":17},{\"c\":340,\"x0\":8,\"y0\":103,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":341,\"x0\":201,\"y0\":230,\"yoffs\":3,\"xpad\":0.203125,\"w\":10,\"h\":23},{\"c\":342,\"x0\":830,\"y0\":8,\"yoffs\":5,\"w\":19,\"h\":29},{\"c\":343,\"x0\":228,\"y0\":230,\"yoffs\":11,\"xpad\":0.203125,\"w\":10,\"h\":23},{\"c\":344,\"x0\":44,\"y0\":103,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":345,\"x0\":255,\"y0\":230,\"yoffs\":3,\"xpad\":0.203125,\"w\":10,\"h\":23},{\"c\":346,\"x0\":866,\"y0\":8,\"yoffs\":-2,\"xpad\":1.32031,\"w\":15,\"h\":29},{\"c\":347,\"x0\":643,\"y0\":148,\"yoffs\":3,\"xpad\":0.28125,\"w\":13,\"h\":24},{\"c\":350,\"x0\":898,\"y0\":8,\"yoffs\":4,\"xpad\":1.32031,\"w\":15,\"h\":29},{\"c\":351,\"x0\":282,\"y0\":230,\"yoffs\":10,\"xpad\":0.28125,\"w\":13,\"h\":23},{\"c\":352,\"x0\":930,\"y0\":8,\"yoffs\":-2,\"xpad\":1.32031,\"w\":15,\"h\":29},{\"c\":353,\"x0\":673,\"y0\":148,\"yoffs\":3,\"xpad\":0.28125,\"w\":13,\"h\":24},{\"c\":354,\"x0\":80,\"y0\":103,\"yoffs\":5,\"w\":17,\"h\":28},{\"c\":355,\"x0\":840,\"y0\":103,\"yoffs\":7,\"xpad\":0.234375,\"w\":10,\"h\":26},{\"c\":356,\"x0\":114,\"y0\":103,\"yoffs\":-2,\"w\":17,\"h\":28},{\"c\":357,\"x0\":312,\"y0\":230,\"yoffs\":4,\"w\":15,\"h\":23},{\"c\":362,\"x0\":516,\"y0\":103,\"xpad\":2.04688,\"w\":19,\"h\":27},{\"c\":363,\"x0\":344,\"y0\":230,\"yoffs\":4,\"xpad\":1.64844,\"w\":15,\"h\":23},{\"c\":366,\"x0\":962,\"y0\":8,\"yoffs\":-2,\"xpad\":2.04688,\"w\":19,\"h\":29},{\"c\":367,\"x0\":8,\"y0\":148,\"yoffs\":2,\"xpad\":1.64844,\"w\":15,\"h\":25},{\"c\":368,\"x0\":8,\"y0\":57,\"yoffs\":-2,\"xpad\":2.04688,\"w\":19,\"h\":29},{\"c\":369,\"x0\":703,\"y0\":148,\"yoffs\":3,\"xpad\":1.64844,\"w\":15,\"h\":24},{\"c\":370,\"x0\":148,\"y0\":103,\"yoffs\":5,\"xpad\":2.04688,\"w\":19,\"h\":28},{\"c\":371,\"x0\":338,\"y0\":270,\"yoffs\":11,\"w\":17,\"h\":22},{\"c\":376,\"x0\":552,\"y0\":103,\"yoffs\":-1,\"w\":18,\"h\":27},{\"c\":377,\"x0\":184,\"y0\":103,\"yoffs\":-2,\"xpad\":0.226563,\"w\":17,\"h\":28},{\"c\":378,\"x0\":376,\"y0\":230,\"yoffs\":3,\"xpad\":0.851563,\"w\":13,\"h\":23},{\"c\":379,\"x0\":587,\"y0\":103,\"yoffs\":-1,\"xpad\":0.226563,\"w\":17,\"h\":27},{\"c\":380,\"x0\":372,\"y0\":270,\"yoffs\":4,\"xpad\":0.851563,\"w\":13,\"h\":22},{\"c\":381,\"x0\":218,\"y0\":103,\"yoffs\":-2,\"xpad\":0.226563,\"w\":17,\"h\":28},{\"c\":382,\"x0\":406,\"y0\":230,\"yoffs\":3,\"xpad\":0.851563,\"w\":13,\"h\":23},{\"c\":402,\"x0\":40,\"y0\":148,\"yoffs\":4,\"w\":12,\"h\":25},{\"c\":536,\"x0\":183,\"y0\":8,\"yoffs\":4,\"xpad\":1.32031,\"w\":15,\"h\":30},{\"c\":537,\"x0\":735,\"y0\":148,\"yoffs\":10,\"xpad\":0.28125,\"w\":13,\"h\":24},{\"c\":538,\"x0\":44,\"y0\":57,\"yoffs\":5,\"w\":17,\"h\":29},{\"c\":539,\"x0\":621,\"y0\":103,\"yoffs\":7,\"xpad\":0.234375,\"w\":10,\"h\":27},{\"c\":8226,\"x0\":103,\"y0\":381,\"yoffs\":13,\"xpad\":0.28125,\"w\":7,\"h\":6},{\"c\":8482,\"x0\":606,\"y0\":347,\"yoffs\":5,\"xpad\":0.882813,\"w\":22,\"h\":12},{\"c\":8592,\"x0\":761,\"y0\":347,\"yoffs\":11,\"xpad\":0.882813,\"w\":26,\"h\":10},{\"c\":8593,\"x0\":765,\"y0\":148,\"yoffs\":4,\"xpad\":7.88281,\"w\":19,\"h\":24},{\"c\":8594,\"x0\":804,\"y0\":347,\"yoffs\":11,\"xpad\":0.882813,\"w\":26,\"h\":10},{\"c\":8595,\"x0\":801,\"y0\":148,\"yoffs\":4,\"xpad\":7.88281,\"w\":19,\"h\":24},{\"c\":8734,\"x0\":509,\"y0\":347,\"yoffs\":11,\"xpad\":0.6875,\"w\":25,\"h\":14},{\"c\":9742,\"x0\":837,\"y0\":148,\"yoffs\":4,\"w\":31,\"h\":24},{\"c\":9743,\"x0\":885,\"y0\":148,\"yoffs\":4,\"w\":31,\"h\":24},{\"c\":65533,\"x0\":550,\"y0\":309,\"yoffs\":5,\"w\":20,\"h\":21}]}","/*eslint global-require:off*/\nconst glov_local_storage = require('./glov/local_storage.js');\nglov_local_storage.storage_prefix = 'glovjs-playground'; // Before requiring anything else that might load from this\n\nconst glov_engine = require('./glov/engine.js');\nconst glov_font = require('./glov/font.js');\nconst input = require('./glov/input.js');\nconst glov_particles = require('./glov/particles.js');\nconst glov_sprites = require('./glov/sprites.js');\nconst glov_sprite_animation = require('./glov/sprite_animation.js');\nconst glov_transition = require('./glov/transition.js');\nconst glov_ui = require('./glov/ui.js');\nconst glov_ui_test = require('./glov/ui_test.js');\nconst particle_data = require('./particle_data.js');\nconst { soundLoad, soundPlay, soundPlayMusic, FADE_IN, FADE_OUT } = require('./glov/sound.js');\nconst { vec2, vec4, v4clone, v4copy } = require('./glov/vmath.js');\n\nwindow.Z = window.Z || {};\nZ.BACKGROUND = 1;\nZ.SPRITES = 10;\nZ.PARTICLES = 20;\nZ.UI_TEST = 200;\n\n// let app = exports;\n// Virtual viewport for our game logic\nexport const game_width = 320;\nexport const game_height = 240;\n\nexport let sprites = {};\n\nconst music_file = 'music_test.webm';\n\n// Persistent flags system for testing parameters\nlet flags = {};\nfunction flagGet(key, dflt) {\n  if (flags[key] === undefined) {\n    flags[key] = glov_local_storage.getJSON(`flag_${key}`, dflt) || false;\n  }\n  return flags[key];\n}\nfunction flagToggle(key) {\n  flags[key] = !flagGet(key);\n  glov_local_storage.setJSON(`flag_${key}`, flags[key]);\n}\nfunction flagSet(key, value) {\n  flags[key] = value;\n  glov_local_storage.setJSON(`flag_${key}`, flags[key]);\n}\n\nconst color_white = vec4(1, 1, 1, 1);\n\nfunction perfTestSprites() {\n  if (!sprites.test) {\n    sprites.test = [glov_sprites.create({ name: 'test', size: vec2(1, 1), origin: vec2(0.5, 0.5) }), glov_sprites.create({ url: 'img/test.png?1', size: vec2(1, 1), origin: vec2(0.5, 0.5) })];\n  }\n\n  let mode = 2;\n  let count = [80000, // one sprite, pre-sorted\n  40000, // one sprite, unsorted\n  20000, // two sprites, unsorted, small batches\n  60000, // two sprites, sorted, bigger batches, sprite API\n  60000][mode];\n  if (mode === 3 || mode === 4) {\n    for (let ii = 0; ii < count;) {\n      let subc = Math.floor(500 + Math.random() * 100);\n      let idx = mode <= 1 ? 0 : Math.round(Math.random());\n      let sprite = sprites.test[idx];\n      let z = Math.random();\n      for (let jj = 0; jj < subc; ++jj) {\n        if (mode === 4) {\n          // glov_sprites.queueraw(sprite.texs,\n          //   Math.random() * game_width - 3, Math.random() * game_height - 3, z,\n          //   6, 6, 0, 0, 1, 1, color_white);\n          glov_sprites.queuesprite(sprite, Math.random() * game_width, Math.random() * game_height, z, 6 * sprite.size[0], 6 * sprite.size[1], 0, sprite.uvs, color_white);\n        } else {\n          sprites.test[idx].draw({\n            x: Math.random() * game_width,\n            y: Math.random() * game_height,\n            z,\n            w: 6, h: 6\n          });\n        }\n      }\n      ii += subc;\n    }\n  } else {\n    for (let ii = 0; ii < count; ++ii) {\n      let idx = mode <= 1 ? 0 : Math.round(Math.random());\n      sprites.test[idx].draw({\n        x: Math.random() * game_width,\n        y: Math.random() * game_height,\n        z: mode === 0 ? ii : Math.random(),\n        w: 6, h: 6\n      });\n    }\n  }\n}\n\nexport function main() {\n  if (!glov_engine.startup({\n    game_width,\n    game_height,\n    pixely: flagGet('pixely', 'on'),\n    viewport_postprocess: false\n  })) {\n    return;\n  }\n\n  // const font = glov_engine.font;\n\n  // Perfect sizes for pixely modes\n  glov_ui.scaleSizes(13 / 32);\n  glov_ui.setFontHeight(8);\n\n  const createSprite = glov_sprites.create;\n  const createAnimation = glov_sprite_animation.create;\n\n  const color_red = vec4(1, 0, 0, 1);\n  const color_yellow = vec4(1, 1, 0, 1);\n\n  // Cache KEYS\n  const KEYS = input.KEYS;\n  const PAD = input.PAD;\n\n  const sprite_size = 64;\n  function initGraphics() {\n    glov_particles.preloadParticleData(particle_data);\n\n    soundLoad('test');\n\n    sprites.white = createSprite({ url: 'white' });\n\n    sprites.test_tint = createSprite({\n      name: 'tinted',\n      ws: [16, 16, 16, 16],\n      hs: [16, 16, 16],\n      size: vec2(sprite_size, sprite_size),\n      layers: 2,\n      origin: vec2(0.5, 0.5)\n    });\n    sprites.animation = createAnimation({\n      idle_left: {\n        frames: [0, 1],\n        times: [200, 500]\n      },\n      idle_right: {\n        frames: [3, 2],\n        times: [200, 500]\n      }\n    });\n    sprites.animation.setState('idle_left');\n\n    sprites.game_bg = createSprite({\n      url: 'white',\n      size: vec2(game_width, game_height)\n    });\n  }\n\n  let last_particles = 0;\n\n  function test(dt) {\n    if (!test.color_sprite) {\n      test.color_sprite = v4clone(color_white);\n      test.character = {\n        x: Math.random() * (game_width - sprite_size - 200) + sprite_size * 0.5 + 200,\n        y: Math.random() * (game_height - sprite_size) + sprite_size * 0.5\n      };\n    }\n\n    if (flagGet('ui_test')) {\n      // let clip_test = 30;\n      // glov_sprites.clip(Z.UI_TEST - 10, Z.UI_TEST + 10, clip_test, clip_test, 320-clip_test * 2, 240-clip_test * 2);\n      glov_ui_test.run(10, 10, Z.UI_TEST);\n    }\n    if (flagGet('font_test')) {\n      glov_ui_test.runFontTest(105, 85);\n    }\n\n    test.character.dx = 0;\n    test.character.dx -= input.keyDown(KEYS.LEFT) + input.keyDown(KEYS.A) + input.padButtonDown(PAD.LEFT);\n    test.character.dx += input.keyDown(KEYS.RIGHT) + input.keyDown(KEYS.D) + input.padButtonDown(PAD.RIGHT);\n    test.character.dy = 0;\n    test.character.dy -= input.keyDown(KEYS.UP) + input.keyDown(KEYS.W) + input.padButtonDown(PAD.UP);\n    test.character.dy += input.keyDown(KEYS.DOWN) + input.keyDown(KEYS.S) + input.padButtonDown(PAD.DOWN);\n    if (test.character.dx < 0) {\n      sprites.animation.setState('idle_left');\n    } else if (test.character.dx > 0) {\n      sprites.animation.setState('idle_right');\n    }\n\n    test.character.x += test.character.dx * 0.05;\n    test.character.y += test.character.dy * 0.05;\n    let bounds = {\n      x: test.character.x - sprite_size / 2,\n      y: test.character.y - sprite_size / 2,\n      w: sprite_size,\n      h: sprite_size\n    };\n    if (input.mouseDown() && input.mouseOver(bounds)) {\n      v4copy(test.color_sprite, color_yellow);\n    } else if (input.click(bounds)) {\n      v4copy(test.color_sprite, test.color_sprite[2] === 0 ? color_white : color_red);\n      soundPlay('test');\n    } else if (input.mouseOver(bounds)) {\n      v4copy(test.color_sprite, color_white);\n      test.color_sprite[3] = 0.5;\n    } else {\n      v4copy(test.color_sprite, color_white);\n      test.color_sprite[3] = 1;\n    }\n\n    sprites.game_bg.draw({\n      x: 0, y: 0, z: Z.BACKGROUND,\n      color: [0, 0.72, 1, 1]\n    });\n    sprites.test_tint.drawDualTint({\n      x: test.character.x,\n      y: test.character.y,\n      z: Z.SPRITES,\n      color: [1, 1, 0, 1],\n      color1: [1, 0, 1, 1],\n      frame: sprites.animation.getFrame(dt)\n    });\n\n    let font_test_idx = 0;\n\n    glov_ui.print(glov_font.styleColored(null, 0x000000ff), test.character.x, test.character.y + ++font_test_idx * 20, Z.SPRITES, 'TEXT!');\n    let font_style = glov_font.style(null, {\n      outline_width: 1.0,\n      outline_color: 0x800000ff,\n      glow_xoffs: 3.25,\n      glow_yoffs: 3.25,\n      glow_inner: -2.5,\n      glow_outer: 5,\n      glow_color: 0x000000ff\n    });\n    glov_ui.print(font_style, test.character.x, test.character.y + ++font_test_idx * glov_ui.font_height, Z.SPRITES, 'Outline and Drop Shadow');\n\n    let x = glov_ui.button_height;\n    let button_spacing = glov_ui.button_height + 2;\n    let y = game_height - 10 - button_spacing * 5;\n    if (glov_ui.buttonText({ x, y, text: `Pixely: ${flagGet('pixely') || 'Off'}`,\n      tooltip: 'Toggles pixely or regular mode (requires reload)' })) {\n      if (flagGet('pixely') === 'strict') {\n        flagSet('pixely', false);\n      } else if (flagGet('pixely') === 'on') {\n        flagSet('pixely', 'strict');\n      } else {\n        flagSet('pixely', 'on');\n      }\n      if (document.location.reload) {\n        document.location.reload();\n      } else {\n        document.location = String(document.location);\n      }\n    }\n    y += button_spacing;\n\n    if (glov_ui.buttonText({ x, y, text: `Music: ${flagGet('music') ? 'ON' : 'OFF'}`,\n      tooltip: 'Toggles playing a looping background music track' })) {\n      flagToggle('music');\n      if (flagGet('music')) {\n        soundPlayMusic(music_file, 1, FADE_IN);\n      } else {\n        soundPlayMusic(music_file, 0, FADE_OUT);\n      }\n    }\n    y += button_spacing;\n\n    if (glov_ui.buttonText({ x, y, text: `Font Test: ${flagGet('font_test') ? 'ON' : 'OFF'}`,\n      tooltip: 'Toggles visibility of general Font tests' })) {\n      flagToggle('font_test');\n      glov_transition.queue(Z.TRANSITION_FINAL, glov_transition.randomTransition());\n    }\n    y += button_spacing;\n\n    if (glov_ui.buttonText({ x, y, text: `UI Test: ${flagGet('ui_test') ? 'ON' : 'OFF'}`,\n      tooltip: 'Toggles visibility of general UI tests' })) {\n      flagToggle('ui_test');\n    }\n    y += button_spacing;\n\n    if (glov_ui.buttonText({ x, y, text: `Particles: ${flagGet('particles', true) ? 'ON' : 'OFF'}`,\n      tooltip: 'Toggles particles' })) {\n      flagToggle('particles');\n    }\n    if (flagGet('particles')) {\n      if (glov_engine.getFrameTimestamp() - last_particles > 1000) {\n        last_particles = glov_engine.getFrameTimestamp();\n        glov_engine.glov_particles.createSystem(particle_data.defs.explosion,\n        //[test.character.x, test.character.y, Z.PARTICLES]\n        [100 + Math.random() * 120, 100 + Math.random() * 140, Z.PARTICLES]);\n      }\n    }\n\n    if (flagGet('perf_test')) {\n      perfTestSprites();\n    }\n\n    // Debuggin full canvas stretching\n    // const camera2d = require('./glov/camera2d.js');\n    // glov_ui.drawLine(camera2d.x0(), camera2d.y0(), camera2d.x1(), camera2d.y1(), Z.BORDERS + 1, 1, 0.95,[1,0,1,0.5]);\n    // glov_ui.drawLine(camera2d.x1(), camera2d.y0(), camera2d.x0(), camera2d.y1(), Z.BORDERS + 1, 1, 0.95,[1,0,1,0.5]);\n\n    // Debugging touch state on mobile\n    // const glov_camera2d = require('./glov/camera2d.js');\n    // glov_engine.font.drawSizedWrapped(glov_engine.fps_style, glov_camera2d.x0(), glov_camera2d.y0(), Z.FPSMETER,\n    //   glov_camera2d.w(), 0, 22, JSON.stringify({\n    //     last_touch_state: input.last_touch_state,\n    //     touch_state: input.touch_state,\n    //   }, undefined, 2));\n  }\n\n  function testInit(dt) {\n    glov_engine.setState(test);\n    if (flagGet('music')) {\n      soundPlayMusic(music_file);\n    }\n    test(dt);\n  }\n\n  initGraphics();\n  glov_engine.setState(testInit);\n}","export let defs = {};\n\ndefs.explosion = {\n  particles: {\n    part0: {\n      blend: 'alpha',\n      texture: 'particles/circle64',\n      color: [1, 1, 1, 1], // multiplied by animation track, default 1,1,1,1, can be omitted\n      color_track: [\n      // just values, NOT random range\n      { t: 0.0, v: [1, 1, 1, 0] }, { t: 0.2, v: [1, 1, 1, 1] }, { t: 0.4, v: [1, 1, 0.5, 0.5] }, { t: 1.0, v: [1, 0, 0, 0] }],\n      size: [[48, 8], [48, 8]], // multiplied by animation track\n      size_track: [\n      // just values, NOT random range\n      { t: 0.0, v: [1, 1] }, { t: 0.2, v: [2, 2] }, { t: 0.4, v: [1, 1] }, { t: 1.0, v: [1.5, 1.5] }],\n      accel: [0, 0, 0],\n      rot: [0, 360], // degrees\n      rot_vel: [10, 2], // degrees per second\n      lifespan: [2500, 0], // milliseconds\n      kill_time_accel: 5\n    }\n  },\n  emitters: {\n    part0: {\n      particle: 'part0',\n      // Random ranges affect each emitted particle:\n      pos: [[-16, 32], [-16, 32], 0],\n      vel: [0, 0, 0],\n      emit_rate: [15, 0], // emissions per second\n      // Random ranges only calculated upon instantiation:\n      emit_time: [0, 1000],\n      emit_initial: 10,\n      max_parts: Infinity\n    }\n  },\n  system_lifespan: 2500\n};","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nfunction ok(exp, msg) {\n  if (exp) {\n    return;\n  }\n  throw new Error(`Assertion failed: ${msg ? msg : exp === undefined ? '' : JSON.stringify(exp)}`);\n}\nmodule.exports = ok;\nmodule.exports.ok = ok;\n\nfunction equal(a, b) {\n  if (a === b) {\n    return;\n  }\n  throw new Error(`Assertion failed: \"${a}\"===\"${b}\"`);\n}\nmodule.exports.equal = equal;\n","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\n// Dummy shim module that does not exist in worker bundles, to catch bat requires at bundle-time instead of run-time\n\nmodule.exports = true;\n","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst assert = require('assert');\nconst { isInteger } = require('./util.js');\n\nfunction canonical(cmd) {\n  return cmd.toLowerCase().replace(/[_.]/g, '');\n}\n\nexport const TYPE_INT = 0;\nexport const TYPE_FLOAT = 1;\nexport const TYPE_STRING = 2;\nconst TYPE_NAME = ['INTEGER', 'NUMBER', 'STRING'];\n\nexport function defaultHandler(err, resp) {\n  if (err) {\n    console.error(err, resp);\n  } else {\n    console.info(resp);\n  }\n}\n\nfunction checkAccess(access, list) {\n  if (list) {\n    for (let ii = 0; ii < list.length; ++ii) {\n      if (!access || !access[list[ii]]) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nfunction CmdParse(params) {\n  this.cmds = {};\n  this.cmds_for_complete = this.cmds;\n  this.was_not_found = false;\n  this.storage = params && params.storage; // expects .setJSON(), .getJSON()\n  this.default_handler = defaultHandler;\n  this.register({\n    cmd: 'cmd_list',\n    func: this.cmdList.bind(this),\n    access_show: ['hidden']\n  });\n}\nCmdParse.prototype.cmdList = function (str, resp_func) {\n  if (!this.cmd_list) {\n    let list = this.cmd_list = {};\n    for (let cmd in this.cmds) {\n      let cmd_data = this.cmds[cmd];\n      let access = []; // combine for data compaction\n      if (cmd_data.access_show) {\n        access = access.concat(cmd_data.access_show);\n      }\n      if (cmd_data.access_run) {\n        access = access.concat(cmd_data.access_run);\n      }\n      if (access.indexOf('hidden') !== -1) {\n        continue;\n      }\n      let data = {\n        name: cmd_data.name,\n        help: cmd_data.help\n      };\n      if (cmd_data.usage) {\n        data.usage = cmd_data.usage;\n      }\n      if (access.length) {\n        data.access_show = access;\n      }\n      list[cmd] = data;\n    }\n  }\n  resp_func(null, this.cmd_list);\n};\n\nCmdParse.prototype.setDefaultHandler = function (fn) {\n  assert(this.default_handler === defaultHandler); // Should only set this once\n  this.default_handler = fn;\n};\nCmdParse.prototype.handle = function (self, str, resp_func) {\n  resp_func = resp_func || this.default_handler;\n  this.was_not_found = false;\n  let m = str.match(/^([^\\s]+)(?:\\s+(.*))?$/);\n  if (!m) {\n    resp_func('Missing command');\n    return true;\n  }\n  let cmd = canonical(m[1]);\n  let cmd_data = this.cmds[cmd];\n  if (cmd_data && !checkAccess(self && self.access, cmd_data.access_run)) {\n    // this.was_not_found = true;\n    resp_func(`Access denied: \"${m[1]}\"`);\n    return false;\n  }\n  if (!cmd_data) {\n    this.was_not_found = true;\n    resp_func(`Unknown command: \"${m[1]}\"`);\n    return false;\n  }\n  cmd_data.fn.call(self, m[2] || '', resp_func);\n  return true;\n};\n\nCmdParse.prototype.register = function (param) {\n  assert.equal(typeof param, 'object');\n  let { cmd, func, help, usage, access_show, access_run } = param;\n  assert(cmd && func);\n  this.cmds[canonical(cmd)] = {\n    name: cmd,\n    fn: func,\n    help: help || '',\n    usage: usage || undefined,\n    access_show,\n    access_run\n  };\n};\n\nCmdParse.prototype.registerValue = function (cmd, param) {\n  assert(TYPE_NAME[param.type] || !param.set);\n  assert(param.set || param.get);\n  let label = param.label || cmd;\n  let store = param.store && this.storage || false;\n  let store_key = `cmd_parse_${canonical(cmd)}`;\n  if (param.ver) {\n    store_key += `_${param.ver}`;\n  }\n  if (store) {\n    assert(param.set);\n    let init_value = this.storage.getJSON(store_key);\n    if (init_value !== undefined) {\n      param.set(init_value);\n    }\n  }\n  let fn = (str, resp_func) => {\n    function value() {\n      resp_func(null, `${label} = ${param.get()}`);\n    }\n    function usage() {\n      resp_func(`Usage: /${cmd} ${TYPE_NAME[param.type]}`);\n    }\n    if (!str) {\n      if (param.get) {\n        return value();\n      } else {\n        return usage();\n      }\n    }\n    if (!param.set) {\n      return resp_func(`Usage: /${cmd}`);\n    }\n    let n = Number(str);\n    if (param.range) {\n      if (n < param.range[0]) {\n        n = param.range[0];\n      } else if (n > param.range[1]) {\n        n = param.range[1];\n      }\n    }\n    let store_value = n;\n    if (param.type === TYPE_INT) {\n      if (!isInteger(n)) {\n        return usage();\n      }\n      param.set(n);\n    } else if (param.type === TYPE_FLOAT) {\n      if (!isFinite(n)) {\n        return usage();\n      }\n      param.set(n);\n    } else {\n      store_value = str;\n      param.set(str);\n    }\n    if (store) {\n      this.storage.setJSON(store_key, store_value);\n    }\n    if (param.get) {\n      return value();\n    } else {\n      return resp_func(null, `${label} udpated`);\n    }\n  };\n  this.register({\n    cmd,\n    func: fn,\n    help: param.help || (param.get && param.set ? `Set or display \"${label}\" value` : param.set ? `Set \"${label}\" value` : `Display \"${label}\" value`),\n    usage: param.usage || (param.get ? `Display \"${label}\" value\\n  Usage: /${cmd}\\n` : '') + (param.set ? `Set \"${label}\" value\\n  Usage: /${cmd} NewValue` : ''),\n    access_show: param.access_show,\n    access_run: param.access_run\n  });\n};\n\nfunction cmpCmd(a, b) {\n  if (a.cname < b.cname) {\n    return -1;\n  }\n  return 1;\n}\n\n// for auto-complete\nCmdParse.prototype.addServerCommands = function (new_cmds) {\n  let cmds = this.cmds_for_complete;\n  if (this.cmds_for_complete === this.cmds) {\n    cmds = this.cmds_for_complete = {};\n    for (let cname in this.cmds) {\n      cmds[cname] = this.cmds[cname];\n    }\n  }\n  for (let cname in new_cmds) {\n    if (!cmds[cname]) {\n      cmds[cname] = new_cmds[cname];\n    }\n  }\n};\n\nCmdParse.prototype.autoComplete = function (str, access) {\n  let list = [];\n  str = str.split(' ');\n  let first_tok = canonical(str[0]);\n  for (let cname in this.cmds_for_complete) {\n    if (str.length === 1 && cname.slice(0, first_tok.length) === first_tok || str.length > 1 && cname === first_tok) {\n      let cmd_data = this.cmds_for_complete[cname];\n      if (checkAccess(access, cmd_data.access_show) && checkAccess(access, cmd_data.access_run)) {\n        list.push({\n          cname,\n          cmd: cmd_data.name,\n          help: cmd_data.help,\n          usage: cmd_data.usage\n        });\n      }\n    }\n  }\n  list.sort(cmpCmd);\n  return list; // .slice(0, 20); Maybe?\n};\n\nCmdParse.prototype.canonical = canonical;\n\nCmdParse.prototype.TYPE_INT = TYPE_INT;\nCmdParse.prototype.TYPE_FLOAT = TYPE_FLOAT;\nCmdParse.prototype.TYPE_STRING = TYPE_STRING;\n\nexport function create(params) {\n  return new CmdParse(params);\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst assert = require('assert');\nconst { abs, floor, min, max, random, round, pow, sqrt } = Math;\n\nexport function nop() {\n  // empty\n}\n\nexport function empty(obj) {\n  for (let key in obj) {\n    return false;\n  }\n  return true;\n}\n\nexport function easeInOut(v, a) {\n  let va = pow(v, a);\n  return va / (va + pow(1 - v, a));\n}\n\nexport function easeIn(v, a) {\n  return 2 * easeInOut(0.5 * v, a);\n}\n\nexport function easeOut(v, a) {\n  return 2 * easeInOut(0.5 + 0.5 * v, a) - 1;\n}\n\nexport function clone(obj) {\n  return JSON.parse(JSON.stringify(obj));\n}\n\nexport function merge(dest, src) {\n  for (let f in src) {\n    dest[f] = src[f];\n  }\n  return dest;\n}\n\nexport function has(obj, field) {\n  return Object.prototype.hasOwnProperty.call(obj, field);\n}\n\nexport function defaults(dest, src) {\n  for (let f in src) {\n    if (!has(dest, f)) {\n      dest[f] = src[f];\n    }\n  }\n  return dest;\n}\n\nexport function cloneShallow(src) {\n  return merge({}, src);\n}\n\nexport function clamp(v, mn, mx) {\n  return min(max(mn, v), mx);\n}\n\nexport function lerp(a, v0, v1) {\n  return (1 - a) * v0 + a * v1;\n}\n\nexport function mix(v0, v1, a) {\n  // GLSL semantics\n  return (1 - a) * v0 + a * v1;\n}\n\nexport function sign(a) {\n  return a < 0 ? -1 : a > 0 ? 1 : 0;\n}\n\n// log2 rounded up to nearest integer\nexport function log2(val) {\n  for (let ii = 1, jj = 0;; ii <<= 1, ++jj) {\n    // eslint-disable-line no-bitwise\n    if (ii >= val) {\n      return jj;\n    }\n  }\n}\n\nexport function ridx(arr, idx) {\n  arr[idx] = arr[arr.length - 1];\n  arr.pop();\n}\n\nexport function round100(a) {\n  return round(a * 100) / 100;\n}\n\nexport function round1000(a) {\n  return round(a * 1000) / 1000;\n}\n\nexport function fract(a) {\n  return a - floor(a);\n}\n\nexport function nearSame(a, b, tol) {\n  return abs(b - a) <= tol;\n}\n\nexport function titleCase(str) {\n  return str.split(' ').map(word => `${word[0].toUpperCase()}${word.slice(1)}`).join(' ');\n}\n\nconst EPSILON = 0.00001;\n\n// http://local.wasp.uwa.edu.au/~pbourke/geometry/sphereline/\nexport function lineCircleIntersect(p1, p2, pCircle, radius) {\n  let dp = [p2[0] - p1[0], p2[1] - p1[1]];\n  let a = dp[0] * dp[0] + dp[1] * dp[1];\n  let b = 2 * (dp[0] * (p1[0] - pCircle[0]) + dp[1] * (p1[1] - pCircle[1]));\n  let c = pCircle[0] * pCircle[0] + pCircle[1] * pCircle[1];\n  c += p1[0] * p1[0] + p1[1] * p1[1];\n  c -= 2 * (pCircle[0] * p1[0] + pCircle[1] * p1[1]);\n  c -= radius * radius;\n  let bb4ac = b * b - 4 * a * c;\n  if (abs(a) < EPSILON || bb4ac < 0) {\n    return false;\n  }\n\n  let mu1 = (-b + sqrt(bb4ac)) / (2 * a);\n  let mu2 = (-b - sqrt(bb4ac)) / (2 * a);\n  if (mu1 >= 0 && mu1 <= 1 || mu2 >= 0 && mu2 <= 1) {\n    return true;\n  }\n\n  return false;\n}\n\nexport function inherits(ctor, superCtor) {\n  // From Node.js\n  assert(typeof superCtor === 'function');\n  // not needed? ctor.super_ = superCtor; // eslint-disable-line no-underscore-dangle\n  // second parameter also not actually needed, just defines new Foo().constructor === Foo?\n  ctor.prototype = Object.create(superCtor.prototype, {\n    constructor: {\n      value: ctor,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n}\n\nexport function isPowerOfTwo(n) {\n  return (n & n - 1) === 0; // eslint-disable-line no-bitwise\n}\n\nexport function nextHighestPowerOfTwo(x) {\n  --x;\n  for (let i = 1; i < 32; i <<= 1) {\n    // eslint-disable-line no-bitwise\n    x |= x >> i; // eslint-disable-line no-bitwise\n  }\n  return x + 1;\n}\n\nexport function logdata(data) {\n  if (data === undefined) {\n    return '';\n  }\n  let r = JSON.stringify(data);\n  if (r.length < 120) {\n    return r;\n  }\n  return `${r.slice(0, 120 - 3)}...`;\n}\n\nexport function isInteger(v) {\n  return typeof v === 'number' && isFinite(v) && floor(v) === v;\n}\n\nexport function toNumber(v) {\n  return Number(v);\n}\n\nexport function randomNot(not_value, max_value) {\n  let new_value;\n  do {\n    new_value = floor(random() * max_value);\n  } while (new_value === not_value);\n  return new_value;\n}\n\nexport function toArray(array_like) {\n  return Array.prototype.slice.call(array_like);\n}\n\nexport function matchAll(str, re) {\n  let ret = [];\n  let m;\n  do {\n    m = re.exec(str);\n    if (m) {\n      ret.push(m[1]);\n    }\n  } while (m);\n  return ret;\n}","/*!\n *  howler.js v2.1.3\n *  howlerjs.com\n *\n *  (c) 2013-2019, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  Modified by Jimb Esser:\n *    Fix inconsistent return of self.\n *    Do not throw uncaught promise rejections at startup\n *    Fix audio not resuming upon keypress\n *    Fix audio not resuming upon mousedown\n *    Fix pre-loading entire audio file when streaming is desired\n *    Unlock audio even if WebAudio is disabled\n *    Expose `safeToPlay` so app doesn't queue up hundreds of sounds before we can play any\n *    Add `volume` parameter to `play()` so you can play a sound a specific volume without popping\n *    Add extra delay before firing `end` event to prevent sounds from being stopped before they even start on Android\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create the global controller. All contained methods and properties apply\n   * to all sounds that are currently playing or will be in the future.\n   */\n  var HowlerGlobal = function() {\n    this.init();\n  };\n  HowlerGlobal.prototype = {\n    /**\n     * Initialize the global Howler object.\n     * @return {Howler}\n     */\n    init: function() {\n      var self = this || Howler;\n\n      // Create a global ID counter.\n      self._counter = 1000;\n\n      // Pool of unlocked HTML5 Audio objects.\n      self._html5AudioPool = [];\n      self.html5PoolSize = 10;\n\n      // Internal properties.\n      self._codecs = {};\n      self._howls = [];\n      self._muted = false;\n      self._volume = 1;\n      self._canPlayEvent = 'canplaythrough';\n      self._navigator = (typeof window !== 'undefined' && window.navigator) ? window.navigator : null;\n\n      // Public properties.\n      self.masterGain = null;\n      self.noAudio = false;\n      self.usingWebAudio = true;\n      self.autoSuspend = true;\n      self.ctx = null;\n      self.safeToPlay = false;\n\n      // Set to false to disable the auto audio unlocker.\n      self.autoUnlock = true;\n\n      // Setup the various state values for global tracking.\n      self._setup();\n\n      return self;\n    },\n\n    /**\n     * Get/set the global volume for all sounds.\n     * @param  {Float} vol Volume from 0.0 to 1.0.\n     * @return {Howler/Float}     Returns self or current volume.\n     */\n    volume: function(vol) {\n      var self = this || Howler;\n      vol = parseFloat(vol);\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        self._volume = vol;\n\n        // Don't update any of the nodes if we are muted.\n        if (self._muted) {\n          return self;\n        }\n\n        // When using Web Audio, we just need to adjust the master gain.\n        if (self.usingWebAudio) {\n          self.masterGain.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n        }\n\n        // Loop through and change volume for all HTML5 audio nodes.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and change the volumes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node) {\n                sound._node.volume = sound._volume * vol;\n              }\n            }\n          }\n        }\n\n        return self;\n      }\n\n      return self._volume;\n    },\n\n    /**\n     * Handle muting and unmuting globally.\n     * @param  {Boolean} muted Is muted or not.\n     */\n    mute: function(muted) {\n      var self = this || Howler;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      self._muted = muted;\n\n      // With Web Audio, we just need to mute the master gain.\n      if (self.usingWebAudio) {\n        self.masterGain.gain.setValueAtTime(muted ? 0 : self._volume, Howler.ctx.currentTime);\n      }\n\n      // Loop through and mute all HTML5 Audio nodes.\n      for (var i=0; i<self._howls.length; i++) {\n        if (!self._howls[i]._webAudio) {\n          // Get all of the sounds in this Howl group.\n          var ids = self._howls[i]._getSoundIds();\n\n          // Loop through all sounds and mark the audio node as muted.\n          for (var j=0; j<ids.length; j++) {\n            var sound = self._howls[i]._soundById(ids[j]);\n\n            if (sound && sound._node) {\n              sound._node.muted = (muted) ? true : sound._muted;\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Handle stopping all sounds globally.\n     */\n    stop: function() {\n      var self = this || Howler;\n\n      // Loop through all Howls and stop them.\n      for (var i=0; i<self._howls.length; i++) {\n        self._howls[i].stop();\n      }\n\n      return self;\n    },\n\n    /**\n     * Unload and destroy all currently loaded Howl objects.\n     * @return {Howler}\n     */\n    unload: function() {\n      var self = this || Howler;\n\n      for (var i=self._howls.length-1; i>=0; i--) {\n        self._howls[i].unload();\n      }\n\n      // Create a new AudioContext to make sure it is fully reset.\n      if (self.usingWebAudio && self.ctx && typeof self.ctx.close !== 'undefined') {\n        self.ctx.close();\n        self.ctx = null;\n        setupAudioContext();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for codec support of specific extension.\n     * @param  {String} ext Audio file extention.\n     * @return {Boolean}\n     */\n    codecs: function(ext) {\n      return (this || Howler)._codecs[ext.replace(/^x-/, '')];\n    },\n\n    /**\n     * Setup various state values for global tracking.\n     * @return {Howler}\n     */\n    _setup: function() {\n      var self = this || Howler;\n\n      // Keeps track of the suspend/resume state of the AudioContext.\n      self.state = self.ctx ? self.ctx.state || 'suspended' : 'suspended';\n      if  (self.state === 'running') {\n        self.safeToPlay = true;\n      }\n\n      // Automatically begin the 30-second suspend process\n      self._autoSuspend();\n\n      // Check if audio is available.\n      if (!self.usingWebAudio) {\n        // No audio is available on this system if noAudio is set to true.\n        if (typeof Audio !== 'undefined') {\n          try {\n            var test = new Audio();\n\n            // Check if the canplaythrough event is available.\n            if (typeof test.oncanplaythrough === 'undefined') {\n              self._canPlayEvent = 'canplay';\n            }\n          } catch(e) {\n            self.noAudio = true;\n          }\n        } else {\n          self.noAudio = true;\n        }\n      }\n\n      // Test to make sure audio isn't disabled in Internet Explorer.\n      try {\n        var test = new Audio();\n        if (test.muted) {\n          self.noAudio = true;\n        }\n      } catch (e) {}\n\n      // Check for supported codecs.\n      if (!self.noAudio) {\n        self._setupCodecs();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for browser support for various codecs and cache the results.\n     * @return {Howler}\n     */\n    _setupCodecs: function() {\n      var self = this || Howler;\n      var audioTest = null;\n\n      // Must wrap in a try/catch because IE11 in server mode throws an error.\n      try {\n        audioTest = (typeof Audio !== 'undefined') ? new Audio() : null;\n      } catch (err) {\n        return self;\n      }\n\n      if (!audioTest || typeof audioTest.canPlayType !== 'function') {\n        return self;\n      }\n\n      var mpegTest = audioTest.canPlayType('audio/mpeg;').replace(/^no$/, '');\n\n      // Opera version <33 has mixed MP3 support, so we need to check for and block it.\n      var checkOpera = self._navigator && self._navigator.userAgent.match(/OPR\\/([0-6].)/g);\n      var isOldOpera = (checkOpera && parseInt(checkOpera[0].split('/')[1], 10) < 33);\n\n      self._codecs = {\n        mp3: !!(!isOldOpera && (mpegTest || audioTest.canPlayType('audio/mp3;').replace(/^no$/, ''))),\n        mpeg: !!mpegTest,\n        opus: !!audioTest.canPlayType('audio/ogg; codecs=\"opus\"').replace(/^no$/, ''),\n        ogg: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        oga: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        wav: !!audioTest.canPlayType('audio/wav; codecs=\"1\"').replace(/^no$/, ''),\n        aac: !!audioTest.canPlayType('audio/aac;').replace(/^no$/, ''),\n        caf: !!audioTest.canPlayType('audio/x-caf;').replace(/^no$/, ''),\n        m4a: !!(audioTest.canPlayType('audio/x-m4a;') || audioTest.canPlayType('audio/m4a;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        mp4: !!(audioTest.canPlayType('audio/x-mp4;') || audioTest.canPlayType('audio/mp4;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        weba: !!audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, ''),\n        webm: !!audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, ''),\n        dolby: !!audioTest.canPlayType('audio/mp4; codecs=\"ec-3\"').replace(/^no$/, ''),\n        flac: !!(audioTest.canPlayType('audio/x-flac;') || audioTest.canPlayType('audio/flac;')).replace(/^no$/, '')\n      };\n\n      return self;\n    },\n\n    /**\n     * Some browsers/devices will only allow audio to be played after a user interaction.\n     * Attempt to automatically unlock audio on the first user interaction.\n     * Concept from: http://paulbakaus.com/tutorials/html5/web-audio-on-ios/\n     * @return {Howler}\n     */\n    _unlockAudio: function() {\n      var self = this || Howler;\n\n      // Only run this if Web Audio is supported and it hasn't already been unlocked.\n      // JE: Unlock even if not using WebAudio; Also, _audioUnlocked is never true here, and would be false while unlocking anyway\n      // if (self._audioUnlocked || !self.ctx) {\n      //   return self;\n      // }\n\n      self._audioUnlocked = false;\n      self.autoUnlock = false;\n\n      if (self.ctx) {\n        // Some mobile devices/platforms have distortion issues when opening/closing tabs and/or web views.\n        // Bugs in the browser (especially Mobile Safari) can cause the sampleRate to change from 44100 to 48000.\n        // By calling Howler.unload(), we create a new AudioContext with the correct sampleRate.\n        if (!self._mobileUnloaded && self.ctx.sampleRate !== 44100) {\n          self._mobileUnloaded = true;\n          self.unload();\n        }\n\n        // Scratch buffer for enabling iOS to dispose of web audio buffers correctly, as per:\n        // http://stackoverflow.com/questions/24119684\n        self._scratchBuffer = self.ctx.createBuffer(1, 1, 22050);\n      }\n\n      // Call this method on touch start to create and play a buffer,\n      // then check if the audio actually played to determine if\n      // audio has now been unlocked on iOS, Android, etc.\n      var unlock = function(e) {\n        // Create a pool of unlocked HTML5 Audio objects that can\n        // be used for playing sounds without user interaction. HTML5\n        // Audio objects must be individually unlocked, as opposed\n        // to the WebAudio API which only needs a single activation.\n        // This must occur before WebAudio setup or the source.onended\n        // event will not fire.\n        for (var i=0; i<self.html5PoolSize; i++) {\n          try {\n            var audioNode = new Audio();\n\n            // Mark this Audio object as unlocked to ensure it can get returned\n            // to the unlocked pool when released.\n            audioNode._unlocked = true;\n\n            // Add the audio node to the pool.\n            self._releaseHtml5Audio(audioNode);\n          } catch (e) {\n            self.noAudio = true;\n          }\n        }\n\n        // Loop through any assigned audio nodes and unlock them.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and unlock the audio nodes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node && !sound._node._unlocked) {\n                sound._node._unlocked = true;\n                sound._node.load();\n              }\n            }\n          }\n        }\n\n        // Fix Android can not play in suspend state.\n        self._autoResume();\n\n        function onUnlockFinish() {\n          // Update the unlocked state and prevent this check from happening again.\n          self._audioUnlocked = true;\n          self.safeToPlay = true;\n\n          // Remove the touch start listener.\n          document.removeEventListener('touchstart', unlock, true);\n          document.removeEventListener('touchend', unlock, true);\n          document.removeEventListener('click', unlock, true);\n          document.removeEventListener('mousedown', unlock, true);\n          document.removeEventListener('keydown', unlock, true);\n\n          // Let all sounds know that audio has been unlocked.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('unlock');\n          }\n        }\n\n        if (self.ctx) {\n          // Create an empty buffer.\n          var source = self.ctx.createBufferSource();\n          source.buffer = self._scratchBuffer;\n          source.connect(self.ctx.destination);\n\n          // Play the empty buffer.\n          if (typeof source.start === 'undefined') {\n            source.noteOn(0);\n          } else {\n            source.start(0);\n          }\n\n          // Calling resume() on a stack initiated by user gesture is what actually unlocks the audio on Android Chrome >= 55.\n          if (typeof self.ctx.resume === 'function') {\n            self.ctx.resume();\n          }\n\n          // Setup a timeout to check that we are unlocked on the next event loop.\n          source.onended = function() {\n            source.disconnect(0);\n            onUnlockFinish();\n          };\n        } else {\n          // JE: non-WebAudio - we received user input, assume unlocked immediately\n          onUnlockFinish();\n        }\n      };\n\n      // Setup a touch start listener to attempt an unlock in.\n      document.addEventListener('touchstart', unlock, true);\n      document.addEventListener('touchend', unlock, true);\n      document.addEventListener('click', unlock, true);\n      document.addEventListener('mousedown', unlock, true);\n      document.addEventListener('keydown', unlock, true);\n\n      return self;\n    },\n\n    /**\n     * Get an unlocked HTML5 Audio object from the pool. If none are left,\n     * return a new Audio object and throw a warning.\n     * @return {Audio} HTML5 Audio object.\n     */\n    _obtainHtml5Audio: function() {\n      var self = this || Howler;\n\n      // Return the next object from the pool if one exists.\n      if (self._html5AudioPool.length) {\n        return self._html5AudioPool.pop();\n      }\n\n      // JE: Disabling this, it causes un-ignorable Uncaught Promise Rejection errors in Chrome.\n      // //.Check if the audio is locked and throw a warning.\n      // var testPlay = new Audio().play();\n      // if (testPlay && typeof Promise !== 'undefined' && (testPlay instanceof Promise || typeof testPlay.then === 'function')) {\n      //   testPlay.catch(function() {\n      //     console.warn('HTML5 Audio pool exhausted, returning potentially locked audio object.');\n      //   });\n      // }\n\n      return new Audio();\n    },\n\n    /**\n     * Return an activated HTML5 Audio object to the pool.\n     * @return {Howler}\n     */\n    _releaseHtml5Audio: function(audio) {\n      var self = this || Howler;\n\n      // Don't add audio to the pool if we don't know if it has been unlocked.\n      if (audio._unlocked) {\n        self._html5AudioPool.push(audio);\n      }\n\n      return self;\n    },\n\n    /**\n     * Automatically suspend the Web Audio AudioContext after no sound has played for 30 seconds.\n     * This saves processing/energy and fixes various browser-specific bugs with audio getting stuck.\n     * @return {Howler}\n     */\n    _autoSuspend: function() {\n      var self = this;\n\n      if (!self.autoSuspend || !self.ctx || typeof self.ctx.suspend === 'undefined' || !Howler.usingWebAudio) {\n        return self;\n      }\n\n      // Check if any sounds are playing.\n      for (var i=0; i<self._howls.length; i++) {\n        if (self._howls[i]._webAudio) {\n          for (var j=0; j<self._howls[i]._sounds.length; j++) {\n            if (!self._howls[i]._sounds[j]._paused) {\n              return self;\n            }\n          }\n        }\n      }\n\n      if (self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n      }\n\n      // If no sound has played after 30 seconds, suspend the context.\n      self._suspendTimer = setTimeout(function() {\n        if (!self.autoSuspend) {\n          return;\n        }\n\n        self._suspendTimer = null;\n        self.state = 'suspending';\n        self.ctx.suspend().then(function() {\n          self.state = 'suspended';\n\n          if (self._resumeAfterSuspend) {\n            delete self._resumeAfterSuspend;\n            self._autoResume();\n          }\n        });\n      }, 30000);\n\n      return self;\n    },\n\n    /**\n     * Automatically resume the Web Audio AudioContext when a new sound is played.\n     * @return {Howler}\n     */\n    _autoResume: function() {\n      var self = this;\n\n      if (!self.ctx || typeof self.ctx.resume === 'undefined' || !Howler.usingWebAudio) {\n        return self;\n      }\n\n      if (self.state === 'running' && self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n        self._suspendTimer = null;\n      } else if (self.state === 'suspended') {\n        self.ctx.resume().then(function() {\n          self.state = 'running';\n          // Emit to all Howls that the audio has resumed.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('resume');\n          }\n        });\n\n        if (self._suspendTimer) {\n          clearTimeout(self._suspendTimer);\n          self._suspendTimer = null;\n        }\n      } else if (self.state === 'suspending') {\n        self._resumeAfterSuspend = true;\n      }\n\n      return self;\n    }\n  };\n\n  // Setup the global audio controller.\n  var Howler = new HowlerGlobal();\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create an audio group controller.\n   * @param {Object} o Passed in properties for this group.\n   */\n  var Howl = function(o) {\n    var self = this;\n\n    // Throw an error if no source is provided.\n    if (!o.src || o.src.length === 0) {\n      console.error('An array of source files must be passed with any new Howl.');\n      return;\n    }\n\n    self.init(o);\n  };\n  Howl.prototype = {\n    /**\n     * Initialize a new Howl group object.\n     * @param  {Object} o Passed in properties for this group.\n     * @return {Howl}\n     */\n    init: function(o) {\n      var self = this;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!Howler.ctx) {\n        setupAudioContext();\n      }\n\n      // Setup user-defined default properties.\n      self._autoplay = o.autoplay || false;\n      self._format = (typeof o.format !== 'string') ? o.format : [o.format];\n      self._html5 = o.html5 || false;\n      self._muted = o.mute || false;\n      self._loop = o.loop || false;\n      self._pool = o.pool || 5;\n      self._preload = (typeof o.preload === 'boolean') ? o.preload : true;\n      self._rate = o.rate || 1;\n      self._sprite = o.sprite || {};\n      self._src = (typeof o.src !== 'string') ? o.src : [o.src];\n      self._volume = o.volume !== undefined ? o.volume : 1;\n      self._xhrWithCredentials = o.xhrWithCredentials || false;\n      self._xhrHeaders = o.xhrHeaders || null;\n\n      // Setup all other default properties.\n      self._duration = 0;\n      self._state = 'unloaded';\n      self._sounds = [];\n      self._endTimers = {};\n      self._queue = [];\n      self._playLock = false;\n\n      // Setup event listeners.\n      self._onend = o.onend ? [{fn: o.onend}] : [];\n      self._onfade = o.onfade ? [{fn: o.onfade}] : [];\n      self._onload = o.onload ? [{fn: o.onload}] : [];\n      self._onloaderror = o.onloaderror ? [{fn: o.onloaderror}] : [];\n      self._onplayerror = o.onplayerror ? [{fn: o.onplayerror}] : [];\n      self._onpause = o.onpause ? [{fn: o.onpause}] : [];\n      self._onplay = o.onplay ? [{fn: o.onplay}] : [];\n      self._onstop = o.onstop ? [{fn: o.onstop}] : [];\n      self._onmute = o.onmute ? [{fn: o.onmute}] : [];\n      self._onvolume = o.onvolume ? [{fn: o.onvolume}] : [];\n      self._onrate = o.onrate ? [{fn: o.onrate}] : [];\n      self._onseek = o.onseek ? [{fn: o.onseek}] : [];\n      self._onunlock = o.onunlock ? [{fn: o.onunlock}] : [];\n      self._onresume = [];\n\n      // Web Audio or HTML5 Audio?\n      self._webAudio = Howler.usingWebAudio && !self._html5;\n\n      // Automatically try to enable audio.\n      if (Howler.autoUnlock) { // JE: Unlock even if not using WebAudio\n        Howler._unlockAudio();\n      }\n\n      // Keep track of this Howl group in the global controller.\n      Howler._howls.push(self);\n\n      // If they selected autoplay, add a play event to the load queue.\n      if (self._autoplay) {\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play();\n          }\n        });\n      }\n\n      // Load the source file unless otherwise specified.\n      if (self._preload) {\n        self.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Load the audio file.\n     * @return {Howler}\n     */\n    load: function() {\n      var self = this;\n      var url = null;\n\n      // If no audio is available, quit immediately.\n      if (Howler.noAudio) {\n        self._emit('loaderror', null, 'No audio support.');\n        return self;\n      }\n\n      // Make sure our source is in an array.\n      if (typeof self._src === 'string') {\n        self._src = [self._src];\n      }\n\n      // Loop through the sources and pick the first one that is compatible.\n      for (var i=0; i<self._src.length; i++) {\n        var ext, str;\n\n        if (self._format && self._format[i]) {\n          // If an extension was specified, use that instead.\n          ext = self._format[i];\n        } else {\n          // Make sure the source is a string.\n          str = self._src[i];\n          if (typeof str !== 'string') {\n            self._emit('loaderror', null, 'Non-string found in selected audio sources - ignoring.');\n            continue;\n          }\n\n          // Extract the file extension from the URL or base64 data URI.\n          ext = /^data:audio\\/([^;,]+);/i.exec(str);\n          if (!ext) {\n            ext = /\\.([^.]+)$/.exec(str.split('?', 1)[0]);\n          }\n\n          if (ext) {\n            ext = ext[1].toLowerCase();\n          }\n        }\n\n        // Log a warning if no extension was found.\n        if (!ext) {\n          console.warn('No file extension was found. Consider using the \"format\" property or specify an extension.');\n        }\n\n        // Check if this extension is available.\n        if (ext && Howler.codecs(ext)) {\n          url = self._src[i];\n          break;\n        }\n      }\n\n      if (!url) {\n        self._emit('loaderror', null, 'No codec support for selected audio sources.');\n        return self;\n      }\n\n      self._src = url;\n      self._state = 'loading';\n\n      // If the hosting page is HTTPS and the source isn't,\n      // drop down to HTML5 Audio to avoid Mixed Content errors.\n      if (window.location.protocol === 'https:' && url.slice(0, 5) === 'http:') {\n        self._html5 = true;\n        self._webAudio = false;\n      }\n\n      // Create a new sound object and add it to the pool.\n      new Sound(self);\n\n      // Load and decode the audio data for playback.\n      if (self._webAudio) {\n        loadBuffer(self);\n      }\n\n      return self;\n    },\n\n    /**\n     * Play a sound or resume previous playback.\n     * @param  {String/Number} sprite   Sprite name for sprite playback or sound id to continue previous.\n     * @param  {Number} volume\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Number}          Sound ID.\n     */\n    play: function(sprite, volume, internal) {\n      var self = this;\n      var id = null;\n\n      // Determine if a sprite, sound id or nothing was passed\n      if (typeof sprite === 'number') {\n        id = sprite;\n        sprite = null;\n      } else if (typeof sprite === 'string' && self._state === 'loaded' && !self._sprite[sprite]) {\n        // If the passed sprite doesn't exist, do nothing.\n        return null;\n      } else if (typeof sprite === 'undefined') {\n        // Use the default sound sprite (plays the full audio length).\n        sprite = '__default';\n\n        // Check if there is a single paused sound that isn't ended.\n        // If there is, play that sound. If not, continue as usual.\n        if (!self._playLock) {\n          var num = 0;\n          for (var i=0; i<self._sounds.length; i++) {\n            if (self._sounds[i]._paused && !self._sounds[i]._ended) {\n              num++;\n              id = self._sounds[i]._id;\n            }\n          }\n\n          if (num === 1) {\n            sprite = null;\n          } else {\n            id = null;\n          }\n        }\n      }\n\n      // Get the selected node, or get one from the pool.\n      var sound = id ? self._soundById(id) : self._inactiveSound();\n\n      // If the sound doesn't exist, do nothing.\n      if (!sound) {\n        return null;\n      }\n\n      // Select the sprite definition.\n      if (id && !sprite) {\n        sprite = sound._sprite || '__default';\n      }\n\n      // If the sound hasn't loaded, we must wait to get the audio's duration.\n      // We also need to wait to make sure we don't run into race conditions with\n      // the order of function calls.\n      if (self._state !== 'loaded') {\n        // Set the sprite value on this sound.\n        sound._sprite = sprite;\n\n        // Mark this sound as not ended in case another sound is played before this one loads.\n        sound._ended = false;\n\n        // Add the sound to the queue to be played on load.\n        var soundId = sound._id;\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play(soundId);\n          }\n        });\n\n        return soundId;\n      }\n\n      // Don't play the sound if an id was passed and it is already playing.\n      if (id && !sound._paused) {\n        // Trigger the play event, in order to keep iterating through queue.\n        if (!internal) {\n          self._loadQueue('play');\n        }\n\n        return sound._id;\n      }\n\n      // Make sure the AudioContext isn't suspended, and resume it if it is.\n      if (self._webAudio) {\n        Howler._autoResume();\n      }\n\n      // Determine how long to play for and where to start playing.\n      var seek = Math.max(0, sound._seek > 0 ? sound._seek : self._sprite[sprite][0] / 1000);\n      var duration = Math.max(0, ((self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000) - seek);\n      var timeout = (duration * 1000) / Math.abs(sound._rate);\n      // JE: With short timeouts, we get clipped on no sound at all on Android\n      timeout += 500;\n      var start = self._sprite[sprite][0] / 1000;\n      var stop = (self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000;\n      sound._sprite = sprite;\n\n      // Mark the sound as ended instantly so that this async playback\n      // doesn't get grabbed by another call to play while this one waits to start.\n      sound._ended = false;\n\n      // Update the parameters of the sound.\n      var setParams = function() {\n        sound._paused = false;\n        sound._seek = seek;\n        sound._start = start;\n        sound._stop = stop;\n        sound._loop = !!(sound._loop || self._sprite[sprite][2]);\n      };\n\n      // End the sound instantly if seek is at the end.\n      if (seek >= stop) {\n        self._ended(sound);\n        return null;\n      }\n\n      var sound_volume = typeof volume === 'number' ? volume : sound._volume;\n\n      // Begin the actual playback.\n      var node = sound._node;\n      if (self._webAudio) {\n        // Fire this when the sound is ready to play to begin Web Audio playback.\n        var playWebAudio = function() {\n          self._playLock = false;\n          setParams();\n          self._refreshBuffer(sound);\n\n          // Setup the playback params.\n          var vol = (sound._muted || self._muted) ? 0 : sound_volume;\n          node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n          sound._playStart = Howler.ctx.currentTime;\n\n          // Play the sound using the supported method.\n          if (typeof node.bufferSource.start === 'undefined') {\n            sound._loop ? node.bufferSource.noteGrainOn(0, seek, 86400) : node.bufferSource.noteGrainOn(0, seek, duration);\n          } else {\n            sound._loop ? node.bufferSource.start(0, seek, 86400) : node.bufferSource.start(0, seek, duration);\n          }\n\n          // Start a new timer if none is present.\n          if (timeout !== Infinity) {\n            self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n          }\n\n          if (!internal) {\n            setTimeout(function() {\n              self._emit('play', sound._id);\n              self._loadQueue();\n            }, 0);\n          }\n        };\n\n        if (Howler.state === 'running') {\n          playWebAudio();\n        } else {\n          self._playLock = true;\n\n          // Wait for the audio context to resume before playing.\n          self.once('resume', playWebAudio);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      } else {\n        // Fire this when the sound is ready to play to begin HTML5 Audio playback.\n        var playHtml5 = function() {\n          node.currentTime = seek;\n          node.muted = sound._muted || self._muted || Howler._muted || node.muted;\n          node.volume = sound_volume * Howler.volume();\n          node.playbackRate = sound._rate;\n\n          // Some browsers will throw an error if this is called without user interaction.\n          try {\n            var play = node.play();\n\n            // Support older browsers that don't support promises, and thus don't have this issue.\n            if (play && typeof Promise !== 'undefined' && (play instanceof Promise || typeof play.then === 'function')) {\n              // Implements a lock to prevent DOMException: The play() request was interrupted by a call to pause().\n              self._playLock = true;\n\n              // Set param values immediately.\n              setParams();\n\n              // Releases the lock and executes queued actions.\n              play\n                .then(function() {\n                  self._playLock = false;\n                  node._unlocked = true;\n                  if (!internal) {\n                    self._emit('play', sound._id);\n                    self._loadQueue();\n                  }\n                })\n                .catch(function() {\n                  self._playLock = false;\n                  self._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' +\n                    'on mobile devices and Chrome where playback was not within a user interaction.');\n\n                  // Reset the ended and paused values.\n                  sound._ended = true;\n                  sound._paused = true;\n                });\n            } else if (!internal) {\n              self._playLock = false;\n              setParams();\n              self._emit('play', sound._id);\n              self._loadQueue();\n            }\n\n            // Setting rate before playing won't work in IE, so we set it again here.\n            node.playbackRate = sound._rate;\n\n            // If the node is still paused, then we can assume there was a playback issue.\n            if (node.paused) {\n              self._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' +\n                'on mobile devices and Chrome where playback was not within a user interaction.');\n              return;\n            }\n\n            // Setup the end timer on sprites or listen for the ended event.\n            if (sprite !== '__default' || sound._loop) {\n              self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n            } else {\n              self._endTimers[sound._id] = function() {\n                // Fire ended on this audio node.\n                self._ended(sound);\n\n                // Clear this listener.\n                node.removeEventListener('ended', self._endTimers[sound._id], false);\n              };\n              node.addEventListener('ended', self._endTimers[sound._id], false);\n            }\n          } catch (err) {\n            self._emit('playerror', sound._id, err);\n          }\n        };\n\n        // If this is streaming audio, make sure the src is set and load again.\n        if (node.src === 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA') {\n          node.src = self._src;\n          node.load();\n        }\n\n        // Play immediately if ready, or wait for the 'canplaythrough'e vent.\n        var loadedNoReadyState = (window && window.ejecta) || (!node.readyState && Howler._navigator.isCocoonJS);\n        if (node.readyState >= 3 || loadedNoReadyState) {\n          playHtml5();\n        } else {\n          self._playLock = true;\n\n          var listener = function() {\n            // Begin playback.\n            playHtml5();\n\n            // Clear this listener.\n            node.removeEventListener(Howler._canPlayEvent, listener, false);\n          };\n          node.addEventListener(Howler._canPlayEvent, listener, false);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      }\n\n      return sound._id;\n    },\n\n    /**\n     * Pause playback and save current position.\n     * @param  {Number} id The sound ID (empty to pause all in group).\n     * @return {Howl}\n     */\n    pause: function(id) {\n      var self = this;\n\n      // If the sound hasn't loaded or a play() promise is pending, add it to the load queue to pause when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'pause',\n          action: function() {\n            self.pause(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be paused.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound && !sound._paused) {\n          // Reset the seek position.\n          sound._seek = self.seek(ids[i]);\n          sound._rateSeek = 0;\n          sound._paused = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // Make sure the sound has been created.\n              if (!sound._node.bufferSource) {\n                continue;\n              }\n\n              if (typeof sound._node.bufferSource.stop === 'undefined') {\n                sound._node.bufferSource.noteOff(0);\n              } else {\n                sound._node.bufferSource.stop(0);\n              }\n\n              // Clean up the buffer source.\n              self._cleanBuffer(sound._node);\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.pause();\n            }\n          }\n        }\n\n        // Fire the pause event, unless `true` is passed as the 2nd argument.\n        if (!arguments[1]) {\n          self._emit('pause', sound ? sound._id : null);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Stop playback and reset to start.\n     * @param  {Number} id The sound ID (empty to stop all in group).\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Howl}\n     */\n    stop: function(id, internal) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to stop when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'stop',\n          action: function() {\n            self.stop(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be stopped.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          // Reset the seek position.\n          sound._seek = sound._start || 0;\n          sound._rateSeek = 0;\n          sound._paused = true;\n          sound._ended = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // Make sure the sound's AudioBufferSourceNode has been created.\n              if (sound._node.bufferSource) {\n                if (typeof sound._node.bufferSource.stop === 'undefined') {\n                  sound._node.bufferSource.noteOff(0);\n                } else {\n                  sound._node.bufferSource.stop(0);\n                }\n\n                // Clean up the buffer source.\n                self._cleanBuffer(sound._node);\n              }\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.currentTime = sound._start || 0;\n              sound._node.pause();\n\n              // If this is a live stream, stop download once the audio is stopped.\n              if (sound._node.duration === Infinity) {\n                self._clearSound(sound._node);\n              }\n            }\n          }\n\n          if (!internal) {\n            self._emit('stop', sound._id);\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Mute/unmute a single sound or all sounds in this Howl group.\n     * @param  {Boolean} muted Set to true to mute and false to unmute.\n     * @param  {Number} id    The sound ID to update (omit to mute/unmute all).\n     * @return {Howl}\n     */\n    mute: function(muted, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to mute when capable.\n      if (self._state !== 'loaded'|| self._playLock) {\n        self._queue.push({\n          event: 'mute',\n          action: function() {\n            self.mute(muted, id);\n          }\n        });\n\n        return self;\n      }\n\n      // If applying mute/unmute to all sounds, update the group's value.\n      if (typeof id === 'undefined') {\n        if (typeof muted === 'boolean') {\n          self._muted = muted;\n        } else {\n          return self._muted;\n        }\n      }\n\n      // If no id is passed, get all ID's to be muted.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._muted = muted;\n\n          // Cancel active fade and set the volume to the end value.\n          if (sound._interval) {\n            self._stopFade(sound._id);\n          }\n\n          if (self._webAudio && sound._node) {\n            sound._node.gain.setValueAtTime(muted ? 0 : sound._volume, Howler.ctx.currentTime);\n          } else if (sound._node) {\n            sound._node.muted = Howler._muted ? true : muted;\n          }\n\n          self._emit('mute', sound._id);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the volume of this sound or of the Howl group. This method can optionally take 0, 1 or 2 arguments.\n     *   volume() -> Returns the group's volume value.\n     *   volume(id) -> Returns the sound id's current volume.\n     *   volume(vol) -> Sets the volume of all sounds in this Howl group.\n     *   volume(vol, id) -> Sets the volume of passed sound id.\n     * @return {Howl/Number} Returns self or current volume.\n     */\n    volume: function() {\n      var self = this;\n      var args = arguments;\n      var vol, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // Return the value of the groups' volume.\n        return self._volume;\n      } else if (args.length === 1 || args.length === 2 && typeof args[1] === 'undefined') {\n        // First check if this is an ID, and if not, assume it is a new volume.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          vol = parseFloat(args[0]);\n        }\n      } else if (args.length >= 2) {\n        vol = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the volume or return the current volume.\n      var sound;\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        // If the sound hasn't loaded, add it to the load queue to change volume when capable.\n        if (self._state !== 'loaded'|| self._playLock) {\n          self._queue.push({\n            event: 'volume',\n            action: function() {\n              self.volume.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group volume.\n        if (typeof id === 'undefined') {\n          self._volume = vol;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            sound._volume = vol;\n\n            // Stop currently running fades.\n            if (!args[2]) {\n              self._stopFade(id[i]);\n            }\n\n            if (self._webAudio && sound._node && !sound._muted) {\n              sound._node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n            } else if (sound._node && !sound._muted) {\n              sound._node.volume = vol * Howler.volume();\n            }\n\n            self._emit('volume', sound._id);\n          }\n        }\n      } else {\n        sound = id ? self._soundById(id) : self._sounds[0];\n        return sound ? sound._volume : 0;\n      }\n\n      return self;\n    },\n\n    /**\n     * Fade a currently playing sound between two volumes (if no id is passed, all sounds will fade).\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id (omit to fade all sounds).\n     * @return {Howl}\n     */\n    fade: function(from, to, len, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to fade when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'fade',\n          action: function() {\n            self.fade(from, to, len, id);\n          }\n        });\n\n        return self;\n      }\n\n      // Make sure the to/from/len values are numbers.\n      from = parseFloat(from);\n      to = parseFloat(to);\n      len = parseFloat(len);\n\n      // Set the volume to the start position.\n      self.volume(from, id);\n\n      // Fade the volume of one or all sounds.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        // Create a linear fade or fall back to timeouts with HTML5 Audio.\n        if (sound) {\n          // Stop the previous fade if no sprite is being used (otherwise, volume handles this).\n          if (!id) {\n            self._stopFade(ids[i]);\n          }\n\n          // If we are using Web Audio, let the native methods do the actual fade.\n          if (self._webAudio && !sound._muted) {\n            var currentTime = Howler.ctx.currentTime;\n            var end = currentTime + (len / 1000);\n            sound._volume = from;\n            sound._node.gain.setValueAtTime(from, currentTime);\n            sound._node.gain.linearRampToValueAtTime(to, end);\n          }\n\n          self._startFadeInterval(sound, from, to, len, ids[i], typeof id === 'undefined');\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Starts the internal interval to fade a sound.\n     * @param  {Object} sound Reference to sound to fade.\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id to fade.\n     * @param  {Boolean} isGroup   If true, set the volume on the group.\n     */\n    _startFadeInterval: function(sound, from, to, len, id, isGroup) {\n      var self = this;\n      var vol = from;\n      var diff = to - from;\n      var steps = Math.abs(diff / 0.01);\n      var stepLen = Math.max(4, (steps > 0) ? len / steps : len);\n      var lastTick = Date.now();\n\n      // Store the value being faded to.\n      sound._fadeTo = to;\n\n      // Update the volume value on each interval tick.\n      sound._interval = setInterval(function() {\n        // Update the volume based on the time since the last tick.\n        var tick = (Date.now() - lastTick) / len;\n        lastTick = Date.now();\n        vol += diff * tick;\n\n        // Make sure the volume is in the right bounds.\n        vol = Math.max(0, vol);\n        vol = Math.min(1, vol);\n\n        // Round to within 2 decimal points.\n        vol = Math.round(vol * 100) / 100;\n\n        // Change the volume.\n        if (self._webAudio) {\n          sound._volume = vol;\n        } else {\n          self.volume(vol, sound._id, true);\n        }\n\n        // Set the group's volume.\n        if (isGroup) {\n          self._volume = vol;\n        }\n\n        // When the fade is complete, stop it and fire event.\n        if ((to < from && vol <= to) || (to > from && vol >= to)) {\n          clearInterval(sound._interval);\n          sound._interval = null;\n          sound._fadeTo = null;\n          self.volume(to, sound._id);\n          self._emit('fade', sound._id);\n        }\n      }, stepLen);\n    },\n\n    /**\n     * Internal method that stops the currently playing fade when\n     * a new fade starts, volume is changed or the sound is stopped.\n     * @param  {Number} id The sound id.\n     * @return {Howl}\n     */\n    _stopFade: function(id) {\n      var self = this;\n      var sound = self._soundById(id);\n\n      if (sound && sound._interval) {\n        if (self._webAudio) {\n          sound._node.gain.cancelScheduledValues(Howler.ctx.currentTime);\n        }\n\n        clearInterval(sound._interval);\n        sound._interval = null;\n        self.volume(sound._fadeTo, id);\n        sound._fadeTo = null;\n        self._emit('fade', id);\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the loop parameter on a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   loop() -> Returns the group's loop value.\n     *   loop(id) -> Returns the sound id's loop value.\n     *   loop(loop) -> Sets the loop value for all sounds in this Howl group.\n     *   loop(loop, id) -> Sets the loop value of passed sound id.\n     * @return {Howl/Boolean} Returns self or current loop value.\n     */\n    loop: function() {\n      var self = this;\n      var args = arguments;\n      var loop, id, sound;\n\n      // Determine the values for loop and id.\n      if (args.length === 0) {\n        // Return the grou's loop value.\n        return self._loop;\n      } else if (args.length === 1) {\n        if (typeof args[0] === 'boolean') {\n          loop = args[0];\n          self._loop = loop;\n        } else {\n          // Return this sound's loop value.\n          sound = self._soundById(parseInt(args[0], 10));\n          return sound ? sound._loop : false;\n        }\n      } else if (args.length === 2) {\n        loop = args[0];\n        id = parseInt(args[1], 10);\n      }\n\n      // If no id is passed, get all ID's to be looped.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._loop = loop;\n          if (self._webAudio && sound._node && sound._node.bufferSource) {\n            sound._node.bufferSource.loop = loop;\n            if (loop) {\n              sound._node.bufferSource.loopStart = sound._start || 0;\n              sound._node.bufferSource.loopEnd = sound._stop;\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the playback rate of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   rate() -> Returns the first sound node's current playback rate.\n     *   rate(id) -> Returns the sound id's current playback rate.\n     *   rate(rate) -> Sets the playback rate of all sounds in this Howl group.\n     *   rate(rate, id) -> Sets the playback rate of passed sound id.\n     * @return {Howl/Number} Returns self or the current playback rate.\n     */\n    rate: function() {\n      var self = this;\n      var args = arguments;\n      var rate, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current rate of the first node.\n        id = self._sounds[0]._id;\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new rate value.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          rate = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        rate = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the playback rate or return the current value.\n      var sound;\n      if (typeof rate === 'number') {\n        // If the sound hasn't loaded, add it to the load queue to change playback rate when capable.\n        if (self._state !== 'loaded' || self._playLock) {\n          self._queue.push({\n            event: 'rate',\n            action: function() {\n              self.rate.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group rate.\n        if (typeof id === 'undefined') {\n          self._rate = rate;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            // Keep track of our position when the rate changed and update the playback\n            // start position so we can properly adjust the seek position for time elapsed.\n            if (self.playing(id[i])) {\n              sound._rateSeek = self.seek(id[i]);\n              sound._playStart = self._webAudio ? Howler.ctx.currentTime : sound._playStart;\n            }\n            sound._rate = rate;\n\n            // Change the playback rate.\n            if (self._webAudio && sound._node && sound._node.bufferSource) {\n              sound._node.bufferSource.playbackRate.setValueAtTime(rate, Howler.ctx.currentTime);\n            } else if (sound._node) {\n              sound._node.playbackRate = rate;\n            }\n\n            // Reset the timers.\n            var seek = self.seek(id[i]);\n            var duration = ((self._sprite[sound._sprite][0] + self._sprite[sound._sprite][1]) / 1000) - seek;\n            var timeout = (duration * 1000) / Math.abs(sound._rate);\n\n            // Start a new end timer if sound is already playing.\n            if (self._endTimers[id[i]] || !sound._paused) {\n              self._clearTimer(id[i]);\n              self._endTimers[id[i]] = setTimeout(self._ended.bind(self, sound), timeout);\n            }\n\n            self._emit('rate', sound._id);\n          }\n        }\n      } else {\n        sound = self._soundById(id);\n        return sound ? sound._rate : self._rate;\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the seek position of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   seek() -> Returns the first sound node's current seek position.\n     *   seek(id) -> Returns the sound id's current seek position.\n     *   seek(seek) -> Sets the seek position of the first sound node.\n     *   seek(seek, id) -> Sets the seek position of passed sound id.\n     * @return {Howl/Number} Returns self or the current seek position.\n     */\n    seek: function() {\n      var self = this;\n      var args = arguments;\n      var seek, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current position of the first node.\n        id = self._sounds[0]._id;\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new seek position.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else if (self._sounds.length) {\n          id = self._sounds[0]._id;\n          seek = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        seek = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // If there is no ID, bail out.\n      if (typeof id === 'undefined') {\n        return self;\n      }\n\n      // If the sound hasn't loaded, add it to the load queue to seek when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'seek',\n          action: function() {\n            self.seek.apply(self, args);\n          }\n        });\n\n        return self;\n      }\n\n      // Get the sound.\n      var sound = self._soundById(id);\n\n      if (sound) {\n        if (typeof seek === 'number' && seek >= 0) {\n          // Pause the sound and update position for restarting playback.\n          var playing = self.playing(id);\n          if (playing) {\n            self.pause(id, true);\n          }\n\n          // Move the position of the track and cancel timer.\n          sound._seek = seek;\n          sound._ended = false;\n          self._clearTimer(id);\n\n          // Update the seek position for HTML5 Audio.\n          if (!self._webAudio && sound._node && !isNaN(sound._node.duration)) {\n            sound._node.currentTime = seek;\n          }\n\n          // Seek and emit when ready.\n          var seekAndEmit = function() {\n            self._emit('seek', id);\n\n            // Restart the playback if the sound was playing.\n            if (playing) {\n              self.play(id, undefined, true);\n            }\n          };\n\n          // Wait for the play lock to be unset before emitting (HTML5 Audio).\n          if (playing && !self._webAudio) {\n            var emitSeek = function() {\n              if (!self._playLock) {\n                seekAndEmit();\n              } else {\n                setTimeout(emitSeek, 0);\n              }\n            };\n            setTimeout(emitSeek, 0);\n          } else {\n            seekAndEmit();\n          }\n        } else {\n          if (self._webAudio) {\n            var realTime = self.playing(id) ? Howler.ctx.currentTime - sound._playStart : 0;\n            var rateSeek = sound._rateSeek ? sound._rateSeek - sound._seek : 0;\n            return sound._seek + (rateSeek + realTime * Math.abs(sound._rate));\n          } else {\n            return sound._node.currentTime;\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Check if a specific sound is currently playing or not (if id is provided), or check if at least one of the sounds in the group is playing or not.\n     * @param  {Number}  id The sound id to check. If none is passed, the whole sound group is checked.\n     * @return {Boolean} True if playing and false if not.\n     */\n    playing: function(id) {\n      var self = this;\n\n      // Check the passed sound ID (if any).\n      if (typeof id === 'number') {\n        var sound = self._soundById(id);\n        return sound ? !sound._paused : false;\n      }\n\n      // Otherwise, loop through all sounds and check if any are playing.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (!self._sounds[i]._paused) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Get the duration of this sound. Passing a sound id will return the sprite duration.\n     * @param  {Number} id The sound id to check. If none is passed, return full source duration.\n     * @return {Number} Audio duration in seconds.\n     */\n    duration: function(id) {\n      var self = this;\n      var duration = self._duration;\n\n      // If we pass an ID, get the sound and return the sprite length.\n      var sound = self._soundById(id);\n      if (sound) {\n        duration = self._sprite[sound._sprite][1] / 1000;\n      }\n\n      return duration;\n    },\n\n    /**\n     * Returns the current loaded state of this Howl.\n     * @return {String} 'unloaded', 'loading', 'loaded'\n     */\n    state: function() {\n      return this._state;\n    },\n\n    /**\n     * Unload and destroy the current Howl object.\n     * This will immediately stop all sound instances attached to this group.\n     */\n    unload: function() {\n      var self = this;\n\n      // Stop playing any active sounds.\n      var sounds = self._sounds;\n      for (var i=0; i<sounds.length; i++) {\n        // Stop the sound if it is currently playing.\n        if (!sounds[i]._paused) {\n          self.stop(sounds[i]._id);\n        }\n\n        // Remove the source or disconnect.\n        if (!self._webAudio) {\n          // Set the source to 0-second silence to stop any downloading (except in IE).\n          self._clearSound(sounds[i]._node);\n\n          // Remove any event listeners.\n          sounds[i]._node.removeEventListener('error', sounds[i]._errorFn, false);\n          sounds[i]._node.removeEventListener(Howler._canPlayEvent, sounds[i]._loadFn, false);\n\n          // Release the Audio object back to the pool.\n          Howler._releaseHtml5Audio(sounds[i]._node);\n        }\n\n        // Empty out all of the nodes.\n        delete sounds[i]._node;\n\n        // Make sure all timers are cleared out.\n        self._clearTimer(sounds[i]._id);\n      }\n\n      // Remove the references in the global Howler object.\n      var index = Howler._howls.indexOf(self);\n      if (index >= 0) {\n        Howler._howls.splice(index, 1);\n      }\n\n      // Delete this sound from the cache (if no other Howl is using it).\n      var remCache = true;\n      for (i=0; i<Howler._howls.length; i++) {\n        if (Howler._howls[i]._src === self._src || self._src.indexOf(Howler._howls[i]._src) >= 0) {\n          remCache = false;\n          break;\n        }\n      }\n\n      if (cache && remCache) {\n        delete cache[self._src];\n      }\n\n      // Clear global errors.\n      Howler.noAudio = false;\n\n      // Clear out `self`.\n      self._state = 'unloaded';\n      self._sounds = [];\n      self = null;\n\n      return null;\n    },\n\n    /**\n     * Listen to a custom event.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @param  {Number}   once  (INTERNAL) Marks event to fire only once.\n     * @return {Howl}\n     */\n    on: function(event, fn, id, once) {\n      var self = this;\n      var events = self['_on' + event];\n\n      if (typeof fn === 'function') {\n        events.push(once ? {id: id, fn: fn, once: once} : {id: id, fn: fn});\n      }\n\n      return self;\n    },\n\n    /**\n     * Remove a custom event. Call without parameters to remove all events.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to remove. Leave empty to remove all.\n     * @param  {Number}   id    (optional) Only remove events for this sound.\n     * @return {Howl}\n     */\n    off: function(event, fn, id) {\n      var self = this;\n      var events = self['_on' + event];\n      var i = 0;\n\n      // Allow passing just an event and ID.\n      if (typeof fn === 'number') {\n        id = fn;\n        fn = null;\n      }\n\n      if (fn || id) {\n        // Loop through event store and remove the passed function.\n        for (i=0; i<events.length; i++) {\n          var isId = (id === events[i].id);\n          if (fn === events[i].fn && isId || !fn && isId) {\n            events.splice(i, 1);\n            break;\n          }\n        }\n      } else if (event) {\n        // Clear out all events of this type.\n        self['_on' + event] = [];\n      } else {\n        // Clear out all events of every type.\n        var keys = Object.keys(self);\n        for (i=0; i<keys.length; i++) {\n          if ((keys[i].indexOf('_on') === 0) && Array.isArray(self[keys[i]])) {\n            self[keys[i]] = [];\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Listen to a custom event and remove it once fired.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @return {Howl}\n     */\n    once: function(event, fn, id) {\n      var self = this;\n\n      // Setup the event listener.\n      self.on(event, fn, id, 1);\n\n      return self;\n    },\n\n    /**\n     * Emit all events of a specific type and pass the sound id.\n     * @param  {String} event Event name.\n     * @param  {Number} id    Sound ID.\n     * @param  {Number} msg   Message to go with event.\n     * @return {Howl}\n     */\n    _emit: function(event, id, msg) {\n      var self = this;\n      var events = self['_on' + event];\n\n      // Loop through event store and fire all functions.\n      for (var i=events.length-1; i>=0; i--) {\n        // Only fire the listener if the correct ID is used.\n        if (!events[i].id || events[i].id === id || event === 'load') {\n          setTimeout(function(fn) {\n            fn.call(this, id, msg);\n          }.bind(self, events[i].fn), 0);\n\n          // If this event was setup with `once`, remove it.\n          if (events[i].once) {\n            self.off(event, events[i].fn, events[i].id);\n          }\n        }\n      }\n\n      // Pass the event type into load queue so that it can continue stepping.\n      self._loadQueue(event);\n\n      return self;\n    },\n\n    /**\n     * Queue of actions initiated before the sound has loaded.\n     * These will be called in sequence, with the next only firing\n     * after the previous has finished executing (even if async like play).\n     * @return {Howl}\n     */\n    _loadQueue: function(event) {\n      var self = this;\n\n      if (self._queue.length > 0) {\n        var task = self._queue[0];\n\n        // Remove this task if a matching event was passed.\n        if (task.event === event) {\n          self._queue.shift();\n          self._loadQueue();\n        }\n\n        // Run the task if no event type is passed.\n        if (!event) {\n          task.action();\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Fired when playback ends at the end of the duration.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _ended: function(sound) {\n      var self = this;\n      var sprite = sound._sprite;\n\n      // If we are using IE and there was network latency we may be clipping\n      // audio before it completes playing. Lets check the node to make sure it\n      // believes it has completed, before ending the playback.\n      if (!self._webAudio && sound._node && !sound._node.paused && !sound._node.ended && sound._node.currentTime < sound._stop) {\n        setTimeout(self._ended.bind(self, sound), 100);\n        return self;\n      }\n\n      // Should this sound loop?\n      var loop = !!(sound._loop || self._sprite[sprite][2]);\n\n      // Fire the ended event.\n      self._emit('end', sound._id);\n\n      // Restart the playback for HTML5 Audio loop.\n      if (!self._webAudio && loop) {\n        self.stop(sound._id, true).play(sound._id);\n      }\n\n      // Restart this timer if on a Web Audio loop.\n      if (self._webAudio && loop) {\n        self._emit('play', sound._id);\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        sound._playStart = Howler.ctx.currentTime;\n\n        var timeout = ((sound._stop - sound._start) * 1000) / Math.abs(sound._rate);\n        self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n      }\n\n      // Mark the node as paused.\n      if (self._webAudio && !loop) {\n        sound._paused = true;\n        sound._ended = true;\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        self._clearTimer(sound._id);\n\n        // Clean up the buffer source.\n        self._cleanBuffer(sound._node);\n\n        // Attempt to auto-suspend AudioContext if no sounds are still playing.\n        Howler._autoSuspend();\n      }\n\n      // When using a sprite, end the track.\n      if (!self._webAudio && !loop) {\n        self.stop(sound._id, true);\n      }\n\n      return self;\n    },\n\n    /**\n     * Clear the end timer for a sound playback.\n     * @param  {Number} id The sound ID.\n     * @return {Howl}\n     */\n    _clearTimer: function(id) {\n      var self = this;\n\n      if (self._endTimers[id]) {\n        // Clear the timeout or remove the ended listener.\n        if (typeof self._endTimers[id] !== 'function') {\n          clearTimeout(self._endTimers[id]);\n        } else {\n          var sound = self._soundById(id);\n          if (sound && sound._node) {\n            sound._node.removeEventListener('ended', self._endTimers[id], false);\n          }\n        }\n\n        delete self._endTimers[id];\n      }\n\n      return self;\n    },\n\n    /**\n     * Return the sound identified by this ID, or return null.\n     * @param  {Number} id Sound ID\n     * @return {Object}    Sound object or null.\n     */\n    _soundById: function(id) {\n      var self = this;\n\n      // Loop through all sounds and find the one with this ID.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (id === self._sounds[i]._id) {\n          return self._sounds[i];\n        }\n      }\n\n      return null;\n    },\n\n    /**\n     * Return an inactive sound from the pool or create a new one.\n     * @return {Sound} Sound playback object.\n     */\n    _inactiveSound: function() {\n      var self = this;\n\n      self._drain();\n\n      // Find the first inactive node to recycle.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          return self._sounds[i].reset();\n        }\n      }\n\n      // If no inactive node was found, create a new one.\n      return new Sound(self);\n    },\n\n    /**\n     * Drain excess inactive sounds from the pool.\n     */\n    _drain: function() {\n      var self = this;\n      var limit = self._pool;\n      var cnt = 0;\n      var i = 0;\n\n      // If there are less sounds than the max pool size, we are done.\n      if (self._sounds.length < limit) {\n        return;\n      }\n\n      // Count the number of inactive sounds.\n      for (i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          cnt++;\n        }\n      }\n\n      // Remove excess inactive sounds, going in reverse order.\n      for (i=self._sounds.length - 1; i>=0; i--) {\n        if (cnt <= limit) {\n          return;\n        }\n\n        if (self._sounds[i]._ended) {\n          // Disconnect the audio source when using Web Audio.\n          if (self._webAudio && self._sounds[i]._node) {\n            self._sounds[i]._node.disconnect(0);\n          }\n\n          // Remove sounds until we have the pool size.\n          self._sounds.splice(i, 1);\n          cnt--;\n        }\n      }\n    },\n\n    /**\n     * Get all ID's from the sounds pool.\n     * @param  {Number} id Only return one ID if one is passed.\n     * @return {Array}    Array of IDs.\n     */\n    _getSoundIds: function(id) {\n      var self = this;\n\n      if (typeof id === 'undefined') {\n        var ids = [];\n        for (var i=0; i<self._sounds.length; i++) {\n          ids.push(self._sounds[i]._id);\n        }\n\n        return ids;\n      } else {\n        return [id];\n      }\n    },\n\n    /**\n     * Load the sound back into the buffer source.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _refreshBuffer: function(sound) {\n      var self = this;\n\n      // Setup the buffer source for playback.\n      sound._node.bufferSource = Howler.ctx.createBufferSource();\n      sound._node.bufferSource.buffer = cache[self._src];\n\n      // Connect to the correct node.\n      if (sound._panner) {\n        sound._node.bufferSource.connect(sound._panner);\n      } else {\n        sound._node.bufferSource.connect(sound._node);\n      }\n\n      // Setup looping and playback rate.\n      sound._node.bufferSource.loop = sound._loop;\n      if (sound._loop) {\n        sound._node.bufferSource.loopStart = sound._start || 0;\n        sound._node.bufferSource.loopEnd = sound._stop || 0;\n      }\n      sound._node.bufferSource.playbackRate.setValueAtTime(sound._rate, Howler.ctx.currentTime);\n\n      return self;\n    },\n\n    /**\n     * Prevent memory leaks by cleaning up the buffer source after playback.\n     * @param  {Object} node Sound's audio node containing the buffer source.\n     * @return {Howl}\n     */\n    _cleanBuffer: function(node) {\n      var self = this;\n      var isIOS = Howler._navigator && Howler._navigator.vendor.indexOf('Apple') >= 0;\n\n      if (Howler._scratchBuffer && node.bufferSource) {\n        node.bufferSource.onended = null;\n        node.bufferSource.disconnect(0);\n        if (isIOS) {\n          try { node.bufferSource.buffer = Howler._scratchBuffer; } catch(e) {}\n        }\n      }\n      node.bufferSource = null;\n\n      return self;\n    },\n\n    /**\n     * Set the source to a 0-second silence to stop any downloading (except in IE).\n     * @param  {Object} node Audio node to clear.\n     */\n    _clearSound: function(node) {\n      var checkIE = /MSIE |Trident\\//.test(Howler._navigator && Howler._navigator.userAgent);\n      if (!checkIE) {\n        node.src = 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA';\n      }\n    }\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Setup the sound object, which each node attached to a Howl group is contained in.\n   * @param {Object} howl The Howl parent group.\n   */\n  var Sound = function(howl) {\n    this._parent = howl;\n    this.init();\n  };\n  Sound.prototype = {\n    /**\n     * Initialize a new Sound object.\n     * @return {Sound}\n     */\n    init: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup the default parameters.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a unique ID for this sound.\n      self._id = ++Howler._counter;\n\n      // Add itself to the parent's pool.\n      parent._sounds.push(self);\n\n      // Create the new node.\n      self.create();\n\n      return self;\n    },\n\n    /**\n     * Create and setup a new sound object, whether HTML5 Audio or Web Audio.\n     * @return {Sound}\n     */\n    create: function() {\n      var self = this;\n      var parent = self._parent;\n      var volume = (Howler._muted || self._muted || self._parent._muted) ? 0 : self._volume;\n\n      if (parent._webAudio) {\n        // Create the gain node for controlling volume (the source will connect to this).\n        self._node = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n        self._node.gain.setValueAtTime(volume, Howler.ctx.currentTime);\n        self._node.paused = true;\n        self._node.connect(Howler.masterGain);\n      } else if (!Howler.noAudio) {\n        // Get an unlocked Audio object from the pool.\n        self._node = Howler._obtainHtml5Audio();\n\n        // Listen for errors (http://dev.w3.org/html5/spec-author-view/spec.html#mediaerror).\n        self._errorFn = self._errorListener.bind(self);\n        self._node.addEventListener('error', self._errorFn, false);\n\n        // Listen for 'canplaythrough' event to let us know the sound is ready.\n        self._loadFn = self._loadListener.bind(self);\n        self._node.addEventListener(Howler._canPlayEvent, self._loadFn, false);\n\n        // Setup the new audio node.\n        self._node.src = parent._src;\n        // JE: If _html5 was requested, then we want this audio streamed, not buffered!\n        self._node.preload = parent._html5 ? 'metadata' : 'auto';\n        self._node.volume = volume * Howler.volume();\n\n        // Begin loading the source.\n        self._node.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Reset the parameters of this sound to the original state (for recycle).\n     * @return {Sound}\n     */\n    reset: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all of the parameters of this sound.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._rateSeek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a new ID so that it isn't confused with the previous sound.\n      self._id = ++Howler._counter;\n\n      return self;\n    },\n\n    /**\n     * HTML5 Audio error listener callback.\n     */\n    _errorListener: function() {\n      var self = this;\n\n      // Fire an error event and pass back the code.\n      self._parent._emit('loaderror', self._id, self._node.error ? self._node.error.code : 0);\n\n      // Clear the event listener.\n      self._node.removeEventListener('error', self._errorFn, false);\n    },\n\n    /**\n     * HTML5 Audio canplaythrough listener callback.\n     */\n    _loadListener: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Round up the duration to account for the lower precision in HTML5 Audio.\n      parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n      // Setup a sprite if none is defined.\n      if (Object.keys(parent._sprite).length === 0) {\n        parent._sprite = {__default: [0, parent._duration * 1000]};\n      }\n\n      if (parent._state !== 'loaded') {\n        parent._state = 'loaded';\n        parent._emit('load');\n        parent._loadQueue();\n      }\n\n      // Clear the event listener.\n      self._node.removeEventListener(Howler._canPlayEvent, self._loadFn, false);\n    }\n  };\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  var cache = {};\n\n  /**\n   * Buffer a sound from URL, Data URI or cache and decode to audio source (Web Audio API).\n   * @param  {Howl} self\n   */\n  var loadBuffer = function(self) {\n    var url = self._src;\n\n    // Check if the buffer has already been cached and use it instead.\n    if (cache[url]) {\n      // Set the duration from the cache.\n      self._duration = cache[url].duration;\n\n      // Load the sound into this Howl.\n      loadSound(self);\n\n      return;\n    }\n\n    if (/^data:[^;]+;base64,/.test(url)) {\n      // Decode the base64 data URI without XHR, since some browsers don't support it.\n      var data = atob(url.split(',')[1]);\n      var dataView = new Uint8Array(data.length);\n      for (var i=0; i<data.length; ++i) {\n        dataView[i] = data.charCodeAt(i);\n      }\n\n      decodeAudioData(dataView.buffer, self);\n    } else {\n      // Load the buffer from the URL.\n      var xhr = new XMLHttpRequest();\n      xhr.open('GET', url, true);\n      xhr.withCredentials = self._xhrWithCredentials;\n      xhr.responseType = 'arraybuffer';\n\n      // Apply any custom headers to the request.\n      if (self._xhrHeaders) {\n        Object.keys(self._xhrHeaders).forEach(function(key) {\n          xhr.setRequestHeader(key, self._xhrHeaders[key]);\n        });\n      }\n\n      xhr.onload = function() {\n        // Make sure we get a successful response back.\n        var code = (xhr.status + '')[0];\n        if (code !== '0' && code !== '2' && code !== '3') {\n          self._emit('loaderror', null, 'Failed loading audio file with status: ' + xhr.status + '.');\n          return;\n        }\n\n        decodeAudioData(xhr.response, self);\n      };\n      xhr.onerror = function() {\n        // If there is an error, switch to HTML5 Audio.\n        if (self._webAudio) {\n          self._html5 = true;\n          self._webAudio = false;\n          self._sounds = [];\n          delete cache[url];\n          self.load();\n        }\n      };\n      safeXhrSend(xhr);\n    }\n  };\n\n  /**\n   * Send the XHR request wrapped in a try/catch.\n   * @param  {Object} xhr XHR to send.\n   */\n  var safeXhrSend = function(xhr) {\n    try {\n      xhr.send();\n    } catch (e) {\n      xhr.onerror();\n    }\n  };\n\n  /**\n   * Decode audio data from an array buffer.\n   * @param  {ArrayBuffer} arraybuffer The audio data.\n   * @param  {Howl}        self\n   */\n  var decodeAudioData = function(arraybuffer, self) {\n    // Fire a load error if something broke.\n    var error = function() {\n      self._emit('loaderror', null, 'Decoding audio data failed.');\n    };\n\n    // Load the sound on success.\n    var success = function(buffer) {\n      if (buffer && self._sounds.length > 0) {\n        cache[self._src] = buffer;\n        loadSound(self, buffer);\n      } else {\n        error();\n      }\n    };\n\n    // Decode the buffer into an audio source.\n    if (typeof Promise !== 'undefined' && Howler.ctx.decodeAudioData.length === 1) {\n      Howler.ctx.decodeAudioData(arraybuffer).then(success).catch(error);\n    } else {\n      Howler.ctx.decodeAudioData(arraybuffer, success, error);\n    }\n  };\n\n  /**\n   * Sound is now loaded, so finish setting everything up and fire the loaded event.\n   * @param  {Howl} self\n   * @param  {Object} buffer The decoded buffer sound source.\n   */\n  var loadSound = function(self, buffer) {\n    // Set the duration.\n    if (buffer && !self._duration) {\n      self._duration = buffer.duration;\n    }\n\n    // Setup a sprite if none is defined.\n    if (Object.keys(self._sprite).length === 0) {\n      self._sprite = {__default: [0, self._duration * 1000]};\n    }\n\n    // Fire the loaded event.\n    if (self._state !== 'loaded') {\n      self._state = 'loaded';\n      self._emit('load');\n      self._loadQueue();\n    }\n  };\n\n  /**\n   * Setup the audio context when available, or switch to HTML5 Audio mode.\n   */\n  var setupAudioContext = function() {\n    // If we have already detected that Web Audio isn't supported, don't run this step again.\n    if (!Howler.usingWebAudio) {\n      return;\n    }\n\n    // Check if we are using Web Audio and setup the AudioContext if we are.\n    try {\n      if (typeof AudioContext !== 'undefined') {\n        Howler.ctx = new AudioContext();\n      } else if (typeof webkitAudioContext !== 'undefined') {\n        Howler.ctx = new webkitAudioContext();\n      } else {\n        Howler.usingWebAudio = false;\n      }\n    } catch(e) {\n      Howler.usingWebAudio = false;\n    }\n\n    // If the audio context creation still failed, set using web audio to false.\n    if (!Howler.ctx) {\n      Howler.usingWebAudio = false;\n    }\n\n    // Check if a webview is being used on iOS8 or earlier (rather than the browser).\n    // If it is, disable Web Audio as it causes crashing.\n    var iOS = (/iP(hone|od|ad)/.test(Howler._navigator && Howler._navigator.platform));\n    var appVersion = Howler._navigator && Howler._navigator.appVersion.match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n    var version = appVersion ? parseInt(appVersion[1], 10) : null;\n    if (iOS && version && version < 9) {\n      var safari = /safari/.test(Howler._navigator && Howler._navigator.userAgent.toLowerCase());\n      if (Howler._navigator && !safari) {\n        Howler.usingWebAudio = false;\n      }\n    }\n\n    // Create and expose the master GainNode when using Web Audio (useful for plugins or advanced usage).\n    if (Howler.usingWebAudio) {\n      Howler.masterGain = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n      Howler.masterGain.gain.setValueAtTime(Howler._muted ? 0 : Howler._volume, Howler.ctx.currentTime);\n      Howler.masterGain.connect(Howler.ctx.destination);\n    }\n\n    // Re-run the setup on Howler.\n    Howler._setup();\n  };\n\n  // Add support for AMD (Asynchronous Module Definition) libraries such as require.js.\n  if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return {\n        Howler: Howler,\n        Howl: Howl\n      };\n    });\n  }\n\n  // Add support for CommonJS libraries such as browserify.\n  if (typeof exports !== 'undefined') {\n    exports.Howler = Howler;\n    exports.Howl = Howl;\n  }\n\n  // Define globally in case AMD is not available or unused.\n  if (typeof window !== 'undefined') {\n    window.HowlerGlobal = HowlerGlobal;\n    window.Howler = Howler;\n    window.Howl = Howl;\n    window.Sound = Sound;\n  } else if (typeof global !== 'undefined') { // Add to global in Node.js (for testing, etc).\n    global.HowlerGlobal = HowlerGlobal;\n    global.Howler = Howler;\n    global.Howl = Howl;\n    global.Sound = Sound;\n  }\n}());\n"]}