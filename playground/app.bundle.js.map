{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/@jimbly/howler/src/howler.core.js","node_modules/gl-mat3/create.js","node_modules/gl-mat3/fromMat4.js","node_modules/gl-mat4/copy.js","node_modules/gl-mat4/create.js","node_modules/gl-mat4/invert.js","node_modules/gl-mat4/multiply.js","node_modules/gl-mat4/perspective.js","node_modules/gl-mat4/transpose.js","src/client/app.js","src/client/glov/bootstrap.js","src/client/glov/camera2d.js","src/client/glov/cmds.js","src/client/glov/edit_box.js","src/client/glov/effects.js","src/client/glov/engine.js","src/client/glov/font.js","src/client/glov/geom.js","src/client/glov/glb/decode-utf8.js","src/client/glov/glb/gltf-type-utils.js","src/client/glov/glb/parser.js","src/client/glov/glb/unpack-binary-json.js","src/client/glov/glb/unpack-glb-buffers.js","src/client/glov/in_event.js","src/client/glov/input.js","src/client/glov/link.js","src/client/glov/local_storage.js","src/client/glov/mat43.js","src/client/glov/models.js","src/client/glov/particles.js","src/client/glov/perf.js","src/client/glov/pointer_lock.js","src/client/glov/polyfill.js","src/client/glov/selection_box.js","src/client/glov/settings.js","src/client/glov/shaders.js","src/client/glov/simple_menu.js","src/client/glov/sound.js","src/client/glov/sprite_animation.js","src/client/glov/sprites.js","src/client/glov/textures.js","src/client/glov/transition.js","src/client/glov/ui.js","src/client/glov/ui_test.js","src/client/glov/urlhash.js","src/client/glov/vmath.js","src/client/img/font/04b03_8x1.json","src/client/img/font/04b03_8x2.json","src/client/img/font/palanquin32.json","src/client/main.js","src/client/particle_data.js","src/client/shims/assert.js","src/client/shims/not_worker.js","src/common/cmd_parse.js","src/common/util.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","HowlerGlobal","this","init","prototype","self","Howler","_counter","_html5AudioPool","html5PoolSize","_codecs","_howls","_muted","_volume","_canPlayEvent","_navigator","window","navigator","masterGain","noAudio","usingWebAudio","autoSuspend","ctx","safeToPlay","autoUnlock","_setup","volume","vol","parseFloat","setupAudioContext","gain","setValueAtTime","currentTime","_webAudio","ids","_getSoundIds","j","sound","_soundById","_node","mute","muted","stop","unload","close","codecs","ext","replace","state","_autoSuspend","Audio","test","oncanplaythrough","_setupCodecs","audioTest","err","canPlayType","mpegTest","checkOpera","userAgent","match","isOldOpera","parseInt","split","mp3","mpeg","opus","ogg","oga","wav","aac","caf","m4a","mp4","weba","webm","dolby","flac","_unlockAudio","_audioUnlocked","_mobileUnloaded","sampleRate","_scratchBuffer","createBuffer","unlock","audioNode","_unlocked","_releaseHtml5Audio","load","_autoResume","onUnlockFinish","document","removeEventListener","_emit","source","createBufferSource","buffer","connect","destination","start","noteOn","resume","onended","disconnect","addEventListener","_obtainHtml5Audio","pop","audio","push","suspend","_sounds","_paused","_suspendTimer","clearTimeout","setTimeout","then","_resumeAfterSuspend","Howl","src","console","error","_autoplay","autoplay","_format","format","_html5","html5","_loop","loop","_pool","pool","_preload","preload","_rate","rate","_sprite","sprite","_src","undefined","_xhrWithCredentials","xhrWithCredentials","_xhrHeaders","xhrHeaders","_duration","_state","_endTimers","_queue","_playLock","_onend","onend","fn","_onfade","onfade","_onload","onload","_onloaderror","onloaderror","_onplayerror","onplayerror","_onpause","onpause","_onplay","onplay","_onstop","onstop","_onmute","onmute","_onvolume","onvolume","_onrate","onrate","_onseek","onseek","_onunlock","onunlock","_onresume","event","action","play","url","str","exec","toLowerCase","warn","location","protocol","slice","Sound","loadBuffer","internal","id","num","_ended","_id","_inactiveSound","soundId","_loadQueue","seek","Math","max","_seek","duration","timeout","abs","setParams","_start","_stop","node","playWebAudio","_refreshBuffer","_playStart","bufferSource","noteGrainOn","Infinity","bind","once","_clearTimer","playHtml5","playbackRate","Promise","catch","paused","loadedNoReadyState","ejecta","readyState","isCocoonJS","listener","pause","_rateSeek","_stopFade","noteOff","_cleanBuffer","isNaN","arguments","_clearSound","_interval","args","index","indexOf","apply","fade","from","to","len","end","linearRampToValueAtTime","_startFadeInterval","isGroup","diff","steps","stepLen","lastTick","Date","now","_fadeTo","setInterval","tick","min","round","clearInterval","cancelScheduledValues","loopStart","loopEnd","playing","seekAndEmit","emitSeek","realTime","rateSeek","sounds","_errorFn","_loadFn","splice","remCache","cache","on","events","off","isId","keys","Object","Array","isArray","msg","task","shift","ended","_drain","reset","limit","cnt","_panner","isIOS","vendor","checkIE","howl","_parent","parent","create","createGain","createGainNode","_errorListener","_loadListener","ceil","__default","loadSound","data","atob","dataView","Uint8Array","charCodeAt","decodeAudioData","xhr","XMLHttpRequest","open","withCredentials","responseType","forEach","key","setRequestHeader","status","response","onerror","safeXhrSend","send","arraybuffer","success","AudioContext","webkitAudioContext","iOS","platform","appVersion","version","safari","define","amd","global","out","Float32Array","fromMat4","copy","invert","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","multiply","b","b0","b1","b2","b3","perspective","fovy","aspect","near","far","tan","nf","transpose","called_once","main","debug","getElementById","file","line","col","errorobj","stack","message","origin","join","show","glov_error_report","innerText","debugmsg","clear","virtualToCanvas","set","setSafeAreaPadding","safeAreaPadding","domToCanvasRatio","screenAspect","setAspectFixed","setAspectFixed2","zoom","setNormalized","x0Real","y0Real","x1Real","y1Real","wReal","hReal","x0","y0","x1","y1","w","h","xScale","yScale","htmlPos","htmlSize","domToVirtual","domDeltaToVirtual","virtualToDom","virtualToFontSize","virtualToDomPosParam","tickCamera2D","startup","engine","safearea_pad","screen_width","screen_height","render_width","render_height","render_viewport_w","render_viewport_h","render_offset_x","render_offset_y_top","render_offset_y_bottom","reapply","dst","ignore_safe_area","wscale","hscale","left","right","top","bottom","old","pa","pixel_aspect","inv_aspect","inv_desired_aspect","margin","_margin","_margin2","x","y","factor","inv_factor","height","devicePixelRatio","width","viewport","eff_screen_width","eff_screen_height","_margin3","setViewport","cmd_parse_mod","local_storage","cmd_parse","storage","textures","PI","cmd","handle","defaultHandler","registerValue","type","TYPE_FLOAT","label","range","get","fov_min","v","setFOV","store","byteFormat","bytes","toFixed","register","help","func","resp_func","filter","gpu_mem","sort","map","perf_state","geom","tex","toUpperCase","defines","webgl2","cmdDesc","cmd_data","list","autoComplete","access","str_cname","canonical","str_lc","cname","safearea","TYPE_STRING","usage","default_value","String","Number","ii","disable_data","getJSON","setJSON","camera2d","glov_input","glov_ui","focuslog","GlovUIEditBox","params","z","Z","UI","button_width","allow_modal","font_height","text","placeholder","max_len","initial_focus","onetime_focus","auto_unfocus","initial_select","spellcheck","applyParams","is_focused","elem","input","submitted","pointer_lock","last_frame","new_text","value","focus","focusSteal","pointerLockExit","focusNext","was_glov_focused","glov_focused","focusCheck","dom_focused","activeElement","blur","focused","key_opt","in_event_cb","pointerLockEnter","keyUpEdge","KEYS","ESC","setText","focusCanvas","canceled","_this","global_frame_index","updateFocus","this_frame_edit_boxes","getElem","textContent","form","createElement","setAttribute","random","ev","preventDefault","appendChild","span","select","pos","style","size","old_fontsize","fontSize","new_fontsize","click","peek","eatAllKeyboardInput","SUBMIT","CANCEL","registerShader","grayScaleMatrix","sepiaMatrix","negativeMatrix","saturationMatrix","hueMatrix","brightnessAddMatrix","brightnessScaleMatrix","additiveMatrix","contrastMatrix","applyCopy","applyPixelyExpand","applyGaussianBlur","applyColorMatrix","shaders","vec2","vec3","vec4","v4set","shader_data","vp_copy","vp","fp","pixely_expand","gaussian_blur","color_matrix","obj","getShader","shader","gl","FRAGMENT_SHADER","VERTEX_SHADER","inited","clip_space","copy_uv_scale","shader_params_default","shader_params_color_matrix","shader_params_gaussian_blur","shader_params_pixely_expand","quad_geom","semantic","POSITION","FLOAT","QUADS","colorMatrix","sampleRadius","Gauss","orig_pixel_size","saturationScale","is","angle","cos","s","sin","brightnessOffset","scale","additiveRGB","contrastScale","applyEffect","effect","view_w","view_h","target_w","target_h","bindArray","texs","draw","setSamplerState","filter_min","LINEAR","filter_mag","wrap_s","CLAMP_TO_EDGE","wrap_t","resx","resy","hblur","captureFramebuffer","vblur","final_viewport","clear_color","clearColor","COLOR_BUFFER_BIT","max_size","min_size","inputTexture0","res","shader_copy","glow","matrix","mout","setGlobalMatrices","setGameDims","postprocessingAllow","updateMatrices","getFrameTimestamp","getFrameIndex","getFrameDt","getFrameDtActual","setState","stateActive","addTickFunc","postTick","getTemporaryTexture","setupProjection","start3DRendering","projectionZBias","setErrorReportDetails","loadsPending","DEBUG","assert","cmds","effects","glov_font","font_info_palanquin32","mat3FromMat4","mat4Copy","mat4Invert","mat4Mul","mat4Transpose","mat4Perspective","asin","floor","sqrt","models","perf","settings","soundLoading","soundStartup","soundTick","sprites","glov_transition","urlhash","clamp","defaults","nearSame","ridx","mat3","mat4","v3mulMat4","v3iNormalize","v4copy","v4same","canvas","glov_particles","antialias","game_width","game_height","TYPE_SET","change","definesChanged","initial_define_forcewebgl2","FORCEWEBGL2","initial_define_nowebgl2","NOWEBGL2","reload","any_3d","ZFAR","ZNEAR","fov_y","fov_x","mat_projection","mat_view","mat_m","mat_vp","mat_mv","mat_mv_no_skew","mat_mvp","mat_mv_inv_transform","projection_inverse","light_diffuse","light_dir_vs","light_ambient","light_dir_ws","font","app_state","border_color","_mat_view","new_fov","is_ios_safari","ua","is_ios","webkit","postprocessing_reset_version","postprocessing","allow","normalizeRow","m","idx","mat_temp","mat_model","global_timer","this_frame_time","hrtime","this_frame_time_actual","after_loading_state","is_loading","new_state","test_state","mspf","mspf_update_time","mspf_frame_count","last_tick_cpu","mspf_tick","mspf_tick_accum","PERF_HISTORY_SIZE","glov_perf_state","fpsgraph","history","addMetric","name","show_stat","show_graph","labels","fps: ","fps","ms/f: ","msF","cpu: ","cpu","line_scale_top","colors","interactable","do_borders","do_viewport_postprocess","need_repos","app_tick_functions","cb","post_tick","ticks","equal","_typeof","temporary_textures","resetEffects","temp","destroy","SAFARI_FULLSCREEN_ASPECT","screen","SAFARI_DIMS","896,414","812,375","736,414","716,414","667,375","647,375","548,320","availWidth","availHeight","safariTopSafeArea","last_canvas_width","last_canvas_height","last_body_height","safearea_elem","safearea_ignore_bottom","safearea_values","last_safearea_values","checkResize","vv","visualViewport","css_to_real","innerWidth","innerHeight","body","new_width","clientWidth","new_height","clientHeight","sa_width","offsetWidth","sa_height","offsetHeight","offsetLeft","offsetTop","pixel_scale","scroll","xywh","last_temp_idx","_tex","createForCapture","do_filter_linear","do_wrap","copyTexImage","NEAREST","REPEAT","requestFrame","max_fps","SLOWLOAD","requestAnimationFrame","mat_projection_10","had_3d_this_frame","use_fov_y","use_width","use_height","znear","zfar","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","enable","BLEND","DEPTH_TEST","depthMask","DEPTH_BUFFER_BIT","CULL_FACE","dist","at_z","fixNatives","is_startup","old_val","defineProperty","enumerable","_a","hrnow","performance","last_tick","timestamp","dt","hidden","webkitHidden","rise","_rise","tickInput","tickUI","ul","lr","viewport2","view_height","font_size","elem_fullscreen","drawRect","BORDERS","show_metrics","render","disable","endFrame","_ii","error_report_details","error_report_details_str","escape","k","last_error_time","crash_idx","filtered_errors","glovErrorReport","getURLBase","lastIndexOf","href","error_report","is_pixely","pixely","powerPreference","high","context_names","force_webgl1","ts","log","rc","context_opts","good","jj","getContext","alert","visibility","viewport_postprocess","depthFunc","LEQUAL","cullFace","BACK","pixelStorei","UNPACK_ALIGNMENT","ambient","mvp","mv_inv_trans","view","projection","defaultFilters","LINEAR_MIPMAP_LINEAR","font_info_04b03x2","font_info_04b03x1","info","texture","bindSounds","ui_sounds","button_click","rollover","show_fps","load_count","loading","elem_loading_text","loading_elem","glov_engine","intColorFromVec4Color","vec4ColorFromIntColor","styleColored","styleAlpha","v4clone","v4scale","COLOR_MODE","SINGLE","GRADIENT","ALIGN","HLEFT","HCENTER","HRIGHT","HMASK","VTOP","VCENTER","VBOTTOM","VMASK","HFIT","HWRAP","HCENTERFIT","HVCENTER","HVCENTERFIT","GlovFontStyle","color_vec4","outline_width","outline_color","glow_xoffs","glow_yoffs","glow_inner","glow_outer","glow_color","color","colorUR","colorLR","colorLL","color_mode","font_shaders","glov_font_default_style","font_style","fields","ret","_f","colorAlpha","alpha","tech_params","tech_params_dirty","temp_color","createTechniqueParameters","param0","outlineColor","glowColor","glowParams","tex0","techParamsSet","param","tpv","techParamsGet","GlovFont","font_info","texture_name","noFilter","font_aa","tex_w","imageW","tex_h","imageH","char_infos","char_info","sc","_char_info","xpad","yoffs","replacement_character","infoFromChar","default_style","applied_style","drawSizedColor","drawSized","drawScaled","drawSizedAligned","_x","_y","align","x_size","y_size","getStringWidth","drawSizedColorWrapped","indent","drawScaledWrapped","drawSizedWrapped","wrapLines","word_cb","wrapLinesScaled","numLines","applyStyle","numlines","wordCallback","ignored","linenum","word","getCharacterWidth","xsc","x_advance","calcXAdvance","word_start","word_x0","space_info","space_size","hard_wrap","newx","char_w","tabsize","word_width","ysc","last_width","num_lines","xoffs","y2","x2","word_w","font_texel_scale","isFinite","y_offset","avg_scale_font","camera_xscale","camera_yscale","avg_scale_combined","tile_state","delta_per_source_pixel","spread","delta_per_dest_pixel","padding1","padding4","outer_scaled","value2","padding_in_font_space","z_advance","rel_x_scale","rel_y_scale","char_scale","xsc2","ysc2","pad_scale","tile_width","tile_height","u0","u1","v0","v1","queueraw","determineShader","outline","font_aa_outline_glow","font_aa_outline","font_aa_glow","fontShadersInit","_len","_key","Function","concat","createIndices","createQuads","TRIANGLES","TRIANGLE_FAN","gl_byte_size","5120","5121","5122","5123","5126","bound_geom","bound_array_buf","bound_index_buf","quad_index_buf","quad_index_buf_len","deleteBuffer","bindBuffer","ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER","attrib_enabled","enableVertexAttribArray","bits","disable_mask","enable_mask","disableVertexAttribArray","_n","getQuadIndexBuf","quad_count","arr","Uint16Array","vidx","bufferData","STATIC_DRAW","idxs","ibo","ibo_size","formatInfo","stride","elem_count","used_attribs","common_byte_size","fmt","sem","gltype","count","byte_size","Geom","verts","mode","format_info","vert_count","vert_gpu_mem","vbo","orig_mode","ibo_owned","updateSub","offset","bufferSubData","update","num_verts","DYNAMIC_DRAW","subarray","dispose","bound_attribs","normalized","vertexAttribPointer","drawElements","UNSIGNED_SHORT","drawArrays","GeomMultiQuads","ec","geoms","num_sub_verts","sub_data","decode","charCache","charFromCodePt","fromCodePoint","fromCharCode","result","array","codePt","byte1","buffLen","getAccessorTypeFromSize","TYPES","ATTRIBUTE_TYPE_TO_COMPONENTS","SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4","ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE","5125","ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY","Int8Array","Int16Array","Uint32Array","unpackGLBBuffers","unpackBinaryJson","padTo4Bytes","byteLength","decode_utf8","MAGIC_glTF","GLB_FILE_HEADER_SIZE","GLB_CHUNK_HEADER_SIZE","GLB_CHUNK_TYPE_JSON","GLB_CHUNK_TYPE_BIN","LE","BE","GLBParser","binaryByteOffset","packedJson","json","parseBinary","DataView","glbArrayBuffer","magic1","getUint32","fileLength","valid","jsonChunkLength","jsonChunkFormat","jsonChunkOffset","jsonChunk","jsonText","JSON","parse","binaryChunkStart","binChunkFormat","arrayBuffer","parseInternal","unpackedBuffers","parseSync","getApplicationData","getArrayBuffer","getBinaryByteOffset","getBufferView","glTFBufferView","byteOffset","getBuffer","glTFAccessor","ArrayType","componentType","components","bytesPerComponent","bufferViews","bufferView","getImageData","glTFImage","typedArray","mimeType","getImage","arrayBufferView","blob","Blob","urlCreator","URL","webkitURL","imageUrl","createObjectURL","img","Image","parser","parseJSONPointer","matches","_index","decodeJSONPointer","object","buffers","pointer","field","unpackJsonArraysRecursive","topJson","options","element","newObject","getArrayBufferAtOffset","binaryBuffer","ArrayBuffer","sourceArray","binaryArray","getArrayTypeAndLength","accessor","unpackAccessors","accessors","accessorBuffers","_getArrayTypeAndLengt","unpackImages","images","imageBuffers","image","imate","topOfFrame","cbs","code_or_pos","keyCode","pageX","pageY","button","pointerLocked","eatAllInput","mousePos","mouseMoved","mouseWheel","mouseOver","mouseDown","mousePosIsTouch","isTouchDown","numTouches","keyDown","keyDownEdge","padGetAxes","padButtonDown","padButtonDownEdge","padButtonUpEdge","mouseUpEdge","mouseDownEdge","mouseConsumeClicks","drag","longPress","dragDrop","dragOver","in_event","soundResume","v2add","v2copy","v2lengthSq","v2set","v2scale","v2sub","UP_EDGE","UP","DOWN","DOWN_EDGE","TOUCH_AS_MOUSE","map_analog_to_dpad","mouse_log","ANY","POINTERLOCK","BACKSPACE","TAB","ENTER","RETURN","SHIFT","CTRL","ALT","SPACE","PAGEUP","PAGEDOWN","END","HOME","LEFT","RIGHT","INS","DEL","NUMPAD_DIVIDE","EQUALS","MINUS","SLASH","TILDE","Proxy","target","prop","PAD","A","SELECT","B","X","Y","LB","LEFT_BUMPER","RB","RIGHT_BUMPER","LT","LEFT_TRIGGER","RT","RIGHT_TRIGGER","START","LEFT_STICK","RIGHT_STICK","ANALOG_UP","ANALOG_LEFT","ANALOG_DOWN","ANALOG_RIGHT","pad_to_touch","key_state_new","pad_states","gamepad_data","mouse_pos","last_mouse_pos","mouse_pos_is_touch","mouse_over_captured","mouse_down","mouse_wheel","movement_questionable_frames","MOVEMENT_QUESTIONABLE_FRAMES","input_eaten_kb","input_eaten_mouse","touches","touch_mode","pad_mode","TYPE_INT","eventTimestamp","timeStamp","TouchData","touch","delta","total","cur_pos","start_pos","start_time","dispatched","dispatched_drag_over","up_edge","down_edge","down_time","origin_time","down","is_edge","KeyData","keyUp","setMouseToMid","isLocked","pointerlock_touch_id","when","enter","onPointerLockEnter","touch_data","exit","last_event","skip","isTrusted","sourceCapabilities","path","currentTarget","eventlog","pairs","letEventThrough","tagName","className","stopPropagation","unload_protected","stopCtrlW","returnValue","protectUnload","onKeyUp","ctrlKey","ks","onKeyDown","no_stop","F5","F12","I","altKey","metaKey","shiftKey","mouse_moved","temp_delta","last_abs_move","last_abs_move_time","onMouseMove","any_movement","movementX","movementY","abs_move","onMouseDown","no_click","touch_id","onMouseUp","onWheel","deltaY","wheelDelta","detail","touch_pos","released_touch_id","onTouchChange","cancelable","ct","seen","new_count","old_count","last_touch","identifier","released_touch","released_ids","_touch","release","_ii2","_touch2","new_id","_touch3","onBlurOrFocus","evt","ANALOG_MAP","genAnalogMap","_canvas","passive_param","opts","passive","WheelEvent","DEADZONE","DEADZONE_SQ","NUM_STICKS","PAD_THRESHOLD","getGamepadData","gpd","sticks","updatePadState","ps","padcode","_touch_id","gamepadUpdate","gamepads","webkitGamepads","getGamepads","webkitGetGamepads","numGamePads","gamepad","buttons","numButtons","axes","pair","magnitude","endFrameTickMap","keycode","skip_mouse","mousePosParam","check_pos","checkPos","pos_param","drag_target","stickindex","padindex","sub","padButtonDownInternal","padButtonDownEdgeInternal","padButtonUpEdgeInternal","padButtonShared","max_click_dist","max_dist","phys","in_event_button","min_dist","is_down_edge","eat_clicks","payload","drag_payload","min_time","long_press_dispatched","time","long_press","link","linkText","linkTick","ui","state_cache","good_url","clicked","frame","a_elem","onclick","style_link","style_link_hover","mouseover","underline_w","drawLine","clearAll","exportAll","importAll","storage_prefix","lsd","localStorage","stringify","def","key_prefix","prefix","RegExp","serialized","mat43","m43identity","m43mul","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","b4","b5","b6","b7","b8","glb_parser","renderer","box_glb","default_vshader","default_fshader","initShaders","Model","base_url","array_buffer","skip_attr","TANGENT","glb_data","glb","glb_json","objs","meshes","mesh","primitives","material","materials","bct","pbrMetallicRoughness","baseColorTexture","texture_def","sampler_def","samplers","sampler","uri","magFilter","minFilter","wrapS","wrapT","bidx","total_size","attr","attributes","_accessor","geom_format","geom_count","my_vert_count","vert","_attr","kk","indices","mat","drawGeom","_ii3","model","box","model_box","preloadParticleData","v2lerp","v2mul","v3add","v4lerp","v4mul","blend_map","BLEND_ALPHA","additive","BLEND_ADDITIVE","particle_data","defs","part_name","particles","part_def","normalizeValue","normalizeValueVec","vec","normalizeParticle","particle_manager","norm","blend","color_track","size_track","accel","rot","rot_vel","lifespan","kill_time_accel","_e","_arr","findParticle","normalizeEmitter","part_map","part_idx","particle","vel","emit_rate","emit_time","emit_initial","normalizeDef","system_lifespan","emitters","instValue","instValueVec","temp_color2","temp_size","temp_size2","ParticleSystem","def_in","age","kill_hard","kill_soft","part_sets","part_set","parts","_def","emitter","countdown","started","stopped","part","age_norm","dts","weight","_weight","queueraw4","dt_orig","tickParticle","init_dt","emitter_def","emitParticle","remaining_dt","emit_dt","tickPartSet","_ii4","tickEmitter","ParticleManager","systems","system","_key2","v3copy","metrics","METRIC_PAD","bg_default","bg_mouse_over","bg_fade","fps_graph","fps_style","metric","history_size","num_labels","showMetric","pad","METRIC_VALUE_WIDTH","line_height","max_label_w","max_labels","drew_any","label_w","FPSMETER","bg","showMetricGraph","small","LINE_WIDTH","LINE_PAD","LINE_HEIGHT","NUM_LINES","history_index","line_scale","line_index","bar_max","line_jj","bar_min","bars_stack","lesser","line_kk","y_graph","user_want_locked","on_ptr_lock","pointerLog","exitPointerLock","requestPointerLock","onPointerLockChange","pointerLockElement","mozPointerLockElement","webkitPointerLockElement","onPointerLockError","_elem","_on_ptr_lock","mozRequestPointerLock","webkitRequestPointerLock","mozExitPointerLock","webkitExitPointerLock","begin","Int32Array","delim","fill","cmpDefault","cmp","glov_markup","cloneShallow","merge","selbox_font_style_default","selbox_font_style_selected","selbox_font_style_down","selbox_font_style_disabled","default_display","style_default","style_selected","style_disabled","style_down","no_background","no_buttons","centered","bounce","tab_stop","use_markup","color_gray50","color_gray80","color_grayD0","color_white","SELBOX_BOUNCE_TIME","GlovMenuItem","value_min","value_max","value_inc","tag","Boolean","prompt_int","prompt_string","no_sound","slider","no_controller_exit","plus_minus","disabled","GlovSelectionBox","items","is_dropdown","transient_focus","display","scroll_height","entry_height","button_height","auto_reset","initial_selection","dropdown_visible","selected","was_clicked","was_right_clicked","dummy_focus_check","selbox_dummy","mouse_mode","last_mousex","last_mousey","bounce_time","expected_frame_index","pre_dropdown_selection","item","tag_or_index","list_height","do_scroll","yret","pos_changed","was_focused","gained_focus_forward","old_sel","gained_focus","num_non_disabled_selections","eff_sel","bg_height","getHeight","page_size","pad_shift","S","W","sel_changed","focusPrev","_item","color0","setMouseOver","drawHBox","menu_header","font_style_focused","font_style_normal","uidata","wh","y_save","x_save","scroll_pos","eff_width","min_scroll_pos","old_scroll_pos","sa","max_scroll_pos","overscroll","_item2","entry_disabled","image_set","is_mouseover","mpos","show_selection","menu_selected","menu_down","ms","menu_entry","bounce_amt","did_tab","text_y","tab_idx","pre","post","w1","w2","md","print","_md","xx","zz","playUISound","titleCase","true","ver","addInclude","addGlobal","matchAll","last_id","bound_prog","ATTR0","ATTR1","COLOR","COLOR_0","ATTR2","TEXCOORD","TEXCOORD_0","ATTR3","NORMAL","ATTR4","TEXCOORD_1","globals","error_fp","error_vp","vp_attr_regex","uniform_regex","sampler_regex","include_regex","type_size","float","includes","report_queued","shader_errors","reportShaderError","doReport","parseIncludes","supplied_uniforms","filename","replacement","str2","webgl2_header","webgl2_header_fp","webgl2_header_vp","Shader","header","createShader","programs","found","uniforms","type_name","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","error_text","getShaderInfoLog","trim","uniformSetValue","unif","uniform1fv","uniform2fv","uniform3fv","uniform4fv","uniformMatrix3fv","uniformMatrix4fv","prog","createProgram","attachShader","bindAttribLocation","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","useProgram","getUniformLocation","glob","_name","uniform1i","_jj","reserved","WEBGL2","_globals","selection_box","color101010C8","GlovSimpleMenu","sel_box","edit_index","menu_item","force","exit_index","selbox_enabled","no_notches","slider_width","slider_x","run","grabbed","buttons_width","button_x","buttonText","no_focus","minus_over","button_mouseover","plus_over","execItem","allow_left_right","D","wasRightClicked","isSelected","soundLoad","soundResumed","soundPlay","soundPlayMusic","FADE_DEFAULT","FADE_OUT","FADE_IN","FADE","DEFAULT_FADE_RATE","num_loading","default_params","ext_list","fade_rate","sound_params","last_played","fades","music","current_volume","target_volume","sys_volume","need_play","base","preferred_ext","srcs","tryLoad","streaming","extra","max_fade","mus","fade_amt","soundname","as_music","last_played_time","fadeOut","transition","start_vol","_sys_volume","GlovSpriteAnimation","anim","anim_idx","frames","times","total_time","clone","init_time","progress","getFrame","queuefn","queuesprite","clip","buildRects","nextHighestPowerOfTwo","sprite_vshader","sprite_fshader","sprite_dual_fshader","sprite_shader_params","last_uid","sprite_queue","sprite_freelist","SpriteData","shader_params","uid","spriteDataAlloc","cmpSprite","x3","y3","uvs","nozoom","dx","dy","cosr","sinr","ch","cw","sh","sw","ubias","vbias","zoom_level","mipped_texels","z_start","z_end","xy","gd_h","scissor","SCISSOR_TEST","diffTextures","texsa","texsb","batch_state","sprite_geom","sprite_buffer","sprite_buffer_len","sprite_buffer_batch_start","sprite_buffer_idx","last_blend_mode","last_bound_shader","MAX_VERT_COUNT","batches","commit","commitAndFlush","batch","ONE","bufferSpriteData","c1","c2","c3","c4","u2","v2","new_length","ws","hs","rects","total_w","total_h","hw","non_square","asp","widths","heights","Sprite","layers","onLoad","src_width","src_height","drawDualTint","color1","isArrayBound","findTexForReplacement","aniso","max_aniso","aniso_enum","default_filter_min","default_filter_mag","R8","RGB8","RGBA8","mag","isPowerOfTwo","bound_unit","bound_tex","handle_loading","handle_error","setUnit","unit","activeTexture","TEXTURE0","bindHandle","bindTexture","unbindHandle","eff_handle","Texture","loaded","load_fail","TEXTURE_2D","is_array","TEXTURE_2D_ARRAY","createTexture","on_load","updateData","loadURL","updateGPUMem","new_size","mipmaps","texParameteri","TEXTURE_MIN_FILTER","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","TEXTURE_WRAP_T","texParameterf","getError","np2","texImage2D","internal_type","gl_type","num_images","texImage3D","texSubImage2D","_num_images","drawImage","gl_err","generateMipmap","TEX_RETRY_COUNT","next","did_next","done","fail","crossOrigin","retries","handleLoad","err_details","_err","copyTexImage2D","RGB","deleteTexture","last_temporary_id","unique_name","search_key","compare_key","LUMINANCE","UNSIGNED_BYTE","RGBA","ext_anisotropic","getExtension","TEXTURE_MAX_ANISOTROPY_EXT","getParameter","MAX_TEXTURE_MAX_ANISOTROPY_EXT","queue","active","splitScreen","pixelate","randomTransition","easeOut","unit_vec","pow","transitions","IMMEDIATE","REMOVE","CONTINUE","transition_pixelate","GlovTransition","capture","accum_time","transitionCapture","trans","immediate","TRANSITION_FINAL","_trans","destroyTexture","trans_idx","TRANSITION_RANGE","force_end","glovTransitionFadeFunc","fade_time","initial","ms_since_start","glovTransitionSplitScreenFunc","border_width","slide_window","v_half","border_grow_progress","render_scale","transition_pixelate_texture","transitionPixelateCapture","glovTransitionPixelateFunc","gd_width","partial_progress","param1","texSizeX","texSizeY","fade_time_scale","makeColorSet","loadUISprite","drawVBox","drawBox","isFocusedPeek","isFocused","panel","drawTooltip","buttonShared","buttonTextDraw","buttonImage","modalDialog","modalDialogClear","modalTextEntry","createEditBox","menuUp","provideUserString","drawCircle","drawHollowCircle","drawCone","scaleSizes","setModalSizes","setFontHeight","setTooltipWidth","MODAL","TOOLTIP","glov_edit_box","glov_sprites","lerp","MODAL_DARKEN","menu_fade_params_default","saturation","brightness","fallback_darken","regular","doBlurEffect","desaturate_xform","desaturate_tmp","doDesaturateEffect","modal_button_width","button_img_size","modal_width","modal_y0","modal_title_scale","modal_pad","panel_pixel_scale","tooltip_panel_pixel_scale","tooltip_width","tooltip_pad","color_button","color_panel","modal_font_style","button_focused","touch_changed_focus","last_frame_button_mouseover","frame_button_mouseover","modal_dialog","modal_stealing_focus","menu_up","menu_fade_params","menu_up_time","last_frame_edit_boxes","dom_elems","dom_elems_issued","button_keys","focused_last_frame","focused_this_frame","focused_key_not","focused_key","focused_key_prev1","focused_key_prev2","pad_focus_left","pad_focus_right","overrides","only_override","override","ui_sprites","pad_focus_dpad","button_regular","white","ok","O","cancel","yes","no","N","dynamic_text_elem","last_elem","coords","my_w","my_h","quiet","tooltip","tooltip_w","tooltip_y0","eff_tooltip_pad","tooltip_above","draw_only","rollover_quiet","key_opts","no_touch_mouseover","touch_twice","drag_over","z_bias","button_last_color","base_name","sprite_name","hpad","_buttonShared","shrink","img_rect","_buttonShared2","no_bg","img_origin","img_w","img_h","largest_w_horiz","largest_w_vert","pad_top","draw_param","left_align","rotation","flip","title","dom_requirement","virtual_size","modalDialogRun","fullscreen_mode","eff_font_height","eff_button_height","vpad","general_scale","old_h","_modal_dialog","click_anywhere","eff_modal_width","eff_button_width","max_total_button_width","text_w","tick_key","avail_width","eff_button_keys","pressed","eb","edit_text","val","old_fn","getText","old_tick","eb_ret","edit_w","color_slider_handle","color_slider_handle_grab","color_slider_handle_over","slider_dragging","draggable_width","handle_center_pos","handle_h","handle_w","slider_handle","handle_x","handle_y","handle_color","pp_bad_frames","pp_this_frame","NOPP","edit_box","unrun","removeChild","copyTextToClipboard","textArea","position","border","boxShadow","background","execCommand","thing","copy_success","OK","mx","my","Mx","My","spreadTechParams","drawCircleInternal","tu1","tv1","tu2","tv2","circle","CIRCLE_SIZE","midp","d","filter_max","hollow_circle","LINE_W","LINE_SIZE","tangx","tangy","w0","cone","CONE_SIZE","_dx","_dy","dCircle","_modal_button_width","title_scale","_font_height","_tooltip_width","_tooltip_panel_pixel_scale","runFontTest","glov_simple_menu","glov_selection_box","demo_menu","demo_menu_up","demo_result","edit_box1","edit_box2","test_select1","test_select2","slider_value","column_width","getSelectedItem","Cancel","COLOR_RED","COLOR_GREEN","COLOR_WHITE","COLOR_INVISIBLE","font_style_outline","font_style_glow","font_style_shadow","font_style_both","font_size2","font_style_both2","font_style_outline2","font_style_glow2","onChange","route","refreshTitle","go","HISTORY_UPDATE_TIME","title_suffix","url_base","on_change","cmpNumKeys","route_param_regex","routes","route_string","regex","new_route","queryString","regex_value","getValue","query_string","_m","_r","m2","last_history_str","goInternal","hides","otherkey","dirty","_opts","new_value","_v","_opts2","eff_title","toString","values","root_value","outer","_key3","_opts3","hide_values","_key4","_opts4","periodicRefreshTitle","onPopState","last_history_set_time","scheduled","need_push_state","updateHistory","new_need_push_state","new_str","delay","pushState","replaceState","regex_search","regex_type","onpopstate","vec1","v2abs","v2addScale","v2distSq","v2div","v2floor","v2normalize","v2same","v3iAdd","v3addScale","v3cross","v3determinant","v3dot","v3distSq","v3div","v3iFloor","v3floor","v3lengthSq","v3lerp","v3iMax","v3iMin","v3mul","v3normalize","v3perspectiveProject","v3round","v3same","v3scale","v3set","v3sub","v3iSub","v3zero","v4add","v4mulAdd","v4zero","half_vec","zero_vec","identity_mat3","identity_mat4","xaxis","yaxis","zaxis","it","invw","channels","glov_local_storage","glov_sprite_animation","glov_ui_test","BACKGROUND","SPRITES","PARTICLES","UI_TEST","music_file","flags","flagGet","dflt","flagToggle","flagSet","perfTestSprites","subc","_idx","createSprite","createAnimation","color_red","color_yellow","sprite_size","initGraphics","test_tint","animation","idle_left","idle_right","game_bg","last_particles","color_sprite","character","bounds","font_test_idx","button_spacing","createSystem","explosion","testInit","part0","max_parts","exp","isInteger","TYPE_NAME","resp","checkAccess","CmdParse","cmds_for_complete","was_not_found","default_handler","cmdList","access_show","cmd_list","access_run","setDefaultHandler","store_key","init_value","store_value","cmpCmd","addServerCommands","new_cmds","_cname","first_tok","nop","empty","easeInOut","easeIn","has","mix","sign","log2","round100","round1000","fract","lineCircleIntersect","inherits","logdata","toNumber","randomNot","toArray","va","dest","hasOwnProperty","mn","tol","EPSILON","p1","p2","pCircle","radius","dp","bb4ac","mu1","mu2","ctor","superCtor","constructor","writable","configurable","not_value","max_value","array_like","re"],"mappings":"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","file":"app.bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","/*!\n *  howler.js v2.1.3\n *  howlerjs.com\n *\n *  (c) 2013-2019, James Simpson of GoldFire Studios\n *  goldfirestudios.com\n *\n *  Modified by Jimb Esser:\n *    Fix inconsistent return of self.\n *    Do not throw uncaught promise rejections at startup\n *    Fix audio not resuming upon keypress\n *    Fix audio not resuming upon mousedown\n *    Fix pre-loading entire audio file when streaming is desired\n *    Unlock audio even if WebAudio is disabled\n *    Expose `safeToPlay` so app doesn't queue up hundreds of sounds before we can play any\n *\n *  MIT License\n */\n\n(function() {\n\n  'use strict';\n\n  /** Global Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create the global controller. All contained methods and properties apply\n   * to all sounds that are currently playing or will be in the future.\n   */\n  var HowlerGlobal = function() {\n    this.init();\n  };\n  HowlerGlobal.prototype = {\n    /**\n     * Initialize the global Howler object.\n     * @return {Howler}\n     */\n    init: function() {\n      var self = this || Howler;\n\n      // Create a global ID counter.\n      self._counter = 1000;\n\n      // Pool of unlocked HTML5 Audio objects.\n      self._html5AudioPool = [];\n      self.html5PoolSize = 10;\n\n      // Internal properties.\n      self._codecs = {};\n      self._howls = [];\n      self._muted = false;\n      self._volume = 1;\n      self._canPlayEvent = 'canplaythrough';\n      self._navigator = (typeof window !== 'undefined' && window.navigator) ? window.navigator : null;\n\n      // Public properties.\n      self.masterGain = null;\n      self.noAudio = false;\n      self.usingWebAudio = true;\n      self.autoSuspend = true;\n      self.ctx = null;\n      self.safeToPlay = false;\n\n      // Set to false to disable the auto audio unlocker.\n      self.autoUnlock = true;\n\n      // Setup the various state values for global tracking.\n      self._setup();\n\n      return self;\n    },\n\n    /**\n     * Get/set the global volume for all sounds.\n     * @param  {Float} vol Volume from 0.0 to 1.0.\n     * @return {Howler/Float}     Returns self or current volume.\n     */\n    volume: function(vol) {\n      var self = this || Howler;\n      vol = parseFloat(vol);\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        self._volume = vol;\n\n        // Don't update any of the nodes if we are muted.\n        if (self._muted) {\n          return self;\n        }\n\n        // When using Web Audio, we just need to adjust the master gain.\n        if (self.usingWebAudio) {\n          self.masterGain.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n        }\n\n        // Loop through and change volume for all HTML5 audio nodes.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and change the volumes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node) {\n                sound._node.volume = sound._volume * vol;\n              }\n            }\n          }\n        }\n\n        return self;\n      }\n\n      return self._volume;\n    },\n\n    /**\n     * Handle muting and unmuting globally.\n     * @param  {Boolean} muted Is muted or not.\n     */\n    mute: function(muted) {\n      var self = this || Howler;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!self.ctx) {\n        setupAudioContext();\n      }\n\n      self._muted = muted;\n\n      // With Web Audio, we just need to mute the master gain.\n      if (self.usingWebAudio) {\n        self.masterGain.gain.setValueAtTime(muted ? 0 : self._volume, Howler.ctx.currentTime);\n      }\n\n      // Loop through and mute all HTML5 Audio nodes.\n      for (var i=0; i<self._howls.length; i++) {\n        if (!self._howls[i]._webAudio) {\n          // Get all of the sounds in this Howl group.\n          var ids = self._howls[i]._getSoundIds();\n\n          // Loop through all sounds and mark the audio node as muted.\n          for (var j=0; j<ids.length; j++) {\n            var sound = self._howls[i]._soundById(ids[j]);\n\n            if (sound && sound._node) {\n              sound._node.muted = (muted) ? true : sound._muted;\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Handle stopping all sounds globally.\n     */\n    stop: function() {\n      var self = this || Howler;\n\n      // Loop through all Howls and stop them.\n      for (var i=0; i<self._howls.length; i++) {\n        self._howls[i].stop();\n      }\n\n      return self;\n    },\n\n    /**\n     * Unload and destroy all currently loaded Howl objects.\n     * @return {Howler}\n     */\n    unload: function() {\n      var self = this || Howler;\n\n      for (var i=self._howls.length-1; i>=0; i--) {\n        self._howls[i].unload();\n      }\n\n      // Create a new AudioContext to make sure it is fully reset.\n      if (self.usingWebAudio && self.ctx && typeof self.ctx.close !== 'undefined') {\n        self.ctx.close();\n        self.ctx = null;\n        setupAudioContext();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for codec support of specific extension.\n     * @param  {String} ext Audio file extention.\n     * @return {Boolean}\n     */\n    codecs: function(ext) {\n      return (this || Howler)._codecs[ext.replace(/^x-/, '')];\n    },\n\n    /**\n     * Setup various state values for global tracking.\n     * @return {Howler}\n     */\n    _setup: function() {\n      var self = this || Howler;\n\n      // Keeps track of the suspend/resume state of the AudioContext.\n      self.state = self.ctx ? self.ctx.state || 'suspended' : 'suspended';\n      if  (self.state === 'running') {\n        self.safeToPlay = true;\n      }\n\n      // Automatically begin the 30-second suspend process\n      self._autoSuspend();\n\n      // Check if audio is available.\n      if (!self.usingWebAudio) {\n        // No audio is available on this system if noAudio is set to true.\n        if (typeof Audio !== 'undefined') {\n          try {\n            var test = new Audio();\n\n            // Check if the canplaythrough event is available.\n            if (typeof test.oncanplaythrough === 'undefined') {\n              self._canPlayEvent = 'canplay';\n            }\n          } catch(e) {\n            self.noAudio = true;\n          }\n        } else {\n          self.noAudio = true;\n        }\n      }\n\n      // Test to make sure audio isn't disabled in Internet Explorer.\n      try {\n        var test = new Audio();\n        if (test.muted) {\n          self.noAudio = true;\n        }\n      } catch (e) {}\n\n      // Check for supported codecs.\n      if (!self.noAudio) {\n        self._setupCodecs();\n      }\n\n      return self;\n    },\n\n    /**\n     * Check for browser support for various codecs and cache the results.\n     * @return {Howler}\n     */\n    _setupCodecs: function() {\n      var self = this || Howler;\n      var audioTest = null;\n\n      // Must wrap in a try/catch because IE11 in server mode throws an error.\n      try {\n        audioTest = (typeof Audio !== 'undefined') ? new Audio() : null;\n      } catch (err) {\n        return self;\n      }\n\n      if (!audioTest || typeof audioTest.canPlayType !== 'function') {\n        return self;\n      }\n\n      var mpegTest = audioTest.canPlayType('audio/mpeg;').replace(/^no$/, '');\n\n      // Opera version <33 has mixed MP3 support, so we need to check for and block it.\n      var checkOpera = self._navigator && self._navigator.userAgent.match(/OPR\\/([0-6].)/g);\n      var isOldOpera = (checkOpera && parseInt(checkOpera[0].split('/')[1], 10) < 33);\n\n      self._codecs = {\n        mp3: !!(!isOldOpera && (mpegTest || audioTest.canPlayType('audio/mp3;').replace(/^no$/, ''))),\n        mpeg: !!mpegTest,\n        opus: !!audioTest.canPlayType('audio/ogg; codecs=\"opus\"').replace(/^no$/, ''),\n        ogg: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        oga: !!audioTest.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, ''),\n        wav: !!audioTest.canPlayType('audio/wav; codecs=\"1\"').replace(/^no$/, ''),\n        aac: !!audioTest.canPlayType('audio/aac;').replace(/^no$/, ''),\n        caf: !!audioTest.canPlayType('audio/x-caf;').replace(/^no$/, ''),\n        m4a: !!(audioTest.canPlayType('audio/x-m4a;') || audioTest.canPlayType('audio/m4a;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        mp4: !!(audioTest.canPlayType('audio/x-mp4;') || audioTest.canPlayType('audio/mp4;') || audioTest.canPlayType('audio/aac;')).replace(/^no$/, ''),\n        weba: !!audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, ''),\n        webm: !!audioTest.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, ''),\n        dolby: !!audioTest.canPlayType('audio/mp4; codecs=\"ec-3\"').replace(/^no$/, ''),\n        flac: !!(audioTest.canPlayType('audio/x-flac;') || audioTest.canPlayType('audio/flac;')).replace(/^no$/, '')\n      };\n\n      return self;\n    },\n\n    /**\n     * Some browsers/devices will only allow audio to be played after a user interaction.\n     * Attempt to automatically unlock audio on the first user interaction.\n     * Concept from: http://paulbakaus.com/tutorials/html5/web-audio-on-ios/\n     * @return {Howler}\n     */\n    _unlockAudio: function() {\n      var self = this || Howler;\n\n      // Only run this if Web Audio is supported and it hasn't already been unlocked.\n      // JE: Unlock even if not using WebAudio; Also, _audioUnlocked is never true here, and would be false while unlocking anyway\n      // if (self._audioUnlocked || !self.ctx) {\n      //   return self;\n      // }\n\n      self._audioUnlocked = false;\n      self.autoUnlock = false;\n\n      if (self.ctx) {\n        // Some mobile devices/platforms have distortion issues when opening/closing tabs and/or web views.\n        // Bugs in the browser (especially Mobile Safari) can cause the sampleRate to change from 44100 to 48000.\n        // By calling Howler.unload(), we create a new AudioContext with the correct sampleRate.\n        if (!self._mobileUnloaded && self.ctx.sampleRate !== 44100) {\n          self._mobileUnloaded = true;\n          self.unload();\n        }\n\n        // Scratch buffer for enabling iOS to dispose of web audio buffers correctly, as per:\n        // http://stackoverflow.com/questions/24119684\n        self._scratchBuffer = self.ctx.createBuffer(1, 1, 22050);\n      }\n\n      // Call this method on touch start to create and play a buffer,\n      // then check if the audio actually played to determine if\n      // audio has now been unlocked on iOS, Android, etc.\n      var unlock = function(e) {\n        // Create a pool of unlocked HTML5 Audio objects that can\n        // be used for playing sounds without user interaction. HTML5\n        // Audio objects must be individually unlocked, as opposed\n        // to the WebAudio API which only needs a single activation.\n        // This must occur before WebAudio setup or the source.onended\n        // event will not fire.\n        for (var i=0; i<self.html5PoolSize; i++) {\n          try {\n            var audioNode = new Audio();\n\n            // Mark this Audio object as unlocked to ensure it can get returned\n            // to the unlocked pool when released.\n            audioNode._unlocked = true;\n\n            // Add the audio node to the pool.\n            self._releaseHtml5Audio(audioNode);\n          } catch (e) {\n            self.noAudio = true;\n          }\n        }\n\n        // Loop through any assigned audio nodes and unlock them.\n        for (var i=0; i<self._howls.length; i++) {\n          if (!self._howls[i]._webAudio) {\n            // Get all of the sounds in this Howl group.\n            var ids = self._howls[i]._getSoundIds();\n\n            // Loop through all sounds and unlock the audio nodes.\n            for (var j=0; j<ids.length; j++) {\n              var sound = self._howls[i]._soundById(ids[j]);\n\n              if (sound && sound._node && !sound._node._unlocked) {\n                sound._node._unlocked = true;\n                sound._node.load();\n              }\n            }\n          }\n        }\n\n        // Fix Android can not play in suspend state.\n        self._autoResume();\n\n        function onUnlockFinish() {\n          // Update the unlocked state and prevent this check from happening again.\n          self._audioUnlocked = true;\n          self.safeToPlay = true;\n\n          // Remove the touch start listener.\n          document.removeEventListener('touchstart', unlock, true);\n          document.removeEventListener('touchend', unlock, true);\n          document.removeEventListener('click', unlock, true);\n          document.removeEventListener('mousedown', unlock, true);\n          document.removeEventListener('keydown', unlock, true);\n\n          // Let all sounds know that audio has been unlocked.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('unlock');\n          }\n        }\n\n        if (self.ctx) {\n          // Create an empty buffer.\n          var source = self.ctx.createBufferSource();\n          source.buffer = self._scratchBuffer;\n          source.connect(self.ctx.destination);\n\n          // Play the empty buffer.\n          if (typeof source.start === 'undefined') {\n            source.noteOn(0);\n          } else {\n            source.start(0);\n          }\n\n          // Calling resume() on a stack initiated by user gesture is what actually unlocks the audio on Android Chrome >= 55.\n          if (typeof self.ctx.resume === 'function') {\n            self.ctx.resume();\n          }\n\n          // Setup a timeout to check that we are unlocked on the next event loop.\n          source.onended = function() {\n            source.disconnect(0);\n            onUnlockFinish();\n          };\n        } else {\n          // JE: non-WebAudio - we received user input, assume unlocked immediately\n          onUnlockFinish();\n        }\n      };\n\n      // Setup a touch start listener to attempt an unlock in.\n      document.addEventListener('touchstart', unlock, true);\n      document.addEventListener('touchend', unlock, true);\n      document.addEventListener('click', unlock, true);\n      document.addEventListener('mousedown', unlock, true);\n      document.addEventListener('keydown', unlock, true);\n\n      return self;\n    },\n\n    /**\n     * Get an unlocked HTML5 Audio object from the pool. If none are left,\n     * return a new Audio object and throw a warning.\n     * @return {Audio} HTML5 Audio object.\n     */\n    _obtainHtml5Audio: function() {\n      var self = this || Howler;\n\n      // Return the next object from the pool if one exists.\n      if (self._html5AudioPool.length) {\n        return self._html5AudioPool.pop();\n      }\n\n      // JE: Disabling this, it causes un-ignorable Uncaught Promise Rejection errors in Chrome.\n      // //.Check if the audio is locked and throw a warning.\n      // var testPlay = new Audio().play();\n      // if (testPlay && typeof Promise !== 'undefined' && (testPlay instanceof Promise || typeof testPlay.then === 'function')) {\n      //   testPlay.catch(function() {\n      //     console.warn('HTML5 Audio pool exhausted, returning potentially locked audio object.');\n      //   });\n      // }\n\n      return new Audio();\n    },\n\n    /**\n     * Return an activated HTML5 Audio object to the pool.\n     * @return {Howler}\n     */\n    _releaseHtml5Audio: function(audio) {\n      var self = this || Howler;\n\n      // Don't add audio to the pool if we don't know if it has been unlocked.\n      if (audio._unlocked) {\n        self._html5AudioPool.push(audio);\n      }\n\n      return self;\n    },\n\n    /**\n     * Automatically suspend the Web Audio AudioContext after no sound has played for 30 seconds.\n     * This saves processing/energy and fixes various browser-specific bugs with audio getting stuck.\n     * @return {Howler}\n     */\n    _autoSuspend: function() {\n      var self = this;\n\n      if (!self.autoSuspend || !self.ctx || typeof self.ctx.suspend === 'undefined' || !Howler.usingWebAudio) {\n        return self;\n      }\n\n      // Check if any sounds are playing.\n      for (var i=0; i<self._howls.length; i++) {\n        if (self._howls[i]._webAudio) {\n          for (var j=0; j<self._howls[i]._sounds.length; j++) {\n            if (!self._howls[i]._sounds[j]._paused) {\n              return self;\n            }\n          }\n        }\n      }\n\n      if (self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n      }\n\n      // If no sound has played after 30 seconds, suspend the context.\n      self._suspendTimer = setTimeout(function() {\n        if (!self.autoSuspend) {\n          return;\n        }\n\n        self._suspendTimer = null;\n        self.state = 'suspending';\n        self.ctx.suspend().then(function() {\n          self.state = 'suspended';\n\n          if (self._resumeAfterSuspend) {\n            delete self._resumeAfterSuspend;\n            self._autoResume();\n          }\n        });\n      }, 30000);\n\n      return self;\n    },\n\n    /**\n     * Automatically resume the Web Audio AudioContext when a new sound is played.\n     * @return {Howler}\n     */\n    _autoResume: function() {\n      var self = this;\n\n      if (!self.ctx || typeof self.ctx.resume === 'undefined' || !Howler.usingWebAudio) {\n        return self;\n      }\n\n      if (self.state === 'running' && self._suspendTimer) {\n        clearTimeout(self._suspendTimer);\n        self._suspendTimer = null;\n      } else if (self.state === 'suspended') {\n        self.ctx.resume().then(function() {\n          self.state = 'running';\n          // Emit to all Howls that the audio has resumed.\n          for (var i=0; i<self._howls.length; i++) {\n            self._howls[i]._emit('resume');\n          }\n        });\n\n        if (self._suspendTimer) {\n          clearTimeout(self._suspendTimer);\n          self._suspendTimer = null;\n        }\n      } else if (self.state === 'suspending') {\n        self._resumeAfterSuspend = true;\n      }\n\n      return self;\n    }\n  };\n\n  // Setup the global audio controller.\n  var Howler = new HowlerGlobal();\n\n  /** Group Methods **/\n  /***************************************************************************/\n\n  /**\n   * Create an audio group controller.\n   * @param {Object} o Passed in properties for this group.\n   */\n  var Howl = function(o) {\n    var self = this;\n\n    // Throw an error if no source is provided.\n    if (!o.src || o.src.length === 0) {\n      console.error('An array of source files must be passed with any new Howl.');\n      return;\n    }\n\n    self.init(o);\n  };\n  Howl.prototype = {\n    /**\n     * Initialize a new Howl group object.\n     * @param  {Object} o Passed in properties for this group.\n     * @return {Howl}\n     */\n    init: function(o) {\n      var self = this;\n\n      // If we don't have an AudioContext created yet, run the setup.\n      if (!Howler.ctx) {\n        setupAudioContext();\n      }\n\n      // Setup user-defined default properties.\n      self._autoplay = o.autoplay || false;\n      self._format = (typeof o.format !== 'string') ? o.format : [o.format];\n      self._html5 = o.html5 || false;\n      self._muted = o.mute || false;\n      self._loop = o.loop || false;\n      self._pool = o.pool || 5;\n      self._preload = (typeof o.preload === 'boolean') ? o.preload : true;\n      self._rate = o.rate || 1;\n      self._sprite = o.sprite || {};\n      self._src = (typeof o.src !== 'string') ? o.src : [o.src];\n      self._volume = o.volume !== undefined ? o.volume : 1;\n      self._xhrWithCredentials = o.xhrWithCredentials || false;\n      self._xhrHeaders = o.xhrHeaders || null;\n\n      // Setup all other default properties.\n      self._duration = 0;\n      self._state = 'unloaded';\n      self._sounds = [];\n      self._endTimers = {};\n      self._queue = [];\n      self._playLock = false;\n\n      // Setup event listeners.\n      self._onend = o.onend ? [{fn: o.onend}] : [];\n      self._onfade = o.onfade ? [{fn: o.onfade}] : [];\n      self._onload = o.onload ? [{fn: o.onload}] : [];\n      self._onloaderror = o.onloaderror ? [{fn: o.onloaderror}] : [];\n      self._onplayerror = o.onplayerror ? [{fn: o.onplayerror}] : [];\n      self._onpause = o.onpause ? [{fn: o.onpause}] : [];\n      self._onplay = o.onplay ? [{fn: o.onplay}] : [];\n      self._onstop = o.onstop ? [{fn: o.onstop}] : [];\n      self._onmute = o.onmute ? [{fn: o.onmute}] : [];\n      self._onvolume = o.onvolume ? [{fn: o.onvolume}] : [];\n      self._onrate = o.onrate ? [{fn: o.onrate}] : [];\n      self._onseek = o.onseek ? [{fn: o.onseek}] : [];\n      self._onunlock = o.onunlock ? [{fn: o.onunlock}] : [];\n      self._onresume = [];\n\n      // Web Audio or HTML5 Audio?\n      self._webAudio = Howler.usingWebAudio && !self._html5;\n\n      // Automatically try to enable audio.\n      if (Howler.autoUnlock) { // JE: Unlock even if not using WebAudio\n        Howler._unlockAudio();\n      }\n\n      // Keep track of this Howl group in the global controller.\n      Howler._howls.push(self);\n\n      // If they selected autoplay, add a play event to the load queue.\n      if (self._autoplay) {\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play();\n          }\n        });\n      }\n\n      // Load the source file unless otherwise specified.\n      if (self._preload) {\n        self.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Load the audio file.\n     * @return {Howler}\n     */\n    load: function() {\n      var self = this;\n      var url = null;\n\n      // If no audio is available, quit immediately.\n      if (Howler.noAudio) {\n        self._emit('loaderror', null, 'No audio support.');\n        return self;\n      }\n\n      // Make sure our source is in an array.\n      if (typeof self._src === 'string') {\n        self._src = [self._src];\n      }\n\n      // Loop through the sources and pick the first one that is compatible.\n      for (var i=0; i<self._src.length; i++) {\n        var ext, str;\n\n        if (self._format && self._format[i]) {\n          // If an extension was specified, use that instead.\n          ext = self._format[i];\n        } else {\n          // Make sure the source is a string.\n          str = self._src[i];\n          if (typeof str !== 'string') {\n            self._emit('loaderror', null, 'Non-string found in selected audio sources - ignoring.');\n            continue;\n          }\n\n          // Extract the file extension from the URL or base64 data URI.\n          ext = /^data:audio\\/([^;,]+);/i.exec(str);\n          if (!ext) {\n            ext = /\\.([^.]+)$/.exec(str.split('?', 1)[0]);\n          }\n\n          if (ext) {\n            ext = ext[1].toLowerCase();\n          }\n        }\n\n        // Log a warning if no extension was found.\n        if (!ext) {\n          console.warn('No file extension was found. Consider using the \"format\" property or specify an extension.');\n        }\n\n        // Check if this extension is available.\n        if (ext && Howler.codecs(ext)) {\n          url = self._src[i];\n          break;\n        }\n      }\n\n      if (!url) {\n        self._emit('loaderror', null, 'No codec support for selected audio sources.');\n        return self;\n      }\n\n      self._src = url;\n      self._state = 'loading';\n\n      // If the hosting page is HTTPS and the source isn't,\n      // drop down to HTML5 Audio to avoid Mixed Content errors.\n      if (window.location.protocol === 'https:' && url.slice(0, 5) === 'http:') {\n        self._html5 = true;\n        self._webAudio = false;\n      }\n\n      // Create a new sound object and add it to the pool.\n      new Sound(self);\n\n      // Load and decode the audio data for playback.\n      if (self._webAudio) {\n        loadBuffer(self);\n      }\n\n      return self;\n    },\n\n    /**\n     * Play a sound or resume previous playback.\n     * @param  {String/Number} sprite   Sprite name for sprite playback or sound id to continue previous.\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Number}          Sound ID.\n     */\n    play: function(sprite, internal) {\n      var self = this;\n      var id = null;\n\n      // Determine if a sprite, sound id or nothing was passed\n      if (typeof sprite === 'number') {\n        id = sprite;\n        sprite = null;\n      } else if (typeof sprite === 'string' && self._state === 'loaded' && !self._sprite[sprite]) {\n        // If the passed sprite doesn't exist, do nothing.\n        return null;\n      } else if (typeof sprite === 'undefined') {\n        // Use the default sound sprite (plays the full audio length).\n        sprite = '__default';\n\n        // Check if there is a single paused sound that isn't ended.\n        // If there is, play that sound. If not, continue as usual.\n        if (!self._playLock) {\n          var num = 0;\n          for (var i=0; i<self._sounds.length; i++) {\n            if (self._sounds[i]._paused && !self._sounds[i]._ended) {\n              num++;\n              id = self._sounds[i]._id;\n            }\n          }\n\n          if (num === 1) {\n            sprite = null;\n          } else {\n            id = null;\n          }\n        }\n      }\n\n      // Get the selected node, or get one from the pool.\n      var sound = id ? self._soundById(id) : self._inactiveSound();\n\n      // If the sound doesn't exist, do nothing.\n      if (!sound) {\n        return null;\n      }\n\n      // Select the sprite definition.\n      if (id && !sprite) {\n        sprite = sound._sprite || '__default';\n      }\n\n      // If the sound hasn't loaded, we must wait to get the audio's duration.\n      // We also need to wait to make sure we don't run into race conditions with\n      // the order of function calls.\n      if (self._state !== 'loaded') {\n        // Set the sprite value on this sound.\n        sound._sprite = sprite;\n\n        // Mark this sound as not ended in case another sound is played before this one loads.\n        sound._ended = false;\n\n        // Add the sound to the queue to be played on load.\n        var soundId = sound._id;\n        self._queue.push({\n          event: 'play',\n          action: function() {\n            self.play(soundId);\n          }\n        });\n\n        return soundId;\n      }\n\n      // Don't play the sound if an id was passed and it is already playing.\n      if (id && !sound._paused) {\n        // Trigger the play event, in order to keep iterating through queue.\n        if (!internal) {\n          self._loadQueue('play');\n        }\n\n        return sound._id;\n      }\n\n      // Make sure the AudioContext isn't suspended, and resume it if it is.\n      if (self._webAudio) {\n        Howler._autoResume();\n      }\n\n      // Determine how long to play for and where to start playing.\n      var seek = Math.max(0, sound._seek > 0 ? sound._seek : self._sprite[sprite][0] / 1000);\n      var duration = Math.max(0, ((self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000) - seek);\n      var timeout = (duration * 1000) / Math.abs(sound._rate);\n      var start = self._sprite[sprite][0] / 1000;\n      var stop = (self._sprite[sprite][0] + self._sprite[sprite][1]) / 1000;\n      sound._sprite = sprite;\n\n      // Mark the sound as ended instantly so that this async playback\n      // doesn't get grabbed by another call to play while this one waits to start.\n      sound._ended = false;\n\n      // Update the parameters of the sound.\n      var setParams = function() {\n        sound._paused = false;\n        sound._seek = seek;\n        sound._start = start;\n        sound._stop = stop;\n        sound._loop = !!(sound._loop || self._sprite[sprite][2]);\n      };\n\n      // End the sound instantly if seek is at the end.\n      if (seek >= stop) {\n        self._ended(sound);\n        return null;\n      }\n\n      // Begin the actual playback.\n      var node = sound._node;\n      if (self._webAudio) {\n        // Fire this when the sound is ready to play to begin Web Audio playback.\n        var playWebAudio = function() {\n          self._playLock = false;\n          setParams();\n          self._refreshBuffer(sound);\n\n          // Setup the playback params.\n          var vol = (sound._muted || self._muted) ? 0 : sound._volume;\n          node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n          sound._playStart = Howler.ctx.currentTime;\n\n          // Play the sound using the supported method.\n          if (typeof node.bufferSource.start === 'undefined') {\n            sound._loop ? node.bufferSource.noteGrainOn(0, seek, 86400) : node.bufferSource.noteGrainOn(0, seek, duration);\n          } else {\n            sound._loop ? node.bufferSource.start(0, seek, 86400) : node.bufferSource.start(0, seek, duration);\n          }\n\n          // Start a new timer if none is present.\n          if (timeout !== Infinity) {\n            self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n          }\n\n          if (!internal) {\n            setTimeout(function() {\n              self._emit('play', sound._id);\n              self._loadQueue();\n            }, 0);\n          }\n        };\n\n        if (Howler.state === 'running') {\n          playWebAudio();\n        } else {\n          self._playLock = true;\n\n          // Wait for the audio context to resume before playing.\n          self.once('resume', playWebAudio);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      } else {\n        // Fire this when the sound is ready to play to begin HTML5 Audio playback.\n        var playHtml5 = function() {\n          node.currentTime = seek;\n          node.muted = sound._muted || self._muted || Howler._muted || node.muted;\n          node.volume = sound._volume * Howler.volume();\n          node.playbackRate = sound._rate;\n\n          // Some browsers will throw an error if this is called without user interaction.\n          try {\n            var play = node.play();\n\n            // Support older browsers that don't support promises, and thus don't have this issue.\n            if (play && typeof Promise !== 'undefined' && (play instanceof Promise || typeof play.then === 'function')) {\n              // Implements a lock to prevent DOMException: The play() request was interrupted by a call to pause().\n              self._playLock = true;\n\n              // Set param values immediately.\n              setParams();\n\n              // Releases the lock and executes queued actions.\n              play\n                .then(function() {\n                  self._playLock = false;\n                  node._unlocked = true;\n                  if (!internal) {\n                    self._emit('play', sound._id);\n                    self._loadQueue();\n                  }\n                })\n                .catch(function() {\n                  self._playLock = false;\n                  self._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' +\n                    'on mobile devices and Chrome where playback was not within a user interaction.');\n\n                  // Reset the ended and paused values.\n                  sound._ended = true;\n                  sound._paused = true;\n                });\n            } else if (!internal) {\n              self._playLock = false;\n              setParams();\n              self._emit('play', sound._id);\n              self._loadQueue();\n            }\n\n            // Setting rate before playing won't work in IE, so we set it again here.\n            node.playbackRate = sound._rate;\n\n            // If the node is still paused, then we can assume there was a playback issue.\n            if (node.paused) {\n              self._emit('playerror', sound._id, 'Playback was unable to start. This is most commonly an issue ' +\n                'on mobile devices and Chrome where playback was not within a user interaction.');\n              return;\n            }\n\n            // Setup the end timer on sprites or listen for the ended event.\n            if (sprite !== '__default' || sound._loop) {\n              self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n            } else {\n              self._endTimers[sound._id] = function() {\n                // Fire ended on this audio node.\n                self._ended(sound);\n\n                // Clear this listener.\n                node.removeEventListener('ended', self._endTimers[sound._id], false);\n              };\n              node.addEventListener('ended', self._endTimers[sound._id], false);\n            }\n          } catch (err) {\n            self._emit('playerror', sound._id, err);\n          }\n        };\n\n        // If this is streaming audio, make sure the src is set and load again.\n        if (node.src === 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA') {\n          node.src = self._src;\n          node.load();\n        }\n\n        // Play immediately if ready, or wait for the 'canplaythrough'e vent.\n        var loadedNoReadyState = (window && window.ejecta) || (!node.readyState && Howler._navigator.isCocoonJS);\n        if (node.readyState >= 3 || loadedNoReadyState) {\n          playHtml5();\n        } else {\n          self._playLock = true;\n\n          var listener = function() {\n            // Begin playback.\n            playHtml5();\n\n            // Clear this listener.\n            node.removeEventListener(Howler._canPlayEvent, listener, false);\n          };\n          node.addEventListener(Howler._canPlayEvent, listener, false);\n\n          // Cancel the end timer.\n          self._clearTimer(sound._id);\n        }\n      }\n\n      return sound._id;\n    },\n\n    /**\n     * Pause playback and save current position.\n     * @param  {Number} id The sound ID (empty to pause all in group).\n     * @return {Howl}\n     */\n    pause: function(id) {\n      var self = this;\n\n      // If the sound hasn't loaded or a play() promise is pending, add it to the load queue to pause when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'pause',\n          action: function() {\n            self.pause(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be paused.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound && !sound._paused) {\n          // Reset the seek position.\n          sound._seek = self.seek(ids[i]);\n          sound._rateSeek = 0;\n          sound._paused = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // Make sure the sound has been created.\n              if (!sound._node.bufferSource) {\n                continue;\n              }\n\n              if (typeof sound._node.bufferSource.stop === 'undefined') {\n                sound._node.bufferSource.noteOff(0);\n              } else {\n                sound._node.bufferSource.stop(0);\n              }\n\n              // Clean up the buffer source.\n              self._cleanBuffer(sound._node);\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.pause();\n            }\n          }\n        }\n\n        // Fire the pause event, unless `true` is passed as the 2nd argument.\n        if (!arguments[1]) {\n          self._emit('pause', sound ? sound._id : null);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Stop playback and reset to start.\n     * @param  {Number} id The sound ID (empty to stop all in group).\n     * @param  {Boolean} internal Internal Use: true prevents event firing.\n     * @return {Howl}\n     */\n    stop: function(id, internal) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to stop when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'stop',\n          action: function() {\n            self.stop(id);\n          }\n        });\n\n        return self;\n      }\n\n      // If no id is passed, get all ID's to be stopped.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Clear the end timer.\n        self._clearTimer(ids[i]);\n\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          // Reset the seek position.\n          sound._seek = sound._start || 0;\n          sound._rateSeek = 0;\n          sound._paused = true;\n          sound._ended = true;\n\n          // Stop currently running fades.\n          self._stopFade(ids[i]);\n\n          if (sound._node) {\n            if (self._webAudio) {\n              // Make sure the sound's AudioBufferSourceNode has been created.\n              if (sound._node.bufferSource) {\n                if (typeof sound._node.bufferSource.stop === 'undefined') {\n                  sound._node.bufferSource.noteOff(0);\n                } else {\n                  sound._node.bufferSource.stop(0);\n                }\n\n                // Clean up the buffer source.\n                self._cleanBuffer(sound._node);\n              }\n            } else if (!isNaN(sound._node.duration) || sound._node.duration === Infinity) {\n              sound._node.currentTime = sound._start || 0;\n              sound._node.pause();\n\n              // If this is a live stream, stop download once the audio is stopped.\n              if (sound._node.duration === Infinity) {\n                self._clearSound(sound._node);\n              }\n            }\n          }\n\n          if (!internal) {\n            self._emit('stop', sound._id);\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Mute/unmute a single sound or all sounds in this Howl group.\n     * @param  {Boolean} muted Set to true to mute and false to unmute.\n     * @param  {Number} id    The sound ID to update (omit to mute/unmute all).\n     * @return {Howl}\n     */\n    mute: function(muted, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to mute when capable.\n      if (self._state !== 'loaded'|| self._playLock) {\n        self._queue.push({\n          event: 'mute',\n          action: function() {\n            self.mute(muted, id);\n          }\n        });\n\n        return self;\n      }\n\n      // If applying mute/unmute to all sounds, update the group's value.\n      if (typeof id === 'undefined') {\n        if (typeof muted === 'boolean') {\n          self._muted = muted;\n        } else {\n          return self._muted;\n        }\n      }\n\n      // If no id is passed, get all ID's to be muted.\n      var ids = self._getSoundIds(id);\n\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._muted = muted;\n\n          // Cancel active fade and set the volume to the end value.\n          if (sound._interval) {\n            self._stopFade(sound._id);\n          }\n\n          if (self._webAudio && sound._node) {\n            sound._node.gain.setValueAtTime(muted ? 0 : sound._volume, Howler.ctx.currentTime);\n          } else if (sound._node) {\n            sound._node.muted = Howler._muted ? true : muted;\n          }\n\n          self._emit('mute', sound._id);\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the volume of this sound or of the Howl group. This method can optionally take 0, 1 or 2 arguments.\n     *   volume() -> Returns the group's volume value.\n     *   volume(id) -> Returns the sound id's current volume.\n     *   volume(vol) -> Sets the volume of all sounds in this Howl group.\n     *   volume(vol, id) -> Sets the volume of passed sound id.\n     * @return {Howl/Number} Returns self or current volume.\n     */\n    volume: function() {\n      var self = this;\n      var args = arguments;\n      var vol, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // Return the value of the groups' volume.\n        return self._volume;\n      } else if (args.length === 1 || args.length === 2 && typeof args[1] === 'undefined') {\n        // First check if this is an ID, and if not, assume it is a new volume.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          vol = parseFloat(args[0]);\n        }\n      } else if (args.length >= 2) {\n        vol = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the volume or return the current volume.\n      var sound;\n      if (typeof vol !== 'undefined' && vol >= 0 && vol <= 1) {\n        // If the sound hasn't loaded, add it to the load queue to change volume when capable.\n        if (self._state !== 'loaded'|| self._playLock) {\n          self._queue.push({\n            event: 'volume',\n            action: function() {\n              self.volume.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group volume.\n        if (typeof id === 'undefined') {\n          self._volume = vol;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            sound._volume = vol;\n\n            // Stop currently running fades.\n            if (!args[2]) {\n              self._stopFade(id[i]);\n            }\n\n            if (self._webAudio && sound._node && !sound._muted) {\n              sound._node.gain.setValueAtTime(vol, Howler.ctx.currentTime);\n            } else if (sound._node && !sound._muted) {\n              sound._node.volume = vol * Howler.volume();\n            }\n\n            self._emit('volume', sound._id);\n          }\n        }\n      } else {\n        sound = id ? self._soundById(id) : self._sounds[0];\n        return sound ? sound._volume : 0;\n      }\n\n      return self;\n    },\n\n    /**\n     * Fade a currently playing sound between two volumes (if no id is passed, all sounds will fade).\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id (omit to fade all sounds).\n     * @return {Howl}\n     */\n    fade: function(from, to, len, id) {\n      var self = this;\n\n      // If the sound hasn't loaded, add it to the load queue to fade when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'fade',\n          action: function() {\n            self.fade(from, to, len, id);\n          }\n        });\n\n        return self;\n      }\n\n      // Make sure the to/from/len values are numbers.\n      from = parseFloat(from);\n      to = parseFloat(to);\n      len = parseFloat(len);\n\n      // Set the volume to the start position.\n      self.volume(from, id);\n\n      // Fade the volume of one or all sounds.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        // Get the sound.\n        var sound = self._soundById(ids[i]);\n\n        // Create a linear fade or fall back to timeouts with HTML5 Audio.\n        if (sound) {\n          // Stop the previous fade if no sprite is being used (otherwise, volume handles this).\n          if (!id) {\n            self._stopFade(ids[i]);\n          }\n\n          // If we are using Web Audio, let the native methods do the actual fade.\n          if (self._webAudio && !sound._muted) {\n            var currentTime = Howler.ctx.currentTime;\n            var end = currentTime + (len / 1000);\n            sound._volume = from;\n            sound._node.gain.setValueAtTime(from, currentTime);\n            sound._node.gain.linearRampToValueAtTime(to, end);\n          }\n\n          self._startFadeInterval(sound, from, to, len, ids[i], typeof id === 'undefined');\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Starts the internal interval to fade a sound.\n     * @param  {Object} sound Reference to sound to fade.\n     * @param  {Number} from The value to fade from (0.0 to 1.0).\n     * @param  {Number} to   The volume to fade to (0.0 to 1.0).\n     * @param  {Number} len  Time in milliseconds to fade.\n     * @param  {Number} id   The sound id to fade.\n     * @param  {Boolean} isGroup   If true, set the volume on the group.\n     */\n    _startFadeInterval: function(sound, from, to, len, id, isGroup) {\n      var self = this;\n      var vol = from;\n      var diff = to - from;\n      var steps = Math.abs(diff / 0.01);\n      var stepLen = Math.max(4, (steps > 0) ? len / steps : len);\n      var lastTick = Date.now();\n\n      // Store the value being faded to.\n      sound._fadeTo = to;\n\n      // Update the volume value on each interval tick.\n      sound._interval = setInterval(function() {\n        // Update the volume based on the time since the last tick.\n        var tick = (Date.now() - lastTick) / len;\n        lastTick = Date.now();\n        vol += diff * tick;\n\n        // Make sure the volume is in the right bounds.\n        vol = Math.max(0, vol);\n        vol = Math.min(1, vol);\n\n        // Round to within 2 decimal points.\n        vol = Math.round(vol * 100) / 100;\n\n        // Change the volume.\n        if (self._webAudio) {\n          sound._volume = vol;\n        } else {\n          self.volume(vol, sound._id, true);\n        }\n\n        // Set the group's volume.\n        if (isGroup) {\n          self._volume = vol;\n        }\n\n        // When the fade is complete, stop it and fire event.\n        if ((to < from && vol <= to) || (to > from && vol >= to)) {\n          clearInterval(sound._interval);\n          sound._interval = null;\n          sound._fadeTo = null;\n          self.volume(to, sound._id);\n          self._emit('fade', sound._id);\n        }\n      }, stepLen);\n    },\n\n    /**\n     * Internal method that stops the currently playing fade when\n     * a new fade starts, volume is changed or the sound is stopped.\n     * @param  {Number} id The sound id.\n     * @return {Howl}\n     */\n    _stopFade: function(id) {\n      var self = this;\n      var sound = self._soundById(id);\n\n      if (sound && sound._interval) {\n        if (self._webAudio) {\n          sound._node.gain.cancelScheduledValues(Howler.ctx.currentTime);\n        }\n\n        clearInterval(sound._interval);\n        sound._interval = null;\n        self.volume(sound._fadeTo, id);\n        sound._fadeTo = null;\n        self._emit('fade', id);\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the loop parameter on a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   loop() -> Returns the group's loop value.\n     *   loop(id) -> Returns the sound id's loop value.\n     *   loop(loop) -> Sets the loop value for all sounds in this Howl group.\n     *   loop(loop, id) -> Sets the loop value of passed sound id.\n     * @return {Howl/Boolean} Returns self or current loop value.\n     */\n    loop: function() {\n      var self = this;\n      var args = arguments;\n      var loop, id, sound;\n\n      // Determine the values for loop and id.\n      if (args.length === 0) {\n        // Return the grou's loop value.\n        return self._loop;\n      } else if (args.length === 1) {\n        if (typeof args[0] === 'boolean') {\n          loop = args[0];\n          self._loop = loop;\n        } else {\n          // Return this sound's loop value.\n          sound = self._soundById(parseInt(args[0], 10));\n          return sound ? sound._loop : false;\n        }\n      } else if (args.length === 2) {\n        loop = args[0];\n        id = parseInt(args[1], 10);\n      }\n\n      // If no id is passed, get all ID's to be looped.\n      var ids = self._getSoundIds(id);\n      for (var i=0; i<ids.length; i++) {\n        sound = self._soundById(ids[i]);\n\n        if (sound) {\n          sound._loop = loop;\n          if (self._webAudio && sound._node && sound._node.bufferSource) {\n            sound._node.bufferSource.loop = loop;\n            if (loop) {\n              sound._node.bufferSource.loopStart = sound._start || 0;\n              sound._node.bufferSource.loopEnd = sound._stop;\n            }\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the playback rate of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   rate() -> Returns the first sound node's current playback rate.\n     *   rate(id) -> Returns the sound id's current playback rate.\n     *   rate(rate) -> Sets the playback rate of all sounds in this Howl group.\n     *   rate(rate, id) -> Sets the playback rate of passed sound id.\n     * @return {Howl/Number} Returns self or the current playback rate.\n     */\n    rate: function() {\n      var self = this;\n      var args = arguments;\n      var rate, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current rate of the first node.\n        id = self._sounds[0]._id;\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new rate value.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else {\n          rate = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        rate = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // Update the playback rate or return the current value.\n      var sound;\n      if (typeof rate === 'number') {\n        // If the sound hasn't loaded, add it to the load queue to change playback rate when capable.\n        if (self._state !== 'loaded' || self._playLock) {\n          self._queue.push({\n            event: 'rate',\n            action: function() {\n              self.rate.apply(self, args);\n            }\n          });\n\n          return self;\n        }\n\n        // Set the group rate.\n        if (typeof id === 'undefined') {\n          self._rate = rate;\n        }\n\n        // Update one or all volumes.\n        id = self._getSoundIds(id);\n        for (var i=0; i<id.length; i++) {\n          // Get the sound.\n          sound = self._soundById(id[i]);\n\n          if (sound) {\n            // Keep track of our position when the rate changed and update the playback\n            // start position so we can properly adjust the seek position for time elapsed.\n            if (self.playing(id[i])) {\n              sound._rateSeek = self.seek(id[i]);\n              sound._playStart = self._webAudio ? Howler.ctx.currentTime : sound._playStart;\n            }\n            sound._rate = rate;\n\n            // Change the playback rate.\n            if (self._webAudio && sound._node && sound._node.bufferSource) {\n              sound._node.bufferSource.playbackRate.setValueAtTime(rate, Howler.ctx.currentTime);\n            } else if (sound._node) {\n              sound._node.playbackRate = rate;\n            }\n\n            // Reset the timers.\n            var seek = self.seek(id[i]);\n            var duration = ((self._sprite[sound._sprite][0] + self._sprite[sound._sprite][1]) / 1000) - seek;\n            var timeout = (duration * 1000) / Math.abs(sound._rate);\n\n            // Start a new end timer if sound is already playing.\n            if (self._endTimers[id[i]] || !sound._paused) {\n              self._clearTimer(id[i]);\n              self._endTimers[id[i]] = setTimeout(self._ended.bind(self, sound), timeout);\n            }\n\n            self._emit('rate', sound._id);\n          }\n        }\n      } else {\n        sound = self._soundById(id);\n        return sound ? sound._rate : self._rate;\n      }\n\n      return self;\n    },\n\n    /**\n     * Get/set the seek position of a sound. This method can optionally take 0, 1 or 2 arguments.\n     *   seek() -> Returns the first sound node's current seek position.\n     *   seek(id) -> Returns the sound id's current seek position.\n     *   seek(seek) -> Sets the seek position of the first sound node.\n     *   seek(seek, id) -> Sets the seek position of passed sound id.\n     * @return {Howl/Number} Returns self or the current seek position.\n     */\n    seek: function() {\n      var self = this;\n      var args = arguments;\n      var seek, id;\n\n      // Determine the values based on arguments.\n      if (args.length === 0) {\n        // We will simply return the current position of the first node.\n        id = self._sounds[0]._id;\n      } else if (args.length === 1) {\n        // First check if this is an ID, and if not, assume it is a new seek position.\n        var ids = self._getSoundIds();\n        var index = ids.indexOf(args[0]);\n        if (index >= 0) {\n          id = parseInt(args[0], 10);\n        } else if (self._sounds.length) {\n          id = self._sounds[0]._id;\n          seek = parseFloat(args[0]);\n        }\n      } else if (args.length === 2) {\n        seek = parseFloat(args[0]);\n        id = parseInt(args[1], 10);\n      }\n\n      // If there is no ID, bail out.\n      if (typeof id === 'undefined') {\n        return self;\n      }\n\n      // If the sound hasn't loaded, add it to the load queue to seek when capable.\n      if (self._state !== 'loaded' || self._playLock) {\n        self._queue.push({\n          event: 'seek',\n          action: function() {\n            self.seek.apply(self, args);\n          }\n        });\n\n        return self;\n      }\n\n      // Get the sound.\n      var sound = self._soundById(id);\n\n      if (sound) {\n        if (typeof seek === 'number' && seek >= 0) {\n          // Pause the sound and update position for restarting playback.\n          var playing = self.playing(id);\n          if (playing) {\n            self.pause(id, true);\n          }\n\n          // Move the position of the track and cancel timer.\n          sound._seek = seek;\n          sound._ended = false;\n          self._clearTimer(id);\n\n          // Update the seek position for HTML5 Audio.\n          if (!self._webAudio && sound._node && !isNaN(sound._node.duration)) {\n            sound._node.currentTime = seek;\n          }\n\n          // Seek and emit when ready.\n          var seekAndEmit = function() {\n            self._emit('seek', id);\n\n            // Restart the playback if the sound was playing.\n            if (playing) {\n              self.play(id, true);\n            }\n          };\n\n          // Wait for the play lock to be unset before emitting (HTML5 Audio).\n          if (playing && !self._webAudio) {\n            var emitSeek = function() {\n              if (!self._playLock) {\n                seekAndEmit();\n              } else {\n                setTimeout(emitSeek, 0);\n              }\n            };\n            setTimeout(emitSeek, 0);\n          } else {\n            seekAndEmit();\n          }\n        } else {\n          if (self._webAudio) {\n            var realTime = self.playing(id) ? Howler.ctx.currentTime - sound._playStart : 0;\n            var rateSeek = sound._rateSeek ? sound._rateSeek - sound._seek : 0;\n            return sound._seek + (rateSeek + realTime * Math.abs(sound._rate));\n          } else {\n            return sound._node.currentTime;\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Check if a specific sound is currently playing or not (if id is provided), or check if at least one of the sounds in the group is playing or not.\n     * @param  {Number}  id The sound id to check. If none is passed, the whole sound group is checked.\n     * @return {Boolean} True if playing and false if not.\n     */\n    playing: function(id) {\n      var self = this;\n\n      // Check the passed sound ID (if any).\n      if (typeof id === 'number') {\n        var sound = self._soundById(id);\n        return sound ? !sound._paused : false;\n      }\n\n      // Otherwise, loop through all sounds and check if any are playing.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (!self._sounds[i]._paused) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n    /**\n     * Get the duration of this sound. Passing a sound id will return the sprite duration.\n     * @param  {Number} id The sound id to check. If none is passed, return full source duration.\n     * @return {Number} Audio duration in seconds.\n     */\n    duration: function(id) {\n      var self = this;\n      var duration = self._duration;\n\n      // If we pass an ID, get the sound and return the sprite length.\n      var sound = self._soundById(id);\n      if (sound) {\n        duration = self._sprite[sound._sprite][1] / 1000;\n      }\n\n      return duration;\n    },\n\n    /**\n     * Returns the current loaded state of this Howl.\n     * @return {String} 'unloaded', 'loading', 'loaded'\n     */\n    state: function() {\n      return this._state;\n    },\n\n    /**\n     * Unload and destroy the current Howl object.\n     * This will immediately stop all sound instances attached to this group.\n     */\n    unload: function() {\n      var self = this;\n\n      // Stop playing any active sounds.\n      var sounds = self._sounds;\n      for (var i=0; i<sounds.length; i++) {\n        // Stop the sound if it is currently playing.\n        if (!sounds[i]._paused) {\n          self.stop(sounds[i]._id);\n        }\n\n        // Remove the source or disconnect.\n        if (!self._webAudio) {\n          // Set the source to 0-second silence to stop any downloading (except in IE).\n          self._clearSound(sounds[i]._node);\n\n          // Remove any event listeners.\n          sounds[i]._node.removeEventListener('error', sounds[i]._errorFn, false);\n          sounds[i]._node.removeEventListener(Howler._canPlayEvent, sounds[i]._loadFn, false);\n\n          // Release the Audio object back to the pool.\n          Howler._releaseHtml5Audio(sounds[i]._node);\n        }\n\n        // Empty out all of the nodes.\n        delete sounds[i]._node;\n\n        // Make sure all timers are cleared out.\n        self._clearTimer(sounds[i]._id);\n      }\n\n      // Remove the references in the global Howler object.\n      var index = Howler._howls.indexOf(self);\n      if (index >= 0) {\n        Howler._howls.splice(index, 1);\n      }\n\n      // Delete this sound from the cache (if no other Howl is using it).\n      var remCache = true;\n      for (i=0; i<Howler._howls.length; i++) {\n        if (Howler._howls[i]._src === self._src || self._src.indexOf(Howler._howls[i]._src) >= 0) {\n          remCache = false;\n          break;\n        }\n      }\n\n      if (cache && remCache) {\n        delete cache[self._src];\n      }\n\n      // Clear global errors.\n      Howler.noAudio = false;\n\n      // Clear out `self`.\n      self._state = 'unloaded';\n      self._sounds = [];\n      self = null;\n\n      return null;\n    },\n\n    /**\n     * Listen to a custom event.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @param  {Number}   once  (INTERNAL) Marks event to fire only once.\n     * @return {Howl}\n     */\n    on: function(event, fn, id, once) {\n      var self = this;\n      var events = self['_on' + event];\n\n      if (typeof fn === 'function') {\n        events.push(once ? {id: id, fn: fn, once: once} : {id: id, fn: fn});\n      }\n\n      return self;\n    },\n\n    /**\n     * Remove a custom event. Call without parameters to remove all events.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to remove. Leave empty to remove all.\n     * @param  {Number}   id    (optional) Only remove events for this sound.\n     * @return {Howl}\n     */\n    off: function(event, fn, id) {\n      var self = this;\n      var events = self['_on' + event];\n      var i = 0;\n\n      // Allow passing just an event and ID.\n      if (typeof fn === 'number') {\n        id = fn;\n        fn = null;\n      }\n\n      if (fn || id) {\n        // Loop through event store and remove the passed function.\n        for (i=0; i<events.length; i++) {\n          var isId = (id === events[i].id);\n          if (fn === events[i].fn && isId || !fn && isId) {\n            events.splice(i, 1);\n            break;\n          }\n        }\n      } else if (event) {\n        // Clear out all events of this type.\n        self['_on' + event] = [];\n      } else {\n        // Clear out all events of every type.\n        var keys = Object.keys(self);\n        for (i=0; i<keys.length; i++) {\n          if ((keys[i].indexOf('_on') === 0) && Array.isArray(self[keys[i]])) {\n            self[keys[i]] = [];\n          }\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Listen to a custom event and remove it once fired.\n     * @param  {String}   event Event name.\n     * @param  {Function} fn    Listener to call.\n     * @param  {Number}   id    (optional) Only listen to events for this sound.\n     * @return {Howl}\n     */\n    once: function(event, fn, id) {\n      var self = this;\n\n      // Setup the event listener.\n      self.on(event, fn, id, 1);\n\n      return self;\n    },\n\n    /**\n     * Emit all events of a specific type and pass the sound id.\n     * @param  {String} event Event name.\n     * @param  {Number} id    Sound ID.\n     * @param  {Number} msg   Message to go with event.\n     * @return {Howl}\n     */\n    _emit: function(event, id, msg) {\n      var self = this;\n      var events = self['_on' + event];\n\n      // Loop through event store and fire all functions.\n      for (var i=events.length-1; i>=0; i--) {\n        // Only fire the listener if the correct ID is used.\n        if (!events[i].id || events[i].id === id || event === 'load') {\n          setTimeout(function(fn) {\n            fn.call(this, id, msg);\n          }.bind(self, events[i].fn), 0);\n\n          // If this event was setup with `once`, remove it.\n          if (events[i].once) {\n            self.off(event, events[i].fn, events[i].id);\n          }\n        }\n      }\n\n      // Pass the event type into load queue so that it can continue stepping.\n      self._loadQueue(event);\n\n      return self;\n    },\n\n    /**\n     * Queue of actions initiated before the sound has loaded.\n     * These will be called in sequence, with the next only firing\n     * after the previous has finished executing (even if async like play).\n     * @return {Howl}\n     */\n    _loadQueue: function(event) {\n      var self = this;\n\n      if (self._queue.length > 0) {\n        var task = self._queue[0];\n\n        // Remove this task if a matching event was passed.\n        if (task.event === event) {\n          self._queue.shift();\n          self._loadQueue();\n        }\n\n        // Run the task if no event type is passed.\n        if (!event) {\n          task.action();\n        }\n      }\n\n      return self;\n    },\n\n    /**\n     * Fired when playback ends at the end of the duration.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _ended: function(sound) {\n      var self = this;\n      var sprite = sound._sprite;\n\n      // If we are using IE and there was network latency we may be clipping\n      // audio before it completes playing. Lets check the node to make sure it\n      // believes it has completed, before ending the playback.\n      if (!self._webAudio && sound._node && !sound._node.paused && !sound._node.ended && sound._node.currentTime < sound._stop) {\n        setTimeout(self._ended.bind(self, sound), 100);\n        return self;\n      }\n\n      // Should this sound loop?\n      var loop = !!(sound._loop || self._sprite[sprite][2]);\n\n      // Fire the ended event.\n      self._emit('end', sound._id);\n\n      // Restart the playback for HTML5 Audio loop.\n      if (!self._webAudio && loop) {\n        self.stop(sound._id, true).play(sound._id);\n      }\n\n      // Restart this timer if on a Web Audio loop.\n      if (self._webAudio && loop) {\n        self._emit('play', sound._id);\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        sound._playStart = Howler.ctx.currentTime;\n\n        var timeout = ((sound._stop - sound._start) * 1000) / Math.abs(sound._rate);\n        self._endTimers[sound._id] = setTimeout(self._ended.bind(self, sound), timeout);\n      }\n\n      // Mark the node as paused.\n      if (self._webAudio && !loop) {\n        sound._paused = true;\n        sound._ended = true;\n        sound._seek = sound._start || 0;\n        sound._rateSeek = 0;\n        self._clearTimer(sound._id);\n\n        // Clean up the buffer source.\n        self._cleanBuffer(sound._node);\n\n        // Attempt to auto-suspend AudioContext if no sounds are still playing.\n        Howler._autoSuspend();\n      }\n\n      // When using a sprite, end the track.\n      if (!self._webAudio && !loop) {\n        self.stop(sound._id, true);\n      }\n\n      return self;\n    },\n\n    /**\n     * Clear the end timer for a sound playback.\n     * @param  {Number} id The sound ID.\n     * @return {Howl}\n     */\n    _clearTimer: function(id) {\n      var self = this;\n\n      if (self._endTimers[id]) {\n        // Clear the timeout or remove the ended listener.\n        if (typeof self._endTimers[id] !== 'function') {\n          clearTimeout(self._endTimers[id]);\n        } else {\n          var sound = self._soundById(id);\n          if (sound && sound._node) {\n            sound._node.removeEventListener('ended', self._endTimers[id], false);\n          }\n        }\n\n        delete self._endTimers[id];\n      }\n\n      return self;\n    },\n\n    /**\n     * Return the sound identified by this ID, or return null.\n     * @param  {Number} id Sound ID\n     * @return {Object}    Sound object or null.\n     */\n    _soundById: function(id) {\n      var self = this;\n\n      // Loop through all sounds and find the one with this ID.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (id === self._sounds[i]._id) {\n          return self._sounds[i];\n        }\n      }\n\n      return null;\n    },\n\n    /**\n     * Return an inactive sound from the pool or create a new one.\n     * @return {Sound} Sound playback object.\n     */\n    _inactiveSound: function() {\n      var self = this;\n\n      self._drain();\n\n      // Find the first inactive node to recycle.\n      for (var i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          return self._sounds[i].reset();\n        }\n      }\n\n      // If no inactive node was found, create a new one.\n      return new Sound(self);\n    },\n\n    /**\n     * Drain excess inactive sounds from the pool.\n     */\n    _drain: function() {\n      var self = this;\n      var limit = self._pool;\n      var cnt = 0;\n      var i = 0;\n\n      // If there are less sounds than the max pool size, we are done.\n      if (self._sounds.length < limit) {\n        return;\n      }\n\n      // Count the number of inactive sounds.\n      for (i=0; i<self._sounds.length; i++) {\n        if (self._sounds[i]._ended) {\n          cnt++;\n        }\n      }\n\n      // Remove excess inactive sounds, going in reverse order.\n      for (i=self._sounds.length - 1; i>=0; i--) {\n        if (cnt <= limit) {\n          return;\n        }\n\n        if (self._sounds[i]._ended) {\n          // Disconnect the audio source when using Web Audio.\n          if (self._webAudio && self._sounds[i]._node) {\n            self._sounds[i]._node.disconnect(0);\n          }\n\n          // Remove sounds until we have the pool size.\n          self._sounds.splice(i, 1);\n          cnt--;\n        }\n      }\n    },\n\n    /**\n     * Get all ID's from the sounds pool.\n     * @param  {Number} id Only return one ID if one is passed.\n     * @return {Array}    Array of IDs.\n     */\n    _getSoundIds: function(id) {\n      var self = this;\n\n      if (typeof id === 'undefined') {\n        var ids = [];\n        for (var i=0; i<self._sounds.length; i++) {\n          ids.push(self._sounds[i]._id);\n        }\n\n        return ids;\n      } else {\n        return [id];\n      }\n    },\n\n    /**\n     * Load the sound back into the buffer source.\n     * @param  {Sound} sound The sound object to work with.\n     * @return {Howl}\n     */\n    _refreshBuffer: function(sound) {\n      var self = this;\n\n      // Setup the buffer source for playback.\n      sound._node.bufferSource = Howler.ctx.createBufferSource();\n      sound._node.bufferSource.buffer = cache[self._src];\n\n      // Connect to the correct node.\n      if (sound._panner) {\n        sound._node.bufferSource.connect(sound._panner);\n      } else {\n        sound._node.bufferSource.connect(sound._node);\n      }\n\n      // Setup looping and playback rate.\n      sound._node.bufferSource.loop = sound._loop;\n      if (sound._loop) {\n        sound._node.bufferSource.loopStart = sound._start || 0;\n        sound._node.bufferSource.loopEnd = sound._stop || 0;\n      }\n      sound._node.bufferSource.playbackRate.setValueAtTime(sound._rate, Howler.ctx.currentTime);\n\n      return self;\n    },\n\n    /**\n     * Prevent memory leaks by cleaning up the buffer source after playback.\n     * @param  {Object} node Sound's audio node containing the buffer source.\n     * @return {Howl}\n     */\n    _cleanBuffer: function(node) {\n      var self = this;\n      var isIOS = Howler._navigator && Howler._navigator.vendor.indexOf('Apple') >= 0;\n\n      if (Howler._scratchBuffer && node.bufferSource) {\n        node.bufferSource.onended = null;\n        node.bufferSource.disconnect(0);\n        if (isIOS) {\n          try { node.bufferSource.buffer = Howler._scratchBuffer; } catch(e) {}\n        }\n      }\n      node.bufferSource = null;\n\n      return self;\n    },\n\n    /**\n     * Set the source to a 0-second silence to stop any downloading (except in IE).\n     * @param  {Object} node Audio node to clear.\n     */\n    _clearSound: function(node) {\n      var checkIE = /MSIE |Trident\\//.test(Howler._navigator && Howler._navigator.userAgent);\n      if (!checkIE) {\n        node.src = 'data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA';\n      }\n    }\n  };\n\n  /** Single Sound Methods **/\n  /***************************************************************************/\n\n  /**\n   * Setup the sound object, which each node attached to a Howl group is contained in.\n   * @param {Object} howl The Howl parent group.\n   */\n  var Sound = function(howl) {\n    this._parent = howl;\n    this.init();\n  };\n  Sound.prototype = {\n    /**\n     * Initialize a new Sound object.\n     * @return {Sound}\n     */\n    init: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Setup the default parameters.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a unique ID for this sound.\n      self._id = ++Howler._counter;\n\n      // Add itself to the parent's pool.\n      parent._sounds.push(self);\n\n      // Create the new node.\n      self.create();\n\n      return self;\n    },\n\n    /**\n     * Create and setup a new sound object, whether HTML5 Audio or Web Audio.\n     * @return {Sound}\n     */\n    create: function() {\n      var self = this;\n      var parent = self._parent;\n      var volume = (Howler._muted || self._muted || self._parent._muted) ? 0 : self._volume;\n\n      if (parent._webAudio) {\n        // Create the gain node for controlling volume (the source will connect to this).\n        self._node = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n        self._node.gain.setValueAtTime(volume, Howler.ctx.currentTime);\n        self._node.paused = true;\n        self._node.connect(Howler.masterGain);\n      } else if (!Howler.noAudio) {\n        // Get an unlocked Audio object from the pool.\n        self._node = Howler._obtainHtml5Audio();\n\n        // Listen for errors (http://dev.w3.org/html5/spec-author-view/spec.html#mediaerror).\n        self._errorFn = self._errorListener.bind(self);\n        self._node.addEventListener('error', self._errorFn, false);\n\n        // Listen for 'canplaythrough' event to let us know the sound is ready.\n        self._loadFn = self._loadListener.bind(self);\n        self._node.addEventListener(Howler._canPlayEvent, self._loadFn, false);\n\n        // Setup the new audio node.\n        self._node.src = parent._src;\n        // JE: If _html5 was requested, then we want this audio streamed, not buffered!\n        self._node.preload = parent._html5 ? 'metadata' : 'auto';\n        self._node.volume = volume * Howler.volume();\n\n        // Begin loading the source.\n        self._node.load();\n      }\n\n      return self;\n    },\n\n    /**\n     * Reset the parameters of this sound to the original state (for recycle).\n     * @return {Sound}\n     */\n    reset: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Reset all of the parameters of this sound.\n      self._muted = parent._muted;\n      self._loop = parent._loop;\n      self._volume = parent._volume;\n      self._rate = parent._rate;\n      self._seek = 0;\n      self._rateSeek = 0;\n      self._paused = true;\n      self._ended = true;\n      self._sprite = '__default';\n\n      // Generate a new ID so that it isn't confused with the previous sound.\n      self._id = ++Howler._counter;\n\n      return self;\n    },\n\n    /**\n     * HTML5 Audio error listener callback.\n     */\n    _errorListener: function() {\n      var self = this;\n\n      // Fire an error event and pass back the code.\n      self._parent._emit('loaderror', self._id, self._node.error ? self._node.error.code : 0);\n\n      // Clear the event listener.\n      self._node.removeEventListener('error', self._errorFn, false);\n    },\n\n    /**\n     * HTML5 Audio canplaythrough listener callback.\n     */\n    _loadListener: function() {\n      var self = this;\n      var parent = self._parent;\n\n      // Round up the duration to account for the lower precision in HTML5 Audio.\n      parent._duration = Math.ceil(self._node.duration * 10) / 10;\n\n      // Setup a sprite if none is defined.\n      if (Object.keys(parent._sprite).length === 0) {\n        parent._sprite = {__default: [0, parent._duration * 1000]};\n      }\n\n      if (parent._state !== 'loaded') {\n        parent._state = 'loaded';\n        parent._emit('load');\n        parent._loadQueue();\n      }\n\n      // Clear the event listener.\n      self._node.removeEventListener(Howler._canPlayEvent, self._loadFn, false);\n    }\n  };\n\n  /** Helper Methods **/\n  /***************************************************************************/\n\n  var cache = {};\n\n  /**\n   * Buffer a sound from URL, Data URI or cache and decode to audio source (Web Audio API).\n   * @param  {Howl} self\n   */\n  var loadBuffer = function(self) {\n    var url = self._src;\n\n    // Check if the buffer has already been cached and use it instead.\n    if (cache[url]) {\n      // Set the duration from the cache.\n      self._duration = cache[url].duration;\n\n      // Load the sound into this Howl.\n      loadSound(self);\n\n      return;\n    }\n\n    if (/^data:[^;]+;base64,/.test(url)) {\n      // Decode the base64 data URI without XHR, since some browsers don't support it.\n      var data = atob(url.split(',')[1]);\n      var dataView = new Uint8Array(data.length);\n      for (var i=0; i<data.length; ++i) {\n        dataView[i] = data.charCodeAt(i);\n      }\n\n      decodeAudioData(dataView.buffer, self);\n    } else {\n      // Load the buffer from the URL.\n      var xhr = new XMLHttpRequest();\n      xhr.open('GET', url, true);\n      xhr.withCredentials = self._xhrWithCredentials;\n      xhr.responseType = 'arraybuffer';\n\n      // Apply any custom headers to the request.\n      if (self._xhrHeaders) {\n        Object.keys(self._xhrHeaders).forEach(function(key) {\n          xhr.setRequestHeader(key, self._xhrHeaders[key]);\n        });\n      }\n\n      xhr.onload = function() {\n        // Make sure we get a successful response back.\n        var code = (xhr.status + '')[0];\n        if (code !== '0' && code !== '2' && code !== '3') {\n          self._emit('loaderror', null, 'Failed loading audio file with status: ' + xhr.status + '.');\n          return;\n        }\n\n        decodeAudioData(xhr.response, self);\n      };\n      xhr.onerror = function() {\n        // If there is an error, switch to HTML5 Audio.\n        if (self._webAudio) {\n          self._html5 = true;\n          self._webAudio = false;\n          self._sounds = [];\n          delete cache[url];\n          self.load();\n        }\n      };\n      safeXhrSend(xhr);\n    }\n  };\n\n  /**\n   * Send the XHR request wrapped in a try/catch.\n   * @param  {Object} xhr XHR to send.\n   */\n  var safeXhrSend = function(xhr) {\n    try {\n      xhr.send();\n    } catch (e) {\n      xhr.onerror();\n    }\n  };\n\n  /**\n   * Decode audio data from an array buffer.\n   * @param  {ArrayBuffer} arraybuffer The audio data.\n   * @param  {Howl}        self\n   */\n  var decodeAudioData = function(arraybuffer, self) {\n    // Fire a load error if something broke.\n    var error = function() {\n      self._emit('loaderror', null, 'Decoding audio data failed.');\n    };\n\n    // Load the sound on success.\n    var success = function(buffer) {\n      if (buffer && self._sounds.length > 0) {\n        cache[self._src] = buffer;\n        loadSound(self, buffer);\n      } else {\n        error();\n      }\n    };\n\n    // Decode the buffer into an audio source.\n    if (typeof Promise !== 'undefined' && Howler.ctx.decodeAudioData.length === 1) {\n      Howler.ctx.decodeAudioData(arraybuffer).then(success).catch(error);\n    } else {\n      Howler.ctx.decodeAudioData(arraybuffer, success, error);\n    }\n  };\n\n  /**\n   * Sound is now loaded, so finish setting everything up and fire the loaded event.\n   * @param  {Howl} self\n   * @param  {Object} buffer The decoded buffer sound source.\n   */\n  var loadSound = function(self, buffer) {\n    // Set the duration.\n    if (buffer && !self._duration) {\n      self._duration = buffer.duration;\n    }\n\n    // Setup a sprite if none is defined.\n    if (Object.keys(self._sprite).length === 0) {\n      self._sprite = {__default: [0, self._duration * 1000]};\n    }\n\n    // Fire the loaded event.\n    if (self._state !== 'loaded') {\n      self._state = 'loaded';\n      self._emit('load');\n      self._loadQueue();\n    }\n  };\n\n  /**\n   * Setup the audio context when available, or switch to HTML5 Audio mode.\n   */\n  var setupAudioContext = function() {\n    // If we have already detected that Web Audio isn't supported, don't run this step again.\n    if (!Howler.usingWebAudio) {\n      return;\n    }\n\n    // Check if we are using Web Audio and setup the AudioContext if we are.\n    try {\n      if (typeof AudioContext !== 'undefined') {\n        Howler.ctx = new AudioContext();\n      } else if (typeof webkitAudioContext !== 'undefined') {\n        Howler.ctx = new webkitAudioContext();\n      } else {\n        Howler.usingWebAudio = false;\n      }\n    } catch(e) {\n      Howler.usingWebAudio = false;\n    }\n\n    // If the audio context creation still failed, set using web audio to false.\n    if (!Howler.ctx) {\n      Howler.usingWebAudio = false;\n    }\n\n    // Check if a webview is being used on iOS8 or earlier (rather than the browser).\n    // If it is, disable Web Audio as it causes crashing.\n    var iOS = (/iP(hone|od|ad)/.test(Howler._navigator && Howler._navigator.platform));\n    var appVersion = Howler._navigator && Howler._navigator.appVersion.match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n    var version = appVersion ? parseInt(appVersion[1], 10) : null;\n    if (iOS && version && version < 9) {\n      var safari = /safari/.test(Howler._navigator && Howler._navigator.userAgent.toLowerCase());\n      if (Howler._navigator && !safari) {\n        Howler.usingWebAudio = false;\n      }\n    }\n\n    // Create and expose the master GainNode when using Web Audio (useful for plugins or advanced usage).\n    if (Howler.usingWebAudio) {\n      Howler.masterGain = (typeof Howler.ctx.createGain === 'undefined') ? Howler.ctx.createGainNode() : Howler.ctx.createGain();\n      Howler.masterGain.gain.setValueAtTime(Howler._muted ? 0 : Howler._volume, Howler.ctx.currentTime);\n      Howler.masterGain.connect(Howler.ctx.destination);\n    }\n\n    // Re-run the setup on Howler.\n    Howler._setup();\n  };\n\n  // Add support for AMD (Asynchronous Module Definition) libraries such as require.js.\n  if (typeof define === 'function' && define.amd) {\n    define([], function() {\n      return {\n        Howler: Howler,\n        Howl: Howl\n      };\n    });\n  }\n\n  // Add support for CommonJS libraries such as browserify.\n  if (typeof exports !== 'undefined') {\n    exports.Howler = Howler;\n    exports.Howl = Howl;\n  }\n\n  // Define globally in case AMD is not available or unused.\n  if (typeof window !== 'undefined') {\n    window.HowlerGlobal = HowlerGlobal;\n    window.Howler = Howler;\n    window.Howl = Howl;\n    window.Sound = Sound;\n  } else if (typeof global !== 'undefined') { // Add to global in Node.js (for testing, etc).\n    global.HowlerGlobal = HowlerGlobal;\n    global.Howler = Howler;\n    global.Howl = Howl;\n    global.Sound = Sound;\n  }\n}());\n","module.exports = create\n\n/**\n * Creates a new identity mat3\n *\n * @alias mat3.create\n * @returns {mat3} a new 3x3 matrix\n */\nfunction create() {\n  var out = new Float32Array(9)\n  out[0] = 1\n  out[1] = 0\n  out[2] = 0\n  out[3] = 0\n  out[4] = 1\n  out[5] = 0\n  out[6] = 0\n  out[7] = 0\n  out[8] = 1\n  return out\n}\n","module.exports = fromMat4\n\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @alias mat3.fromMat4\n * @param {mat3} out the receiving 3x3 matrix\n * @param {mat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\nfunction fromMat4(out, a) {\n  out[0] = a[0]\n  out[1] = a[1]\n  out[2] = a[2]\n  out[3] = a[4]\n  out[4] = a[5]\n  out[5] = a[6]\n  out[6] = a[8]\n  out[7] = a[9]\n  out[8] = a[10]\n  return out\n}\n","module.exports = copy;\n\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nfunction copy(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n};","module.exports = create;\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\nfunction create() {\n    var out = new Float32Array(16);\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n};","module.exports = invert;\n\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nfunction invert(out, a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15],\n\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32,\n\n        // Calculate the determinant\n        det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n    if (!det) { \n        return null; \n    }\n    det = 1.0 / det;\n\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n\n    return out;\n};","module.exports = multiply;\n\n/**\n * Multiplies two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nfunction multiply(out, a, b) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n    // Cache only the current line of the second matrix\n    var b0  = b[0], b1 = b[1], b2 = b[2], b3 = b[3];  \n    out[0] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[1] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[2] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[3] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[4]; b1 = b[5]; b2 = b[6]; b3 = b[7];\n    out[4] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[5] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[6] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[7] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[8]; b1 = b[9]; b2 = b[10]; b3 = b[11];\n    out[8] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[9] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[10] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[11] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[12]; b1 = b[13]; b2 = b[14]; b3 = b[15];\n    out[12] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[13] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[14] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[15] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n    return out;\n};","module.exports = perspective;\n\n/**\n * Generates a perspective projection matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nfunction perspective(out, fovy, aspect, near, far) {\n    var f = 1.0 / Math.tan(fovy / 2),\n        nf = 1 / (near - far);\n    out[0] = f / aspect;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = f;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = (far + near) * nf;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = (2 * far * near) * nf;\n    out[15] = 0;\n    return out;\n};","module.exports = transpose;\n\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nfunction transpose(out, a) {\n    // If we are transposing ourselves we can skip a few steps but have to cache some values\n    if (out === a) {\n        var a01 = a[1], a02 = a[2], a03 = a[3],\n            a12 = a[6], a13 = a[7],\n            a23 = a[11];\n\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a01;\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a02;\n        out[9] = a12;\n        out[11] = a[14];\n        out[12] = a03;\n        out[13] = a13;\n        out[14] = a23;\n    } else {\n        out[0] = a[0];\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a[1];\n        out[5] = a[5];\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a[2];\n        out[9] = a[6];\n        out[10] = a[10];\n        out[11] = a[14];\n        out[12] = a[3];\n        out[13] = a[7];\n        out[14] = a[11];\n        out[15] = a[15];\n    }\n    \n    return out;\n};","/* eslint global-require:off */\n\n// Startup code.\n\nlet called_once = false;\nwindow.onload = function () {\n  if (called_once) {\n    return;\n  }\n  called_once = true;\n  require('./glov/bootstrap.js');\n  require('./main.js').main();\n};","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\n// Things that should be done before requiring or running any user-level code or other engine code\n\nrequire('./polyfill.js');\n\nlet debug = document.getElementById('debug');\nwindow.onerror = function (e, file, line, col, errorobj) {\n  let msg = `${e}\\n  at ${file}(${line}:${col})`;\n  if (errorobj && errorobj.stack) {\n    msg = `${errorobj.stack}`;\n    if (errorobj.message) {\n      if (msg.indexOf(errorobj.message) === -1) {\n        msg = `${errorobj.message}\\n${msg}`;\n      }\n    }\n    let origin = document.location.origin || '';\n    if (origin) {\n      if (origin.slice(-1) !== '/') {\n        origin += '/';\n      }\n      msg = msg.split(origin).join(''); // replace\n    }\n    // fixup weird Firefox weirdness\n    msg = msg.replace(/\\[\\d+\\]</g, '') // remove funny [123] at start of stack lines\n    .replace(/<?\\/<?/g, '/') // remove funny <s, they mess up people's copy and paste\n    .replace(/\\n([^ ])/g, '\\n  $1'); // add indentation if missing\n  }\n  let show = true;\n  if (window.glov_error_report) {\n    show = window.glov_error_report(msg, file, line, col);\n  }\n  if (show) {\n    debug.innerText = `${msg}\\n\\nPlease report this error to the developer, and then reload this page.`;\n  }\n};\nwindow.debugmsg = function (msg, clear) {\n  if (clear) {\n    debug.innerText = msg;\n  } else {\n    debug.innerText += `${msg}\\n`;\n  }\n};","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint no-shadow:off */\n\nconst engine = require('./engine.js');\n\nconst { round } = Math;\n\nconst safearea_pad = new Float32Array(4); // left, right, top, bottom\n// 0: x0_real\n// 1: y0_real\n// 2: x1_real\n// 3: y1_real\n// 4: x_scale\n// 5: y_scale\n// 6: css_to_real\n// 7: inverse viewport x_scale\n// 8: inverse viewport y_scale\n// 9: x0\n// 10: y0\n// 11: x1\n// 12: y1\nexport const data = new Float32Array(13);\n\nlet screen_width;\nlet screen_height;\n// Note: render_* not used by FRVR at this time\nlet render_width;\nlet render_height;\nexport let render_viewport_w;\nexport let render_viewport_h;\nexport let render_offset_x;\nlet render_offset_y_top;\nexport let render_offset_y_bottom;\n\nfunction reapply() {\n  if (render_width) {\n    data[4] = render_width / (data[2] - data[0]);\n    data[5] = render_height / (data[3] - data[1]);\n    data[7] = (data[2] - data[0]) / render_viewport_w;\n    data[8] = (data[3] - data[1]) / render_viewport_h;\n  } else {\n    data[4] = screen_width / (data[2] - data[0]);\n    data[5] = screen_height / (data[3] - data[1]);\n  }\n}\n\n// To get to coordinates used by OpenGL / canvas\nexport function virtualToCanvas(dst, src) {\n  dst[0] = (src[0] - data[0]) * data[4];\n  dst[1] = (src[1] - data[1]) * data[5];\n}\n\n// Sets the 2D \"camera\" used to translate sprite positions to screen space.  Affects sprites queued\n//  after this call\nexport function set(x0, y0, x1, y1, ignore_safe_area) {\n  if (ignore_safe_area || render_width) {\n    data[9] = data[0] = x0;\n    data[10] = data[1] = y0;\n    data[11] = data[2] = x1;\n    data[12] = data[3] = y1;\n  } else {\n    data[9] = x0;\n    data[10] = y0;\n    data[11] = x1;\n    data[12] = y1;\n    let wscale = (x1 - x0) / (screen_width - safearea_pad[0] - safearea_pad[1]);\n    let hscale = (y1 - y0) / (screen_height - safearea_pad[2] - safearea_pad[3]);\n    data[0] = x0 - safearea_pad[0] * wscale;\n    data[1] = y0 - safearea_pad[2] * hscale;\n    data[2] = x1 + safearea_pad[1] * wscale;\n    data[3] = y1 + safearea_pad[3] * hscale;\n  }\n\n  reapply();\n}\n\nexport function setSafeAreaPadding(left, right, top, bottom) {\n  safearea_pad[0] = round(left);\n  safearea_pad[1] = round(right);\n  safearea_pad[2] = round(top);\n  safearea_pad[3] = round(bottom);\n  // Called while updating screen width/height, reapply() should get called later\n}\n\nexport function safeAreaPadding() {\n  return safearea_pad;\n}\n\nconst stack = [];\nexport function push() {\n  stack.push(data.slice(0));\n}\nexport function pop() {\n  let old = stack.pop();\n  set(old[0], old[1], old[2], old[3], true);\n}\n\nexport function domToCanvasRatio() {\n  return data[6];\n}\n\nexport function screenAspect() {\n  return (screen_width - safearea_pad[0] - safearea_pad[1]) / (screen_height - safearea_pad[2] - safearea_pad[3]);\n}\n\n// Drawing area 0,0-w,h\n// But keep the aspect ratio of those things drawn to be correct\n// This may create a padding or margin on either top and bottom or sides of the screen\n// User users constant values in this range for consistent UI on all devices\nexport function setAspectFixed(w, h) {\n  let pa = render_width ? 1 : engine.pixel_aspect;\n  let inv_aspect = h / pa / w;\n  let inv_desired_aspect;\n  if (render_width) {\n    inv_desired_aspect = render_height / render_width;\n  } else {\n    inv_desired_aspect = 1 / screenAspect();\n  }\n  if (inv_aspect > inv_desired_aspect) {\n    let margin = (h / pa / inv_desired_aspect - w) / 2;\n    set(-margin, 0, w + margin, h, false);\n  } else {\n    let margin = (w * pa * inv_desired_aspect - h) / 2;\n    set(0, -margin, w, h + margin, false);\n  }\n}\n\n// Primary drawing area at least W x H\n// But keep the aspect ratio of those things drawn to be correct\n// Similar to setAspectFixed() but keeps (0,0) in the upper left (all padding\n//   is added to right and bottom)\n// Requires users to use camera2d.w()/ and camera2d.h() to determine reasonable\n//   UI positioning\nexport function setAspectFixed2(w, h) {\n  let pa = render_width ? 1 : engine.pixel_aspect;\n  let inv_aspect = h / pa / w;\n  let inv_desired_aspect;\n  if (render_width) {\n    inv_desired_aspect = render_height / render_width;\n  } else {\n    inv_desired_aspect = 1 / screenAspect();\n  }\n  if (inv_aspect > inv_desired_aspect) {\n    let margin = h / pa / inv_desired_aspect - w;\n    set(0, 0, w + margin, h, false);\n  } else {\n    let margin = w * pa * inv_desired_aspect - h;\n    set(0, 0, w, h + margin, false);\n  }\n}\n\nexport function zoom(x, y, factor) {\n  let inv_factor = 1.0 / factor;\n  set(x - (x - data[0]) * inv_factor, y - (y - data[1]) * inv_factor, x + (data[2] - x) * inv_factor, y + (data[3] - y) * inv_factor, true);\n}\n\nexport function setNormalized() {\n  set(0, 0, 1, 1, true);\n}\n\nexport function x0Real() {\n  return data[0];\n}\nexport function y0Real() {\n  return data[1];\n}\nexport function x1Real() {\n  return data[2];\n}\nexport function y1Real() {\n  return data[3];\n}\nexport function wReal() {\n  return data[2] - data[0];\n}\nexport function hReal() {\n  return data[3] - data[1];\n}\nexport function x0() {\n  return data[9];\n}\nexport function y0() {\n  return data[10];\n}\nexport function x1() {\n  return data[11];\n}\nexport function y1() {\n  return data[12];\n}\nexport function w() {\n  return data[11] - data[9];\n}\nexport function h() {\n  return data[12] - data[10];\n}\nexport function xScale() {\n  return data[4];\n}\nexport function yScale() {\n  return data[5];\n}\n\nexport function htmlPos(x, y) {\n  if (render_width) {\n    return [100 * (((x - data[0]) / data[7] + render_offset_x) / screen_width), 100 * (((y - data[1]) / data[8] + render_offset_y_top) / screen_height)];\n  } else {\n    return [100 * (x - data[0]) / (data[2] - data[0]), 100 * (y - data[1]) / (data[3] - data[1])];\n  }\n}\nexport function htmlSize(w, h) {\n  if (render_width) {\n    return [100 * w / data[7] / screen_width, 100 * h / data[8] / screen_height];\n  } else {\n    return [100 * w / (data[2] - data[0]), 100 * h / (data[3] - data[1])];\n  }\n}\n\nexport function domToVirtual(dst, src) {\n  if (render_width) {\n    dst[0] = (src[0] * data[6] - render_offset_x) * data[7] + data[0];\n    dst[1] = (src[1] * data[6] - render_offset_y_top) * data[8] + data[1];\n  } else {\n    dst[0] = src[0] * data[6] / data[4] + data[0];\n    dst[1] = src[1] * data[6] / data[5] + data[1];\n  }\n}\n\nexport function domDeltaToVirtual(dst, src) {\n  if (render_width) {\n    dst[0] = src[0] * data[6] * data[7];\n    dst[1] = src[1] * data[6] * data[8];\n  } else {\n    dst[0] = src[0] * data[6] / data[4];\n    dst[1] = src[1] * data[6] / data[5];\n  }\n}\n\n// To get to coordinates used by mouse events\nexport function virtualToDom(dst, src) {\n  if (render_width) {\n    dst[0] = (render_offset_x + (src[0] - data[0]) / data[7]) / data[6];\n    dst[1] = (render_offset_y_top + (src[1] - data[1]) / data[8]) / data[6];\n  } else {\n    dst[0] = (src[0] - data[0]) * data[4] / data[6];\n    dst[1] = (src[1] - data[1]) * data[5] / data[6];\n  }\n}\n\nexport function virtualToFontSize(height) {\n  if (render_width) {\n    return height / (data[6] * data[8]) * 0.84;\n  } else {\n    return height * data[5] / data[6] * 0.84;\n  }\n}\n\n// dst/src are x/y/w/h objects (e.g. from input system)\nexport function virtualToDomPosParam(dst, src) {\n  if (render_width) {\n    dst.x = (render_offset_x + (src.x - data[0]) / data[7]) / data[6];\n    dst.w = src.w / data[7] / data[6];\n    dst.y = (render_offset_y_top + (src.y - data[1]) / data[8]) / data[6];\n    dst.h = src.h / data[8] / data[6];\n  } else {\n    dst.x = (src.x - data[0]) * data[4] / data[6];\n    dst.w = src.w * data[4] / data[6];\n    dst.y = (src.y - data[1]) * data[5] / data[6];\n    dst.h = src.h * data[5] / data[6];\n  }\n}\n\nexport function tickCamera2D() {\n  data[6] = window.devicePixelRatio || 1; /* css_to_real */\n  screen_width = engine.width;\n  screen_height = engine.height;\n  let viewport = [0, 0, screen_width, screen_height];\n  if (engine.render_width) {\n    // Note: render_* not used by FRVR at this time\n    render_width = engine.render_width;\n    render_height = engine.render_height;\n    // Find an offset so this rendered viewport is centered while preserving aspect ratio, just like setAspectFixed\n    let pa = engine.pixel_aspect;\n    let inv_aspect = render_height / pa / render_width;\n    let eff_screen_width = screen_width - safearea_pad[0] - safearea_pad[1];\n    let eff_screen_height = screen_height - safearea_pad[2] - safearea_pad[3];\n    let inv_desired_aspect = eff_screen_height / eff_screen_width;\n    if (inv_aspect > inv_desired_aspect) {\n      let margin = (render_height / inv_desired_aspect - render_width * pa) / 2 * eff_screen_height / render_height;\n      render_offset_x = safearea_pad[0] + round(margin);\n      render_offset_y_top = safearea_pad[2];\n      render_offset_y_bottom = safearea_pad[3];\n      render_viewport_w = round(eff_screen_width - margin * 2);\n      render_viewport_h = eff_screen_height;\n    } else {\n      let margin = (render_width * inv_desired_aspect - render_height / pa) / 2 * eff_screen_width / render_width;\n      render_offset_x = safearea_pad[0];\n      render_offset_y_top = safearea_pad[2] + round(margin);\n      render_offset_y_bottom = safearea_pad[3] + round(margin);\n      render_viewport_w = eff_screen_width;\n      render_viewport_h = round(eff_screen_height - margin * 2);\n    }\n    viewport[2] = render_width;\n    viewport[3] = render_height;\n  } else {\n    render_width = render_height = 0;\n    render_offset_x = 0;\n    render_offset_y_top = 0;\n    render_offset_y_bottom = 0;\n  }\n\n  reapply();\n\n  // let screen_width = engine.width;\n  // let screen_height = engine.height;\n  // let screen_aspect = screen_width / screen_height;\n  // let view_aspect = game_width / game_height;\n  // if (screen_aspect > view_aspect) {\n  //   let viewport_width = game_height * screen_aspect;\n  //   let half_diff = (viewport_width - game_width) / 2;\n  //   viewportRectangle = [-half_diff, 0, game_width + half_diff, game_height];\n  // } else {\n  //   let viewport_height = game_width / screen_aspect;\n  //   let half_diff = (viewport_height - game_height) / 2;\n  //   viewportRectangle = [0, -half_diff, game_width, game_height + half_diff];\n  // }\n\n  engine.setViewport(viewport);\n}\n\nexport function startup() {\n  set(0, 0, engine.width, engine.height);\n  tickCamera2D();\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst cmd_parse_mod = require('../../common/cmd_parse.js');\nconst local_storage = require('./local_storage.js');\nexport let cmd_parse = cmd_parse_mod.create({ storage: local_storage });\n\nconst engine = require('./engine.js');\nconst textures = require('./textures.js');\nconst { PI, round } = Math;\n\nwindow.cmd = function (str) {\n  cmd_parse.handle(null, str, cmd_parse_mod.defaultHandler);\n};\n\ncmd_parse.registerValue('fov', {\n  type: cmd_parse.TYPE_FLOAT,\n  label: 'FOV',\n  range: [1, 179],\n  get: () => round(engine.fov_min * 180 / PI),\n  set: v => engine.setFOV(v * PI / 180),\n  store: true\n});\n\nfunction byteFormat(bytes) {\n  if (bytes > 850000) {\n    return `${(bytes / (1024 * 1024)).toFixed(2)}MB`;\n  }\n  if (bytes > 850) {\n    return `${(bytes / 1024).toFixed(2)}KB`;\n  }\n  return `${bytes}B`;\n}\n\ncmd_parse.register({\n  cmd: 'texmem',\n  help: 'Displays texture memory usage',\n  func: function (str, resp_func) {\n    let keys = Object.keys(textures.textures);\n    keys = keys.filter(a => textures.textures[a].gpu_mem > 1024);\n    keys.sort((a, b) => textures.textures[a].gpu_mem - textures.textures[b].gpu_mem);\n    resp_func(null, keys.map(a => `${byteFormat(textures.textures[a].gpu_mem)} ${a}`).join('\\n'));\n  }\n});\n\ncmd_parse.register({\n  cmd: 'gpumem',\n  help: 'Displays GPU memory usage summary',\n  func: function (str, resp_func) {\n    let { gpu_mem } = engine.perf_state;\n    resp_func(null, `${byteFormat(gpu_mem.geom)} Geo\\n${byteFormat(gpu_mem.tex)} Tex\\n${byteFormat(gpu_mem.geom + gpu_mem.tex)} Total`);\n  }\n});\n\ncmd_parse.register({\n  cmd: 'd',\n  help: 'Toggles a debug define',\n  func: function (str, resp_func) {\n    str = str.toUpperCase();\n    engine.defines[str] = !engine.defines[str];\n    resp_func(null, `D=${str} now ${engine.defines[str] ? 'SET' : 'unset'}`);\n  }\n});\n\ncmd_parse.register({\n  cmd: 'renderer',\n  help: 'Displays current renderer',\n  func: function (str, resp_func) {\n    resp_func(null, `Renderer=WebGL${engine.webgl2 ? 2 : 1}`);\n  }\n});\n\nfunction cmdDesc(cmd_data) {\n  return `/${cmd_data.cmd} - ${cmd_data.help}`;\n}\n\ncmd_parse.register({\n  cmd: 'help',\n  help: 'Searches commands',\n  func: function (str, resp_func) {\n    let list = cmd_parse.autoComplete('', this && this.access);\n    if (str) {\n      let str_cname = cmd_parse.canonical(str);\n      let str_lc = str.toLowerCase();\n      list = list.filter(cmd_data => cmd_data.cname.indexOf(str_cname) !== -1 || cmd_data.help.toLowerCase().indexOf(str_lc) !== -1);\n    }\n    if (!list.length) {\n      return void resp_func(null, `No commands found matching \"${str}\"`);\n    }\n    resp_func(null, list.map(cmdDesc).join('\\n'));\n  }\n});\n\nexport let safearea = [-1, -1, -1, -1];\ncmd_parse.registerValue('safe_area', {\n  label: 'Safe Area',\n  type: cmd_parse.TYPE_STRING,\n  usage: 'Safe Area value: Use -1 for auto based on browser environment,\\n' + 'or 0-25 for percentage of screen size\\n' + '  Usage: /safe_area [value]\\n' + '  Usage: /safe_area horizontal,vertical\\n' + '  Usage: /safe_area left,right,top,bottom',\n  default_value: '-1',\n  get: () => safearea[0] === -1 ? '-1 (auto)' : safearea.join(','),\n  set: v => {\n    v = String(v);\n    let keys = v.split(',');\n    if (v && keys.length === 1) {\n      safearea[0] = safearea[1] = safearea[2] = safearea[3] = Number(v);\n    } else if (keys.length === 2) {\n      safearea[0] = safearea[1] = Number(keys[0]);\n      safearea[2] = safearea[3] = Number(keys[1]);\n    } else if (keys.length === 4) {\n      for (let ii = 0; ii < 4; ++ii) {\n        safearea[ii] = Number(keys[ii]);\n      }\n    } else {\n      // error, ignore?\n    }\n  },\n  store: true\n});\n\ncmd_parse.register({\n  cmd: 'webgl2_auto',\n  help: 'Resets WebGL2 auto-detection',\n  func: function (str, resp_func) {\n    let disable_data = local_storage.getJSON('webgl2_disable');\n    if (!disable_data) {\n      return resp_func(null, 'WebGL2 is already being auto-detected');\n    }\n    local_storage.setJSON('webgl2_disable', undefined);\n    return resp_func(null, 'WebGL2 was disabled, will attempt to use it again on the next load');\n  }\n});","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst camera2d = require('./camera2d.js');\nconst engine = require('./engine.js');\nconst glov_input = require('./input.js');\nconst glov_ui = require('./ui.js');\n\nconst { focuslog } = glov_ui;\n\nclass GlovUIEditBox {\n  constructor(params) {\n    this.x = 0;\n    this.y = 0;\n    this.z = Z.UI; // actually in DOM, so above everything!\n    this.w = glov_ui.button_width;\n    this.type = 'text';\n    this.allow_modal = false;\n    // this.h = glov_ui.button_height;\n    this.font_height = glov_ui.font_height;\n    this.text = '';\n    this.placeholder = '';\n    this.max_len = 0;\n    this.initial_focus = false;\n    this.onetime_focus = false;\n    this.auto_unfocus = false;\n    this.initial_select = false;\n    this.spellcheck = true;\n    this.applyParams(params);\n    this.is_focused = false;\n\n    this.elem = null;\n    this.input = null;\n    this.submitted = false;\n    this.pointer_lock = false;\n    this.last_frame = 0;\n  }\n  applyParams(params) {\n    if (!params) {\n      return;\n    }\n    for (let f in params) {\n      this[f] = params[f];\n    }\n  }\n  getText() {\n    return this.text;\n  }\n  setText(new_text) {\n    if (this.input) {\n      this.input.value = new_text;\n    }\n    this.text = new_text;\n  }\n  focus() {\n    if (this.input) {\n      this.input.focus();\n    } else {\n      this.onetime_focus = true;\n    }\n    glov_ui.focusSteal(this);\n    this.is_focused = true;\n    if (this.pointer_lock) {\n      glov_input.pointerLockExit();\n    }\n  }\n  unfocus() {\n    glov_ui.focusNext(this);\n  }\n  isFocused() {\n    // call after .run()\n    return this.is_focused;\n  }\n\n  updateFocus() {\n    let was_glov_focused = this.is_focused;\n    let glov_focused = glov_ui.focusCheck(this);\n    let dom_focused = this.input && document.activeElement === this.input;\n    if (was_glov_focused !== glov_focused) {\n      // something external (from clicks/keys in GLOV) changed, apply it if it doesn't match\n      if (glov_focused && !dom_focused && this.input) {\n        focuslog('GLOV focused, DOM not, focusing', this);\n        this.input.focus();\n      }\n      if (!glov_focused && dom_focused) {\n        focuslog('DOM focused, GLOV not, and changed, blurring', this);\n        this.input.blur();\n      }\n    } else if (dom_focused && !glov_focused) {\n      focuslog('DOM focused, GLOV not, stealing', this);\n      glov_ui.focusSteal(this);\n      glov_focused = true;\n    } else if (!dom_focused && glov_focused) {\n      // Leave it alone, it may be a browser pop-up such as for passwords\n    }\n    let focused = glov_focused;\n\n    if (focused) {\n      let key_opt = this.pointer_lock && !this.text ? { in_event_cb: glov_input.pointerLockEnter } : null;\n      if (glov_input.keyUpEdge(glov_input.KEYS.ESC, key_opt)) {\n        if (this.text) {\n          this.setText('');\n        } else {\n          glov_ui.focusCanvas();\n          if (this.input) {\n            this.input.blur();\n          }\n          focused = false;\n          this.canceled = true;\n        }\n      }\n    }\n    this.is_focused = focused;\n    return focused;\n  }\n\n  run(params) {\n    this.applyParams(params);\n\n    if (this.last_frame !== engine.global_frame_index - 1) {\n      // it's been more than a frame, we must have not been running, discard async events\n      this.submitted = false;\n    }\n    this.last_frame = engine.global_frame_index;\n\n    this.canceled = false;\n    let focused = this.updateFocus();\n\n    glov_ui.this_frame_edit_boxes.push(this);\n    let elem = glov_ui.getElem(this.allow_modal, this.elem);\n    if (elem !== this.elem) {\n      if (elem) {\n        // new DOM element, initialize\n        elem.textContent = '';\n        let form = document.createElement('form');\n        form.setAttribute('autocomplete', 'off');\n        let input = document.createElement('input');\n        input.setAttribute('autocomplete', `auto_off_${Math.random()}`);\n        input.setAttribute('type', this.type);\n        input.setAttribute('placeholder', this.placeholder);\n        if (this.max_len) {\n          input.setAttribute('maxLength', this.max_len);\n        }\n        input.setAttribute('tabindex', 2);\n        form.addEventListener('submit', ev => {\n          ev.preventDefault();\n          this.submitted = true;\n          this.text = this.input.value;\n          if (this.pointer_lock && !this.text) {\n            glov_input.pointerLockEnter('edit_box_submit');\n          }\n        }, true);\n        form.appendChild(input);\n        let span = document.createElement('span');\n        span.setAttribute('tabindex', 3);\n        form.appendChild(span);\n        elem.appendChild(form);\n        input.value = this.text;\n        this.input = input;\n        if (this.initial_focus || this.onetime_focus) {\n          input.focus();\n          this.onetime_focus = false;\n        }\n        if (this.initial_select) {\n          input.select();\n        }\n      } else {\n        this.input = null;\n      }\n      this.submitted = false;\n      this.elem = elem;\n    } else {\n      if (this.input) {\n        this.text = this.input.value;\n      }\n    }\n    if (elem) {\n      let pos = camera2d.htmlPos(this.x, this.y);\n      if (!this.spellcheck) {\n        elem.spellcheck = false;\n      }\n      elem.style.left = `${pos[0]}%`;\n      elem.style.top = `${pos[1]}%`;\n      let size = camera2d.htmlSize(this.w, 0);\n      elem.style.width = `${size[0]}%`;\n      let old_fontsize = elem.style.fontSize || '?px';\n      let new_fontsize = `${camera2d.virtualToFontSize(this.font_height).toFixed(0)}px`;\n      if (new_fontsize !== old_fontsize) {\n        elem.style.fontSize = new_fontsize;\n      }\n    }\n\n    if (focused) {\n      if (this.auto_unfocus) {\n        if (glov_input.click({ peek: true })) {\n          glov_ui.focusSteal('canvas');\n        }\n      }\n      // keyboard input is handled by the INPUT element, but allow mouse events to trickle\n      glov_input.eatAllKeyboardInput();\n    }\n\n    if (this.submitted) {\n      this.submitted = false;\n      return this.SUBMIT;\n    }\n    if (this.canceled) {\n      this.canceled = false;\n      return this.CANCEL;\n    }\n    return null;\n  }\n  unrun() {\n    // remove from DOM or hide\n    this.elem = null;\n    this.input = null;\n  }\n}\nGlovUIEditBox.prototype.SUBMIT = 'submit';\nGlovUIEditBox.prototype.CANCEL = 'cancel';\n\nexport function create(params) {\n  return new GlovUIEditBox(params);\n}","\nconst engine = require('./engine.js'); // Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n// Some code from Turbulenz: Copyright (c) 2012-2013 Turbulenz Limited\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst geom = require('./geom.js');\nconst shaders = require('./shaders.js');\nconst textures = require('./textures.js');\n\nconst { vec2, vec3, vec4, v4set } = require('./vmath.js');\n\nconst shader_data = {\n  vp_copy: {\n    vp: '#pragma WebGL\\nprecision highp float;\\n\\nvarying vec2 interp_texcoord;\\nattribute vec2 POSITION;\\n\\nuniform vec2 copy_uv_scale;\\nuniform vec4 clip_space;\\n\\nvoid main()\\n{\\n  interp_texcoord = POSITION * copy_uv_scale;\\n  gl_Position = vec4(POSITION * clip_space.xy + clip_space.zw, 0, 1);\\n}'\n  },\n  copy: {\n    fp: '#pragma WebGL\\n\\nprecision lowp float;\\n\\nvarying vec2 interp_texcoord;\\n\\nuniform sampler2D inputTexture0;\\nvoid main()\\n{\\n  gl_FragColor = texture2D(inputTexture0, interp_texcoord);\\n}\\n'\n  },\n  pixely_expand: {\n    fp: '// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\\n// Released under MIT License: https://opensource.org/licenses/MIT\\n#pragma WebGL\\n\\nprecision mediump float;\\nprecision mediump int;\\n\\nvarying highp vec2 interp_texcoord;\\nuniform sampler2D inputTexture0; // source\\nuniform sampler2D inputTexture1; // hblur\\nuniform sampler2D inputTexture2; // hblur+vblur\\nuniform vec4 orig_pixel_size;\\n\\n// 1D Gaussian.\\nfloat Gaus(float pos, float scale) {\\n  return exp2(scale*pos*pos);\\n}\\n\\nconst float SHADE = 0.75;\\nconst float EASING = 1.25;\\n\\n#define DO_WARP\\n#ifdef DO_WARP\\n// Display warp.\\n// 0.0 = none\\n// 1.0/8.0 = extreme\\nconst vec2 WARP=vec2(1.0/32.0,1.0/24.0);\\n\\n// Distortion of scanlines, and end of screen alpha.\\nvec2 Warp(vec2 pos){\\n  pos=pos*2.0-1.0;\\n  pos*=vec2(1.0+(pos.y*pos.y)*WARP.x,1.0+(pos.x*pos.x)*WARP.y);\\n  return pos*0.5+0.5;\\n}\\n#else\\n#define Warp(v) v\\n#endif\\n\\nfloat easeInOut(float v) {\\n  float va = pow(v, EASING);\\n  return va / (va + pow((1.0 - v), EASING));\\n}\\n\\nfloat easeIn(float v) {\\n  return 2.0 * easeInOut(0.5 * v);\\n}\\n\\nfloat easeOut(float v) {\\n  return 2.0 * easeInOut(0.5 + 0.5 * v) - 1.0;\\n}\\n\\nvoid main()\\n{\\n  vec2 texcoords = Warp(interp_texcoord);\\n  vec2 intcoords = (floor(texcoords.xy * orig_pixel_size.xy) + 0.5) * orig_pixel_size.zw;\\n  vec2 deltacoords = (texcoords.xy - intcoords) * orig_pixel_size.xy; // -0.5 ... 0.5\\n  // for horizontal sampling, map [-0.5 .. -A .. A .. 0.5] -> [-0.5 .. 0 .. 0 .. 0.5];\\n  float A = 0.25;\\n  float Ainv = (0.5 - A) * 2.0;\\n  float uoffs = clamp((abs(deltacoords.x) - A) / Ainv, 0.0, 1.0) * orig_pixel_size.z;\\n  uoffs *= sign(deltacoords.x);\\n  vec2 sample_coords = vec2(intcoords.x + uoffs, intcoords.y);\\n  // sample_coords = intcoords;\\n  vec3 color = texture2D(inputTexture1, sample_coords).rgb;\\n  vec3 color_scanline = texture2D(inputTexture2, texcoords.xy + vec2(0.0, 0.5 * orig_pixel_size.w)).rgb * SHADE;\\n  // color_scanline = vec3(0);\\n\\n  // float mask = Gaus(deltacoords.y, -12.0);\\n  float mask = easeOut(2.0*(0.5 - abs(deltacoords.y)));\\n  // float mask = abs(deltacoords.y) > 0.25 ? 0.0 : 1.0;\\n  color = mix(color_scanline, color, mask);\\n  // color = vec3(mask);\\n\\n#ifdef DO_WARP\\n  // vignette\\n  float dist = min(1.0, 100.0 * min(0.5 - abs(texcoords.x - 0.5), 0.5 - abs(texcoords.y - 0.5)));\\n  color *= 0.5 + 0.5 * dist;\\n#endif\\n\\n  gl_FragColor = vec4(color, 1.0);\\n  // gl_FragColor = vec4(color_scanline, 1.0);\\n  // gl_FragColor = vec4(sample_coords, 0.0, 1.0);\\n}\\n'\n  },\n  gaussian_blur: {\n    fp: '#pragma WebGL\\n\\nprecision lowp float;\\n\\nvarying vec2 interp_texcoord;\\n\\nvec4 _ret_0;\\nvec4 _TMP2;\\nvec4 _TMP1;\\nvec2 _c0022;\\nvec2 _c0024;\\nuniform vec3 sampleRadius;\\nuniform sampler2D inputTexture0;\\n\\nvoid main()\\n{\\n  vec2 uv = interp_texcoord;\\n  vec2 step = sampleRadius.xy;\\n  float glow = sampleRadius.z;\\n  gl_FragColor =\\n    ((texture2D(inputTexture0, uv - step * 3.0) + texture2D(inputTexture0, uv + step * 3.0)) * 0.085625 +\\n    (texture2D(inputTexture0, uv - step * 2.0) + texture2D(inputTexture0, uv + step * 2.0)) * 0.12375 +\\n    (texture2D(inputTexture0, uv - step * 1.0) + texture2D(inputTexture0, uv + step * 1.0)) * 0.234375 +\\n    texture2D(inputTexture0, uv) * 0.3125) * 0.83333333333333333333333333333333 * glow;\\n}\\n'\n  },\n  // bloom_merge: {\n  //   fp: fs.readFileSync(`${__dirname}/shaders/effects_bloom_merge.fp`, 'utf8'),\n  // },\n  // bloom_threshold: {\n  //   fp: fs.readFileSync(`${__dirname}/shaders/effects_bloom_threshold.fp`, 'utf8'),\n  // },\n  color_matrix: {\n    fp: '#pragma WebGL\\n\\nprecision lowp float;\\n\\nvarying vec2 interp_texcoord;\\n\\nuniform vec4 colorMatrix[3];\\nuniform sampler2D tex0;\\n\\nvoid main()\\n{\\n  vec4 _color;\\n  vec4 _mutc;\\n  _color = texture2D(tex0, interp_texcoord);\\n  _mutc = _color;\\n  _mutc.w = 1.0;\\n  vec3 _r0019;\\n  _r0019.x = dot(colorMatrix[0], _mutc);\\n  _r0019.y = dot(colorMatrix[1], _mutc);\\n  _r0019.z = dot(colorMatrix[2], _mutc);\\n  _mutc.xyz = _r0019;\\n  _mutc.w = _color.w;\\n  gl_FragColor = _mutc;\\n}'\n  }\n  // distort: {\n  //   fp: fs.readFileSync(`${__dirname}/shaders/effects_distort.fp`, 'utf8'),\n  // },\n};\n\nexport function registerShader(key, obj) {\n  shader_data[key] = obj;\n}\n\nfunction getShader(key) {\n  let elem = shader_data[key];\n  if (!elem.shader) {\n    if (elem.fp) {\n      elem.shader = shaders.create(gl.FRAGMENT_SHADER, key, elem.fp);\n    } else {\n      elem.shader = shaders.create(gl.VERTEX_SHADER, key, elem.vp);\n    }\n  }\n  return elem.shader;\n}\n\nlet inited = false;\nlet clip_space = vec4(2, 2, -1, -1);\nlet copy_uv_scale = vec2(1, 1);\nlet shader_params_default = {\n  clip_space,\n  copy_uv_scale\n};\n// let shader_params_distort;\nlet shader_params_color_matrix;\n// let shader_params_bloom;\n// let shader_params_bloom_merge;\nlet shader_params_gaussian_blur;\nlet shader_params_pixely_expand;\nlet quad_geom;\nfunction startup() {\n  inited = true;\n\n  quad_geom = geom.create([[shaders.semantic.POSITION, gl.FLOAT, 2, false]], new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]), null, geom.QUADS); // TODO: use gl.TRIANGLE_STRIP instead, save index buffer binding\n\n  // shader_params_distort = {\n  //   clip_space,\n  //   copy_uv_scale,\n  //   strength: vec2(0, 0),\n  //   transform: new Float32Array([0, 0, 0, 0, 0, 0]),\n  //   invTransform: vec4(0, 0, 0, 0),\n  // };\n\n  shader_params_color_matrix = {\n    clip_space,\n    copy_uv_scale,\n    colorMatrix: new Float32Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])\n  };\n\n  // shader_params_bloom = {\n  //   clip_space,\n  //   copy_uv_scale,\n  //   bloomThreshold: 0,\n  //   thresholdCuttoff: 0,\n  // };\n\n  // shader_params_bloom_merge = {\n  //   clip_space,\n  //   copy_uv_scale,\n  //   bloomIntensity: 0,\n  //   bloomSaturation: 0,\n  //   originalIntensity: 0,\n  //   originalSaturation: 0,\n  // };\n\n  // Gaussian Blur effect (also used by bloom)\n  shader_params_gaussian_blur = {\n    clip_space,\n    copy_uv_scale,\n    sampleRadius: vec3(1, 1, 1),\n    Gauss: new Float32Array([0.93, 0.8, 0.7, 0.6, 0.5, 0.4, 0.3, 0.2, 0.1])\n  };\n\n  shader_params_pixely_expand = {\n    clip_space,\n    copy_uv_scale,\n    orig_pixel_size: vec4()\n  };\n}\n\nexport function grayScaleMatrix(dst) {\n  dst[0] = 0.2126;\n  dst[1] = 0.2126;\n  dst[2] = 0.2126;\n  dst[3] = 0.7152;\n  dst[4] = 0.7152;\n  dst[5] = 0.7152;\n  dst[6] = 0.0722;\n  dst[7] = 0.0722;\n  dst[8] = 0.0722;\n  dst[9] = dst[10] = dst[11] = 0;\n}\n\nexport function sepiaMatrix(dst) {\n  dst[0] = 0.393;\n  dst[1] = 0.349;\n  dst[2] = 0.272;\n  dst[3] = 0.769;\n  dst[4] = 0.686;\n  dst[5] = 0.534;\n  dst[6] = 0.189;\n  dst[7] = 0.168;\n  dst[8] = 0.131;\n  dst[9] = dst[10] = dst[11] = 0;\n}\n\nexport function negativeMatrix(dst) {\n  dst[0] = dst[4] = dst[8] = -1;\n  dst[1] = dst[2] = dst[3] = dst[5] = dst[6] = dst[7] = 0;\n  dst[9] = dst[10] = dst[11] = 1;\n}\n\nexport function saturationMatrix(dst, saturationScale) {\n  let is = 1 - saturationScale;\n  dst[0] = is * 0.2126 + saturationScale;\n  dst[1] = is * 0.2126;\n  dst[2] = is * 0.2126;\n  dst[3] = is * 0.7152;\n  dst[4] = is * 0.7152 + saturationScale;\n  dst[5] = is * 0.7152;\n  dst[6] = is * 0.0722;\n  dst[7] = is * 0.0722;\n  dst[8] = is * 0.0722 + saturationScale;\n  dst[9] = dst[10] = dst[11] = 0;\n}\n\nexport function hueMatrix(dst, angle) {\n  ////\n  //// Uncomment to calculate new coeffecients should luminance\n  //// values 0.2126 0.7152 0.0722 change.\n  //let lumR = 0.2126;\n  //let lumG = 0.7152;\n  //let lumB = 0.0722;\n  ////\n  //let r23 = Math.sqrt(2 / 3);\n  //let r12 = 1 / Math.sqrt(2);\n  //let r13 = 1 / Math.sqrt(3);\n  //let r16 = 1 / Math.sqrt(6);\n  //let M = [r23, 0, r13, -r16, r12, r13, -r16, -r12, r13, 0, 0, 0];\n  //let zx = (r23 * lumR) - (r16 * lumG) - (r16 * lumB);\n  //let zy =                (r12 * lumG) - (r12 * lumB);\n  //let zz = (r13 * lumR) + (r13 * lumG) + (r13 * lumB);\n  //let x = zx / zz;\n  //let y = zy / zz;\n  //let C = [1, 0, x, 0, 1, y, 0, 0, 1, 0, 0, 0];\n  //m43mul(M, M, C);\n  //console.log(\"Pre transform = \", M);\n  //let E = [1, 0, -x, 0, 1, -y, 0, 0, 1, 0, 0, 0];\n  //let N = [r23, -r16, -r16, 0, r12, -r12, r13, r13, r13, 0, 0, 0];\n  //m43mul(N, E, N);\n  //console.log(\"Post transform = \", N);\n  ////\n  //// Final matrix is then: m43Mul(Pre, [c, s, 0, -s, c, 0, 0, 0, 1, 0, 0, 0, ], Post);\n  //// for c = cos(angle), s = sin(angle)\n  ////\n  //let out = \"\";\n  //out += \"let c = Math.cos(angle);\\n\";\n  //out += \"let s = Math.sin(angle);\\n\";\n  //out += \"dst[0] = (\" + (N[0]*M[0]+N[3]*M[1]) + \" * c) + (\" + (N[3]*M[0]-N[0]*M[1]) + \" * s) + \" + lumR+\";\\n\";\n  //out += \"dst[1] = (\" + (-lumR)               + \" * c) + (\" + (N[4]*M[0]-N[1]*M[1]) + \" * s) + \" + lumR+\";\\n\";\n  //out += \"dst[2] = (\" + (-lumR)               + \" * c) + (\" + (N[5]*M[0]-N[2]*M[1]) + \" * s) + \" + lumR+\";\\n\";\n  //out += \"dst[3] = (\" + (-lumG)               + \" * c) + (\" + (N[3]*M[3]-N[0]*M[4]) + \" * s) + \" + lumG+\";\\n\";\n  //out += \"dst[4] = (\" + (N[1]*M[3]+N[4]*M[4]) + \" * c) + (\" + (N[4]*M[3]-N[1]*M[4]) + \" * s) + \" + lumG+\";\\n\";\n  //out += \"dst[5] = (\" + (-lumG)               + \" * c) + (\" + (N[5]*M[3]-N[2]*M[4]) + \" * s) + \" + lumG+\";\\n\";\n  //out += \"dst[6] = (\" + (-lumB)               + \" * c) + (\" + (N[3]*M[6]-N[0]*M[7]) + \" * s) + \" + lumB+\";\\n\";\n  //out += \"dst[7] = (\" + (-lumB)               + \" * c) + (\" + (N[4]*M[6]-N[1]*M[7]) + \" * s) + \" + lumB+\";\\n\";\n  //out += \"dst[8] = (\" + (N[2]*M[6]+N[5]*M[7]) + \" * c) + (\" + (N[5]*M[6]-N[2]*M[7]) + \" * s) + \" + lumB+\";\\n\";\n  //console.log(out);\n  let c = Math.cos(angle);\n  let s = Math.sin(angle);\n  dst[0] = 0.7874 * c + -0.3712362230889293 * s + 0.2126;\n  dst[1] = -0.2126 * c + 0.20611404610069642 * s + 0.2126;\n  dst[2] = -0.2126 * c + -0.9485864922785551 * s + 0.2126;\n  dst[3] = -0.7152 * c + -0.4962902913954023 * s + 0.7152;\n  dst[4] = 0.2848 * c + 0.08105997779422341 * s + 0.7152;\n  dst[5] = -0.7152 * c + 0.6584102469838492 * s + 0.7152;\n  dst[6] = -0.0722 * c + 0.8675265144843316 * s + 0.0722;\n  dst[7] = -0.0722 * c + -0.28717402389491986 * s + 0.0722;\n  dst[8] = 0.9278 * c + 0.290176245294706 * s + 0.0722;\n  dst[9] = dst[10] = dst[11] = 0;\n}\n\nexport function brightnessAddMatrix(dst, brightnessOffset) {\n  dst[0] = dst[4] = dst[8] = 1;\n  dst[1] = dst[2] = dst[3] = dst[5] = dst[6] = dst[7] = 0;\n  dst[9] = dst[10] = dst[11] = brightnessOffset;\n}\n\nexport function brightnessScaleMatrix(dst, scale) {\n  dst[0] = dst[4] = dst[8] = scale;\n  dst[1] = dst[2] = dst[3] = dst[5] = dst[6] = dst[7] = 0;\n  dst[9] = dst[10] = dst[11] = 0;\n}\n\nexport function additiveMatrix(dst, additiveRGB) {\n  dst[0] = dst[4] = dst[8] = 1;\n  dst[1] = dst[2] = dst[3] = dst[5] = dst[6] = dst[7] = 0;\n  dst[9] = additiveRGB[0];\n  dst[10] = additiveRGB[1];\n  dst[11] = additiveRGB[2];\n}\n\nexport function contrastMatrix(dst, contrastScale) {\n  dst[0] = dst[4] = dst[8] = contrastScale;\n  dst[1] = dst[2] = dst[3] = dst[5] = dst[6] = dst[7] = 0;\n  dst[9] = dst[10] = dst[11] = 0.5 * (1 - contrastScale);\n}\n\n// effect: { shader, params, texs }\nfunction applyEffect(effect, view_w, view_h) {\n  let viewport = engine.viewport;\n  let target_w = viewport[2];\n  let target_h = viewport[3];\n  view_w = view_w || target_w;\n  view_h = view_h || target_h;\n\n  // Set values for parameters used by all effects\n  clip_space[0] = 2.0 * view_w / target_w;\n  clip_space[1] = 2.0 * view_h / target_h;\n  // clip_space[2] = -1.0;\n  // clip_space[3] = -1.0;\n  // copy_uv_scale[0] = target_w / effect.coord_source.width;\n  // copy_uv_scale[1] = target_h / effect.coord_source.height;\n\n  shaders.bind(getShader('vp_copy'), getShader(effect.shader), effect.params);\n  textures.bindArray(effect.texs);\n  quad_geom.draw();\n}\n\n// // TODO: Update for RTBBCTT and port to new GLOV.js\n// function applyBloomTODO(params) {\n//   let source = params.source;\n//   let blur1 = params.blurTarget1;\n//   let blur2 = params.blurTarget2;\n//   let dest = params.destination;\n//   if (!source || !dest || !blur1 || !blur2 || !blur1.colorTexture0 ||\n//     !blur2.colorTexture0 || blur1 === blur2 || blur1 === dest ||\n//     source === blur1.colorTexture0 || source === dest.colorTexture0) {\n//     return false;\n//   }\n//\n//   let effectParams = this.effectParams;\n//   let techparams;\n//\n//   // Threshold copy.\n//   techparams = this.bloomThresholdParameters;\n//   effectParams.technique = this.bloomThresholdTechnique;\n//   effectParams.params = techparams;\n//\n//   techparams.bloomThreshold = (params.bloomThreshold !== undefined) ? params.bloomThreshold : 0.65;\n//   techparams.thresholdCutoff = Math.exp((params.thresholdCutoff !== undefined) ? params.thresholdCutoff : 3);\n//   techparams.inputTexture0 = source;\n//   effectParams.destination = blur1;\n//   this.applyEffect(effectParams);\n//\n//   // Gaussian blur.\n//   techparams = this.gaussianBlurParameters;\n//   effectParams.technique = this.gaussianBlurTechnique;\n//   effectParams.params = techparams;\n//\n//   let sampleRadius = (params.blurRadius || 20);\n//   techparams.sampleRadius[0] = sampleRadius / source.width;\n//   techparams.sampleRadius[1] = 0;\n//   techparams.sampleRadius[2] = 1;\n//   techparams.inputTexture0 = blur1.colorTexture0;\n//   effectParams.destination = blur2;\n//   this.applyEffect(effectParams);\n//\n//   techparams.sampleRadius[0] = 0;\n//   techparams.sampleRadius[1] = sampleRadius / source.height;\n//   techparams.sampleRadius[2] = 1;\n//   techparams.inputTexture0 = blur2.colorTexture0;\n//   effectParams.destination = blur1;\n//   this.applyEffect(effectParams);\n//\n//   // Merge.\n//   techparams = this.bloomMergeParameters;\n//   effectParams.technique = this.bloomMergeTechnique;\n//   effectParams.params = techparams;\n//\n//   techparams.bloomIntensity = (params.bloomIntensity !== undefined) ? params.bloomIntensity : 1.2;\n//   techparams.bloomSaturation = (params.bloomSaturation !== undefined) ? params.bloomSaturation : 1.2;\n//   techparams.originalIntensity = (params.originalIntensity !== undefined) ? params.originalIntensity : 1.0;\n//   techparams.originalSaturation = (params.originalSaturation !== undefined) ? params.originalSaturation : 1.0;\n//   techparams.inputTexture0 = source;\n//   techparams.inputTexture1 = blur1.colorTexture0;\n//   effectParams.destination = dest;\n//   this.applyEffect(effectParams);\n//\n//   return true;\n// }\n\nexport function applyCopy(params) {\n  if (!inited) {\n    startup();\n  }\n  applyEffect({\n    shader: params.shader || 'copy',\n    params: shader_params_default,\n    texs: [params.source]\n  });\n}\n\nexport function applyPixelyExpand(params) {\n  if (!inited) {\n    startup();\n  }\n  let source = params.source;\n  source.setSamplerState({\n    filter_min: gl.LINEAR,\n    filter_mag: gl.LINEAR,\n    wrap_s: gl.CLAMP_TO_EDGE,\n    wrap_t: gl.CLAMP_TO_EDGE\n  });\n\n  // do horizontal blur for primary lines\n  let resx = source.width;\n  let resy = source.height;\n  let sampleRadius = (params.hblur || 0.25) / resx;\n  shader_params_gaussian_blur.sampleRadius[0] = sampleRadius;\n  shader_params_gaussian_blur.sampleRadius[1] = 0;\n  shader_params_gaussian_blur.sampleRadius[2] = 1;\n  applyEffect({\n    shader: 'gaussian_blur',\n    params: shader_params_gaussian_blur,\n    texs: [source]\n  }, resx, resy);\n  let hblur = engine.captureFramebuffer(null, resx, resy, true, false);\n\n  // do seperable gaussian blur for scanlines (using horizontal blur from above)\n  sampleRadius = (params.vblur || 0.75) / resy;\n  shader_params_gaussian_blur.sampleRadius[0] = 0;\n  shader_params_gaussian_blur.sampleRadius[1] = sampleRadius;\n  shader_params_gaussian_blur.sampleRadius[2] = 1;\n  applyEffect({\n    shader: 'gaussian_blur',\n    params: shader_params_gaussian_blur,\n    texs: [hblur]\n  }, resx, resy);\n  let vblur = engine.captureFramebuffer(null, resx, resy, true, false);\n\n  // combine at full res\n  v4set(shader_params_pixely_expand.orig_pixel_size, source.width, source.height, 1 / source.width, 1 / source.height);\n\n  engine.setViewport(params.final_viewport);\n  if (params.clear_color) {\n    gl.clearColor(params.clear_color[0], params.clear_color[1], params.clear_color[2], params.clear_color[3]);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n  }\n\n  applyEffect({\n    shader: 'pixely_expand',\n    params: shader_params_pixely_expand,\n    texs: [source, hblur, vblur]\n  });\n}\n\nexport function applyGaussianBlur(params) {\n  if (!inited) {\n    startup();\n  }\n  let source = params.source;\n  source.setSamplerState({\n    filter_min: gl.LINEAR,\n    filter_mag: gl.LINEAR,\n    wrap_s: gl.CLAMP_TO_EDGE,\n    wrap_t: gl.CLAMP_TO_EDGE\n  });\n  let max_size = params.max_size || 512;\n  let min_size = params.min_size || 128;\n\n  // Quick shrink down to 512->256->128 (or other specified min/max size)\n  let inputTexture0 = source;\n\n  let viewport = engine.viewport;\n  let res = max_size;\n  while (res > viewport[2] || res > viewport[3]) {\n    res /= 2;\n  }\n\n  while (res > min_size) {\n    applyEffect({\n      shader: params.shader_copy || 'copy',\n      params: shader_params_default,\n      texs: [inputTexture0]\n    }, res, res);\n    inputTexture0 = engine.captureFramebuffer(null, res, res, true, false);\n    res /= 2;\n  }\n\n  // Do seperable blur\n  let sampleRadius = (params.blur || 1) / res;\n  shader_params_gaussian_blur.sampleRadius[0] = sampleRadius;\n  shader_params_gaussian_blur.sampleRadius[1] = 0;\n  shader_params_gaussian_blur.sampleRadius[2] = params.glow || 1;\n  applyEffect({\n    shader: 'gaussian_blur',\n    params: shader_params_gaussian_blur,\n    texs: [inputTexture0]\n  }, res, res);\n  let blur = engine.captureFramebuffer(null, res, res, true, false);\n\n  shader_params_gaussian_blur.sampleRadius[0] = 0;\n  shader_params_gaussian_blur.sampleRadius[1] = sampleRadius;\n  shader_params_gaussian_blur.sampleRadius[2] = params.glow || 1;\n  applyEffect({\n    shader: 'gaussian_blur',\n    params: shader_params_gaussian_blur,\n    texs: [blur]\n  });\n\n  return true;\n}\n\nexport function applyColorMatrix(params) {\n  if (!inited) {\n    startup();\n  }\n  let source = params.source;\n  source.setSamplerState({\n    filter_min: gl.LINEAR,\n    filter_mag: gl.LINEAR,\n    wrap_s: gl.CLAMP_TO_EDGE,\n    wrap_t: gl.CLAMP_TO_EDGE\n  });\n\n  let matrix = params.colorMatrix;\n  let mout = shader_params_color_matrix.colorMatrix;\n\n  mout[0] = matrix[0];\n  mout[1] = matrix[3];\n  mout[2] = matrix[6];\n  mout[3] = matrix[9];\n  mout[4] = matrix[1];\n  mout[5] = matrix[4];\n  mout[6] = matrix[7];\n  mout[7] = matrix[10];\n  mout[8] = matrix[2];\n  mout[9] = matrix[5];\n  mout[10] = matrix[8];\n  mout[11] = matrix[11];\n\n  applyEffect({\n    shader: 'color_matrix',\n    params: shader_params_color_matrix,\n    texs: [source]\n  });\n\n  return true;\n}\n\n// // TODO: Update for RTBBCTT and port to new GLOV.js\n// export function applyDistortTODO(params) {\n//   let source = params.source;\n//   let dest = params.destination;\n//   let distort = params.distortion;\n//   if (!source || !dest || !distort || !dest.colorTexture0 ||\n//     source === dest.colorTexture0 || distort === dest.colorTexture0) {\n//     return false;\n//   }\n//\n//   // input transform.\n//   //  a b tx\n//   //  c d ty\n//   let a;\n//   let b;\n//   let c;\n//   let d;\n//   let tx;\n//   let ty;\n//\n//   let transform = params.transform;\n//   if (transform) {\n//     // transform col-major.\n//     a = transform[0];\n//     b = transform[2];\n//     tx = transform[4];\n//     c = transform[1];\n//     d = transform[3];\n//     ty = transform[5];\n//   } else {\n//     a = d = 1;\n//     b = c = 0;\n//     tx = ty = 0;\n//   }\n//\n//   let effectParams = this.effectParams;\n//   let techparams = this.distortParameters;\n//   effectParams.technique = this.distortTechnique;\n//   effectParams.params = techparams;\n//\n//   // TODO: Cache 'transform', 'invTransform', etc in the code below\n//   techparams.transform[0] = a;\n//   techparams.transform[1] = b;\n//   techparams.transform[2] = tx;\n//   techparams.transform[3] = c;\n//   techparams.transform[4] = d;\n//   techparams.transform[5] = ty;\n//\n//   // Compute inverse transform to use in distort texture displacement..\n//   let idet = 1 / (a * d - b * c);\n//   let ia = techparams.invTransform[0] = (idet * d);\n//   let ib = techparams.invTransform[1] = (idet * -b);\n//   let ic = techparams.invTransform[2] = (idet * -c);\n//   let id = techparams.invTransform[3] = (idet * a);\n//\n//   // Compute max pixel offset after transform for normalisation.\n//   let x1 = ((ia + ib) * (ia + ib)) + ((ic + id) * (ic + id));\n//   let x2 = ((ia - ib) * (ia - ib)) + ((ic - id) * (ic - id));\n//   let x3 = ((-ia + ib) * (-ia + ib)) + ((-ic + id) * (-ic + id));\n//   let x4 = ((-ia - ib) * (-ia - ib)) + ((-ic - id) * (-ic - id));\n//   let xmax = 0.5 * Math.sqrt(Math.max(x1, x2, x3, x4));\n//\n//   let strength = (params.strength || 10);\n//   techparams.strength[0] = strength / (source.width * xmax);\n//   techparams.strength[1] = strength / (source.height * xmax);\n//\n//   techparams.inputTexture0 = source;\n//   techparams.distortTexture = distort; // linear / repeat\n//   effectParams.destination = dest;\n//   this.applyEffect(effectParams);\n//\n//   return true;\n// }","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint-env browser */\n\nrequire('./bootstrap.js'); // Just in case it's not in app.js\n\nexport let DEBUG = String(document.location).indexOf('http://localhost') === 0;\n\nrequire('not_worker'); // This module cannot be required from a worker bundle\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst cmds = require('./cmds.js');\nconst effects = require('./effects.js');\nconst glov_font = require('./font.js');\nconst font_info_palanquin32 = require('../img/font/palanquin32.json');\nconst geom = require('./geom.js');\nconst input = require('./input.js');\nconst local_storage = require('./local_storage.js');\nconst mat3FromMat4 = require('gl-mat3/fromMat4');\nconst mat4Copy = require('gl-mat4/copy');\nconst mat4Invert = require('gl-mat4/invert');\nconst mat4Mul = require('gl-mat4/multiply');\nconst mat4Transpose = require('gl-mat4/transpose');\nconst mat4Perspective = require('gl-mat4/perspective');\nconst { asin, cos, floor, min, max, PI, round, sin, sqrt } = Math;\nconst models = require('./models.js');\nconst perf = require('./perf.js');\nconst settings = require('./settings.js');\nconst shaders = require('./shaders.js');\nconst { soundLoading, soundStartup, soundTick } = require('./sound.js');\nconst sprites = require('./sprites.js');\nconst textures = require('./textures.js');\nconst glov_transition = require('./transition.js');\nconst glov_ui = require('./ui.js');\nconst urlhash = require('./urlhash.js');\nconst { clamp, defaults, nearSame, ridx } = require('../../common/util.js');\nconst { mat3, mat4, vec3, vec4, v3mulMat4, v3iNormalize, v4copy, v4same, v4set } = require('./vmath.js');\n\nexport let canvas;\nexport let webgl2;\nexport let glov_particles;\n\nexport let width;\nexport let height;\nexport let pixel_aspect = 1;\nexport let antialias;\n\nexport let game_width;\nexport let game_height;\n\nexport let render_width;\nexport let render_height;\n\n//eslint-disable-next-line no-use-before-define\nexport let defines = urlhash.register({ key: 'D', type: urlhash.TYPE_SET, change: definesChanged });\nlet initial_define_forcewebgl2 = defines.FORCEWEBGL2;\nlet initial_define_nowebgl2 = defines.NOWEBGL2;\nfunction definesChanged() {\n  if (defines.FORCEWEBGL2 !== initial_define_forcewebgl2 || defines.NOWEBGL2 !== initial_define_nowebgl2) {\n    document.location.reload();\n  }\n}\n\nexport let any_3d = false;\nexport let ZFAR;\nexport let ZNEAR;\nexport let fov_y = 1;\nexport let fov_x = 1;\nexport let fov_min = 60 * PI / 180;\n\nexport let mat_projection = mat4();\nexport let mat_view = mat4();\nlet mat_m = mat4();\nexport let mat_vp = mat4();\nlet mat_mv = mat4();\nlet mat_mv_no_skew = mat4();\nlet mat_mvp = mat4();\nlet mat_mv_inv_transform = mat3();\nlet projection_inverse = vec4();\n\nexport let light_diffuse = vec3(0.75, 0.75, 0.75);\nlet light_dir_vs = vec3(0, 0, 0);\nexport let light_ambient = vec3(0.25, 0.25, 0.25);\nexport let light_dir_ws = vec3(-1, -2, -3);\n\nexport let font;\nexport let app_state = null;\nexport const border_color = vec4(0, 0, 0, 1);\n\nexport function setGlobalMatrices(_mat_view) {\n  mat4Copy(mat_view, _mat_view);\n  mat4Mul(mat_vp, mat_projection, mat_view);\n  v3iNormalize(light_dir_ws);\n  v3mulMat4(light_dir_vs, light_dir_ws, mat_view);\n}\n\nexport function setFOV(new_fov) {\n  fov_min = new_fov;\n}\n\nexport function setGameDims(w, h) {\n  game_width = w;\n  game_height = h;\n}\n\nlet is_ios_safari = function () {\n  let ua = window.navigator.userAgent;\n  let is_ios = ua.match(/iPad/i) || ua.match(/iPhone/i);\n  let webkit = ua.match(/WebKit/i);\n  return is_ios && webkit && !ua.match(/CriOS/i);\n}();\n\n// Didn't need this for a while, but got slow on iOS recently :(\nconst postprocessing_reset_version = '3';\nexport let postprocessing = local_storage.get('glov_no_postprocessing') !== postprocessing_reset_version;\nexport function postprocessingAllow(allow) {\n  local_storage.set('glov_no_postprocessing', allow ? undefined : postprocessing_reset_version);\n  postprocessing = allow;\n}\n\nfunction normalizeRow(m, idx) {\n  let len = m[idx] * m[idx] + m[idx + 1] * m[idx + 1] + m[idx + 2] * m[idx + 2];\n  if (len > 0) {\n    len = 1 / sqrt(len);\n    m[idx] *= len;\n    m[idx + 1] *= len;\n    m[idx + 2] *= len;\n  }\n}\n\nlet mat_temp = mat4();\nexport function updateMatrices(mat_model) {\n  // PERFTODO: depending on rendering path, only some of these are needed (m + vp or just mvp)\n  mat4Copy(mat_m, mat_model);\n\n  mat4Mul(mat_mv, mat_view, mat_model);\n  mat4Mul(mat_mvp, mat_projection, mat_mv);\n  // TODO: Can expand and simplify all of this, especially below\n  // Compute the inverse transform of thee model_view matrix, discarding scale,\n  // to be used for getting normals into view space\n  mat4Copy(mat_temp, mat_model);\n  normalizeRow(mat_temp, 0);\n  normalizeRow(mat_temp, 4);\n  normalizeRow(mat_temp, 8);\n  mat4Mul(mat_mv_no_skew, mat_view, mat_temp);\n  mat4Invert(mat_temp, mat_mv_no_skew);\n  mat4Transpose(mat_temp, mat_temp);\n  mat3FromMat4(mat_mv_inv_transform, mat_temp);\n}\nexport let global_timer = 0;\nexport function getFrameTimestamp() {\n  return global_timer;\n}\n\nexport let global_frame_index = 0;\nexport function getFrameIndex() {\n  return global_frame_index;\n}\n\nexport let this_frame_time = 0;\nexport function getFrameDt() {\n  return this_frame_time;\n}\n\nexport let hrtime = 0;\n\n// Wall time, may contain large jumps, may be 0 or negative\nlet this_frame_time_actual = 0;\nexport function getFrameDtActual() {\n  return this_frame_time_actual;\n}\n\nlet after_loading_state = null;\nexport let is_loading = true;\nexport function setState(new_state) {\n  if (is_loading) {\n    after_loading_state = new_state;\n  } else {\n    app_state = new_state;\n  }\n}\n\nexport function stateActive(test_state) {\n  if (is_loading) {\n    return after_loading_state === test_state;\n  } else {\n    return app_state === test_state;\n  }\n}\n\nlet mspf = 1000;\nlet mspf_update_time = 0;\nlet mspf_frame_count = 0;\nlet last_tick_cpu = 0;\nlet mspf_tick = 1000;\n// let net_time = 1000;\nlet mspf_tick_accum = 0;\n// let net_time_accum = 0;\nexport const PERF_HISTORY_SIZE = 128;\nexport let perf_state = window.glov_perf_state = {\n  fpsgraph: {\n    index: 0,\n    history: new Float32Array(PERF_HISTORY_SIZE * 2)\n  },\n  gpu_mem: {\n    tex: 0,\n    geom: 0\n  }\n};\nlet fpsgraph = perf_state.fpsgraph;\n\nperf.addMetric({\n  name: 'fps',\n  show_stat: 'show_fps', // always, if we're showing any metrics\n  show_graph: 'fps_graph',\n  labels: {\n    'fps: ': () => (1000 / mspf).toFixed(1),\n    'ms/f: ': () => mspf.toFixed(0),\n    'cpu: ': () => mspf_tick.toFixed(0)\n    // 'net: ': () => net_time.toFixed(0),\n  },\n  data: fpsgraph, // contain .index and .history (stride of colors.length)\n  line_scale_top: 50,\n  colors: [\n  // vec4(0.161, 0.678, 1, 1), // net time\n  vec4(1, 0.925, 0.153, 1), // cpu/tick time\n  vec4(0, 0.894, 0.212, 1)],\n  interactable: DEBUG\n});\n\nlet do_borders = true;\nlet do_viewport_postprocess = false;\nlet need_repos = 0;\n\nlet app_tick_functions = [];\nexport function addTickFunc(cb) {\n  app_tick_functions.push(cb);\n}\n\nlet post_tick = [];\nexport function postTick(ticks, fn) {\n  assert.equal(typeof fn, 'function');\n  post_tick.push({ ticks, fn });\n}\n\nlet temporary_textures = {};\n\nfunction resetEffects() {\n  for (let key in temporary_textures) {\n    let temp = temporary_textures[key];\n    // Release unused textures\n    while (temp.list.length > temp.idx) {\n      temp.list.pop().destroy();\n    }\n    if (!temp.idx) {\n      delete temporary_textures[key];\n    } else {\n      temp.idx = 0;\n    }\n  }\n}\n\nconst SAFARI_FULLSCREEN_ASPECT = function () {\n  let screen = window.screen;\n  if (!is_ios_safari || !screen) {\n    return 0;\n  }\n  const SAFARI_DIMS = { // wxh : [fullscreen aspect]\n    // iPhone XR\n    // iPhone 11 Pro Max\n    // iPhone XS Max\n    // iPhone 11\n    '896,414': 896 / 414,\n    // iPhone 11 Pro\n    // iPhone X (probably)\n    '812,375': 812 / 375,\n    // iPhone 8 Plus\n    '736,414': 736 / 414,\n    // iPhone 6s+\n    // iPhone 6+\n    '716,414': 736 / 414, // (screen.availWidth reports 20 less)\n    // iPhone 8\n    // iPhone 7 (10.1)\n    // iPhone 7 (11.4)\n    '667,375': 667 / 375,\n    // iPhone 6s\n    // iPhone 6\n    '647,375': 667 / 375, // (screen.availWidth reports 20 less)\n    // iPhone 5s\n    '548,320': 568 / 320 // (screen.availWidth reports 20 less)\n  };\n  let key = `${max(screen.availWidth, screen.availHeight)},${min(screen.availWidth, screen.availHeight)}`;\n  return SAFARI_DIMS[key] || 0;\n}();\nfunction safariTopSafeArea(view_w, view_h) {\n  // Detect if the URL bar is hidden, but should be a safe area\n  if (SAFARI_FULLSCREEN_ASPECT && nearSame(view_w / view_h, SAFARI_FULLSCREEN_ASPECT, 0.001)) {\n    // Note: if user has scaling enabled, the padding required might be different\n    //   but the same holds true for the safe area padding detected via CSS!\n    return 50 * (window.devicePixelRatio || 1); // seems to be 50pts on all devices\n  }\n  return 0;\n}\n\nlet last_canvas_width;\nlet last_canvas_height;\nlet last_body_height;\nlet safearea_elem;\nlet safearea_ignore_bottom = false;\nlet safearea_values = [0, 0, 0, 0];\nlet last_safearea_values = [0, 0, 0, 0];\nfunction checkResize() {\n  // use VisualViewport on at least iOS Safari - deal with tabs and keyboard\n  //   shrinking the viewport without changing the window height\n  let vv = window.visualViewport || {};\n  let css_to_real = window.devicePixelRatio || 1;\n  let view_w = vv.width || window.innerWidth;\n  let view_h = vv.height || window.innerHeight;\n  if (view_h !== last_body_height) {\n    // set this *before* getting canvas and safearea_elem dims below\n    last_body_height = view_h;\n    document.body.style.height = `${view_h}px`;\n  }\n  let new_width = round(canvas.clientWidth * css_to_real) || 1;\n  let new_height = round(canvas.clientHeight * css_to_real) || 1;\n\n  if (cmds.safearea[0] === -1) {\n    if (safearea_elem) {\n      let sa_width = safearea_elem.offsetWidth;\n      let sa_height = safearea_elem.offsetHeight;\n      if (sa_width && sa_height) {\n        v4set(safearea_values, safearea_elem.offsetLeft * css_to_real, new_width - (sa_width + safearea_elem.offsetLeft) * css_to_real, max(safearea_elem.offsetTop * css_to_real, safariTopSafeArea(view_w, view_h)),\n        // Note: Possibly ignoring bottom safe area, it seems not useful on iPhones (does not\n        //  adjust when keyboard is up, only obscured in the middle, if obeying left/right safe area)\n        safearea_ignore_bottom ? 0 : new_height - (sa_height + safearea_elem.offsetTop) * css_to_real);\n      }\n    }\n  } else {\n    v4set(safearea_values, new_width * clamp(cmds.safearea[0], 0, 25) / 100, new_width * clamp(cmds.safearea[1], 0, 25) / 100, new_height * clamp(cmds.safearea[2], 0, 25) / 100, new_height * clamp(cmds.safearea[3], 0, 25) / 100);\n  }\n  if (!v4same(safearea_values, last_safearea_values)) {\n    v4copy(last_safearea_values, safearea_values);\n    camera2d.setSafeAreaPadding(safearea_values[0], safearea_values[1], safearea_values[2], safearea_values[3]);\n    need_repos = max(need_repos, 1);\n  }\n\n  if (new_width !== last_canvas_width || new_height !== last_canvas_height) {\n    window.pixel_scale = css_to_real; // for debug\n    last_canvas_width = canvas.width = new_width || 1;\n    last_canvas_height = canvas.height = new_height || 1;\n    // For the next 10 frames, make sure font size is correct\n    need_repos = 10;\n  }\n  if (is_ios_safari && (window.visualViewport || need_repos)) {\n    // we have accurate view information, or screen was just rotated / resized\n    // force scroll to top\n    window.scroll(0, 0);\n  }\n}\n\nexport let viewport = vec4(0, 0, 1, 1);\nexport function setViewport(xywh) {\n  v4copy(viewport, xywh);\n  gl.viewport(xywh[0], xywh[1], xywh[2], xywh[3]);\n}\n\nlet last_temp_idx = 0;\nexport function getTemporaryTexture(w, h) {\n  let key = w ? `${w}_${h}` : 'screen';\n  let temp = temporary_textures[key];\n  if (!temp) {\n    temp = temporary_textures[key] = { list: [], idx: 0 };\n  }\n  if (temp.idx >= temp.list.length) {\n    let tex = textures.createForCapture(`temp_${key}_${++last_temp_idx}`);\n    temp.list.push(tex);\n  }\n  let tex = temp.list[temp.idx++];\n  return tex;\n}\n\nexport function captureFramebuffer(tex, w, h, do_filter_linear, do_wrap) {\n  if (!w && render_width) {\n    w = render_width;\n    h = render_height;\n  }\n  if (!tex) {\n    tex = getTemporaryTexture(w, h);\n  }\n  if (w) {\n    tex.copyTexImage(viewport[0], viewport[1], w, h);\n  } else {\n    tex.copyTexImage(0, 0, width, height);\n  }\n  tex.setSamplerState({\n    filter_min: do_filter_linear ? gl.LINEAR : gl.NEAREST,\n    filter_mag: do_filter_linear ? gl.LINEAR : gl.NEAREST,\n    wrap_s: do_wrap ? gl.REPEAT : gl.CLAMP_TO_EDGE,\n    wrap_t: do_wrap ? gl.REPEAT : gl.CLAMP_TO_EDGE\n  });\n  return tex;\n}\n\nfunction requestFrame() {\n  let max_fps = settings.max_fps;\n  if (defines.SLOWLOAD && is_loading) {\n    // Safari on CrossBrowserTesting needs this in order to have some time to load/decode audio data\n    // TODO: Instead, generally, if loading, compare last_tick_cpu vs dt, and if\n    //   we're not idle for at least half of the time and we have *internal*\n    //   loads (textures, sounds, models, NOT user code), delay so that we are.\n    max_fps = 2;\n  }\n  if (max_fps) {\n    // eslint-disable-next-line no-use-before-define\n    setTimeout(tick, round(1000 / max_fps));\n  } else {\n    // eslint-disable-next-line no-use-before-define\n    requestAnimationFrame(tick);\n  }\n}\n\nlet mat_projection_10;\nexport let had_3d_this_frame;\n\nexport function setupProjection(use_fov_y, use_width, use_height, znear, zfar) {\n  mat4Perspective(mat_projection, use_fov_y, use_width / use_height, znear, zfar);\n  mat_projection_10 = mat_projection[10];\n  v4set(projection_inverse, 2 / (use_width * mat_projection[0]), // projection_matrix.m00),\n  2 / (use_height * mat_projection[5]), // projection_matrix.m11),\n  -(1 + mat_projection[8]) / mat_projection[0], // projection_matrix.m20) / projection_matrix.m00,\n  -(1 + mat_projection[9]) / mat_projection[5] // projection_matrix.m21) / projection_matrix.m11\n  );\n}\n\nexport function start3DRendering() {\n  had_3d_this_frame = true;\n  gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n  gl.enable(gl.BLEND);\n  gl.enable(gl.DEPTH_TEST);\n  gl.depthMask(true);\n\n  setupProjection(fov_y, width, height, ZNEAR, ZFAR);\n\n  gl.viewport(viewport[0], viewport[1], viewport[2], viewport[3]);\n  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT); // eslint-disable-line no-bitwise\n  gl.enable(gl.CULL_FACE);\n}\n\nexport function projectionZBias(dist, at_z) {\n  if (!dist) {\n    mat_projection[10] = mat_projection_10;\n    return;\n  }\n  //let e = 2 * ZFAR * ZNEAR / (ZFAR - ZNEAR) * (dist / (at_z * (at_z + dist)));\n  let e = 0.2 * (dist / (at_z * (at_z + dist)));\n  e = max(e, 2e-7);\n  mat_projection[10] = mat_projection_10 + e;\n}\n\nfunction fixNatives(is_startup) {\n  // If any browser extensions have added things to the Array prototype, remove them!\n  let b = [];\n  for (let a in b) {\n    console[is_startup ? 'log' : 'error'](`Found invasive enumerable property \"${a}\" on Array.prototype, removing...`);\n    let old_val = b[a];\n    delete Array.prototype[a];\n    // If this fails to work, perhaps try using Object.preventExtensions(Array.prototype) in an inline header script?\n    // eslint-disable-next-line no-extend-native\n    Object.defineProperty(Array.prototype, a, { value: old_val, enumerable: false });\n  }\n  for (let a in b) {\n    // Failed: code that iterates arrays will fail\n    assert(false, `Array.prototype has unremovable member ${a}`);\n  }\n}\n\nexport const hrnow = window.performance ? window.performance.now.bind(window.performance) : Date.now.bind(Date);\n\nlet last_tick = 0;\nfunction tick(timestamp) {\n  // if (timestamp < 1e12) { // high resolution timer\n  //   this ends up being a value way back in time, relative to what hrnow() returns,\n  //   causing timing confusion, so ignore it, just call hrnow()\n  //   hrtime = timestamp;\n  // } else { // probably integer milliseconds since epoch, or nothing\n  hrtime = hrnow();\n  // }\n  requestFrame();\n  let now = round(hrtime); // Code assumes integer milliseconds\n  if (!last_tick) {\n    last_tick = now;\n  }\n  this_frame_time_actual = now - last_tick;\n  let dt = min(max(this_frame_time_actual, 1), 250);\n  this_frame_time = dt;\n  last_tick = now;\n  global_timer += dt;\n  ++global_frame_index;\n\n  fixNatives(false);\n\n  // let this_net_time = wsclient.getNetTime();\n  // fpsgraph.history[(fpsgraph.index % PERF_HISTORY_SIZE) * 3 + 0] = this_net_time;\n  fpsgraph.history[fpsgraph.index % PERF_HISTORY_SIZE * 2 + 1] = this_frame_time_actual;\n  fpsgraph.index++;\n  fpsgraph.history[fpsgraph.index % PERF_HISTORY_SIZE * 2 + 0] = 0;\n\n  ++mspf_frame_count;\n  mspf_tick_accum += last_tick_cpu;\n  // net_time_accum += this_net_time;\n  if (now - mspf_update_time > 1000) {\n    if (!mspf_update_time) {\n      mspf_update_time = now;\n    } else {\n      mspf = (now - mspf_update_time) / mspf_frame_count;\n      mspf_tick = mspf_tick_accum / mspf_frame_count;\n      mspf_tick_accum = 0;\n      // net_time = net_time_accum / mspf_frame_count;\n      // net_time_accum = 0;\n      mspf_frame_count = 0;\n      mspf_update_time = now;\n    }\n  }\n\n  if (document.hidden || document.webkitHidden) {\n    resetEffects();\n    last_tick_cpu = 0;\n    // Maybe post-tick here too?\n    return;\n  }\n\n  had_3d_this_frame = false;\n  checkResize();\n  width = canvas.width;\n  height = canvas.height;\n\n  if (any_3d) {\n    // setting the fov values for the frame even if we don't do 3D this frame, because something\n    // might need it before start3DRendering() (e.g. mouse click inverse projection)\n    if (width > height) {\n      fov_y = fov_min;\n      let rise = width / height * sin(fov_y / 2) / cos(fov_y / 2);\n      fov_x = 2 * asin(rise / sqrt(rise * rise + 1));\n    } else {\n      fov_x = fov_min;\n      let rise = height / width * sin(fov_x / 2) / cos(fov_x / 2);\n      fov_y = 2 * asin(rise / sqrt(rise * rise + 1));\n    }\n  }\n  textures.bind(0, textures.textures.error);\n\n  camera2d.tickCamera2D();\n  camera2d.setAspectFixed(game_width, game_height);\n\n  soundTick(dt);\n  input.tickInput();\n  glov_ui.tickUI(dt);\n\n  if (need_repos) {\n    --need_repos;\n    let ul = [];\n    camera2d.virtualToDom(ul, [0, 0]);\n    let lr = [];\n    camera2d.virtualToDom(lr, [game_width - 1, game_height - 1]);\n    let viewport2 = [ul[0], ul[1], lr[0], lr[1]];\n    let view_height = viewport2[3] - viewport2[1];\n    // default font size of 16 when at height of game_height\n    let font_size = min(256, max(2, floor(view_height / 800 * 16)));\n    let elem_fullscreen = document.getElementById('fullscreen');\n    if (elem_fullscreen) {\n      elem_fullscreen.style['font-size'] = `${font_size}px`;\n    }\n  }\n\n  if (do_borders) {\n    // Borders\n    glov_ui.drawRect(camera2d.x0Real(), camera2d.y0Real(), camera2d.x1Real(), 0, Z.BORDERS, border_color);\n    glov_ui.drawRect(camera2d.x0Real(), game_height, camera2d.x1Real(), camera2d.y1Real(), Z.BORDERS, border_color);\n    glov_ui.drawRect(camera2d.x0Real(), 0, 0, game_height, Z.BORDERS, border_color);\n    glov_ui.drawRect(game_width, 0, camera2d.x1Real(), game_height, Z.BORDERS, border_color);\n  }\n\n  if (settings.show_metrics) {\n    perf.draw();\n  }\n\n  for (let ii = 0; ii < app_tick_functions.length; ++ii) {\n    app_tick_functions[ii](dt);\n  }\n  if (app_state) {\n    app_state(dt);\n  }\n\n  glov_particles.tick(dt); // *after* app_tick, so newly added/killed particles can be queued into the draw list\n  glov_transition.render(dt);\n\n  if (had_3d_this_frame) {\n    gl.disable(gl.CULL_FACE);\n  } else {\n    // delayed clear (and general GL init) until after app_state, app might change clear color\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n    gl.enable(gl.BLEND);\n    gl.disable(gl.DEPTH_TEST);\n    gl.depthMask(false);\n    gl.viewport(viewport[0], viewport[1], viewport[2], viewport[3]);\n    // TODO: for do_viewport_post_process, we need to enable gl.scissor to avoid clearing the whole screen!\n    // gl.scissor(0, 0, viewport[2] - viewport[0], viewport[3] - viewport[1]);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n  }\n\n  sprites.draw();\n\n  glov_ui.endFrame();\n\n  if (render_width) {\n    let source = captureFramebuffer();\n    let clear_color = [0, 0, 0, 1];\n    let final_viewport = [camera2d.render_offset_x, camera2d.render_offset_y_bottom, camera2d.render_viewport_w, camera2d.render_viewport_h];\n    if (do_viewport_postprocess) {\n      effects.applyPixelyExpand({ source, final_viewport, clear_color });\n    } else {\n      if (clear_color) {\n        gl.clearColor(clear_color[0], clear_color[1], clear_color[2], clear_color[3]);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n      }\n      setViewport(final_viewport);\n      // gl.scissor(0, 0, width, height);\n      effects.applyCopy({ source });\n    }\n  }\n\n  input.endFrame();\n  resetEffects();\n\n  for (let ii = post_tick.length - 1; ii >= 0; --ii) {\n    if (! --post_tick[ii].ticks) {\n      post_tick[ii].fn();\n      ridx(post_tick, ii);\n    }\n  }\n\n  last_tick_cpu = hrnow() - now;\n  fpsgraph.history[fpsgraph.index % PERF_HISTORY_SIZE * 2 + 0] = last_tick_cpu;\n}\n\nlet error_report_details = {};\nlet error_report_details_str = '';\nexport function setErrorReportDetails(key, value) {\n  if (value) {\n    error_report_details[key] = escape(String(value));\n  } else {\n    delete error_report_details[key];\n  }\n  error_report_details_str = `&${Object.keys(error_report_details).map(k => `${k}=${error_report_details[k]}`).join('&')}`;\n}\nsetErrorReportDetails('ver', BUILD_TIMESTAMP);\nlet last_error_time = 0;\nlet crash_idx = 0;\n// Errors from plugins that we don't want to get reported to us, or show the user!\nlet filtered_errors = /avast_submit|vc_request_action/;\nfunction glovErrorReport(msg, file, line, col) {\n  ++crash_idx;\n  let now = Date.now();\n  let dt = now - last_error_time;\n  last_error_time = now;\n  if (dt < 30 * 1000) {\n    // Less than 30 seconds since the last error, either we're erroring every\n    // frame, or this is a secondary error caused by the first, do not report it.\n    // Could maybe hash the error message and just report each message once, and\n    // flag errors as primary or secondary.\n    return false;\n  }\n  if (msg.match(filtered_errors)) {\n    return false;\n  }\n  // Post to an error reporting endpoint that (probably) doesn't exist - it'll get in the logs anyway!\n  let url = urlhash.getURLBase(); // base like http://foo.com/bar/index.html or http://foo.com/bar/\n  let idx = url.lastIndexOf('/'); // Remove anything after the last slash\n  if (idx !== -1 && idx > 8) {\n    // > 'https://'.length\n    url = url.slice(0, idx + 1);\n  }\n  url += `errorReport?cidx=${crash_idx}&file=${escape(file)}&line=${line}&col=${col}&url=${escape(location.href)}` + `&msg=${escape(msg)}${error_report_details_str}`;\n  let xhr = new XMLHttpRequest();\n  xhr.open('POST', url, true);\n  xhr.send(null);\n  return true;\n}\n\nexport function startup(params) {\n  fixNatives(true);\n\n  canvas = document.getElementById('canvas');\n  safearea_elem = document.getElementById('safearea');\n\n  if (params.error_report !== false) {\n    window.glov_error_report = glovErrorReport;\n  }\n\n  safearea_ignore_bottom = params.safearea_ignore_bottom || false;\n\n  // resize the canvas to fill browser window dynamically\n  window.addEventListener('resize', checkResize, false);\n  checkResize();\n\n  let is_pixely = params.pixely && params.pixely !== 'off';\n  antialias = params.antialias || !is_pixely && params.antialias !== false;\n  let powerPreference = params.high ? 'high-performance' : 'default';\n  let context_names = ['webgl2', 'webgl', 'experimental-webgl'];\n  let force_webgl1 = defines.NOWEBGL2;\n  let disable_data = local_storage.getJSON('webgl2_disable');\n  // Check if a previous, recent run had an error that hinted we should disable WebGL2\n  if (disable_data && disable_data.ua === navigator.userAgent && disable_data.ts > Date.now() - 7 * 24 * 60 * 60 * 1000) {\n    console.log('Disabling WebGL2 because a previous run encountered a related error');\n    force_webgl1 = true;\n  }\n  if (DEBUG && !defines.FORCEWEBGL2) {\n    let rc = local_storage.getJSON('run_count', 0) + 1;\n    local_storage.setJSON('run_count', rc);\n    if (rc % 2) {\n      force_webgl1 = true;\n    }\n  }\n  if (force_webgl1) {\n    context_names.splice(0, 1);\n  }\n  let context_opts = [{ antialias, powerPreference }, { powerPreference }, {}];\n  let good = false;\n  webgl2 = false;\n  for (let i = 0; !good && i < context_names.length; i += 1) {\n    for (let jj = 0; !good && jj < context_opts.length; ++jj) {\n      try {\n        window.gl = canvas.getContext(context_names[i], context_opts[jj]);\n        if (window.gl) {\n          if (context_names[i] === 'webgl2') {\n            webgl2 = true;\n          }\n          good = true;\n          break;\n        }\n      } catch (e) {\n        // ignore\n      }\n    }\n  }\n  if (!good) {\n    // eslint-disable-next-line no-alert\n    window.alert('Sorry, but your browser does not support WebGL or does not have it enabled.');\n    document.getElementById('loading').style.visibility = 'hidden';\n    document.getElementById('nowebgl').style.visibility = 'visible';\n    return false;\n  }\n  console.log(`Using WebGL${webgl2 ? 2 : 1}`);\n\n  assert(gl);\n  canvas.focus();\n  width = canvas.width;\n  height = canvas.height;\n  game_width = params.game_width || 1280;\n  game_height = params.game_height || 960;\n  any_3d = params.any_3d || false;\n  ZNEAR = params.znear || 0.7;\n  ZFAR = params.zfar || 10000;\n  if (params.pixely === 'strict') {\n    render_width = game_width;\n    render_height = game_height;\n    if (params.viewport_postprocess) {\n      do_viewport_postprocess = true;\n    }\n  } else {\n    render_width = undefined;\n    render_height = undefined;\n  }\n  pixel_aspect = params.pixel_aspect || 1;\n\n  gl.depthFunc(gl.LEQUAL);\n  // gl.enable(gl.SCISSOR_TEST);\n  if (!any_3d) {\n    gl.disable(gl.CULL_FACE);\n  }\n  gl.cullFace(gl.BACK);\n  gl.clearColor(0, 0.1, 0.2, 1);\n  gl.pixelStorei(gl.UNPACK_ALIGNMENT, 1); // Allow RGB texture data with non-mult-4 widths\n\n  textures.startup();\n  geom.startup();\n  shaders.startup({\n    light_diffuse,\n    light_dir_vs,\n    ambient: light_ambient,\n    mat_m: mat_m,\n    mat_mv: mat_mv,\n    mat_vp: mat_vp,\n    mvp: mat_mvp,\n    mv_inv_trans: mat_mv_inv_transform,\n    view: mat_view,\n    projection: mat_projection,\n    projection_inverse\n  });\n  camera2d.startup();\n  sprites.startup();\n  input.startup(canvas, params);\n  if (any_3d) {\n    models.startup();\n  }\n\n  /* eslint-disable global-require */\n  glov_particles = require('./particles.js').create();\n\n  if (is_pixely) {\n    textures.defaultFilters(gl.NEAREST, gl.NEAREST);\n  } else {\n    textures.defaultFilters(gl.LINEAR_MIPMAP_LINEAR, gl.LINEAR);\n  }\n\n  const font_info_04b03x2 = require('../img/font/04b03_8x2.json');\n  const font_info_04b03x1 = require('../img/font/04b03_8x1.json');\n  if (params.font) {\n    font = glov_font.create(params.font.info, params.font.texture);\n  } else if (params.pixely === 'strict') {\n    font = glov_font.create(font_info_04b03x1, 'font/04b03_8x1');\n  } else if (is_pixely) {\n    font = glov_font.create(font_info_04b03x2, 'font/04b03_8x2');\n  } else {\n    font = glov_font.create(font_info_palanquin32, 'font/palanquin32');\n  }\n  params.font = font;\n  glov_ui.startup(params);\n\n  soundStartup(params.sound);\n  glov_ui.bindSounds(defaults(params.ui_sounds || {}, {\n    button_click: 'button_click',\n    rollover: 'rollover'\n  }));\n\n  camera2d.setAspectFixed(game_width, game_height);\n\n  if (params.state) {\n    setState(params.state);\n  }\n  if (params.do_borders !== undefined) {\n    do_borders = params.do_borders;\n  }\n  if (params.show_fps !== undefined) {\n    settings.show_fps = params.show_fps;\n  }\n\n  requestFrame();\n  return true;\n}\n\nexport function loadsPending() {\n  return textures.load_count + soundLoading() + models.load_count;\n}\n\nfunction loading() {\n  let load_count = loadsPending();\n  let elem_loading_text = document.getElementById('loading_text');\n  if (elem_loading_text) {\n    elem_loading_text.innerText = `Loading (${load_count})...`;\n  }\n  if (!load_count) {\n    is_loading = false;\n    app_state = after_loading_state;\n    // Clear after next frame, so something is rendered to the canvas\n    postTick(2, function () {\n      let loading_elem = document.getElementById('loading');\n      if (loading_elem) {\n        loading_elem.style.visibility = 'hidden';\n      }\n    });\n  }\n}\napp_state = loading;\n\nwindow.glov_engine = exports;","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint no-bitwise:off, complexity:off, no-shadow:off */\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\n\nconst { floor, max, round } = Math;\nconst shaders = require('./shaders.js');\nconst sprites = require('./sprites.js');\nconst textures = require('./textures.js');\nconst { clamp } = require('../../common/util.js');\nconst { vec4, v4clone, v4scale } = require('./vmath.js');\n\n/*\n\nfont_style = glov_font.style(null, {\n  color: 0xFFFFFFff,\n  outline_width: 0,\n  outline_color: 0x00000000,\n  glow_xoffs: 0,\n  glow_yoffs: 0,\n  glow_inner: 0,\n  glow_outer: 0,\n  glow_color: 0x000000ff,\n});\n\n */\n\n// typedef struct FontCharInfo {\n//   int c;\n//   float x0;\n//   float y0;\n//   int w;\n//   int h;\n//   int imgIdx;\n// } FontCharInfo;\n\n// typedef struct FontInfo {\n//   AS_NAME(CharInfo) FontCharInfo **char_infos;\n//   int font_size;\n//   float x0;\n//   float y0;\n//   int imageW;\n//   int imageH;\n//   int spread;\n// } FontInfo;\n\nexport const COLOR_MODE = {\n  SINGLE: 0,\n  GRADIENT: 1\n};\n\nexport const ALIGN = {\n  HLEFT: 0,\n  HCENTER: 1,\n  HRIGHT: 2,\n  HMASK: 3,\n\n  VTOP: 0 << 2,\n  VCENTER: 1 << 2,\n  VBOTTOM: 2 << 2,\n  VMASK: 3 << 2,\n\n  HFIT: 1 << 4,\n  HWRAP: 1 << 5, // only for glovMarkup*, not drawSizedAligned below, use drawSizedWrapped below instead\n\n  HCENTERFIT: 1 | 1 << 4,\n  HVCENTER: 1 | 1 << 2, // to avoid doing bitwise ops elsewhere\n  HVCENTERFIT: 1 | 1 << 2 | 1 << 4 // to avoid doing bitwise ops elsewhere\n};\n\n// typedef struct GlovFontStyle\n// {\n//   // These members will never be changed (safe to initialize with GlovFontStyle foo = {1.0, 0xfff, etc};\n//   float outline_width;\n//   U32 outline_color;\n//   // Glow: can be used for a dropshadow as well\n//   //   inner can be negative to have the glow be less opaque (can also just change the alpha of the glow color)\n//   //   a glow would be e.g. (0, 0, -1, 5)\n//   //   a dropshadow would be e.g. (3.25, 3.25, -2.5, 5)\n//   float glow_xoffs;\n//   float glow_yoffs;\n//   float glow_inner;\n//   float glow_outer;\n//   U32 glow_color;\n//   U32 color; // upper left, or single color\n//   U32 colorUR; // upper right\n//   U32 colorLR; // lower right\n//   U32 colorLL; // lower left\n//   GlovFontColorMode color_mode;\n// } GlovFontStyle;\n\n/* Default GlovFontStyle:\n  font_style = {\n    outline_width: 0, outline_color: 0x00000000,\n    glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 0, glow_color: 0x00000000,\n    color: 0xFFFFFFff\n  };\n\n  font_style = {\n    outline_width: 0, outline_color: 0x00000000,\n    glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 0, glow_color: 0x00000000,\n    // Color gradient: UL, UR, LR, LL\n    color: 0xFFFFFFff, colorUR: 0xFFFFFFff, colorLR: 0x000000ff, colorLL: 0x000000ff,\n    color_mode: glov_font.COLOR_MODE.GRADIENT,\n  };\n*/\n\nfunction GlovFontStyle() {\n  this.color_vec4 = vec4(1, 1, 1, 1); // Matches GlovFontStyle.prototype.color below\n}\nGlovFontStyle.prototype.outline_width = 0;\nGlovFontStyle.prototype.outline_color = 0x00000000;\nGlovFontStyle.prototype.glow_xoffs = 0;\nGlovFontStyle.prototype.glow_yoffs = 0;\nGlovFontStyle.prototype.glow_inner = 0;\nGlovFontStyle.prototype.glow_outer = 0;\nGlovFontStyle.prototype.glow_color = 0x00000000;\nGlovFontStyle.prototype.color = 0xFFFFFFff;\nGlovFontStyle.prototype.colorUR = 0;\nGlovFontStyle.prototype.colorLR = 0;\nGlovFontStyle.prototype.colorLL = 0;\nGlovFontStyle.prototype.color_mode = COLOR_MODE.SINGLE;\n\nexport const font_shaders = {};\n\nexport function intColorFromVec4Color(v) {\n  return (v[0] * 255 | 0) << 24 | (v[1] * 255 | 0) << 16 | (v[2] * 255 | 0) << 8 | (v[3] * 255 | 0);\n}\n\nexport function vec4ColorFromIntColor(v, c) {\n  v[0] = (c >> 24 & 0xFF) / 255;\n  v[1] = (c >> 16 & 0xFF) / 255;\n  v[2] = (c >> 8 & 0xFF) / 255;\n  v[3] = (c & 0xFF) / 255;\n}\n\nexport const glov_font_default_style = new GlovFontStyle();\n\nexport function style(font_style, fields) {\n  let ret = new GlovFontStyle();\n  let { color_vec4 } = ret;\n  if (font_style) {\n    for (let f in font_style) {\n      ret[f] = font_style[f];\n    }\n  }\n  for (let f in fields) {\n    ret[f] = fields[f];\n  }\n  ret.color_vec4 = color_vec4; // Restore\n  vec4ColorFromIntColor(ret.color_vec4, ret.color);\n  return ret;\n}\n\nexport function styleColored(font_style, color) {\n  return style(font_style, {\n    color\n  });\n}\n\nfunction colorAlpha(color, alpha) {\n  alpha = clamp(round((color & 0xFF) * alpha), 0, 255);\n  return color & 0xFFFFFF00 | alpha;\n}\n\nexport function styleAlpha(font_style, alpha) {\n  return style(font_style, {\n    color: colorAlpha((font_style || glov_font_default_style).color, alpha),\n    outline_color: colorAlpha((font_style || glov_font_default_style).outline_color, alpha),\n    glow_color: colorAlpha((font_style || glov_font_default_style).glow_color, alpha)\n  });\n}\n\nlet tech_params = null;\nlet tech_params_dirty = false;\nlet temp_color = null;\n\nfunction createTechniqueParameters() {\n  if (tech_params) {\n    return;\n  }\n\n  tech_params = {\n    param0: vec4(),\n    outlineColor: vec4(),\n    glowColor: vec4(),\n    glowParams: vec4(),\n    tex0: null\n  };\n  if (!temp_color) {\n    temp_color = vec4();\n  }\n}\n\nfunction techParamsSet(param, value) {\n  let tpv = tech_params[param];\n  // not dirty, if anything changes, we need a new object!\n  if (!tech_params_dirty) {\n    if (tpv[0] !== value[0] || tpv[1] !== value[1] || tpv[2] !== value[2] || tpv[3] !== value[3]) {\n      // clone\n      tech_params = {\n        param0: v4clone(tech_params.param0),\n        outlineColor: v4clone(tech_params.outlineColor),\n        glowColor: v4clone(tech_params.glowColor),\n        glowParams: v4clone(tech_params.glowParams)\n      };\n      tech_params_dirty = true;\n      tpv = tech_params[param];\n    } else {\n      // identical, do nothing\n      return;\n    }\n  }\n  if (tech_params_dirty) {\n    // just set\n    tpv[0] = value[0];\n    tpv[1] = value[1];\n    tpv[2] = value[2];\n    tpv[3] = value[3];\n    // return;\n  }\n}\n\nfunction techParamsGet() {\n  tech_params_dirty = false;\n  return tech_params;\n}\n\nfunction GlovFont(font_info, texture_name) {\n  assert(font_info.font_size !== 0); // Got lost somewhere\n\n  this.texture = textures.load({\n    url: `img/${texture_name}.png`,\n    filter_min: font_info.noFilter ? gl.NEAREST : gl.LINEAR,\n    filter_mag: font_info.noFilter ? gl.NEAREST : gl.LINEAR,\n    wrap_s: gl.CLAMP_TO_EDGE,\n    wrap_t: gl.CLAMP_TO_EDGE\n  });\n  this.textures = [this.texture];\n\n  this.font_info = font_info;\n  this.shader = font_shaders.font_aa;\n  this.tex_w = font_info.imageW;\n  this.tex_h = font_info.imageH;\n\n  // Calculate inverse scale\n  for (let ii = 0; ii < font_info.char_infos.length; ++ii) {\n    let char_info = font_info.char_infos[ii];\n    char_info.scale = 1 / (char_info.sc || 1);\n  }\n\n  // build lookup\n  this.char_infos = [];\n  for (let ii = 0; ii < font_info.char_infos.length; ++ii) {\n    let char_info = font_info.char_infos[ii];\n    this.char_infos[font_info.char_infos[ii].c] = char_info;\n    char_info.xpad = char_info.xpad || 0;\n    char_info.yoffs = char_info.yoffs || 0;\n  }\n  this.replacement_character = this.infoFromChar(0xFFFD);\n  if (!this.replacement_character) {\n    this.replacement_character = this.infoFromChar(63); // '?'\n  }\n\n  this.default_style = new GlovFontStyle();\n  this.applied_style = new GlovFontStyle();\n\n  createTechniqueParameters();\n}\n\n// General draw functions return width\n// Pass NULL for style to use default style\n// If the function takes a color, this overrides the color on the style\nGlovFont.prototype.drawSizedColor = function (style, x, y, z, size, color, text) {\n  return this.drawSized(styleColored(style, color), x, y, z, size, text);\n};\nGlovFont.prototype.drawSized = function (style, x, y, z, size, text) {\n  return this.drawScaled(style, x, y, z, size / this.font_info.font_size, size / this.font_info.font_size, text);\n};\n\nGlovFont.prototype.drawSizedAligned = function (style, _x, _y, z, size, align, w, h, text) {\n  let x_size = size;\n  let y_size = size;\n  let width = this.getStringWidth(style, x_size, text);\n  if (align & ALIGN.HFIT && width > w) {\n    let scale = w / width;\n    x_size *= scale;\n    width = w;\n    // Additionally, if we're really squishing things horizontally, shrink the font size\n    // and offset to be centered.\n    if (scale < 0.5) {\n      if ((align & ALIGN.VMASK) !== ALIGN.VCENTER && (align & ALIGN.VMASK) !== ALIGN.VBOTTOM) {\n        // Offset to be roughly centered in the original line bounds\n        _y += (y_size - y_size * scale * 2) / 2;\n      }\n      y_size *= scale * 2;\n    }\n  }\n  let height = y_size;\n  let x;\n  let y;\n  switch (align & ALIGN.HMASK) {\n    case ALIGN.HCENTER:\n      x = _x + (w - width) / 2;\n      if (this.font_info.noFilter) {\n        x |= 0; // ensure integral\n      }\n      break;\n    case ALIGN.HRIGHT:\n      x = _x + w - width;\n      break;\n    case ALIGN.HLEFT:\n      x = _x;\n      break;\n    default:\n      x = _x;\n  }\n  switch (align & ALIGN.VMASK) {\n    case ALIGN.VCENTER:\n      y = _y + (h - height) / 2;\n      if (this.font_info.noFilter) {\n        y |= 0; // ensure integral\n      }\n      break;\n    case ALIGN.VBOTTOM:\n      y = _y + h - height;\n      break;\n    case ALIGN.VTOP:\n      y = _y;\n      break;\n    default:\n      y = _y;\n  }\n\n  return this.drawScaled(style, x, y, z, x_size / this.font_info.font_size, y_size / this.font_info.font_size, text);\n};\n\n// returns height\nGlovFont.prototype.drawSizedColorWrapped = function (style, x, y, z, w, indent, size, color, text) {\n  return this.drawScaledWrapped(styleColored(style, color), x, y, z, w, indent, size / this.font_info.font_size, size / this.font_info.font_size, text);\n};\nGlovFont.prototype.drawSizedWrapped = function (style, x, y, z, w, indent, size, text) {\n  return this.drawScaledWrapped(style, x, y, z, w, indent, size / this.font_info.font_size, size / this.font_info.font_size, text);\n};\n\nGlovFont.prototype.wrapLines = function (w, indent, size, text, word_cb /*(x, int linenum, const char *word)*/) {\n  return this.wrapLinesScaled(w, indent, size / this.font_info.font_size, text, word_cb);\n};\n\nGlovFont.prototype.numLines = function (style, w, indent, size, text) {\n  this.applyStyle(style);\n  let numlines = 0;\n  function wordCallback(ignored, linenum, word) {\n    numlines = max(numlines, linenum);\n  }\n  this.wrapLines(w, indent, size, text, wordCallback);\n  return numlines + 1;\n};\n\nGlovFont.prototype.infoFromChar = function (c) {\n  let ret = this.char_infos[c];\n  if (ret) {\n    return ret;\n  }\n  if (c > 127) {\n    // no char info, and non-ascii, non-control code\n    return this.replacement_character;\n  }\n  return null;\n};\n\nGlovFont.prototype.getCharacterWidth = function (style, x_size, c) {\n  assert.equal(typeof c, 'number');\n  this.applyStyle(style);\n  let char_info = this.infoFromChar(c);\n  let xsc = x_size / this.font_info.font_size;\n  let x_advance = this.calcXAdvance(xsc);\n  if (char_info) {\n    return (char_info.w + char_info.xpad) * xsc * char_info.scale + x_advance;\n  }\n  return 0;\n};\n\nGlovFont.prototype.getStringWidth = function (style, x_size, text) {\n  this.applyStyle(style);\n  let ret = 0;\n  let xsc = x_size / this.font_info.font_size;\n  let x_advance = this.calcXAdvance(xsc);\n  for (let ii = 0; ii < text.length; ++ii) {\n    let c = text.charCodeAt(ii);\n    let char_info = this.infoFromChar(c);\n    if (!char_info) {\n      char_info = this.infoFromChar(13);\n    }\n    if (char_info) {\n      ret += (char_info.w + char_info.xpad) * xsc * char_info.scale + x_advance;\n    }\n  }\n  return ret;\n};\n\n// word_cb(x, int linenum, const char *word)\nGlovFont.prototype.wrapLinesScaled = function (w, indent, xsc, text, word_cb) {\n  let len = text.length;\n  let s = 0;\n  let word_start = 0;\n  let word_x0 = 0;\n  let x = word_x0;\n  let linenum = 0;\n  let space_info = this.infoFromChar(32); // ' '\n  let space_size = (space_info ? space_info.w + space_info.xpad : this.font_info.font_size) * xsc;\n  let hard_wrap = false;\n  let x_advance = this.calcXAdvance(xsc);\n\n  do {\n    let c = s < len ? text.charCodeAt(s) : 0;\n    let newx = x;\n    let char_w;\n    if (c === 9) {\n      // '\\t') {\n      let tabsize = xsc * this.font_info.font_size * 4;\n      newx = (floor(x / tabsize) + 1) * tabsize;\n      char_w = tabsize;\n    } else {\n      let char_info = this.infoFromChar(c);\n      if (!char_info) {\n        char_info = this.infoFromChar(10);\n      }\n      if (char_info) {\n        char_w = (char_info.w + char_info.xpad) * xsc * char_info.scale + x_advance;\n        newx = x + char_w;\n      }\n    }\n    if (newx >= w && hard_wrap) {\n      // flush the word so far!\n      if (word_cb) {\n        word_cb(word_x0, linenum, text.slice(word_start, s));\n      }\n      word_start = s;\n      word_x0 = indent;\n      x = word_x0 + char_w;\n      linenum++;\n    } else {\n      x = newx;\n    }\n    if (!(c === 32 /*' '*/ || c === 0 || c === 10 /*'\\n'*/)) {\n      s++;\n      c = s < len ? text.charCodeAt(s) : 0;\n    }\n    if (c === 32 /*' '*/ || c === 0 || c === 10 /*'\\n'*/) {\n        hard_wrap = false;\n        // draw word until s\n        if (x > w) {\n          // maybe wrap\n          let word_width = x - word_x0;\n          if (word_width > w - indent) {\n            // not going to fit, split it up!\n            hard_wrap = true;\n            // recover and restart at word start\n            s = word_start;\n            x = word_x0;\n            continue;\n          } else {\n            word_x0 = indent;\n            x = word_x0 + word_width;\n            linenum++;\n          }\n        }\n        if (word_cb) {\n          word_cb(word_x0, linenum, text.slice(word_start, s));\n        }\n        word_start = s + 1;\n        if (c === 10 /*'\\n'*/) {\n            x = indent;\n            linenum++;\n          } else {\n          x += space_size;\n        }\n        word_x0 = x;\n        if (c === 32 /*' '*/ || c === 10 /*'\\n'*/) {\n            s++; // advance past space\n          }\n      }\n  } while (s < len);\n  ++linenum;\n  return linenum;\n};\n\nGlovFont.prototype.drawScaledWrapped = function (style, x, y, z, w, indent, xsc, ysc, text) {\n  if (text === null || text === undefined) {\n    text = '(null)';\n  }\n  this.applyStyle(style);\n  this.last_width = 0;\n  let num_lines = this.wrapLinesScaled(w, indent, xsc, text, (xoffs, linenum, word) => {\n    let y2 = y + this.font_info.font_size * ysc * linenum;\n    let x2 = x + xoffs;\n    let word_w = this.drawScaled(style, x2, y2, z, xsc, ysc, word);\n    this.last_width = max(this.last_width, xoffs + word_w);\n  });\n  return num_lines * this.font_info.font_size * ysc;\n};\n\nGlovFont.prototype.calcXAdvance = function (xsc) {\n  // Assume called: applyStyle(style);\n\n  // scale all supplied values by this so that if we swap in a font with twice the resolution (and twice the spread)\n  //   things look almost identical, just crisper\n  let font_texel_scale = this.font_info.font_size / 32;\n  // As a compromise, -2 bias here seems to work well\n  let x_advance = xsc * font_texel_scale * max(this.applied_style.outline_width - 2, 0);\n  // As a compromise, there's a -3 bias in there, so it only kicks in under extreme circumstances\n  x_advance = max(x_advance, xsc * font_texel_scale * max(this.applied_style.glow_outer - this.applied_style.glow_xoffs - 3, 0));\n  return x_advance;\n};\n\n//////////////////////////////////////////////////////////////////////////\n// Main implementation\n\nGlovFont.prototype.drawScaled = function (style, _x, y, z, xsc, ysc, text) {\n  let x = _x;\n  assert(isFinite(x));\n  assert(isFinite(y));\n  assert(isFinite(z));\n  let font_info = this.font_info;\n  // Debug: show expect area of glyphs\n  // require('./ui.js').drawRect(_x, y,\n  //   _x + xsc * font_info.font_size * 20, y + ysc * font_info.font_size,\n  //   1000, [1, 0, 1, 0.5]);\n  y += (font_info.y_offset || 0) * ysc;\n  let texs = this.textures;\n  if (text === null || text === undefined) {\n    text = '(null)';\n  }\n  const len = text.length;\n  if (xsc === 0 || ysc === 0) {\n    return 0;\n  }\n\n  this.applyStyle(style);\n\n  const avg_scale_font = (xsc + ysc) * 0.5;\n  const camera_xscale = camera2d.data[4];\n  const camera_yscale = camera2d.data[5];\n  let avg_scale_combined = (xsc * camera_xscale + ysc * camera_yscale) * 0.5;\n  // avg_scale_combined *= glov_settings.render_scale;\n\n  // scale all supplied values by this so that if we swap in a font with twice the resolution (and twice the spread)\n  //   things look almost identical, just crisper\n  let x_advance = this.calcXAdvance(xsc);\n  let font_texel_scale = font_info.font_size / 32;\n  let tile_state = 0;\n\n  let applied_style = this.applied_style;\n\n  // Calculate anti-aliasing values\n  let delta_per_source_pixel = 0.5 / font_info.spread;\n  let delta_per_dest_pixel = delta_per_source_pixel / avg_scale_combined;\n  let value = vec4(1 / delta_per_dest_pixel, // AA Mult and Outline Mult\n  -0.5 / delta_per_dest_pixel + 0.5, // AA Add\n  // Outline Add\n  -0.5 / delta_per_dest_pixel + 0.5 + applied_style.outline_width * font_texel_scale * avg_scale_combined, 0 // Unused\n  );\n  if (value[2] > 0) {\n    value[2] = 0;\n  }\n  let padding1 = max(0, applied_style.outline_width * font_texel_scale * avg_scale_font);\n  let padding4 = vec4();\n  const outer_scaled = applied_style.glow_outer * font_texel_scale;\n  padding4[0] = max(outer_scaled * xsc - applied_style.glow_xoffs * font_texel_scale * xsc, padding1);\n  padding4[2] = max(outer_scaled * xsc + applied_style.glow_xoffs * font_texel_scale * xsc, padding1);\n  padding4[1] = max(outer_scaled * ysc - applied_style.glow_yoffs * font_texel_scale * ysc, padding1);\n  padding4[3] = max(outer_scaled * ysc + applied_style.glow_yoffs * font_texel_scale * ysc, padding1);\n\n  techParamsSet('param0', value);\n  let value2 = vec4(0, // filled later\n  0, // filled later\n  // Glow mult\n  1 / ((applied_style.glow_outer - applied_style.glow_inner) * delta_per_source_pixel * font_texel_scale), -(0.5 - applied_style.glow_outer * delta_per_source_pixel * font_texel_scale) / ((applied_style.glow_outer - applied_style.glow_inner) * delta_per_source_pixel * font_texel_scale));\n  if (value2[3] > 0) {\n    value2[3] = 0;\n  }\n\n  let padding_in_font_space = vec4();\n  v4scale(padding_in_font_space, padding4, 1 / avg_scale_font);\n  for (let ii = 0; ii < 4; ++ii) {\n    if (padding_in_font_space[ii] > font_info.spread) {\n      // Not enough buffer\n      let sc = font_info.spread / padding_in_font_space[ii];\n      padding4[ii] *= sc;\n      padding_in_font_space[ii] *= sc;\n    }\n  }\n\n  // Choose appropriate z advance so that character are drawn left to right (or RTL if the glow is on the other side)\n  const z_advance = applied_style.glow_xoffs < 0 ? -0.0001 : 0.0001;\n\n  // For non-1:1 aspect ration rendering, need to scale our coordinates' padding differently in each axis\n  let rel_x_scale = xsc / avg_scale_font;\n  let rel_y_scale = ysc / avg_scale_font;\n\n  for (let i = 0; i < len; i++) {\n    const c = text.charCodeAt(i);\n    if (c === 9) {\n      // '\\t'.charCodeAt(0)) {\n      let tabsize = xsc * font_info.font_size * 4;\n      x = (((x - _x) / tabsize | 0) + 1) * tabsize + _x;\n    } else {\n      let char_info = this.infoFromChar(c);\n      if (!char_info) {\n        char_info = this.infoFromChar(13);\n      }\n      if (char_info) {\n        let char_scale = char_info.scale;\n        let xsc2 = xsc * char_scale;\n        if (char_info.w) {\n          let ysc2 = ysc * char_scale;\n          let pad_scale = 1 / char_scale;\n          let tile_width = this.tex_w;\n          let tile_height = this.tex_h;\n          // Lazy update params here\n          if (char_scale !== tile_state) {\n            value2[0] = -applied_style.glow_xoffs * font_texel_scale * pad_scale / tile_width;\n            value2[1] = -applied_style.glow_yoffs * font_texel_scale * pad_scale / tile_height;\n            techParamsSet('glowParams', value2);\n          }\n\n          let u0 = (char_info.x0 - padding_in_font_space[0] * pad_scale) / tile_width;\n          let u1 = (char_info.x0 + char_info.w + padding_in_font_space[2] * pad_scale) / tile_width;\n          let v0 = (char_info.y0 - padding_in_font_space[1] * pad_scale) / tile_height;\n          let v1 = (char_info.y0 + char_info.h + padding_in_font_space[3] * pad_scale) / tile_height;\n\n          let w = char_info.w * xsc2 + (padding4[0] + padding4[2]) * rel_x_scale;\n          let h = char_info.h * ysc2 + (padding4[1] + padding4[3]) * rel_y_scale;\n\n          sprites.queueraw(texs, x - rel_x_scale * padding4[0], y - rel_y_scale * padding4[2] + char_info.yoffs * ysc2, z + z_advance * i, w, h, u0, v0, u1, v1, applied_style.color_vec4, this.shader, techParamsGet());\n\n          // require('./ui.js').drawRect(x - rel_x_scale * padding4[0],\n          //   y - rel_y_scale * padding4[2] + char_info.yoffs * ysc2,\n          //   w + x - rel_x_scale * padding4[0],\n          //   h + y - rel_y_scale * padding4[2] + char_info.yoffs * ysc2,\n          //   1000, [i & 1, (i & 2)>>1, (i & 4)>>2, 0.5]);\n        }\n\n        x += (char_info.w + char_info.xpad) * xsc2 + x_advance;\n      }\n    }\n  }\n  return x - _x;\n};\n\nGlovFont.prototype.determineShader = function () {\n  let outline = this.applied_style.outline_width && this.applied_style.outline_color & 0xff;\n  let glow = this.applied_style.glow_outer > 0 && this.applied_style.glow_color & 0xff;\n  if (outline) {\n    if (glow) {\n      this.shader = font_shaders.font_aa_outline_glow;\n    } else {\n      this.shader = font_shaders.font_aa_outline;\n    }\n  } else if (glow) {\n    this.shader = font_shaders.font_aa_glow;\n  } else {\n    this.shader = font_shaders.font_aa;\n  }\n};\n\nGlovFont.prototype.applyStyle = function (style) {\n  if (!style) {\n    style = this.default_style;\n  }\n  // outline\n  vec4ColorFromIntColor(temp_color, style.outline_color);\n  techParamsSet('outlineColor', temp_color);\n\n  // glow\n  vec4ColorFromIntColor(temp_color, style.glow_color);\n  techParamsSet('glowColor', temp_color);\n\n  // everything else\n  this.applied_style.outline_width = style.outline_width;\n  this.applied_style.outline_color = style.outline_color;\n  this.applied_style.glow_xoffs = style.glow_xoffs;\n  this.applied_style.glow_yoffs = style.glow_yoffs;\n  this.applied_style.glow_inner = style.glow_inner;\n  this.applied_style.glow_outer = style.glow_outer;\n  this.applied_style.glow_color = style.glow_color;\n  this.applied_style.color = style.color;\n  this.applied_style.color_vec4 = style.color_vec4;\n  this.applied_style.colorUR = style.colorUR;\n  this.applied_style.colorLR = style.colorLR;\n  this.applied_style.colorLL = style.colorLL;\n  this.applied_style.color_mode = style.color_mode;\n\n  if (this.applied_style.color_mode === COLOR_MODE.SINGLE) {\n    this.applied_style.colorUR = this.applied_style.colorLL = this.applied_style.colorLR = this.applied_style.color;\n  }\n\n  this.determineShader();\n};\n\n// Replicate constants and utility functions on all font instances as well\nGlovFont.prototype.COLOR_MODE = COLOR_MODE;\nGlovFont.prototype.ALIGN = ALIGN;\nGlovFont.prototype.style = style;\nGlovFont.prototype.styleAlpha = styleAlpha;\nGlovFont.prototype.styleColored = styleColored;\n\nfunction fontShadersInit() {\n  if (font_shaders.font_aa) {\n    return;\n  }\n  font_shaders.font_aa = shaders.create(gl.FRAGMENT_SHADER, 'font_aa', '#pragma WebGL2\\n\\nprecision lowp float;\\n\\nvarying vec2 interp_texcoord;\\nvarying lowp vec4 interp_color;\\nvec4 _ret_0;\\nuniform sampler2D tex0;\\nuniform vec4 param0;\\nvoid main()\\n{\\n  float texture0 = texture2D(tex0,interp_texcoord).r;\\n  float res = clamp(texture0 * param0.x + param0.y, 0.0, 1.0);\\n  gl_FragColor = vec4(interp_color.rgb, interp_color.a * res);\\n}\\n');\n  font_shaders.font_aa_glow = shaders.create(gl.FRAGMENT_SHADER, 'font_aa_glow', '#pragma WebGL2\\n\\nprecision lowp float;\\n\\nvarying vec2 interp_texcoord;\\nvarying lowp vec4 interp_color;\\nvec4 _ret_0;\\nuniform sampler2D tex0;\\nuniform vec4 param0;\\nuniform vec4 glowColor;\\nuniform vec4 glowParams;\\nvoid main()\\n{\\n  float texture0=texture2D(tex0,interp_texcoord).r;\\n  // Glow\\n  vec2 glowCoord = interp_texcoord + glowParams.xy;\\n  float textureGlow = texture2D(tex0, glowCoord).r;\\n  float t = clamp(textureGlow * glowParams.z + glowParams.w, 0.0, 1.0);\\n  vec4 outcolor = vec4(glowColor.xyz, t * glowColor.w);\\n  // Main body\\n  t = clamp(texture0 * param0.x + param0.y, 0.0, 1.0);\\n  gl_FragColor = mix(outcolor, interp_color, t);\\n}\\n');\n  font_shaders.font_aa_outline = shaders.create(gl.FRAGMENT_SHADER, 'font_aa_outline', '#pragma WebGL2\\n\\nprecision lowp float;\\n\\nvarying highp vec2 interp_texcoord;\\nvarying lowp vec4 interp_color;\\nvec4 _ret_0;\\nuniform sampler2D tex0;\\nuniform vec4 param0;\\nuniform vec4 outlineColor;\\nvoid main()\\n{\\n  float texture0=texture2D(tex0,interp_texcoord).r;\\n  // Outline\\n  vec4 outcolor = vec4(outlineColor.xyz, 0);\\n  outcolor.w = clamp(texture0 * param0.x + param0.z, 0.0, 1.0);\\n  outcolor.w = outcolor.w * outlineColor.w;\\n  // outcolor = mix(outcolor, outlineColor, outcolor.w); // Makes a blackish border\\n  // Main body\\n  float t = clamp(texture0 * param0.x + param0.y, 0.0, 1.0);\\n  gl_FragColor = mix(outcolor, interp_color, t);\\n}\\n');\n  font_shaders.font_aa_outline_glow = shaders.create(gl.FRAGMENT_SHADER, 'font_aa_outline_glow', '#pragma WebGL2\\n\\nprecision lowp float;\\n\\nvarying highp vec2 interp_texcoord;\\nvarying lowp vec4 interp_color;\\nvec4 _ret_0;\\nuniform sampler2D tex0;\\nuniform vec4 param0;\\nuniform vec4 outlineColor;\\nuniform vec4 glowColor;\\nuniform vec4 glowParams;\\nvoid main()\\n{\\n  float texture0=texture2D(tex0,interp_texcoord).r;\\n  // Glow\\n  vec2 glowCoord = interp_texcoord + glowParams.xy;\\n  float textureGlow = texture2D(tex0, glowCoord).r;\\n  float t = clamp(textureGlow * glowParams.z + glowParams.w, 0.0, 1.0);\\n  vec4 outcolor = vec4(glowColor.xyz, t * glowColor.w);\\n  // vec4outclor = t * glowColor.xyz;\\n  // Outline\\n  t = clamp(texture0 * param0.x + param0.z, 0.0, 1.0);\\n  t = t * outlineColor.w;\\n  outcolor = mix(outcolor, outlineColor, t);\\n  // Main body\\n  t = clamp(texture0 * param0.x + param0.y, 0.0, 1.0);\\n  gl_FragColor = mix(outcolor, interp_color, t);\\n}\\n');\n}\n\nexport function create(...args) {\n  fontShadersInit();\n  return new GlovFont(...args);\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint no-bitwise:off */\n\nconst assert = require('assert');\nconst engine = require('./engine.js');\nconst { ceil, max, min } = Math;\n\nexport const TRIANGLES = 4;\nexport const TRIANGLE_FAN = 6;\nexport const QUADS = 7;\n\nconst gl_byte_size = {\n  0x1400: 1, // GL_BYTE\n  0x1401: 1, // GL_UNSIGNED_BYTE\n  0x1402: 2, // GL_SHORT\n  0x1403: 2, // GL_UNSIGNED_SHORT\n  0x1406: 4 // GL_FLOAT\n};\n\n// let unit_buf;\n// let unit_buf_len = 0;\n\nlet bound_geom;\n\nlet bound_array_buf = null;\nlet bound_index_buf = null;\n\nlet quad_index_buf;\nlet quad_index_buf_len = 0;\n\nfunction deleteBuffer(handle) {\n  if (!handle) {\n    return;\n  }\n  if (bound_array_buf === handle) {\n    gl.bindBuffer(gl.ARRAY_BUFFER, null);\n    bound_array_buf = null;\n  }\n  if (bound_index_buf === handle) {\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n    bound_index_buf = null;\n  }\n  gl.deleteBuffer(handle);\n}\n\nlet attrib_enabled = 0;\nfunction enableVertexAttribArray(bits) {\n  if (bits === attrib_enabled) {\n    return;\n  }\n  let disable_mask = attrib_enabled & ~bits;\n  let enable_mask = ~attrib_enabled & bits;\n  attrib_enabled = bits;\n\n  if (disable_mask) {\n    let n = 0;\n    do {\n      if (disable_mask & 1) {\n        gl.disableVertexAttribArray(n);\n      }\n      n++;\n      disable_mask >>= 1;\n    } while (disable_mask);\n  }\n\n  if (enable_mask) {\n    let n = 0;\n    do {\n      if (enable_mask & 1) {\n        gl.enableVertexAttribArray(n);\n      }\n      n++;\n      enable_mask >>= 1;\n    } while (enable_mask);\n  }\n}\n\n// function bindUnitBuf(arr_idx, len) {\n//   if (len > unit_buf_len) {\n//     deleteBuffer(unit_buf);\n//     unit_buf = gl.createBuffer();\n//     unit_buf_len = max(ceil(unit_buf_len * 1.5), len);\n//     gl.bindBuffer(gl.ARRAY_BUFFER, unit_buf);\n//     bound_array_buf = unit_buf;\n//     let arr = new Uint8Array(unit_buf_len * 4);\n//     for (let ii = 0; ii < unit_buf_len * 4; ++ii) {\n//       arr[ii] = 255;\n//     }\n//     gl.bufferData(gl.ARRAY_BUFFER, arr, gl.STATIC_DRAW);\n//   } else {\n//     if (bound_array_buf !== unit_buf) {\n//       gl.bindBuffer(gl.ARRAY_BUFFER, unit_buf);\n//       bound_array_buf = unit_buf;\n//     }\n//   }\n//   gl.vertexAttribPointer(arr_idx, 4, gl.UNSIGNED_BYTE, true, 0, 0);\n// }\n\n// Verts should be ordered counter-clockwise from the upper left\nfunction getQuadIndexBuf(quad_count) {\n  assert(quad_count <= 16384);\n  // If not, need to split into multiple vertex and index buffers (fairly easy),\n  //   or use the OES_element_index_uint extension (trivial, but probably slower, maybe not supported on mobile?)\n  if (quad_count * 6 > quad_index_buf_len) {\n    if (!quad_index_buf) {\n      quad_index_buf = gl.createBuffer();\n    } else {\n      // freeing old one\n      engine.perf_state.gpu_mem.geom -= quad_index_buf_len * 2;\n    }\n    quad_index_buf_len = max(ceil(quad_index_buf_len * 1.5), quad_count * 6);\n    if (bound_index_buf !== quad_index_buf) {\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, quad_index_buf);\n      bound_index_buf = quad_index_buf;\n    }\n    let arr = new Uint16Array(quad_index_buf_len);\n    let vidx = 0;\n    for (let ii = 0; ii < quad_index_buf_len;) {\n      arr[ii++] = vidx + 1;\n      arr[ii++] = vidx + 3;\n      arr[ii++] = vidx++; // 0\n      arr[ii++] = vidx++; // 1\n      arr[ii++] = vidx++; // 2\n      arr[ii++] = vidx++; // 3\n    }\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, arr, gl.STATIC_DRAW);\n    engine.perf_state.gpu_mem.geom += quad_index_buf_len * 2;\n  }\n  return quad_index_buf;\n}\n\nexport function createIndices(idxs) {\n  let ret = {\n    ibo: gl.createBuffer(),\n    ibo_size: idxs.length\n  };\n  gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, ret.ibo);\n  bound_index_buf = ret.ibo;\n  gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, idxs, gl.STATIC_DRAW);\n  engine.perf_state.gpu_mem.geom += idxs.length * 2;\n  return ret;\n}\n\nfunction formatInfo(format) {\n  if (!format.info) {\n    let stride = 0;\n    let elem_count = 0;\n    let used_attribs = 0;\n    let common_byte_size = 0;\n    for (let ii = 0; ii < format.length; ++ii) {\n      let fmt = format[ii];\n      let sem = fmt[0];\n      let gltype = fmt[1];\n      let count = fmt[2];\n      used_attribs |= 1 << sem;\n      let byte_size = gl_byte_size[gltype];\n      assert(byte_size);\n      assert(!common_byte_size || byte_size === common_byte_size);\n      common_byte_size = byte_size;\n      fmt[3] = fmt[3] || false;\n      fmt[4] = byte_size;\n      stride += count * byte_size;\n      elem_count += count;\n    }\n    format.info = {\n      stride, elem_count, used_attribs, common_byte_size\n    };\n  }\n  return format.info;\n}\n\n// format is [shaders.semantic.foo, gl.FLOAT/UNSIGNED_BYTE/etc, count, normalized]\nfunction Geom(format, verts, idxs, mode) {\n  this.mode = mode || TRIANGLES;\n  this.format = format;\n  let info = this.format_info = formatInfo(format);\n  this.stride = info.stride;\n  this.used_attribs = info.used_attribs;\n\n  this.vert_count = verts.length / this.format_info.elem_count;\n  this.vert_gpu_mem = verts.length * this.format_info.common_byte_size;\n  if (verts.length) {\n    this.vbo = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.vbo);\n    bound_array_buf = this.vbo;\n    gl.bufferData(gl.ARRAY_BUFFER, verts, gl.STATIC_DRAW);\n    engine.perf_state.gpu_mem.geom += this.vert_gpu_mem;\n  }\n  this.orig_mode = mode;\n  if (idxs) {\n    if (idxs.ibo) {\n      this.ibo = idxs.ibo;\n      this.ibo_owned = false;\n      this.ibo_size = idxs.ibo_size;\n    } else {\n      this.ibo = gl.createBuffer();\n      this.ibo_owned = true;\n      this.ibo_size = idxs.length;\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibo);\n      bound_index_buf = this.ibo;\n      gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, idxs, gl.STATIC_DRAW);\n      engine.perf_state.gpu_mem.geom += idxs.length * 2;\n    }\n  } else if (mode === QUADS) {\n    assert.equal(this.vert_count % 4, 0);\n    let quad_count = this.vert_count / 4;\n    // PERFTODO: Use GL_QUADS_OES extension\n    this.ibo = getQuadIndexBuf(quad_count);\n    this.ibo_owned = false;\n    this.ibo_size = quad_count * 6;\n    this.mode = TRIANGLES;\n  } else if (mode === TRIANGLE_FAN) {\n    this.mode = TRIANGLE_FAN;\n  } else {\n    this.ibo = null;\n    this.ibo_owned = false;\n  }\n}\n\nGeom.prototype.updateSub = function (offset, verts) {\n  if (bound_array_buf !== this.vbo) {\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.vbo);\n    bound_array_buf = this.vbo;\n  }\n  gl.bufferSubData(gl.ARRAY_BUFFER, offset, verts);\n};\n\nGeom.prototype.update = function (verts, num_verts) {\n  assert.equal(this.ibo_owned, false);\n  if (num_verts > this.vert_count) {\n    if (bound_geom === this) {\n      bound_geom = null;\n    }\n    engine.perf_state.gpu_mem.geom -= this.vert_gpu_mem;\n    deleteBuffer(this.vbo);\n    // Note: matching size, ignoring num_verts\n    this.vert_count = verts.length / this.format_info.elem_count;\n    this.vert_gpu_mem = verts.length * this.format_info.common_byte_size;\n    this.vbo = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, this.vbo);\n    bound_array_buf = this.vbo;\n    gl.bufferData(gl.ARRAY_BUFFER, verts, gl.DYNAMIC_DRAW);\n    engine.perf_state.gpu_mem.geom += this.vert_gpu_mem;\n  } else {\n    // Fits\n    if (bound_array_buf !== this.vbo) {\n      gl.bindBuffer(gl.ARRAY_BUFFER, this.vbo);\n      bound_array_buf = this.vbo;\n    }\n    gl.bufferSubData(gl.ARRAY_BUFFER, 0, verts.subarray(0, num_verts * this.format_info.elem_count));\n    // gl.bufferData(gl.ARRAY_BUFFER, verts, gl.DYNAMIC_DRAW);\n  }\n  if (this.orig_mode === QUADS) {\n    let quad_count = num_verts / 4;\n    this.ibo = getQuadIndexBuf(quad_count);\n    this.ibo_size = quad_count * 6;\n  }\n};\n\nGeom.prototype.dispose = function () {\n  if (this.ibo_owned) {\n    deleteBuffer(this.ibo);\n  }\n  this.ibo = null;\n  deleteBuffer(this.vbo);\n  this.vbo = null;\n  engine.perf_state.gpu_mem.geom -= this.vert_gpu_mem;\n  this.vert_gpu_mem = 0;\n};\n\nlet bound_attribs = function () {\n  let r = [];\n  for (let ii = 0; ii < 16; ++ii) {\n    r.push({\n      vbo: null,\n      offset: 0\n    });\n  }\n  return r;\n}();\nGeom.prototype.bind = function () {\n  if (bound_geom !== this) {\n    bound_geom = this;\n    let vbo = this.vbo;\n\n    let offset = 0;\n    for (let ii = 0; ii < this.format.length; ++ii) {\n      let fmt = this.format[ii];\n      let count = fmt[2];\n      let byte_size = fmt[4];\n      if (bound_attribs[ii].vbo === vbo) {//  && bound_attribs[ii].offset = offset\n        // already bound\n      } else {\n        if (bound_array_buf !== vbo) {\n          gl.bindBuffer(gl.ARRAY_BUFFER, vbo);\n          bound_array_buf = vbo;\n        }\n        let sem = fmt[0];\n        let gltype = fmt[1];\n        let normalized = fmt[3];\n        gl.vertexAttribPointer(sem, count, gltype, normalized, this.stride, offset);\n        bound_attribs[ii].vbo = bound_array_buf;\n        // bound_attribs[ii].offset = offset;\n      }\n      offset += count * byte_size;\n    }\n    // if (!used[1]) { // COLOR\n    //   used_attribs |= 1 << shader.semantics.COLOR;\n    //   bindUnitBuf(1, this.vert_count);\n    // }\n    enableVertexAttribArray(this.used_attribs);\n  }\n\n  if (this.ibo && bound_index_buf !== this.ibo) {\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.ibo);\n    bound_index_buf = this.ibo;\n  }\n};\nGeom.prototype.draw = function () {\n  this.bind();\n  if (this.ibo) {\n    gl.drawElements(this.mode, this.ibo_size, gl.UNSIGNED_SHORT, 0);\n  } else {\n    gl.drawArrays(this.mode, 0, this.vert_count);\n  }\n};\n\nfunction GeomMultiQuads(format, verts) {\n  let format_info = formatInfo(format);\n  let ec = format_info.elem_count;\n  let vert_count = verts.length / ec;\n  this.geoms = [];\n  for (let idx = 0; idx < vert_count; idx += 65536) {\n    let num_sub_verts = min(vert_count - idx, 65536);\n    let sub_data = new Uint8Array(verts.buffer, idx * ec, num_sub_verts * ec);\n    this.geoms.push(new Geom(format, sub_data, null, QUADS));\n  }\n}\nGeomMultiQuads.prototype.draw = function () {\n  for (let ii = 0; ii < this.geoms.length; ++ii) {\n    this.geoms[ii].draw();\n  }\n};\nGeomMultiQuads.prototype.dispose = function () {\n  for (let ii = 0; ii < this.geoms.length; ++ii) {\n    this.geoms[ii].dispose();\n  }\n  this.geoms = null;\n};\n\nexport function create(...args) {\n  return new Geom(...args);\n}\n\nexport function createQuads(format, verts) {\n  let format_info = formatInfo(format);\n  assert(verts instanceof Uint8Array); // only one handled by GeomMultiQuads for now\n  let vert_count = verts.length / format_info.elem_count;\n  if (vert_count > 65536) {\n    return new GeomMultiQuads(format, verts);\n  }\n  return new Geom(format, verts, null, QUADS);\n}\n\nexport function startup() {\n  // Nothing for now.\n}","/* eslint no-bitwise:off */\n// From https://stackoverflow.com/questions/8936984/uint8array-to-string-in-javascript\n\nlet charCache = new Array(128); // Preallocate the cache for the common single byte chars\nlet charFromCodePt = String.fromCodePoint || String.fromCharCode;\nlet result = [];\nexport function decode(array) {\n  let codePt;\n  let byte1;\n  let buffLen = array.length;\n\n  result.length = 0;\n\n  for (let i = 0; i < buffLen;) {\n    byte1 = array[i++];\n\n    if (byte1 <= 0x7F) {\n      codePt = byte1;\n    } else if (byte1 <= 0xDF) {\n      codePt = (byte1 & 0x1F) << 6 | array[i++] & 0x3F;\n    } else if (byte1 <= 0xEF) {\n      codePt = (byte1 & 0x0F) << 12 | (array[i++] & 0x3F) << 6 | array[i++] & 0x3F;\n    } else if (String.fromCodePoint) {\n      codePt = (byte1 & 0x07) << 18 | (array[i++] & 0x3F) << 12 | (array[i++] & 0x3F) << 6 | array[i++] & 0x3F;\n    } else {\n      codePt = 63; // Cannot convert four byte code points, so use \"?\" instead\n      i += 3;\n    }\n\n    result.push(charCache[codePt] || (charCache[codePt] = charFromCodePt(codePt)));\n  }\n\n  return result.join('');\n}","// Derived from (MIT Licensed) https://github.com/uber-web/loaders.gl/tree/master/modules/gltf\n\nconst TYPES = ['SCALAR', 'VEC2', 'VEC3', 'VEC4'];\n\nexport function getAccessorTypeFromSize(size) {\n  const type = TYPES[size - 1];\n  return type || TYPES[0];\n}\n\n// glTF ACCESSOR CONSTANTS\n\nexport const ATTRIBUTE_TYPE_TO_COMPONENTS = {\n  SCALAR: 1,\n  VEC2: 2,\n  VEC3: 3,\n  VEC4: 4,\n  MAT2: 4,\n  MAT3: 9,\n  MAT4: 16\n};\n\nexport const ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE = {\n  5120: 1,\n  5121: 1,\n  5122: 2,\n  5123: 2,\n  5125: 4,\n  5126: 4\n};\n\nexport const ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY = {\n  5120: Int8Array,\n  5121: Uint8Array,\n  5122: Int16Array,\n  5123: Uint16Array,\n  5125: Uint32Array,\n  5126: Float32Array\n};","// Derived from (MIT Licensed) https://github.com/uber-web/loaders.gl/tree/master/modules/gltf\n/* eslint-env browser */\n\nconst assert = require('assert');\n\n/* eslint-disable camelcase, max-statements */\nconst { unpackGLBBuffers } = require('./unpack-glb-buffers.js');\nconst { unpackBinaryJson } = require('./unpack-binary-json.js');\n\nfunction padTo4Bytes(byteLength) {\n  return byteLength + 3 & ~3; //eslint-disable-line no-bitwise\n}\n\nconst decode_utf8 = require('./decode-utf8.js');\n\nconst {\n  ATTRIBUTE_TYPE_TO_COMPONENTS,\n  ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE,\n  ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY\n} = require('./gltf-type-utils.js');\n\nconst MAGIC_glTF = 0x676c5446; // glTF in Big-Endian ASCII\n\nconst GLB_FILE_HEADER_SIZE = 12;\nconst GLB_CHUNK_HEADER_SIZE = 8;\n\nconst GLB_CHUNK_TYPE_JSON = 0x4e4f534a;\nconst GLB_CHUNK_TYPE_BIN = 0x004e4942;\n\nconst LE = true; // Binary GLTF is little endian.\nconst BE = false; // Magic needs to be written as BE\n\n// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#glb-file-format-specification\nfunction GLBParser() {\n  // Result\n  this.binaryByteOffset = null;\n  this.packedJson = null;\n  this.json = null;\n}\n\nfunction parseBinary(self) {\n  // GLB Header\n  const dataView = new DataView(self.glbArrayBuffer);\n  const magic1 = dataView.getUint32(0, BE); // Magic number (the ASCII string 'glTF').\n  const version = dataView.getUint32(4, LE); // Version 2 of binary glTF container format\n  const fileLength = dataView.getUint32(8, LE); // Total byte length of generated file\n\n  let valid = magic1 === MAGIC_glTF;\n  if (!valid) {\n    console.warn('Invalid GLB magic string');\n  }\n\n  assert(version === 2, `Invalid GLB version ${version}. Only .glb v2 supported`);\n  assert(fileLength > 20);\n\n  // Write the JSON chunk\n  const jsonChunkLength = dataView.getUint32(12, LE); // Byte length of json chunk\n  const jsonChunkFormat = dataView.getUint32(16, LE); // Chunk format as uint32\n\n  valid = jsonChunkFormat === GLB_CHUNK_TYPE_JSON || jsonChunkFormat === 0; // Back compat\n  assert(valid, `JSON chunk format ${jsonChunkFormat}`);\n\n  // Create a \"view\" of the binary encoded JSON data\n  const jsonChunkOffset = GLB_FILE_HEADER_SIZE + GLB_CHUNK_HEADER_SIZE; // First headers: 20 bytes\n  const jsonChunk = new Uint8Array(self.glbArrayBuffer, jsonChunkOffset, jsonChunkLength);\n\n  // Decode the JSON binary array into clear text\n  const jsonText = decode_utf8.decode(jsonChunk);\n\n  // Parse the JSON text into a JavaScript data structure\n  self.json = JSON.parse(jsonText);\n\n  // TODO - BIN chunk can be optional\n  const binaryChunkStart = jsonChunkOffset + padTo4Bytes(jsonChunkLength);\n  self.binaryByteOffset = binaryChunkStart + GLB_CHUNK_HEADER_SIZE;\n\n  const binChunkFormat = dataView.getUint32(binaryChunkStart + 4, LE); // Chunk format as uint32\n  valid = binChunkFormat === GLB_CHUNK_TYPE_BIN || binChunkFormat === 1; // Back compat\n  assert(valid, `BIN chunk format ${binChunkFormat}`);\n\n  return {\n    arrayBuffer: self.glbArrayBuffer,\n    binaryByteOffset: self.binaryByteOffset,\n    json: self.json\n  };\n}\n\nfunction parseInternal(self) {\n  const result = parseBinary(self);\n  self.packedJson = result.json;\n  self.unpackedBuffers = unpackGLBBuffers(self.glbArrayBuffer, self.json, self.binaryByteOffset);\n  self.json = unpackBinaryJson(self.json, self.unpackedBuffers);\n}\n\nGLBParser.prototype.parseSync = function (arrayBuffer) {\n  // Input\n  this.glbArrayBuffer = arrayBuffer;\n\n  // Only parse once\n  if (this.json === null && this.binaryByteOffset === null) {\n    parseInternal(this);\n  }\n  return this;\n};\n\n// Return the gltf JSON and the original arrayBuffer\nGLBParser.prototype.parse = function (arrayBuffer) {\n  return this.parseSync(arrayBuffer);\n};\n\n// Returns application JSON data stored in `key`\nGLBParser.prototype.getApplicationData = function (key) {\n  return this.json[key];\n};\n\n// Returns JSON envelope\nGLBParser.prototype.getJSON = function () {\n  return this.json;\n};\n\n// Return binary chunk\nGLBParser.prototype.getArrayBuffer = function () {\n  return this.glbArrayBuffer;\n};\n\n// Return index into binary chunk\nGLBParser.prototype.getBinaryByteOffset = function () {\n  return this.binaryByteOffset;\n};\n\n// Unpacks a bufferview into a new Uint8Array that is a view into the binary chunk\nGLBParser.prototype.getBufferView = function (glTFBufferView) {\n  const byteOffset = (glTFBufferView.byteOffset || 0) + this.binaryByteOffset;\n  return new Uint8Array(this.glbArrayBuffer, byteOffset, glTFBufferView.byteLength);\n};\n\n// Unpacks a glTF accessor into a new typed array that is a view into the binary chunk\nGLBParser.prototype.getBuffer = function (glTFAccessor) {\n  // Decode the glTF accessor format\n  const ArrayType = ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY[glTFAccessor.componentType];\n  const components = ATTRIBUTE_TYPE_TO_COMPONENTS[glTFAccessor.type];\n  const bytesPerComponent = ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE[glTFAccessor.componentType];\n  const length = glTFAccessor.count * components;\n  const byteLength = glTFAccessor.count * components * bytesPerComponent;\n\n  // Get the boundaries of the binary sub-chunk for this bufferView\n  const glTFBufferView = this.json.bufferViews[glTFAccessor.bufferView];\n  assert(byteLength >= 0 && glTFAccessor.byteOffset + byteLength <= glTFBufferView.byteLength);\n\n  const byteOffset = glTFBufferView.byteOffset + this.binaryByteOffset + glTFAccessor.byteOffset;\n  return new ArrayType(this.glbArrayBuffer, byteOffset, length);\n};\n\n// Unpacks an image into an HTML image\nGLBParser.prototype.getImageData = function (glTFImage) {\n  return {\n    typedArray: this.getBufferView(glTFImage.bufferView),\n    mimeType: glTFImage.mimeType || 'image/jpeg'\n  };\n};\n\nGLBParser.prototype.getImage = function (glTFImage) {\n  const arrayBufferView = this.getBufferView(glTFImage.bufferView);\n  const mimeType = glTFImage.mimeType || 'image/jpeg';\n  const blob = new Blob([arrayBufferView], { type: mimeType });\n  const urlCreator = window.URL || window.webkitURL;\n  const imageUrl = urlCreator.createObjectURL(blob);\n  const img = new Image();\n  img.src = imageUrl;\n  return img;\n};\n\n// GLBParser.prototype.getImageAsync = function (glTFImage) {\n//   return new Promise(resolve => {\n//     const arrayBufferView = this.getBufferView(glTFImage.bufferView);\n//     const mimeType = glTFImage.mimeType || 'image/jpeg';\n//     const blob = new Blob([arrayBufferView], {type: mimeType});\n//     const urlCreator = window.URL || window.webkitURL;\n//     const imageUrl = urlCreator.createObjectURL(blob);\n//     const img = new Image();\n//     img.onload = () => resolve(img);\n//     img.src = imageUrl;\n//   });\n// };\n\nmodule.exports = GLBParser;\nGLBParser.parse = function (data) {\n  let parser = new GLBParser();\n  return parser.parse(data);\n};","// Derived from (MIT Licensed) https://github.com/uber-web/loaders.gl/tree/master/modules/gltf\n\nfunction parseJSONPointer(value) {\n  if (typeof value === 'string') {\n    // Remove escape character\n    if (value.indexOf('##/') === 0) {\n      return value.slice(1);\n    }\n\n    let matches = value.match(/#\\/([a-z]+)\\/([0-9]+)/);\n    if (matches) {\n      const index = parseInt(matches[2], 10);\n      return [matches[1], index];\n    }\n\n    // Legacy: `$$$i`\n    matches = value.match(/\\$\\$\\$([0-9]+)/);\n    if (matches) {\n      const index = parseInt(matches[1], 10);\n      return ['accessors', index];\n    }\n  }\n\n  return null;\n}\n\nfunction decodeJSONPointer(object, buffers) {\n  const pointer = parseJSONPointer(object);\n  if (pointer) {\n    const field = pointer[0];\n    const index = pointer[1];\n    const buffer = buffers[field] && buffers[field][index];\n    if (buffer) {\n      return buffer;\n    }\n    console.error(`Invalid JSON pointer ${object}: #/${field}/${index}`);\n  }\n  return null;\n}\n\n// Recursively unpacks objects, replacing \"JSON pointers\" with typed arrays\nfunction unpackJsonArraysRecursive(json, topJson, buffers, options = {}) {\n  const object = json;\n\n  const buffer = decodeJSONPointer(object, buffers);\n  if (buffer) {\n    return buffer;\n  }\n\n  // Copy array\n  if (Array.isArray(object)) {\n    return object.map(element => unpackJsonArraysRecursive(element, topJson, buffers, options));\n  }\n\n  // Copy object\n  if (object !== null && typeof object === 'object') {\n    const newObject = {};\n    for (const key in object) {\n      newObject[key] = unpackJsonArraysRecursive(object[key], topJson, buffers, options);\n    }\n    return newObject;\n  }\n\n  return object;\n}\n\nexport function unpackBinaryJson(json, buffers, options = {}) {\n  return unpackJsonArraysRecursive(json, json, buffers, options);\n}","// Derived from (MIT Licensed) https://github.com/uber-web/loaders.gl/tree/master/modules/gltf\n\nconst assert = require('assert');\n\nconst {\n  ATTRIBUTE_TYPE_TO_COMPONENTS,\n  ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE,\n  ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY\n} = require('./gltf-type-utils.js');\n\n// Creates a new ArrayBuffer starting at the offset, containing all remaining bytes\n// TODO - should not be needed, see above\nfunction getArrayBufferAtOffset(arrayBuffer, byteOffset) {\n  const length = arrayBuffer.byteLength - byteOffset;\n  const binaryBuffer = new ArrayBuffer(length);\n  const sourceArray = new Uint8Array(arrayBuffer);\n  const binaryArray = new Uint8Array(binaryBuffer);\n  for (let i = 0; i < length; i++) {\n    binaryArray[i] = sourceArray[byteOffset + i];\n  }\n  return binaryBuffer;\n}\n\nfunction getArrayTypeAndLength(accessor, bufferView) {\n  const ArrayType = ATTRIBUTE_COMPONENT_TYPE_TO_ARRAY[accessor.componentType];\n  const components = ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type];\n  const bytesPerComponent = ATTRIBUTE_COMPONENT_TYPE_TO_BYTE_SIZE[accessor.componentType];\n  const length = accessor.count * components;\n  const byteLength = accessor.count * components * bytesPerComponent;\n  assert(byteLength >= 0 && byteLength <= bufferView.byteLength);\n  return { ArrayType, length, byteLength };\n}\n\nfunction unpackAccessors(arrayBuffer, bufferViews, json) {\n  // unpack accessors\n  const accessors = json.accessors || [];\n\n  const accessorBuffers = [];\n\n  for (let i = 0; i < accessors.length; ++i) {\n    const accessor = accessors[i];\n    assert(accessor);\n\n    const bufferView = bufferViews[accessor.bufferView];\n    // Draco encoded meshes don't have bufferView in accessor\n    if (bufferView) {\n      // Create a new typed array as a view into the combined buffer\n      const { ArrayType, length } = getArrayTypeAndLength(accessor, bufferView);\n      const array = new ArrayType(arrayBuffer, bufferView.byteOffset, length);\n      // Store the metadata on the array (e.g. needed to determine number of components per element)\n      array.accessor = accessor;\n      accessorBuffers.push(array);\n    }\n  }\n\n  return accessorBuffers;\n}\n\nfunction unpackImages(arrayBuffer, bufferViews, json) {\n  // unpack images\n  const images = json.images || [];\n\n  const imageBuffers = [];\n\n  for (let i = 0; i < images.length; ++i) {\n    const image = images[i];\n    assert(image);\n\n    if (image.bufferView === undefined) {\n      imageBuffers.push(null);\n      continue;\n    }\n\n    const bufferView = bufferViews[image.bufferView];\n    assert(bufferView);\n\n    // Create a new typed array as a view into the combined buffer\n    const array = new Uint8Array(arrayBuffer, bufferView.byteOffset, bufferView.byteLength);\n    // Store the metadata on the array (e.g. needed to determine number of components per element)\n    array.imate = image;\n    imageBuffers.push(array);\n  }\n\n  return imageBuffers;\n}\n\nexport function unpackGLBBuffers(arrayBuffer, json, binaryByteOffset) {\n  // TODO - really inefficient, should just use the offset into the original array buffer\n  if (binaryByteOffset) {\n    arrayBuffer = getArrayBufferAtOffset(arrayBuffer, binaryByteOffset);\n  }\n\n  const bufferViews = json.bufferViews || [];\n\n  for (let i = 0; i < bufferViews.length; ++i) {\n    const bufferView = bufferViews[i];\n    assert(bufferView.byteLength >= 0);\n  }\n\n  return {\n    // TODO: delete unpackAccessors and use buffer views only?\n    accessors: unpackAccessors(arrayBuffer, bufferViews, json),\n    images: unpackImages(arrayBuffer, bufferViews, json)\n  };\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\n// System for registering callbacks to run in event handlers on the next frame\n// Used to get around restrictions on APIs like pointer lock, fullscreen, or\n// screen orientation.\n\nconst assert = require('assert');\n\nlet cbs = {};\nexport function topOfFrame() {\n  cbs = {};\n}\n\nexport function on(type, code_or_pos, cb) {\n  let list = cbs[type] = cbs[type] || [];\n  if (typeof code_or_pos === 'number') {\n    list[code_or_pos] = cb;\n  } else {\n    list.push([code_or_pos, cb]);\n  }\n}\n\nexport function handle(type, event) {\n  let list = cbs[type];\n  if (!list) {\n    return;\n  }\n  switch (type) {\n    case 'keydown':\n    case 'keyup':\n      if (list[event.keyCode]) {\n        list[event.keyCode](type, event);\n      }\n      break;\n    case 'mouseup':\n    case 'mousedown':\n      {\n        let x = event.pageX;\n        let y = event.pageY;\n        let button = event.button;\n        for (let ii = 0; ii < list.length; ++ii) {\n          let elem = list[ii];\n          let pos = elem[0];\n          if (x >= pos.x && x < pos.x + pos.w && y >= pos.y && y < pos.y + pos.h && (pos.button < 0 || pos.button === button)) {\n            elem[1](type, event);\n            break;\n          }\n        }\n      }break;\n    default:\n      assert(false);\n  }\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n// Some code from Turbulenz: Copyright (c) 2012-2013 Turbulenz Limited\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* global navigator */\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst { cmd_parse } = require('./cmds.js');\nconst engine = require('./engine.js');\nconst in_event = require('./in_event.js');\nconst local_storage = require('./local_storage.js');\nconst { abs, min, sqrt } = Math;\nconst pointer_lock = require('./pointer_lock.js');\nconst { soundResume } = require('./sound.js');\nconst { vec2, v2add, v2copy, v2lengthSq, v2set, v2scale, v2sub } = require('./vmath.js');\n\nconst UP_EDGE = 0; // only for pads, which use === null as \"up\"\nconst UP = 0; // only for key/mouse\nconst DOWN = 1;\nconst DOWN_EDGE = 2; // only for pads\n\n// per-app overrideable options\nconst TOUCH_AS_MOUSE = true;\nlet map_analog_to_dpad = true;\n\nlet mouse_log = false;\n\nexport const ANY = -2;\nexport const POINTERLOCK = -1;\n\nexport let KEYS = {\n  BACKSPACE: 8,\n  TAB: 9,\n  ENTER: 13,\n  RETURN: 13,\n  SHIFT: 16,\n  CTRL: 17,\n  ALT: 18,\n  ESC: 27,\n  SPACE: 32,\n  PAGEUP: 33,\n  PAGEDOWN: 34,\n  END: 35,\n  HOME: 36,\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40,\n  INS: 45,\n  DEL: 46,\n  NUMPAD_DIVIDE: 111,\n  EQUALS: 187,\n  MINUS: 189,\n  SLASH: 191,\n  TILDE: 192\n};\n(function () {\n  for (let ii = 1; ii <= 12; ++ii) {\n    KEYS[`F${ii}`] = 111 + ii;\n  }\n  for (let ii = 48; ii <= 90; ++ii) {\n    // 0-9;A-Z\n    KEYS[String.fromCharCode(ii)] = ii;\n  }\n})();\nif (typeof Proxy === 'function') {\n  // Catch referencing keys that are not in our map\n  KEYS = new Proxy(KEYS, {\n    get: function (target, prop) {\n      let ret = target[prop];\n      assert(ret);\n      return ret;\n    }\n  });\n}\nexport const PAD = {\n  A: 0,\n  SELECT: 0, // GLOV name\n  B: 1,\n  CANCEL: 1, // GLOV name\n  X: 2,\n  Y: 3,\n  LB: 4,\n  LEFT_BUMPER: 4,\n  RB: 5,\n  RIGHT_BUMPER: 5,\n  LT: 6,\n  LEFT_TRIGGER: 6,\n  RT: 7,\n  RIGHT_TRIGGER: 7,\n  BACK: 8,\n  START: 9,\n  LEFT_STICK: 10,\n  RIGHT_STICK: 11,\n  UP: 12,\n  DOWN: 13,\n  LEFT: 14,\n  RIGHT: 15,\n  ANALOG_UP: 20,\n  ANALOG_LEFT: 21,\n  ANALOG_DOWN: 22,\n  ANALOG_RIGHT: 23\n};\n\nlet pad_to_touch;\n\nlet canvas;\nlet key_state_new = {};\nlet pad_states = []; // One map per gamepad to pad button states\nlet gamepad_data = []; // Other tracking data per gamepad\nlet mouse_pos = vec2(); // in DOM coordinates, not canvas or virtual\nlet last_mouse_pos = vec2();\nlet mouse_pos_is_touch = false;\nlet mouse_over_captured = false;\nlet mouse_down = [];\nlet mouse_wheel = 0;\nlet movement_questionable_frames = 0;\nconst MOVEMENT_QUESTIONABLE_FRAMES = 2; // Need at least 2\n\nlet input_eaten_kb = false;\nlet input_eaten_mouse = false;\n\nlet touches = {}; // `m${button}` or touch_id -> TouchData\n\nexport let touch_mode = local_storage.getJSON('touch_mode', false);\nexport let pad_mode = local_storage.getJSON('pad_mode', false);\n\ncmd_parse.registerValue('mouse_log', {\n  type: cmd_parse.TYPE_INT,\n  range: [0, 1],\n  get: () => mouse_log,\n  set: v => mouse_log = v\n});\n\nfunction eventTimestamp(event) {\n  if (event && event.timeStamp) {\n    // assert((event.timeStamp < 1e12) === (engine.hrtime < 1e12));\n    // Must both be high res times, or both not!\n    if (event.timeStamp < 1e12 !== engine.hrtime < 1e12) {\n      return engine.hrtime;\n    }\n    return event.timeStamp;\n  }\n  return engine.hrtime;\n}\n\nfunction TouchData(pos, touch, button, event) {\n  this.delta = vec2();\n  this.total = 0;\n  this.cur_pos = pos.slice(0);\n  this.start_pos = pos.slice(0);\n  this.touch = touch;\n  this.button = button;\n  this.start_time = Date.now();\n  this.dispatched = false;\n  this.dispatched_drag_over = false;\n  this.up_edge = 0;\n  this.down_edge = 0;\n  this.state = DOWN;\n  this.down_time = 0;\n  this.origin_time = eventTimestamp(event);\n}\nTouchData.prototype.down = function (event, is_edge) {\n  if (is_edge) {\n    this.down_edge++;\n  }\n  this.state = DOWN;\n  this.origin_time = eventTimestamp(event);\n};\n\nfunction KeyData() {\n  this.down_edge = 0;\n  // this.down_start = 0;\n  this.origin_time = 0;\n  this.down_time = 0;\n  this.up_edge = 0;\n  this.state = UP;\n}\nKeyData.prototype.keyUp = function (event) {\n  ++this.up_edge;\n  this.down_time += eventTimestamp(event) - this.origin_time;\n  this.state = UP;\n};\n\nfunction setMouseToMid() {\n  v2set(mouse_pos, engine.width * 0.5 / camera2d.domToCanvasRatio(), engine.height * 0.5 / camera2d.domToCanvasRatio());\n}\n\nexport function pointerLocked() {\n  return pointer_lock.isLocked();\n}\nlet pointerlock_touch_id = `m${POINTERLOCK}`;\n// only works reliably when called from an event handler\nexport function pointerLockEnter(when) {\n  pointer_lock.enter(when);\n}\nfunction onPointerLockEnter() {\n  if (touch_mode) {\n    return;\n  }\n  let touch_data = touches[pointerlock_touch_id];\n  setMouseToMid();\n  if (touch_data) {\n    v2copy(touch_data.start_pos, mouse_pos);\n    touch_data.state = DOWN;\n    touch_data.origin_time = engine.hrtime;\n  } else {\n    touch_data = touches[pointerlock_touch_id] = new TouchData(mouse_pos, false, POINTERLOCK, null);\n  }\n  movement_questionable_frames = MOVEMENT_QUESTIONABLE_FRAMES;\n}\nexport function pointerLockExit() {\n  let touch_data = touches[pointerlock_touch_id];\n  if (touch_data) {\n    v2copy(touch_data.cur_pos, mouse_pos);\n    // no UP_EDGE for this\n    touch_data.state = UP;\n  }\n  pointer_lock.exit();\n  movement_questionable_frames = MOVEMENT_QUESTIONABLE_FRAMES;\n}\n\nlet last_event;\nconst skip = { isTrusted: 1, sourceCapabilities: 1, path: 1, currentTarget: 1, view: 1 };\nfunction eventlog(event) {\n  if (event === last_event) {\n    return;\n  }\n  last_event = event;\n  let pairs = [];\n  for (let k in event) {\n    let v = event[k];\n    if (!v || typeof v === 'function' || k.toUpperCase() === k || skip[k]) {\n      continue;\n    }\n    pairs.push(`${k}:${v.id || v}`);\n  }\n  console.log(`${engine.global_frame_index} ${event.type} ${pointerLocked() ? 'ptrlck' : 'unlckd'} ${pairs.join(',')}`);\n}\n\nfunction letEventThrough(event) {\n  return event.target.tagName === 'INPUT' || String(event.target.className).indexOf('noglov') !== -1;\n}\n\nfunction ignored(event) {\n  // eventlog(event);\n  if (!letEventThrough(event)) {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n}\n\nlet unload_protected = false;\nfunction stopCtrlW(e) {\n  // Cancel the event\n  e.preventDefault();\n  // Chrome requires returnValue to be set\n  e.returnValue = 'Are you sure you want to quit?';\n}\nfunction protectUnload(enable) {\n  if (enable && !unload_protected) {\n    console.log('Adding handler');\n    window.addEventListener('beforeunload', stopCtrlW, false);\n    unload_protected = true;\n  } else if (!enable && unload_protected) {\n    console.log('Removing handler');\n    window.removeEventListener('beforeunload', stopCtrlW, false);\n    unload_protected = false;\n  }\n}\n\nfunction onKeyUp(event) {\n  protectUnload(event.ctrlKey);\n  let code = event.keyCode;\n  if (!letEventThrough(event)) {\n    event.stopPropagation();\n    event.preventDefault();\n  }\n\n  if (code === KEYS.ESC && pointerLocked()) {\n    pointerLockExit();\n  }\n  // Letting through to our code regardless of no_stop, because we handle things like ESC in INPUT elements\n\n  let ks = key_state_new[code];\n  if (ks && ks.state === DOWN) {\n    ks.keyUp(event);\n  }\n\n  in_event.handle('keyup', event);\n}\n\nfunction onKeyDown(event) {\n  protectUnload(event.ctrlKey);\n  let code = event.keyCode;\n  let no_stop = letEventThrough(event) || code >= KEYS.F5 && code <= KEYS.F12 || // Chrome debug hotkeys\n  code === KEYS.I && (event.altKey && event.metaKey || event.ctrlKey && event.shiftKey); // Safari, alternate Chrome\n  if (!no_stop) {\n    event.stopPropagation();\n    event.preventDefault();\n  }\n  // console.log(`${event.code} ${event.keyCode}`);\n  soundResume();\n\n  // Letting through to our code regardless of no_stop, because we handle things like ESC in INPUT elements\n  let ks = key_state_new[code];\n  if (!ks) {\n    ks = key_state_new[code] = new KeyData();\n  }\n  if (ks.state !== DOWN) {\n    // not a repeat event\n    ++ks.down_edge;\n    ks.state = DOWN;\n    ks.origin_time = eventTimestamp(event);\n    // ks.down_start = ks.origin_time;\n\n    in_event.handle('keydown', event);\n  }\n}\n\nlet mouse_moved = false;\nlet temp_delta = vec2();\nlet last_abs_move = 0;\nlet last_abs_move_time = 0;\nfunction onMouseMove(event, no_stop) {\n  /// eventlog(event);\n  // Don't block mouse button 3, that's the Back button\n  if (!letEventThrough(event) && !no_stop && event.button !== 3) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (touch_mode) {\n      local_storage.setJSON('touch_mode', false);\n      touch_mode = false;\n    }\n    if (pad_mode) {\n      local_storage.setJSON('pad_mode', false);\n      pad_mode = false;\n    }\n  }\n  mouse_moved = true;\n  // offsetX/layerX return position relative to text-entry boxes, not good!\n  // clientX/clientY do not handle weird scrolling that happens on iOS, but\n  //   should not affect mouse events (but maybe on Safari desktop?)\n  mouse_pos[0] = event.pageX;\n  mouse_pos[1] = event.pageY;\n  // if (event.offsetX !== undefined) {\n  //   mouse_pos[0] = event.offsetX;\n  //   mouse_pos[1] = event.offsetY;\n  // } else {\n  //   mouse_pos[0] = event.layerX;\n  //   mouse_pos[1] = event.layerY;\n  // }\n  mouse_pos_is_touch = false;\n\n  let any_movement = false;\n  if (pointerLocked()) {\n    setMouseToMid();\n    if (event.movementX || event.movementY) {\n      // Smooth out (ignore) large jumps in movement\n      // This is, I believe, just a bug with Chromium on Windows, as it repositions the hidden mouse cursor\n      let ts = event.timeStamp || Date.now();\n      let abs_move = abs(event.movementX) + abs(event.movementY);\n      if (abs_move > 200 && (abs_move > 3 * last_abs_move || ts - last_abs_move_time > 1000)) {\n        console.log(`Ignoring mousemove with sudden large delta: ${event.movementX},${event.movementY}`);\n      } else {\n        v2set(temp_delta, event.movementX || 0, event.movementY || 0);\n        any_movement = true;\n      }\n      last_abs_move = abs_move;\n      last_abs_move_time = ts;\n    }\n  } else {\n    v2sub(temp_delta, mouse_pos, last_mouse_pos);\n    if (temp_delta[0] || temp_delta[1]) {\n      any_movement = true;\n    }\n    v2copy(last_mouse_pos, mouse_pos);\n  }\n  if (any_movement && movement_questionable_frames && v2lengthSq(temp_delta) > 100 * 100) {\n    // giant movement right after entering or exiting pointer lock, ignore (Chrome bug)\n    // We get these unreasonable jumps in both movementXY and the other, presumably\n    // because pointerLocked() is slightly out of sync, though the large .movementX/Y\n    // is clearly erroneous.\n    any_movement = false;\n  }\n  if (any_movement) {\n    for (let button = POINTERLOCK; button < mouse_down.length; ++button) {\n      if (mouse_down[button] || button === POINTERLOCK && pointerLocked()) {\n        let touch_data = touches[`m${button}`];\n        if (touch_data) {\n          v2add(touch_data.delta, touch_data.delta, temp_delta);\n          touch_data.total += abs(temp_delta[0]) + abs(temp_delta[1]);\n          v2copy(touch_data.cur_pos, mouse_pos);\n        }\n      }\n    }\n  }\n}\n\nfunction onMouseDown(event) {\n  if (mouse_log) {\n    eventlog(event);\n  }\n  onMouseMove(event); // update mouse_pos\n  soundResume();\n  let no_click = letEventThrough(event);\n\n  let button = event.button;\n  mouse_down[button] = mouse_pos.slice(0);\n  let touch_id = `m${button}`;\n  if (touches[touch_id]) {\n    v2copy(touches[touch_id].start_pos, mouse_pos);\n  } else {\n    touches[touch_id] = new TouchData(mouse_pos, false, button, event);\n  }\n  touches[touch_id].down(event, !no_click);\n  if (!no_click) {\n    in_event.handle('mousedown', event);\n  }\n}\n\nfunction onMouseUp(event) {\n  if (mouse_log) {\n    eventlog(event);\n  }\n  onMouseMove(event); // update mouse_pos\n  let no_click = letEventThrough(event);\n  let button = event.button;\n  if (mouse_down[button]) {\n    let touch_id = `m${button}`;\n    let touch_data = touches[touch_id];\n    if (touch_data) {\n      v2copy(touch_data.cur_pos, mouse_pos);\n      if (!no_click) {\n        touch_data.up_edge++;\n      }\n      touch_data.state = UP;\n      touch_data.down_time += eventTimestamp(event) - touch_data.origin_time;\n    }\n    delete mouse_down[button];\n  }\n  if (!no_click) {\n    in_event.handle('mouseup', event);\n  }\n}\n\nfunction onWheel(event) {\n  onMouseMove(event, true);\n  let delta = -event.deltaY || event.wheelDelta || -event.detail;\n  if (delta > 0) {\n    mouse_wheel++;\n  } else if (delta < 0) {\n    mouse_wheel--;\n  }\n}\n\nlet touch_pos = vec2();\nlet released_touch_id = 0;\nfunction onTouchChange(event) {\n  // eventlog(event);\n  // Using .pageX/Y here because on iOS when a text entry is selected, it scrolls\n  // our canvas offscreen.  Should maybe have the canvas resize and use clientX\n  // instead, but this works well enough.\n  soundResume();\n  if (!touch_mode) {\n    local_storage.set('touch_mode', true);\n    touch_mode = true;\n  }\n  if (pad_mode) {\n    local_storage.set('pad_mode', true);\n    pad_mode = true;\n  }\n  if (event.cancelable !== false) {\n    event.preventDefault();\n  }\n  let ct = event.touches;\n  let seen = {};\n\n  let new_count = ct.length;\n  let old_count = new_count;\n  // Look for press and movement\n  for (let ii = 0; ii < new_count; ++ii) {\n    let touch = ct[ii];\n    let last_touch = touches[touch.identifier];\n    v2set(touch_pos, touch.pageX, touch.pageY);\n    if (!last_touch) {\n      last_touch = touches[touch.identifier] = new TouchData(touch_pos, true, 0, event);\n      last_touch.down(event, true);\n      --old_count;\n      in_event.handle('mousedown', touch);\n    } else {\n      v2sub(temp_delta, touch_pos, last_touch.cur_pos);\n      v2add(last_touch.delta, last_touch.delta, temp_delta);\n      last_touch.total += abs(temp_delta[0]) + abs(temp_delta[1]);\n      v2copy(last_touch.cur_pos, touch_pos);\n    }\n\n    seen[touch.identifier] = true;\n    if (TOUCH_AS_MOUSE && new_count === 1) {\n      // Single touch, treat as mouse movement\n      v2copy(mouse_pos, touch_pos);\n      mouse_pos_is_touch = true;\n    }\n  }\n  // Look for release, if releasing exactly one final touch\n  let released_touch;\n  let released_ids = [];\n  for (let id in touches) {\n    if (!seen[id]) {\n      let touch = touches[id];\n      if (touch.touch && touch.state === DOWN) {\n        ++old_count;\n        released_touch = touch;\n        released_ids.push(id);\n        in_event.handle('mouseup', { pageX: touch.cur_pos[0], pageY: touch.cur_pos[1] });\n        touch.up_edge++;\n        touch.state = UP;\n        touch.down_time += eventTimestamp(event) - touch.origin_time;\n        touch.release = true;\n      }\n    }\n  }\n  for (let ii = 0; ii < released_ids.length; ++ii) {\n    let id = released_ids[ii];\n    let touch = touches[id];\n    // get new id, not overlapping with touch.identifier values,\n    // so that if we get a new touch event before the next tick, we still see the release, etc\n    let new_id = `r${++released_touch_id}`;\n    delete touches[id];\n    touches[new_id] = touch;\n  }\n  if (TOUCH_AS_MOUSE) {\n    if (old_count === 1 && new_count === 0) {\n      delete mouse_down[0];\n      v2copy(mouse_pos, released_touch.cur_pos);\n      mouse_pos_is_touch = true;\n    } else if (new_count === 1) {\n      let touch = ct[0];\n      if (!old_count) {\n        mouse_down[0] = vec2(touch.pageX, touch.pageY);\n      }\n      v2set(mouse_pos, touch.pageX, touch.pageY);\n      mouse_pos_is_touch = true;\n    } else if (new_count > 1) {\n      // multiple touches, release mouse_down without emitting click\n      delete mouse_down[0];\n    }\n  }\n}\n\nfunction onBlurOrFocus(evt) {\n  protectUnload(false);\n  for (let code in key_state_new) {\n    let ks = key_state_new[code];\n    if (ks.state === DOWN) {\n      ks.keyUp(evt);\n    }\n  }\n}\n\nlet ANALOG_MAP = {};\nfunction genAnalogMap() {\n  if (map_analog_to_dpad) {\n    ANALOG_MAP[PAD.LEFT] = PAD.ANALOG_LEFT;\n    ANALOG_MAP[PAD.RIGHT] = PAD.ANALOG_RIGHT;\n    ANALOG_MAP[PAD.UP] = PAD.ANALOG_UP;\n    ANALOG_MAP[PAD.DOWN] = PAD.ANALOG_DOWN;\n  }\n}\n\nexport function startup(_canvas, params) {\n  canvas = _canvas;\n  pointer_lock.startup(canvas, onPointerLockEnter);\n  if (params.map_analog_to_dpad !== undefined) {\n    map_analog_to_dpad = params.map_analog_to_dpad;\n  }\n  pad_to_touch = params.pad_to_touch;\n  genAnalogMap();\n\n  let passive_param = false;\n  try {\n    let opts = Object.defineProperty({}, 'passive', {\n      get: function () {\n        passive_param = { passive: false };\n        return false;\n      }\n    });\n    window.addEventListener('test', null, opts);\n    window.removeEventListener('test', null, opts);\n  } catch (e) {\n    passive_param = false;\n  }\n\n  window.addEventListener('keydown', onKeyDown, false);\n  window.addEventListener('keyup', onKeyUp, false);\n\n  window.addEventListener('click', ignored, false);\n  window.addEventListener('contextmenu', ignored, false);\n  window.addEventListener('mousemove', onMouseMove, false);\n  window.addEventListener('mousedown', onMouseDown, false);\n  window.addEventListener('mouseup', onMouseUp, false);\n  if (window.WheelEvent) {\n    window.addEventListener('wheel', onWheel, passive_param);\n  } else {\n    window.addEventListener('DOMMouseScroll', onWheel, false);\n    window.addEventListener('mousewheel', onWheel, false);\n  }\n\n  window.addEventListener('blur', onBlurOrFocus, false);\n  window.addEventListener('focus', onBlurOrFocus, false);\n\n  canvas.addEventListener('touchstart', onTouchChange, passive_param);\n  canvas.addEventListener('touchmove', onTouchChange, passive_param);\n  canvas.addEventListener('touchend', onTouchChange, passive_param);\n  canvas.addEventListener('touchcancel', onTouchChange, passive_param);\n\n  // For iOS, this is needed in test_fullscreen, but not here, for some reason\n  //window.addEventListener('gesturestart', ignored, false);\n}\n\nconst DEADZONE = 0.26;\nconst DEADZONE_SQ = DEADZONE * DEADZONE;\nconst NUM_STICKS = 2;\nconst PAD_THRESHOLD = 0.25; // for turning analog motion into digital events\n\nfunction getGamepadData(idx) {\n  let gpd = gamepad_data[idx];\n  if (!gpd) {\n    gpd = gamepad_data[idx] = {\n      id: idx,\n      timestamp: 0,\n      sticks: new Array(NUM_STICKS)\n    };\n    for (let ii = 0; ii < NUM_STICKS; ++ii) {\n      gpd.sticks[ii] = vec2();\n    }\n    pad_states[idx] = {};\n  }\n  return gpd;\n}\n\nfunction updatePadState(gpd, ps, b, padcode) {\n  if (b && !ps[padcode]) {\n    ps[padcode] = DOWN_EDGE;\n    if (!pad_mode) {\n      local_storage.setJSON('pad_mode', true);\n      pad_mode = true;\n    }\n    if (padcode === pad_to_touch) {\n      let touch_id = `g${gpd.id}`;\n      if (touches[touch_id]) {\n        setMouseToMid();\n        v2copy(touches[touch_id].start_pos, mouse_pos);\n      } else {\n        touches[touch_id] = new TouchData(mouse_pos, false, 0, null);\n      }\n      touches[touch_id].down(null, true);\n    }\n  } else if (!b && ps[padcode]) {\n    ps[padcode] = UP_EDGE;\n    if (padcode === pad_to_touch) {\n      let touch_id = `g${gpd.id}`;\n      let touch_data = touches[touch_id];\n      if (touch_data) {\n        setMouseToMid();\n        v2copy(touch_data.cur_pos, mouse_pos);\n        touch_data.up_edge++;\n        touch_data.state = UP;\n        touch_data.down_time += engine.hrtime - touch_data.origin_time;\n      }\n    }\n  }\n}\n\nfunction gamepadUpdate() {\n  let gamepads = navigator.gamepads || navigator.webkitGamepads || navigator.getGamepads && navigator.getGamepads() || navigator.webkitGetGamepads && navigator.webkitGetGamepads();\n\n  if (gamepads) {\n    let numGamePads = gamepads.length;\n    for (let ii = 0; ii < numGamePads; ii++) {\n      let gamepad = gamepads[ii];\n      if (!gamepad) {\n        continue;\n      }\n      let gpd = getGamepadData(ii);\n      let ps = pad_states[ii];\n      // Update button states\n      if (gpd.timestamp < gamepad.timestamp) {\n        let buttons = gamepad.buttons;\n        gpd.timestamp = gamepad.timestamp;\n\n        let numButtons = buttons.length;\n        for (let n = 0; n < numButtons; n++) {\n          let value = buttons[n];\n          if (typeof value === 'object') {\n            value = value.value;\n          }\n          value = value > 0.5;\n          updatePadState(gpd, ps, value, n);\n        }\n      }\n\n      // Update axes states\n      let axes = gamepad.axes;\n      if (axes.length >= NUM_STICKS * 2) {\n        for (let n = 0; n < NUM_STICKS; ++n) {\n          let pair = gpd.sticks[n];\n          v2set(pair, axes[n * 2], -axes[n * 2 + 1]);\n          let magnitude = v2lengthSq(pair);\n          if (magnitude > DEADZONE_SQ) {\n            magnitude = sqrt(magnitude);\n\n            // Normalize lX and lY\n            v2scale(pair, pair, 1 / magnitude);\n\n            // Clip the magnitude at its max possible value\n            magnitude = min(magnitude, 1);\n\n            // Adjust magnitude relative to the end of the dead zone\n            magnitude = (magnitude - DEADZONE) / (1 - DEADZONE);\n\n            v2scale(pair, pair, magnitude);\n          } else {\n            v2set(pair, 0, 0);\n          }\n\n          // Apply \"movement\" to drag events\n          if (n <= 1 && pad_to_touch !== undefined) {\n            let touch_data = touches[`g${gpd.id}`];\n            if (touch_data) {\n              v2scale(temp_delta, pair, engine.this_frame_time);\n              v2add(touch_data.delta, touch_data.delta, temp_delta);\n              touch_data.total += abs(temp_delta[0]) + abs(temp_delta[1]);\n              setMouseToMid();\n              v2copy(touch_data.cur_pos, mouse_pos);\n            }\n          }\n        }\n\n        // Calculate virtual directional buttons\n        updatePadState(gpd, ps, gpd.sticks[0][0] < -PAD_THRESHOLD, PAD.ANALOG_LEFT);\n        updatePadState(gpd, ps, gpd.sticks[0][0] > PAD_THRESHOLD, PAD.ANALOG_RIGHT);\n        updatePadState(gpd, ps, gpd.sticks[0][1] < -PAD_THRESHOLD, PAD.ANALOG_DOWN);\n        updatePadState(gpd, ps, gpd.sticks[0][1] > PAD_THRESHOLD, PAD.ANALOG_UP);\n      }\n    }\n  }\n}\n\nexport function tickInput() {\n  // browser frame has occurred since the call to endFrame(),\n  // we should now have `touches` and `key_state` populated with edge events\n  if (movement_questionable_frames) {\n    --movement_questionable_frames;\n  }\n\n  // update timing of key down states\n  let hrtime = engine.hrtime;\n  for (let code in key_state_new) {\n    let ks = key_state_new[code];\n    if (ks.state === DOWN) {\n      ks.down_time += hrtime - ks.origin_time;\n      if (!ks.down_time) {\n        // happens on MacOS Safari\n        ks.down_time = 1;\n      }\n      // assert(hrtime >= ks.origin_time); - should be true, barring weird bugs\n      ks.origin_time = hrtime;\n    }\n  }\n\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (touch_data.state === DOWN) {\n      touch_data.down_time += hrtime - touch_data.origin_time;\n      // assert(hrtime >= touch_data.origin_time); - should be true, barring weird bugs\n      touch_data.origin_time = hrtime;\n    }\n  }\n\n  mouse_over_captured = false;\n  gamepadUpdate();\n  in_event.topOfFrame();\n  if (touches[pointerlock_touch_id] && !pointerLocked()) {\n    pointerLockExit();\n  }\n}\n\nfunction endFrameTickMap(map) {\n  Object.keys(map).forEach(keycode => {\n    switch (map[keycode]) {\n      case DOWN_EDGE:\n        map[keycode] = DOWN;\n        break;\n      case UP_EDGE:\n        delete map[keycode];\n        break;\n      default:\n    }\n  });\n}\nexport function endFrame(skip_mouse) {\n  for (let code in key_state_new) {\n    let ks = key_state_new[code];\n    if (ks.state === UP) {\n      key_state_new[code] = null;\n      delete key_state_new[code];\n    } else {\n      ks.up_edge = 0;\n      ks.down_edge = 0;\n      ks.down_time = 0;\n    }\n  }\n\n  pad_states.forEach(endFrameTickMap);\n  if (!skip_mouse) {\n    for (let touch_id in touches) {\n      let touch_data = touches[touch_id];\n      if (touch_data.state === UP) {\n        // Manually null out touches[touch_id] - some Chrome optimizer bug causes\n        // callers to later get this old value (instead of the newly added on with\n        // the same ID) unless we null it out (then they seem to get the new one).\n        touches[touch_id] = null;\n        delete touches[touch_id];\n      } else {\n        touch_data.delta[0] = touch_data.delta[1] = 0;\n        touch_data.dispatched = false;\n        touch_data.dispatched_drag_over = false;\n        touch_data.up_edge = 0;\n        touch_data.down_edge = 0;\n        touch_data.down_time = 0;\n      }\n    }\n    mouse_wheel = 0;\n    input_eaten_mouse = false;\n  }\n  input_eaten_kb = false;\n  mouse_moved = false;\n}\n\nexport function eatAllInput(skip_mouse) {\n  // destroy touches, remove all down and up edges\n  endFrame(skip_mouse);\n  if (!skip_mouse) {\n    mouse_over_captured = true;\n    input_eaten_mouse = true;\n  }\n  input_eaten_kb = true;\n}\n\nexport function eatAllKeyboardInput() {\n  eatAllInput(true);\n}\n\n// returns position mapped to current camera view\nexport function mousePos(dst) {\n  dst = dst || vec2();\n  camera2d.domToVirtual(dst, mouse_pos);\n  return dst;\n}\n\nexport function mouseMoved() {\n  return mouse_moved;\n}\n\nexport function mouseWheel() {\n  let ret = mouse_wheel;\n  mouse_wheel = 0;\n  return ret;\n}\n\nfunction mousePosParam(param) {\n  param = param || {};\n  return {\n    x: param.x === undefined ? camera2d.x0Real() : param.x,\n    y: param.y === undefined ? camera2d.y0Real() : param.y,\n    w: param.w === undefined ? camera2d.wReal() : param.w,\n    h: param.h === undefined ? camera2d.hReal() : param.h,\n    button: param.button === undefined ? ANY : param.button\n  };\n}\n\nlet check_pos = vec2();\nfunction checkPos(pos, param) {\n  camera2d.domToVirtual(check_pos, pos);\n  return check_pos[0] >= param.x && (param.w === Infinity || check_pos[0] < param.x + param.w) && check_pos[1] >= param.y && (param.h === Infinity || check_pos[1] < param.y + param.h);\n}\n\nexport function mouseOver(param) {\n  if (mouse_over_captured || pointerLocked()) {\n    return false;\n  }\n  param = param || {};\n  let pos_param = mousePosParam(param);\n\n  // eat mouse up/down/drag events\n  if (!param.peek) {\n    for (let id in touches) {\n      let touch = touches[id];\n      if (checkPos(touch.cur_pos, pos_param)) {\n        touch.down_edge = 0;\n        touch.up_edge = 0;\n        if (!param || !param.drag_target) {\n          touch.dispatched = true;\n        }\n      }\n    }\n  }\n\n  if (checkPos(mouse_pos, pos_param)) {\n    if (!param.peek) {\n      mouse_over_captured = true;\n    }\n    return true;\n  }\n  return false;\n}\n\nexport function mouseDown(button) {\n  if (button === ANY) {\n    return mouseDown(0) || mouseDown(2);\n  }\n  button = button || 0;\n  return !input_eaten_mouse && mouse_down[button];\n}\n\nexport function mousePosIsTouch() {\n  return mouse_pos_is_touch;\n}\n\nexport function isTouchDown(param) {\n  if (input_eaten_mouse) {\n    return false;\n  }\n  let pos_param = mousePosParam(param);\n  for (let id in touches) {\n    let touch = touches[id];\n    if (checkPos(touch.cur_pos, pos_param)) {\n      return check_pos.slice(0);\n    }\n  }\n  return false;\n}\n\nexport function numTouches() {\n  return Object.keys(touches).length;\n}\n\nexport function keyDown(keycode) {\n  if (input_eaten_kb) {\n    return 0;\n  }\n  let ks = key_state_new[keycode];\n  if (!ks) {\n    return 0;\n  }\n  if (ks.state === DOWN) {\n    assert(ks.down_time); // Will fire if we call keyDown() before tickInput()\n  }\n  return ks.down_time;\n}\nexport function keyDownEdge(keycode, opts) {\n  if (opts && opts.in_event_cb && !input_eaten_kb) {\n    in_event.on('keydown', keycode, opts.in_event_cb);\n  }\n\n  let ks = key_state_new[keycode];\n  if (!ks) {\n    return 0;\n  }\n  let r = ks.down_edge;\n  ks.down_edge = 0;\n  return r;\n}\nexport function keyUpEdge(keycode, opts) {\n  if (opts && opts.in_event_cb && !input_eaten_kb) {\n    in_event.on('keyup', keycode, opts.in_event_cb);\n  }\n\n  let ks = key_state_new[keycode];\n  if (!ks) {\n    return 0;\n  }\n  let r = ks.up_edge;\n  ks.up_edge = 0;\n  return r;\n}\n\nexport function padGetAxes(out, stickindex, padindex) {\n  assert(stickindex >= 0 && stickindex < NUM_STICKS);\n  if (padindex === undefined) {\n    let sub = vec2();\n    v2set(out, 0, 0);\n    for (let ii = 0; ii < gamepad_data.length; ++ii) {\n      padGetAxes(sub, stickindex, ii);\n      v2add(out, out, sub);\n    }\n    return;\n  }\n  let sticks = getGamepadData(padindex).sticks;\n  v2copy(out, sticks[stickindex]);\n}\n\nfunction padButtonDownInternal(gpd, ps, padcode) {\n  if (ps[padcode]) {\n    return engine.this_frame_time;\n  }\n  return 0;\n}\nfunction padButtonDownEdgeInternal(gpd, ps, padcode) {\n  if (ps[padcode] === DOWN_EDGE) {\n    ps[padcode] = DOWN;\n    return engine.this_frame_time;\n  }\n  return 0;\n}\nfunction padButtonUpEdgeInternal(gpd, ps, padcode) {\n  if (ps[padcode] === UP_EDGE) {\n    delete ps[padcode];\n    return engine.this_frame_time;\n  }\n  return 0;\n}\n\nfunction padButtonShared(fn, padcode, padindex) {\n  assert(padcode !== undefined);\n  let r = 0;\n  // Handle calling without a specific pad index\n  if (padindex === undefined) {\n    for (let ii = 0; ii < pad_states.length; ++ii) {\n      r += padButtonShared(fn, padcode, ii);\n    }\n    return r;\n  }\n\n  if (input_eaten_mouse) {\n    return 0;\n  }\n  let gpd = gamepad_data[padindex];\n  if (!gpd) {\n    return 0;\n  }\n  let ps = pad_states[padindex];\n\n  r += ANALOG_MAP[padcode] && fn(gpd, ps, ANALOG_MAP[padcode]) || 0;\n  r += fn(gpd, ps, padcode);\n  return r;\n}\nexport function padButtonDown(padcode, padindex) {\n  return padButtonShared(padButtonDownInternal, padcode, padindex);\n}\nexport function padButtonDownEdge(padcode, padindex) {\n  return padButtonShared(padButtonDownEdgeInternal, padcode, padindex);\n}\nexport function padButtonUpEdge(padcode, padindex) {\n  return padButtonShared(padButtonUpEdgeInternal, padcode, padindex);\n}\n\nlet start_pos = vec2();\nlet cur_pos = vec2();\nlet delta = vec2();\n\nexport function mouseUpEdge(param) {\n  param = param || {};\n  let pos_param = mousePosParam(param);\n  let button = pos_param.button;\n  let max_click_dist = param.max_dist || 50; // TODO: relative to camera distance?\n\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (!touch_data.up_edge || !(button === ANY || button === touch_data.button) || touch_data.total > max_click_dist) {\n      continue;\n    }\n    if (checkPos(touch_data.cur_pos, pos_param)) {\n      if (!param.peek) {\n        touch_data.up_edge = 0;\n      }\n      return {\n        button: touch_data.button,\n        pos: check_pos.slice(0),\n        start_time: touch_data.start_time\n      };\n    }\n  }\n\n  if (param.in_event_cb && !input_eaten_mouse && !mouse_over_captured) {\n    // TODO: Maybe need to also pass along earlier exclusions?  Working okay for now though.\n    if (!param.phys) {\n      param.phys = {};\n    }\n    param.phys.button = typeof param.in_event_button === 'number' ? param.in_event_button : button;\n    camera2d.virtualToDomPosParam(param.phys, pos_param);\n    in_event.on('mouseup', param.phys, param.in_event_cb);\n  }\n  return false;\n}\nexports.click = mouseUpEdge;\n\nexport function mouseDownEdge(param) {\n  param = param || {};\n  let pos_param = mousePosParam(param);\n  let button = pos_param.button;\n\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (!touch_data.down_edge || !(button === ANY || button === touch_data.button)) {\n      continue;\n    }\n    if (checkPos(touch_data.cur_pos, pos_param)) {\n      if (!param.peek) {\n        touch_data.down_edge = 0;\n      }\n      return {\n        button: touch_data.button,\n        pos: check_pos.slice(0),\n        start_time: touch_data.start_time\n      };\n    }\n  }\n\n  if (param.in_event_cb && !input_eaten_mouse && !mouse_over_captured) {\n    // TODO: Maybe need to also pass along earlier exclusions?  Working okay for now though.\n    if (!param.phys) {\n      param.phys = {};\n    }\n    param.phys.button = button;\n    camera2d.virtualToDomPosParam(param.phys, pos_param);\n    in_event.on('mousedown', param.phys, param.in_event_cb);\n  }\n  return false;\n}\n\n// Completely consume any clicks or drags coming from a mouse down event in this\n// area - used to catch focus leaving an edit box without wanting to do what\n// a click would normally do.\nexport function mouseConsumeClicks(param) {\n  param = param || {};\n  let pos_param = mousePosParam(param);\n  let button = pos_param.button;\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (!(button === ANY || button === touch_data.button)) {\n      continue;\n    }\n    if (checkPos(touch_data.start_pos, pos_param)) {\n      touch_data.down_edge = 0;\n      // Set start pos so that it will not pass checkPos\n      touch_data.start_pos[0] = touch_data.start_pos[1] = Infinity;\n      // Set .total so that mouseUpEdge will not detect it as a click\n      touch_data.total = Infinity;\n    }\n  }\n}\n\nexport function drag(param) {\n  param = param || {};\n  let pos_param = mousePosParam(param);\n  let button = pos_param.button;\n  let min_dist = param.min_dist || 0;\n\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (!(button === ANY || button === touch_data.button) || touch_data.dispatched) {\n      continue;\n    }\n    if (checkPos(touch_data.start_pos, pos_param)) {\n      camera2d.domDeltaToVirtual(delta, [touch_data.total / 2, touch_data.total / 2]);\n      let total = delta[0] + delta[1];\n      if (total < min_dist) {\n        continue;\n      }\n      if (!param.peek) {\n        touch_data.dispatched = true;\n      }\n      let is_down_edge = touch_data.down_edge;\n      if (param.eat_clicks) {\n        touch_data.down_edge = touch_data.up_edge = 0;\n      }\n      if (param.payload) {\n        touch_data.drag_payload = param.payload;\n      }\n      camera2d.domToVirtual(start_pos, touch_data.start_pos);\n      camera2d.domToVirtual(cur_pos, touch_data.cur_pos);\n      camera2d.domDeltaToVirtual(delta, touch_data.delta);\n      return {\n        cur_pos,\n        start_pos,\n        delta, // this frame's delta\n        total, // total (linear) distance dragged\n        button: touch_data.button,\n        touch: touch_data.touch,\n        start_time: touch_data.start_time,\n        is_down_edge,\n        down_time: touch_data.down_time\n      };\n    }\n  }\n  return null;\n}\n\n// a lot like drag(), refactor to share more?\nexport function longPress(param) {\n  param = param || {};\n  let pos_param = mousePosParam(param);\n  let button = pos_param.button;\n  let max_dist = param.max_dist || 0;\n  let min_time = param.min_time || 500;\n\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (!(button === ANY || button === touch_data.button) || touch_data.long_press_dispatched) {\n      continue;\n    }\n    if (checkPos(touch_data.start_pos, pos_param)) {\n      camera2d.domDeltaToVirtual(delta, [touch_data.total / 2, touch_data.total / 2]);\n      let total = delta[0] + delta[1];\n      if (total > max_dist) {\n        continue;\n      }\n      let time = Date.now() - touch_data.start_time;\n      if (time < min_time) {\n        continue;\n      }\n      if (!param.peek) {\n        // ? touch_data.dispatched = true;\n        touch_data.long_press_dispatched = true;\n      }\n      let is_down_edge = touch_data.down_edge;\n      if (param.eat_clicks) {\n        touch_data.down_edge = touch_data.up_edge = 0;\n      }\n      camera2d.domToVirtual(start_pos, touch_data.start_pos);\n      camera2d.domToVirtual(cur_pos, touch_data.cur_pos);\n      camera2d.domDeltaToVirtual(delta, touch_data.delta);\n      return {\n        long_press: true,\n        cur_pos,\n        start_pos,\n        delta, // this frame's delta\n        total, // total (linear) distance dragged\n        button: touch_data.button,\n        touch: touch_data.touch,\n        start_time: touch_data.start_time,\n        is_down_edge,\n        down_time: touch_data.down_time\n      };\n    }\n  }\n  return null;\n}\n\nexport function dragDrop(param) {\n  param = param || {};\n  let pos_param = mousePosParam(param);\n  let button = pos_param.button;\n\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    // Maybe touch_data.dispatched_drag_over instead/as well?\n    if (!(button === ANY || button === touch_data.button) || touch_data.dispatched || !touch_data.drag_payload) {\n      continue;\n    }\n    if (!touch_data.up_edge) {\n      continue;\n    }\n    if (checkPos(touch_data.cur_pos, pos_param)) {\n      if (!param.peek) {\n        // Maybe touch_data.dispatched_drag_over as well?\n        touch_data.dispatched = true;\n      }\n      return { drag_payload: touch_data.drag_payload };\n    }\n  }\n  return null;\n}\n\nexport function dragOver(param) {\n  param = param || {};\n  let pos_param = mousePosParam(param);\n  let button = pos_param.button;\n\n  for (let touch_id in touches) {\n    let touch_data = touches[touch_id];\n    if (!(button === ANY || button === touch_data.button) || touch_data.dispatched || touch_data.dispatched_drag_over || // Maybe not .dispatched?\n    !touch_data.drag_payload) {\n      continue;\n    }\n    if (touch_data.state !== DOWN) {\n      continue;\n    }\n    if (checkPos(touch_data.cur_pos, pos_param)) {\n      // Separate 'dispatched' for dragOver (target) and drag (source) - they both need one dispatch per frame\n      if (!param.peek) {\n        touch_data.dispatched_drag_over = true;\n      }\n      camera2d.domToVirtual(cur_pos, touch_data.cur_pos);\n      return {\n        cur_pos,\n        drag_payload: touch_data.drag_payload\n      };\n    }\n  }\n  return null;\n}","// Portions Copyright 2020 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst engine = require('./engine.js');\nconst camera2d = require('./camera2d.js');\nconst input = require('./input.js');\nconst ui = require('./ui.js');\n\nlet state_cache = {};\nlet good_url = /https?:\\/\\//;\n\n// Create an invisible A elem in the DOM so we get all of the good browsery\n// behavior for a link area.\nexport function link(param) {\n  let { x, y, w, h, url, internal, allow_modal } = param;\n  if (!url.match(good_url)) {\n    url = `${document.location.protocol}//${url}`;\n  }\n  let key = `${x}_${y}`;\n  let state = state_cache[key];\n  if (!state) {\n    state = state_cache[key] = { clicked: false };\n  }\n  let elem = ui.getElem(allow_modal, state.elem);\n  state.frame = engine.global_frame_index;\n  if (elem !== state.elem) {\n    state.elem = elem;\n    if (elem) {\n      // new DOM element, initialize\n      elem.textContent = '';\n      let a_elem = document.createElement('a');\n      a_elem.textContent = ' ';\n      a_elem.className = 'glovui_link noglov';\n      a_elem.setAttribute('target', '_blank');\n      a_elem.setAttribute('href', url);\n      state.url = url;\n      if (internal) {\n        a_elem.onclick = function (ev) {\n          ev.preventDefault();\n          state.clicked = true;\n        };\n      }\n      elem.appendChild(a_elem);\n      state.a_elem = a_elem;\n    }\n  }\n  if (elem) {\n    if (url !== state.url) {\n      state.a_elem.setAttribute('href', url);\n      state.url = url;\n    }\n\n    let pos = camera2d.htmlPos(x, y);\n    elem.style.left = `${pos[0]}%`;\n    elem.style.top = `${pos[1]}%`;\n    let size = camera2d.htmlSize(w, h);\n    elem.style.width = `${size[0]}%`;\n    elem.style.height = `${size[1]}%`;\n  }\n  let clicked = state.clicked;\n  state.clicked = false;\n  return clicked;\n}\n\nexport function linkText(param) {\n  let { style_link, style_link_hover, x, y, z, font_size, text } = param;\n  // Also: any parameter to link(), e.g. url\n  let w = ui.font.getStringWidth(style_link, font_size, text);\n  let h = font_size;\n  let mouseover = input.mouseOver({ x, y, w, h, peek: true }) && !input.mousePosIsTouch();\n  let style = mouseover ? style_link_hover : style_link;\n  ui.font.drawSized(style, x, y, z, font_size, text);\n  let underline_w = 1;\n  ui.drawLine(x, y + h - underline_w, x + w, y + h - underline_w, z - 0.5, underline_w, 0.99, style.color_vec4);\n  param.w = w;\n  param.h = h;\n  return link(param);\n}\n\nexport function linkTick() {\n  for (let key in state_cache) {\n    let state = state_cache[key];\n    if (state.frame !== engine.global_frame_index - 1) {\n      delete state_cache[key];\n    }\n  }\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint-env browser */\n\nexports.storage_prefix = 'demo';\n\nlet lsd = function () {\n  try {\n    localStorage.test = 'test';\n    return localStorage;\n  } catch (e) {\n    return {};\n  }\n}();\nexport function get(key) {\n  key = `${exports.storage_prefix}_${key}`;\n  let ret = lsd[key];\n  if (ret === 'undefined') {\n    ret = undefined;\n  }\n  return ret;\n}\n\nexport function set(key, value) {\n  key = `${exports.storage_prefix}_${key}`;\n  if (value === undefined || value === null) {\n    delete lsd[key];\n  } else {\n    lsd[key] = value;\n  }\n}\n\nexport function setJSON(key, value) {\n  set(key, JSON.stringify(value));\n}\n\nexport function getJSON(key, def) {\n  let value = get(key);\n  if (value === undefined) {\n    return def;\n  }\n  try {\n    return JSON.parse(value);\n  } catch (e) {\n    // ignore\n  }\n  return def;\n}\n\nexport function clearAll(key_prefix) {\n  let prefix = new RegExp(`^${exports.storage_prefix}_${key_prefix || ''}`, 'u');\n  for (let key in lsd) {\n    if (key.match(prefix)) {\n      delete lsd[key];\n    }\n  }\n}\n\nexport function exportAll() {\n  let obj = {};\n  let prefix = new RegExp(`^${exports.storage_prefix}_(.*)`, 'u');\n  for (let key in lsd) {\n    let m = key.match(prefix);\n    if (m) {\n      let v = lsd[key];\n      if (v && v !== 'undefined') {\n        obj[m[1]] = v;\n      }\n    }\n  }\n  return JSON.stringify(obj);\n}\n\nexport function importAll(serialized) {\n  let obj = JSON.parse(serialized);\n  clearAll();\n  for (let key in obj) {\n    set(key, obj[key]);\n  }\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n// Some code from Turbulenz: Copyright (c) 2012-2013 Turbulenz Limited\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nexport function mat43() {\n  let r = new Float32Array(12);\n  r[0] = r[4] = r[8] = 1;\n  return r;\n}\n\nexport function m43identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  out[9] = 0;\n  out[10] = 0;\n  out[11] = 0;\n}\n\nexport function m43mul(out, a, b) {\n  let a0 = a[0];\n  let a1 = a[1];\n  let a2 = a[2];\n  let a3 = a[3];\n  let a4 = a[4];\n  let a5 = a[5];\n  let a6 = a[6];\n  let a7 = a[7];\n  let a8 = a[8];\n  let a9 = a[9];\n  let a10 = a[10];\n  let a11 = a[11];\n\n  let b0 = b[0];\n  let b1 = b[1];\n  let b2 = b[2];\n  let b3 = b[3];\n  let b4 = b[4];\n  let b5 = b[5];\n  let b6 = b[6];\n  let b7 = b[7];\n  let b8 = b[8];\n\n  out[0] = b0 * a0 + b3 * a1 + b6 * a2;\n  out[1] = b1 * a0 + b4 * a1 + b7 * a2;\n  out[2] = b2 * a0 + b5 * a1 + b8 * a2;\n  out[3] = b0 * a3 + b3 * a4 + b6 * a5;\n  out[4] = b1 * a3 + b4 * a4 + b7 * a5;\n  out[5] = b2 * a3 + b5 * a4 + b8 * a5;\n  out[6] = b0 * a6 + b3 * a7 + b6 * a8;\n  out[7] = b1 * a6 + b4 * a7 + b7 * a8;\n  out[8] = b2 * a6 + b5 * a7 + b8 * a8;\n  out[9] = b0 * a9 + b3 * a10 + b6 * a11 + b[9];\n  out[10] = b1 * a9 + b4 * a10 + b7 * a11 + b[10];\n  out[11] = b2 * a9 + b5 * a10 + b8 * a11 + b[11];\n\n  return out;\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint-env browser */\n\n/*\n  Convert models to GLB with:\n  node_modules\\.bin\\gltf-pipeline.cmd -t -i src/client/models/box.gltf -o src/client/models/box.glb\n  // The -t tells it not to embed the textures, but just leave the URIs\n */\n\nconst assert = require('assert');\n\nconst geom = require('./geom.js');\nconst glb_parser = require('./glb/parser.js');\nconst { ATTRIBUTE_TYPE_TO_COMPONENTS } = require('./glb/gltf-type-utils.js');\nconst renderer = require('./engine.js');\nconst shaders = require('./shaders.js');\nconst textures = require('./textures.js');\nconst { vec4 } = require('./vmath.js');\n\nexport let load_count = 0;\n\nlet box_glb = 'glTF\\x02\\0\\0\\0\\xCC\\b\\0\\0h\\x05\\0\\0JSON{\"asset\":{\"generator\":\"COLLADA2GLTF\",\"version\":\"2.0\"},\"scene\":0,\"scenes\":[{\"nodes\":[0]}],\"nodes\":[{\"children\":[1],\"matrix\":[1,0,0,0,0,0,-1,0,0,1,0,0,0,0,0,1]},{\"mesh\":0}],\"meshes\":[{\"primitives\":[{\"attributes\":{\"NORMAL\":1,\"POSITION\":2,\"TEXCOORD_0\":3},\"indices\":0,\"mode\":4,\"material\":0}],\"name\":\"Mesh\"}],\"accessors\":[{\"bufferView\":0,\"byteOffset\":0,\"componentType\":5123,\"count\":36,\"max\":[23],\"min\":[0],\"type\":\"SCALAR\"},{\"bufferView\":1,\"byteOffset\":0,\"componentType\":5126,\"count\":24,\"max\":[1,1,1],\"min\":[-1,-1,-1],\"type\":\"VEC3\"},{\"bufferView\":1,\"byteOffset\":288,\"componentType\":5126,\"count\":24,\"max\":[0.5,0.5,0.5],\"min\":[-0.5,-0.5,-0.5],\"type\":\"VEC3\"},{\"bufferView\":2,\"byteOffset\":0,\"componentType\":5126,\"count\":24,\"max\":[6,1],\"min\":[0,0],\"type\":\"VEC2\"}],\"materials\":[{\"pbrMetallicRoughness\":{\"baseColorTexture\":{\"index\":0,\"texCoord\":0},\"metallicFactor\":0,\"baseColorFactor\":[1,1,1,1],\"roughnessFactor\":1},\"name\":\"Texture\",\"emissiveFactor\":[0,0,0],\"alphaMode\":\"OPAQUE\",\"doubleSided\":false}],\"textures\":[{\"sampler\":0,\"source\":0}],\"samplers\":[{\"magFilter\":9729,\"minFilter\":9986,\"wrapS\":10497,\"wrapT\":10497}],\"bufferViews\":[{\"buffer\":0,\"byteOffset\":0,\"byteLength\":72,\"target\":34963},{\"buffer\":0,\"byteOffset\":72,\"byteLength\":576,\"byteStride\":12,\"target\":34962},{\"buffer\":0,\"byteOffset\":648,\"byteLength\":192,\"byteStride\":8,\"target\":34962}],\"buffers\":[{\"name\":\"box_textured\",\"byteLength\":840}]}H\\x03\\0\\0BIN\\0\\0\\0\\x01\\0\\x02\\0\\x03\\0\\x02\\0\\x01\\0\\x04\\0\\x05\\0\\x06\\0\\x07\\0\\x06\\0\\x05\\0\\b\\0\\t\\0\\n\\0\\x0B\\0\\n\\0\\t\\0\\f\\0\\r\\0\\x0E\\0\\x0F\\0\\x0E\\0\\r\\0\\x10\\0\\x11\\0\\x12\\0\\x13\\0\\x12\\0\\x11\\0\\x14\\0\\x15\\0\\x16\\0\\x17\\0\\x16\\0\\x15\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\x80\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\0\\xBF\\0\\0\\0?\\0\\0\\0?\\0\\0\\0\\xBF\\0\\0\\xC0@\\0\\0\\0\\0\\0\\0\\xA0@\\0\\0\\0\\0\\0\\0\\xC0@\\xFE\\xFF\\x7F?\\0\\0\\xA0@\\xFE\\xFF\\x7F?\\0\\0\\x80@\\0\\0\\0\\0\\0\\0\\xA0@\\0\\0\\0\\0\\0\\0\\x80@\\0\\0\\x80?\\0\\0\\xA0@\\0\\0\\x80?\\0\\0\\0@\\0\\0\\0\\0\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0@\\0\\0\\x80?\\0\\0\\x80?\\0\\0\\x80?\\0\\0@@\\0\\0\\0\\0\\0\\0\\x80@\\0\\0\\0\\0\\0\\0@@\\0\\0\\x80?\\0\\0\\x80@\\0\\0\\x80?\\0\\0@@\\0\\0\\0\\0\\0\\0\\0@\\0\\0\\0\\0\\0\\0@@\\0\\0\\x80?\\0\\0\\0@\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\xFE\\xFF\\x7F?\\0\\0\\x80?\\0\\0\\0\\0\\0\\0\\x80?\\xFE\\xFF\\x7F?';\n{\n  let arr = new Uint8Array(box_glb.length);\n  for (let ii = 0; ii < box_glb.length; ++ii) {\n    arr[ii] = box_glb.charCodeAt(ii);\n  }\n  box_glb = arr.buffer;\n}\n\nexport let models = {};\n\nexport let default_vshader;\nexport let default_fshader;\n\nfunction initShaders() {\n  default_vshader = shaders.create(gl.VERTEX_SHADER, 'default.vp', '// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\\n// Released under MIT License: https://opensource.org/licenses/MIT\\n#pragma WebGL\\nprecision highp float;\\n\\n// per-vertex input\\nattribute vec3 POSITION;\\n//attribute vec3 COLOR;\\nattribute vec2 TEXCOORD;\\nattribute vec3 NORMAL;\\n\\n// per-drawcall input\\nuniform mat3 mv_inv_trans;\\nuniform mat4 projection;\\nuniform mat4 mat_mv;\\nuniform vec4 color;\\n\\n// output\\nvarying vec4 interp_color;\\nvarying vec2 interp_texcoord;\\nvarying vec3 interp_normal_vs;\\n// varying vec3 interp_pos_vs;\\n\\nvoid main(void) {\\n  //interp_color = vec4(COLOR * color.rgb, color.a);\\n  interp_color = color;\\n  interp_texcoord = vec2(TEXCOORD);\\n  interp_normal_vs = mv_inv_trans * NORMAL;\\n  // gl_Position = vec4(POSITION, 1.0);\\n\\n  // gl_Position = mat_vp * (mat_m * vec4(POSITION, 1.0));\\n  // gl_Position = mvp * vec4(POSITION, 1.0);\\n  vec4 pos_vs = mat_mv * vec4(POSITION, 1.0);\\n  // interp_pos_vs = pos_vs.xyz;\\n  gl_Position = projection * pos_vs;\\n}');\n  default_fshader = shaders.create(gl.FRAGMENT_SHADER, 'default.fp', '// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\\n// Released under MIT License: https://opensource.org/licenses/MIT\\n#pragma WebGL\\n\\nprecision lowp float;\\n\\nuniform sampler2D tex0; // source\\n\\nuniform vec3 light_diffuse;\\nuniform vec3 light_dir_vs;\\nuniform vec3 ambient;\\n\\nvarying vec4 interp_color;\\nvarying vec2 interp_texcoord;\\nvarying vec3 interp_normal_vs;\\n\\nvoid main(void) {\\n  vec4 texture0 = texture2D(tex0, interp_texcoord.xy);\\n#ifndef NOGAMMA\\n  texture0.rgb = texture0.rgb * texture0.rgb; // pow(2)\\n#endif\\n  vec4 albedo = texture0 * interp_color;\\n  if (albedo.a < 0.01) // TODO: Probably don\\'t want this, but makes hacking transparent things together easier for now\\n    discard;\\n\\n  vec3 normal_vs = normalize(interp_normal_vs);\\n  float diffuse = max(0.0, 0.5 + 0.5 * dot(normal_vs, -light_dir_vs.rgb));\\n\\n  vec3 light_color = diffuse * light_diffuse.rgb + ambient.rgb;\\n  gl_FragColor = vec4(light_color * albedo.rgb, albedo.a);\\n\\n#ifndef NOGAMMA\\n  gl_FragColor.rgb = pow(gl_FragColor.rgb, vec3(1.0/2.0));\\n#endif\\n}');\n}\n\nfunction Model(url) {\n  this.url = url;\n  let idx = url.lastIndexOf('/');\n  if (idx !== -1) {\n    this.base_url = url.slice(0, idx + 1);\n  } else {\n    this.base_url = '';\n  }\n}\n\nModel.prototype.load = function () {\n  ++load_count;\n  let xhr = new XMLHttpRequest();\n  xhr.open('GET', this.url, true);\n  xhr.responseType = 'arraybuffer';\n  xhr.onload = () => {\n    --load_count;\n    try {\n      let array_buffer = xhr.response; // Note: not xhr.responseText\n      if ((xhr.status === 200 || xhr.status === 0) && array_buffer) {\n        this.parse(array_buffer);\n      }\n    } catch (e) {\n      window.onerror('Model loading error', 'models.js', 0, 0, e);\n    }\n  };\n  xhr.send(null);\n};\n\nconst skip_attr = {\n  'TANGENT': true\n};\n\nModel.prototype.parse = function (glb_data) {\n  let glb = glb_parser.parse(glb_data);\n  if (!glb) {\n    return;\n  }\n  // Make Geoms for each primitives within each mesh\n  let glb_json = glb.getJSON();\n  let objs = [];\n  for (let ii = 0; ii < glb_json.meshes.length; ++ii) {\n    let mesh = glb_json.meshes[ii];\n    for (let jj = 0; jj < mesh.primitives.length; ++jj) {\n      let primitives = mesh.primitives[jj];\n      let material = glb_json.materials[primitives.material];\n      let texture = null;\n      if (material) {\n        // Just grabbing the base color texture, nothing else\n        let bct = (material.pbrMetallicRoughness || {}).baseColorTexture || {};\n        let texture_def = glb_json.textures && glb_json.textures[bct.index] || {};\n        let sampler_def = glb_json.samplers && glb_json.samplers[texture_def.sampler] || {};\n        let image = glb_json.images && glb_json.images[texture_def.source] || {};\n        if (image.uri) {\n          let params = {\n            url: `${this.base_url}${image.uri}`,\n            filter_mag: sampler_def.magFilter,\n            filter_min: sampler_def.minFilter,\n            wrap_s: sampler_def.wrapS,\n            wrap_t: sampler_def.wrapT\n          };\n          texture = textures.load(params);\n        }\n      }\n      let format = [];\n      let buffers = [];\n      let bidx = [];\n      let total_size = 0;\n      let vert_count = 0;\n      for (let attr in primitives.attributes) {\n        if (skip_attr[attr]) {\n          continue;\n        }\n        assert(shaders.semantic[attr] !== undefined);\n        let accessor = glb_json.accessors[primitives.attributes[attr]];\n        assert.equal(accessor.componentType, 5126); // F32\n        let geom_format = gl.FLOAT;\n        let geom_count = ATTRIBUTE_TYPE_TO_COMPONENTS[accessor.type];\n        assert(geom_count);\n        let my_vert_count = accessor.count /* / geom_count*/;\n        if (!vert_count) {\n          vert_count = my_vert_count;\n        } else {\n          assert.equal(vert_count, my_vert_count);\n        }\n        format.push([shaders.semantic[attr], geom_format, geom_count]);\n        let buffer = glb.getBuffer(accessor);\n        buffers.push(buffer);\n        bidx.push(0);\n        total_size += buffer.length;\n      }\n      // Interleave\n      let verts = new Float32Array(total_size);\n      let idx = 0;\n      for (let vert = 0; vert < vert_count; ++vert) {\n        for (let attr = 0; attr < format.length; ++attr) {\n          for (let kk = 0; kk < format[attr][2]; ++kk) {\n            verts[idx++] = buffers[attr][bidx[attr]++];\n          }\n        }\n      }\n      // Get indices\n      let accessor = glb_json.accessors[primitives.indices];\n      assert(accessor); // must be an indexed primitive set\n      assert.equal(accessor.type, 'SCALAR');\n      let idxs = glb.getBuffer(accessor);\n      if (accessor.componentType === 5125) {\n        // Uint32\n        assert(vert_count < 65536); // Fits in 16-bits\n        // Just convert to 16-bit\n        idxs = new Uint16Array(idxs);\n      } else {\n        assert.equal(accessor.componentType, 5123); // Uint16\n      }\n      objs.push({\n        geom: geom.create(format, verts, idxs, primitives.mode),\n        texture\n      });\n    }\n  }\n  // TODO: Something with nodes to tie together and position the meshes\n  this.data = {\n    objs\n    // glb, - Don't keep this, release it and any unreferenced data/buffers\n  };\n};\n\nModel.prototype.draw = function (mat) {\n  renderer.updateMatrices(mat); // before setting shader\n  shaders.bind(default_vshader, default_fshader, {\n    color: vec4(1, 1, 1, 1)\n  });\n  let objs = this.data.objs;\n  for (let ii = 0; ii < objs.length; ++ii) {\n    let obj = objs[ii];\n    if (obj.texture) {\n      textures.bind(0, obj.texture);\n    }\n    obj.geom.draw();\n  }\n};\n\n// Just draw the geometry, without any other binding\nModel.prototype.drawGeom = function () {\n  let objs = this.data.objs;\n  for (let ii = 0; ii < objs.length; ++ii) {\n    let obj = objs[ii];\n    obj.geom.draw();\n  }\n};\n\nexport function load(url) {\n  if (models[url]) {\n    return models[url];\n  }\n  let model = models[url] = new Model(url);\n  model.data = models.box.data; // stub until loaded\n  model.load();\n  return model;\n}\n\nexport function startup() {\n  initShaders();\n  let model_box = models.box = new Model('box');\n  model_box.parse(box_glb);\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\n//////////////////////////////////////////////////////////////////////////\n// Particle System Spec\n\n/*\n// Definitions\n// value = number or\n// value = [base, add_max] -> generates a number in the range [base, base + add_max)\nlet def_fire = {\n  particles: {\n    fire: {\n      blend: 'additive',\n      texture: 'fire.png',\n      color: [1,1,1,1], // multiplied by animation track, default 1,1,1,1, can be omitted\n      color_track: [ // just values, NOT random range\n        { t: 0.0, v: [1,0.4,0.4,1] },\n        { t: 0.7, v: [1,0,0,1] },\n        { t: 0.9, v: [0.2,0,0,1] },\n        { t: 1.0, v: [0,0,0,1] },\n      ],\n      size: [[32,16], [32,16]], // multiplied by animation track\n      size_track: [ // just values, NOT random range\n        { t: 0.0, v: [1,1] },\n        { t: 0.4, v: [0.5,0.5] },\n        { t: 0.7, v: [1,1] },\n        { t: 1.0, v: [1.5,1.5] },\n      ],\n      accel: [0,0],\n      rot: [0,360], // degrees\n      rot_vel: [10,2], // degrees per second\n      lifespan: [450,0], // milliseconds\n      kill_time_accel: 5,\n    },\n  },\n  emitters: {\n    fire: {\n      particle: 'fire',\n      // Random ranges affect each emitted particle:\n      pos: [[0,28], [0,28]],\n      vel: [0,0],\n      emit_rate: [60,20], // emissions per second\n      // Random ranges only calculated upon instantiation:\n      emit_time: [0,Infinity],\n      emit_initial: 10,\n    },\n  },\n  system_lifespan: Infinity, // must be manually killed\n};\n\n// Usage\nlet system = glov_engine.glov_particles.createSystem(def_fire, [50, 50, Z.PARTICLES]);\nsystem.updatePos(75, 75);\nsystem.killSoft(); // stops emitting and speeds up particles by kill_time_accel\nsystem.killHard(); // immediately stops drawing\n\n*/\n\n//////////////////////////////////////////////////////////////////////////\n// Implementation\n\nconst assert = require('assert');\nconst sprites = require('./sprites.js');\nconst textures = require('./textures.js');\nconst { vec2, v2copy, v2lerp, v2mul } = require('./vmath.js');\nconst { vec3, vec4, v3add, v4copy, v4lerp, v4mul } = require('./vmath.js');\n\nconst blend_map = {\n  alpha: sprites.BLEND_ALPHA,\n  additive: sprites.BLEND_ADDITIVE\n};\n\nexport function preloadParticleData(particle_data) {\n  // Preload all referenced particle textures\n  for (let key in particle_data.defs) {\n    let def = particle_data.defs[key];\n    for (let part_name in def.particles) {\n      let part_def = def.particles[part_name];\n      textures.load({ url: `img/${part_def.texture}.png` });\n    }\n  }\n}\n\n// Expect all values to be a pair of [base, add_max]\nfunction normalizeValue(v) {\n  if (v instanceof Float32Array && v.length >= 2) {\n    return v;\n  } else if (typeof v === 'number') {\n    return vec2(v, 0);\n  } else if (Array.isArray(v) || v instanceof Float32Array) {\n    // already an array, convert to Vec2\n    return vec2(v[0] || 0, v[1] || 0);\n  } else {\n    return assert(false);\n  }\n}\n\nfunction normalizeValueVec(vec, length) {\n  assert(length);\n  assert(Array.isArray(vec));\n  let ret = new Array(length);\n  for (let ii = 0; ii < length; ++ii) {\n    ret[ii] = normalizeValue(vec[ii]);\n  }\n  return ret;\n}\n\nfunction normalizeParticle(def, particle_manager) {\n  if (!def.normalized) {\n    let norm = def.normalized = {\n      blend: blend_map[def.blend] || sprites.BLEND_ALPHA,\n      texture: textures.load({ url: def.texture ? `img/${def.texture}.png` : 'img/glov/util_circle.png' }),\n      color: normalizeValueVec(def.color || [1, 1, 1, 1], 4),\n      color_track: null,\n      size: normalizeValueVec(def.size || [1, 1], 2),\n      size_track: null,\n      accel: normalizeValueVec(def.accel || [0, 0, 0], 3),\n      rot: normalizeValue(def.rot || 0),\n      rot_vel: normalizeValue(def.rot || 0),\n      lifespan: normalizeValue(def.lifespan || 1000),\n      kill_time_accel: normalizeValue(def.kill_time_accel || 1)\n    };\n    assert(norm.kill_time_accel[0] >= 1); // cannot slow down on kill!\n    if (def.color_track && def.color_track.length) {\n      assert(def.color_track.length > 1);\n      norm.color_track = [];\n      for (let ii = 0; ii < def.color_track.length; ++ii) {\n        let e = def.color_track[ii];\n        assert(typeof e.t === 'number');\n        let arr = new Float32Array(5);\n        arr[0] = e.v[0];\n        arr[1] = e.v[1];\n        arr[2] = e.v[2];\n        arr[3] = e.v[3];\n        arr[4] = e.t;\n        norm.color_track.push(arr);\n      }\n    }\n    if (def.size_track && def.size_track.length) {\n      assert(def.size_track.length > 1);\n      norm.size_track = [];\n      for (let ii = 0; ii < def.size_track.length; ++ii) {\n        let e = def.size_track[ii];\n        assert(typeof e.t === 'number');\n        let arr = new Float32Array(3);\n        arr[0] = e.v[0];\n        arr[1] = e.v[1];\n        arr[2] = e.t;\n        norm.size_track.push(arr);\n      }\n    }\n  }\n  return def.normalized;\n}\n\nfunction findParticle(particles, name) {\n  assert(particles[name] !== undefined);\n  return particles[name];\n}\n\nfunction normalizeEmitter(def, part_map) {\n  if (!def.normalized) {\n    def.normalized = {\n      part_idx: findParticle(part_map, def.particle),\n      pos: normalizeValueVec(def.pos || [0, 0, 0], 3),\n      vel: normalizeValueVec(def.vel || [0, 0, 0], 3),\n      emit_rate: normalizeValue(def.emit_rate || 10),\n      emit_time: normalizeValueVec(def.emit_time || [0, Infinity], 2),\n      emit_initial: normalizeValue(def.emit_initial || 1)\n    };\n    // convert particles per second to ms per emission\n    let min = def.normalized.emit_rate[0];\n    let max = def.normalized.emit_rate[0] + def.normalized.emit_rate[1];\n    def.normalized.emit_rate[0] = 1000 / max;\n    def.normalized.emit_rate[1] = 1000 / min;\n    assert(def.normalized.emit_rate[0] > 1); // Not more than 1000 per second, that's ridic'.\n  }\n  return def.normalized;\n}\n\nfunction normalizeDef(def, particle_manager) {\n  if (!def.normalized) {\n    let norm = def.normalized = {\n      system_lifespan: normalizeValue(def.system_lifespan || Infinity),\n      particles: [],\n      emitters: []\n    };\n    let part_map = {};\n    for (let key in def.particles) {\n      part_map[key] = norm.particles.length;\n      norm.particles.push(normalizeParticle(def.particles[key], particle_manager));\n    }\n    for (let key in def.emitters) {\n      norm.emitters.push(normalizeEmitter(def.emitters[key], part_map));\n    }\n  }\n  return def.normalized;\n}\n\nfunction instValue(v) {\n  return v[0] + Math.random() * v[1];\n}\nfunction instValueVec(v) {\n  let ret = new Float32Array(v.length);\n  for (let ii = 0; ii < v.length; ++ii) {\n    ret[ii] = instValue(v[ii]);\n  }\n  return ret;\n}\n\nlet temp_color = vec4();\nlet temp_color2 = vec4();\nlet temp_size = vec2();\nlet temp_size2 = vec2();\n// let temp_pos = v3allocZero();\n\nclass ParticleSystem {\n  constructor(parent, def_in, pos) {\n    assert(pos.length === 3);\n    this.parent = parent;\n    this.def = normalizeDef(def_in, parent);\n    this.system_lifespan = instValue(this.def.system_lifespan);\n    assert(this.system_lifespan > 0);\n    this.age = 0;\n    this.kill_hard = false;\n    this.kill_soft = false;\n    this.pos = vec3(pos[0], pos[1], pos[2]);\n    this.part_sets = [];\n    for (let ii = 0; ii < this.def.particles.length; ++ii) {\n      let def = this.def.particles[ii];\n      let part_set = {\n        def,\n        parts: []\n      };\n      this.part_sets.push(part_set);\n    }\n    this.emitters = [];\n    // Instantiate emitters\n    for (let ii = 0; ii < this.def.emitters.length; ++ii) {\n      let def = this.def.emitters[ii];\n      let emitter = {\n        def,\n        emit_time: instValueVec(def.emit_time),\n        countdown: 0,\n        started: false,\n        stopped: false\n      };\n      this.emitters.push(emitter);\n    }\n    // do initial tick for things that have an emit_time[0] of 0 and have an emit_initial\n    this.tick(0);\n  }\n\n  tickParticle(part, dt) {\n    // eslint-disable-line class-methods-use-this\n    let def = part.def;\n    part.age += dt;\n    let age_norm = part.age / part.lifespan;\n    if (age_norm >= 1) {\n      return true;\n    }\n\n    // Pos, vel - incrementally computed\n    let dts = dt / 1000;\n    part.pos[0] += part.vel[0] * dts;\n    part.pos[1] += part.vel[1] * dts;\n    part.pos[2] += part.vel[2] * dts;\n    part.vel[0] += part.accel[0] * dts;\n    part.vel[1] += part.accel[1] * dts;\n    part.vel[2] += part.accel[2] * dts;\n\n    // Color, size, rot - explicitly computed\n    v4copy(temp_color, part.color, temp_color);\n    if (def.color_track) {\n      if (age_norm < def.color_track[0][4]) {\n        v4mul(temp_color, temp_color, def.color_track[0]);\n      } else if (age_norm >= def.color_track[def.color_track.length - 1][4]) {\n        v4mul(temp_color, temp_color, def.color_track[def.color_track.length - 1]);\n      } else {\n        for (let ii = 0; ii < def.color_track.length - 1; ++ii) {\n          if (age_norm >= def.color_track[ii][4] && age_norm < def.color_track[ii + 1][4]) {\n            let weight = (age_norm - def.color_track[ii][4]) / (def.color_track[ii + 1][4] - def.color_track[ii][4]);\n            v4lerp(temp_color2, weight, def.color_track[ii], def.color_track[ii + 1]);\n            v4mul(temp_color, temp_color, temp_color2);\n            break;\n          }\n        }\n      }\n    }\n\n    v2copy(temp_size, part.size);\n    if (def.size_track) {\n      if (age_norm < def.size_track[0][4]) {\n        v2mul(temp_size, temp_size, def.size_track[0]);\n      } else if (age_norm >= def.size_track[def.size_track.length - 1][4]) {\n        v2mul(temp_size, temp_size, def.size_track[def.size_track.length - 1]);\n      } else {\n        for (let ii = 0; ii < def.size_track.length - 1; ++ii) {\n          if (age_norm >= def.size_track[ii][4] && age_norm < def.size_track[ii + 1][4]) {\n            let weight = (age_norm - def.size_track[ii][4]) / (def.size_track[ii + 1][4] - def.size_track[ii][4]);\n            v2lerp(temp_size2, weight, def.size_track[ii], def.size_track[ii + 1]);\n            v2mul(temp_size, temp_size, temp_size2);\n            break;\n          }\n        }\n      }\n    }\n\n    // TODO: let rot = part.rot + part.age * part.rot_vel;\n\n    // TODO: draw using:\n    //   rot\n    let w = part.size[0];\n    let h = part.size[1];\n    let x = part.pos[0] - w / 2;\n    let y = part.pos[1] - h / 2;\n    let z = part.pos[2];\n    sprites.queueraw4([def.texture], x, y, x, y + h, x + w, y + h, x + w, y, z, 0, 0, 1, 1, temp_color, null, null, def.blend);\n\n    return false;\n  }\n\n  tickPartSet(dt_orig, part_set) {\n    //let def = part_set.def;\n    let parts = part_set.parts;\n    for (let ii = parts.length - 1; ii >= 0; --ii) {\n      let part = parts[ii];\n      let dt = this.kill_soft ? dt_orig * part.kill_time_accel : dt_orig;\n      if (this.tickParticle(part, dt)) {\n        parts[ii] = parts[parts.length - 1];\n        parts.pop();\n      }\n    }\n  }\n\n  emitParticle(init_dt, emitter) {\n    let emitter_def = emitter.def;\n    let part_set = this.part_sets[emitter_def.part_idx];\n    let def = part_set.def;\n    let pos = instValueVec(emitter_def.pos, 3);\n    v3add(pos, pos, this.pos);\n    // PERFTODO: Make the whole Particle just a data[] Float32Array\n    let part = {\n      def,\n      pos,\n      color: instValueVec(def.color, 4),\n      size: instValueVec(def.size, 4),\n      vel: instValueVec(emitter_def.vel, 3),\n      accel: instValueVec(def.accel, 3),\n      rot: instValue(def.rot),\n      rot_vel: instValue(def.rot_vel),\n      lifespan: instValue(def.lifespan),\n      kill_time_accel: instValue(def.kill_time_accel),\n      age: 0\n    };\n    if (!this.tickParticle(part, init_dt)) {\n      part_set.parts.push(part);\n    }\n  }\n\n  tickEmitter(dt, emitter) {\n    let def = emitter.def;\n    // check for initial emission\n    if (!emitter.started && this.age >= emitter.emit_time[0]) {\n      emitter.started = true;\n      // ignore time before we started emitting\n      dt = this.age - emitter.emit_time[0];\n      let num = instValue(def.emit_initial);\n      for (let ii = 0; ii < num; ++ii) {\n        this.emitParticle(dt, emitter);\n      }\n      emitter.countdown = instValue(def.emit_rate);\n    }\n    if (emitter.started && !emitter.stopped) {\n      // should we stop?\n      let remaining_dt = dt;\n      let emit_dt = dt;\n      if (this.age >= emitter.emit_time[1]) {\n        emitter.stopped = true;\n        // Do not emit during time after we stopped\n        emit_dt -= this.age - emitter.emit_time[1];\n      }\n      // Emit dt's worth of particles\n      while (emit_dt >= emitter.countdown) {\n        emit_dt -= emitter.countdown;\n        remaining_dt -= emitter.countdown;\n        emitter.countdown = instValue(def.emit_rate);\n        this.emitParticle(remaining_dt, emitter);\n      }\n      emitter.countdown -= emit_dt;\n    }\n  }\n\n  tick(dt) {\n    if (this.kill_hard) {\n      return true;\n    }\n    // tick existing particles\n    for (let ii = this.part_sets.length - 1; ii >= 0; --ii) {\n      this.tickPartSet(dt, this.part_sets[ii]);\n    }\n    // advance time and spawn new ones (with partial ticks)\n    this.age += dt;\n    for (let ii = 0; ii < this.emitters.length; ++ii) {\n      this.tickEmitter(dt, this.emitters[ii]);\n    }\n\n    return this.age >= this.system_lifespan; // kill if past lifespan\n  }\n}\n\nclass ParticleManager {\n  constructor() {\n    this.systems = [];\n  }\n\n  createSystem(def, pos) {\n    let system = new ParticleSystem(this, def, pos);\n    this.systems.push(system);\n    return system;\n  }\n\n  tick(dt) {\n    for (let ii = this.systems.length - 1; ii >= 0; --ii) {\n      if (this.systems[ii].tick(dt)) {\n        this.systems[ii] = this.systems[this.systems.length - 1];\n        this.systems.pop();\n      }\n    }\n  }\n}\n\nexport function create(...args) {\n  return new ParticleManager(...args);\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst camera2d = require('./camera2d.js');\nconst { cmd_parse } = require('./cmds.js');\nconst engine = require('./engine.js');\nconst glov_font = require('./font.js');\nconst input = require('./input.js');\nconst { max } = Math;\nconst settings = require('./settings.js');\nconst ui = require('./ui.js');\nconst { vec4, v3copy } = require('./vmath.js');\n\nlet metrics = [];\n\nconst METRIC_PAD = 2;\n\nlet bg_default = vec4(0, 0, 0, 0.5);\nlet bg_mouse_over = vec4(0, 0, 0, 0.75);\nlet bg_fade = vec4();\n\n// referenced in engine.js\nsettings.register({\n  show_metrics: {\n    default_value: 1,\n    type: cmd_parse.TYPE_INT,\n    range: [0, 1]\n  },\n  show_fps: {\n    label: 'Show FPS',\n    default_value: 1,\n    type: cmd_parse.TYPE_INT,\n    range: [0, 3]\n  },\n  fps_graph: {\n    label: 'FPS Graph',\n    default_value: 0,\n    type: cmd_parse.TYPE_INT,\n    range: [0, 1]\n  }\n});\n\nlet fps_style = glov_font.style({\n  outline_width: 2, outline_color: 0x00000080,\n  color: 0xFFFFFFff\n});\n\nexport function addMetric(metric) {\n  if (metric.show_graph) {\n    metric.num_lines = metric.colors.length;\n    metric.history_size = metric.data.history.length / metric.num_lines;\n  }\n  metric.num_labels = Object.keys(metric.labels).length;\n  if (metric.interactable === undefined) {\n    metric.interactable = metric.num_labels > 1 || metric.show_graph;\n  }\n  metrics.push(metric);\n}\n\nfunction showMetric(y, metric) {\n  let font = engine.font;\n  let pad = METRIC_PAD;\n  let METRIC_VALUE_WIDTH = ui.font_height * 2.5;\n  let x = camera2d.x1Real() - METRIC_VALUE_WIDTH - pad;\n  let y0 = y;\n  y += pad;\n  let line_height = ui.font_height;\n  let max_label_w = 0;\n  let max_labels = settings[metric.show_stat];\n  let drew_any = false;\n  let alpha = 1;\n  for (let label in metric.labels) {\n    let value = metric.labels[label]();\n    if (value) {\n      let style = fps_style;\n      if (value.alpha) {\n        alpha = value.alpha;\n        value = value.value;\n        style = glov_font.styleAlpha(fps_style, alpha);\n      }\n      let label_w = font.drawSizedAligned(style, x, y, Z.FPSMETER + 1, line_height, glov_font.ALIGN.HRIGHT, 0, 0, label);\n      max_label_w = max(max_label_w, label_w);\n      font.drawSizedAligned(style, x, y, Z.FPSMETER + 1, line_height, glov_font.ALIGN.HFIT, METRIC_VALUE_WIDTH, 0, value);\n      y += line_height;\n      drew_any = true;\n    }\n    if (! --max_labels) {\n      break;\n    }\n  }\n  let w = METRIC_VALUE_WIDTH + max_label_w + METRIC_PAD;\n  x -= max_label_w + METRIC_PAD;\n\n  if (!drew_any) {\n    return y - pad;\n  }\n\n  y += pad;\n  let bg = bg_default;\n  let pos_param = {\n    x: x - pad,\n    y: y0,\n    w: w + pad * 2,\n    h: y - y0\n  };\n  if (metric.interactable) {\n    if (input.mouseUpEdge(pos_param)) {\n      if (metric.num_labels > 1 && settings[metric.show_stat] <= 1) {\n        settings.set(metric.show_stat, metric.num_labels);\n      } else if (metric.show_graph && !settings[metric.show_graph]) {\n        settings.set(metric.show_graph, 1);\n      } else {\n        if (metric.show_graph) {\n          settings.set(metric.show_graph, 0);\n        }\n        settings.set(metric.show_stat, 1);\n      }\n    }\n    if (input.mouseOver(pos_param)) {\n      bg = bg_mouse_over;\n    }\n  }\n  if (alpha !== 1) {\n    bg_fade[3] = bg[3] * alpha;\n    bg = v3copy(bg_fade, bg);\n  }\n  ui.drawRect(pos_param.x, pos_param.y, pos_param.x + pos_param.w, y, Z.FPSMETER, bg);\n  return y;\n}\n\nfunction showMetricGraph(y, metric) {\n  const small = engine.game_height < 300;\n  const LINE_WIDTH = small ? 1 : 3;\n  const LINE_PAD = small ? 0 : 1;\n  const LINE_HEIGHT = small ? 64 : 128;\n  const NUM_LINES = metric.history_size - 1;\n  let w = (LINE_WIDTH + LINE_PAD) * NUM_LINES;\n  let x = camera2d.x1Real() - w;\n  let h = LINE_HEIGHT + LINE_PAD * 2;\n  let z = Z.FPSMETER;\n  ui.drawRect(x, y - h, x + w, y, z++, bg_default);\n  x += LINE_PAD;\n  y -= LINE_PAD;\n  let history_index = metric.data.index;\n  let line_scale = LINE_HEIGHT / metric.line_scale_top;\n  for (let ii = 0; ii < NUM_LINES; ii++) {\n    let line_index = (ii + history_index + 1) % metric.history_size * metric.num_lines;\n    let data = metric.data.history;\n    let bar_max = 0;\n    for (let jj = 0; jj < metric.num_lines; jj++) {\n      let line_jj = data[line_index + jj];\n      let bar_min;\n      if (metric.bars_stack) {\n        bar_min = bar_max;\n        bar_max += line_jj;\n      } else {\n        // bars overlap, figure out how big this bar should be relative to next smallest\n        let lesser = 0;\n        for (let kk = 0; kk < metric.num_lines; kk++) {\n          if (kk === jj) {\n            continue;\n          }\n          let line_kk = data[line_index + kk];\n          if ((line_kk < line_jj || line_kk === line_jj && kk < jj) && line_kk > lesser) {\n            lesser = line_kk;\n          }\n        }\n        bar_min = lesser;\n        bar_max = line_jj;\n      }\n      let color = metric.colors[jj];\n      ui.drawRect(x, y - bar_max * line_scale, x + LINE_WIDTH, y - bar_min * line_scale, z, color);\n    }\n    x += LINE_WIDTH + LINE_PAD;\n  }\n  z += NUM_LINES;\n  y -= LINE_HEIGHT + LINE_PAD;\n  return y;\n}\n\nexport function draw() {\n  camera2d.setAspectFixed(engine.game_width, engine.game_height);\n  let y = camera2d.y0Real();\n  let y_graph = camera2d.y1Real();\n  for (let ii = 0; ii < metrics.length; ++ii) {\n    let metric = metrics[ii];\n    if (settings[metric.show_stat]) {\n      y = showMetric(y, metric);\n      y += METRIC_PAD;\n    }\n    if (settings[metric.show_graph]) {\n      y_graph = showMetricGraph(y_graph, metric);\n      y_graph -= METRIC_PAD;\n    }\n  }\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nlet user_want_locked = false;\nlet elem;\nlet on_ptr_lock;\n\nexport function isLocked() {\n  return user_want_locked; // Either it's locked, or there's an async attempt to lock it outstanding\n}\n\nfunction pointerLog(msg) {\n  console.log(`PointerLock: ${msg}`); // TODO: Disable this after things settle\n}\n\nexport function exit() {\n  pointerLog('Lock exit requested');\n  user_want_locked = false;\n  document.exitPointerLock();\n}\n\nexport function enter(when) {\n  user_want_locked = true;\n  on_ptr_lock();\n  pointerLog(`Trying pointer lock in response to ${when}`);\n  elem.requestPointerLock();\n}\n\nfunction onPointerLockChange() {\n  if (document.pointerLockElement || document.mozPointerLockElement || document.webkitPointerLockElement) {\n    pointerLog('Lock successful');\n    if (!user_want_locked) {\n      pointerLog('User canceled lock');\n      document.exitPointerLock();\n    }\n  } else {\n    if (user_want_locked) {\n      pointerLog('Lock lost');\n      user_want_locked = false;\n    }\n  }\n}\n\nfunction onPointerLockError(e) {\n  pointerLog('Error');\n  user_want_locked = false;\n}\n\nexport function startup(_elem, _on_ptr_lock) {\n  elem = _elem;\n  on_ptr_lock = _on_ptr_lock;\n\n  elem.requestPointerLock = elem.requestPointerLock || elem.mozRequestPointerLock || elem.webkitRequestPointerLock || function () {/* nop */};\n  document.exitPointerLock = document.exitPointerLock || document.mozExitPointerLock || document.webkitExitPointerLock || function () {/* nop */};\n\n  document.addEventListener('pointerlockchange', onPointerLockChange, false);\n  document.addEventListener('mozpointerlockchange', onPointerLockChange, false);\n  document.addEventListener('webkitpointerlockchange', onPointerLockChange, false);\n\n  document.addEventListener('pointerlockerror', onPointerLockError, false);\n  document.addEventListener('mozpointerlockerror', onPointerLockError, false);\n  document.addEventListener('webkitpointerlockerror', onPointerLockError, false);\n}","/* eslint no-extend-native:off,no-var:off,func-style:off,no-invalid-this:off */\n\n// TypedArray.slice - not supported on IE, some older Safari\nif (!Uint8Array.prototype.slice) {\n  Object.defineProperty(Uint8Array.prototype, 'slice', {\n    value: function (begin, end) {\n      // PERFTODO: If we use this on any significant audience, this can be likely\n      // way faster by not making a temporary Array in the middle\n      return new Uint8Array(Array.prototype.slice.call(this, begin, end));\n    }\n  });\n  Object.defineProperty(Int8Array.prototype, 'slice', {\n    value: function (begin, end) {\n      return new Int8Array(Array.prototype.slice.call(this, begin, end));\n    }\n  });\n  Object.defineProperty(Int32Array.prototype, 'slice', {\n    value: function (begin, end) {\n      return new Int32Array(Array.prototype.slice.call(this, begin, end));\n    }\n  });\n  Object.defineProperty(Float32Array.prototype, 'slice', {\n    value: function (begin, end) {\n      return new Float32Array(Array.prototype.slice.call(this, begin, end));\n    }\n  });\n}\n\nif (!Int32Array.prototype.join) {\n  Object.defineProperty(Int32Array.prototype, 'join', {\n    value: function (delim) {\n      return Array.prototype.join.call(this, delim);\n    }\n  });\n}\n\nif (!Uint8Array.prototype.fill) {\n  var fill = function (value, begin, end) {\n    if (end === undefined) {\n      end = this.length;\n    }\n    for (var ii = begin || 0; ii < end; ++ii) {\n      this[ii] = value;\n    }\n    return this;\n  };\n  Object.defineProperty(Uint8Array.prototype, 'fill', {\n    value: fill\n  });\n  Object.defineProperty(Int16Array.prototype, 'fill', {\n    value: fill\n  });\n  Object.defineProperty(Int32Array.prototype, 'fill', {\n    value: fill\n  });\n}\n\nif (!Int16Array.prototype.sort) {\n  var cmpDefault = function (a, b) {\n    return a - b;\n  };\n  var sort = function (cmp) {\n    Array.prototype.sort.call(this, cmp || cmpDefault);\n  };\n  Object.defineProperty(Int16Array.prototype, 'sort', {\n    value: sort\n  });\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint complexity:off */\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst glov_engine = require('./engine.js');\nconst glov_input = require('./input.js');\nconst glov_font = require('./font.js');\nconst glov_ui = require('./ui.js');\nconst { vec4 } = require('./vmath.js');\nlet glov_markup = null; // Not ported\n\nconst { min, max, sin } = Math;\nconst { cloneShallow, merge, nearSame } = require('../../common/util.js');\n\nlet font;\n\nconst selbox_font_style_default = glov_font.style(null, {\n  color: 0xDFDFDFff\n});\n\nconst selbox_font_style_selected = glov_font.style(null, {\n  color: 0xFFFFFFff\n});\n\nconst selbox_font_style_down = glov_font.style(null, {\n  color: 0x000000ff\n});\n\nconst selbox_font_style_disabled = glov_font.style(null, {\n  color: 0x808080ff\n});\n\nexport const default_display = {\n  style_default: selbox_font_style_default,\n  style_selected: selbox_font_style_selected,\n  style_disabled: selbox_font_style_disabled,\n  style_down: selbox_font_style_down,\n  no_background: false,\n  no_buttons: false,\n  centered: false,\n  bounce: true,\n  tab_stop: 0,\n  xpad: 8,\n  // selection_highlight: null, // TODO: custom / better selection highlight for menus\n  use_markup: false // always false, Markup not ported\n};\n\nconst color_gray50 = vec4(0.313, 0.313, 0.313, 1.000);\nconst color_gray80 = vec4(0.500, 0.500, 0.500, 1.000);\nconst color_grayD0 = vec4(0.816, 0.816, 0.816, 1.000);\nconst color_white = vec4(1, 1, 1, 1);\n\nconst SELBOX_BOUNCE_TIME = 80;\n\n// Used by GlovSimpleMenu and GlovSelectionBox\nexport class GlovMenuItem {\n  constructor(params) {\n    params = params || {};\n    if (params instanceof GlovMenuItem) {\n      for (let field in params) {\n        this[field] = params[field];\n      }\n      return;\n    }\n    if (typeof params === 'string') {\n      params = { name: params };\n    }\n    this.name = params.name || 'NO_NAME'; // name to display\n    this.state = params.state || null; // state to set upon selection\n    this.cb = params.cb || null; // callback to call upon selection\n    // TODO - cb function on value change?\n    this.value = null; // can be number or string\n    this.value_min = 0;\n    this.value_max = 0;\n    this.value_inc = 0;\n    this.tag = params.tag || null; // for isSelected(tag)\n    // was bitmask\n    this.exit = Boolean(params.exit);\n    this.prompt_int = Boolean(params.prompt_int);\n    this.prompt_string = Boolean(params.prompt_string);\n    this.no_sound = Boolean(params.no_sound);\n    this.slider = Boolean(params.slider);\n    this.no_controller_exit = Boolean(params.no_controller_exit);\n    this.plus_minus = Boolean(params.plus_minus);\n    this.disabled = Boolean(params.disabled);\n    this.centered = Boolean(params.centered);\n  }\n}\n\nclass GlovSelectionBox {\n  constructor(params) {\n    // Options (and defaults)\n    this.x = 0;\n    this.y = 0;\n    this.z = Z.UI;\n    this.width = glov_ui.button_width;\n    this.items = [];\n    this.is_dropdown = false;\n    this.transient_focus = false;\n    this.disabled = false;\n    this.display = cloneShallow(default_display);\n    this.scroll_height = 0;\n    this.font_height = glov_ui.font_height;\n    this.entry_height = glov_ui.button_height;\n    this.auto_reset = true;\n    this.auto_unfocus = true;\n    this.initial_selection = 0;\n    this.applyParams(params);\n\n    // Run-time state\n    this.dropdown_visible = false;\n    this.selected = 0;\n    this.was_clicked = false;\n    this.was_right_clicked = false;\n    this.is_focused = false;\n    this.dummy_focus_check = { selbox_dummy: 1 };\n    this.mouse_mode = false;\n    this.last_mousex = 0;\n    this.last_mousey = 0;\n    this.bounce_time = 0;\n    this.expected_frame_index = 0;\n    this.pre_dropdown_selection = undefined;\n    // this.sa = TODO\n  }\n\n  applyParams(params) {\n    if (!params) {\n      return;\n    }\n    for (let f in params) {\n      if (f === 'items') {\n        this.items = params.items.map(item => new GlovMenuItem(item));\n      } else if (f === 'display') {\n        merge(this.display, params[f]);\n      } else {\n        this[f] = params[f];\n      }\n    }\n  }\n\n  isSelected(tag_or_index) {\n    if (typeof tag_or_index === 'number') {\n      return this.selected === tag_or_index;\n    }\n    return this.items[this.selected].tag === tag_or_index;\n  }\n\n  getSelected() {\n    return this.items[this.selected];\n  }\n\n  getHeight() {\n    let { display, entry_height } = this;\n    if (this.is_dropdown) {\n      return entry_height + 2;\n    }\n    let list_height = this.items.length * entry_height;\n    let do_scroll = this.scroll_height && this.items.length * entry_height > this.scroll_height;\n    if (do_scroll) {\n      list_height = this.scroll_height;\n    }\n    list_height += 2;\n    if (!display.no_background) {\n      list_height += 4;\n    }\n    return list_height + 3;\n  }\n\n  run(params) {\n    this.applyParams(params);\n    let { x, y, z, width, font_height, entry_height, auto_reset } = this;\n    let { KEYS, PAD } = glov_input;\n\n    if (auto_reset && this.expected_frame_index !== glov_engine.getFrameIndex()) {\n      // Reset\n      if (this.items[this.initial_selection] && !this.items[this.initial_selection].disabled) {\n        this.selected = this.initial_selection;\n      } else {\n        // Selection out of range or disabled, select first non-disabled entry\n        for (let ii = 0; ii < this.items.length; ++ii) {\n          if (!this.items[ii].disabled) {\n            this.selected = ii;\n            break;\n          }\n        }\n      }\n    }\n\n    let y0 = y;\n    let yret;\n    let display = this.display;\n    this.was_clicked = false;\n    this.was_right_clicked = false;\n    let pos_changed = false;\n\n    let was_focused = this.is_focused;\n    // Trick to detect if we gained focus from ahead or behind of ourselves, for transient_focus mode\n    let gained_focus_forward = false;\n    if (!this.disabled && !this.is_focused) {\n      gained_focus_forward = glov_ui.focusCheck(this.dummy_focus_check);\n      if (gained_focus_forward) {\n        glov_ui.focusSteal(this);\n      }\n    }\n\n    let old_sel = this.selected;\n    let focused = this.is_focused = this.disabled ? false : glov_ui.focusCheck(this);\n    let gained_focus = focused && !was_focused;\n\n    if (!focused && this.dropdown_visible) {\n      if (this.pre_dropdown_selection !== undefined) {\n        // Restore selection to before opening the dropdown\n        this.selected = this.pre_dropdown_selection;\n        this.pre_dropdown_selection = undefined;\n      }\n      this.dropdown_visible = false;\n    }\n\n    let num_non_disabled_selections = 0;\n    let eff_sel = -1;\n    for (let ii = 0; ii < this.items.length; ++ii) {\n      let item = this.items[ii];\n      if (!item.disabled) {\n        if (eff_sel === -1 && this.selected <= ii) {\n          eff_sel = num_non_disabled_selections;\n        }\n        num_non_disabled_selections++;\n      }\n    }\n    // This is OK, can have an empty selection box: assert(num_non_disabled_selections);\n    if (eff_sel === -1) {\n      // perhaps had the end selected, and selection became smaller\n      eff_sel = 0;\n    }\n\n    if (this.transient_focus && gained_focus) {\n      if (gained_focus_forward) {\n        eff_sel = 0;\n      } else {\n        eff_sel = num_non_disabled_selections - 1;\n      }\n      pos_changed = true;\n    }\n\n    if (!this.is_dropdown && !display.no_background) {\n      let bg_height = this.getHeight();\n      if (focused) {\n        glov_ui.drawRect(x, y, x + width, y + bg_height - 2, z, color_white);\n        y += 2;\n        x += 2;\n        width -= 4;\n        glov_ui.drawRect(x, y, x + width, y + bg_height - 6, z + 0.1, color_gray50);\n        y += 2;\n        x += 2;\n        width -= 4;\n      } else {\n        glov_ui.drawRect(x, y, x + width, y + bg_height - 2, z, color_gray50);\n        y += 4;\n        x += 4;\n        width -= 8;\n      }\n    }\n\n    let page_size = (this.scroll_height - 1) / entry_height;\n\n    if (focused) {\n      let pad_shift = glov_input.padButtonDown(PAD.RIGHT_TRIGGER) || glov_input.padButtonDown(PAD.LEFT_TRIGGER);\n      let value = glov_input.keyDownEdge(KEYS.PAGEDOWN) + (pad_shift ? glov_input.padButtonDownEdge(PAD.DOWN) : 0);\n      if (value) {\n        eff_sel += page_size * value;\n        eff_sel = min(eff_sel, num_non_disabled_selections - 1);\n        this.mouse_mode = false;\n        pos_changed = true;\n      }\n      value = glov_input.keyDownEdge(KEYS.PAGEUP) + (pad_shift ? glov_input.padButtonDownEdge(PAD.UP) : 0);\n      if (value) {\n        eff_sel -= page_size * value;\n        eff_sel = max(eff_sel, 0);\n        this.mouse_mode = false;\n        pos_changed = true;\n      }\n      value = glov_input.keyDownEdge(KEYS.DOWN) + glov_input.keyDownEdge(KEYS.S) + glov_input.padButtonDownEdge(PAD.DOWN);\n      if (value) {\n        eff_sel += value;\n        this.mouse_mode = false;\n        pos_changed = true;\n      }\n      value = glov_input.keyDownEdge(KEYS.UP) + glov_input.keyDownEdge(KEYS.W) + glov_input.padButtonDownEdge(PAD.UP);\n      if (value) {\n        eff_sel -= value;\n        this.mouse_mode = false;\n        pos_changed = true;\n      }\n      if (glov_input.keyDownEdge(KEYS.HOME)) {\n        eff_sel = 0;\n        this.mouse_mode = false;\n        pos_changed = true;\n      }\n      if (glov_input.keyDownEdge(KEYS.END)) {\n        eff_sel = num_non_disabled_selections - 1;\n        this.mouse_mode = false;\n        pos_changed = true;\n      }\n    }\n\n    let sel_changed = false;\n    if (eff_sel < 0) {\n      if (this.transient_focus) {\n        eff_sel = 0;\n        sel_changed = true;\n        glov_ui.focusPrev(this);\n      } else {\n        eff_sel = num_non_disabled_selections - 1;\n      }\n    }\n    if (eff_sel >= num_non_disabled_selections && num_non_disabled_selections) {\n      if (this.transient_focus) {\n        eff_sel = num_non_disabled_selections - 1;\n        sel_changed = true;\n        glov_ui.focusNext(this);\n      } else {\n        eff_sel = 0;\n      }\n    }\n\n    // Convert from eff_sel back to actual selection\n    for (let ii = 0; ii < this.items.length; ++ii) {\n      let item = this.items[ii];\n      if (!item.disabled) {\n        if (!eff_sel) {\n          this.selected = ii;\n          break;\n        }\n        --eff_sel;\n      }\n    }\n\n    let pad = 8;\n\n    if (this.is_dropdown) {\n      // display header\n      let color0 = color_white;\n      if (this.disabled) {\n        color0 = color_gray80;\n      }\n      // let color1 = color_white;\n      // let dropdown_rect = glov_ui.sprites.menu_header.uidata.rects[2];\n      // let dropdown_width = (dropdown_rect[2] - dropdown_rect[0]) / (dropdown_rect[3] - dropdown_rect[1]) *\n      //   entry_height;\n      // let dropdown_x = x + width - dropdown_width;\n      //int dropdown_w = glov_ui_menu_header.right.GetTileWidth();\n      if (!this.disabled && glov_input.click({\n        x, y,\n        w: width, h: entry_height\n      })) {\n        glov_ui.focusSteal(this);\n        this.dropdown_visible = !this.dropdown_visible;\n        this.pre_dropdown_selection = this.selected;\n        color0 = color_grayD0;\n        // color1 = color_gray80;\n      } else if (!this.disabled && glov_input.mouseOver({\n        x, y, w: width, h: entry_height\n      })) {\n        glov_ui.setMouseOver(this);\n        color0 = color_grayD0;\n        // color1 = color_gray80;\n      }\n      glov_ui.drawHBox({\n        x, y, z: z + 1,\n        w: width, h: entry_height\n      }, glov_ui.sprites.menu_header, color0); // TODO: only pieces 1 and 2?\n      // glov_ui.draw_list.queue(glov_ui.sprites.menu_header,\n      //   dropdown_x, y, z + 1.5, color1, [dropdown_width, entry_height, 1, 1],\n      //   glov_ui.sprites.menu_header.uidata.rects[2]);\n      font.drawSizedAligned(focused ? glov_ui.font_style_focused : glov_ui.font_style_normal, x + display.xpad, y, z + 2, font_height, glov_font.ALIGN.HFIT | glov_font.ALIGN.VCENTER, // eslint-disable-line no-bitwise\n      width - display.xpad - glov_ui.sprites.menu_header.uidata.wh[2] * entry_height, entry_height, this.items[this.selected].name);\n      y += entry_height;\n      yret = y + 2;\n      z += 1000; // drop-down part should be above everything\n    }\n\n    if (!this.is_dropdown || this.dropdown_visible) {\n      let do_scroll = this.scroll_height && this.items.length * entry_height > this.scroll_height;\n      if (!do_scroll && y + this.items.length * entry_height >= camera2d.y1()) {\n        y = camera2d.y1() - this.items.length * entry_height;\n      }\n      let y_save = y;\n      let x_save = x;\n      let scroll_pos = 0;\n      let eff_width = width;\n      if (do_scroll) {\n        // this.sa.display = &scroll_area_no_background;\n        if (pos_changed) {\n          // ensure part of visible scroll area includes the current selection\n          let buffer = min(1.5 * entry_height, (this.scroll_height - entry_height) / 2);\n          let min_scroll_pos = max(0, this.selected * entry_height - buffer);\n          let old_scroll_pos = this.sa.scroll_pos;\n          if (min_scroll_pos < this.sa.scroll_pos) {\n            this.sa.scroll_pos = min_scroll_pos;\n          }\n          let max_scroll_pos = min(this.items.length * entry_height, (this.selected + 1) * entry_height + buffer) - this.scroll_height;\n          if (max_scroll_pos > this.sa.scroll_pos) {\n            this.sa.scroll_pos = max_scroll_pos;\n          }\n          // Make it smooth/bouncy a bit\n          this.sa.overscroll = old_scroll_pos - this.sa.scroll_pos;\n        }\n        this.sa.begin(x, y, z, width, this.scroll_height, color_white);\n        scroll_pos = this.sa.scroll_pos + this.sa.overscroll;\n        y = 0;\n        x = 0;\n        // extern float glov_scrollbar_scale;\n        // eff_width = width - glov_ui_scrollbar_top.GetTileWidth() * glov_scrollbar_scale;\n      }\n      for (let i = 0; i < this.items.length; i++) {\n        let item = this.items[i];\n        let entry_disabled = item.disabled;\n        let image_set = null;\n        if (!this.disabled && !entry_disabled && glov_input.click({\n          x, y, w: width, h: entry_height\n        })) {\n          glov_ui.focusSteal(this);\n          this.was_clicked = true;\n          this.mouse_mode = true;\n          this.selected = i;\n        }\n        if (!this.disabled && !entry_disabled && glov_input.click({\n          x, y, w: width, h: entry_height\n        })) {\n          glov_ui.focusSteal(this);\n          this.was_right_clicked = true;\n          this.mouse_mode = true;\n          this.selected = i;\n        }\n        let is_mouseover = false;\n        if (!this.disabled && !entry_disabled && glov_input.mouseOver({\n          x, y, w: width, h: entry_height\n        })) {\n          let mpos = glov_input.mousePos();\n          is_mouseover = true;\n          if (focused || this.transient_focus) {\n            if (this.expected_frame_index === glov_engine.getFrameIndex() && (mpos[0] !== this.last_mousex || !nearSame(mpos[1] - scroll_pos, this.last_mousey, 1.25))) {\n              this.mouse_mode = true;\n              this.selected = i;\n            }\n            this.last_mousex = mpos[0];\n            this.last_mousey = mpos[1] - scroll_pos;\n          }\n          // Not used anymore because in mouse_mode, rollover *is* selection, don't have two cursors!\n          // if (this.mouse_mode) {\n          //   text_color = 0x000000ff;\n          //   image_set = &menu_rollover;\n          // }\n        }\n\n        let style;\n        let show_selection = !this.disabled && (!(this.transient_focus && !this.is_focused) || is_mouseover);\n        let bounce = false;\n        if (this.selected === i && show_selection) {\n          style = display.style_selected || selbox_font_style_selected;\n          image_set = glov_ui.sprites.menu_selected;\n          if (is_mouseover && glov_input.mouseDown()) {\n            if (glov_ui.sprites.menu_down) {\n              image_set = glov_ui.sprites.menu_down;\n            } else {\n              style = display.style_down || selbox_font_style_down;\n            }\n          }\n          if (display.bounce && !this.is_dropdown) {\n            let ms = glov_engine.getFrameDt();\n            if (this.selected !== old_sel) {\n              bounce = true;\n              this.bounce_time = SELBOX_BOUNCE_TIME;\n            } else if (ms >= this.bounce_time) {\n              this.bounce_time = 0;\n            } else {\n              bounce = true;\n              this.bounce_time -= ms;\n            }\n          }\n        } else if (entry_disabled) {\n          style = display.style_disabled || selbox_font_style_disabled;\n          image_set = glov_ui.sprites.menu_entry;\n        } else {\n          style = display.style_default || selbox_font_style_default;\n          image_set = glov_ui.sprites.menu_entry;\n        }\n        let yoffs = 0;\n        let bounce_amt = 0;\n        if (bounce) {\n          bounce_amt = sin(this.bounce_time * 20 / SELBOX_BOUNCE_TIME / 10);\n          yoffs = -4 * bounce_amt * entry_height / 32;\n        }\n        if (!display.no_buttons) {\n          glov_ui.drawHBox({ x, y: y + yoffs, z: z + 1, w: eff_width, h: entry_height }, image_set, color_white);\n        }\n        // spriteListClipperPush(x, y + yoffs, eff_width - pad, entry_height);\n        let did_tab = false;\n        let text_y = y + yoffs;\n        if (display.tab_stop) {\n          let str = item.name;\n          let tab_idx = str.indexOf('\\t');\n          if (tab_idx !== -1) {\n            did_tab = true;\n            let pre = str.slice(0, tab_idx);\n            let post = str.slice(tab_idx + 1);\n            let x1 = x + display.xpad;\n            let x2 = x + display.xpad + display.tab_stop + pad;\n            let w1 = display.tab_stop;\n            let w2 = eff_width - display.tab_stop - display.xpad * 2 - pad;\n            if (display.use_markup) {\n              let md = {};\n              md.align = glov_font.ALIGN.HFIT;\n              md.x_size = md.y_size = font_height;\n              md.w = w1;\n              md.h = 1;\n              md.style = style;\n              glov_markup.print(md, x1, text_y, z + 2, pre);\n              md.w = w2;\n              glov_markup.print(md, x2, text_y, z + 2, post);\n            } else {\n              font.drawSizedAligned(style, x1, text_y, z + 2, font_height, glov_font.ALIGN.HFIT | glov_font.ALIGN.VCENTER, // eslint-disable-line no-bitwise\n              w1, entry_height, pre);\n              font.drawSizedAligned(style, x2, text_y, z + 2, font_height, glov_font.ALIGN.HFIT | glov_font.ALIGN.VCENTER, // eslint-disable-line no-bitwise\n              w2, entry_height, post);\n            }\n          }\n        }\n        if (!did_tab) {\n          let md = {};\n          // eslint-disable-next-line no-bitwise\n          md.align = (item.centered || display.centered ? glov_font.ALIGN.HCENTERFIT : glov_font.ALIGN.HFIT) | glov_font.ALIGN.VCENTER;\n          md.x_size = md.y_size = font_height;\n          md.w = eff_width - display.xpad * 2;\n          md.h = entry_height;\n          md.style = style;\n          let xx = x + display.xpad;\n          let zz = z + 2;\n          if (display.use_markup) {\n            glov_markup.print(md, xx, text_y, zz, item.name);\n          } else {\n            font.drawSizedAligned(md.style, xx, text_y, zz, md.x_size, md.align, md.w, md.h, item.name);\n          }\n        }\n        // spriteListClipperPop();\n        // if (display.selection_highlight && this.selected === i && show_selection) {\n        //   let grow = 0.2 * (1 - bounce_amt);\n        //   display.selection_highlight.DrawStretched(\n        //     x - grow * eff_width, y - grow * entry_height, z + 1.5,\n        //     eff_width * (1 + 2 * grow), entry_height * (1 + 2 * grow), 0, 0xFF);\n        // }\n        y += entry_height;\n      }\n      if (do_scroll) {\n        this.sa.end(y);\n        y = y_save + this.scroll_height;\n        x = x_save;\n      }\n\n      if (this.was_clicked && this.is_dropdown) {\n        this.dropdown_visible = false;\n      }\n    }\n\n    if (this.selected !== old_sel || sel_changed) {\n      glov_ui.playUISound('rollover');\n    }\n\n    if (focused && this.auto_unfocus) {\n      if (glov_input.click({ peek: true })) {\n        glov_ui.focusSteal('canvas');\n      }\n    }\n\n    this.expected_frame_index = glov_engine.getFrameIndex() + 1;\n    x = 10;\n    y += 5;\n    if (!this.is_dropdown) {\n      yret = y;\n    }\n    assert.equal(yret - y0, this.getHeight());\n    return yret - y0;\n  }\n}\n\nexport function create(...args) {\n  if (!font) {\n    font = glov_ui.font;\n  }\n  return new GlovSelectionBox(...args);\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst { titleCase } = require('../../common/util.js');\nconst { cmd_parse } = require('./cmds.js');\n\nexports.true = true; // for perf.js\n\nexport function get(key) {\n  return exports[key];\n}\n\nexport function set(key, value) {\n  if (exports[key] !== value) {\n    cmd_parse.handle(null, `${key} ${value}`, null); // uses default cmd_parse handler\n  }\n}\n\nexport function register(defs) {\n  Object.keys(defs).forEach(function (key) {\n    let def = defs[key];\n    exports[key] = def.default_value;\n    cmd_parse.registerValue(key, {\n      type: def.type,\n      label: def.label || titleCase(key.replace(/_/g, ' ')),\n      range: def.range,\n      get: () => exports[key],\n      set: v => exports[key] = v,\n      store: true,\n      ver: def.ver,\n      help: def.help,\n      usage: def.usage\n    });\n  });\n}\n\nregister({\n  show_metrics: {\n    default_value: 1,\n    type: cmd_parse.TYPE_INT,\n    range: [0, 1]\n  },\n  max_fps: {\n    label: 'Max FPS',\n    default_value: 0,\n    type: cmd_parse.TYPE_FLOAT\n  }\n});","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst assert = require('assert');\nconst engine = require('./engine.js');\n\nconst { matchAll } = require('../../common/util.js');\n\nlet last_id = 0;\n\nlet bound_prog = null;\n\nexport const semantic = {\n  'ATTR0': 0,\n  'POSITION': 0,\n  'ATTR1': 1,\n  'COLOR': 1,\n  'COLOR_0': 1,\n  'ATTR2': 2,\n  'TEXCOORD': 2,\n  'TEXCOORD_0': 2,\n  'ATTR3': 3,\n  'NORMAL': 3,\n  'ATTR4': 4,\n  'TEXCOORD_1': 4\n};\n\nexport let globals;\nlet defines;\n\nlet error_fp;\nlet error_vp;\n\nconst vp_attr_regex = /attribute [^ ]+ ([^ ;]+);/g;\nconst uniform_regex = /uniform (?:(?:low|medium|high)p )?((?:(?:vec|mat)\\d(?:x\\d)?|float) [^ ;]+);/g;\nconst sampler_regex = /uniform sampler2D ([^ ;]+);/g;\nconst include_regex = /\\n#include \"([^\"]+)\"/g;\n\nconst type_size = {\n  float: 1,\n  vec2: 2 * 1,\n  vec3: 3 * 1,\n  vec4: 4 * 1,\n  mat3: 3 * 3,\n  mat4: 4 * 4\n};\n\nlet includes = {};\n\nexport function addInclude(key, text) {\n  assert(!includes[key]);\n  includes[key] = `\\n// from include \"${key}\":\\n${text}\\n`;\n}\n\nlet report_queued = false;\nlet shader_errors;\nfunction reportShaderError(err) {\n  function doReport() {\n    assert(false, `Shader error(s):\\n    ${shader_errors.join('\\n    ')}`);\n    shader_errors = null;\n  }\n  if (!report_queued) {\n    setTimeout(doReport, 1000);\n    report_queued = true;\n    shader_errors = [];\n  }\n  shader_errors.push(err);\n}\n\nfunction parseIncludes(text) {\n  let supplied_uniforms = {};\n  text.replace(uniform_regex, function (str, key) {\n    supplied_uniforms[key] = true;\n  });\n  text = text.replace(include_regex, function (str, filename) {\n    let replacement = includes[filename];\n    if (!replacement) {\n      console.error(`Could not evaluate ${str}`);\n      return str;\n    }\n    // Remove duplicate uniforms\n    replacement = replacement.replace(uniform_regex, function (str2, key) {\n      if (supplied_uniforms[key]) {\n        return `// [removed ${key}]`;\n      }\n      supplied_uniforms[key] = true;\n      return str2;\n    });\n    return replacement;\n  });\n  return text;\n}\n\nconst webgl2_header = ['#version 300 es', '#define WEBGL2'].join('\\n');\nconst webgl2_header_fp = [webgl2_header, '#define varying in', 'out lowp vec4 fragColor;', '#define gl_FragColor fragColor', '#define texture2D texture', ''].join('\\n');\nconst webgl2_header_vp = [webgl2_header, '#define varying out', '#define attribute in', ''].join('\\n');\n\nfunction Shader(type, name, text) {\n  assert.equal(typeof text, 'string');\n  this.name = name;\n  let header = '';\n  if (engine.webgl2 && text.indexOf('#pragma WebGL2') !== -1) {\n    header = type === gl.VERTEX_SHADER ? webgl2_header_vp : webgl2_header_fp;\n  }\n  text = `${header}${defines}${text}`;\n  text = parseIncludes(text);\n  text = text.replace(/#pragma WebGL2?/g, '');\n  this.shader = gl.createShader(type);\n  if (type === gl.VERTEX_SHADER) {\n    this.programs = {};\n    this.attributes = matchAll(text, vp_attr_regex);\n    // Ensure they are known names so we can give them indices\n    // Add to semantic[] above as needed\n    this.attributes.forEach(v => assert(semantic[v] !== undefined));\n  } else {\n    this.id = ++last_id;\n    this.samplers = matchAll(text, sampler_regex);\n    // Ensure all samplers end in a unique number\n    let found = [];\n    this.samplers.forEach(v => {\n      let num = Number(v.slice(-1));\n      assert(!isNaN(num));\n      assert(!found[num]);\n      found[num] = true;\n    });\n  }\n  this.uniforms = matchAll(text, uniform_regex);\n  // Ensure a known type\n  this.uniforms.forEach(v => {\n    let type_name = v.split(' ')[0];\n    assert(type_size[type_name]);\n  });\n  gl.shaderSource(this.shader, text);\n  gl.compileShader(this.shader);\n\n  if (!gl.getShaderParameter(this.shader, gl.COMPILE_STATUS)) {\n    let error_text = gl.getShaderInfoLog(this.shader).replace(/\\0/g, '').trim();\n    console.error(`Error compiling ${name}: ${error_text}`);\n    reportShaderError(`${name}: ${error_text}`);\n    // eslint-disable-next-line newline-per-chained-call\n    console.log(text.split('\\n').map((line, idx) => `${idx + 1}: ${line}`).join('\\n'));\n  }\n}\n\nexport function create(type, name, text) {\n  return new Shader(type, name, text);\n}\n\nfunction uniformSetValue(unif) {\n  switch (unif.width) {// eslint-disable-line default-case\n    case 1:\n      gl.uniform1fv(unif.location, unif.value);\n      break;\n    case 2:\n      gl.uniform2fv(unif.location, unif.value);\n      break;\n    case 3:\n      gl.uniform3fv(unif.location, unif.value);\n      break;\n    case 4:\n      gl.uniform4fv(unif.location, unif.value);\n      break;\n    case 9:\n      gl.uniformMatrix3fv(unif.location, false, unif.value);\n      break;\n    case 16:\n      gl.uniformMatrix4fv(unif.location, false, unif.value);\n      break;\n  }\n}\n\nfunction link(vp, fp) {\n  let prog = vp.programs[fp.id] = {\n    handle: gl.createProgram(),\n    uniforms: null\n  };\n  gl.attachShader(prog.handle, vp.shader);\n  gl.attachShader(prog.handle, fp.shader);\n  // call this for all relevant semantic\n  for (let ii = 0; ii < vp.attributes.length; ++ii) {\n    gl.bindAttribLocation(prog.handle, semantic[vp.attributes[ii]], vp.attributes[ii]);\n  }\n  gl.linkProgram(prog.handle);\n\n  prog.valid = gl.getProgramParameter(prog.handle, gl.LINK_STATUS);\n  if (!prog.valid) {\n    reportShaderError(`Shader link error (${vp.name} & ${fp.name}): ${gl.getProgramInfoLog(prog.handle)}`);\n    console.error(`Shader link error: ${gl.getProgramInfoLog(prog.handle)}`);\n  }\n\n  gl.useProgram(prog.handle);\n  bound_prog = prog;\n\n  let uniforms = vp.uniforms.slice(0);\n  for (let ii = 0; ii < fp.uniforms.length; ++ii) {\n    let name = fp.uniforms[ii];\n    if (uniforms.indexOf(name) === -1) {\n      uniforms.push(name);\n    }\n  }\n  prog.uniforms = uniforms.map(v => {\n    v = v.split(' ');\n    let type = v[0];\n    let name = v[1];\n    let count = 1;\n    let m = name.match(/([^[]+)\\[(\\d+)\\]/);\n    if (m) {\n      name = m[1];\n      count = Number(m[2]);\n    }\n    let location = gl.getUniformLocation(prog.handle, name);\n    if (location === null) {\n      // Not in either shader, (commented out?), remove (via filter below)\n      return null;\n    }\n    let width = type_size[type];\n    let size = width * count;\n    let glob = globals[name];\n    let value = new Float32Array(size);\n    // set initial value\n    let unif = {\n      name,\n      size,\n      width,\n      count,\n      value,\n      location,\n      glob\n    };\n    uniformSetValue(unif);\n    return unif;\n  }).filter(v => v);\n\n  for (let ii = 0; ii < fp.samplers.length; ++ii) {\n    let name = fp.samplers[ii];\n    let num = Number(name.slice(-1));\n    let location = gl.getUniformLocation(prog.handle, name);\n    if (location !== null) {\n      gl.uniform1i(location, num);\n    }\n  }\n  return prog;\n}\n\nexport function bind(vp, fp, params) {\n  let prog = vp.programs[fp.id];\n  if (!prog) {\n    prog = link(vp, fp);\n  }\n  if (!prog.valid) {\n    prog = link(vp, error_fp);\n    if (!prog.valid) {\n      prog = link(error_vp, error_fp);\n    }\n    vp.programs[fp.id] = prog;\n  }\n  if (prog !== bound_prog) {\n    bound_prog = prog;\n    gl.useProgram(prog.handle);\n  }\n  for (let ii = 0; ii < prog.uniforms.length; ++ii) {\n    let unif = prog.uniforms[ii];\n    let value = params[unif.name] || unif.glob;\n    if (!value) {\n      continue;\n    }\n    let diff = false;\n    for (let jj = 0; jj < unif.size; ++jj) {\n      if (value[jj] !== unif.value[jj]) {\n        diff = true;\n        break;\n      }\n    }\n    if (diff) {\n      for (let jj = 0; jj < unif.size; ++jj) {\n        unif.value[jj] = value[jj];\n      }\n      uniformSetValue(unif);\n    }\n  }\n}\n\nconst reserved = { WEBGL2: 1 };\nexport function startup(_globals) {\n  defines = Object.keys(engine.defines).map(v => reserved[v] ? '' : `#define ${v}\\n`).join('');\n  globals = _globals;\n\n  error_fp = create(gl.FRAGMENT_SHADER, 'error.fp', '#pragma WebGL\\n\\nvoid main(void) {\\n  gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);\\n}\\n');\n  error_vp = create(gl.VERTEX_SHADER, 'error.vp', '// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\\n// Released under MIT License: https://opensource.org/licenses/MIT\\n#pragma WebGL\\nattribute vec2 POSITION;\\nvoid main() {\\n  gl_Position = vec4(POSITION.xy * vec2(2.0 / 1024.0, -2.04 / 1024.0) + vec2(-1.0, 1.0), 0.0, 1.0);\\n}\\n');\n}\n\nexport function addGlobal(key, vec) {\n  assert(!globals[key]);\n  globals[key] = vec;\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint complexity:off */\n\n//////////////////////////////////////////////////////////////////////////\n// GlovSimpleMenu is just a GlovSelectionBox plus some logic to activate\n// callbacks/etc upon selecting of elements.\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst glov_engine = require('./engine.js');\nconst glov_input = require('./input.js');\nconst selection_box = require('./selection_box.js');\nconst glov_ui = require('./ui.js');\nconst { clamp, vec4 } = require('./vmath.js');\n\nconst { KEYS, PAD } = glov_input;\n\nconst color101010C8 = vec4(0x10 / 255, 0x10 / 255, 0x10 / 255, 0xC8 / 255);\n\nclass GlovSimpleMenu {\n  constructor(params) {\n    params = params || {};\n    this.sel_box = selection_box.create(params);\n    this.edit_index = -1;\n\n    // Output members\n    this.selected = -1; // actually selected/acted on, not just current highlight, like this.sel_box.selected\n  }\n\n  focus() {\n    glov_ui.focusSteal(this.sel_box);\n  }\n\n  execItem(index, delta) {\n    let { items } = this.sel_box;\n    assert(index >= 0 && index < items.length);\n    let menu_item = items[index];\n    let force = false;\n    if (delta === 2) {\n      delta = 1;\n      force = true;\n    }\n    if (menu_item.cb) {\n      menu_item.cb();\n    }\n    if (!menu_item.state) {\n      if (menu_item.value !== null && (menu_item.prompt_int || menu_item.prompt_string)) {\n        // Open an edit box\n        // menu.internal.mte = GlovModalTextEntry::createInt(simpleMenuFieldName(menu_item.name), *menu_item.value);\n        this.internal.edit_index = index;\n        // glovInputReleaseAll();\n      } else if (menu_item.value !== null) {\n        if (glov_input.keyDown(KEYS.SHIFT) && !force) {\n          delta = -1;\n        }\n        menu_item.value += delta * menu_item.value_inc;\n        if (menu_item.slider || menu_item.plus_minus) {\n          // implicitly no wrapping, maybe make a separate flag for this?\n          menu_item.value = clamp(menu_item.value, menu_item.value_min, menu_item.value_max);\n        } else {\n          if (menu_item.value < menu_item.value_min) {\n            menu_item.value = menu_item.value_max;\n          }\n          if (menu_item.value > menu_item.value_max) {\n            menu_item.value = menu_item.value_min;\n          }\n        }\n        // TODO: some kind of callback on value change\n      } else {\n          // presumably tag or externally operated on, probably want to skip key repeat here too?\n          // glovInputReleaseAll();\n        }\n    } else {\n      glov_engine.setState(menu_item.state);\n      // glovInputReleaseAll();\n    }\n  }\n\n  run(params) {\n    let { sel_box } = this;\n    sel_box.applyParams(params); // Apply new list of items, positions, etc\n\n    const { items, x, z } = sel_box;\n    const y0 = sel_box.y;\n    let exit_index = -1;\n    for (let i = 0; i < items.length; ++i) {\n      if (items[i].exit) {\n        exit_index = i;\n      }\n    }\n\n    // Check to see if any selection has an editBox open first\n    let selbox_enabled = true;\n    if (this.edit_index >= 0 && this.edit_index < items.length) {\n      selbox_enabled = false;\n      glov_ui.drawRect(camera2d.x0(), camera2d.y0(), camera2d.x1(), camera2d.y1(), z + 2, color101010C8);\n      // TODO: Need modal text entry dialog\n      // let ret = this.internal.mte.run(z + 3);\n\n      // if (ret == 'ok') {\n      //   if (items[this.edit_index].prompt_int) {\n      //     items[this.edit_index].value = this.internal.mte.getInt();\n      //   } else {\n      //     items[this.edit_index].svalue = this.internal.mte.getString();\n      //   }\n      //   this.edit_index = -1;\n      // } else if (ret == 'cancel') {\n      //   this.edit_index = -1;\n      // }\n    }\n    sel_box.disabled = !selbox_enabled;\n\n    // Do all sliders, plus-minus-es - needs\n    let display = sel_box.display;\n    for (let ii = 0; ii < items.length; ii++) {\n      let menu_item = items[ii];\n      if (menu_item.slider) {\n        let slider = menu_item.internal.slider;\n        if (!slider) {\n          // slider = menu_item.internal.slider = glov_slider.create();\n        }\n        slider.no_notches = true;\n        // slider.sound_release = this.sound_accept;\n        slider.disabled = menu_item.disabled;\n        let slider_width = 160;\n        let slider_x = x + sel_box.width - slider_width - 12;\n        let v = menu_item.value - menu_item.value_min;\n        let color = display.style_default.color;\n        // if (display.style_default.color_mode == glov_font.COLOR_MODE.GRADIENT) {\n        //   color = colorIntLerp(display.style_default.color, display.style_default.colorLR, 0.5);\n        // }\n        if (slider.disabled) {\n          color = display.style_disabled.color;\n        }\n        v = slider.run({\n          x: slider_x,\n          y: y0 + ii * 24 + 2,\n          z: z + 3,\n          w: slider_width,\n          // scale: 1,\n          color,\n          value: v,\n          max: menu_item.value_max - menu_item.value_min\n        });\n        menu_item.value = v + menu_item.value_min;\n        if (slider.rollover || slider.grabbed) {\n          // expect our row to be selected\n          if (sel_box.selected !== ii) {\n            sel_box.selected = ii;\n            glov_ui.playUISound('select');\n          }\n        }\n      } else if (menu_item.plus_minus) {\n        assert(typeof menu_item.value === 'number', 'plus_minus items require a numerical value');\n        assert(menu_item.value_inc, 'plus_minus items require a value increment');\n        let buttons_width = 60;\n        let pad = 6;\n        let button_width = (buttons_width - pad) / 2;\n        let button_x = x + sel_box.width - buttons_width;\n        let delta = 0;\n        // if (!glovMasterControllerActive()) { // Don't show buttons if using a controller / no mouse\n        if (glov_ui.buttonText({\n          no_focus: true,\n          x: button_x,\n          y: y0 + ii * 24 + 2,\n          z: z + 3,\n          w: button_width,\n          h: glov_ui.button_height * 0.66,\n          text: '-'\n        })) {\n          delta = -1;\n        }\n        let minus_over = glov_ui.button_mouseover;\n        if (glov_ui.buttonText({\n          no_focus: true,\n          x: button_x + pad + button_width,\n          y: y0 + ii * 24 + 2,\n          z: z + 3,\n          w: button_width,\n          h: glov_ui.button_height * 0.66,\n          text: '+'\n        })) {\n          delta = 1;\n        }\n        let plus_over = glov_ui.button_mouseover;\n        // } end if (!glovMasterControllerActive())\n        if (delta) {\n          menu_item.value += delta * menu_item.value_inc;\n          menu_item.value = clamp(menu_item.value, menu_item.value_min, menu_item.value_max);\n        }\n        if (minus_over || plus_over) {\n          // expect our row to be selected\n          if (sel_box.selected !== ii) {\n            sel_box.selected = ii;\n            glov_ui.playUISound('select');\n          }\n        }\n      }\n    }\n\n    let y = y0;\n    y += sel_box.run();\n\n    let selected = -1;\n    if (exit_index !== -1 && (glov_input.keyDownEdge(KEYS.ESC) || !items[exit_index].no_controller_exit && glov_input.padButtonDownEdge(PAD.CANCEL))) {\n      this.execItem(exit_index, 1);\n      selected = exit_index;\n    }\n    // Only allow left/right to \"select\" a menu option if it's a toggle/increment\n    // kind of menu option, otherwise this just feels weird\n    let allow_left_right = items[sel_box.selected].value !== null;\n    if (sel_box.was_clicked || sel_box.is_focused && (glov_input.keyDownEdge(KEYS.SPACE) || glov_input.keyDownEdge(KEYS.ENTER) || glov_input.padButtonDownEdge(PAD.SELECT))) {\n      this.execItem(sel_box.selected, 1);\n      selected = sel_box.selected;\n    }\n    if (sel_box.is_focused && allow_left_right && (glov_input.keyDownEdge(KEYS.RIGHT) || glov_input.keyDownEdge(KEYS.D) || glov_input.padButtonDownEdge(PAD.RIGHT))) {\n      this.execItem(sel_box.selected, 2);\n      selected = sel_box.selected;\n    }\n    if (sel_box.wasRightClicked || sel_box.is_focused && allow_left_right && (\n    // This was UpHit before, some problem with it triggering an up on the next screen?  Should supress the next up\n    // events after eating a down for UI?\n    glov_input.keyDownEdge(KEYS.LEFT) || glov_input.keyDownEdge(KEYS.A) || glov_input.padButtonDownEdge(PAD.LEFT))) {\n      this.execItem(sel_box.selected, -1);\n      selected = sel_box.selected;\n    }\n    this.selected = selected;\n    if (selected !== -1 && !items[selected].no_sound) {\n      if (items[selected].exit) {\n        glov_ui.playUISound('cancel');\n      } else {\n        glov_ui.playUISound('select');\n      }\n    }\n\n    return y - y0;\n  }\n\n  isSelected(tag_or_index) {\n    if (this.selected === -1) {\n      return false;\n    }\n    if (tag_or_index === undefined) {\n      return this.sel_box.items[this.selected].tag || true;\n    }\n    return this.sel_box.isSelected(tag_or_index);\n  }\n\n  getSelectedIndex() {\n    return this.selected;\n  }\n\n  getSelectedItem() {\n    return this.sel_box.items[this.selected];\n  }\n}\n\nexport function create(...args) {\n  return new GlovSimpleMenu(...args);\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint callback-return:off */\n\nexport const FADE_DEFAULT = 0;\nexport const FADE_OUT = 1;\nexport const FADE_IN = 2;\nexport const FADE = FADE_OUT + FADE_IN;\n\nconst assert = require('assert');\nconst { cmd_parse } = require('./cmds.js');\nconst { Howl, Howler } = require('@jimbly/howler/src/howler.core.js');\nconst { abs, floor, max, min, random } = Math;\nconst settings = require('./settings.js');\nconst { defaults, ridx } = require('../../common/util.js');\n\nconst DEFAULT_FADE_RATE = 0.001;\n\nlet sounds = {};\nlet num_loading = 0;\n\n// Howler.usingWebAudio = false; // Disable WebAudio for testing HTML5 fallbacks\n\nconst default_params = {\n  ext_list: ['mp3', 'wav'], // (recommended) try loading .mp3 versions first, then fallback to .wav\n  //  also covers all browsers: ['webm', 'mp3']\n  fade_rate: DEFAULT_FADE_RATE\n};\nlet sound_params;\n\nlet last_played = {};\nlet global_timer = 0;\nlet fades = [];\nlet music;\n\nsettings.register({\n  volume: {\n    default_value: 1,\n    type: cmd_parse.TYPE_FLOAT,\n    range: [0, 1]\n  }\n});\n\nsettings.register({\n  sound: {\n    default_value: 1,\n    type: cmd_parse.TYPE_INT,\n    range: [0, 1]\n  }\n});\n\nsettings.register({\n  music: {\n    default_value: 1,\n    type: cmd_parse.TYPE_INT,\n    range: [0, 1]\n  }\n});\n\nexport function soundStartup(params) {\n  sound_params = defaults(params || {}, default_params);\n\n  // Music\n  music = []; // 0 is current, 1 is previous (fading out)\n  for (let ii = 0; ii < 2; ++ii) {\n    music.push({\n      sound: null,\n      id: 0,\n      current_volume: 0,\n      target_volume: 0,\n      sys_volume: 0,\n      need_play: false\n    });\n  }\n}\n\nexport function soundLoad(base, opts, cb) {\n  opts = opts || {};\n  if (Array.isArray(base)) {\n    assert(!cb);\n    for (let ii = 0; ii < base.length; ++ii) {\n      soundLoad(base[ii], opts);\n    }\n    return;\n  }\n  let key = base;\n  if (sounds[key]) {\n    if (cb) {\n      cb();\n    }\n    return;\n  }\n  let m = base.match(/^(.*)\\.(mp3|ogg|wav|webm)$/u);\n  let preferred_ext;\n  if (m) {\n    base = m[1];\n    preferred_ext = m[2];\n  }\n  let src = `sounds/${base}`;\n  let srcs = [];\n  if (preferred_ext) {\n    srcs.push(`${src}.${preferred_ext}`);\n  }\n  for (let ii = 0; ii < sound_params.ext_list.length; ++ii) {\n    let ext = sound_params.ext_list[ii];\n    if (ext !== preferred_ext) {\n      srcs.push(`${src}.${ext}`);\n    }\n  }\n  // Try loading desired sound types one at a time.\n  // Cannot rely on Howler's built-in support for this because it only continues\n  //   through the list on *some* load errors, not all :(.\n  function tryLoad(idx) {\n    if (idx === srcs.length) {\n      console.error(`Error loading sound ${base}: All fallbacks exhausted, giving up`);\n      if (cb) {\n        cb('Error loading sound');\n      }\n      return;\n    }\n    ++num_loading;\n    let once = false;\n    let sound = new Howl({\n      src: srcs.slice(idx),\n      html5: Boolean(opts.streaming),\n      loop: Boolean(opts.loop),\n      volume: 0,\n      onload: function () {\n        if (!once) {\n          --num_loading;\n          once = true;\n          sounds[key] = sound;\n          if (cb) {\n            cb(null);\n          }\n        }\n      },\n      onloaderror: function (id, err, extra) {\n        if (idx === srcs.length - 1) {\n          console.error(`Error loading sound ${srcs[idx]}: ${err}`);\n        } else {\n          console.log(`Error loading sound ${srcs[idx]}: ${err}, trying fallback...`);\n        }\n        if (!once) {\n          --num_loading;\n          once = true;\n          tryLoad(idx + 1);\n        }\n      }\n    });\n  }\n  tryLoad(0);\n}\n\nexport function soundResume() {\n  // Handled internally by Howler, leaving hooks in for now, though\n  // Maybe more reliable than `Howler.safeToPlay`...\n}\n\nexport function soundResumed() {\n  return !Howler.noAudio && Howler.safeToPlay;\n}\n\nexport function soundTick(dt) {\n  global_timer += dt;\n  if (!soundResumed()) {\n    return;\n  }\n  // Do music fading\n  // Cannot rely on Howler's fading because starting a fade when one is in progress\n  //   messes things up, as well causes snaps in volume :(\n  let max_fade = dt * sound_params.fade_rate;\n  for (let ii = 0; ii < music.length; ++ii) {\n    let mus = music[ii];\n    if (!mus.sound) {\n      continue;\n    }\n    let target = settings.music ? mus.target_volume : 0;\n    if (mus.current_volume !== target) {\n      let delta = target - mus.current_volume;\n      let fade_amt = min(abs(delta), max_fade);\n      if (delta < 0) {\n        mus.current_volume = max(target, mus.current_volume - fade_amt);\n      } else {\n        mus.current_volume = min(target, mus.current_volume + fade_amt);\n      }\n      if (!mus.target_volume && !mus.current_volume) {\n        if (!mus.need_play) {\n          mus.sound.stop(mus.id);\n        }\n        mus.sound = null;\n      }\n    }\n    if (mus.sound) {\n      let sys_volume = mus.current_volume * settings.volume;\n      if (mus.need_play) {\n        mus.need_play = false;\n        mus.id = mus.sound.play();\n        mus.sys_volume = -1;\n      }\n      if (mus.sys_volume !== sys_volume) {\n        mus.sound.volume(sys_volume, mus.id);\n        mus.sys_volume = sys_volume;\n      }\n    }\n  }\n\n  for (let ii = fades.length - 1; ii >= 0; --ii) {\n    let fade = fades[ii];\n    fade.volume = max(0, fade.volume - max_fade);\n    fade.sound.volume(fade.volume * settings.volume, fade.id);\n    if (!fade.volume) {\n      fade.sound.stop(fade.id);\n      ridx(fades, ii);\n    }\n  }\n}\n\nexport function soundPlay(soundname, volume, as_music) {\n  volume = volume || 1;\n  if (!as_music && !settings.sound || as_music && !settings.music) {\n    return null;\n  }\n  if (!soundResumed()) {\n    return null;\n  }\n  if (Array.isArray(soundname)) {\n    soundname = soundname[floor(random() * soundname.length)];\n  }\n  let sound = sounds[soundname];\n  if (!sound) {\n    return null;\n  }\n  let last_played_time = last_played[soundname] || -9e9;\n  if (global_timer - last_played_time < 45) {\n    return null;\n  }\n\n  let id = sound.play();\n  sound.volume(volume * settings.volume, id);\n  last_played[soundname] = global_timer;\n  return {\n    stop: sound.stop.bind(sound, id),\n    playing: sound.playing.bind(sound, id), // not reliable if it hasn't started yet? :(\n    fadeOut: time => {\n      fades.push({\n        volume,\n        sound,\n        id,\n        time\n      });\n    }\n  };\n}\n\nexport function soundPlayMusic(soundname, volume, transition) {\n  if (!settings.music) {\n    return;\n  }\n  if (volume === undefined) {\n    volume = 1;\n  }\n  transition = transition || FADE_DEFAULT;\n  soundLoad(soundname, { streaming: true, loop: true }, err => {\n    assert(!err);\n    let sound = sounds[soundname];\n    assert(sound);\n    if (music[0].sound === sound) {\n      // Same sound, just adjust volume, if required\n      music[0].target_volume = volume;\n      if (!transition) {\n        if (!volume) {\n          sound.stop(music[0].id);\n          music[0].sound = null;\n        } else {\n          let sys_volume = music[0].sys_volume = volume * settings.volume;\n          sound.volume(sys_volume, music[0].id);\n        }\n      }\n      return;\n    }\n    // fade out previous music, if any\n    if (music[0].current_volume) {\n      if (transition & FADE_OUT) {\n        // swap to position 1, start fadeout\n        let temp = music[1];\n        music[1] = music[0];\n        music[0] = temp;\n        music[1].target_volume = 0;\n      }\n    }\n    if (music[0].sound) {\n      music[0].sound.stop(music[0].id);\n    }\n    music[0].sound = sound;\n    music[0].target_volume = volume;\n    let start_vol = transition & FADE_IN ? 0 : volume;\n    music[0].current_volume = start_vol;\n    if (soundResumed()) {\n      music[0].id = sound.play();\n      let sys_volume = start_vol * settings.volume;\n      sound.volume(sys_volume, music[0].id);\n      music[0].sys_volume = sys_volume;\n      music[0].need_play = false;\n    } else {\n      music[0].need_play = true;\n    }\n  });\n}\n\nexport function soundLoading() {\n  return num_loading;\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst { floor, random } = Math;\n\nfunction GlovSpriteAnimation(params) {\n  this.frame = 0;\n  this.time = 0;\n  this.state = null;\n  this.anim = null;\n  this.anim_idx = 0;\n\n  if (params instanceof GlovSpriteAnimation) {\n    this.data = params.data; // already initialized\n    this.setState(params.state);\n  } else {\n    this.data = params;\n    for (let key in this.data) {\n      let anim = this.data[key];\n      if (typeof anim.frames === 'number') {\n        anim.frames = [anim.frames];\n      }\n      if (typeof anim.times === 'number') {\n        let arr = new Array(anim.frames.length);\n        for (let ii = 0; ii < anim.frames.length; ++ii) {\n          arr[ii] = anim.times;\n        }\n        anim.times = arr;\n      }\n      anim.total_time = 0;\n      for (let ii = 0; ii < anim.times.length; ++ii) {\n        anim.total_time += anim.times[ii];\n      }\n      if (anim.loop === undefined) {\n        anim.loop = true;\n      }\n    }\n  }\n}\n\nexport function create(params) {\n  return new GlovSpriteAnimation(params);\n}\n\nGlovSpriteAnimation.prototype.clone = function () {\n  return new GlovSpriteAnimation(this);\n};\n\nGlovSpriteAnimation.prototype.setState = function (state, force) {\n  if (state === this.state && !force) {\n    return this;\n  }\n  this.state = state;\n  this.anim = this.data[state];\n  if (this.anim.init_time) {\n    this.time = floor(random() * this.anim.init_time);\n  } else {\n    this.time = 0;\n  }\n  this.anim_idx = 0;\n  this.frame = this.anim.frames[this.anim_idx];\n  return this;\n};\n\nGlovSpriteAnimation.prototype.progress = function () {\n  if (!this.anim) {\n    return 1;\n  }\n  let time = this.time;\n  for (let ii = 0; ii < this.anim_idx; ++ii) {\n    time += this.anim.times[ii];\n  }\n  return time / this.anim.total_time;\n};\n\nGlovSpriteAnimation.prototype.update = function (dt) {\n  if (!this.anim) {\n    return;\n  }\n  this.time += dt;\n  if (this.time > this.anim.times[this.anim_idx]) {\n    this.time -= this.anim.times[this.anim_idx];\n    this.anim_idx = this.anim_idx + 1;\n    if (this.anim_idx === this.anim.frames.length) {\n      if (this.anim.loop) {\n        this.anim_idx = this.anim_idx % this.anim.frames.length;\n      } else {\n        // keep final frame\n        this.anim = null;\n        return;\n      }\n    }\n    this.frame = this.anim.frames[this.anim_idx];\n    if (this.time >= this.anim.times[this.anim_idx]) {\n      this.time = this.anim.times[this.anim_idx] - 1;\n    }\n  }\n};\n\nGlovSpriteAnimation.prototype.getFrame = function (dt) {\n  if (dt !== undefined) {\n    this.update(dt);\n  }\n  return this.frame;\n};","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n// Some code from Turbulenz: Copyright (c) 2012-2013 Turbulenz Limited\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst engine = require('./engine.js');\n\nconst geom = require('./geom.js');\nconst { cos, max, min, round, sin } = Math;\nconst textures = require('./textures.js');\nconst shaders = require('./shaders.js');\nconst { nextHighestPowerOfTwo } = require('../../common/util.js');\nconst { vec2, vec4 } = require('./vmath.js');\n\nexport const BLEND_ALPHA = 0;\nexport const BLEND_ADDITIVE = 1;\n\nlet sprite_vshader;\nlet sprite_fshader;\nlet sprite_dual_fshader;\nlet clip_space = vec4();\nlet sprite_shader_params = {\n  clip_space\n};\nlet last_uid = 0;\n\nlet sprite_queue = [];\n\nlet sprite_freelist = [];\n\nfunction SpriteData() {\n  // x1 y1 x2 y2 x3 y3 x4 y4 - vertices [0,8)\n  // cr cg cb ca u1 v1 u2 v2 - normalized color + texture [8,16)\n  // data for GL queuing\n  this.data = new Float32Array(16);\n  // data for sorting/binding/etc\n  this.texs = null;\n  this.shader = null;\n  this.shader_params = null;\n  this.x = 0;\n  this.y = 0;\n  this.z = 0;\n  this.blend = 0; // BLEND_ALPHA\n  this.uid = 0;\n}\n\nfunction spriteDataAlloc() {\n  if (sprite_freelist.length) {\n    return sprite_freelist.pop();\n  }\n  return new SpriteData();\n}\n\nfunction cmpSprite(a, b) {\n  if (a.z !== b.z) {\n    return a.z - b.z;\n  }\n  if (a.y !== b.y) {\n    return a.y - b.y;\n  }\n  if (a.x !== b.x) {\n    return a.x - b.x;\n  }\n  return a.uid - b.uid;\n}\n\nexport function queuefn(z, fn) {\n  assert(isFinite(z));\n  sprite_queue.push({\n    fn,\n    x: 0,\n    y: 0,\n    z,\n    uid: ++last_uid\n  });\n}\n\n// coordinates must be in counter-clockwise winding order\nexport function queueraw4(texs, x0, y0, x1, y1, x2, y2, x3, y3, z, u0, v0, u1, v1, color, shader, shader_params, blend) {\n  assert(isFinite(z));\n  let elem = spriteDataAlloc();\n  let data = elem.data;\n  // x1 y1 x2 y2 x3 y3 x4 y4 - vertices [0,8)\n  // cr cg cb ca u1 v1 u2 v2 - normalized color + texture [8,16)\n  // Minor perf improvement: convert by clip_space here (still just a single MAD\n  //   if pre-calculated in the camera) and remove it from the shader.\n  data[0] = (x0 - camera2d.data[0]) * camera2d.data[4];\n  data[1] = (y0 - camera2d.data[1]) * camera2d.data[5];\n  data[2] = (x1 - camera2d.data[0]) * camera2d.data[4];\n  data[3] = (y1 - camera2d.data[1]) * camera2d.data[5];\n  data[4] = (x2 - camera2d.data[0]) * camera2d.data[4];\n  data[5] = (y2 - camera2d.data[1]) * camera2d.data[5];\n  data[6] = (x3 - camera2d.data[0]) * camera2d.data[4];\n  data[7] = (y3 - camera2d.data[1]) * camera2d.data[5];\n  data[8] = color[0];\n  data[9] = color[1];\n  data[10] = color[2];\n  data[11] = color[3];\n  data[12] = u0;\n  data[13] = v0;\n  data[14] = u1;\n  data[15] = v1;\n\n  elem.texs = texs;\n  elem.x = data[0];\n  elem.y = data[1];\n  elem.z = z;\n  elem.shader = shader || null;\n  if (shader_params) {\n    shader_params.clip_space = sprite_shader_params.clip_space;\n    elem.shader_params = shader_params;\n  } else {\n    elem.shader_params = null;\n  }\n  elem.blend = blend || 0; // BLEND_ALPHA\n  //elem.bucket = bucket || this.default_bucket;\n  //elem.tech_params = tech_params || null;\n  elem.uid = ++last_uid;\n  sprite_queue.push(elem);\n  return elem;\n}\n\nexport function queueraw(texs, x, y, z, w, h, u0, v0, u1, v1, color, shader, shader_params, blend) {\n  return queueraw4(texs, x, y, x, y + h, x + w, y + h, x + w, y, z, u0, v0, u1, v1, color, shader, shader_params, blend);\n}\n\nexport function queuesprite(sprite, x, y, z, w, h, rot, uvs, color, shader, shader_params, nozoom) {\n  assert(isFinite(z));\n  let elem = spriteDataAlloc();\n  elem.texs = sprite.texs;\n  elem.x = x = (x - camera2d.data[0]) * camera2d.data[4];\n  elem.y = y = (y - camera2d.data[1]) * camera2d.data[5];\n  elem.z = z;\n  w *= camera2d.data[4];\n  h *= camera2d.data[5];\n  color = color || sprite.color;\n  let data = elem.data;\n  if (!rot) {\n    let x1 = x - sprite.origin[0] * w;\n    let y1 = y - sprite.origin[1] * h;\n    let x2 = x1 + w;\n    let y2 = y1 + h;\n    data[0] = x1;\n    data[1] = y1;\n    data[2] = x1;\n    data[3] = y2;\n    data[4] = x2;\n    data[5] = y2;\n    data[6] = x2;\n    data[7] = y1;\n  } else {\n    let dx = sprite.origin[0] * w;\n    let dy = sprite.origin[1] * h;\n\n    let cosr = cos(rot);\n    let sinr = sin(rot);\n\n    let x1 = x - cosr * dx + sinr * dy;\n    let y1 = y - sinr * dx - cosr * dy;\n    let ch = cosr * h;\n    let cw = cosr * w;\n    let sh = sinr * h;\n    let sw = sinr * w;\n\n    data[0] = x1;\n    data[1] = y1;\n    data[2] = x1 - sh;\n    data[3] = y1 + ch;\n    data[4] = x1 + cw - sh;\n    data[5] = y1 + sw + ch;\n    data[6] = x1 + cw;\n    data[7] = y1 + sw;\n  }\n\n  data[8] = color[0];\n  data[9] = color[1];\n  data[10] = color[2];\n  data[11] = color[3];\n\n  let ubias = 0;\n  let vbias = 0;\n  let tex = elem.texs[0];\n  if (!nozoom && !tex.nozoom) {\n    // Bias the texture coordinates depending on the minification/magnification\n    //   level so we do not get pixels from neighboring frames bleeding in\n    // Use min here (was max in libGlov), to solve tooltip edges being wrong in strict pixely\n    // Use max here to solve box buttons not lining up, but instead using nozoom in drawBox/drawHBox,\n    //   but, that only works for magnification - need the max here for minification!\n    let zoom_level = max((uvs[2] - uvs[0]) * tex.width / w, (uvs[3] - uvs[1]) * tex.height / h); // in texels per pixel\n    if (zoom_level < 1) {\n      // magnification\n      if (tex.filter_mag === gl.LINEAR) {\n        // Need to bias by half a texel, so we're doing absolutely no blending with the neighboring texel\n        ubias = vbias = 0.5;\n      } else if (tex.filter_mag === gl.NEAREST && engine.antialias) {\n        // When antialiasing is on, even nearest sampling samples from adjacent texels, do slight bias\n        // Want to bias by one *pixel's* worth\n        ubias = vbias = zoom_level / 2;\n      }\n    } else if (zoom_level > 1) {\n      // minification\n      // need to apply this bias even with nearest filtering, not exactly sure why\n      let mipped_texels = zoom_level / 2;\n      ubias = vbias = 0.5 + mipped_texels;\n    }\n    if (uvs[0] > uvs[2]) {\n      ubias *= -1;\n    }\n    if (uvs[1] > uvs[3]) {\n      vbias *= -1;\n    }\n  }\n\n  data[12] = uvs[0] + ubias / tex.width;\n  data[13] = uvs[1] + vbias / tex.height;\n  data[14] = uvs[2] - ubias / tex.width;\n  data[15] = uvs[3] - vbias / tex.height;\n\n  elem.uid = ++last_uid;\n  elem.shader = shader || null;\n  elem.blend = 0; // BLEND_ALPHA\n\n  if (shader_params) {\n    shader_params.clip_space = sprite_shader_params.clip_space;\n    elem.shader_params = shader_params;\n  } else {\n    elem.shader_params = null;\n  }\n  sprite_queue.push(elem);\n}\n\nexport function clip(z_start, z_end, x, y, w, h) {\n  let xy = vec2();\n  camera2d.virtualToCanvas(xy, [x, y]);\n  let wh = vec2();\n  camera2d.virtualToCanvas(wh, [x + w, y + h]);\n  xy[0] = round(xy[0]);\n  xy[1] = round(xy[1]);\n  wh[0] = round(wh[0]) - xy[0];\n  wh[1] = round(wh[1]) - xy[1];\n\n  // let gd_w = engine.render_width || engine.width;\n  let gd_h = engine.render_height || engine.height;\n  let scissor = [xy[0], gd_h - (xy[1] + wh[1]), wh[0], wh[1]];\n  queuefn(z_start - 0.01, () => {\n    gl.enable(gl.SCISSOR_TEST);\n    gl.scissor(scissor[0], scissor[1], scissor[2], scissor[3]);\n  });\n  queuefn(z_end - 0.01, () => {\n    gl.disable(gl.SCISSOR_TEST);\n  });\n}\n\nfunction diffTextures(texsa, texsb) {\n  if (texsa.length !== texsb.length) {\n    return true;\n  }\n  for (let ii = 0; ii < texsa.length; ++ii) {\n    if (texsa[ii] !== texsb[ii]) {\n      return true;\n    }\n  }\n  return false;\n}\n\nlet batch_state;\nlet sprite_geom;\nlet sprite_buffer; // Float32Array with 8 entries per vert\nlet sprite_buffer_len = 0; // in verts\nlet sprite_buffer_batch_start = 0;\nlet sprite_buffer_idx = 0; // in verts\nlet last_blend_mode;\nlet last_bound_shader;\nconst MAX_VERT_COUNT = 65536;\nlet batches = [];\n\nfunction commit() {\n  if (sprite_buffer_idx === sprite_buffer_batch_start) {\n    return;\n  }\n  batches.push({\n    state: batch_state,\n    start: sprite_buffer_batch_start,\n    end: sprite_buffer_idx\n  });\n  sprite_buffer_batch_start = sprite_buffer_idx;\n}\n\nfunction commitAndFlush() {\n  commit();\n  if (!batches.length) {\n    return;\n  }\n  assert(sprite_buffer_idx);\n  sprite_geom.update(sprite_buffer, sprite_buffer_idx);\n  sprite_geom.bind();\n\n  for (let ii = 0; ii < batches.length; ++ii) {\n    let batch = batches[ii];\n    let { state, start, end } = batch;\n    if (last_bound_shader !== state.shader || state.shader_params) {\n      shaders.bind(sprite_vshader, state.shader || sprite_fshader, state.shader_params || sprite_shader_params);\n      last_bound_shader = state.shader;\n    }\n    if (last_blend_mode !== state.blend) {\n      last_blend_mode = state.blend;\n      if (last_blend_mode === BLEND_ADDITIVE) {\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE);\n      } else {\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n      }\n    }\n    textures.bindArray(state.texs);\n    gl.drawElements(sprite_geom.mode, (end - start) * 3 / 2, gl.UNSIGNED_SHORT, start * 3);\n  }\n\n  batches.length = 0;\n  sprite_buffer_idx = 0;\n  sprite_buffer_batch_start = 0;\n}\n\nfunction bufferSpriteData(data) {\n  let index = sprite_buffer_idx * 8;\n  sprite_buffer_idx += 4;\n\n  let c1 = data[8];\n  let c2 = data[9];\n  let c3 = data[10];\n  let c4 = data[11];\n  let u1 = data[12];\n  let v1 = data[13];\n  let u2 = data[14];\n  let v2 = data[15];\n\n  sprite_buffer[index] = data[0];\n  sprite_buffer[index + 1] = data[1];\n  sprite_buffer[index + 2] = c1;\n  sprite_buffer[index + 3] = c2;\n  sprite_buffer[index + 4] = c3;\n  sprite_buffer[index + 5] = c4;\n  sprite_buffer[index + 6] = u1;\n  sprite_buffer[index + 7] = v1;\n\n  sprite_buffer[index + 8] = data[2];\n  sprite_buffer[index + 9] = data[3];\n  sprite_buffer[index + 10] = c1;\n  sprite_buffer[index + 11] = c2;\n  sprite_buffer[index + 12] = c3;\n  sprite_buffer[index + 13] = c4;\n  sprite_buffer[index + 14] = u1;\n  sprite_buffer[index + 15] = v2;\n\n  sprite_buffer[index + 16] = data[4];\n  sprite_buffer[index + 17] = data[5];\n  sprite_buffer[index + 18] = c1;\n  sprite_buffer[index + 19] = c2;\n  sprite_buffer[index + 20] = c3;\n  sprite_buffer[index + 21] = c4;\n  sprite_buffer[index + 22] = u2;\n  sprite_buffer[index + 23] = v2;\n\n  sprite_buffer[index + 24] = data[6];\n  sprite_buffer[index + 25] = data[7];\n  sprite_buffer[index + 26] = c1;\n  sprite_buffer[index + 27] = c2;\n  sprite_buffer[index + 28] = c3;\n  sprite_buffer[index + 29] = c4;\n  sprite_buffer[index + 30] = u2;\n  sprite_buffer[index + 31] = v1;\n}\n\nexport function draw() {\n  if (!sprite_queue.length) {\n    return;\n  }\n  gl.disable(gl.DEPTH_TEST);\n  gl.depthMask(false);\n  gl.enable(gl.BLEND);\n\n  clip_space[0] = 2 / engine.viewport[2];\n  clip_space[1] = -2 / engine.viewport[3];\n\n  last_blend_mode = -1;\n  last_bound_shader = -1;\n\n  if (!sprite_geom) {\n    sprite_geom = geom.create([[shaders.semantic.POSITION, gl.FLOAT, 2, false], [shaders.semantic.COLOR, gl.FLOAT, 4, false], [shaders.semantic.TEXCOORD, gl.FLOAT, 2, false]], [], null, geom.QUADS);\n    sprite_buffer = new Float32Array(1024);\n    sprite_buffer_len = sprite_buffer.length / 8;\n  }\n\n  sprite_queue.sort(cmpSprite);\n\n  batch_state = null;\n  assert.equal(sprite_buffer_idx, 0);\n  assert.equal(sprite_buffer_batch_start, 0);\n  assert.equal(batches.length, 0);\n  for (let ii = 0; ii < sprite_queue.length; ++ii) {\n    let elem = sprite_queue[ii];\n    if (elem.fn) {\n      commitAndFlush();\n      batch_state = null;\n      last_bound_shader = -1;\n      elem.fn();\n    } else {\n      if (!batch_state || diffTextures(elem.texs, batch_state.texs) || elem.shader !== batch_state.shader || elem.shader_params !== batch_state.shader_params || elem.blend !== batch_state.blend) {\n        commit();\n        batch_state = elem;\n      }\n      if (sprite_buffer_idx + 4 > sprite_buffer_len) {\n        commitAndFlush();\n        // batch_state left alone\n        if (sprite_buffer_len !== MAX_VERT_COUNT) {\n          let new_length = min(sprite_buffer_len * 1.25 + 3 & ~3, MAX_VERT_COUNT); // eslint-disable-line no-bitwise\n          sprite_buffer_len = new_length;\n          sprite_buffer = new Float32Array(new_length * 8);\n        }\n      }\n\n      bufferSpriteData(elem.data);\n      sprite_freelist.push(elem);\n    }\n  }\n  commitAndFlush();\n\n  sprite_queue.length = 0;\n  if (last_blend_mode !== BLEND_ALPHA) {\n    // always reset to this\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n  }\n}\n\nexport function buildRects(ws, hs) {\n  let rects = [];\n  let total_w = 0;\n  for (let ii = 0; ii < ws.length; ++ii) {\n    total_w += ws[ii];\n  }\n  let total_h = 0;\n  for (let ii = 0; ii < hs.length; ++ii) {\n    total_h += hs[ii];\n  }\n  let tex_w = nextHighestPowerOfTwo(total_w);\n  let tex_h = nextHighestPowerOfTwo(total_h);\n  let wh = [];\n  for (let ii = 0; ii < ws.length; ++ii) {\n    wh.push(ws[ii] / total_h);\n  }\n  let hw = [];\n  for (let ii = 0; ii < hs.length; ++ii) {\n    hw.push(hs[ii] / total_w);\n  }\n  let aspect = [];\n  let non_square = false;\n  let y = 0;\n  for (let jj = 0; jj < hs.length; ++jj) {\n    let x = 0;\n    for (let ii = 0; ii < ws.length; ++ii) {\n      let r = vec4(x / tex_w, y / tex_h, (x + ws[ii]) / tex_w, (y + hs[jj]) / tex_h);\n      rects.push(r);\n      let asp = ws[ii] / hs[jj];\n      if (asp !== 1) {\n        non_square = true;\n      }\n      aspect.push(asp);\n      x += ws[ii];\n    }\n    y += hs[jj];\n  }\n  return {\n    widths: ws,\n    heights: hs,\n    wh,\n    hw,\n    rects,\n    aspect: non_square ? aspect : null,\n    total_w,\n    total_h\n  };\n}\n\nfunction Sprite(params) {\n  if (params.texs) {\n    this.texs = params.texs;\n  } else {\n    this.texs = [];\n    if (params.tex) {\n      this.texs.push(params.tex);\n    } else if (params.layers) {\n      assert(params.name);\n      this.texs = [];\n      for (let ii = 0; ii < params.layers; ++ii) {\n        this.texs.push(textures.load({\n          url: `img/${params.name}_${ii}.png`,\n          filter_min: params.filter_min,\n          filter_mag: params.filter_mag,\n          wrap_s: params.wrap_s,\n          wrap_t: params.wrap_t\n        }));\n      }\n    } else if (params.name) {\n      this.texs.push(textures.load({\n        url: `img/${params.name}.png`,\n        filter_min: params.filter_min,\n        filter_mag: params.filter_mag,\n        wrap_s: params.wrap_s,\n        wrap_t: params.wrap_t\n      }));\n    } else {\n      assert(params.url);\n      this.texs.push(textures.load(params));\n    }\n  }\n\n  this.origin = params.origin || vec2(0, 0); // [0,1] range\n  this.size = params.size || vec2(1, 1);\n  this.color = params.color || vec4(1, 1, 1, 1);\n  this.uvs = params.uvs || vec4(0, 0, 1, 1);\n  if (!params.uvs) {\n    // Fix up non-power-of-two textures\n    this.texs[0].onLoad(tex => {\n      this.uvs[2] = tex.src_width / tex.width;\n      this.uvs[3] = tex.src_height / tex.height;\n    });\n  }\n\n  if (params.ws) {\n    this.uidata = buildRects(params.ws, params.hs);\n  }\n  this.shader = params.shader || null;\n}\n\n// params:\n//   required: x, y\n//   optional: z, w, h, uvs, color\nSprite.prototype.draw = function (params) {\n  if (params.w === 0 || params.h === 0) {\n    return;\n  }\n  let w = (params.w || 1) * this.size[0];\n  let h = (params.h || 1) * this.size[1];\n  let uvs = typeof params.frame === 'number' ? this.uidata.rects[params.frame] : params.uvs || this.uvs;\n  queuesprite(this, params.x, params.y, params.z || Z.UI, w, h, params.rot, uvs, params.color || this.color, params.shader || this.shader, params.shader_params, params.nozoom);\n};\n\nSprite.prototype.drawDualTint = function (params) {\n  params.shader = sprite_dual_fshader;\n  params.shader_params = {\n    color1: params.color1\n  };\n  this.draw(params);\n};\n\nexport function create(params) {\n  return new Sprite(params);\n}\n\nexport function startup() {\n  clip_space[2] = -1;\n  clip_space[3] = 1;\n  sprite_vshader = shaders.create(gl.VERTEX_SHADER, 'sprite.vp', '// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\\n// Released under MIT License: https://opensource.org/licenses/MIT\\n#pragma WebGL2\\nprecision highp float;\\n\\n// per-vertex input\\nattribute vec2 POSITION;\\nattribute vec4 COLOR;\\nattribute vec2 TEXCOORD;\\n\\n// output\\nvarying lowp vec4 interp_color;\\nvarying vec2 interp_texcoord;\\n\\n// global parameters\\nuniform vec4 clip_space;\\n\\nvoid main()\\n{\\n  interp_texcoord = TEXCOORD;\\n  interp_color = COLOR;\\n  gl_Position = vec4(POSITION.xy * clip_space.xy + clip_space.zw, 0.0, 1.0);\\n}\\n');\n  sprite_fshader = shaders.create(gl.FRAGMENT_SHADER, 'sprite.fp', '#pragma WebGL2\\n\\nprecision lowp float;\\n\\nuniform sampler2D tex0;\\n\\nvarying lowp vec4 interp_color;\\nvarying vec2 interp_texcoord;\\n\\nvoid main(void) {\\n  vec4 tex = texture2D(tex0, interp_texcoord);\\n  gl_FragColor = tex * interp_color;\\n}\\n');\n  sprite_dual_fshader = shaders.create(gl.FRAGMENT_SHADER, 'sprite_dual.fp', '#pragma WebGL2\\n\\nprecision lowp float;\\n\\nuniform sampler2D tex0;\\nuniform sampler2D tex1;\\nuniform lowp vec4 color1;\\n\\nvarying lowp vec4 interp_color;\\nvarying vec2 interp_texcoord;\\n\\nvoid main(void) {\\n  vec4 tex0 = texture2D(tex0,interp_texcoord);\\n  vec2 tex1 = texture2D(tex1,interp_texcoord).rg;\\n  float value = dot(tex0.rgb, vec3(0.2, 0.5, 0.3));\\n  vec3 valueR = value * interp_color.rgb;\\n  vec3 valueG = value * color1.rgb;\\n  vec3 value3 = mix(tex0.rgb, valueG, tex1.g);\\n  value3 = mix(value3, valueR, tex1.r);\\n  gl_FragColor = vec4(value3, tex0.a * interp_color.a);\\n}\\n');\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint-env browser */\n\nconst assert = require('assert');\nconst engine = require('./engine.js');\nconst local_storage = require('./local_storage.js');\n\nexport let textures = {};\nexport let load_count = 0;\nlet aniso = 4;\nlet max_aniso = 0;\nlet aniso_enum;\n\nlet default_filter_min;\nlet default_filter_mag;\n\nexport const format = {\n  R8: { count: 1 },\n  RGB8: { count: 3 },\n  RGBA8: { count: 4 }\n};\n\nexport function defaultFilters(min, mag) {\n  default_filter_min = min;\n  default_filter_mag = mag;\n}\n\nconst { isPowerOfTwo, nextHighestPowerOfTwo } = require('../../common/util.js');\n\nlet bound_unit = null;\nlet bound_tex = [];\n\nlet handle_loading;\nlet handle_error;\n\nfunction setUnit(unit) {\n  if (unit !== bound_unit) {\n    gl.activeTexture(gl.TEXTURE0 + unit);\n    bound_unit = unit;\n  }\n}\n\nfunction bindHandle(unit, target, handle) {\n  if (bound_tex[unit] !== handle) {\n    setUnit(unit);\n    gl.bindTexture(target, handle);\n    bound_tex[unit] = handle;\n  }\n}\n\nfunction unbindHandle(target, handle) {\n  for (let unit = 0; unit < bound_tex.length; ++unit) {\n    if (bound_tex[unit] === handle) {\n      setUnit(unit);\n      gl.bindTexture(target, null);\n      bound_tex[unit] = null;\n    }\n  }\n}\n\nexport function bind(unit, tex) {\n  // May or may not change the unit\n  bindHandle(unit, tex.target, tex.eff_handle);\n}\n\n// hot path inlined for perf\nexport function bindArray(texs) {\n  for (let ii = 0; ii < texs.length; ++ii) {\n    let tex = texs[ii];\n    let handle = tex.eff_handle;\n    if (bound_tex[ii] !== handle) {\n      if (ii !== bound_unit) {\n        gl.activeTexture(gl.TEXTURE0 + ii);\n        bound_unit = ii;\n      }\n      gl.bindTexture(tex.target, handle);\n      bound_tex[ii] = handle;\n    }\n  }\n}\n\nexport function isArrayBound(texs) {\n  for (let ii = 0; ii < texs.length; ++ii) {\n    let tex = texs[ii];\n    let handle = tex.eff_handle;\n    if (bound_tex[ii] !== handle) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction Texture(params) {\n  this.name = params.name;\n  this.loaded = false;\n  this.load_fail = false;\n  this.target = params.target || gl.TEXTURE_2D;\n  this.is_array = this.target === gl.TEXTURE_2D_ARRAY;\n  this.handle = gl.createTexture();\n  this.eff_handle = handle_loading;\n  this.setSamplerState(params);\n  this.src_width = this.src_height = 1;\n  this.width = this.height = 1;\n  this.nozoom = params.nozoom || false;\n  this.on_load = [];\n  this.gpu_mem = 0;\n\n  this.format = params.format || format.RGBA8;\n\n  if (params.data) {\n    let err = this.updateData(params.width, params.height, params.data);\n    assert(!err, err);\n  } else if (params.url) {\n    this.loadURL(params.url);\n  }\n}\n\nTexture.prototype.updateGPUMem = function () {\n  let new_size = this.width * this.height * this.format.count;\n  if (this.mipmaps) {\n    new_size *= 1.5;\n  }\n  let diff = new_size - this.gpu_mem;\n  engine.perf_state.gpu_mem.tex += diff;\n  this.gpu_mem = diff;\n};\n\nTexture.prototype.setSamplerState = function (params) {\n  let target = this.target;\n  setUnit(0);\n  bound_tex[0] = null; // Force a re-bind, no matter what\n  bindHandle(0, target, this.handle);\n\n  this.filter_min = params.filter_min || default_filter_min;\n  this.filter_mag = params.filter_mag || default_filter_mag;\n  gl.texParameteri(target, gl.TEXTURE_MIN_FILTER, this.filter_min);\n  gl.texParameteri(target, gl.TEXTURE_MAG_FILTER, this.filter_mag);\n  this.wrap_s = params.wrap_s || gl.REPEAT;\n  this.wrap_t = params.wrap_t || gl.REPEAT;\n  gl.texParameteri(target, gl.TEXTURE_WRAP_S, this.wrap_s);\n  gl.texParameteri(target, gl.TEXTURE_WRAP_T, this.wrap_t);\n\n  this.mipmaps = this.filter_min >= 0x2700 && this.filter_min <= 0x2703; // Probably gl.LINEAR_MIPMAP_LINEAR\n\n  if (max_aniso) {\n    if (this.mipmaps && params.filter_mag !== gl.NEAREST) {\n      gl.texParameterf(gl.TEXTURE_2D, aniso_enum, aniso);\n    } else {\n      gl.texParameterf(gl.TEXTURE_2D, aniso_enum, 1);\n    }\n  }\n};\n\nTexture.prototype.updateData = function updateData(w, h, data) {\n  setUnit(0);\n  bound_tex[0] = null; // Force a re-bind, no matter what\n  bindHandle(0, this.target, this.handle);\n  this.src_width = w;\n  this.src_height = h;\n  this.width = w;\n  this.height = h;\n  gl.getError(); // clear the error flag if there is one\n  // Resize NP2 if this is not being used for a texture array, and it is not explicitly allowed (non-mipmapped, wrapped)\n  let np2 = (!isPowerOfTwo(w) || !isPowerOfTwo(h)) && !this.is_array && !(!this.mipmaps && this.wrap_s === gl.CLAMP_TO_EDGE && this.wrap_t === gl.CLAMP_TO_EDGE);\n  if (np2) {\n    this.width = nextHighestPowerOfTwo(w);\n    this.height = nextHighestPowerOfTwo(h);\n    gl.texImage2D(this.target, 0, this.format.internal_type, this.width, this.height, 0, this.format.internal_type, this.format.gl_type, null);\n  }\n  if (data instanceof Uint8Array) {\n    assert(data.length >= w * h * this.format.count);\n    if (this.is_array) {\n      let num_images = h / w; // assume square\n      gl.texImage3D(this.target, 0, this.format.internal_type, w, w, num_images, 0, this.format.internal_type, this.format.gl_type, data);\n    } else if (np2) {\n      // Could do multiple upload thing like below, but smarter, but we really shouldn't be doing this for\n      // in-process generated images!\n      gl.texSubImage2D(this.target, 0, 0, 0, w, h, this.format.internal_type, this.format.gl_type, data);\n    } else {\n      gl.texImage2D(this.target, 0, this.format.internal_type, w, h, 0, this.format.internal_type, this.format.gl_type, data);\n    }\n  } else {\n    assert(data.width); // instanceof Image fails with ublock AdBlocker; also, this is either an Image or Canvas\n    if (this.is_array) {\n      let num_images = h / w;\n      gl.texImage3D(this.target, 0, this.format.internal_type, w, w, num_images, 0, this.format.internal_type, this.format.gl_type, data);\n\n      if (gl.getError()) {\n        // Fix for Samsung devices (Chris's and Galaxy S8 on CrossBrowserTesting)\n        // Try drawing to canvas first\n        let canvas = document.createElement('canvas');\n        canvas.width = w;\n        canvas.height = h;\n        let ctx = canvas.getContext('2d');\n        ctx.drawImage(data, 0, 0);\n        gl.texImage3D(this.target, 0, this.format.internal_type, w, w, num_images, 0, this.format.internal_type, this.format.gl_type, canvas);\n      }\n    } else if (np2) {\n      // Pad up to power of two\n      // Duplicate right and bottom pixel row by sending image 3 times\n      if (w !== this.width) {\n        gl.texSubImage2D(this.target, 0, 1, 0, this.format.internal_type, this.format.gl_type, data);\n      }\n      if (h !== this.height) {\n        gl.texSubImage2D(this.target, 0, 0, 1, this.format.internal_type, this.format.gl_type, data);\n      }\n      gl.texSubImage2D(this.target, 0, 0, 0, this.format.internal_type, this.format.gl_type, data);\n    } else {\n      gl.texImage2D(this.target, 0, this.format.internal_type, this.format.internal_type, this.format.gl_type, data);\n    }\n  }\n  let gl_err = gl.getError();\n  if (gl_err) {\n    return gl_err;\n  }\n  if (this.mipmaps) {\n    gl.generateMipmap(this.target);\n    assert(!gl.getError());\n  }\n  this.updateGPUMem();\n  this.eff_handle = this.handle;\n  this.loaded = true;\n\n  let arr = this.on_load;\n  this.on_load = [];\n  for (let ii = 0; ii < arr.length; ++ii) {\n    arr[ii](this);\n  }\n\n  return 0;\n};\n\nTexture.prototype.onLoad = function (cb) {\n  if (this.loaded) {\n    cb(this); // eslint-disable-line callback-return\n  } else {\n    this.on_load.push(cb);\n  }\n};\n\nconst TEX_RETRY_COUNT = 4;\nTexture.prototype.loadURL = function loadURL(url, filter) {\n  let tex = this;\n\n  function tryLoad(next) {\n    let did_next = false;\n    function done(img) {\n      if (!did_next) {\n        did_next = true;\n        return void next(img);\n      }\n    }\n\n    let img = new Image();\n    img.onload = function () {\n      done(img);\n    };\n    function fail() {\n      done(null);\n    }\n    img.onerror = fail;\n    /* Turbulenz was doing it this way - some advantage?\n    if (typeof URL !== \"undefined\" && URL.createObjectURL) {\n      let xhr = new XMLHttpRequest();\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4) {\n          let xhrStatus = xhr.status;\n          // Sometimes the browser sets status to 200 OK when the connection is closed\n          // before the message is sent (weird!).\n          // In order to address this we fail any completely empty responses.\n          // Hopefully, nobody will get a valid response with no headers and no body!\n          if (xhr.getAllResponseHeaders() === \"\" && !xhr.response) {\n            fail();\n          } else {\n            if (xhrStatus === 200 || xhrStatus === 0) {\n              var blob = xhr.response;\n              img.onload = function blobImageLoadedFn() {\n                imageLoaded();\n                URL.revokeObjectURL(img.src);\n                blob = null;\n              };\n              img.src = URL.createObjectURL(blob);\n            } else {\n              fail();\n            }\n          }\n          xhr.onreadystatechange = null;\n        }\n      };\n      xhr.open('GET', src, true);\n      xhr.responseType = 'blob';\n      xhr.send();\n    } else { */\n    img.crossOrigin = 'anonymous';\n    img.src = url;\n  }\n\n  ++load_count;\n  let retries = 0;\n  function handleLoad(img) {\n    let err_details = '';\n    if (img) {\n      tex.format = format.RGBA8;\n      if (filter) {\n        img = filter(tex, img);\n      }\n      let err = tex.updateData(img.width, img.height, img);\n      if (err) {\n        err_details = `: GLError(${err})`;\n        // Samsung TV gets 1282 on texture arrays\n        // Samsung Galaxy S6 gets 1281 on texture arrays\n        if (tex.is_array && (String(err) === '1282' || String(err) === '1281') && engine.webgl2 && !engine.DEBUG) {\n          local_storage.setJSON('webgl2_disable', {\n            ua: navigator.userAgent,\n            ts: Date.now()\n          });\n          console.error(`Error loading array texture \"${url}\"${err_details}, reloading without WebGL2..`);\n          document.location.reload();\n          return;\n        }\n        retries = TEX_RETRY_COUNT; // do not retry this\n      } else {\n        --load_count;\n        return;\n      }\n    }\n    let err = `Error loading texture \"${url}\"${err_details}`;\n    retries++;\n    if (retries > TEX_RETRY_COUNT) {\n      --load_count;\n      tex.eff_handle = handle_error;\n      tex.load_fail = true;\n      console.error(`${err}${err_details ? '' : ', retries failed'}`);\n      assert(false, err);\n      return;\n    }\n    console.error(`${err}, retrying... `);\n    setTimeout(tryLoad.bind(null, handleLoad), 100 * retries * retries);\n  }\n  tryLoad(handleLoad);\n};\n\nTexture.prototype.copyTexImage = function (x, y, w, h) {\n  assert(w && h);\n  bindHandle(0, this.target, this.handle);\n  gl.copyTexImage2D(this.target, 0, gl.RGB, x, y, w, h, 0);\n  this.src_width = this.width = w;\n  this.src_height = this.height = h;\n  this.updateGPUMem();\n};\n\nTexture.prototype.destroy = function () {\n  assert(this.name);\n  delete textures[this.name];\n  unbindHandle(this.target, this.handle);\n  gl.deleteTexture(this.handle);\n  this.width = this.height = 0;\n  this.updateGPUMem();\n};\n\nfunction create(params) {\n  assert(params.name);\n  let texture = new Texture(params);\n  textures[params.name] = texture;\n  return texture;\n}\n\nlet last_temporary_id = 0;\nexport function createForCapture(unique_name) {\n  let name = unique_name || `screen_temporary_tex_${++last_temporary_id}`;\n  assert(!textures[name]);\n  let texture = create({\n    filter_min: gl.NEAREST,\n    filter_mag: gl.NEAREST,\n    wrap_s: gl.CLAMP_TO_EDGE,\n    wrap_t: gl.CLAMP_TO_EDGE,\n    format: format.RGB8,\n    name\n  });\n  texture.loaded = true;\n  texture.eff_handle = texture.handle;\n  return texture;\n}\n\nexport function load(params) {\n  let key = params.name = params.name || params.url;\n  assert(key);\n  if (textures[key]) {\n    return textures[key];\n  }\n  return create(params);\n}\n\nexport function cname(key) {\n  let idx = key.lastIndexOf('/');\n  if (idx !== -1) {\n    key = key.slice(idx + 1);\n  }\n  idx = key.indexOf('.');\n  if (idx !== -1) {\n    key = key.slice(0, idx);\n  }\n  return key.toLowerCase();\n}\nexport function findTexForReplacement(search_key) {\n  search_key = cname(search_key);\n  for (let key in textures) {\n    let compare_key = cname(key);\n    if (compare_key === search_key) {\n      return textures[key];\n    }\n  }\n  return null;\n}\n\nexport function startup() {\n\n  default_filter_min = gl.LINEAR_MIPMAP_LINEAR;\n  default_filter_mag = gl.LINEAR;\n\n  format.R8.internal_type = gl.LUMINANCE;\n  format.R8.gl_type = gl.UNSIGNED_BYTE;\n  format.RGB8.internal_type = gl.RGB;\n  format.RGB8.gl_type = gl.UNSIGNED_BYTE;\n  format.RGBA8.internal_type = gl.RGBA;\n  format.RGBA8.gl_type = gl.UNSIGNED_BYTE;\n\n  let ext_anisotropic = gl.getExtension('EXT_texture_filter_anisotropic') || gl.getExtension('MOZ_EXT_texture_filter_anisotropic') || gl.getExtension('WEBKIT_EXT_texture_filter_anisotropic');\n  if (ext_anisotropic) {\n    aniso_enum = ext_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT;\n    aniso = max_aniso = gl.getParameter(ext_anisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT);\n  }\n\n  handle_error = load({\n    name: 'error',\n    width: 2, height: 2,\n    nozoom: true,\n    format: format.RGBA8,\n    filter_mag: gl.NEAREST,\n    data: new Uint8Array([255, 20, 147, 255, 255, 0, 0, 255, 255, 255, 255, 255, 255, 20, 147, 255])\n  }).handle;\n\n  handle_loading = load({\n    name: 'loading',\n    width: 2, height: 2,\n    nozoom: true,\n    format: format.RGBA8,\n    data: new Uint8Array([127, 127, 127, 255, 0, 0, 0, 255, 64, 64, 64, 255, 127, 127, 127, 255])\n  }).handle;\n\n  load({\n    name: 'white',\n    width: 2, height: 2,\n    nozoom: true,\n    format: format.RGBA8,\n    data: new Uint8Array([255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255])\n  });\n\n  load({\n    name: 'invisible',\n    width: 2, height: 2,\n    nozoom: true,\n    format: format.RGBA8,\n    data: new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])\n  });\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst glov_engine = require('./engine.js');\n\nconst sprites = require('./sprites.js');\nconst shaders = require('./shaders.js');\nconst textures = require('./textures.js');\nconst glov_ui = require('./ui.js');\n\nconst { easeOut } = require('../../common/util.js');\nconst { unit_vec, vec4 } = require('./vmath.js');\nconst { floor, min, pow, random } = Math;\n\nlet transitions = [];\n\nexport const IMMEDIATE = 'immediate';\n\nexport const REMOVE = 'remove';\nexport const CONTINUE = 'continue';\n\nconst shader_data = {\n  transition_pixelate: {\n    fp: '#pragma WebGL2\\n\\nprecision lowp float;\\n\\nvarying highp vec2 interp_texcoord;\\n\\nuniform sampler2D tex0;\\nuniform vec4 param0;\\nuniform vec4 param1;\\n\\nvoid main(void)\\n{\\n  vec2 interp_uvs = interp_texcoord;\\n  // TODO: for best look, should generate an appropriate mipmap and sample from that/just render it w/ nearest neighbor\\n  // result = texture2D(tex0, min(floor(interp_uvs.xy * param0.xy + 0.5) * param0.zw - param1.xy, param1.zw) );\\n\\n  // Unlike ARBfp version, shift RGB channels separately (3x slowdown)\\n  vec4 texture0r = texture2D(tex0, min(floor(interp_uvs.xy * param0.xy + vec2(0.58, 0.5)) * param0.zw - param1.xy, param1.zw) );\\n  vec4 texture0g = texture2D(tex0, min(floor(interp_uvs.xy * param0.xy + vec2(0.5, 0.48)) * param0.zw - param1.xy, param1.zw) );\\n  vec4 texture0b = texture2D(tex0, min(floor(interp_uvs.xy * param0.xy + vec2(0.42, 0.5)) * param0.zw - param1.xy, param1.zw) );\\n  gl_FragColor = vec4(texture0r.r, texture0g.g, texture0b.b, 1);\\n}\\n'\n  }\n};\n\nfunction getShader(key) {\n  let elem = shader_data[key];\n  if (!elem.shader) {\n    elem.shader = shaders.create(gl.FRAGMENT_SHADER, key, elem.fp);\n  }\n  return elem.shader;\n}\n\nclass GlovTransition {\n  constructor(z, func) {\n    this.z = z;\n    this.capture = null;\n    this.func = func;\n    this.accum_time = 0;\n  }\n}\n\nfunction transitionCapture(trans) {\n  assert(!trans.capture);\n  trans.capture = textures.createForCapture();\n  glov_engine.captureFramebuffer(trans.capture);\n}\n\nexport function queue(z, fn) {\n  let immediate = false;\n  if (z === IMMEDIATE) {\n    immediate = true;\n    z = Z.TRANSITION_FINAL;\n  }\n\n  for (let ii = 0; ii < transitions.length; ++ii) {\n    let trans = transitions[ii];\n    if (trans.z === z) {\n      // same Z\n      assert(trans.capture);\n      if (!trans.capture) {\n        // two transitions at the same Z on one frame!  ignore second\n        return false;\n      }\n    }\n  }\n  let trans = new GlovTransition(z, fn);\n  transitions.push(trans);\n\n  if (immediate) {\n    transitionCapture(trans);\n  }\n  return true;\n}\n\nfunction destroyTexture(tex) {\n  tex.destroy();\n}\n\nexport function render(dt) {\n  dt = min(dt, 100); // debug: clamp frame times\n  for (let trans_idx = 0; trans_idx < transitions.length; ++trans_idx) {\n    let trans = transitions[trans_idx];\n    trans.accum_time += dt;\n    if (!trans.capture) {\n      // queue up a capture past the specified Z, so transitions rendering at that Z (plus a handful) get captured\n      sprites.queuefn(trans.z + Z.TRANSITION_RANGE, transitionCapture.bind(null, trans));\n    } else if (trans.capture) {\n      // call the function and give them the Z\n      // If not the last one, want it to end now!\n      let force_end = trans_idx < transitions.length - 1;\n      let ret = trans.func(trans.z, trans.capture, trans.accum_time, force_end);\n      if (ret === REMOVE) {\n        setTimeout(destroyTexture.bind(null, trans.capture), 0);\n        transitions.splice(trans_idx, 1);\n        trans_idx--;\n      }\n    }\n  }\n}\n\nexport function active() {\n  return transitions.length;\n}\n\nfunction glovTransitionFadeFunc(fade_time, z, initial, ms_since_start, force_end) {\n  let progress = min(ms_since_start / fade_time, 1);\n  let alpha = 1 - easeOut(progress, 2);\n  let color = vec4(1, 1, 1, alpha);\n  camera2d.setNormalized();\n  sprites.queueraw4([initial], 0, 0, 0, 1, 1, 1, 1, 0, z, 0, 1, 1, 0, color);\n\n  if (force_end || progress === 1) {\n    return REMOVE;\n  }\n  return CONTINUE;\n}\n\n/*\n  // Doesn't work because we need more than just 2 UV values in the queue call\nfunction glovTransitionWipeFunc(wipe_time, wipe_angle, z, tex, ms_since_start, force_end) {\n  let progress = min(ms_since_start / wipe_time, 1);\n\n  camera2d.setNormalized();\n\n  let uvs = [[0,1], [1,0]];\n\n  let points = [{}, {}, {}, {}];\n  for (let ii = 0; ii < 4; ii++) {\n    let x = (ii === 1 || ii === 2) ? 1 : 0;\n    let y = (ii >= 2) ? 1 : 0;\n    points[ii].x = x;\n    points[ii].y = y;\n  }\n\n  while (wipe_angle > PI) {\n    wipe_angle -= (2 * PI);\n  }\n  while (wipe_angle < -PI) {\n    wipe_angle += (2 * PI);\n  }\n\n  // TODO: if anyone ever uses this, change 0 degrees to be up, not right, to match other things?\n  if (wipe_angle >= -PI_4 && wipe_angle <= PI_4) {\n    // horizontal wipe from left to right\n    let x0 = progress * 2; // rightmost x\n    let x1 = x0 - sin(abs(wipe_angle)) / SQRT1_2; // leftmost x\n    if (wipe_angle < 0) {\n      points[0].x = x1;\n      points[3].x = x0;\n    } else {\n      points[0].x = x0;\n      points[3].x = x1;\n    }\n    points[1].x = points[2].x = 2;\n  } else if (wipe_angle >= PI_2 + PI_4 || wipe_angle <= -PI_2 - PI_4) {\n    // horizontal wipe from right to left\n    let x0 = 1 - progress * 2; // leftmost x\n    let x1 = x0 + sin(abs(wipe_angle)) / SQRT1_2; // rightmost x,\n    if (wipe_angle < 0) {\n      points[1].x = x1;\n      points[2].x = x0;\n    } else {\n      points[1].x = x0;\n      points[2].x = x1;\n    }\n    points[0].x = points[3].x = -1;\n  } else if (wipe_angle > PI_4 && wipe_angle <= PI_2 + PI_4) {\n    // vertical wipe, top to bottom\n    let y0 = progress * 2; // bottommost y\n    let offs = cos(wipe_angle) / SQRT1_2;\n    let y1 = y0 - abs(offs); // topmost y,\n    if (offs > 0) {\n      points[0].y = y0;\n      points[1].y = y1;\n    } else {\n      points[0].y = y1;\n      points[1].y = y0;\n    }\n    points[2].y = points[3].y = 2;\n  } else {\n    // vertical wipe, bottom to top\n    let y0 = 1 - progress * 2; // topmost y\n    let offs = cos(wipe_angle) / SQRT1_2;\n    let y1 = y0 + abs(offs); // bottommost y,\n    if (offs > 0) {\n      points[2].y = y1;\n      points[3].y = y0;\n    } else {\n      points[2].y = y0;\n      points[3].y = y1;\n    }\n    points[0].y = points[1].y = -1;\n  }\n  // interp UVs based on points\n  points[0].u = lerp(points[0].x, uvs[0][0], uvs[1][0]);\n  points[1].u = lerp(points[1].x, uvs[0][0], uvs[1][0]);\n  points[2].u = lerp(points[2].x, uvs[0][0], uvs[1][0]);\n  points[3].u = lerp(points[3].x, uvs[0][0], uvs[1][0]);\n  points[0].v = lerp(points[0].y, uvs[0][1], uvs[1][1]);\n  points[1].v = lerp(points[1].y, uvs[0][1], uvs[1][1]);\n  points[2].v = lerp(points[2].y, uvs[0][1], uvs[1][1]);\n  points[3].v = lerp(points[3].y, uvs[0][1], uvs[1][1]);\n\n  sprites.queueraw4([tex],\n    points[0].x, points[0].y, points[3].x, points[3].y,\n    points[2].x, points[2].y, points[1].x, points[1].y,\n    z,\n    points[0].u, points[0].v, points[2].u, points[2].v,\n    unit_vec, 'alpha_nearest');\n\n  if (force_end || progress === 1) {\n    return REMOVE;\n  }\n  return CONTINUE;\n}\n\n*/\n\nfunction glovTransitionSplitScreenFunc(time, border_width, slide_window, z, tex, ms_since_start, force_end) {\n  let border_color = vec4(1, 1, 1, 1);\n  let progress = easeOut(min(ms_since_start / time, 1), 2);\n  camera2d.setNormalized();\n\n  let uvs = [[0, 1], [1, 0]];\n\n  let xoffs = progress;\n  let v_half = uvs[0][1] + (uvs[1][1] - uvs[0][1]) / 2;\n  if (slide_window) {\n    // slide window\n    sprites.queueraw([tex], 0, 0, z, 1 - xoffs, 1 / 2, 0, uvs[0][1], uvs[1][0] * (1 - progress), v_half, unit_vec);\n    sprites.queueraw([tex], 0 + xoffs, 1 / 2, z, 1 - xoffs, 1 / 2, uvs[1][0] * progress, v_half, uvs[1][0], uvs[1][1], unit_vec);\n  } else {\n    // slide image\n    sprites.queueraw([tex], 0 - xoffs, 0, z, 1, 1 / 2, uvs[0][0], uvs[0][1], uvs[1][0], v_half, unit_vec);\n    sprites.queueraw([tex], 0 + xoffs, 1 / 2, z, 1, 1 / 2, uvs[0][0], v_half, uvs[1][0], uvs[1][1], unit_vec);\n  }\n  let border_grow_progress = min(progress * 4, 1);\n  border_color[3] = border_grow_progress;\n  border_width *= border_grow_progress;\n  // TODO: Would look better if the horizontal border grew from the middle out, so the overlapping bit is identical\n  // on both sides\n  glov_ui.drawRect(0, 0.5 - border_width, 1 - xoffs, 0.5, z + 1, border_color);\n  glov_ui.drawRect(1 - xoffs - border_width, 0, 1 - xoffs, 0.5, z + 1, border_color);\n  glov_ui.drawRect(xoffs, 0.5, 1, 0.5 + border_width, z + 1, border_color);\n  glov_ui.drawRect(xoffs, 0.5, xoffs + border_width, 1, z + 1, border_color);\n\n  if (force_end || progress === 1) {\n    return REMOVE;\n  }\n  return CONTINUE;\n}\n\nconst render_scale = 1;\nlet transition_pixelate_texture;\n\nfunction transitionPixelateCapture() {\n  if (!transition_pixelate_texture) {\n    transition_pixelate_texture = textures.createForCapture();\n  }\n  glov_engine.captureFramebuffer(transition_pixelate_texture);\n}\n\nfunction glovTransitionPixelateFunc(time, z, tex, ms_since_start, force_end) {\n  //ms_since_start %= time;\n  //let viewport = glov_engine.graphics_device.getViewport();\n  //let gd_width = viewport[2];\n  let gd_width = glov_engine.width;\n  let progress = min(ms_since_start / time, 1);\n  camera2d.setNormalized();\n\n  if (progress > 0.5) {\n    sprites.queuefn(z, transitionPixelateCapture);\n    if (transition_pixelate_texture) {\n      tex = transition_pixelate_texture;\n    }\n  }\n\n  let partial_progress = (progress > 0.5 ? 1 - progress : progress) * 2;\n  // Use power of two scalings, but then scale relative to a 1024px virtual screen, so the biggest\n  //  pixel is about the same percentage of the screen regardless of resolution.\n  let pixel_scale = pow(2, floor(partial_progress * 8.9)) / 1024 * gd_width * render_scale;\n\n  let param0 = vec4(tex.width / pixel_scale, tex.height / pixel_scale, pixel_scale / tex.width, pixel_scale / tex.height);\n  let param1 = vec4(0.5 / tex.width, 0.5 / tex.height, (tex.texSizeX - 1) / tex.width, (tex.texSizeY - 1) / tex.height);\n\n  sprites.queueraw([tex], 0, 0, z + 1, 1, 1, 0, 1, 1, 0, unit_vec, getShader('transition_pixelate'), {\n    param0,\n    param1\n  });\n\n  if (force_end || progress === 1) {\n    if (transition_pixelate_texture) {\n      setTimeout(destroyTexture.bind(null, transition_pixelate_texture), 0);\n    }\n    transition_pixelate_texture = null;\n    return REMOVE;\n  }\n  return CONTINUE;\n}\n\nexport function fade(fade_time) {\n  return glovTransitionFadeFunc.bind(null, fade_time);\n}\n\n// export function wipe(wipe_time, wipe_angle) {\n//   return glovTransitionWipeFunc.bind(null, wipe_time, wipe_angle);\n// }\n\n// border_width in camera-relative size\nexport function splitScreen(time, border_width, slide_window) {\n  border_width /= camera2d.w(); // convert to normalized units\n  return glovTransitionSplitScreenFunc.bind(null, time, border_width, slide_window);\n}\n\nexport function pixelate(fade_time) {\n  return glovTransitionPixelateFunc.bind(null, fade_time);\n}\n\n// export function logoZoom(time, logo) {\n//   return glovTransitionLogoZoomFunc.bind(null, time, logo);\n// }\n\nexport function randomTransition(fade_time_scale) {\n  fade_time_scale = fade_time_scale || 1;\n  let idx = floor(random() * 3);\n  switch (idx) {\n    case 0:\n      return fade(500 * fade_time_scale);\n    case 1:\n      return splitScreen(250 * fade_time_scale, 2, false);\n    case 2:\n      return pixelate(750 * fade_time_scale);\n    // case 3:\n    //   return wipe(250 * fade_time_scale, random() * 2 * PI);\n    // case 4:\n    //   if (!logo) {\n    //     GlovTextureLoadOptions options;\n    //     options.clamp_s = options.clamp_t = true;\n    //     logo = GlovTextures::loadtex(\"data/SampleLogoTransition.png\", &options);\n    //   }\n    //   glovTransitionQueue(Z_TRANSITION_FINAL, glovTransitionLogoZoom(500, logo));\n    //   break;\n    default:\n      assert(0);\n  }\n  return null;\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint no-underscore-dangle:off */\n\nwindow.Z = window.Z || {};\nZ.BORDERS = Z.BORDERS || 90;\nZ.UI = Z.UI || 100;\nZ.MODAL = Z.MODAL || 1000;\nZ.TOOLTIP = Z.TOOLTIP || 2000;\nZ.DEBUG = Z.DEBUG || 9800;\n\n// very high, but can still add integers\nZ.TRANSITION_FINAL = Z.TRANSITION_FINAL || 9900;\n// how much Z range can be used for rendering transitions - the capture happens at z + Z_TRANSITION_RANGE\nZ.TRANSITION_RANGE = Z.TRANSITION_RANGE || 10;\n\nZ.FPSMETER = Z.FPSMETER || 10000;\n\nconst assert = require('assert');\nconst camera2d = require('./camera2d.js');\nconst glov_edit_box = require('./edit_box.js');\nconst effects = require('./effects.js');\nconst glov_engine = require('./engine.js');\nconst glov_font = require('./font.js');\nconst glov_input = require('./input.js');\nconst { linkTick } = require('./link.js');\nconst { abs, max, min, round, sqrt } = Math;\nconst { soundLoad, soundPlay } = require('./sound.js');\nconst glov_sprites = require('./sprites.js');\nconst textures = require('./textures.js');\nconst { clamp, clone, lerp, merge } = require('../../common/util.js');\nconst { mat43, m43identity, m43mul } = require('./mat43.js');\nconst { vec2, vec4, v4scale } = require('./vmath.js');\n\nconst MODAL_DARKEN = 0.75;\nlet KEYS;\nlet PAD;\n\nconst menu_fade_params_default = {\n  blur: [0.125, 0.865],\n  saturation: [0.5, 0.1],\n  brightness: [1, 1 - MODAL_DARKEN],\n  fallback_darken: vec4(0, 0, 0, MODAL_DARKEN),\n  z: Z.MODAL\n};\n\nexport function focuslog(...args) {\n  // console.log(`focuslog(${glov_engine.global_frame_index}): `, ...args);\n}\n\nexport function makeColorSet(color) {\n  let ret = {\n    regular: vec4(),\n    rollover: vec4(),\n    down: vec4(),\n    disabled: vec4()\n  };\n  v4scale(ret.regular, color, 1);\n  v4scale(ret.rollover, color, 0.8); // because we do not have specific graphics\n  v4scale(ret.down, color, 0.7);\n  v4scale(ret.disabled, color, 0.4);\n  for (let field in ret) {\n    ret[field][3] = color[3];\n  }\n  return ret;\n}\n\nfunction doBlurEffect(factor, params) {\n  factor = lerp(factor, params.blur[0], params.blur[1]);\n  if (factor) {\n    effects.applyGaussianBlur({\n      source: glov_engine.captureFramebuffer(),\n      blur: factor\n      // min_size: 128,\n    });\n  }\n}\n\nlet desaturate_xform = mat43();\nlet desaturate_tmp = mat43();\nfunction doDesaturateEffect(factor, params) {\n  let saturation = lerp(factor, params.saturation[0], params.saturation[1]);\n  let brightness = lerp(factor, params.brightness[0], params.brightness[1]);\n  if (saturation === 1 && brightness === 1) {\n    return;\n  }\n  m43identity(desaturate_xform);\n\n  effects.saturationMatrix(desaturate_tmp, saturation);\n  m43mul(desaturate_xform, desaturate_xform, desaturate_tmp);\n\n  effects.brightnessScaleMatrix(desaturate_tmp, brightness);\n  m43mul(desaturate_xform, desaturate_xform, desaturate_tmp);\n\n  // if ((hue % (Math.PI * 2)) !== 0) {\n  //   effects.hueMatrix(tmp, hue);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (contrast !== 1) {\n  //   effects.contrastMatrix(tmp, contrast);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (brightness !== 0) {\n  //   effects.brightnessMatrix(tmp, brightness);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (additiveRGB[0] !== 0 || additiveRGB[1] !== 0 || additiveRGB[2] !== 0) {\n  //   effects.additiveMatrix(tmp, additiveRGB);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (grayscale) {\n  //   effects.grayScaleMatrix(tmp);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (negative) {\n  //   effects.negativeMatrix(tmp);\n  //   m43mul(xform, xform, tmp);\n  // }\n  // if (sepia) {\n  //   effects.sepiaMatrix(tmp);\n  //   m43mul(xform, xform, tmp);\n  // }\n  effects.applyColorMatrix({\n    colorMatrix: desaturate_xform,\n    source: glov_engine.captureFramebuffer()\n  });\n}\n\n// overrideable default parameters\nexport let button_height = 32;\nexport let font_height = 24;\nexport let button_width = 200;\nexport let modal_button_width = 100;\nexport let button_img_size = button_height;\nexport let modal_width = 600;\nexport let modal_y0 = 200;\nexport let modal_title_scale = 1.2;\nexport let modal_pad = 16;\nexport let panel_pixel_scale = 32 / 13; // button_height / button pixel resolution\nexport let tooltip_panel_pixel_scale = panel_pixel_scale;\nexport let tooltip_width = 400;\nexport let tooltip_pad = 8;\n\nexport let font_style_focused = glov_font.style(null, {\n  color: 0x000000ff,\n  outline_width: 2,\n  outline_color: 0xFFFFFFff\n});\nexport let font_style_normal = glov_font.styleColored(null, 0x000000ff);\n\nexport let font;\nexport let sprites = {};\n\nexport let color_button = makeColorSet([1, 1, 1, 1]);\nexport let color_panel = vec4(1, 1, 0.75, 1);\nexport let modal_font_style = glov_font.styleColored(null, 0x000000ff);\n\nlet sounds = {};\nexport let button_mouseover = false; // for callers to poll the very last button\nexport let button_focused = false; // for callers to poll the very last button\nexport let button_click = null; // on click, for callers to poll which mouse button, etc\nexport let touch_changed_focus = false; // did a touch even this frame change focus?\n// For tracking global mouseover state\nlet last_frame_button_mouseover = false;\nlet frame_button_mouseover = false;\n\nlet modal_dialog = null;\nlet modal_stealing_focus = false;\nexport let menu_up = false; // Boolean to be set by app to impact behavior, similar to a modal\nlet menu_fade_params = merge({}, menu_fade_params_default);\nlet menu_up_time = 0;\n\nexports.this_frame_edit_boxes = [];\nlet last_frame_edit_boxes = [];\nlet dom_elems = [];\nlet dom_elems_issued = 0;\n\n// for modal dialogs\nlet button_keys;\n\nlet focused_last_frame;\nlet focused_this_frame;\nlet focused_key_not;\nlet focused_key;\nlet focused_key_prev1;\nlet focused_key_prev2;\n\nlet pad_focus_left;\nlet pad_focus_right;\n\nexport function loadUISprite(name, ws, hs, overrides, only_override) {\n  let override = overrides && overrides[name];\n  if (override === null) {\n    // skip it, assume not used\n  } else if (override) {\n    sprites[name] = glov_sprites.create({\n      name: override[0],\n      ws: override[1],\n      hs: override[2]\n    });\n  } else if (!only_override) {\n    sprites[name] = glov_sprites.create({\n      name: `ui/${name}`,\n      ws,\n      hs\n    });\n  }\n}\n\nexport function startup(param) {\n  font = param.font;\n  let overrides = param.ui_sprites;\n  KEYS = glov_input.KEYS;\n  PAD = glov_input.PAD;\n  if (param.pad_focus_dpad) {\n    pad_focus_left = PAD.LEFT;\n    pad_focus_right = PAD.RIGHT;\n  } else {\n    pad_focus_left = PAD.LEFT_BUMPER;\n    pad_focus_right = PAD.RIGHT_BUMPER;\n  }\n\n  loadUISprite('button', [4, 5, 4], [13], overrides);\n  sprites.button_regular = sprites.button;\n  loadUISprite('button_rollover', [4, 5, 4], [13], overrides, true);\n  loadUISprite('button_down', [4, 5, 4], [13], overrides);\n  loadUISprite('button_disabled', [4, 5, 4], [13], overrides);\n  loadUISprite('panel', [3, 2, 3], [3, 10, 3], overrides);\n  loadUISprite('menu_entry', [4, 5, 4], [13], overrides);\n  loadUISprite('menu_selected', [4, 5, 4], [13], overrides);\n  loadUISprite('menu_down', [4, 5, 4], [13], overrides);\n  loadUISprite('menu_header', [4, 5, 12], [13], overrides);\n  loadUISprite('slider', [6, 2, 6], [13], overrides);\n  // loadUISprite('slider_notch', [3], [13], overrides);\n  loadUISprite('slider_handle', [9], [13], overrides);\n\n  sprites.white = glov_sprites.create({ url: 'white' });\n\n  button_keys = {\n    ok: { key: [KEYS.O], pad: [PAD.X] },\n    cancel: { key: [KEYS.ESC], pad: [PAD.B, PAD.Y] }\n  };\n  button_keys.yes = clone(button_keys.ok);\n  button_keys.yes.key.push(KEYS.Y);\n  button_keys.no = clone(button_keys.cancel);\n  button_keys.no.key.push(KEYS.N);\n}\n\nlet dynamic_text_elem;\nexport function getElem(allow_modal, last_elem) {\n  if (modal_dialog && !allow_modal) {\n    return null;\n  }\n  if (dom_elems_issued >= dom_elems.length || !last_elem) {\n    let elem = document.createElement('div');\n    elem.setAttribute('class', 'glovui_dynamic');\n    if (!dynamic_text_elem) {\n      dynamic_text_elem = document.getElementById('dynamic_text');\n    }\n    dynamic_text_elem.appendChild(elem);\n    dom_elems.push(elem);\n    last_elem = elem;\n  }\n  if (dom_elems[dom_elems_issued] !== last_elem) {\n    for (let ii = dom_elems_issued + 1; ii < dom_elems.length; ++ii) {\n      if (dom_elems[ii] === last_elem) {\n        dom_elems[ii] = dom_elems[dom_elems_issued];\n        dom_elems[dom_elems_issued] = last_elem;\n      }\n    }\n  }\n  let elem = dom_elems[dom_elems_issued];\n  dom_elems_issued++;\n  return elem;\n}\n\nexport function bindSounds(_sounds) {\n  sounds = _sounds;\n  for (let key in sounds) {\n    soundLoad(sounds[key]);\n  }\n}\n\nexport function drawHBox(coords, s, color) {\n  let uidata = s.uidata;\n  let ws = [uidata.wh[0] * coords.h, 0, uidata.wh[2] * coords.h];\n  let x = coords.x;\n  ws[1] = max(0, coords.w - ws[0] - ws[2]);\n  for (let ii = 0; ii < ws.length; ++ii) {\n    let my_w = ws[ii];\n    s.draw({\n      x,\n      y: coords.y,\n      z: coords.z,\n      color,\n      w: my_w,\n      h: coords.h,\n      uvs: uidata.rects[ii]\n      // nozoom: true, // nozoom since different parts of the box get zoomed differently\n    });\n    x += my_w;\n  }\n}\n\nexport function drawVBox(coords, s, color) {\n  let uidata = s.uidata;\n  let hs = [uidata.hw[0] * coords.w, 0, uidata.hw[2] * coords.w];\n  let y = coords.y;\n  hs[1] = max(0, coords.h - hs[0] - hs[2]);\n  for (let ii = 0; ii < hs.length; ++ii) {\n    let my_h = hs[ii];\n    s.draw({\n      x: coords.x,\n      y,\n      z: coords.z,\n      color,\n      w: coords.w,\n      h: my_h,\n      uvs: uidata.rects[ii]\n      // nozoom: true, // nozoom since different parts of the box get zoomed differently\n    });\n    y += my_h;\n  }\n}\n\nexport function drawBox(coords, s, pixel_scale, color) {\n  let uidata = s.uidata;\n  let scale = pixel_scale;\n  let ws = [uidata.widths[0] * scale, 0, uidata.widths[2] * scale];\n  ws[1] = max(0, coords.w - ws[0] - ws[2]);\n  let hs = [uidata.heights[0] * scale, 0, uidata.heights[2] * scale];\n  hs[1] = max(0, coords.h - hs[0] - hs[2]);\n  let x = coords.x;\n  for (let ii = 0; ii < ws.length; ++ii) {\n    let my_w = ws[ii];\n    if (my_w) {\n      let y = coords.y;\n      for (let jj = 0; jj < hs.length; ++jj) {\n        let my_h = hs[jj];\n        if (my_h) {\n          s.draw({\n            x, y, z: coords.z,\n            color,\n            w: my_w,\n            h: my_h,\n            uvs: uidata.rects[jj * 3 + ii],\n            nozoom: true // nozoom since different parts of the box get zoomed differently\n          });\n          y += my_h;\n        }\n      }\n      x += my_w;\n    }\n  }\n}\n\nexport function playUISound(name, volume) {\n  if (name === 'select') {\n    name = 'button_click';\n  }\n  if (sounds[name]) {\n    soundPlay(sounds[name], volume);\n  }\n}\n\nexport function setMouseOver(key, quiet) {\n  if (last_frame_button_mouseover !== key && frame_button_mouseover !== key && !quiet) {\n    playUISound('rollover');\n  }\n  frame_button_mouseover = key;\n  button_mouseover = true;\n}\n\nexport function focusSteal(key) {\n  if (key !== focused_key) {\n    focuslog('focusSteal ', key);\n  }\n  focused_this_frame = true;\n  focused_key = key;\n}\n\nexport function focusCanvas() {\n  focusSteal('canvas');\n}\n\nexport function isFocusedPeek(key) {\n  return focused_key === key;\n}\nexport function isFocused(key) {\n  if (key !== focused_key_prev2) {\n    focused_key_prev1 = focused_key_prev2;\n    focused_key_prev2 = key;\n  }\n  if (key === focused_key || key !== focused_key_not && !focused_this_frame && !focused_last_frame) {\n    if (key !== focused_key) {\n      focuslog('isFocused->focusSteal');\n    }\n    focusSteal(key);\n    return true;\n  }\n  return false;\n}\n\nexport function focusNext(key) {\n  focuslog('focusNext ', key);\n  playUISound('rollover');\n  focused_key = null;\n  focused_last_frame = focused_this_frame = false;\n  focused_key_not = key;\n  // Eat input events so a pair of keys (e.g. SDLK_DOWN and SDLK_CONTROLLER_DOWN)\n  // don't get consumed by two separate widgets\n  glov_input.eatAllInput();\n}\n\nexport function focusPrev(key) {\n  focuslog('focusPrev ', key);\n  playUISound('rollover');\n  if (key === focused_key_prev2) {\n    focusSteal(focused_key_prev1);\n  } else {\n    focusSteal(focused_key_prev2);\n  }\n  glov_input.eatAllInput();\n}\n\nexport function focusCheck(key) {\n  if (modal_stealing_focus) {\n    // hidden by modal, etc\n    return false;\n  }\n  // Returns true even if focusing previous element, since for this frame, we are still effectively focused!\n  let focused = isFocused(key);\n  if (focused) {\n    if (glov_input.keyDownEdge(KEYS.TAB)) {\n      if (glov_input.keyDown(KEYS.SHIFT)) {\n        focusPrev(key);\n      } else {\n        focusNext(key);\n        focused = false;\n      }\n    }\n    if (glov_input.padButtonDownEdge(pad_focus_right)) {\n      focusNext(key);\n      focused = false;\n    }\n    if (glov_input.padButtonDownEdge(pad_focus_left)) {\n      focusPrev(key);\n    }\n  }\n  return focused;\n}\n\nexport function panel(param) {\n  assert(typeof param.x === 'number');\n  assert(typeof param.y === 'number');\n  assert(typeof param.w === 'number');\n  assert(typeof param.h === 'number');\n  param.z = param.z || Z.UI - 1;\n  let color = param.color || color_panel;\n  drawBox(param, sprites.panel, param.pixel_scale || panel_pixel_scale, color);\n  glov_input.click(param);\n  glov_input.mouseOver(param);\n}\n\nexport function drawTooltip(param) {\n  assert(typeof param.x === 'number');\n  assert(typeof param.y === 'number');\n  assert(typeof param.tooltip === 'string');\n\n  let tooltip_w = param.tooltip_width || tooltip_width;\n  let x = param.x;\n  if (x + tooltip_w > camera2d.x1()) {\n    x = camera2d.x1() - tooltip_w;\n  }\n  let z = param.z || Z.TOOLTIP;\n  let tooltip_y0 = param.y;\n  let eff_tooltip_pad = param.tooltip_pad || tooltip_pad;\n  let w = tooltip_w - eff_tooltip_pad * 2;\n  if (param.tooltip_above) {\n    tooltip_y0 -= font_height * font.numLines(modal_font_style, w, 0, font_height, param.tooltip) + eff_tooltip_pad * 2;\n  }\n  let y = tooltip_y0 + eff_tooltip_pad;\n  y += font.drawSizedWrapped(modal_font_style, x + eff_tooltip_pad, y, z + 1, w, 0, font_height, param.tooltip);\n  y += eff_tooltip_pad;\n  let pixel_scale = param.pixel_scale || tooltip_panel_pixel_scale;\n\n  panel({\n    x,\n    y: tooltip_y0,\n    z,\n    w: tooltip_w,\n    h: y - tooltip_y0,\n    pixel_scale\n  });\n}\n\n// eslint-disable-next-line complexity\nexport function buttonShared(param) {\n  let state = 'regular';\n  let ret = false;\n  if (param.draw_only) {\n    return { ret, state };\n  }\n  let key = param.key || `${param.x}_${param.y}`;\n  let rollover_quiet = param.rollover_quiet;\n  let focused = !param.disabled && !param.no_focus && focusCheck(key);\n  let key_opts = param.in_event_cb ? { in_event_cb: param.in_event_cb } : null;\n  button_mouseover = false;\n  if (param.disabled) {\n    glov_input.mouseOver(param); // Still eat mouse events\n    state = 'disabled';\n  } else if (param.drag_target && (ret = glov_input.dragDrop(param))) {\n    console.log('dragDrop');\n    if (!param.no_touch_mouseover || !glov_input.mousePosIsTouch()) {\n      setMouseOver(key, rollover_quiet);\n    }\n    if (!param.no_focus) {\n      focusSteal(key);\n      focused = true;\n    }\n  } else if ((button_click = glov_input.click(param)) || param.long_press && (button_click = glov_input.longPress(param))) {\n    if (!param.no_touch_mouseover || !glov_input.mousePosIsTouch()) {\n      setMouseOver(key, rollover_quiet);\n    }\n    if (param.touch_twice && glov_input.mousePosIsTouch() && !focused) {\n      // Just focus, show tooltip\n      touch_changed_focus = true;\n    } else {\n      ret = true;\n    }\n    if (!param.no_focus) {\n      focusSteal(key);\n      focused = true;\n    }\n  } else if (param.drag_target && glov_input.dragOver(param)) {\n    // Set this even if param.no_touch_mouse_over is set\n    setMouseOver(key, rollover_quiet);\n    state = glov_input.mouseDown() ? 'down' : 'rollover';\n  } else if (param.drag_over && glov_input.dragOver(param)) {\n    // do nothing\n  } else if (glov_input.mouseOver(param)) {\n    if (param.no_touch_mouseover && glov_input.mousePosIsTouch()) {\n      // do not set mouseover\n    } else if (param.touch_twice && !focused && glov_input.mousePosIsTouch()) {\n      // do not set mouseover\n    } else {\n      setMouseOver(key, rollover_quiet);\n      state = glov_input.mouseDown() ? 'down' : 'rollover';\n    }\n  }\n  button_focused = focused;\n  if (focused) {\n    if (glov_input.keyDownEdge(KEYS.SPACE, key_opts) || glov_input.keyDownEdge(KEYS.RETURN, key_opts) || glov_input.padButtonDownEdge(PAD.A)) {\n      ret = true;\n    }\n  }\n  if (ret) {\n    state = 'down';\n    playUISound('button_click');\n  }\n  if (button_mouseover && param.tooltip) {\n    drawTooltip({\n      x: param.x,\n      y: param.tooltip_above ? param.y - 2 : param.y + param.h + 2,\n      tooltip_above: param.tooltip_above,\n      tooltip: param.tooltip,\n      tooltip_width: param.tooltip_width\n    });\n  }\n  param.z += param.z_bias && param.z_bias[state] || 0;\n  return { ret, state, focused };\n}\n\nexport let button_last_color;\nexport function buttonTextDraw(param, state, focused) {\n  let colors = param.colors || color_button;\n  let color = button_last_color = colors[state];\n  let base_name = param.base_name || 'button';\n  let sprite_name = `${base_name}_${state}`;\n  let sprite = sprites[sprite_name];\n  // Note: was if (sprite) color = colors.regular for specific-sprite matches\n  if (!sprite) {\n    sprite = sprites[base_name];\n  }\n\n  drawHBox(param, sprite, color);\n  let hpad = min(param.font_height * 0.25, param.w * 0.1);\n  font.drawSizedAligned(focused ? font_style_focused : font_style_normal, param.x + hpad, param.y, param.z + 0.1,\n  // eslint-disable-next-line no-bitwise\n  param.font_height, glov_font.ALIGN.HCENTERFIT | glov_font.ALIGN.VCENTER, param.w - hpad * 2, param.h, param.text);\n}\n\nexport function buttonText(param) {\n  // required params\n  assert(typeof param.x === 'number');\n  assert(typeof param.y === 'number');\n  assert(typeof param.text === 'string');\n  // optional params\n  param.z = param.z || Z.UI;\n  param.w = param.w || button_width;\n  param.h = param.h || button_height;\n  param.font_height = param.font_height || font_height;\n\n  let { ret, state, focused } = buttonShared(param);\n  buttonTextDraw(param, state, focused);\n  return ret;\n}\n\nexport function buttonImage(param) {\n  // required params\n  assert(typeof param.x === 'number');\n  assert(typeof param.y === 'number');\n  assert(param.img && param.img.draw); // should be a sprite\n  // optional params\n  param.z = param.z || Z.UI;\n  param.w = param.w || button_img_size;\n  param.h = param.h || param.w || button_img_size;\n  param.shrink = param.shrink || 0.75;\n  //param.img_rect; null -> full image\n  let uvs = param.img_rect;\n  if (typeof param.frame === 'number') {\n    uvs = param.img.uidata.rects[param.frame];\n  }\n\n  let { ret, state } = buttonShared(param);\n  let colors = param.colors || color_button;\n  let color = button_last_color = colors[state];\n  if (!param.no_bg) {\n    let base_name = param.base_name || 'button';\n    let sprite_name = `${base_name}_${state}`;\n    let sprite = sprites[sprite_name];\n    if (!sprite) {\n      sprite = sprites[base_name];\n    }\n\n    drawHBox(param, sprite, color);\n  }\n  let img_origin = param.img.origin;\n  let img_w = param.img.size[0];\n  let img_h = param.img.size[1];\n  let aspect = img_w / img_h;\n  if (typeof param.frame === 'number') {\n    aspect = param.img.uidata.aspect ? param.img.uidata.aspect[param.frame] : 1;\n  }\n  let largest_w_horiz = param.w * param.shrink;\n  let largest_w_vert = param.h * param.shrink * aspect;\n  img_w = min(largest_w_horiz, largest_w_vert);\n  img_h = img_w / aspect;\n  let pad_top = (param.h - img_h) / 2;\n  let draw_param = {\n    x: param.x + (param.left_align ? pad_top : (param.w - img_w) / 2) + img_origin[0] * img_w,\n    y: param.y + pad_top + img_origin[1] * img_h,\n    z: param.z + 0.1,\n    color: param.color1 && param.color ? param.color : color, // use explicit tint if doing dual-tinting\n    color1: param.color1,\n    w: img_w / param.img.size[0],\n    h: img_h / param.img.size[1],\n    uvs,\n    rot: param.rotation\n  };\n  if (param.flip) {\n    let { x, w } = draw_param;\n    draw_param.x = x + w;\n    draw_param.w = -w;\n  }\n  if (param.color1) {\n    param.img.drawDualTint(draw_param);\n  } else {\n    param.img.draw(draw_param);\n  }\n  return ret;\n}\n\nexport function print(style, x, y, z, text) {\n  return font.drawSized(style, x, y, z, font_height, text);\n}\n\n// Note: modal dialogs not really compatible with HTML overlay on top of the canvas!\nexport function modalDialog(param) {\n  assert(!param.title || typeof param.title === 'string');\n  assert(!param.text || typeof param.text === 'string');\n  assert(typeof param.buttons === 'object');\n  assert(Object.keys(param.buttons).length);\n\n  modal_dialog = param;\n}\n\nexport function modalDialogClear() {\n  modal_dialog = null;\n}\n\nlet dom_requirement = vec2(24, 24);\nlet virtual_size = vec2();\nfunction modalDialogRun() {\n  camera2d.domDeltaToVirtual(virtual_size, dom_requirement);\n  let fullscreen_mode = false;\n  let eff_font_height = modal_dialog.font_height || font_height;\n  let eff_button_height = button_height;\n  let pad = modal_pad;\n  let vpad = modal_pad * 0.5;\n  let general_scale = 1;\n  if (virtual_size[0] > 0.1 * camera2d.h() && camera2d.w() > camera2d.h() * 2) {\n    // If a 24-pt font is more than 10% of the camera height, we're probably super-wide-screen\n    // on a mobile device due to keyboard being visible\n    fullscreen_mode = true;\n    eff_button_height = eff_font_height;\n    vpad = pad = 4;\n\n    let old_h = camera2d.h();\n    camera2d.push();\n    camera2d.setAspectFixed2(1, eff_font_height * (modal_title_scale + 2) + pad * 4.5);\n    general_scale = camera2d.h() / old_h;\n  }\n\n  let { buttons, click_anywhere } = modal_dialog;\n  let keys = Object.keys(buttons);\n\n  const game_width = camera2d.x1() - camera2d.x0();\n  const eff_modal_width = fullscreen_mode ? game_width : modal_dialog.width || modal_width;\n  let eff_button_width = modal_dialog.button_width || modal_button_width;\n  let max_total_button_width = eff_modal_width * 2 / 3;\n  eff_button_width = min(eff_button_width, max_total_button_width / keys.length);\n  const text_w = eff_modal_width - pad * 2;\n  const x0 = camera2d.x0() + round((game_width - eff_modal_width) / 2);\n  let x = x0 + pad;\n  const y0 = fullscreen_mode ? 0 : modal_dialog.y0 || modal_y0;\n  let y = y0 + pad;\n\n  if (glov_input.pointerLocked()) {\n    glov_input.pointerLockExit();\n  }\n\n  if (modal_dialog.title) {\n    if (fullscreen_mode) {\n      font.drawSizedAligned(modal_font_style, x, y, Z.MODAL, eff_font_height * modal_title_scale, glov_font.ALIGN.HFIT, text_w, 0, modal_dialog.title);\n      y += eff_font_height * modal_title_scale;\n    } else {\n      y += font.drawSizedWrapped(modal_font_style, x, y, Z.MODAL, text_w, 0, eff_font_height * modal_title_scale, modal_dialog.title);\n    }\n    y += round(vpad * 1.5);\n  }\n\n  if (modal_dialog.text) {\n    if (fullscreen_mode) {\n      font.drawSizedAligned(modal_font_style, x, y, Z.MODAL, eff_font_height, glov_font.ALIGN.HFIT, text_w, 0, modal_dialog.text);\n      y += eff_font_height;\n    } else {\n      y += font.drawSizedWrapped(modal_font_style, x, y, Z.MODAL, text_w, 0, eff_font_height, modal_dialog.text);\n    }\n    y += vpad;\n  }\n\n  let tick_key;\n  if (modal_dialog.tick) {\n    let avail_width = eff_modal_width - pad * 2;\n    if (fullscreen_mode) {\n      avail_width -= (pad + eff_button_width) * keys.length;\n    }\n    let param = {\n      x, y,\n      modal_width: eff_modal_width,\n      avail_width,\n      font_height: eff_font_height,\n      fullscreen_mode\n    };\n    tick_key = modal_dialog.tick(param);\n    y = param.y;\n  }\n\n  x = x0 + eff_modal_width - (pad + eff_button_width) * keys.length;\n  for (let ii = 0; ii < keys.length; ++ii) {\n    let key = keys[ii];\n    let eff_button_keys = button_keys[key.toLowerCase()];\n    let pressed = 0;\n    if (eff_button_keys) {\n      for (let jj = 0; jj < eff_button_keys.key.length; ++jj) {\n        pressed += glov_input.keyDownEdge(eff_button_keys.key[jj]);\n        if (eff_button_keys.key[jj] === tick_key) {\n          pressed++;\n        }\n      }\n      for (let jj = 0; jj < eff_button_keys.pad.length; ++jj) {\n        pressed += glov_input.padButtonDownEdge(eff_button_keys.pad[jj]);\n      }\n    }\n    if (click_anywhere && ii === 0 && glov_input.click()) {\n      ++pressed;\n    }\n    if (pressed) {\n      playUISound('button_click');\n    }\n    if (buttonText({\n      x: x,\n      y,\n      z: Z.MODAL,\n      w: eff_button_width,\n      h: eff_button_height,\n      text: key\n    }) || pressed) {\n      modal_dialog = null;\n      if (buttons[key]) {\n        buttons[key]();\n      }\n    }\n    x += pad + eff_button_width;\n  }\n  y += eff_button_height;\n  y += vpad + pad;\n  panel({\n    x: x0,\n    y: y0,\n    z: Z.MODAL - 1,\n    w: eff_modal_width,\n    h: (fullscreen_mode ? camera2d.y1() : y) - y0,\n    pixel_scale: panel_pixel_scale * general_scale\n  });\n\n  glov_input.eatAllInput();\n  modal_stealing_focus = true;\n  if (fullscreen_mode) {\n    camera2d.pop();\n  }\n}\n\nexport function modalTextEntry(param) {\n  let eb = glov_edit_box.create({\n    allow_modal: true,\n    initial_focus: true,\n    spellcheck: false,\n    initial_select: true,\n    text: param.edit_text,\n    max_len: param.max_len\n  });\n  let buttons = {};\n  for (let key in param.buttons) {\n    let val = param.buttons[key];\n    if (typeof val === 'function') {\n      val = function (old_fn) {\n        return function () {\n          old_fn(eb.getText());\n        };\n      }(val);\n    }\n    buttons[key] = val;\n  }\n  param.buttons = buttons;\n  param.text = `${param.text || ''}`;\n  let old_tick = param.tick;\n  param.tick = function (params) {\n    let eb_ret = eb.run({\n      x: params.x,\n      y: params.y,\n      w: params.avail_width || param.edit_w,\n      font_height: params.font_height\n    });\n    if (!params.fullscreen_mode) {\n      params.y += params.font_height + modal_pad;\n    }\n    let ret;\n    if (eb_ret === eb.SUBMIT) {\n      ret = KEYS.O; // Do OK, Yes\n    } else if (eb_ret === eb.CANCEL) {\n      ret = KEYS.ESC; // Do Cancel, No\n    }\n    if (old_tick) {\n      ret = old_tick(params) || ret;\n    }\n    return ret;\n  };\n  modalDialog(param);\n}\n\nexport function createEditBox(param) {\n  return glov_edit_box.create(param);\n}\n\nconst color_slider_handle = vec4(1, 1, 1, 1);\nconst color_slider_handle_grab = vec4(0.5, 0.5, 0.5, 1);\nconst color_slider_handle_over = vec4(0.75, 0.75, 0.75, 1);\nexport let slider_dragging = false; // for caller polling\n// Returns new value\nexport function slider(value, param) {\n  // required params\n  assert(typeof param.x === 'number');\n  assert(typeof param.y === 'number');\n  assert(param.min < param.max); // also must be numbers\n  // optional params\n  param.z = param.z || Z.UI;\n  param.w = param.w || button_width;\n  param.h = param.h || button_height;\n  let disabled = param.disabled || false;\n\n  slider_dragging = false;\n\n  drawHBox(param, sprites.slider, param.color);\n\n  let xoffs = round(sprites.slider.uidata.wh[0] * param.h / 2);\n  let draggable_width = param.w - xoffs * 2;\n\n  // Draw notches - would also need to quantize the values below\n  // if (!slider->no_notches) {\n  //   float space_for_notches = width - xoffs * 4;\n  //   int num_notches = max - 1;\n  //   float notch_w = tile_scale * glov_ui_slider_notch->GetTileWidth();\n  //   float notch_h = tile_scale * glov_ui_slider_notch->GetTileHeight();\n  //   float max_notches = space_for_notches / (notch_w + 2);\n  //   int notch_inc = 1;\n  //   if (num_notches > max_notches)\n  //     notch_inc = ceil(num_notches / floor(max_notches));\n\n  //   for (int ii = 1; ii*notch_inc <= num_notches; ii++) {\n  //     float notch_x_mid = x + xoffs + draggable_width * ii * notch_inc / (float)max;\n  //     if (notch_x_mid - notch_w/2 < x + xoffs * 2)\n  //       continue;\n  //     if (notch_x_mid + notch_w/2 > x + width - xoffs * 2)\n  //       continue;\n  //     glov_ui_slider_notch->DrawStretchedColor(notch_x_mid - notch_w / 2, y + yoffs,\n  //       z + 0.25, notch_w, notch_h, 0, color);\n  //   }\n  // }\n\n  // Handle\n  let drag = !disabled && glov_input.drag(param);\n  let grabbed = Boolean(drag);\n  let click = glov_input.click(param);\n  if (click) {\n    grabbed = false;\n    // update pos\n    value = (click.pos[0] - (param.x + xoffs)) / draggable_width;\n    value = param.min + (param.max - param.min) * clamp(value, 0, 1);\n    playUISound('button_click');\n  } else if (grabbed) {\n    // update pos\n    value = (drag.cur_pos[0] - (param.x + xoffs)) / draggable_width;\n    value = param.min + (param.max - param.min) * clamp(value, 0, 1);\n    // Eat all mouseovers while dragging\n    glov_input.mouseOver();\n    slider_dragging = true;\n  }\n  let rollover = !disabled && glov_input.mouseOver(param);\n  let handle_center_pos = param.x + xoffs + draggable_width * (value - param.min) / (param.max - param.min);\n  let handle_h = param.h;\n  let handle_w = sprites.slider_handle.uidata.wh[0] * handle_h;\n  let handle_x = handle_center_pos - handle_w / 2;\n  let handle_y = param.y + param.h / 2 - handle_h / 2;\n  let handle_color = color_slider_handle;\n  if (grabbed) {\n    handle_color = color_slider_handle_grab;\n  } else if (rollover) {\n    handle_color = color_slider_handle_over;\n  }\n\n  sprites.slider_handle.draw({\n    x: handle_x,\n    y: handle_y,\n    z: param.z + 0.1,\n    w: handle_w,\n    h: handle_h,\n    color: handle_color,\n    frame: 0\n  });\n\n  return value;\n}\n\nlet pp_bad_frames = 0;\n\nexport function tickUI(dt) {\n  last_frame_button_mouseover = frame_button_mouseover;\n  frame_button_mouseover = false;\n  focused_last_frame = focused_this_frame;\n  focused_this_frame = false;\n  focused_key_not = null;\n  modal_stealing_focus = false;\n  touch_changed_focus = false;\n\n  last_frame_edit_boxes = exports.this_frame_edit_boxes;\n  exports.this_frame_edit_boxes = [];\n  linkTick();\n\n  dom_elems_issued = 0;\n\n  let pp_this_frame = false;\n  if (modal_dialog || menu_up) {\n    let params = menu_fade_params;\n    if (!menu_up) {\n      // Modals get defaults\n      params = menu_fade_params_default;\n    }\n    menu_up_time += dt;\n    // Effects during modal dialogs\n    let factor = min(menu_up_time / 500, 1);\n    if (glov_engine.postprocessing && !glov_engine.defines.NOPP) {\n      glov_sprites.queuefn(params.z - 2, doBlurEffect.bind(null, factor, params));\n      glov_sprites.queuefn(params.z - 1, doDesaturateEffect.bind(null, factor, params));\n      pp_this_frame = true;\n    } else {\n      // Or, just darken\n      sprites.white.draw({\n        x: camera2d.x0Real(),\n        y: camera2d.y0Real(),\n        z: params.z - 2,\n        color: params.fallback_darken,\n        w: camera2d.wReal(),\n        h: camera2d.hReal()\n      });\n    }\n  } else {\n    menu_up_time = 0;\n  }\n  menu_up = false;\n\n  if (!glov_engine.is_loading && glov_engine.getFrameDtActual() > 50 && pp_this_frame) {\n    pp_bad_frames = (pp_bad_frames || 0) + 1;\n    if (pp_bad_frames >= 3) {\n      // 3 in a row, disable superfluous postprocessing\n      glov_engine.postprocessingAllow(false);\n    }\n  } else if (pp_bad_frames) {\n    pp_bad_frames = 0;\n  }\n\n  if (modal_dialog) {\n    modalDialogRun();\n  }\n}\n\nexport function endFrame() {\n  if (glov_input.click({\n    x: -Infinity, y: -Infinity,\n    w: Infinity, h: Infinity\n  })) {\n    focusSteal('canvas');\n  }\n\n  for (let ii = 0; ii < last_frame_edit_boxes.length; ++ii) {\n    let edit_box = last_frame_edit_boxes[ii];\n    let idx = exports.this_frame_edit_boxes.indexOf(edit_box);\n    if (idx === -1) {\n      edit_box.unrun();\n    }\n  }\n\n  while (dom_elems_issued < dom_elems.length) {\n    let elem = dom_elems.pop();\n    dynamic_text_elem.removeChild(elem);\n  }\n}\n\nexport function menuUp(param) {\n  merge(menu_fade_params, menu_fade_params_default);\n  if (param) {\n    merge(menu_fade_params, param);\n  }\n  menu_up = true;\n  modal_stealing_focus = true;\n  glov_input.eatAllInput();\n}\n\nfunction copyTextToClipboard(text) {\n  let textArea = document.createElement('textarea');\n  textArea.style.position = 'fixed';\n  textArea.style.top = 0;\n  textArea.style.left = 0;\n  textArea.style.width = '2em';\n  textArea.style.height = '2em';\n  textArea.style.border = 'none';\n  textArea.style.outline = 'none';\n  textArea.style.boxShadow = 'none';\n  textArea.style.background = 'transparent';\n  textArea.value = text;\n\n  document.body.appendChild(textArea);\n  textArea.focus();\n  textArea.select();\n\n  let ret = false;\n  try {\n    ret = document.execCommand('copy');\n  } catch (err) {\n    // do nothing\n  }\n\n  document.body.removeChild(textArea);\n  return ret;\n}\n\nexport function provideUserString(title, thing, str) {\n  let copy_success = copyTextToClipboard(str);\n  modalTextEntry({\n    edit_w: 400,\n    edit_text: str,\n    title,\n    text: copy_success ? `${thing} copied to clipboard!` : 'Copy to clipboard FAILED, please copy from below\\n',\n    buttons: {\n      OK: null\n    }\n  });\n}\n\nexport function drawRect(x0, y0, x1, y1, z, color) {\n  let mx = min(x0, x1);\n  let my = min(y0, y1);\n  let Mx = max(x0, x1);\n  let My = max(y0, y1);\n  sprites.white.draw({\n    x: mx,\n    y: my,\n    z,\n    color,\n    w: Mx - mx,\n    h: My - my\n  });\n}\n\nfunction spreadTechParams(spread) {\n  // spread=0 -> 1\n  // spread=0.5 -> 2\n  // spread=0.75 -> 4\n  // spread=1 -> large enough to AA\n  spread = min(max(spread, 0), 0.99);\n\n  let tech_params = {\n    param0: vec4(0, 0, 0, 0)\n  };\n\n  tech_params.param0[0] = 1 / (1 - spread);\n  tech_params.param0[1] = -0.5 * tech_params.param0[0] + 0.5;\n  return tech_params;\n}\n\nfunction drawCircleInternal(sprite, x, y, z, r, spread, tu1, tv1, tu2, tv2, color) {\n  let x0 = x - r * 2 + r * 4 * tu1;\n  let x1 = x - r * 2 + r * 4 * tu2;\n  let y0 = y - r * 2 + r * 4 * tv1;\n  let y1 = y - r * 2 + r * 4 * tv2;\n  glov_sprites.queueraw(sprite.texs, x0, y0, z, x1 - x0, y1 - y0, tu1, tv1, tu2, tv2, color, glov_font.font_shaders.font_aa, spreadTechParams(spread));\n}\n\nexport function drawCircle(x, y, z, r, spread, color) {\n  if (!sprites.circle) {\n    const CIRCLE_SIZE = 32;\n    let data = new Uint8Array(CIRCLE_SIZE * CIRCLE_SIZE);\n    let midp = (CIRCLE_SIZE - 1) / 2;\n    for (let i = 0; i < CIRCLE_SIZE; i++) {\n      for (let j = 0; j < CIRCLE_SIZE; j++) {\n        let d = sqrt((i - midp) * (i - midp) + (j - midp) * (j - midp)) / midp;\n        let v = clamp(1 - d, 0, 1);\n        data[i + j * CIRCLE_SIZE] = v * 255;\n      }\n    }\n    sprites.circle = glov_sprites.create({\n      url: 'circle',\n      width: CIRCLE_SIZE, height: CIRCLE_SIZE,\n      format: textures.format.R8,\n      data,\n      filter_min: gl.LINEAR,\n      filter_max: gl.LINEAR,\n      wrap_s: gl.CLAMP_TO_EDGE,\n      wrap_t: gl.CLAMP_TO_EDGE,\n      origin: vec2(0.5, 0.5)\n    });\n  }\n  drawCircleInternal(sprites.circle, x, y, z, r, spread, 0, 0, 1, 1, color);\n}\n\nexport function drawHollowCircle(x, y, z, r, spread, color) {\n  if (!sprites.hollow_circle) {\n    const CIRCLE_SIZE = 128;\n    const LINE_W = 2;\n    let data = new Uint8Array(CIRCLE_SIZE * CIRCLE_SIZE);\n    let midp = (CIRCLE_SIZE - 1) / 2;\n    for (let i = 0; i < CIRCLE_SIZE; i++) {\n      for (let j = 0; j < CIRCLE_SIZE; j++) {\n        let d = sqrt((i - midp) * (i - midp) + (j - midp) * (j - midp)) / midp;\n        let v = clamp(1 - d, 0, 1);\n        if (v > 0.5) {\n          v = 1 - v;\n        }\n        v += LINE_W / CIRCLE_SIZE;\n        data[i + j * CIRCLE_SIZE] = v * 255;\n      }\n    }\n    sprites.hollow_circle = glov_sprites.create({\n      url: 'hollow_circle',\n      width: CIRCLE_SIZE, height: CIRCLE_SIZE,\n      format: textures.format.R8,\n      data,\n      filter_min: gl.LINEAR,\n      filter_max: gl.LINEAR,\n      wrap_s: gl.CLAMP_TO_EDGE,\n      wrap_t: gl.CLAMP_TO_EDGE,\n      origin: vec2(0.5, 0.5)\n    });\n  }\n  drawCircleInternal(sprites.hollow_circle, x, y, z, r, spread, 0, 0, 1, 1, color);\n}\n\nexport function drawLine(x0, y0, x1, y1, z, w, spread, color) {\n  if (!sprites.line) {\n    const LINE_SIZE = 32;\n    let data = new Uint8Array(LINE_SIZE * LINE_SIZE);\n    let midp = (LINE_SIZE - 1) / 2;\n    for (let i = 0; i < LINE_SIZE; i++) {\n      for (let j = 0; j < LINE_SIZE; j++) {\n        let d = abs((i - midp) / midp);\n        let v = clamp(1 - d, 0, 1);\n        data[i + j * LINE_SIZE] = v * 255;\n      }\n    }\n    sprites.line = glov_sprites.create({\n      url: 'line',\n      width: LINE_SIZE, height: LINE_SIZE,\n      format: textures.format.R8,\n      data,\n      filter_min: gl.LINEAR,\n      filter_max: gl.LINEAR,\n      wrap_s: gl.CLAMP_TO_EDGE,\n      wrap_t: gl.CLAMP_TO_EDGE,\n      origin: vec2(0.5, 0.5)\n    });\n  }\n\n  let dx = x1 - x0;\n  let dy = y1 - y0;\n  let length = Math.sqrt(dx * dx + dy * dy);\n  dx /= length;\n  dy /= length;\n  let tangx = -dy * w;\n  let tangy = dx * w;\n\n  glov_sprites.queueraw4(sprites.line.texs, x0 + tangx, y0 + tangy, x1 + tangx, y1 + tangy, x1 - tangx, y1 - tangy, x0 - tangx, y0 - tangy, z, 0, 0, 1, 1, color, glov_font.font_shaders.font_aa, spreadTechParams(spread));\n}\n\nexport function drawCone(x0, y0, x1, y1, z, w0, w1, spread, color) {\n  if (!sprites.cone) {\n    const CONE_SIZE = 32;\n    let data = new Uint8Array(CONE_SIZE * CONE_SIZE);\n    let midp = (CONE_SIZE - 1) / 2;\n    for (let i = 0; i < CONE_SIZE; i++) {\n      for (let j = 0; j < CONE_SIZE; j++) {\n        let dx = 0;\n        let dy = 0;\n        let d = 0;\n        if (i > midp) {\n          dx = (i - midp) / midp;\n          dy = abs(j - midp) / midp;\n          let dCircle = sqrt(dx * dx + dy * dy);\n          d = dx * dCircle;\n        }\n        let v = clamp(1 - d, 0, 1);\n        data[i + j * CONE_SIZE] = v * 255;\n      }\n    }\n    sprites.cone = glov_sprites.create({\n      url: 'cone',\n      width: CONE_SIZE, height: CONE_SIZE,\n      format: textures.format.R8,\n      data,\n      filter_min: gl.LINEAR,\n      filter_max: gl.LINEAR,\n      wrap_s: gl.CLAMP_TO_EDGE,\n      wrap_t: gl.CLAMP_TO_EDGE,\n      origin: vec2(0.5, 0.5)\n    });\n  }\n  let dx = x1 - x0;\n  let dy = y1 - y0;\n  let length = Math.sqrt(dx * dx + dy * dy);\n  dx /= length;\n  dy /= length;\n  let tangx = -dy;\n  let tangy = dx;\n  glov_sprites.queueraw4(sprites.cone.texs, x0 - tangx * w0, y0 - tangy * w0, x0 + tangx * w0, y0 + tangy * w0, x1 + tangx * w1, y1 + tangy * w1, x1 - tangx * w1, y1 - tangy * w1, z, 0, 0, 1, 1, color, glov_font.font_shaders.font_aa, spreadTechParams(spread));\n}\n\nexport function scaleSizes(scale) {\n  button_height = round(32 * scale);\n  font_height = round(24 * scale);\n  button_width = round(200 * scale);\n  button_img_size = button_height;\n  modal_button_width = round(button_width / 2);\n  modal_width = round(600 * scale);\n  modal_y0 = round(200 * scale);\n  modal_title_scale = 1.2;\n  modal_pad = round(16 * scale);\n  tooltip_width = round(400 * scale);\n  tooltip_pad = round(8 * scale);\n  panel_pixel_scale = button_height / 13; // button_height / panel pixel resolution\n  tooltip_panel_pixel_scale = panel_pixel_scale;\n}\n\nexport function setModalSizes(_modal_button_width, width, y0, title_scale, pad) {\n  modal_button_width = _modal_button_width || round(button_width / 2);\n  modal_width = width || 600;\n  modal_y0 = y0 || 200;\n  modal_title_scale = title_scale || 1.2;\n  modal_pad = pad || modal_pad;\n}\n\nexport function setFontHeight(_font_height) {\n  font_height = _font_height;\n}\n\nexport function setTooltipWidth(_tooltip_width, _tooltip_panel_pixel_scale) {\n  tooltip_width = _tooltip_width;\n  tooltip_panel_pixel_scale = _tooltip_panel_pixel_scale;\n  tooltip_pad = modal_pad / 2 * _tooltip_panel_pixel_scale;\n}\n\nscaleSizes(1);","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst assert = require('assert');\nconst glov_engine = require('./engine.js');\nconst glov_font = require('./font.js');\nconst glov_input = require('./input.js');\nconst glov_simple_menu = require('./simple_menu.js');\nconst glov_selection_box = require('./selection_box.js');\nconst glov_ui = require('./ui.js');\n\nconst { ceil, random } = Math;\n\nlet demo_menu;\nlet demo_menu_up = false;\nlet demo_result;\nlet font_style;\n\nlet inited;\nlet edit_box1;\nlet edit_box2;\nlet test_select1;\nlet test_select2;\nlet slider_value = 1;\nfunction init(x, y, column_width) {\n  edit_box1 = glov_ui.createEditBox({\n    x: x + column_width,\n    y: y,\n    w: column_width - 8\n  });\n  edit_box2 = glov_ui.createEditBox({\n    x: x + column_width + column_width,\n    y: y,\n    w: column_width - 8\n  });\n  demo_menu = glov_simple_menu.create({\n    items: ['Option 1', {\n      name: 'Option 2',\n      tag: 'opt2'\n    }, {\n      name: 'Option C',\n      cb: () => {\n        demo_result = 'Callback the third';\n      }\n    }]\n  });\n  font_style = glov_font.style(null, {\n    outline_width: 1.0,\n    outline_color: 0x800000ff,\n    glow_xoffs: 3.25,\n    glow_yoffs: 3.25,\n    glow_inner: -2.5,\n    glow_outer: 5,\n    glow_color: 0x000000ff\n  });\n\n  test_select1 = glov_selection_box.create({\n    items: ['Apples', 'Bananas', 'Chameleon'],\n    z: Z.UI,\n    width: column_width - 8\n  });\n  test_select2 = glov_selection_box.create({\n    items: ['Apples', 'Bananas', 'Chameleon'],\n    is_dropdown: true,\n    z: Z.UI,\n    width: column_width - 8\n  });\n}\n\nexport function run(x, y, z) {\n  z = z || Z.UI;\n  let line_height = glov_ui.button_height + 2;\n  let column_width = glov_ui.button_width + 8;\n  if (inited !== `${x}_${y}_${column_width}`) {\n    init(x, y, column_width);\n    inited = `${x}_${y}_${column_width}`;\n  }\n\n  if (demo_menu_up) {\n    demo_result = '';\n    demo_menu.run({ x: x + glov_ui.button_width, y: y + line_height, z: Z.MODAL });\n    if (demo_menu.isSelected()) {\n      if (demo_menu.isSelected('opt2')) {\n        demo_result = 'Selected the second option';\n      }\n      if (!demo_result) {\n        demo_result = `Menu selected: ${demo_menu.getSelectedItem().name}`;\n      }\n      demo_menu_up = false;\n    }\n    glov_ui.menuUp();\n    glov_input.eatAllInput();\n  }\n\n  let pad = 8;\n  let w = glov_ui.print(font_style, x + column_width + 4, y + 40, z, `Edit Box Text: ${edit_box1.text}+${edit_box2.text}`);\n  w = Math.max(w, glov_ui.print(font_style, x + column_width, y + 40 + glov_ui.font_height + pad, z, `Result: ${demo_result}`));\n  glov_ui.panel({ x: x + column_width + 4 - pad, y: y + 40 - pad, z: z - 1,\n    w: w + pad * 2, h: glov_ui.font_height * 2 + pad * 3 });\n\n  if (glov_ui.buttonText({ x, y, z, text: 'Modal Dialog', tooltip: 'Shows a modal dialog' })) {\n    demo_result = '';\n    glov_ui.modalDialog({\n      title: 'Modal Dialog',\n      text: 'This is a modal dialog!',\n      buttons: {\n        'OK': function () {\n          demo_result = 'OK pushed!';\n        },\n        'Cancel': null // no callback\n      }\n    });\n  }\n  y += line_height;\n\n  if (edit_box1.run() === edit_box1.SUBMIT) {\n    glov_ui.modalDialog({\n      title: 'Modal Dialog',\n      text: `Edit box submitted with text ${edit_box1.text}`,\n      buttons: {\n        'OK': null\n      }\n    });\n  }\n  if (edit_box2.run() === edit_box2.SUBMIT) {\n    edit_box2.setText('');\n  }\n\n  if (glov_ui.buttonText({ x, y, z, text: 'Menu', tooltip: 'Shows a menu' })) {\n    demo_menu_up = true;\n  }\n  y += line_height;\n\n  if (glov_ui.buttonText({ x, y, z, text: 'Disabled', tooltip: 'A disabled button', disabled: true })) {\n    assert(false);\n  }\n  y += line_height;\n\n  y += test_select1.run({ x, y, z });\n  y += test_select2.run({ x, y, z });\n\n  slider_value = glov_ui.slider(slider_value, {\n    x, y, z,\n    min: 0,\n    max: 2\n  });\n  glov_ui.print(null, x + glov_ui.button_width + pad, y, z, `${slider_value.toFixed(2)}`);\n  y += glov_ui.button_height;\n}\n\nexport function runFontTest(x, y) {\n  const COLOR_RED = 0xFF0000ff;\n  const COLOR_GREEN = 0x00FF00ff;\n  const COLOR_WHITE = 0xFFFFFFff;\n  const COLOR_INVISIBLE = 0x00000000;\n  let z = Z.UI;\n  let font = glov_engine.font;\n\n  let font_size = glov_ui.font_height * 2;\n  font.drawSized(null, x, y, z, font_size, `Default ${font_size} ${random().toFixed(7)}`);\n  y += font_size;\n  font.drawSized(null, x, y, z, font_size / 2, `Default ${font_size / 2} Lorem ipsum dolor sit amet <[A|B]>`);\n  y += ceil(font_size / 2);\n  font.drawSized(null, x, y, z, font_size / 4, `Default ${font_size / 4} The quick brown fox jumped over the lazy dog rutabaga Alfalfa`);\n  y += ceil(font_size / 4);\n\n  const font_style_outline = glov_font.style(null, {\n    outline_width: 1, outline_color: COLOR_RED,\n    glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 0, glow_color: COLOR_INVISIBLE,\n    color: COLOR_WHITE\n  });\n  font.drawSized(font_style_outline, x, y, z, font_size, 'Outline');\n  y += font_size;\n\n  const font_style_glow = glov_font.style(null, {\n    outline_width: 0, outline_color: COLOR_INVISIBLE,\n    glow_xoffs: 0, glow_yoffs: 0, glow_inner: -1, glow_outer: 4, glow_color: COLOR_GREEN,\n    color: COLOR_WHITE\n  });\n  font.drawSized(font_style_glow, x, y, z, font_size, 'Glow');\n  y += font_size;\n\n  const font_style_shadow = glov_font.style(null, {\n    outline_width: 0, outline_color: COLOR_INVISIBLE,\n    glow_xoffs: 3.25, glow_yoffs: 3.25, glow_inner: -2.5, glow_outer: 5, glow_color: COLOR_GREEN,\n    color: COLOR_WHITE\n  });\n  font.drawSized(font_style_shadow, x, y, z, font_size, 'Glow (Shadow) O0O');\n  y += font_size;\n\n  const font_style_both = glov_font.style(null, {\n    outline_width: 1, outline_color: COLOR_RED,\n    glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 6, glow_color: COLOR_GREEN,\n    color: COLOR_WHITE\n  });\n  font.drawSized(font_style_both, x, y, z, font_size, 'Both 0O0');\n  y += font_size;\n\n  let font_size2 = 32;\n  const font_style_both2 = glov_font.style(null, {\n    outline_width: 1.75, outline_color: COLOR_RED,\n    glow_xoffs: 0.25, glow_yoffs: 0.25, glow_inner: 0, glow_outer: 5, glow_color: 0x7F7F7Fff,\n    color: COLOR_WHITE\n  });\n  font.drawSizedAligned(font_style_both2, x, y, z, font_size2, glov_font.ALIGN.HFIT, glov_ui.button_width * 2, 0, 'ALIGN.HFIT The quick brown fox jumps over the lazy dog');\n  y += font_size2;\n  font.drawSizedAligned(font_style_both2, x, y, z, font_size2, glov_font.ALIGN.HFIT, 140, 0, '0 Players (+1 Easy Bots)');\n  y += font_size2;\n\n  let test = 'glow';\n\n  if (test === 'outline') {\n    const font_style_outline2 = glov_font.style(null, {\n      outline_width: 1, outline_color: COLOR_RED,\n      glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 0, glow_color: COLOR_INVISIBLE,\n      color: COLOR_WHITE\n    });\n    for (let ii = 1; ii <= 4; ii++) {\n      font_style_outline2.outline_width = ii * 2;\n      font.drawSizedAligned(font_style_outline2, x, y, z, font_size2, glov_font.ALIGN.HLEFT, 400, 0, `Outline thickness ${ii * 2}`);\n      y += font_size2;\n    }\n\n    // Not allowing non-uniform scaling here, simulate with camera?\n    // font.drawSizedAligned(font_style_outline2, x, y, z, font_size2 * 2, font_size2, glov_font.ALIGN.HLEFT, 400, 0,\n    //   'Wide thick outline');\n    // y += font_size2;\n    // font.drawSizedAligned(font_style_outline2, x, y, z, font_size2, font_size2 * 2, glov_font.ALIGN.HLEFT, 400, 0,\n    //   'Tall thick outline');\n    // y += font_size2 * 2;\n  } else if (test === 'glow') {\n    const font_style_glow2 = glov_font.style(null, {\n      outline_width: 0, outline_color: COLOR_INVISIBLE,\n      glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 8, glow_color: COLOR_RED,\n      color: COLOR_WHITE\n    });\n    for (let ii = 1; ii <= 4; ii++) {\n      //font_style_glow2.glow_inner = ii * 2 - 1;\n      font_style_glow2.glow_outer = ii * 2;\n      font.drawSizedAligned(font_style_glow2, x, y, z, font_size2, glov_font.ALIGN.HLEFT, 400, 0, `Glow outer ${ii * 2}`);\n      y += font_size2;\n    }\n\n    // Not allowing non-uniform scaling here, simulate with camera?\n    // font.drawSizedAligned(font_style_glow2, x, y, z, font_size2 * 2, font_size2, glov_font.ALIGN.HLEFT, 400, 0,\n    //   'Wide thick glow \\x01\\x02\\xe5\\xae\\xb4\\xe8\\xaf\\xb7');\n    // y += font_size2;\n    // font.drawSizedAligned(font_style_glow2, x, y, z, font_size2, font_size2 * 2, glov_font.ALIGN.HLEFT, 400, 0,\n    //   'Tall thick glow');\n    // y += font_size2 * 2;\n  } else if (test === 'wrap') {\n    y += font.drawSizedWrapped(null, x, y, z, 400, 24, font_size2, 0xFFFFFFff, 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor' + ' incididunt utlaboreetdoloremagnaaliqua.');\n  }\n\n  // Gradient not supported\n  // y = y0;\n  // x += font_size * 8;\n  // const font_style_gradient = glov_font.style(null, {\n  //   outline_width: 1, outline_color: 0x777777ff,\n  //   glow_xoffs: 0, glow_yoffs: 0, glow_inner: 0, glow_outer: 0, glow_color: COLOR_BLUE,\n  //   gradient: [COLOR_WHITE, COLOR_WHITE, COLOR_BLACK, COLOR_BLACK],\n  // });\n  // font.drawSized(font_style_gradient, x, y + Math.sin(glov_engine.getFrameTimestamp() * 0.005) * 20, z,\n  //   font_size*2, 'Gradient');\n  // y += font_size*2;\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\n/*\n  API usage:\n  engine.defines = urlhash.register({\n    key: 'D',\n    type: SET,\n  });\n  urlhash.register({\n    key: 'pos',\n    // type: TYPE_STRING,\n    change: (newvalue) => {},\n    title: (value) => 'string',\n    def: '1,2',\n    hides: { otherfield: true },\n    push: true, // do a pushState instead of replaceState when this changes\n    hide_values: { foo: true }, // do not add to URL if values is in the provided set\n  });\n  urlhash.set('pos', '3,4');\n  urlhash.get('pos')\n\n  urlhash.route('w/:w')     // use URLs like foo.com/w/1   instead of foo.com/?w=1\n  urlhash.route('w/:w/:wg')  // use URLs like foo.com/w/1/2 instead of foo.com/?w=1&wg=2\n\n  // Called whenever the URL state is pushed, even if to exactly the same URL (e.g. on link click)\n  urlhash.onChange(cb)\n*/\n\nconst assert = require('assert');\n\nconst HISTORY_UPDATE_TIME = 1000;\n\nexport let TYPE_SET = 'set';\nexport let TYPE_STRING = 'string';\n\nlet params = {};\n\nlet title_suffix = '';\n\nlet url_base = (document.location.href || '').match(/^[^#?]+/)[0];\n\nlet on_change = [];\n\nexport function getURLBase() {\n  return url_base;\n}\n\nexport function onChange(cb) {\n  on_change.push(cb);\n}\n\nfunction cmpNumKeys(a, b) {\n  let d = b.keys.length - a.keys.length;\n  if (d) {\n    return d;\n  }\n  // otherwise alphabetical for stability\n  for (let ii = 0; ii < a.keys.length; ++ii) {\n    if (a.keys[ii] < b.keys[ii]) {\n      return -1;\n    } else if (a.keys[ii] > b.keys[ii]) {\n      return 1;\n    }\n  }\n  assert(false); // two routes with identical keys\n  return 0;\n}\n\nconst route_param_regex = /:(\\w+)/g;\nlet routes = [];\nexport function route(route_string) {\n  let keys = [];\n  // foo/:key/:bar => foo/([^/&?]+)/([^/&?]+)\n  let base = route_string.replace(route_param_regex, function (ignored, match) {\n    keys.push(match);\n    return '([^/&?]+)';\n  });\n  let regex = new RegExp(`^${base}(?:$|\\\\?)`);\n  let new_route = {\n    route_string,\n    regex,\n    keys\n  };\n  for (let ii = 0; ii < keys.length; ++ii) {\n    let opts = params[keys[ii]];\n    // Must have already registered these keys\n    assert(opts);\n    opts.routes = opts.routes || [];\n    opts.routes.push(new_route);\n  }\n  routes.push(new_route);\n  routes.sort(cmpNumKeys);\n}\n\nfunction queryString() {\n  let href = String(document.location);\n  return href.slice(url_base.length);\n}\n\nconst regex_value = /[^\\w]\\w+=([^&]+)/;\nfunction getValue(query_string, opts) {\n  if (opts.routes) {\n    for (let ii = 0; ii < opts.routes.length; ++ii) {\n      let r = opts.routes[ii];\n      let m = query_string.match(r.regex);\n      if (m) {\n        let idx = r.keys.indexOf(opts.key);\n        return m[1 + idx];\n      }\n    }\n  }\n  let m = query_string.match(opts.regex) || [];\n  if (opts.type === TYPE_SET) {\n    let r = {};\n    for (let ii = 0; ii < m.length; ++ii) {\n      let m2 = m[ii].match(regex_value);\n      assert(m2);\n      r[m2[1]] = 1;\n    }\n    return r;\n  } else {\n    return m[1] || opts.def;\n  }\n}\n\nlet last_history_str = null; // always re-set it on the first update\n\nfunction goInternal(query_string) {\n  // with the '?'\n  // Update all values, except those hidden by what is currently in the query string\n  let hidden = {};\n  for (let key in params) {\n    let opts = params[key];\n    if (opts.hides) {\n      if (getValue(query_string, opts)) {\n        for (let otherkey in opts.hides) {\n          hidden[otherkey] = 1;\n        }\n      }\n    }\n  }\n\n  let dirty = {};\n  for (let key in params) {\n    if (hidden[key]) {\n      continue;\n    }\n    let opts = params[key];\n    let new_value = getValue(query_string, opts);\n    if (opts.type === TYPE_SET) {\n      for (let v in new_value) {\n        if (!opts.value[v]) {\n          opts.value[v] = 1;\n          dirty[key] = true;\n        }\n      }\n      for (let v in opts.value) {\n        if (!new_value[v]) {\n          delete opts.value[v];\n          dirty[key] = true;\n        }\n      }\n    } else {\n      if (new_value !== opts.value) {\n        dirty[key] = true;\n        opts.value = new_value;\n      }\n    }\n  }\n\n  // Call all change callbacks\n  for (let key in dirty) {\n    let opts = params[key];\n    if (opts.change) {\n      opts.change(opts.value);\n    }\n  }\n  for (let ii = 0; ii < on_change.length; ++ii) {\n    on_change[ii]();\n  }\n}\n\nlet eff_title;\nfunction toString() {\n  eff_title = '';\n  let values = [];\n  let hidden = {};\n  for (let key in params) {\n    let opts = params[key];\n    if (opts.hides && opts.value) {\n      for (let otherkey in opts.hides) {\n        hidden[otherkey] = 1;\n      }\n    }\n  }\n  let root_value = '';\n  outer: // eslint-disable-line no-labels\n  for (let ii = 0; ii < routes.length; ++ii) {\n    let r = routes[ii];\n    for (let jj = 0; jj < r.keys.length; ++jj) {\n      let key = r.keys[jj];\n      if (hidden[key]) {\n        continue outer; // eslint-disable-line no-labels\n      }\n      let opts = params[key];\n      if (opts.hide_values[opts.value]) {\n        continue outer; // eslint-disable-line no-labels\n      }\n      // has a value, is not hidden, continue\n    }\n    // route is good!\n    root_value = r.route_string.replace(route_param_regex, function (ignored, key) {\n      hidden[key] = true;\n      return String(params[key].value);\n    });\n    break;\n  }\n  for (let key in params) {\n    if (hidden[key]) {\n      continue;\n    }\n    let opts = params[key];\n    if (opts.type === TYPE_SET) {\n      for (let v in opts.value) {\n        values.push(`${key}=${v}`);\n      }\n    } else {\n      if (!opts.hide_values[opts.value]) {\n        values.push(`${key}=${opts.value}`);\n        if (!eff_title && opts.title) {\n          eff_title = opts.title(opts.value);\n        }\n      }\n    }\n  }\n  if (title_suffix) {\n    if (eff_title) {\n      eff_title = `${eff_title} | ${title_suffix}`;\n    } else {\n      eff_title = title_suffix;\n    }\n  }\n  return `${root_value}${values.length ? '?' : ''}${values.join('&')}`;\n}\n\nexport function refreshTitle() {\n  toString();\n  if (eff_title && eff_title !== document.title) {\n    document.title = eff_title;\n  }\n}\n\nfunction periodicRefreshTitle() {\n  refreshTitle();\n  setTimeout(periodicRefreshTitle, 1000);\n}\n\nfunction onPopState() {\n  let query_string = queryString();\n  last_history_str = query_string;\n  goInternal(query_string);\n  refreshTitle();\n}\n\nlet last_history_set_time = 0;\nlet scheduled = false;\nlet need_push_state = false;\nfunction updateHistory(new_need_push_state) {\n  let new_str = toString();\n  if (last_history_str === new_str) {\n    return;\n  }\n  need_push_state = need_push_state || new_need_push_state;\n  last_history_str = new_str;\n  if (scheduled) {\n    // already queued up\n    return;\n  }\n  let delay = HISTORY_UPDATE_TIME;\n  if (Date.now() - last_history_set_time > HISTORY_UPDATE_TIME) {\n    // Been awhile, apply \"instantly\" (but still wait until next tick to ensure\n    //   any other immediate changes are registered)\n    delay = 1;\n  }\n  scheduled = true;\n  setTimeout(function () {\n    scheduled = false;\n    last_history_set_time = Date.now();\n    if (need_push_state) {\n      need_push_state = false;\n      window.history.pushState(undefined, eff_title, `${url_base}${last_history_str}`);\n    } else {\n      window.history.replaceState(undefined, eff_title, `${url_base}${last_history_str}`);\n    }\n    if (eff_title) {\n      document.title = eff_title;\n    }\n    //window.history.replaceState(undefined, eff_title, `#${last_history_str}`);\n  }, delay);\n}\n\n// Optional startup\nexport function startup(param) {\n  assert(!title_suffix);\n  title_suffix = param.title_suffix;\n\n  // Refresh the current URL, it might be in the non-rooted format\n  updateHistory(false);\n\n  if (title_suffix) {\n    refreshTitle();\n    setTimeout(periodicRefreshTitle, 1000);\n  }\n}\n\nexport function register(opts) {\n  assert(opts.key);\n  assert(!params[opts.key]);\n  opts.type = opts.type || TYPE_STRING;\n  let regex_search = `(?:[^\\\\w])${opts.key}=([^&]+)`;\n  let regex_type = '';\n  if (opts.type === TYPE_SET) {\n    regex_type = 'g';\n  } else {\n    opts.def = opts.def || '';\n    opts.hide_values = opts.hide_values || {};\n    opts.hide_values[opts.def] = true;\n  }\n  opts.regex = new RegExp(regex_search, regex_type);\n  params[opts.key] = opts;\n  // Get initial value\n  opts.value = getValue(queryString(), opts);\n  let ret = opts.value;\n  if (opts.type === TYPE_SET && typeof Proxy === 'function') {\n    // Auto-apply changes to URL if someone modifies the proxy\n    ret = new Proxy(opts.value, {\n      set: function (target, prop, value) {\n        if (value) {\n          target[prop] = 1;\n        } else {\n          delete target[prop];\n        }\n        updateHistory();\n        return true;\n      }\n    });\n  }\n\n  if (!window.onpopstate) {\n    window.onpopstate = onPopState;\n  }\n\n  return ret;\n}\n\nexport function set(key, value, value2) {\n  let opts = params[key];\n  assert(opts);\n  if (opts.type === TYPE_SET) {\n    if (Boolean(opts.value[value]) !== Boolean(value2)) {\n      opts.value[value] = value2 ? 1 : 0;\n      updateHistory(opts.push);\n    }\n  } else {\n    if (opts.value !== value) {\n      opts.value = value;\n      updateHistory(opts.push);\n    }\n  }\n}\n\nexport function get(key) {\n  let opts = params[key];\n  assert(opts);\n  return opts.value;\n}\n\nexport function go(query_string) {\n  // with the '?'\n  goInternal(query_string);\n  updateHistory(true);\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n/* eslint no-bitwise:off */\n\n// Vector math functions required by the rest of the engine taken piecemeal from\n// gl-matrix and related, as well as some generic math utilities\nexports.mat3 = require('gl-mat3/create');\nexports.mat4 = require('gl-mat4/create');\n\nconst { abs, max, min, floor, round, sqrt } = Math;\n\nexport function vec1(v) {\n  return new Float32Array([v]);\n}\n\nexport function vec2(a, b) {\n  let r = new Float32Array(2);\n  if (a || b) {\n    r[0] = a;\n    r[1] = b;\n  }\n  return r;\n}\n\nexport function vec3(a, b, c) {\n  let r = new Float32Array(3);\n  if (a || b || c) {\n    r[0] = a;\n    r[1] = b;\n    r[2] = c;\n  }\n  return r;\n}\n\nexport function vec4(a, b, c, d) {\n  let r = new Float32Array(4);\n  if (a || b || c || d) {\n    r[0] = a;\n    r[1] = b;\n    r[2] = c;\n    r[3] = d;\n  }\n  return r;\n}\n\nexport const unit_vec = vec4(1, 1, 1, 1);\nexport const half_vec = vec4(0.5, 0.5, 0.5, 0.5);\nexport const zero_vec = vec4();\nexport const identity_mat3 = exports.mat3();\nexport const identity_mat4 = exports.mat4();\nexport const xaxis = vec4(1, 0, 0, 0);\nexport const yaxis = vec4(0, 1, 0, 0);\nexport const zaxis = vec4(0, 0, 1, 0);\n\nexport function v2abs(out, a) {\n  out[0] = abs(a[0]);\n  out[1] = abs(a[1]);\n  return out;\n}\n\nexport function v2add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n\nexport function v2addScale(out, a, b, s) {\n  out[0] = a[0] + b[0] * s;\n  out[1] = a[1] + b[1] * s;\n  return out;\n}\n\nexport function v2copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n\nexport function v2distSq(a, b) {\n  return (a[0] - b[0]) * (a[0] - b[0]) + (a[1] - b[1]) * (a[1] - b[1]);\n}\n\nexport function v2div(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n\nexport function v2floor(out, a) {\n  out[0] = floor(a[0]);\n  out[1] = floor(a[1]);\n  return out;\n}\n\nexport function v2lengthSq(a) {\n  return a[0] * a[0] + a[1] * a[1];\n}\n\nexport function v2lerp(out, t, a, b) {\n  let it = 1 - t;\n  out[0] = it * a[0] + t * b[0];\n  out[1] = it * a[1] + t * b[1];\n  return out;\n}\n\nexport function v2mul(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n\nexport function v2normalize(out, a) {\n  let len = a[0] * a[0] + a[1] * a[1];\n  if (len > 0) {\n    len = 1 / sqrt(len);\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n  }\n  return out;\n}\n\nexport function v2same(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n\nexport function v2scale(out, a, s) {\n  out[0] = a[0] * s;\n  out[1] = a[1] * s;\n  return out;\n}\n\nexport function v2set(out, a, b) {\n  out[0] = a;\n  out[1] = b;\n  return out;\n}\n\nexport function v2sub(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n\nexport function v3add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n\nexport function v3iAdd(a, b) {\n  a[0] += b[0];\n  a[1] += b[1];\n  a[2] += b[2];\n  return a;\n}\n\nexport function v3addScale(out, a, b, s) {\n  out[0] = a[0] + b[0] * s;\n  out[1] = a[1] + b[1] * s;\n  out[2] = a[2] + b[2] * s;\n  return out;\n}\n\nexport function v3copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n\nexport function v3cross(out, a, b) {\n  let a0 = a[0];\n  let a1 = a[1];\n  let a2 = a[2];\n  let b0 = b[0];\n  let b1 = b[1];\n  let b2 = b[2];\n  out[0] = a1 * b2 - a2 * b1;\n  out[1] = a2 * b0 - a0 * b2;\n  out[2] = a0 * b1 - a1 * b0;\n  return out;\n}\n\n// determinant of the matrix made by (columns?) [a, b, c];\nexport function v3determinant(a, b, c) {\n  // let a00 = a[0];\n  // let a01 = a[1];\n  // let a02 = a[2];\n  // let a10 = b[0];\n  // let a11 = b[1];\n  // let a12 = b[2];\n  // let a20 = c[0];\n  // let a21 = c[2];\n  // let a22 = c[2];\n  let a00 = a[0];\n  let a01 = b[0];\n  let a02 = c[0];\n  let a10 = a[1];\n  let a11 = b[1];\n  let a12 = c[1];\n  let a20 = a[2];\n  let a21 = b[2];\n  let a22 = c[2];\n\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n\nexport function v3dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\nexport function v3distSq(a, b) {\n  return (a[0] - b[0]) * (a[0] - b[0]) + (a[1] - b[1]) * (a[1] - b[1]) + (a[2] - b[2]) * (a[2] - b[2]);\n}\n\nexport function v3div(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n\nexport function v3iFloor(a) {\n  a[0] = floor(a[0]);\n  a[1] = floor(a[1]);\n  a[2] = floor(a[2]);\n  return a;\n}\n\nexport function v3floor(out, a) {\n  out[0] = floor(a[0]);\n  out[1] = floor(a[1]);\n  out[2] = floor(a[2]);\n  return out;\n}\n\nexport function v3lengthSq(a) {\n  return a[0] * a[0] + a[1] * a[1] + a[2] * a[2];\n}\n\nexport function v3lerp(out, t, a, b) {\n  let it = 1 - t;\n  out[0] = it * a[0] + t * b[0];\n  out[1] = it * a[1] + t * b[1];\n  out[2] = it * a[2] + t * b[2];\n  return out;\n}\n\nexport function v3iMax(a, b) {\n  a[0] = max(a[0], b[0]);\n  a[1] = max(a[1], b[1]);\n  a[2] = max(a[2], b[2]);\n  return a;\n}\n\nexport function v3iMin(a, b) {\n  a[0] = min(a[0], b[0]);\n  a[1] = min(a[1], b[1]);\n  a[2] = min(a[2], b[2]);\n  return a;\n}\n\nexport function v3mul(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n\nexport function v3mulMat4(out, a, m) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  out[0] = x * m[0] + y * m[4] + z * m[8];\n  out[1] = x * m[1] + y * m[5] + z * m[9];\n  out[2] = x * m[2] + y * m[6] + z * m[10];\n  return out;\n}\n\nexport function v3normalize(out, a) {\n  let len = a[0] * a[0] + a[1] * a[1] + a[2] * a[2];\n  if (len > 0) {\n    len = 1 / sqrt(len);\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n    out[2] = a[2] * len;\n  }\n  return out;\n}\n\nexport function v3iNormalize(a) {\n  let len = a[0] * a[0] + a[1] * a[1] + a[2] * a[2];\n  if (len > 0) {\n    len = 1 / sqrt(len);\n    a[0] *= len;\n    a[1] *= len;\n    a[2] *= len;\n  }\n  return a;\n}\n\n// Treats `a` as vec3 input with w assumed to be 1\n// out[0]/[1] have had perspective divide and converted to normalized 0-1 range\n// out[2] is distance\nexport function v3perspectiveProject(out, a, m) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  let w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  let invw = 0.5 / (w || 0.00001);\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) * invw + 0.5;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) * -invw + 0.5;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14];\n  return out;\n}\n\nexport function v3round(out, a) {\n  out[0] = round(a[0]);\n  out[1] = round(a[1]);\n  out[2] = round(a[2]);\n  return out;\n}\n\nexport function v3same(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n\nexport function v3scale(out, a, s) {\n  out[0] = a[0] * s;\n  out[1] = a[1] * s;\n  out[2] = a[2] * s;\n  return out;\n}\n\nexport function v3set(out, a, b, c) {\n  out[0] = a;\n  out[1] = b;\n  out[2] = c;\n  return out;\n}\n\nexport function v3sub(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n\nexport function v3iSub(a, b) {\n  a[0] -= b[0];\n  a[1] -= b[1];\n  a[2] -= b[2];\n  return a;\n}\n\nexport function v3zero(out) {\n  out[0] = out[1] = out[2] = 0;\n  return out;\n}\n\nexport function v4add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n\nexport function v4clone(a) {\n  return a.slice(0);\n}\n\nexport function v4copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n\nexport function v4lerp(out, t, a, b) {\n  let it = 1 - t;\n  out[0] = it * a[0] + t * b[0];\n  out[1] = it * a[1] + t * b[1];\n  out[2] = it * a[2] + t * b[2];\n  out[3] = it * a[3] + t * b[3];\n  return out;\n}\n\nexport function v4mul(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n\nexport function v4mulAdd(out, a, b, c) {\n  out[0] = a[0] * b[0] + c[0];\n  out[1] = a[1] * b[1] + c[1];\n  out[2] = a[2] * b[2] + c[2];\n  out[3] = a[3] * b[3] + c[3];\n  return out;\n}\n\nexport function v4same(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n\nexport function v4scale(out, a, s) {\n  out[0] = a[0] * s;\n  out[1] = a[1] * s;\n  out[2] = a[2] * s;\n  out[3] = a[3] * s;\n  return out;\n}\n\nexport function v4set(out, a, b, c, d) {\n  out[0] = a;\n  out[1] = b;\n  out[2] = c;\n  out[3] = d;\n  return out;\n}\n\nexport function v4zero(out) {\n  out[0] = out[1] = out[2] = out[3] = 0;\n  return out;\n}","module.exports={\"font_size\":8,\"imageW\":128,\"imageH\":128,\"spread\":2,\"noFilter\":1,\"channels\":1,\"char_infos\":[{\"c\":32,\"x0\":61,\"y0\":63,\"xpad\":4,\"w\":0,\"h\":0},{\"c\":33,\"x0\":92,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":1,\"h\":5},{\"c\":34,\"x0\":16,\"y0\":63,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":2},{\"c\":35,\"x0\":98,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":36,\"x0\":38,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":37,\"x0\":108,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":38,\"x0\":118,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":39,\"x0\":24,\"y0\":63,\"yoffs\":1,\"xpad\":1,\"w\":1,\"h\":2},{\"c\":40,\"x0\":2,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":5},{\"c\":41,\"x0\":9,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":5},{\"c\":42,\"x0\":109,\"y0\":54,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":3},{\"c\":43,\"x0\":117,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":3,\"h\":3},{\"c\":44,\"x0\":30,\"y0\":63,\"yoffs\":5,\"xpad\":1,\"w\":2,\"h\":2},{\"c\":45,\"x0\":67,\"y0\":63,\"yoffs\":3,\"xpad\":1,\"w\":3,\"h\":1},{\"c\":46,\"x0\":75,\"y0\":63,\"yoffs\":5,\"xpad\":1,\"w\":1,\"h\":1},{\"c\":47,\"x0\":16,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":48,\"x0\":26,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":49,\"x0\":35,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":5},{\"c\":50,\"x0\":42,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":51,\"x0\":51,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":52,\"x0\":60,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":53,\"x0\":69,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":54,\"x0\":78,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":55,\"x0\":87,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":56,\"x0\":96,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":57,\"x0\":105,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":58,\"x0\":2,\"y0\":63,\"yoffs\":2,\"xpad\":1,\"w\":1,\"h\":3},{\"c\":59,\"x0\":115,\"y0\":44,\"yoffs\":2,\"xpad\":1,\"w\":1,\"h\":4},{\"c\":60,\"x0\":114,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":61,\"x0\":8,\"y0\":63,\"yoffs\":2,\"xpad\":1,\"w\":3,\"h\":3},{\"c\":62,\"x0\":122,\"y0\":14,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":63,\"x0\":2,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":64,\"x0\":11,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":65,\"x0\":21,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":66,\"x0\":30,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":67,\"x0\":39,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":68,\"x0\":47,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":69,\"x0\":56,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":70,\"x0\":64,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":71,\"x0\":72,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":72,\"x0\":81,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":73,\"x0\":90,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":74,\"x0\":98,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":75,\"x0\":107,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":76,\"x0\":116,\"y0\":24,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":77,\"x0\":2,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":78,\"x0\":12,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":79,\"x0\":21,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":80,\"x0\":30,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":81,\"x0\":47,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":82,\"x0\":39,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":83,\"x0\":48,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":84,\"x0\":57,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":85,\"x0\":65,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":86,\"x0\":74,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":87,\"x0\":83,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":88,\"x0\":93,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":89,\"x0\":102,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":90,\"x0\":111,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":91,\"x0\":119,\"y0\":34,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":5},{\"c\":92,\"x0\":2,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":93,\"x0\":12,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":5},{\"c\":94,\"x0\":37,\"y0\":63,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":2},{\"c\":95,\"x0\":81,\"y0\":63,\"yoffs\":5,\"xpad\":1,\"w\":4,\"h\":1},{\"c\":96,\"x0\":45,\"y0\":63,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":2},{\"c\":97,\"x0\":121,\"y0\":44,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":98,\"x0\":19,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":99,\"x0\":2,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":3,\"h\":4},{\"c\":100,\"x0\":28,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":101,\"x0\":10,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":102,\"x0\":37,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":103,\"x0\":56,\"y0\":2,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":104,\"x0\":45,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":105,\"x0\":54,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":1,\"h\":5},{\"c\":106,\"x0\":2,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":2,\"h\":7},{\"c\":107,\"x0\":60,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":5},{\"c\":108,\"x0\":69,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":1,\"h\":5},{\"c\":109,\"x0\":19,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":5,\"h\":4},{\"c\":110,\"x0\":29,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":111,\"x0\":38,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":112,\"x0\":65,\"y0\":2,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":113,\"x0\":74,\"y0\":2,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":114,\"x0\":47,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":3,\"h\":4},{\"c\":115,\"x0\":55,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":116,\"x0\":75,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":117,\"x0\":64,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":118,\"x0\":73,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":119,\"x0\":82,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":5,\"h\":4},{\"c\":120,\"x0\":92,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":3,\"h\":4},{\"c\":121,\"x0\":83,\"y0\":2,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":6},{\"c\":122,\"x0\":100,\"y0\":54,\"yoffs\":2,\"xpad\":1,\"w\":4,\"h\":4},{\"c\":123,\"x0\":83,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":124,\"x0\":91,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":1,\"h\":5},{\"c\":125,\"x0\":97,\"y0\":44,\"yoffs\":1,\"xpad\":1,\"w\":3,\"h\":5},{\"c\":126,\"x0\":52,\"y0\":63,\"yoffs\":1,\"xpad\":1,\"w\":4,\"h\":2},{\"c\":160,\"x0\":90,\"y0\":63,\"xpad\":3,\"w\":1,\"h\":1},{\"c\":65533,\"x0\":105,\"y0\":44,\"yoffs\":2,\"xpad\":1,\"w\":5,\"h\":5},{\"c\":128263,\"x0\":9,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":10,\"h\":7},{\"c\":128264,\"x0\":24,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":9,\"h\":7}]}\n","module.exports={\"font_size\":16,\"imageW\":1024,\"imageH\":64,\"spread\":2,\"noFilter\":1,\"channels\":1,\"char_infos\":[{\"c\":32,\"x0\":172,\"y0\":21,\"xpad\":8,\"w\":0,\"h\":0},{\"c\":33,\"x0\":137,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":2,\"h\":10},{\"c\":34,\"x0\":81,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":4},{\"c\":35,\"x0\":144,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":36,\"x0\":59,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":37,\"x0\":159,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":38,\"x0\":174,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":39,\"x0\":92,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":2,\"h\":4},{\"c\":40,\"x0\":189,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":10},{\"c\":41,\"x0\":198,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":10},{\"c\":42,\"x0\":41,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":6},{\"c\":43,\"x0\":52,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":6,\"h\":6},{\"c\":44,\"x0\":99,\"y0\":21,\"yoffs\":11,\"xpad\":2,\"w\":4,\"h\":4},{\"c\":45,\"x0\":141,\"y0\":21,\"yoffs\":7,\"xpad\":2,\"w\":6,\"h\":2},{\"c\":46,\"x0\":152,\"y0\":21,\"yoffs\":11,\"xpad\":2,\"w\":2,\"h\":2},{\"c\":47,\"x0\":207,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":48,\"x0\":222,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":49,\"x0\":235,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":10},{\"c\":50,\"x0\":244,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":51,\"x0\":257,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":52,\"x0\":270,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":53,\"x0\":283,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":54,\"x0\":296,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":55,\"x0\":309,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":56,\"x0\":322,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":57,\"x0\":335,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":58,\"x0\":63,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":2,\"h\":6},{\"c\":59,\"x0\":877,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":2,\"h\":8},{\"c\":60,\"x0\":348,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":61,\"x0\":70,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":6,\"h\":6},{\"c\":62,\"x0\":359,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":63,\"x0\":370,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":64,\"x0\":383,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":65,\"x0\":398,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":66,\"x0\":411,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":67,\"x0\":424,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":68,\"x0\":435,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":69,\"x0\":448,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":70,\"x0\":459,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":71,\"x0\":470,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":72,\"x0\":483,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":73,\"x0\":496,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":74,\"x0\":507,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":75,\"x0\":520,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":76,\"x0\":533,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":77,\"x0\":544,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":78,\"x0\":559,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":79,\"x0\":572,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":80,\"x0\":585,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":81,\"x0\":72,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":82,\"x0\":598,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":83,\"x0\":611,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":84,\"x0\":624,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":85,\"x0\":635,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":86,\"x0\":648,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":87,\"x0\":661,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":88,\"x0\":676,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":89,\"x0\":689,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":90,\"x0\":702,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":91,\"x0\":713,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":10},{\"c\":92,\"x0\":722,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":10,\"h\":10},{\"c\":93,\"x0\":737,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":10},{\"c\":94,\"x0\":108,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":4},{\"c\":95,\"x0\":159,\"y0\":21,\"yoffs\":11,\"xpad\":2,\"w\":8,\"h\":2},{\"c\":96,\"x0\":119,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":4},{\"c\":97,\"x0\":884,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":98,\"x0\":746,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":99,\"x0\":897,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":6,\"h\":8},{\"c\":100,\"x0\":759,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":101,\"x0\":908,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":102,\"x0\":772,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":103,\"x0\":85,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":104,\"x0\":783,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":105,\"x0\":796,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":2,\"h\":10},{\"c\":106,\"x0\":2,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":4,\"h\":14},{\"c\":107,\"x0\":803,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":10},{\"c\":108,\"x0\":816,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":2,\"h\":10},{\"c\":109,\"x0\":921,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":10,\"h\":8},{\"c\":110,\"x0\":936,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":111,\"x0\":949,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":112,\"x0\":98,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":113,\"x0\":111,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":114,\"x0\":962,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":6,\"h\":8},{\"c\":115,\"x0\":973,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":116,\"x0\":823,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":117,\"x0\":986,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":118,\"x0\":999,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":119,\"x0\":2,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":10,\"h\":8},{\"c\":120,\"x0\":17,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":6,\"h\":8},{\"c\":121,\"x0\":124,\"y0\":2,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":12},{\"c\":122,\"x0\":28,\"y0\":21,\"yoffs\":5,\"xpad\":2,\"w\":8,\"h\":8},{\"c\":123,\"x0\":834,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":124,\"x0\":845,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":2,\"h\":10},{\"c\":125,\"x0\":852,\"y0\":2,\"yoffs\":3,\"xpad\":2,\"w\":6,\"h\":10},{\"c\":126,\"x0\":128,\"y0\":21,\"yoffs\":3,\"xpad\":2,\"w\":8,\"h\":4},{\"c\":160,\"x0\":178,\"y0\":21,\"xpad\":7,\"w\":1,\"h\":1},{\"c\":65533,\"x0\":863,\"y0\":2,\"yoffs\":3,\"xpad\":1,\"w\":9,\"h\":10},{\"c\":128263,\"x0\":11,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":19,\"h\":14},{\"c\":128264,\"x0\":35,\"y0\":2,\"yoffs\":1,\"xpad\":1,\"w\":19,\"h\":14}]}\n","module.exports={\"font_size\":32,\"imageW\":1024,\"imageH\":512,\"spread\":8,\"channels\":1,\"char_infos\":[{\"c\":13,\"x0\":307,\"y0\":381,\"w\":1,\"h\":1},{\"c\":32,\"x0\":325,\"y0\":381,\"xpad\":6.10156,\"w\":1,\"h\":1},{\"c\":33,\"x0\":436,\"y0\":230,\"yoffs\":4,\"xpad\":1.13281,\"w\":6,\"h\":22},{\"c\":34,\"x0\":879,\"y0\":347,\"yoffs\":4,\"w\":10,\"h\":8},{\"c\":35,\"x0\":673,\"y0\":309,\"yoffs\":10,\"w\":16,\"h\":17},{\"c\":36,\"x0\":215,\"y0\":8,\"yoffs\":1,\"xpad\":1.32031,\"w\":15,\"h\":29},{\"c\":37,\"x0\":933,\"y0\":148,\"yoffs\":4,\"xpad\":0.773438,\"w\":26,\"h\":23},{\"c\":38,\"x0\":976,\"y0\":148,\"yoffs\":4,\"xpad\":0.570313,\"w\":20,\"h\":23},{\"c\":39,\"x0\":906,\"y0\":347,\"yoffs\":4,\"w\":5,\"h\":8},{\"c\":40,\"x0\":8,\"y0\":190,\"yoffs\":5,\"w\":8,\"h\":23},{\"c\":41,\"x0\":33,\"y0\":190,\"yoffs\":5,\"xpad\":0.890625,\"w\":7,\"h\":23},{\"c\":42,\"x0\":645,\"y0\":347,\"yoffs\":2,\"w\":11,\"h\":11},{\"c\":43,\"x0\":706,\"y0\":309,\"yoffs\":9,\"xpad\":0.414063,\"w\":15,\"h\":17},{\"c\":44,\"x0\":928,\"y0\":347,\"yoffs\":22,\"w\":5,\"h\":8},{\"c\":45,\"x0\":252,\"y0\":381,\"yoffs\":16,\"w\":9,\"h\":3},{\"c\":46,\"x0\":156,\"y0\":381,\"yoffs\":22,\"w\":5,\"h\":4},{\"c\":47,\"x0\":57,\"y0\":190,\"yoffs\":4,\"w\":13,\"h\":23},{\"c\":48,\"x0\":459,\"y0\":230,\"yoffs\":5,\"xpad\":0.671875,\"w\":17,\"h\":22},{\"c\":49,\"x0\":402,\"y0\":270,\"yoffs\":5,\"xpad\":5.67188,\"w\":12,\"h\":21},{\"c\":50,\"x0\":431,\"y0\":270,\"yoffs\":5,\"xpad\":1.67188,\"w\":16,\"h\":21},{\"c\":51,\"x0\":493,\"y0\":230,\"yoffs\":5,\"xpad\":1.67188,\"w\":16,\"h\":22},{\"c\":52,\"x0\":464,\"y0\":270,\"yoffs\":5,\"xpad\":0.671875,\"w\":17,\"h\":21},{\"c\":53,\"x0\":526,\"y0\":230,\"yoffs\":5,\"xpad\":1.67188,\"w\":16,\"h\":22},{\"c\":54,\"x0\":559,\"y0\":230,\"yoffs\":5,\"xpad\":0.671875,\"w\":17,\"h\":22},{\"c\":55,\"x0\":498,\"y0\":270,\"yoffs\":5,\"xpad\":1.67188,\"w\":16,\"h\":21},{\"c\":56,\"x0\":593,\"y0\":230,\"yoffs\":5,\"xpad\":0.671875,\"w\":17,\"h\":22},{\"c\":57,\"x0\":627,\"y0\":230,\"yoffs\":5,\"xpad\":0.671875,\"w\":17,\"h\":22},{\"c\":58,\"x0\":401,\"y0\":347,\"yoffs\":12,\"w\":5,\"h\":14},{\"c\":59,\"x0\":651,\"y0\":309,\"yoffs\":12,\"w\":5,\"h\":18},{\"c\":60,\"x0\":867,\"y0\":103,\"yoffs\":4,\"w\":12,\"h\":25},{\"c\":61,\"x0\":847,\"y0\":347,\"yoffs\":14,\"w\":15,\"h\":9},{\"c\":62,\"x0\":896,\"y0\":103,\"yoffs\":4,\"w\":12,\"h\":25},{\"c\":63,\"x0\":661,\"y0\":230,\"yoffs\":4,\"xpad\":0.195313,\"w\":12,\"h\":22},{\"c\":64,\"x0\":87,\"y0\":190,\"yoffs\":7,\"xpad\":1.21094,\"w\":23,\"h\":23},{\"c\":65,\"x0\":531,\"y0\":270,\"yoffs\":5,\"w\":19,\"h\":21},{\"c\":66,\"x0\":567,\"y0\":270,\"yoffs\":5,\"xpad\":0.882813,\"w\":18,\"h\":21},{\"c\":67,\"x0\":690,\"y0\":230,\"yoffs\":5,\"xpad\":0.945313,\"w\":17,\"h\":22},{\"c\":68,\"x0\":602,\"y0\":270,\"yoffs\":5,\"xpad\":1.01563,\"w\":20,\"h\":21},{\"c\":69,\"x0\":639,\"y0\":270,\"yoffs\":5,\"xpad\":0.617188,\"w\":16,\"h\":21},{\"c\":70,\"x0\":672,\"y0\":270,\"yoffs\":5,\"w\":15,\"h\":21},{\"c\":71,\"x0\":724,\"y0\":230,\"yoffs\":5,\"xpad\":1.75,\"w\":18,\"h\":22},{\"c\":72,\"x0\":704,\"y0\":270,\"yoffs\":5,\"xpad\":2.53906,\"w\":18,\"h\":21},{\"c\":73,\"x0\":739,\"y0\":270,\"yoffs\":5,\"xpad\":2.54688,\"w\":6,\"h\":21},{\"c\":74,\"x0\":759,\"y0\":230,\"yoffs\":5,\"xpad\":2.75781,\"w\":6,\"h\":22},{\"c\":75,\"x0\":762,\"y0\":270,\"yoffs\":5,\"w\":19,\"h\":21},{\"c\":76,\"x0\":798,\"y0\":270,\"yoffs\":5,\"w\":16,\"h\":21},{\"c\":77,\"x0\":831,\"y0\":270,\"yoffs\":5,\"xpad\":2.27344,\"w\":21,\"h\":21},{\"c\":78,\"x0\":869,\"y0\":270,\"yoffs\":5,\"xpad\":2.74219,\"w\":19,\"h\":21},{\"c\":79,\"x0\":127,\"y0\":190,\"yoffs\":4,\"xpad\":1.22656,\"w\":21,\"h\":23},{\"c\":80,\"x0\":905,\"y0\":270,\"yoffs\":5,\"xpad\":0.828125,\"w\":17,\"h\":21},{\"c\":81,\"x0\":165,\"y0\":190,\"yoffs\":4,\"xpad\":1.22656,\"w\":21,\"h\":23},{\"c\":82,\"x0\":939,\"y0\":270,\"yoffs\":5,\"w\":19,\"h\":21},{\"c\":83,\"x0\":203,\"y0\":190,\"yoffs\":4,\"xpad\":1.32031,\"w\":15,\"h\":23},{\"c\":84,\"x0\":975,\"y0\":270,\"yoffs\":5,\"w\":17,\"h\":21},{\"c\":85,\"x0\":782,\"y0\":230,\"yoffs\":5,\"xpad\":2.04688,\"w\":19,\"h\":22},{\"c\":86,\"x0\":8,\"y0\":309,\"yoffs\":5,\"w\":19,\"h\":21},{\"c\":87,\"x0\":44,\"y0\":309,\"yoffs\":5,\"w\":30,\"h\":21},{\"c\":88,\"x0\":818,\"y0\":230,\"yoffs\":5,\"w\":20,\"h\":22},{\"c\":89,\"x0\":91,\"y0\":309,\"yoffs\":5,\"w\":18,\"h\":21},{\"c\":90,\"x0\":126,\"y0\":309,\"yoffs\":5,\"xpad\":0.226563,\"w\":17,\"h\":21},{\"c\":91,\"x0\":925,\"y0\":103,\"yoffs\":4,\"w\":9,\"h\":25},{\"c\":92,\"x0\":235,\"y0\":190,\"yoffs\":4,\"w\":13,\"h\":23},{\"c\":93,\"x0\":951,\"y0\":103,\"yoffs\":4,\"xpad\":1.70313,\"w\":7,\"h\":25},{\"c\":94,\"x0\":950,\"y0\":347,\"yoffs\":14,\"xpad\":0.1875,\"w\":13,\"h\":8},{\"c\":95,\"x0\":278,\"y0\":381,\"yoffs\":23,\"xpad\":0.4375,\"w\":12,\"h\":3},{\"c\":96,\"x0\":57,\"y0\":381,\"yoffs\":3,\"w\":6,\"h\":6},{\"c\":97,\"x0\":738,\"y0\":309,\"yoffs\":10,\"xpad\":1.29688,\"w\":14,\"h\":17},{\"c\":98,\"x0\":265,\"y0\":190,\"yoffs\":4,\"xpad\":0.890625,\"w\":16,\"h\":23},{\"c\":99,\"x0\":769,\"y0\":309,\"yoffs\":10,\"xpad\":0.273438,\"w\":14,\"h\":17},{\"c\":100,\"x0\":298,\"y0\":190,\"yoffs\":4,\"xpad\":2.07031,\"w\":15,\"h\":23},{\"c\":101,\"x0\":800,\"y0\":309,\"yoffs\":10,\"xpad\":1.04688,\"w\":15,\"h\":17},{\"c\":102,\"x0\":855,\"y0\":230,\"yoffs\":4,\"w\":10,\"h\":22},{\"c\":103,\"x0\":330,\"y0\":190,\"yoffs\":10,\"xpad\":2.07031,\"w\":15,\"h\":23},{\"c\":104,\"x0\":882,\"y0\":230,\"yoffs\":4,\"xpad\":1.10156,\"w\":16,\"h\":22},{\"c\":105,\"x0\":160,\"y0\":309,\"yoffs\":5,\"xpad\":1.34375,\"w\":6,\"h\":21},{\"c\":106,\"x0\":78,\"y0\":57,\"yoffs\":5,\"xpad\":1.07031,\"w\":7,\"h\":28},{\"c\":107,\"x0\":915,\"y0\":230,\"yoffs\":4,\"xpad\":0.171875,\"w\":15,\"h\":22},{\"c\":108,\"x0\":947,\"y0\":230,\"yoffs\":4,\"xpad\":1.46875,\"w\":6,\"h\":22},{\"c\":109,\"x0\":50,\"y0\":347,\"yoffs\":10,\"xpad\":1.14063,\"w\":25,\"h\":16},{\"c\":110,\"x0\":92,\"y0\":347,\"yoffs\":10,\"xpad\":2.03906,\"w\":15,\"h\":16},{\"c\":111,\"x0\":832,\"y0\":309,\"yoffs\":10,\"xpad\":0.828125,\"w\":16,\"h\":17},{\"c\":112,\"x0\":362,\"y0\":190,\"yoffs\":10,\"xpad\":0.890625,\"w\":16,\"h\":23},{\"c\":113,\"x0\":395,\"y0\":190,\"yoffs\":10,\"xpad\":2.07031,\"w\":15,\"h\":23},{\"c\":114,\"x0\":184,\"y0\":347,\"yoffs\":11,\"xpad\":0.203125,\"w\":10,\"h\":15},{\"c\":115,\"x0\":865,\"y0\":309,\"yoffs\":10,\"xpad\":0.28125,\"w\":13,\"h\":17},{\"c\":116,\"x0\":587,\"y0\":309,\"yoffs\":7,\"xpad\":0.234375,\"w\":10,\"h\":20},{\"c\":117,\"x0\":124,\"y0\":347,\"yoffs\":11,\"xpad\":1.64844,\"w\":15,\"h\":16},{\"c\":118,\"x0\":211,\"y0\":347,\"yoffs\":11,\"w\":15,\"h\":15},{\"c\":119,\"x0\":243,\"y0\":347,\"yoffs\":11,\"w\":23,\"h\":15},{\"c\":120,\"x0\":283,\"y0\":347,\"yoffs\":11,\"w\":16,\"h\":15},{\"c\":121,\"x0\":970,\"y0\":230,\"yoffs\":11,\"w\":15,\"h\":22},{\"c\":122,\"x0\":316,\"y0\":347,\"yoffs\":11,\"xpad\":0.851563,\"w\":13,\"h\":15},{\"c\":123,\"x0\":1002,\"y0\":230,\"yoffs\":6,\"w\":9,\"h\":22},{\"c\":124,\"x0\":8,\"y0\":8,\"w\":7,\"h\":32},{\"c\":125,\"x0\":8,\"y0\":270,\"yoffs\":6,\"xpad\":0.460938,\"w\":8,\"h\":22},{\"c\":126,\"x0\":127,\"y0\":381,\"yoffs\":16,\"xpad\":0.3125,\"w\":12,\"h\":5},{\"c\":144,\"x0\":980,\"y0\":347,\"yoffs\":-5,\"w\":14,\"h\":8},{\"c\":160,\"x0\":343,\"y0\":381,\"xpad\":6.10156,\"w\":1,\"h\":1},{\"c\":161,\"x0\":33,\"y0\":270,\"yoffs\":4,\"xpad\":1.13281,\"w\":6,\"h\":22},{\"c\":162,\"x0\":427,\"y0\":190,\"yoffs\":7,\"xpad\":0.273438,\"w\":14,\"h\":23},{\"c\":163,\"x0\":183,\"y0\":309,\"yoffs\":5,\"xpad\":0.304688,\"w\":14,\"h\":21},{\"c\":164,\"x0\":614,\"y0\":309,\"yoffs\":9,\"xpad\":0.328125,\"w\":20,\"h\":20},{\"c\":165,\"x0\":214,\"y0\":309,\"yoffs\":5,\"w\":18,\"h\":21},{\"c\":166,\"x0\":458,\"y0\":190,\"yoffs\":4,\"xpad\":2.10156,\"w\":6,\"h\":23},{\"c\":167,\"x0\":102,\"y0\":57,\"yoffs\":2,\"xpad\":1.25,\"w\":17,\"h\":28},{\"c\":168,\"x0\":178,\"y0\":381,\"yoffs\":4,\"xpad\":0.453125,\"w\":9,\"h\":4},{\"c\":169,\"x0\":481,\"y0\":190,\"yoffs\":4,\"xpad\":0.625,\"w\":25,\"h\":23},{\"c\":170,\"x0\":551,\"y0\":347,\"yoffs\":4,\"xpad\":0.296875,\"w\":10,\"h\":12},{\"c\":171,\"x0\":673,\"y0\":347,\"yoffs\":13,\"xpad\":0.140625,\"w\":11,\"h\":11},{\"c\":172,\"x0\":729,\"y0\":347,\"yoffs\":13,\"xpad\":0.382813,\"w\":15,\"h\":10},{\"c\":173,\"x0\":361,\"y0\":381,\"xpad\":2.94531,\"w\":1,\"h\":1},{\"c\":174,\"x0\":249,\"y0\":309,\"yoffs\":1,\"xpad\":0.3125,\"w\":22,\"h\":21},{\"c\":175,\"x0\":204,\"y0\":381,\"yoffs\":4,\"w\":9,\"h\":4},{\"c\":176,\"x0\":32,\"y0\":381,\"yoffs\":4,\"w\":8,\"h\":7},{\"c\":177,\"x0\":895,\"y0\":309,\"yoffs\":9,\"w\":14,\"h\":17},{\"c\":178,\"x0\":423,\"y0\":347,\"yoffs\":2,\"xpad\":0.890625,\"w\":11,\"h\":14},{\"c\":179,\"x0\":156,\"y0\":347,\"yoffs\":2,\"xpad\":1.52344,\"w\":11,\"h\":16},{\"c\":180,\"x0\":80,\"y0\":381,\"yoffs\":3,\"w\":6,\"h\":6},{\"c\":181,\"x0\":56,\"y0\":270,\"yoffs\":11,\"xpad\":1.85938,\"w\":15,\"h\":22},{\"c\":182,\"x0\":288,\"y0\":309,\"yoffs\":5,\"xpad\":0.5,\"w\":26,\"h\":21},{\"c\":183,\"x0\":230,\"y0\":381,\"yoffs\":16,\"w\":5,\"h\":4},{\"c\":184,\"x0\":8,\"y0\":381,\"yoffs\":25,\"xpad\":0.0703125,\"w\":7,\"h\":8},{\"c\":185,\"x0\":451,\"y0\":347,\"yoffs\":2,\"xpad\":0.6875,\"w\":10,\"h\":14},{\"c\":186,\"x0\":578,\"y0\":347,\"yoffs\":4,\"xpad\":0.625,\"w\":11,\"h\":12},{\"c\":187,\"x0\":701,\"y0\":347,\"yoffs\":13,\"xpad\":0.140625,\"w\":11,\"h\":11},{\"c\":188,\"x0\":247,\"y0\":8,\"yoffs\":2,\"xpad\":0.0546875,\"w\":25,\"h\":29},{\"c\":189,\"x0\":136,\"y0\":57,\"yoffs\":2,\"xpad\":1.22656,\"w\":25,\"h\":28},{\"c\":190,\"x0\":289,\"y0\":8,\"yoffs\":2,\"xpad\":0.109375,\"w\":26,\"h\":29},{\"c\":191,\"x0\":88,\"y0\":270,\"yoffs\":6,\"xpad\":0.09375,\"w\":13,\"h\":22},{\"c\":192,\"x0\":178,\"y0\":57,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":193,\"x0\":214,\"y0\":57,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":194,\"x0\":250,\"y0\":57,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":195,\"x0\":648,\"y0\":103,\"w\":19,\"h\":26},{\"c\":196,\"x0\":252,\"y0\":103,\"yoffs\":-1,\"w\":19,\"h\":27},{\"c\":197,\"x0\":286,\"y0\":57,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":198,\"x0\":331,\"y0\":309,\"yoffs\":5,\"xpad\":0.28125,\"w\":27,\"h\":21},{\"c\":199,\"x0\":322,\"y0\":57,\"yoffs\":5,\"xpad\":0.945313,\"w\":17,\"h\":28},{\"c\":200,\"x0\":356,\"y0\":57,\"yoffs\":-2,\"xpad\":0.617188,\"w\":16,\"h\":28},{\"c\":201,\"x0\":389,\"y0\":57,\"yoffs\":-2,\"xpad\":0.617188,\"w\":16,\"h\":28},{\"c\":202,\"x0\":422,\"y0\":57,\"yoffs\":-2,\"xpad\":0.617188,\"w\":16,\"h\":28},{\"c\":203,\"x0\":288,\"y0\":103,\"yoffs\":-1,\"xpad\":0.617188,\"w\":16,\"h\":27},{\"c\":204,\"x0\":455,\"y0\":57,\"yoffs\":-2,\"xpad\":1.54688,\"w\":7,\"h\":28},{\"c\":205,\"x0\":479,\"y0\":57,\"yoffs\":-2,\"xpad\":0.546875,\"w\":8,\"h\":28},{\"c\":206,\"x0\":504,\"y0\":57,\"yoffs\":-2,\"w\":11,\"h\":28},{\"c\":207,\"x0\":321,\"y0\":103,\"yoffs\":-1,\"w\":9,\"h\":27},{\"c\":208,\"x0\":375,\"y0\":309,\"yoffs\":5,\"xpad\":1.22656,\"w\":20,\"h\":21},{\"c\":209,\"x0\":684,\"y0\":103,\"xpad\":2.74219,\"w\":19,\"h\":26},{\"c\":210,\"x0\":332,\"y0\":8,\"yoffs\":-2,\"xpad\":1.22656,\"w\":21,\"h\":29},{\"c\":211,\"x0\":370,\"y0\":8,\"yoffs\":-2,\"xpad\":1.22656,\"w\":21,\"h\":29},{\"c\":212,\"x0\":408,\"y0\":8,\"yoffs\":-2,\"xpad\":1.22656,\"w\":21,\"h\":29},{\"c\":213,\"x0\":347,\"y0\":103,\"xpad\":1.22656,\"w\":21,\"h\":27},{\"c\":214,\"x0\":532,\"y0\":57,\"yoffs\":-1,\"xpad\":1.22656,\"w\":21,\"h\":28},{\"c\":215,\"x0\":346,\"y0\":347,\"yoffs\":11,\"xpad\":0.359375,\"w\":15,\"h\":15},{\"c\":216,\"x0\":523,\"y0\":190,\"yoffs\":4,\"xpad\":1.22656,\"w\":21,\"h\":23},{\"c\":217,\"x0\":446,\"y0\":8,\"yoffs\":-2,\"xpad\":2.04688,\"w\":19,\"h\":29},{\"c\":218,\"x0\":482,\"y0\":8,\"yoffs\":-2,\"xpad\":2.04688,\"w\":19,\"h\":29},{\"c\":219,\"x0\":518,\"y0\":8,\"yoffs\":-2,\"xpad\":2.04688,\"w\":19,\"h\":29},{\"c\":220,\"x0\":570,\"y0\":57,\"yoffs\":-1,\"xpad\":2.04688,\"w\":19,\"h\":28},{\"c\":221,\"x0\":606,\"y0\":57,\"yoffs\":-2,\"w\":18,\"h\":28},{\"c\":222,\"x0\":412,\"y0\":309,\"yoffs\":5,\"xpad\":1.00781,\"w\":17,\"h\":21},{\"c\":223,\"x0\":446,\"y0\":309,\"yoffs\":5,\"xpad\":1.30469,\"w\":17,\"h\":21},{\"c\":224,\"x0\":69,\"y0\":148,\"yoffs\":3,\"xpad\":1.29688,\"w\":14,\"h\":24},{\"c\":225,\"x0\":100,\"y0\":148,\"yoffs\":3,\"xpad\":1.29688,\"w\":14,\"h\":24},{\"c\":226,\"x0\":131,\"y0\":148,\"yoffs\":3,\"xpad\":1.29688,\"w\":14,\"h\":24},{\"c\":227,\"x0\":561,\"y0\":190,\"yoffs\":4,\"xpad\":1.29688,\"w\":14,\"h\":23},{\"c\":228,\"x0\":592,\"y0\":190,\"yoffs\":4,\"xpad\":1.29688,\"w\":14,\"h\":23},{\"c\":229,\"x0\":975,\"y0\":103,\"yoffs\":2,\"xpad\":1.29688,\"w\":14,\"h\":25},{\"c\":230,\"x0\":926,\"y0\":309,\"yoffs\":10,\"xpad\":0.960938,\"w\":24,\"h\":17},{\"c\":231,\"x0\":623,\"y0\":190,\"yoffs\":10,\"xpad\":0.273438,\"w\":14,\"h\":23},{\"c\":232,\"x0\":162,\"y0\":148,\"yoffs\":3,\"xpad\":1.04688,\"w\":15,\"h\":24},{\"c\":233,\"x0\":194,\"y0\":148,\"yoffs\":3,\"xpad\":1.04688,\"w\":15,\"h\":24},{\"c\":234,\"x0\":226,\"y0\":148,\"yoffs\":3,\"xpad\":1.04688,\"w\":15,\"h\":24},{\"c\":235,\"x0\":654,\"y0\":190,\"yoffs\":4,\"xpad\":1.04688,\"w\":15,\"h\":23},{\"c\":236,\"x0\":686,\"y0\":190,\"yoffs\":3,\"xpad\":1.34375,\"w\":6,\"h\":23},{\"c\":237,\"x0\":709,\"y0\":190,\"yoffs\":3,\"w\":8,\"h\":23},{\"c\":238,\"x0\":734,\"y0\":190,\"yoffs\":3,\"w\":11,\"h\":23},{\"c\":239,\"x0\":118,\"y0\":270,\"yoffs\":4,\"w\":9,\"h\":22},{\"c\":240,\"x0\":762,\"y0\":190,\"yoffs\":4,\"xpad\":1.53125,\"w\":15,\"h\":23},{\"c\":241,\"x0\":144,\"y0\":270,\"yoffs\":4,\"xpad\":2.03906,\"w\":15,\"h\":22},{\"c\":242,\"x0\":258,\"y0\":148,\"yoffs\":3,\"xpad\":0.828125,\"w\":16,\"h\":24},{\"c\":243,\"x0\":291,\"y0\":148,\"yoffs\":3,\"xpad\":0.828125,\"w\":16,\"h\":24},{\"c\":244,\"x0\":324,\"y0\":148,\"yoffs\":3,\"xpad\":0.828125,\"w\":16,\"h\":24},{\"c\":245,\"x0\":794,\"y0\":190,\"yoffs\":4,\"xpad\":0.828125,\"w\":16,\"h\":23},{\"c\":246,\"x0\":827,\"y0\":190,\"yoffs\":4,\"xpad\":0.828125,\"w\":16,\"h\":23},{\"c\":247,\"x0\":478,\"y0\":347,\"yoffs\":11,\"xpad\":0.453125,\"w\":14,\"h\":14},{\"c\":248,\"x0\":967,\"y0\":309,\"yoffs\":10,\"xpad\":0.828125,\"w\":16,\"h\":17},{\"c\":249,\"x0\":357,\"y0\":148,\"yoffs\":3,\"xpad\":1.64844,\"w\":15,\"h\":24},{\"c\":250,\"x0\":389,\"y0\":148,\"yoffs\":3,\"xpad\":1.64844,\"w\":15,\"h\":24},{\"c\":251,\"x0\":421,\"y0\":148,\"yoffs\":3,\"xpad\":1.64844,\"w\":15,\"h\":24},{\"c\":252,\"x0\":860,\"y0\":190,\"yoffs\":4,\"xpad\":1.64844,\"w\":15,\"h\":23},{\"c\":253,\"x0\":64,\"y0\":8,\"yoffs\":3,\"w\":15,\"h\":30},{\"c\":254,\"x0\":554,\"y0\":8,\"yoffs\":4,\"xpad\":0.890625,\"w\":16,\"h\":29},{\"c\":255,\"x0\":587,\"y0\":8,\"yoffs\":4,\"w\":15,\"h\":29},{\"c\":256,\"x0\":720,\"y0\":103,\"w\":19,\"h\":26},{\"c\":257,\"x0\":892,\"y0\":190,\"yoffs\":4,\"xpad\":1.29688,\"w\":14,\"h\":23},{\"c\":258,\"x0\":385,\"y0\":103,\"yoffs\":-1,\"w\":19,\"h\":27},{\"c\":259,\"x0\":453,\"y0\":148,\"yoffs\":3,\"xpad\":1.29688,\"w\":14,\"h\":24},{\"c\":260,\"x0\":641,\"y0\":57,\"yoffs\":5,\"w\":21,\"h\":28},{\"c\":261,\"x0\":923,\"y0\":190,\"yoffs\":10,\"w\":16,\"h\":23},{\"c\":262,\"x0\":619,\"y0\":8,\"yoffs\":-2,\"xpad\":0.945313,\"w\":17,\"h\":29},{\"c\":263,\"x0\":484,\"y0\":148,\"yoffs\":3,\"xpad\":0.273438,\"w\":14,\"h\":24},{\"c\":268,\"x0\":653,\"y0\":8,\"yoffs\":-2,\"xpad\":0.945313,\"w\":17,\"h\":29},{\"c\":269,\"x0\":515,\"y0\":148,\"yoffs\":3,\"xpad\":0.273438,\"w\":14,\"h\":24},{\"c\":270,\"x0\":679,\"y0\":57,\"yoffs\":-2,\"xpad\":1.01563,\"w\":20,\"h\":28},{\"c\":271,\"x0\":956,\"y0\":190,\"yoffs\":4,\"w\":22,\"h\":23},{\"c\":272,\"x0\":480,\"y0\":309,\"yoffs\":5,\"xpad\":1.22656,\"w\":20,\"h\":21},{\"c\":273,\"x0\":995,\"y0\":190,\"yoffs\":4,\"xpad\":0.0703125,\"w\":17,\"h\":23},{\"c\":274,\"x0\":756,\"y0\":103,\"xpad\":0.617188,\"w\":16,\"h\":26},{\"c\":275,\"x0\":8,\"y0\":230,\"yoffs\":4,\"xpad\":1.04688,\"w\":15,\"h\":23},{\"c\":278,\"x0\":421,\"y0\":103,\"yoffs\":-1,\"xpad\":0.617188,\"w\":16,\"h\":27},{\"c\":279,\"x0\":40,\"y0\":230,\"yoffs\":4,\"xpad\":1.04688,\"w\":15,\"h\":23},{\"c\":280,\"x0\":716,\"y0\":57,\"yoffs\":5,\"xpad\":0.617188,\"w\":16,\"h\":28},{\"c\":281,\"x0\":72,\"y0\":230,\"yoffs\":10,\"xpad\":1.04688,\"w\":15,\"h\":23},{\"c\":282,\"x0\":749,\"y0\":57,\"yoffs\":-2,\"xpad\":0.617188,\"w\":16,\"h\":28},{\"c\":283,\"x0\":546,\"y0\":148,\"yoffs\":3,\"xpad\":1.04688,\"w\":15,\"h\":24},{\"c\":286,\"x0\":782,\"y0\":57,\"yoffs\":-1,\"xpad\":1.75,\"w\":18,\"h\":28},{\"c\":287,\"x0\":96,\"y0\":8,\"yoffs\":3,\"xpad\":2.07031,\"w\":15,\"h\":30},{\"c\":290,\"x0\":817,\"y0\":57,\"yoffs\":5,\"xpad\":1.75,\"w\":18,\"h\":28},{\"c\":291,\"x0\":32,\"y0\":8,\"yoffs\":2,\"xpad\":2.07031,\"w\":15,\"h\":31},{\"c\":298,\"x0\":789,\"y0\":103,\"w\":9,\"h\":26},{\"c\":299,\"x0\":176,\"y0\":270,\"yoffs\":4,\"w\":9,\"h\":22},{\"c\":302,\"x0\":852,\"y0\":57,\"yoffs\":5,\"xpad\":0.546875,\"w\":8,\"h\":28},{\"c\":303,\"x0\":877,\"y0\":57,\"yoffs\":5,\"w\":8,\"h\":28},{\"c\":304,\"x0\":454,\"y0\":103,\"yoffs\":-1,\"xpad\":1.54688,\"w\":7,\"h\":27},{\"c\":305,\"x0\":378,\"y0\":347,\"yoffs\":11,\"xpad\":1.34375,\"w\":6,\"h\":15},{\"c\":310,\"x0\":687,\"y0\":8,\"yoffs\":5,\"w\":19,\"h\":29},{\"c\":311,\"x0\":128,\"y0\":8,\"yoffs\":4,\"xpad\":0.171875,\"w\":15,\"h\":30},{\"c\":313,\"x0\":902,\"y0\":57,\"yoffs\":-2,\"w\":16,\"h\":28},{\"c\":314,\"x0\":815,\"y0\":103,\"w\":8,\"h\":26},{\"c\":315,\"x0\":723,\"y0\":8,\"yoffs\":5,\"w\":16,\"h\":29},{\"c\":316,\"x0\":160,\"y0\":8,\"yoffs\":4,\"xpad\":1.46875,\"w\":6,\"h\":30},{\"c\":317,\"x0\":202,\"y0\":270,\"yoffs\":4,\"w\":16,\"h\":22},{\"c\":318,\"x0\":235,\"y0\":270,\"yoffs\":4,\"w\":12,\"h\":22},{\"c\":321,\"x0\":517,\"y0\":309,\"yoffs\":5,\"xpad\":0.046875,\"w\":16,\"h\":21},{\"c\":322,\"x0\":264,\"y0\":270,\"yoffs\":4,\"w\":11,\"h\":22},{\"c\":323,\"x0\":935,\"y0\":57,\"yoffs\":-2,\"xpad\":2.74219,\"w\":19,\"h\":28},{\"c\":324,\"x0\":104,\"y0\":230,\"yoffs\":3,\"xpad\":2.03906,\"w\":15,\"h\":23},{\"c\":325,\"x0\":756,\"y0\":8,\"yoffs\":5,\"xpad\":2.74219,\"w\":19,\"h\":29},{\"c\":326,\"x0\":578,\"y0\":148,\"yoffs\":10,\"xpad\":2.03906,\"w\":15,\"h\":24},{\"c\":327,\"x0\":971,\"y0\":57,\"yoffs\":-2,\"xpad\":2.74219,\"w\":19,\"h\":28},{\"c\":328,\"x0\":136,\"y0\":230,\"yoffs\":3,\"xpad\":2.03906,\"w\":15,\"h\":23},{\"c\":332,\"x0\":478,\"y0\":103,\"xpad\":1.22656,\"w\":21,\"h\":27},{\"c\":333,\"x0\":168,\"y0\":230,\"yoffs\":4,\"xpad\":0.828125,\"w\":16,\"h\":23},{\"c\":336,\"x0\":792,\"y0\":8,\"yoffs\":-2,\"xpad\":1.22656,\"w\":21,\"h\":29},{\"c\":337,\"x0\":610,\"y0\":148,\"yoffs\":3,\"xpad\":0.828125,\"w\":16,\"h\":24},{\"c\":338,\"x0\":292,\"y0\":270,\"yoffs\":5,\"xpad\":0.390625,\"w\":29,\"h\":22},{\"c\":339,\"x0\":8,\"y0\":347,\"yoffs\":10,\"xpad\":0.65625,\"w\":25,\"h\":17},{\"c\":340,\"x0\":8,\"y0\":103,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":341,\"x0\":201,\"y0\":230,\"yoffs\":3,\"xpad\":0.203125,\"w\":10,\"h\":23},{\"c\":342,\"x0\":830,\"y0\":8,\"yoffs\":5,\"w\":19,\"h\":29},{\"c\":343,\"x0\":228,\"y0\":230,\"yoffs\":11,\"xpad\":0.203125,\"w\":10,\"h\":23},{\"c\":344,\"x0\":44,\"y0\":103,\"yoffs\":-2,\"w\":19,\"h\":28},{\"c\":345,\"x0\":255,\"y0\":230,\"yoffs\":3,\"xpad\":0.203125,\"w\":10,\"h\":23},{\"c\":346,\"x0\":866,\"y0\":8,\"yoffs\":-2,\"xpad\":1.32031,\"w\":15,\"h\":29},{\"c\":347,\"x0\":643,\"y0\":148,\"yoffs\":3,\"xpad\":0.28125,\"w\":13,\"h\":24},{\"c\":350,\"x0\":898,\"y0\":8,\"yoffs\":4,\"xpad\":1.32031,\"w\":15,\"h\":29},{\"c\":351,\"x0\":282,\"y0\":230,\"yoffs\":10,\"xpad\":0.28125,\"w\":13,\"h\":23},{\"c\":352,\"x0\":930,\"y0\":8,\"yoffs\":-2,\"xpad\":1.32031,\"w\":15,\"h\":29},{\"c\":353,\"x0\":673,\"y0\":148,\"yoffs\":3,\"xpad\":0.28125,\"w\":13,\"h\":24},{\"c\":354,\"x0\":80,\"y0\":103,\"yoffs\":5,\"w\":17,\"h\":28},{\"c\":355,\"x0\":840,\"y0\":103,\"yoffs\":7,\"xpad\":0.234375,\"w\":10,\"h\":26},{\"c\":356,\"x0\":114,\"y0\":103,\"yoffs\":-2,\"w\":17,\"h\":28},{\"c\":357,\"x0\":312,\"y0\":230,\"yoffs\":4,\"w\":15,\"h\":23},{\"c\":362,\"x0\":516,\"y0\":103,\"xpad\":2.04688,\"w\":19,\"h\":27},{\"c\":363,\"x0\":344,\"y0\":230,\"yoffs\":4,\"xpad\":1.64844,\"w\":15,\"h\":23},{\"c\":366,\"x0\":962,\"y0\":8,\"yoffs\":-2,\"xpad\":2.04688,\"w\":19,\"h\":29},{\"c\":367,\"x0\":8,\"y0\":148,\"yoffs\":2,\"xpad\":1.64844,\"w\":15,\"h\":25},{\"c\":368,\"x0\":8,\"y0\":57,\"yoffs\":-2,\"xpad\":2.04688,\"w\":19,\"h\":29},{\"c\":369,\"x0\":703,\"y0\":148,\"yoffs\":3,\"xpad\":1.64844,\"w\":15,\"h\":24},{\"c\":370,\"x0\":148,\"y0\":103,\"yoffs\":5,\"xpad\":2.04688,\"w\":19,\"h\":28},{\"c\":371,\"x0\":338,\"y0\":270,\"yoffs\":11,\"w\":17,\"h\":22},{\"c\":376,\"x0\":552,\"y0\":103,\"yoffs\":-1,\"w\":18,\"h\":27},{\"c\":377,\"x0\":184,\"y0\":103,\"yoffs\":-2,\"xpad\":0.226563,\"w\":17,\"h\":28},{\"c\":378,\"x0\":376,\"y0\":230,\"yoffs\":3,\"xpad\":0.851563,\"w\":13,\"h\":23},{\"c\":379,\"x0\":587,\"y0\":103,\"yoffs\":-1,\"xpad\":0.226563,\"w\":17,\"h\":27},{\"c\":380,\"x0\":372,\"y0\":270,\"yoffs\":4,\"xpad\":0.851563,\"w\":13,\"h\":22},{\"c\":381,\"x0\":218,\"y0\":103,\"yoffs\":-2,\"xpad\":0.226563,\"w\":17,\"h\":28},{\"c\":382,\"x0\":406,\"y0\":230,\"yoffs\":3,\"xpad\":0.851563,\"w\":13,\"h\":23},{\"c\":402,\"x0\":40,\"y0\":148,\"yoffs\":4,\"w\":12,\"h\":25},{\"c\":536,\"x0\":183,\"y0\":8,\"yoffs\":4,\"xpad\":1.32031,\"w\":15,\"h\":30},{\"c\":537,\"x0\":735,\"y0\":148,\"yoffs\":10,\"xpad\":0.28125,\"w\":13,\"h\":24},{\"c\":538,\"x0\":44,\"y0\":57,\"yoffs\":5,\"w\":17,\"h\":29},{\"c\":539,\"x0\":621,\"y0\":103,\"yoffs\":7,\"xpad\":0.234375,\"w\":10,\"h\":27},{\"c\":8226,\"x0\":103,\"y0\":381,\"yoffs\":13,\"xpad\":0.28125,\"w\":7,\"h\":6},{\"c\":8482,\"x0\":606,\"y0\":347,\"yoffs\":5,\"xpad\":0.882813,\"w\":22,\"h\":12},{\"c\":8592,\"x0\":761,\"y0\":347,\"yoffs\":11,\"xpad\":0.882813,\"w\":26,\"h\":10},{\"c\":8593,\"x0\":765,\"y0\":148,\"yoffs\":4,\"xpad\":7.88281,\"w\":19,\"h\":24},{\"c\":8594,\"x0\":804,\"y0\":347,\"yoffs\":11,\"xpad\":0.882813,\"w\":26,\"h\":10},{\"c\":8595,\"x0\":801,\"y0\":148,\"yoffs\":4,\"xpad\":7.88281,\"w\":19,\"h\":24},{\"c\":8734,\"x0\":509,\"y0\":347,\"yoffs\":11,\"xpad\":0.6875,\"w\":25,\"h\":14},{\"c\":9742,\"x0\":837,\"y0\":148,\"yoffs\":4,\"w\":31,\"h\":24},{\"c\":9743,\"x0\":885,\"y0\":148,\"yoffs\":4,\"w\":31,\"h\":24},{\"c\":65533,\"x0\":550,\"y0\":309,\"yoffs\":5,\"w\":20,\"h\":21}]}","/*eslint global-require:off*/\nconst glov_local_storage = require('./glov/local_storage.js');\nglov_local_storage.storage_prefix = 'glovjs-playground'; // Before requiring anything else that might load from this\n\nconst glov_engine = require('./glov/engine.js');\nconst glov_font = require('./glov/font.js');\nconst input = require('./glov/input.js');\nconst glov_particles = require('./glov/particles.js');\nconst glov_sprites = require('./glov/sprites.js');\nconst glov_sprite_animation = require('./glov/sprite_animation.js');\nconst glov_transition = require('./glov/transition.js');\nconst glov_ui = require('./glov/ui.js');\nconst glov_ui_test = require('./glov/ui_test.js');\nconst particle_data = require('./particle_data.js');\nconst { soundLoad, soundPlay, soundPlayMusic, FADE_IN, FADE_OUT } = require('./glov/sound.js');\nconst { vec2, vec4, v4clone, v4copy } = require('./glov/vmath.js');\n\nwindow.Z = window.Z || {};\nZ.BACKGROUND = 1;\nZ.SPRITES = 10;\nZ.PARTICLES = 20;\nZ.UI_TEST = 200;\n\n// let app = exports;\n// Virtual viewport for our game logic\nexport const game_width = 320;\nexport const game_height = 240;\n\nexport let sprites = {};\n\nconst music_file = 'music_test.webm';\n\n// Persistent flags system for testing parameters\nlet flags = {};\nfunction flagGet(key, dflt) {\n  if (flags[key] === undefined) {\n    flags[key] = glov_local_storage.getJSON(`flag_${key}`, dflt) || false;\n  }\n  return flags[key];\n}\nfunction flagToggle(key) {\n  flags[key] = !flagGet(key);\n  glov_local_storage.setJSON(`flag_${key}`, flags[key]);\n}\nfunction flagSet(key, value) {\n  flags[key] = value;\n  glov_local_storage.setJSON(`flag_${key}`, flags[key]);\n}\n\nconst color_white = vec4(1, 1, 1, 1);\n\nfunction perfTestSprites() {\n  if (!sprites.test) {\n    sprites.test = [glov_sprites.create({ name: 'test', size: vec2(1, 1), origin: vec2(0.5, 0.5) }), glov_sprites.create({ url: 'img/test.png?1', size: vec2(1, 1), origin: vec2(0.5, 0.5) })];\n  }\n\n  let mode = 2;\n  let count = [80000, // one sprite, pre-sorted\n  40000, // one sprite, unsorted\n  20000, // two sprites, unsorted, small batches\n  60000, // two sprites, sorted, bigger batches, sprite API\n  60000][mode];\n  if (mode === 3 || mode === 4) {\n    for (let ii = 0; ii < count;) {\n      let subc = Math.floor(500 + Math.random() * 100);\n      let idx = mode <= 1 ? 0 : Math.round(Math.random());\n      let sprite = sprites.test[idx];\n      let z = Math.random();\n      for (let jj = 0; jj < subc; ++jj) {\n        if (mode === 4) {\n          // glov_sprites.queueraw(sprite.texs,\n          //   Math.random() * game_width - 3, Math.random() * game_height - 3, z,\n          //   6, 6, 0, 0, 1, 1, color_white);\n          glov_sprites.queuesprite(sprite, Math.random() * game_width, Math.random() * game_height, z, 6 * sprite.size[0], 6 * sprite.size[1], 0, sprite.uvs, color_white);\n        } else {\n          sprites.test[idx].draw({\n            x: Math.random() * game_width,\n            y: Math.random() * game_height,\n            z,\n            w: 6, h: 6\n          });\n        }\n      }\n      ii += subc;\n    }\n  } else {\n    for (let ii = 0; ii < count; ++ii) {\n      let idx = mode <= 1 ? 0 : Math.round(Math.random());\n      sprites.test[idx].draw({\n        x: Math.random() * game_width,\n        y: Math.random() * game_height,\n        z: mode === 0 ? ii : Math.random(),\n        w: 6, h: 6\n      });\n    }\n  }\n}\n\nexport function main() {\n  if (!glov_engine.startup({\n    game_width,\n    game_height,\n    pixely: flagGet('pixely', 'on'),\n    viewport_postprocess: false\n  })) {\n    return;\n  }\n\n  // const font = glov_engine.font;\n\n  // Perfect sizes for pixely modes\n  glov_ui.scaleSizes(13 / 32);\n  glov_ui.setFontHeight(8);\n\n  const createSprite = glov_sprites.create;\n  const createAnimation = glov_sprite_animation.create;\n\n  const color_red = vec4(1, 0, 0, 1);\n  const color_yellow = vec4(1, 1, 0, 1);\n\n  // Cache KEYS\n  const KEYS = input.KEYS;\n  const PAD = input.PAD;\n\n  const sprite_size = 64;\n  function initGraphics() {\n    glov_particles.preloadParticleData(particle_data);\n\n    soundLoad('test');\n\n    sprites.white = createSprite({ url: 'white' });\n\n    sprites.test_tint = createSprite({\n      name: 'tinted',\n      ws: [16, 16, 16, 16],\n      hs: [16, 16, 16],\n      size: vec2(sprite_size, sprite_size),\n      layers: 2,\n      origin: vec2(0.5, 0.5)\n    });\n    sprites.animation = createAnimation({\n      idle_left: {\n        frames: [0, 1],\n        times: [200, 500]\n      },\n      idle_right: {\n        frames: [3, 2],\n        times: [200, 500]\n      }\n    });\n    sprites.animation.setState('idle_left');\n\n    sprites.game_bg = createSprite({\n      url: 'white',\n      size: vec2(game_width, game_height)\n    });\n  }\n\n  let last_particles = 0;\n\n  function test(dt) {\n    if (!test.color_sprite) {\n      test.color_sprite = v4clone(color_white);\n      test.character = {\n        x: Math.random() * (game_width - sprite_size - 200) + sprite_size * 0.5 + 200,\n        y: Math.random() * (game_height - sprite_size) + sprite_size * 0.5\n      };\n    }\n\n    if (flagGet('ui_test')) {\n      // let clip_test = 30;\n      // glov_sprites.clip(Z.UI_TEST - 10, Z.UI_TEST + 10, clip_test, clip_test, 320-clip_test * 2, 240-clip_test * 2);\n      glov_ui_test.run(10, 10, Z.UI_TEST);\n    }\n    if (flagGet('font_test')) {\n      glov_ui_test.runFontTest(105, 85);\n    }\n\n    test.character.dx = 0;\n    test.character.dx -= input.keyDown(KEYS.LEFT) + input.keyDown(KEYS.A) + input.padButtonDown(PAD.LEFT);\n    test.character.dx += input.keyDown(KEYS.RIGHT) + input.keyDown(KEYS.D) + input.padButtonDown(PAD.RIGHT);\n    test.character.dy = 0;\n    test.character.dy -= input.keyDown(KEYS.UP) + input.keyDown(KEYS.W) + input.padButtonDown(PAD.UP);\n    test.character.dy += input.keyDown(KEYS.DOWN) + input.keyDown(KEYS.S) + input.padButtonDown(PAD.DOWN);\n    if (test.character.dx < 0) {\n      sprites.animation.setState('idle_left');\n    } else if (test.character.dx > 0) {\n      sprites.animation.setState('idle_right');\n    }\n\n    test.character.x += test.character.dx * 0.05;\n    test.character.y += test.character.dy * 0.05;\n    let bounds = {\n      x: test.character.x - sprite_size / 2,\n      y: test.character.y - sprite_size / 2,\n      w: sprite_size,\n      h: sprite_size\n    };\n    if (input.mouseDown() && input.mouseOver(bounds)) {\n      v4copy(test.color_sprite, color_yellow);\n    } else if (input.click(bounds)) {\n      v4copy(test.color_sprite, test.color_sprite[2] === 0 ? color_white : color_red);\n      soundPlay('test');\n    } else if (input.mouseOver(bounds)) {\n      v4copy(test.color_sprite, color_white);\n      test.color_sprite[3] = 0.5;\n    } else {\n      v4copy(test.color_sprite, color_white);\n      test.color_sprite[3] = 1;\n    }\n\n    sprites.game_bg.draw({\n      x: 0, y: 0, z: Z.BACKGROUND,\n      color: [0, 0.72, 1, 1]\n    });\n    sprites.test_tint.drawDualTint({\n      x: test.character.x,\n      y: test.character.y,\n      z: Z.SPRITES,\n      color: [1, 1, 0, 1],\n      color1: [1, 0, 1, 1],\n      frame: sprites.animation.getFrame(dt)\n    });\n\n    let font_test_idx = 0;\n\n    glov_ui.print(glov_font.styleColored(null, 0x000000ff), test.character.x, test.character.y + ++font_test_idx * 20, Z.SPRITES, 'TEXT!');\n    let font_style = glov_font.style(null, {\n      outline_width: 1.0,\n      outline_color: 0x800000ff,\n      glow_xoffs: 3.25,\n      glow_yoffs: 3.25,\n      glow_inner: -2.5,\n      glow_outer: 5,\n      glow_color: 0x000000ff\n    });\n    glov_ui.print(font_style, test.character.x, test.character.y + ++font_test_idx * glov_ui.font_height, Z.SPRITES, 'Outline and Drop Shadow');\n\n    let x = glov_ui.button_height;\n    let button_spacing = glov_ui.button_height + 2;\n    let y = game_height - 10 - button_spacing * 5;\n    if (glov_ui.buttonText({ x, y, text: `Pixely: ${flagGet('pixely') || 'Off'}`,\n      tooltip: 'Toggles pixely or regular mode (requires reload)' })) {\n      if (flagGet('pixely') === 'strict') {\n        flagSet('pixely', false);\n      } else if (flagGet('pixely') === 'on') {\n        flagSet('pixely', 'strict');\n      } else {\n        flagSet('pixely', 'on');\n      }\n      if (document.location.reload) {\n        document.location.reload();\n      } else {\n        document.location = String(document.location);\n      }\n    }\n    y += button_spacing;\n\n    if (glov_ui.buttonText({ x, y, text: `Music: ${flagGet('music') ? 'ON' : 'OFF'}`,\n      tooltip: 'Toggles playing a looping background music track' })) {\n      flagToggle('music');\n      if (flagGet('music')) {\n        soundPlayMusic(music_file, 1, FADE_IN);\n      } else {\n        soundPlayMusic(music_file, 0, FADE_OUT);\n      }\n    }\n    y += button_spacing;\n\n    if (glov_ui.buttonText({ x, y, text: `Font Test: ${flagGet('font_test') ? 'ON' : 'OFF'}`,\n      tooltip: 'Toggles visibility of general Font tests' })) {\n      flagToggle('font_test');\n      glov_transition.queue(Z.TRANSITION_FINAL, glov_transition.randomTransition());\n    }\n    y += button_spacing;\n\n    if (glov_ui.buttonText({ x, y, text: `UI Test: ${flagGet('ui_test') ? 'ON' : 'OFF'}`,\n      tooltip: 'Toggles visibility of general UI tests' })) {\n      flagToggle('ui_test');\n    }\n    y += button_spacing;\n\n    if (glov_ui.buttonText({ x, y, text: `Particles: ${flagGet('particles', true) ? 'ON' : 'OFF'}`,\n      tooltip: 'Toggles particles' })) {\n      flagToggle('particles');\n    }\n    if (flagGet('particles')) {\n      if (glov_engine.getFrameTimestamp() - last_particles > 1000) {\n        last_particles = glov_engine.getFrameTimestamp();\n        glov_engine.glov_particles.createSystem(particle_data.defs.explosion,\n        //[test.character.x, test.character.y, Z.PARTICLES]\n        [100 + Math.random() * 120, 100 + Math.random() * 140, Z.PARTICLES]);\n      }\n    }\n\n    if (flagGet('perf_test')) {\n      perfTestSprites();\n    }\n\n    // Debuggin full canvas stretching\n    // const camera2d = require('./glov/camera2d.js');\n    // glov_ui.drawLine(camera2d.x0(), camera2d.y0(), camera2d.x1(), camera2d.y1(), Z.BORDERS + 1, 1, 0.95,[1,0,1,0.5]);\n    // glov_ui.drawLine(camera2d.x1(), camera2d.y0(), camera2d.x0(), camera2d.y1(), Z.BORDERS + 1, 1, 0.95,[1,0,1,0.5]);\n\n    // Debugging touch state on mobile\n    // const glov_camera2d = require('./glov/camera2d.js');\n    // glov_engine.font.drawSizedWrapped(glov_engine.fps_style, glov_camera2d.x0(), glov_camera2d.y0(), Z.FPSMETER,\n    //   glov_camera2d.w(), 0, 22, JSON.stringify({\n    //     last_touch_state: input.last_touch_state,\n    //     touch_state: input.touch_state,\n    //   }, undefined, 2));\n  }\n\n  function testInit(dt) {\n    glov_engine.setState(test);\n    if (flagGet('music')) {\n      soundPlayMusic(music_file);\n    }\n    test(dt);\n  }\n\n  initGraphics();\n  glov_engine.setState(testInit);\n}","export let defs = {};\n\ndefs.explosion = {\n  particles: {\n    part0: {\n      blend: 'alpha',\n      texture: 'particles/circle64',\n      color: [1, 1, 1, 1], // multiplied by animation track, default 1,1,1,1, can be omitted\n      color_track: [\n      // just values, NOT random range\n      { t: 0.0, v: [1, 1, 1, 0] }, { t: 0.2, v: [1, 1, 1, 1] }, { t: 0.4, v: [1, 1, 0.5, 0.5] }, { t: 1.0, v: [1, 0, 0, 0] }],\n      size: [[48, 8], [48, 8]], // multiplied by animation track\n      size_track: [\n      // just values, NOT random range\n      { t: 0.0, v: [1, 1] }, { t: 0.2, v: [2, 2] }, { t: 0.4, v: [1, 1] }, { t: 1.0, v: [1.5, 1.5] }],\n      accel: [0, 0, 0],\n      rot: [0, 360], // degrees\n      rot_vel: [10, 2], // degrees per second\n      lifespan: [2500, 0], // milliseconds\n      kill_time_accel: 5\n    }\n  },\n  emitters: {\n    part0: {\n      particle: 'part0',\n      // Random ranges affect each emitted particle:\n      pos: [[-16, 32], [-16, 32], 0],\n      vel: [0, 0, 0],\n      emit_rate: [15, 0], // emissions per second\n      // Random ranges only calculated upon instantiation:\n      emit_time: [0, 1000],\n      emit_initial: 10,\n      max_parts: Infinity\n    }\n  },\n  system_lifespan: 2500\n};","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nfunction ok(exp, msg) {\n  if (exp) {\n    return;\n  }\n  throw new Error(`Assertion failed: ${msg ? msg : exp === undefined ? '' : JSON.stringify(exp)}`);\n}\nmodule.exports = ok;\nmodule.exports.ok = ok;\n\nfunction equal(a, b) {\n  if (a === b) {\n    return;\n  }\n  throw new Error(`Assertion failed: \"${a}\"===\"${b}\"`);\n}\nmodule.exports.equal = equal;\n","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\n// Dummy shim module that does not exist in worker bundles, to catch bat requires at bundle-time instead of run-time\n\nmodule.exports = true;\n","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst assert = require('assert');\nconst { isInteger } = require('./util.js');\n\nfunction canonical(cmd) {\n  return cmd.toLowerCase().replace(/[_.]/g, '');\n}\n\nexport const TYPE_INT = 0;\nexport const TYPE_FLOAT = 1;\nexport const TYPE_STRING = 2;\nconst TYPE_NAME = ['INTEGER', 'NUMBER', 'STRING'];\n\nexport function defaultHandler(err, resp) {\n  if (err) {\n    console.error(err, resp);\n  } else {\n    console.info(resp);\n  }\n}\n\nfunction checkAccess(access, list) {\n  if (list) {\n    for (let ii = 0; ii < list.length; ++ii) {\n      if (!access || !access[list[ii]]) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nfunction CmdParse(params) {\n  this.cmds = {};\n  this.cmds_for_complete = this.cmds;\n  this.was_not_found = false;\n  this.storage = params && params.storage; // expects .setJSON(), .getJSON()\n  this.default_handler = defaultHandler;\n  this.register({\n    cmd: 'cmd_list',\n    func: this.cmdList.bind(this),\n    access_show: ['hidden']\n  });\n}\nCmdParse.prototype.cmdList = function (str, resp_func) {\n  if (!this.cmd_list) {\n    let list = this.cmd_list = {};\n    for (let cmd in this.cmds) {\n      let cmd_data = this.cmds[cmd];\n      let access = []; // combine for data compaction\n      if (cmd_data.access_show) {\n        access = access.concat(cmd_data.access_show);\n      }\n      if (cmd_data.access_run) {\n        access = access.concat(cmd_data.access_run);\n      }\n      if (access.indexOf('hidden') !== -1) {\n        continue;\n      }\n      let data = {\n        name: cmd_data.name,\n        help: cmd_data.help\n      };\n      if (cmd_data.usage) {\n        data.usage = cmd_data.usage;\n      }\n      if (access.length) {\n        data.access_show = access;\n      }\n      list[cmd] = data;\n    }\n  }\n  resp_func(null, this.cmd_list);\n};\n\nCmdParse.prototype.setDefaultHandler = function (fn) {\n  assert(this.default_handler === defaultHandler); // Should only set this once\n  this.default_handler = fn;\n};\nCmdParse.prototype.handle = function (self, str, resp_func) {\n  resp_func = resp_func || this.default_handler;\n  this.was_not_found = false;\n  let m = str.match(/^([^\\s]+)(?:\\s+(.*))?$/);\n  if (!m) {\n    resp_func('Missing command');\n    return true;\n  }\n  let cmd = canonical(m[1]);\n  let cmd_data = this.cmds[cmd];\n  if (cmd_data && !checkAccess(self && self.access, cmd_data.access_run)) {\n    // this.was_not_found = true;\n    resp_func(`Access denied: \"${m[1]}\"`);\n    return false;\n  }\n  if (!cmd_data) {\n    this.was_not_found = true;\n    resp_func(`Unknown command: \"${m[1]}\"`);\n    return false;\n  }\n  cmd_data.fn.call(self, m[2] || '', resp_func);\n  return true;\n};\n\nCmdParse.prototype.register = function (param) {\n  assert.equal(typeof param, 'object');\n  let { cmd, func, help, usage, access_show, access_run } = param;\n  assert(cmd && func);\n  this.cmds[canonical(cmd)] = {\n    name: cmd,\n    fn: func,\n    help: help || '',\n    usage: usage || undefined,\n    access_show,\n    access_run\n  };\n};\n\nCmdParse.prototype.registerValue = function (cmd, param) {\n  assert(TYPE_NAME[param.type] || !param.set);\n  assert(param.set || param.get);\n  let label = param.label || cmd;\n  let store = param.store && this.storage || false;\n  let store_key = `cmd_parse_${canonical(cmd)}`;\n  if (param.ver) {\n    store_key += `_${param.ver}`;\n  }\n  if (store) {\n    assert(param.set);\n    let init_value = this.storage.getJSON(store_key);\n    if (init_value !== undefined) {\n      param.set(init_value);\n    }\n  }\n  let fn = (str, resp_func) => {\n    function value() {\n      resp_func(null, `${label} = ${param.get()}`);\n    }\n    function usage() {\n      resp_func(`Usage: /${cmd} ${TYPE_NAME[param.type]}`);\n    }\n    if (!str) {\n      if (param.get) {\n        return value();\n      } else {\n        return usage();\n      }\n    }\n    if (!param.set) {\n      return resp_func(`Usage: /${cmd}`);\n    }\n    let n = Number(str);\n    if (param.range) {\n      if (n < param.range[0]) {\n        n = param.range[0];\n      } else if (n > param.range[1]) {\n        n = param.range[1];\n      }\n    }\n    let store_value = n;\n    if (param.type === TYPE_INT) {\n      if (!isInteger(n)) {\n        return usage();\n      }\n      param.set(n);\n    } else if (param.type === TYPE_FLOAT) {\n      if (!isFinite(n)) {\n        return usage();\n      }\n      param.set(n);\n    } else {\n      store_value = str;\n      param.set(str);\n    }\n    if (store) {\n      this.storage.setJSON(store_key, store_value);\n    }\n    if (param.get) {\n      return value();\n    } else {\n      return resp_func(null, `${label} udpated`);\n    }\n  };\n  this.register({\n    cmd,\n    func: fn,\n    help: param.help || (param.get && param.set ? `Set or display \"${label}\" value` : param.set ? `Set \"${label}\" value` : `Display \"${label}\" value`),\n    usage: param.usage || (param.get ? `Display \"${label}\" value\\n  Usage: /${cmd}\\n` : '') + (param.set ? `Set \"${label}\" value\\n  Usage: /${cmd} NewValue` : ''),\n    access_show: param.access_show,\n    access_run: param.access_run\n  });\n};\n\nfunction cmpCmd(a, b) {\n  if (a.cname < b.cname) {\n    return -1;\n  }\n  return 1;\n}\n\n// for auto-complete\nCmdParse.prototype.addServerCommands = function (new_cmds) {\n  let cmds = this.cmds_for_complete;\n  if (this.cmds_for_complete === this.cmds) {\n    cmds = this.cmds_for_complete = {};\n    for (let cname in this.cmds) {\n      cmds[cname] = this.cmds[cname];\n    }\n  }\n  for (let cname in new_cmds) {\n    if (!cmds[cname]) {\n      cmds[cname] = new_cmds[cname];\n    }\n  }\n};\n\nCmdParse.prototype.autoComplete = function (str, access) {\n  let list = [];\n  str = str.split(' ');\n  let first_tok = canonical(str[0]);\n  for (let cname in this.cmds_for_complete) {\n    if (str.length === 1 && cname.slice(0, first_tok.length) === first_tok || str.length > 1 && cname === first_tok) {\n      let cmd_data = this.cmds_for_complete[cname];\n      if (checkAccess(access, cmd_data.access_show) && checkAccess(access, cmd_data.access_run)) {\n        list.push({\n          cname,\n          cmd: cmd_data.name,\n          help: cmd_data.help,\n          usage: cmd_data.usage\n        });\n      }\n    }\n  }\n  list.sort(cmpCmd);\n  return list; // .slice(0, 20); Maybe?\n};\n\nCmdParse.prototype.canonical = canonical;\n\nCmdParse.prototype.TYPE_INT = TYPE_INT;\nCmdParse.prototype.TYPE_FLOAT = TYPE_FLOAT;\nCmdParse.prototype.TYPE_STRING = TYPE_STRING;\n\nexport function create(params) {\n  return new CmdParse(params);\n}","// Portions Copyright 2019 Jimb Esser (https://github.com/Jimbly/)\n// Released under MIT License: https://opensource.org/licenses/MIT\n\nconst assert = require('assert');\nconst { abs, floor, min, max, random, round, pow, sqrt } = Math;\n\nexport function nop() {\n  // empty\n}\n\nexport function empty(obj) {\n  for (let key in obj) {\n    return false;\n  }\n  return true;\n}\n\nexport function easeInOut(v, a) {\n  let va = pow(v, a);\n  return va / (va + pow(1 - v, a));\n}\n\nexport function easeIn(v, a) {\n  return 2 * easeInOut(0.5 * v, a);\n}\n\nexport function easeOut(v, a) {\n  return 2 * easeInOut(0.5 + 0.5 * v, a) - 1;\n}\n\nexport function clone(obj) {\n  return JSON.parse(JSON.stringify(obj));\n}\n\nexport function merge(dest, src) {\n  for (let f in src) {\n    dest[f] = src[f];\n  }\n  return dest;\n}\n\nexport function has(obj, field) {\n  return Object.prototype.hasOwnProperty.call(obj, field);\n}\n\nexport function defaults(dest, src) {\n  for (let f in src) {\n    if (!has(dest, f)) {\n      dest[f] = src[f];\n    }\n  }\n  return dest;\n}\n\nexport function cloneShallow(src) {\n  return merge({}, src);\n}\n\nexport function clamp(v, mn, mx) {\n  return min(max(mn, v), mx);\n}\n\nexport function lerp(a, v0, v1) {\n  return (1 - a) * v0 + a * v1;\n}\n\nexport function mix(v0, v1, a) {\n  // GLSL semantics\n  return (1 - a) * v0 + a * v1;\n}\n\nexport function sign(a) {\n  return a < 0 ? -1 : a > 0 ? 1 : 0;\n}\n\n// log2 rounded up to nearest integer\nexport function log2(val) {\n  for (let ii = 1, jj = 0;; ii <<= 1, ++jj) {\n    // eslint-disable-line no-bitwise\n    if (ii >= val) {\n      return jj;\n    }\n  }\n}\n\nexport function ridx(arr, idx) {\n  arr[idx] = arr[arr.length - 1];\n  arr.pop();\n}\n\nexport function round100(a) {\n  return round(a * 100) / 100;\n}\n\nexport function round1000(a) {\n  return round(a * 1000) / 1000;\n}\n\nexport function fract(a) {\n  return a - floor(a);\n}\n\nexport function nearSame(a, b, tol) {\n  return abs(b - a) <= tol;\n}\n\nexport function titleCase(str) {\n  return str.split(' ').map(word => `${word[0].toUpperCase()}${word.slice(1)}`).join(' ');\n}\n\nconst EPSILON = 0.00001;\n\n// http://local.wasp.uwa.edu.au/~pbourke/geometry/sphereline/\nexport function lineCircleIntersect(p1, p2, pCircle, radius) {\n  let dp = [p2[0] - p1[0], p2[1] - p1[1]];\n  let a = dp[0] * dp[0] + dp[1] * dp[1];\n  let b = 2 * (dp[0] * (p1[0] - pCircle[0]) + dp[1] * (p1[1] - pCircle[1]));\n  let c = pCircle[0] * pCircle[0] + pCircle[1] * pCircle[1];\n  c += p1[0] * p1[0] + p1[1] * p1[1];\n  c -= 2 * (pCircle[0] * p1[0] + pCircle[1] * p1[1]);\n  c -= radius * radius;\n  let bb4ac = b * b - 4 * a * c;\n  if (abs(a) < EPSILON || bb4ac < 0) {\n    return false;\n  }\n\n  let mu1 = (-b + sqrt(bb4ac)) / (2 * a);\n  let mu2 = (-b - sqrt(bb4ac)) / (2 * a);\n  if (mu1 >= 0 && mu1 <= 1 || mu2 >= 0 && mu2 <= 1) {\n    return true;\n  }\n\n  return false;\n}\n\nexport function inherits(ctor, superCtor) {\n  // From Node.js\n  assert(typeof superCtor === 'function');\n  // not needed? ctor.super_ = superCtor; // eslint-disable-line no-underscore-dangle\n  // second parameter also not actually needed, just defines new Foo().constructor === Foo?\n  ctor.prototype = Object.create(superCtor.prototype, {\n    constructor: {\n      value: ctor,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n}\n\nexport function isPowerOfTwo(n) {\n  return (n & n - 1) === 0; // eslint-disable-line no-bitwise\n}\n\nexport function nextHighestPowerOfTwo(x) {\n  --x;\n  for (let i = 1; i < 32; i <<= 1) {\n    // eslint-disable-line no-bitwise\n    x |= x >> i; // eslint-disable-line no-bitwise\n  }\n  return x + 1;\n}\n\nexport function logdata(data) {\n  if (data === undefined) {\n    return '';\n  }\n  let r = JSON.stringify(data);\n  if (r.length < 120) {\n    return r;\n  }\n  return `${r.slice(0, 120 - 3)}...`;\n}\n\nexport function isInteger(v) {\n  return typeof v === 'number' && isFinite(v) && floor(v) === v;\n}\n\nexport function toNumber(v) {\n  return Number(v);\n}\n\nexport function randomNot(not_value, max_value) {\n  let new_value;\n  do {\n    new_value = floor(random() * max_value);\n  } while (new_value === not_value);\n  return new_value;\n}\n\nexport function toArray(array_like) {\n  return Array.prototype.slice.call(array_like);\n}\n\nexport function matchAll(str, re) {\n  let ret = [];\n  let m;\n  do {\n    m = re.exec(str);\n    if (m) {\n      ret.push(m[1]);\n    }\n  } while (m);\n  return ret;\n}"]}