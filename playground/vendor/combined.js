Uint8Array.prototype.slice||(Object.defineProperty(Uint8Array.prototype,"slice",{value:function(e,t){return new Uint8Array(Array.prototype.slice.call(this,e,t))}}),Object.defineProperty(Float32Array.prototype,"slice",{value:function(e,t){return new Float32Array(Array.prototype.slice.call(this,e,t))}}));var debug={reportAssert:function debugReportAssertFn(e){var r,u,t;if("undefined"!=typeof Error&&Error.captureStackTrace){var s=function debugReportAssertGetStackTraceFn(){var e={};Error.captureStackTrace(e,s);var t=(u=e.stack).split("\n")[3];r=t.substr(t.indexOf("at ")+3)};s()}throw e=r?"ASSERT at "+r+": "+e:"ASSERT: "+e,"undefined"!=typeof console&&(t=console),"undefined"!=typeof window&&(t=window.console),t&&(t.log(e),u&&t.log(u)),e},abort:function debugAbortFn(e){debug.reportAssert(e)},assert:function debugAssertFn(e,t){e||(t||(t="Unlabelled assert"),debug.reportAssert(t))},log:function debugAssertLogFn(e){window.console.log(e)},evaluate:function debugEvaluateFn(e){e()},isNumber:function debugIsNumber(e){return"number"==typeof e},isMathType:function isMathTypeFn(e){return e instanceof Float32Array||TurbulenzEngine.onperformancewarning&&TurbulenzEngine.onperformancewarning("Object is not of type Float32Array.  If this message appears frequently, performance of your game may be affected."),!0},isVec2:function debugIsVec2Fn(e){return 2<=e.length},isVec3:function debugIsVec3Fn(e){return 3<=e.length},isVec4:function debugIsVec4Fn(e){return 4<=e.length},isAABB:function debugIsAABBFn(e){return 6===e.length},isQuat:function debugIsQuatFn(e){return 4===e.length},isMtx33:function debugIsMtx33Fn(e){return 9===e.length},isMtx43:function debugIsMtx43Fn(e){return 12===e.length},isMtx34:function debugIsMtx34Fn(e){return 12===e.length},isMtx44:function debugIsMtx44Fn(e){return 16===e.length},isQuatPos:function debugIsQuatPos(e){return 7===e.length}},__extends=this.__extends||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);function __(){this.constructor=e}__.prototype=t.prototype,e.prototype=new __},WebGLSound=function(){function WebGLSound(e){this.name=e.name||e.src,this.frequency=0,this.channels=0,this.bitrate=0,this.length=0,this.compressed=!0,this.buffer=null,this.data=null,this.blob=null,this.url=null}return WebGLSound.prototype.destroy=function(){this.buffer=null,this.data=null,this.blob&&(URL.revokeObjectURL(this.url),this.blob=null),this.url=null},WebGLSound.audioLoaded=function(e,t){e.frequency=t.sampleRate||t.mozSampleRate||0,e.channels=t.channels||t.mozChannels||0,e.bitrate=e.frequency*e.channels*2*8,e.length=t.duration,t.buffered&&t.buffered.length&&(isNaN(e.length)||e.length===Number.POSITIVE_INFINITY)&&(e.length=t.buffered.end(0))},WebGLSound.prototype._readUint32=function(e,t){return e[t+0]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24},WebGLSound.prototype._readUint64=function(e,t){var r=e[t+0]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,u=e[t+4]|e[t+5]<<8|e[t+6]<<16|e[t+7]<<24;return u?4294967296*u+r:r},WebGLSound.prototype._findOggInfo=function(e){var t,r=e.length-15;for(t=4;t<r;t+=1)if(118===e[t+0]&&111===e[t+1]&&114===e[t+2]&&98===e[t+3]&&105===e[t+4]&&115===e[t+5]&&1===e[t-1]){this.channels=e[t+10],this.frequency=this._readUint32(e,t+11),this.bitrate=this._readUint32(e,t+11+8);break}if(this.frequency)for(t=e.length-28;0<=t;t-=1)if(79===e[t+0]&&103===e[t+1]&&103===e[t+2]&&83===e[t+3]){var u=this._readUint64(e,t+6);if(u){this.length=u/this.frequency;break}}},WebGLSound.prototype._syncsafe=function(e){var t=0;return t|=(2130706432&e)>>24,t|=(8323072&e)>>9,t|=(32512&e)<<6,t|=(127&e)<<21},WebGLSound.prototype._findMp3Info=function(e){var t,r=e.length;if(84===e[(t=r-128)+0]&&65===e[t+1]&&71===e[t+2]&&(r-=128),84===e[(t=r-227)+0]&&65===e[t+1]&&71===e[t+2]&&43===e[t+3]&&(r-=227),73===e[(t=0)+0]&&68===e[t+1]&&51===e[t+2]){var u=this._readUint32(e,6);t+=10+(u=this._syncsafe(u))}if(255===e[t+0]&&e[t+1]>>5==7&&3==(e[t+1]>>3&3)&&1==(e[t+1]>>1&3)){var s=WebGLSound.MP3BitRates[e[t+2]>>4],a=WebGLSound.MP3Frequencies[e[t+2]>>2&3];this.bitrate=s,this.frequency=a,this.length=(r-t)/(s/8),this.channels=e[t+3]>>6==3?1:2}},WebGLSound.prototype._initializeFromData=function(e,t,r){var u,s,a;"undefined"!=typeof Blob&&e instanceof Blob?(assert("undefined"!=typeof URL&&URL.createObjectURL),"audio/x-mpg"===e.type&&(e=e.slice(0,e.size,"audio/mpeg")),this.blob=e,this.url=URL.createObjectURL(e)):(u=e instanceof Uint8Array?e:new Uint8Array(e),"undefined"!=typeof Blob&&"undefined"!=typeof URL&&URL.createObjectURL?(79===u[0]&&103===u[1]&&103===u[2]&&83===u[3]?(this._findOggInfo(u),t="ogg",s=new Blob([u],{type:"audio/ogg"})):82===u[0]&&73===u[1]&&70===u[2]&&70===u[3]?(t="wav",s=new Blob([u],{type:"audio/wav"})):"m4a"===t||"mp4"===t?s=new Blob([u],{type:"audio/mp4"}):"aac"===t?s=new Blob([u],{type:"audio/aac"}):(this._findMp3Info(u),t="mp3",s=new Blob([u],{type:"audio/mpeg"})),assert(u.length===s.size,"Blob constructor does not support typed arrays."),this.blob=s,this.url=URL.createObjectURL(s)):(79===u[0]&&103===u[1]&&103===u[2]&&83===u[3]?(this._findOggInfo(u),t="ogg",a="data:audio/ogg;base64,"):82===u[0]&&73===u[1]&&70===u[2]&&70===u[3]?(t="wav",a="data:audio/wav;base64,"):"m4a"===t||"mp4"===t?a="data:audio/mp4;base64,":"aac"===t?a="data:audio/aac;base64,":(this._findMp3Info(u),t="mp3",a="data:audio/mpeg;base64,"),this.url=a+TurbulenzEngine.base64Encode(u)));r&&r(this,200)},WebGLSound.create=function(e,t){var r,u,s,a=new WebGLSound(t),n=t.src,i=t.onload,o=t.data,d=a.forceUncompress||t.uncompress||!n&&o;a.compressed=!d;var b,g=e.audioContext;if(g&&d){var c;if(n){if(!e.isResourceSupported(n))return i&&i(null,void 0),null;var l=function bufferCreatedFn(e){e?(a.buffer=e,a.frequency=e.sampleRate,a.channels=e.numberOfChannels,a.bitrate=a.frequency*a.channels*2*8,a.length=e.duration,i&&i(a,200)):i&&i(null,0)},v=function bufferFailedFn(){i&&i(null,0)};if(o)g.decodeAudioData?g.decodeAudioData(o,l,v):(c=g.createBuffer(o,!1),l(c));else{if(window.XMLHttpRequest)b=new window.XMLHttpRequest;else{if(!window.ActiveXObject)return i&&i(null,void 0),null;b=new window.ActiveXObject("Microsoft.XMLHTTP")}b.onreadystatechange=function(){if(4===b.readyState){if(!TurbulenzEngine||!TurbulenzEngine.isUnloading()){var e=b.status,t=b.response;if(""!==b.getAllResponseHeaders()||t)if(200===e||0===e)if(g.decodeAudioData)g.decodeAudioData(t,l,v);else{var r=g.createBuffer(t,!1);l(r)}else i&&i(null,e);else i&&i(null,0)}b.onreadystatechange=null,b=null}},b.open("GET",n,!0),b.responseType="arraybuffer",b.send(null)}return a}if(o){r=o.length,u=t.channels||1,s=t.frequency;var p,f,h,y,M=Math.min(g.sampleRate,96e3);if(M===s)for(c=g.createBuffer(u,r/u,s),p=0;p<u;p+=1)for(f=c.getChannelData(p),h=p,y=0;h<r;h+=u,y+=1)f[y]=o[h];else{var F=s/M,m=r/(F*u)|0;for(c=g.createBuffer(u,m,M),p=0;p<u;p+=1)for(f=c.getChannelData(p),y=0;y<m;y+=1)f[y]=o[p+(y*F|0)*u]}if(c)return a.buffer=c,a.frequency=s,a.channels=u,a.bitrate=s*u*2*8,a.length=r/(s*u),i&&i(a,200),a}}else{if(n){var A=n.slice(-3);return e.supportedExtensions[A]?(o?a._initializeFromData(o,A,i):((b=new XMLHttpRequest).onreadystatechange=function(){if(!(4!==b.readyState||TurbulenzEngine&&TurbulenzEngine.isUnloading())){var e=b.status;if(0!==e||"file:"!==window.location.protocol&&"chrome-extension:"!==window.location.protocol||(e=200),""!==b.getAllResponseHeaders()||b.response||b.responseText)if(200===e||0===e){var t;if("blob"===b.responseType||"arraybuffer"===b.responseType)t=b.response;else if(b.mozResponseArrayBuffer)t=b.mozResponseArrayBuffer;else{var r=b.responseText,u=r.length;(t=[]).length=u;for(var s=0;s<u;s+=1)t[s]=255&r.charCodeAt(s)}assert(t),a._initializeFromData(t,A,i)}else i&&i(null,e);else i&&i(null,0);b.onreadystatechange=null,b=null}},b.open("GET",n,!0),"string"==typeof b.responseType||b.hasOwnProperty&&b.hasOwnProperty("responseType")?b.responseType="arraybuffer":b.overrideMimeType?b.overrideMimeType("text/plain; charset=x-user-defined"):b.setRequestHeader("Content-Type","text/plain; charset=x-user-defined"),b.send()),a):(i&&i(null,void 0),null)}if(o)return r=o.length,u=t.channels||1,s=t.frequency,a.data=o,a.frequency=s,a.channels=u,a.bitrate=s*u*2*8,a.length=r/(s*u),i&&i(a,200),a}return i&&i(null,void 0),null},WebGLSound.version=1,WebGLSound.MP3BitRates=[0,32e3,4e4,48e3,56e3,64e3,8e4,96e3,112e3,128e3,16e4,192e3,224e3,256e3,32e4,0],WebGLSound.MP3Frequencies=[44100,48e3,32e3,0],WebGLSound}(),WebGLSoundGlobalSource=function(){function WebGLSoundGlobalSource(){}return WebGLSoundGlobalSource.prototype.play=function(e,t,r){var u=this.audioContext;if(this.sd.resume(),!e.buffer||this.sd.audio_context_resumed){if(void 0===t&&(t=0),this.sound===e)return this.seek(t);if(this.playing&&this._stop(),(this.sound=e).buffer){var s=this._createBufferNode(e);if(0<t){var a=e.buffer;s.loop?s.start(0,t,a.duration):s.start(0,t,a.duration-t),this.playStart=u.currentTime-t}else s.start(0),this.playStart=u.currentTime}else{var n=this.sd._allocateAudioElement(),i=n.audio;e.data&&i.mozSetup(e.channels,e.frequency),(this.audio=i).loop=this._looping,i.addEventListener("ended",this.loopAudio,!1);var o=n.mediaNode;if(o&&o.connect(this._gainNode),this.mediaNode=o,this.updateAudioVolume&&this.updateAudioVolume(),e.data)i.mozWriteAudio(e.data);else if(i.src=e.url,i.play(),0===e.length){this.sd.addLoadingSound(function checkLoadedFn(){return 3<=i.readyState&&(WebGLSound.audioLoaded(e,i),!0)})}if(.05<t)try{i.currentTime=t}catch(e){}}return this.playing=!0,this.paused=!1,this.sd.addPlayingSource(this),!0}r&&(this.sd.play_on_resume=[this,e])},WebGLSoundGlobalSource.prototype._stop=function(){this.playing=!1,this.paused=!1,this.sound=null;var e=this.audio;if(e)e.removeEventListener("ended",this.loopAudio,!1),this.sd._releaseAudioElement(this.audio,this.mediaNode),this.audio=null,this.mediaNode=null;else{var t=this.bufferNode;t&&(this.bufferNode=null,t.stop(0),t.disconnect())}},WebGLSoundGlobalSource.prototype.stop=function(){var e=this.playing;return e&&(this._stop(),this.sd.removePlayingSource(this),this.sd.play_on_resume&&this.sd.play_on_resume[0]===this&&(this.sd.play_on_resume=null)),e},WebGLSoundGlobalSource.prototype.pause=function(){if(this.playing){if(!this.paused){this.paused=!0;var e=this.audio;if(e)e.pause();else{var t=this.bufferNode;t&&(this.bufferNode=null,this.playPaused=this.audioContext.currentTime,t.stop(0),t.disconnect())}this.sd.removePlayingSource(this)}return!0}return!1},WebGLSoundGlobalSource.prototype.resume=function(e){if(this.paused){this.paused=!1;var t=this.audio;if(t){if(void 0!==e&&.05<Math.abs(t.currentTime-e))try{t.currentTime=e}catch(e){}t.play()}else{var r=this.audioContext;if(r){void 0===e&&(e=this.playPaused-this.playStart);var u=this._createBufferNode(this.sound);if(0<e){var s=this.sound.buffer;u.loop?u.start(0,e,s.duration):u.start(0,e,s.duration-e),this.playStart=r.currentTime-e}else u.start(0),this.playStart=r.currentTime}}return this.sd.addPlayingSource(this),!0}return!1},WebGLSoundGlobalSource.prototype.rewind=function(){if(this.playing){var e=this.audio;if(e)return!(e.currentTime=0);var t=this.audioContext;if(t){var r=this.bufferNode;return r&&(r.stop(0),r.disconnect()),(r=this._createBufferNode(this.sound)).start(0),this.playStart=t.currentTime,!0}}return!1},WebGLSoundGlobalSource.prototype.seek=function(e){if(this.playing){var t=this.tell,r=Math.abs(t-e);if(this._looping&&(r=Math.min(Math.abs(t-(this.sound.length+e)),r)),.05<r){var u=this.audio;if(u)try{u.currentTime=e}catch(e){}else{var s=this.audioContext;if(s){var a=this.bufferNode;if(a&&(a.stop(0),a.disconnect()),a=this._createBufferNode(this.sound),0<e){var n=this.sound.buffer;a.loop?a.start(0,e,n.duration):a.start(0,e,n.duration-e),this.playStart=s.currentTime-e}else a.start(0),this.playStart=s.currentTime}}}return!0}return!1},WebGLSoundGlobalSource.prototype.clear=function(){this.stop()},WebGLSoundGlobalSource.prototype.setAuxiliarySendFilter=function(e,t,r){return!1},WebGLSoundGlobalSource.prototype.setDirectFilter=function(e){return!1},WebGLSoundGlobalSource.prototype.destroy=function(){this.stop();var e=this._gainNode;e&&(this._gainNode=null,e.disconnect())},WebGLSoundGlobalSource.prototype._createBufferNode=function(e){var t=e.buffer,r=this.audioContext.createBufferSource();return r.buffer=t,r.loop=this._looping,r.playbackRate&&(r.playbackRate.value=this._pitch),r.connect(this._gainNode),r.start||(r.start=function audioStart(e,t,r){arguments.length<=1?this.noteOn(e):this.noteGrainOn(e,t,r)}),r.stop||(r.stop=function audioStop(e){this.noteOff(e)}),this.bufferNode=r},WebGLSoundGlobalSource.prototype._checkBufferNode=function(e){var t=this.bufferNode;if(t){var r=e-this.playStart,u=t.buffer.duration;if(u<r){if(!this._looping)return t.disconnect(),this.playing=!1,this.sound=null,this.bufferNode=null,!1;this.playStart=e-(r-u)}}return!0},WebGLSoundGlobalSource.create=function(e,t,r){var u=new WebGLSoundGlobalSource;u.sd=e,u.id=t,u.sound=null,u.audio=null,u.playing=!1,u.paused=!1,u._gain="number"==typeof r.gain?r.gain:1,u._looping=r.looping||!1,u._pitch=r.pitch||1;var s=e.audioContext;if(s){u.bufferNode=null,u.mediaNode=null,u.playStart=-1,u.playPaused=-1;var a=e._gainNode,n=s.createGain?s.createGain():s.createGainNode();n.gain.value=u._gain,(u._gainNode=n).connect(a),u.loopAudio=function loopAudioFn(){u.stop()}}else u.updateAudioVolume=function updateAudioVolumeFn(){var e=this.audio;if(e){var t=Math.min(this._gain,1);e.volume=t,e.muted=t<=0}},e.loopingSupported?u.loopAudio=function loopAudioFn(){u.stop()}:(u.looping=u._looping,u.loopAudio=function loopAudioFn(){var e=u.audio;e&&(this.looping?(e.currentTime=0,e.play()):u.stop())});return u},WebGLSoundGlobalSource.version=1,WebGLSoundGlobalSource}(),WebGLSoundSource=function(e){function WebGLSoundSource(){e.apply(this,arguments)}return __extends(WebGLSoundSource,e),WebGLSoundSource.prototype._updateRelativePositionWebAudio=function(e,t,r){var u=this._position;this._pannerNode.setPosition(u[0]+e,u[1]+t,u[2]+r)},WebGLSoundSource.prototype._updateRelativePositionHTML5=function(e,t,r){var u,s,a=this.minDistance,n=this.maxDistance,i=this._position,o=i[0],d=i[1],b=i[2];if(this.relative)u=o*o+d*d+b*b;else{var g=e-o,c=t-d,l=r-b;u=g*g+c*c+l*l}if(u<=a*a)s=1;else if(n*n<=u)s=0;else{var v=Math.sqrt(u);s=this.sd.linearDistance?(n-v)/(n-a):a/(a+this.rollOff*(v-a))}s*=this.sd.listenerGain,this._gainFactor!==s&&(this._gainFactor=s,this.updateAudioVolume())},WebGLSoundSource.prototype.destroy=function(){this.stop();var e=this._gainNode;e&&(this._gainNode=null,e.disconnect());var t=this._pannerNode;t&&(this._pannerNode=null,t.disconnect())},WebGLSoundSource.create=function(e,t,r){var u=new WebGLSoundSource;u.sd=e,u.id=t,u.sound=null,u.audio=null,u.playing=!1,u.paused=!1;var s=new Float32Array(9);u._position=s.subarray(0,3),u._velocity=s.subarray(3,6),u._direction=s.subarray(6,9),u._gain="number"==typeof r.gain?r.gain:1,u._looping=r.looping||!1,u._pitch=r.pitch||1;var a=e.audioContext;if(a){u.bufferNode=null,u.mediaNode=null,u.playStart=-1,u.playPaused=-1;var n=e._gainNode,i=a.createPanner();(u._pannerNode=i).connect(n);var o=a.createGain?a.createGain():a.createGainNode();o.gain.value=u._gain,(u._gainNode=o).connect(i),e.linearDistance&&("string"==typeof i.distanceModel?i.distanceModel="linear":"number"==typeof i.LINEAR_DISTANCE&&(i.distanceModel=i.LINEAR_DISTANCE)),"string"==typeof i.panningModel?i.panningModel="equalpower":i.panningModel=i.EQUALPOWER,u.updateRelativePosition=u._updateRelativePositionWebAudio,u.loopAudio=function loopAudioFn(){u.stop()}}else u._gainFactor=1,u.updateAudioVolume=function updateAudioVolumeFn(){var e=this.audio;if(e){var t=Math.min(this._gainFactor*this._gain,1);e.volume=t,e.muted=t<=0}},u.updateRelativePosition=u._updateRelativePositionHTML5,e.loopingSupported?u.loopAudio=function loopAudioFn(){u.stop()}:(u.looping=u._looping,u.loopAudio=function loopAudioFn(){var e=u.audio;e&&(this.looping?(e.currentTime=0,e.play()):u.stop())});return u.relative=r.relative||!1,u.minDistance=r.minDistance||1,u.maxDistance=r.maxDistance||3402823466e29,u.rollOff=r.rollOff||1,r.position&&(u.position=r.position),r.velocity&&(u.velocity=r.velocity),r.direction&&(u.direction=r.direction),u},WebGLSoundSource.version=1,WebGLSoundSource}(WebGLSoundGlobalSource),WebGLSoundDevice=function(){function WebGLSoundDevice(){}return WebGLSoundDevice.prototype.createSource=function(e){return this.lastSourceID+=1,WebGLSoundSource.create(this,this.lastSourceID,e)},WebGLSoundDevice.prototype.createGlobalSource=function(e){return this.lastSourceID+=1,WebGLSoundGlobalSource.create(this,this.lastSourceID,e)},WebGLSoundDevice.prototype.createSound=function(e){return WebGLSound.create(this,e)},WebGLSoundDevice.prototype.loadSoundsArchive=function(r){var e=r.src;return"undefined"!=typeof SoundTARLoader?(SoundTARLoader.create({sd:this,src:e,decodearchive:r.decodearchive,decodesound:r.decodesound,uncompress:r.uncompress,onsoundload:function tarSoundLoadedFn(e){r.onsoundload(e)},onload:function soundTarLoadedFn(e,t){r.onload&&r.onload(e,t)},onerror:function soundTarFailedFn(e){r.onload&&r.onload(!1,e)}}),!0):(TurbulenzEngine.callOnError("Missing archive loader required for "+e),!1)},WebGLSoundDevice.prototype.createEffect=function(e){return null},WebGLSoundDevice.prototype.createEffectSlot=function(e){return null},WebGLSoundDevice.prototype.createFilter=function(e){return null},WebGLSoundDevice.prototype._updateHTML5=function(){var e,t=this._listenerTransform,r=t[9],u=t[10],s=t[11],a=this.numPlayingSources,n=this.playingSources;for(e=0;e<a;e+=1){var i=n[e];i.updateRelativePosition&&i.updateRelativePosition(r,u,s)}},WebGLSoundDevice.prototype._updateWebAudio=function(){this._gainNode.gain.value=this.listenerGain;for(var e=this._listenerTransform,t=e[9],r=e[10],u=e[11],s=this.numPlayingSources,a=this.playingSources,n=this.playingSourcesMap,i=this.audioContext.currentTime,o=0;o<s;){var d=a[o];d._checkBufferNode(i)?(d.relative&&d.updateRelativePosition(t,r,u),o+=1):(s-=1,a[o]=a[s],a[s]=null,delete n[d.id])}(this.numPlayingSources=s)<a.length>>1&&(a.length=s)},WebGLSoundDevice.prototype.isSupported=function(e){return"FILEFORMAT_OGG"===e?this.supportedExtensions.ogg:"FILEFORMAT_MP3"===e?this.supportedExtensions.mp3:"FILEFORMAT_M4A"===e||"FILEFORMAT_MP4"===e?this.supportedExtensions.m4a:"FILEFORMAT_AAC"===e?this.supportedExtensions.aac:"FILEFORMAT_WAV"===e&&this.supportedExtensions.wav},WebGLSoundDevice.prototype.addLoadingSound=function(e){var r=this.loadingSounds;r[r.length]=e;var u=this.loadingInterval,s=this;null===u&&(this.loadingInterval=u=window.setInterval(function checkLoadingSources(){var e=r.length,t=0;do{(0,r[t])()?(t<(e-=1)&&(r[t]=r[e]),r.length=e):t+=1}while(t<e);0===e&&(window.clearInterval(u),s.loadingInterval=null)},100))},WebGLSoundDevice.prototype.addPlayingSource=function(e){var t=e.id;if(!this.playingSourcesMap[t]){this.playingSourcesMap[t]=!0;var r=this.numPlayingSources;this.playingSources[r]=e,this.numPlayingSources=r+1}},WebGLSoundDevice.prototype.removePlayingSource=function(e){delete this.playingSourcesMap[e.id];var t,r=this.numPlayingSources,u=this.playingSources;for(t=0;t<r;t+=1)if(u[t]===e){r-=1,u[t]=u[r],u[r]=null,this.numPlayingSources=r;break}},WebGLSoundDevice.prototype.isResourceSupported=function(e){var t=e.slice(-3).toLowerCase();return this.supportedExtensions[t]},WebGLSoundDevice.prototype._allocateAudioElement=function(){if(this._audioPool.length)return this._audioPool.pop();var e=new Audio;return e.preload="auto",e.autobuffer=!0,{audio:e,mediaNode:this.audioContext?this.audioContext.createMediaElementSource(e):null}},WebGLSoundDevice.prototype._releaseAudioElement=function(e,t){t&&t.disconnect(),e.pause(),this._audioPool.length<8&&this._audioPool.push({audio:e,mediaNode:t})},WebGLSoundDevice.prototype.destroy=function(){var e=this.loadingInterval;null!==e&&(window.clearInterval(e),this.loadingInterval=null);var t=this.loadingSounds;t&&(t.length=0,this.loadingSounds=null);var r,u=this.numPlayingSources,s=this.playingSources;for(r=0;r<u;r+=1)s[r]._stop();this.numPlayingSources=0,this.playingSources=null,this.playingSourcesMap=null,WebGLSound.prototype.audioContext=null,WebGLSoundSource.prototype.audioContext=null,WebGLSoundGlobalSource.prototype.audioContext=null},WebGLSoundDevice.prototype.resume=function(){var e=this;!e.audio_context_resumed&&e.audioContext&&e.audioContext.resume&&e.audioContext.resume().then(function(){e.audio_context_resumed=!0,e.play_on_resume&&(e.play_on_resume[0].play(e.play_on_resume[1]),e.play_on_resume=null)})},WebGLSoundDevice.create=function(e){var t,r=new WebGLSoundDevice;r.extensions="",r.renderer="HTML5 Audio",r.alcVersion="0",r.alcExtensions="",r.alcEfxVersion="0",r.alcMaxAuxiliarySends=0,r.deviceSpecifier=e.deviceSpecifier||null,r.frequency=e.frequency||44100,r.dopplerFactor=e.dopplerFactor||1,r.dopplerVelocity=e.dopplerVelocity||1,r.speedOfSound=e.speedOfSound||343.29998779296875,r.linearDistance=void 0===e.linearDistance||e.linearDistance,r.loadingSounds=[],r.loadingInterval=null,r.numPlayingSources=0,r.playingSources=[],r.playingSourcesMap={},r.lastSourceID=0,"audioelement"!==r.deviceSpecifier&&(t=window.AudioContext||window.webkitAudioContext);var u,s=null;if(t){var a;try{a=new t}catch(e){return TurbulenzEngine.callOnError("Failed to create AudioContext:"+e),null}if(0===a.sampleRate)return null;WebGLSound.prototype.forceUncompress=!0,WebGLSound.prototype.audioContext=a,WebGLSoundSource.prototype.audioContext=a,WebGLSoundGlobalSource.prototype.audioContext=a,r.renderer="WebAudio",r.audioContext=a,r.audio_context_resumed=!1,r.frequency=a.sampleRate,r._gainNode=a.createGain?a.createGain():a.createGainNode(),r._gainNode.connect(a.destination),s=a.listener,r.update=r._updateWebAudio,Object.defineProperty(WebGLSoundGlobalSource.prototype,"gain",{get:function getGainFn(){return this._gain},set:function setGainFn(e){this._gain!==e&&(this._gain=e,this._gainNode.gain.value=e)},enumerable:!0,configurable:!1}),Object.defineProperty(WebGLSoundGlobalSource.prototype,"pitch",{get:function getPitchFn(){return this._pitch},set:function setPitchFn(e){this._pitch=e;var t=this.audio;if(t)t.playbackRate=e;else{var r=this.bufferNode;r&&r.playbackRate&&(r.playbackRate.value=e)}},enumerable:!0,configurable:!1}),Object.defineProperty(WebGLSoundGlobalSource.prototype,"tell",{get:function tellFn(){if(this.playing){var e=this.audio;return e?e.currentTime:this.paused?this.playPaused-this.playStart:a.currentTime-this.playStart}return 0},enumerable:!0,configurable:!1}),Object.defineProperty(WebGLSoundGlobalSource.prototype,"looping",{get:function getLoopingFn(){return this._looping},set:function setLoopingFn(e){this._looping=e;var t=this.audio;if(t)t.loop=e;else{var r=this.bufferNode;r&&(r.loop=e)}},enumerable:!0,configurable:!1}),Object.defineProperty(WebGLSoundSource.prototype,"position",{get:function getPositionFn(){return this._position.slice()},set:function setPositionFn(e){var t=this._position;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]||(t[0]=e[0],t[1]=e[1],t[2]=e[2],this.relative||this._pannerNode.setPosition(e[0],e[1],e[2]))},enumerable:!0,configurable:!1}),Object.defineProperty(WebGLSoundSource.prototype,"direction",{get:function getDirectionFn(){return this._direction.slice()},set:function setDirectionFn(e){this._direction=VMath.v3Copy(e,this._direction),this._pannerNode.setOrientation(e[0],e[1],e[2])},enumerable:!0,configurable:!1}),Object.defineProperty(WebGLSoundSource.prototype,"velocity",{get:function getVelocityFn(){return this._velocity.slice()},set:function setVelocityFn(e){this._velocity=VMath.v3Copy(e,this._velocity),this._pannerNode.setVelocity(e[0],e[1],e[2])},enumerable:!0,configurable:!1}),Object.defineProperty(WebGLSoundSource.prototype,"minDistance",{get:function getMinDistanceFn(){return this._pannerNode.refDistance},set:function setMinDistanceFn(e){this._pannerNode.maxDistance===e&&(e=.999*this._pannerNode.maxDistance),this._pannerNode.refDistance=e},enumerable:!0,configurable:!1}),Object.defineProperty(WebGLSoundSource.prototype,"maxDistance",{get:function getMaxDistanceFn(){return this._pannerNode.maxDistance},set:function setMaxDistanceFn(e){this._pannerNode.refDistance===e&&(e=1.001*this._pannerNode.refDistance),this._pannerNode.maxDistance=e},enumerable:!0,configurable:!1}),Object.defineProperty(WebGLSoundSource.prototype,"rollOff",{get:function getRolloffFactorFn(){return this._pannerNode.rolloffFactor},set:function setRolloffFactorFn(e){this._pannerNode.rolloffFactor=e},enumerable:!0,configurable:!1})}else r.update=r._updateHTML5,WebGLSound.prototype.forceUncompress=!1,Object.defineProperty(WebGLSoundGlobalSource.prototype,"gain",{get:function getGainFn(){return this._gain},set:function setGainFn(e){this._gain!==e&&(this._gain=e,this.updateAudioVolume())},enumerable:!0,configurable:!1}),Object.defineProperty(WebGLSoundGlobalSource.prototype,"pitch",{get:function getPitchFn(){return this._pitch},set:function setPitchFn(e){this._pitch=e;var t=this.audio;t&&(t.playbackRate=e)},enumerable:!0,configurable:!1}),Object.defineProperty(WebGLSoundGlobalSource.prototype,"tell",{get:function tellFn(){if(this.playing){var e=this.audio;if(e)return e.currentTime}return 0},enumerable:!0,configurable:!1}),Object.defineProperty(WebGLSoundSource.prototype,"position",{get:function getPositionFn(){return this._position.slice()},set:function setPositionFn(e){this._position=VMath.v3Copy(e,this._position)},enumerable:!0,configurable:!1}),Object.defineProperty(WebGLSoundSource.prototype,"direction",{get:function getDirectionFn(){return this._direction.slice()},set:function setDirectionFn(e){this._direction=VMath.v3Copy(e,this._direction)},enumerable:!0,configurable:!1}),Object.defineProperty(WebGLSoundSource.prototype,"velocity",{get:function getVelocityFn(){return this._velocity.slice()},set:function setVelocityFn(e){this._velocity=VMath.v3Copy(e,this._velocity)},enumerable:!0,configurable:!1});r._listenerTransform=e.listenerTransform?VMath.m43Copy(e.listenerTransform):VMath.m43BuildIdentity(),r._listenerVelocity=e.listenerVelocity?VMath.v3Copy(e.listenerVelocity):VMath.v3BuildZero(),Object.defineProperty(r,"listenerTransform",{get:function getListenerTransformFn(){return this._listenerTransform.slice()},set:function setListenerTransformFn(e){if(this._listenerTransform=VMath.m43Copy(e,this._listenerTransform),s){var t=e[9],r=e[10],u=e[11];s.setPosition(t,r,u),s.setOrientation(-e[6],-e[7],-e[8],e[3],e[4],e[5])}},enumerable:!0,configurable:!1}),Object.defineProperty(r,"listenerVelocity",{get:function getListenerVelocityFn(){return this._listenerVelocity.slice()},set:function setListenerVelocityFn(e){this._listenerVelocity=VMath.v3Copy(e,this._listenerVelocity)},enumerable:!0,configurable:!1}),r.listenerGain="number"==typeof e.listenerGain?e.listenerGain:1;try{u=new Audio}catch(e){return TurbulenzEngine.callOnError("Failed to create Audio:"+e),null}if(r.audioContext)r.loopingSupported=!0;else{if(u.mozSetup)try{u.mozSetup(1,22050)}catch(e){return null}r.loopingSupported="boolean"==typeof u.loop,r.loopingSupported&&Object.defineProperty(WebGLSoundGlobalSource.prototype,"looping",{get:function getLoopingFn(){return this._looping},set:function setLoopingFn(e){this._looping=e;var t=this.audio;t&&(t.loop=e)},enumerable:!0,configurable:!1})}var n={ogg:!1,mp3:!1,mp4:!1,m4a:!1,aac:!1,wav:!1};return u.canPlayType("application/ogg")&&(n.ogg=!0),u.canPlayType("audio/mp3")&&(n.mp3=!0),u.canPlayType("audio/mp4")&&(n.mp4=!0,n.m4a=!0),u.canPlayType("audio/aac")&&(n.aac=!0),u.canPlayType("audio/wav")&&(n.wav=!0),r.supportedExtensions=n,r._audioPool=[],r.audioContext?r._audioPool.push({audio:u,mediaNode:r.audioContext.createMediaElementSource(u)}):r._audioPool.push({audio:u,mediaNode:null}),r.resume(),r},WebGLSoundDevice.version=1,WebGLSoundDevice}();WebGLSoundDevice.prototype.vendor="Turbulenz","undefined"!=typeof Float32Array&&void 0!==Float32Array.prototype&&void 0===Float32Array.prototype.slice&&(Float32Array.prototype.slice=function Float32ArraySlice(e,t){var r=this.length;if(void 0===e?e=0:e<0&&(e+=r),void 0===t?t=r:t<0&&(t+=r),0<(r=t-e)){for(var u=new Float32Array(r),s=0;u[s]=this[e],s+=1,(e+=1)<t;);return u}return new Float32Array(0)});var VMath={version:1,precision:1e-6,FLOAT_MAX:3402823466e29,select:function selectFn(e,t,r){return debug.assert(debug.isNumber(t)),debug.assert(debug.isNumber(r)),e?t:r},reciprocal:function reciprocalFn(e){if(debug.assert(debug.isNumber(e)),0!==e)return 1/e;throw"Division by zero"},truncate:function truncateFn(e){return 0|e},v2BuildZero:function v2BuildZeroFn(e){return void 0===e&&(e=new Float32Array(2)),debug.assert(debug.isMathType(e)&&debug.isVec2(e)),e[0]=0,e[1]=0,e},v2BuildOne:function v2BuildOneFn(e){return void 0===e&&(e=new Float32Array(2)),debug.assert(debug.isMathType(e)&&debug.isVec2(e)),e[0]=1,e[1]=1,e},v2BuildXAxis:function v2BuildXAxisFn(e){return void 0===e&&(e=new Float32Array(2)),debug.assert(debug.isMathType(e)&&debug.isVec2(e)),e[0]=1,e[1]=0,e},v2BuildYAxis:function v2BuildYAxisFn(e){return void 0===e&&(e=new Float32Array(2)),debug.assert(debug.isMathType(e)&&debug.isVec2(e)),e[0]=0,e[1]=1,e},v2Build:function v2Fn(e,t,r){return void 0===r&&(r=new Float32Array(2)),debug.assert(debug.isNumber(e)),debug.assert(debug.isNumber(t)),debug.assert(debug.isMathType(r)&&debug.isVec2(r)),r[0]=e,r[1]=t,r},v2Copy:function v2CopyFn(e,t){return void 0===t&&(t=new Float32Array(2)),debug.assert(2===e.length),debug.assert(debug.isMathType(t)&&debug.isVec2(t)),t[0]=e[0],t[1]=e[1],t},v2Set:function v2SetFn(e,t){debug.assert(debug.isVec2(e)),e[0]=t[0],e[1]=t[1]},v2Neg:function v2NegFn(e,t){return void 0===t&&(t=new Float32Array(2)),debug.assert(debug.isVec2(e)),debug.assert(debug.isMathType(t)&&debug.isVec2(t)),t[0]=-e[0],t[1]=-e[1],t},v2Add:function v2AddFn(e,t,r){return void 0===r&&(r=new Float32Array(2)),debug.assert(debug.isVec2(e)),debug.assert(debug.isVec2(t)),debug.assert(debug.isMathType(r)&&debug.isVec2(r)),r[0]=e[0]+t[0],r[1]=e[1]+t[1],r},v2Add3:function v2Add3Fn(e,t,r,u){return void 0===u&&(u=new Float32Array(2)),debug.assert(debug.isVec2(e)),debug.assert(debug.isVec2(t)),debug.assert(debug.isVec2(r)),debug.assert(debug.isMathType(u)&&debug.isVec2(u)),u[0]=e[0]+t[0]+r[0],u[1]=e[1]+t[1]+r[1],u},v2Add4:function v2Add4Fn(e,t,r,u,s){return void 0===s&&(s=new Float32Array(2)),debug.assert(debug.isVec2(e)),debug.assert(debug.isVec2(t)),debug.assert(debug.isVec2(r)),debug.assert(debug.isVec2(u)),debug.assert(debug.isMathType(s)&&debug.isVec2(s)),s[0]=e[0]+t[0]+r[0]+u[0],s[1]=e[1]+t[1]+r[1]+u[1],s},v2Sub:function v2SubFn(e,t,r){return void 0===r&&(r=new Float32Array(2)),debug.assert(debug.isVec2(e)),debug.assert(debug.isVec2(t)),debug.assert(debug.isMathType(r)&&debug.isVec2(r)),r[0]=e[0]-t[0],r[1]=e[1]-t[1],r},v2Mul:function v2MulFn(e,t,r){return void 0===r&&(r=new Float32Array(2)),debug.assert(debug.isVec2(e)),debug.assert(debug.isVec2(t)),debug.assert(debug.isMathType(r)&&debug.isVec2(r)),r[0]=e[0]*t[0],r[1]=e[1]*t[1],r},v2MulAdd:function v2MulAddFn(e,t,r,u){return void 0===u&&(u=new Float32Array(2)),debug.assert(debug.isVec2(e)),debug.assert(debug.isVec2(t)),debug.assert(debug.isVec2(r)),debug.assert(debug.isMathType(u)&&debug.isVec2(u)),u[0]=e[0]*t[0]+r[0],u[1]=e[1]*t[1]+r[1],u},v2DistanceSq:function v2DistanceSqFn(e,t){var r=t[0]-e[0],u=t[1]-e[1];return r*r+u*u},v2Distance:function v2DistanceFn(e,t){var r=t[0]-e[0],u=t[1]-e[1];return Math.sqrt(r*r+u*u)},v2Dot:function v2DotFn(e,t){return e[0]*t[0]+e[1]*t[1]},v2PerpDot:function v2PerpDot(e,t){return e[0]*t[1]-e[1]*t[0]},v2LengthSq:function v2LengthSqFn(e){var t=e[0],r=e[1];return t*t+r*r},v2Length:function v2LengthFn(e){var t=e[0],r=e[1];return Math.sqrt(t*t+r*r)},v2Reciprocal:function v2ReciprocalFn(e,t){void 0===t&&(t=new Float32Array(2));var r=VMath.reciprocal;return t[0]=r(e[0]),t[1]=r(e[1]),t},v2Normalize:function v2NormalizeFn(e,t){void 0===t&&(t=new Float32Array(2));var r=e[0],u=e[1],s=r*r+u*u;if(0<s){var a=1/Math.sqrt(s);t[0]=r*a,t[1]=u*a}else t[0]=0,t[1]=0;return t},v2Abs:function v2AbsFn(e,t){void 0===t&&(t=new Float32Array(2));var r=Math.abs;return t[0]=r(e[0]),t[1]=r(e[1]),t},v2Max:function v2MaxFn(e,t,r){void 0===r&&(r=new Float32Array(2));var u=Math.max;return r[0]=u(e[0],t[0]),r[1]=u(e[1],t[1]),r},v2Min:function v2MinFn(e,t,r){void 0===r&&(r=new Float32Array(2));var u=Math.min;return r[0]=u(e[0],t[0]),r[1]=u(e[1],t[1]),r},v2Equal:function v2EqualFn(e,t,r){var u=Math.abs;return void 0===r&&(r=this.precision),u(e[0]-t[0])<=r&&u(e[1]-t[1])<=r},v2MaskEqual:function v2MaskEqualFn(e,t){var r=Math.abs,u=VMath.precision;return[r(e[0]-t[0])<=u,r(e[1]-t[1])<=u]},v2MaskLess:function v2MaskLessFn(e,t){return[e[0]<t[0],e[1]<t[1]]},v2MaskGreater:function v2MaskGreaterFn(e,t){return[e[0]>t[0],e[1]>t[1]]},v2MaskGreaterEq:function v2MaskGreaterEqFn(e,t){return[e[0]>=t[0],e[1]>=t[1]]},v2MaskNot:function v2MaskNotFn(e){return[!e[0],!e[1]]},v2MaskOr:function v2MaskOrFn(e,t){return[e[0]||t[0],e[1]||t[1]]},v2MaskAnd:function v2MaskAndFn(e,t){return[e[0]&&t[0],e[1]&&t[1]]},v2Select:function v2SelectFn(e,t,r,u){return void 0===u&&(u=new Float32Array(2)),u[0]=e[0]?t[0]:r[0],u[1]=e[1]?t[1]:r[1],u},v2ScalarBuild:function v2ScalarBuildFn(e,t){return void 0===t&&(t=new Float32Array(2)),t[0]=e,t[1]=e,t},v2ScalarMax:function v2ScalarMaxFn(e,t,r){void 0===r&&(r=new Float32Array(2));var u=Math.max;return r[0]=u(e[0],t),r[1]=u(e[1],t),r},v2ScalarMin:function v2ScalarMinFn(e,t,r){void 0===r&&(r=new Float32Array(2));var u=Math.min;return r[0]=u(e[0],t),r[1]=u(e[1],t),r},v2ScalarAdd:function v2ScalarAddFn(e,t,r){return void 0===r&&(r=new Float32Array(2)),r[0]=e[0]+t,r[1]=e[1]+t,r},v2ScalarSub:function v2ScalarSubFn(e,t,r){return void 0===r&&(r=new Float32Array(2)),r[0]=e[0]-t,r[1]=e[1]-t,r},v2ScalarMul:function v2ScalarMulFn(e,t,r){return void 0===r&&(r=new Float32Array(2)),0===t?(r[0]=0,r[1]=0):(r[0]=e[0]*t,r[1]=e[1]*t),r},v2AddScalarMul:function v2AddScalarMulFn(e,t,r,u){return void 0===u&&(u=new Float32Array(2)),u[0]=e[0]+t[0]*r,u[1]=e[1]+t[1]*r,u},v2EqualScalarMask:function v2EqualScalarMaskFn(e,t){var r=Math.abs,u=VMath.precision;return[r(e[0]-t)<=u,r(e[1]-t)<=u]},v2LessScalarMask:function v2LessScalarMaskFn(e,t){return[e[0]<t,e[1]<t]},v2GreaterScalarMask:function v2GreaterScalarMaskFn(e,t){return[e[0]>t,e[1]>t]},v2GreaterEqScalarMask:function v2GreaterEqScalarMaskFn(e,t){return[e[0]>=t,e[1]>=t]},v2Lerp:function v2LerpFn(e,t,r,u){return void 0===u&&(u=new Float32Array(2)),u[0]=e[0]+(t[0]-e[0])*r,u[1]=e[1]+(t[1]-e[1])*r,u},v3BuildZero:function v3BuildZeroFn(e){var t=e;return void 0===t&&(t=new Float32Array(3)),debug.assert(debug.isMathType(t)&&debug.isVec3(t)),t[0]=0,t[1]=0,t[2]=0,t},v3BuildOne:function v3BuildOneFn(e){var t=e;return void 0===t&&(t=new Float32Array(3)),debug.assert(debug.isMathType(t)&&debug.isVec3(t)),t[0]=1,t[1]=1,t[2]=1,t},v3BuildXAxis:function v3BuildXAxisFn(e){var t=e;return void 0===t&&(t=new Float32Array(3)),debug.assert(debug.isMathType(t)&&debug.isVec3(t)),t[0]=1,t[1]=0,t[2]=0,t},v3BuildYAxis:function v3BuildYAxisFn(e){var t=e;return void 0===t&&(t=new Float32Array(3)),debug.assert(debug.isMathType(t)&&debug.isVec3(t)),t[0]=0,t[1]=1,t[2]=0,t},v3BuildZAxis:function v3BuildZAxisFn(e){var t=e;return void 0===t&&(t=new Float32Array(3)),debug.assert(debug.isMathType(t)&&debug.isVec3(t)),t[0]=0,t[1]=0,t[2]=1,t},v3Build:function v3Fn(e,t,r,u){var s=u;return void 0===s&&(s=new Float32Array(3)),debug.assert(debug.isNumber(e)),debug.assert(debug.isNumber(t)),debug.assert(debug.isNumber(r)),debug.assert(debug.isMathType(s)&&debug.isVec3(s)),s[0]=e,s[1]=t,s[2]=r,s},v3Copy:function v3CopyFn(e,t){var r=t;return void 0===r&&(r=new Float32Array(3)),debug.assert(debug.isMathType(r)&&debug.isVec3(r)),r[0]=e[0],r[1]=e[1],r[2]=e[2],r},v3Set:function v3SetFn(e,t){debug.assert(debug.isVec3(e)),e[0]=t[0],e[1]=t[1],e[2]=t[2]},v3Neg:function v3NegFn(e,t){return void 0===t&&(t=new Float32Array(3)),debug.assert(debug.isVec3(e)),debug.assert(debug.isMathType(t)&&debug.isVec3(t)),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},v3Add:function v3AddFn(e,t,r){var u=r;return void 0===u&&(u=new Float32Array(3)),debug.assert(debug.isVec3(e)),debug.assert(debug.isVec3(t)),debug.assert(debug.isMathType(u)&&debug.isVec3(u)),u[0]=e[0]+t[0],u[1]=e[1]+t[1],u[2]=e[2]+t[2],u},v3Add3:function v3Add3Fn(e,t,r,u){return void 0===u&&(u=new Float32Array(3)),debug.assert(debug.isVec3(e)),debug.assert(debug.isVec3(t)),debug.assert(debug.isVec3(r)),debug.assert(debug.isMathType(u)&&debug.isVec3(u)),u[0]=e[0]+t[0]+r[0],u[1]=e[1]+t[1]+r[1],u[2]=e[2]+t[2]+r[2],u},v3Add4:function v3Add4Fn(e,t,r,u,s){return void 0===s&&(s=new Float32Array(3)),debug.assert(debug.isVec3(e)),debug.assert(debug.isVec3(t)),debug.assert(debug.isVec3(r)),debug.assert(debug.isVec3(u)),debug.assert(debug.isMathType(s)&&debug.isVec3(s)),s[0]=e[0]+t[0]+r[0]+u[0],s[1]=e[1]+t[1]+r[1]+u[1],s[2]=e[2]+t[2]+r[2]+u[2],s},v3Sub:function v3SubFn(e,t,r){var u=r;return void 0===u&&(u=new Float32Array(3)),debug.assert(debug.isVec3(e)),debug.assert(debug.isVec3(t)),debug.assert(debug.isMathType(u)&&debug.isVec3(u)),u[0]=e[0]-t[0],u[1]=e[1]-t[1],u[2]=e[2]-t[2],u},v3Mul:function v3MulFn(e,t,r){return void 0===r&&(r=new Float32Array(3)),debug.assert(debug.isVec3(e)),debug.assert(debug.isVec3(t)),debug.assert(debug.isMathType(r)&&debug.isVec3(r)),r[0]=e[0]*t[0],r[1]=e[1]*t[1],r[2]=e[2]*t[2],r},v3MulAdd:function v3MulAddFn(e,t,r,u){return void 0===u&&(u=new Float32Array(3)),debug.assert(debug.isVec3(e)),debug.assert(debug.isVec3(t)),debug.assert(debug.isVec3(r)),debug.assert(debug.isMathType(u)&&debug.isVec3(u)),u[0]=e[0]*t[0]+r[0],u[1]=e[1]*t[1]+r[1],u[2]=e[2]*t[2]+r[2],u},v3Dot:function v3DotFn(e,t){return debug.assert(debug.isVec3(e)),debug.assert(debug.isVec3(t)),e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},v3Cross:function v3CrossFn(e,t,r){var u=r;void 0===u&&(u=new Float32Array(3)),debug.assert(debug.isVec3(e)),debug.assert(debug.isVec3(t)),debug.assert(debug.isMathType(u)&&debug.isVec3(u));var s=e[0],a=e[1],n=e[2],i=t[0],o=t[1],d=t[2];return u[0]=a*d-n*o,u[1]=n*i-s*d,u[2]=s*o-a*i,u},v3DistanceSq:function v3DistanceSqFn(e,t){debug.assert(debug.isVec3(e));var r=t[0]-e[0],u=t[1]-e[1],s=t[2]-e[2];return r*r+u*u+s*s},v3Distance:function v3DistanceFn(e,t){debug.assert(debug.isVec3(e));var r=t[0]-e[0],u=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(r*r+u*u+s*s)},v3LengthSq:function v3LengthSqFn(e){debug.assert(debug.isVec3(e));var t=e[0],r=e[1],u=e[2];return t*t+r*r+u*u},v3Length:function v3LengthFn(e){debug.assert(debug.isVec3(e));var t=e[0],r=e[1],u=e[2];return Math.sqrt(t*t+r*r+u*u)},v3Reciprocal:function v3ReciprocalFn(e,t){void 0===t&&(t=new Float32Array(3)),debug.assert(debug.isVec3(e)),debug.assert(debug.isMathType(t)&&debug.isVec3(t));var r=VMath.reciprocal;return t[0]=r(e[0]),t[1]=r(e[1]),t[2]=r(e[2]),t},v3Normalize:function v3NormalizeFn(e,t){var r=t;void 0===r&&(r=new Float32Array(3)),debug.assert(debug.isVec3(e)),debug.assert(debug.isMathType(r)&&debug.isVec3(r));var u=e[0],s=e[1],a=e[2],n=u*u+s*s+a*a;if(0<n){var i=1/Math.sqrt(n);r[0]=u*i,r[1]=s*i,r[2]=a*i}else r[0]=0,r[1]=0,r[2]=0;return r},v3Abs:function v3AbsFn(e,t){var r=t;void 0===r&&(r=new Float32Array(3)),debug.assert(debug.isVec3(e)),debug.assert(debug.isMathType(r)&&debug.isVec3(r));var u=Math.abs;return r[0]=u(e[0]),r[1]=u(e[1]),r[2]=u(e[2]),r},v3Max:function v3MaxFn(e,t,r){var u=r;void 0===u&&(u=new Float32Array(3)),debug.assert(debug.isVec3(e)),debug.assert(debug.isVec3(t)),debug.assert(debug.isMathType(u)&&debug.isVec3(u));var s=Math.max;return u[0]=s(e[0],t[0]),u[1]=s(e[1],t[1]),u[2]=s(e[2],t[2]),u},v3Min:function v3MinFn(e,t,r){var u=r;void 0===u&&(u=new Float32Array(3)),debug.assert(debug.isVec3(e)),debug.assert(debug.isVec3(t)),debug.assert(debug.isMathType(u)&&debug.isVec3(u));var s=Math.min;return u[0]=s(e[0],t[0]),u[1]=s(e[1],t[1]),u[2]=s(e[2],t[2]),u},v3Equal:function v3EqualFn(e,t,r){debug.assert(debug.isVec3(e)),debug.assert(debug.isVec3(t));var u=Math.abs;return void 0===r&&(r=this.precision),u(e[0]-t[0])<=r&&u(e[1]-t[1])<=r&&u(e[2]-t[2])<=r},v3MaskEqual:function v3MaskEqualFn(e,t){debug.assert(debug.isVec3(e)),debug.assert(debug.isVec3(t));var r=Math.abs,u=VMath.precision;return[r(e[0]-t[0])<=u,r(e[1]-t[1])<=u,r(e[2]-t[2])<=u]},v3MaskLess:function v3MaskLessFn(e,t){return debug.assert(debug.isVec3(e)),debug.assert(debug.isVec3(t)),[e[0]<t[0],e[1]<t[1],e[2]<t[2]]},v3MaskGreater:function v3MaskGreaterFn(e,t){return debug.assert(debug.isVec3(e)),debug.assert(debug.isVec3(t)),[e[0]>t[0],e[1]>t[1],e[2]>t[2]]},v3MaskGreaterEq:function v3MaskGreaterEqFn(e,t){return debug.assert(debug.isVec3(e)),debug.assert(debug.isVec3(t)),[e[0]>=t[0],e[1]>=t[1],e[2]>=t[2]]},v3MaskNot:function v3MaskNotFn(e){return debug.assert(debug.isVec3(e)),[!e[0],!e[1],!e[2]]},v3MaskOr:function v3MaskOrFn(e,t){return debug.assert(debug.isVec3(e)),debug.assert(debug.isVec3(t)),[e[0]||t[0],e[1]||t[1],e[2]||t[2]]},v3MaskAnd:function v3MaskAndFn(e,t){return debug.assert(debug.isVec3(e)),debug.assert(debug.isVec3(t)),[e[0]&&t[0],e[1]&&t[1],e[2]&&t[2]]},v3Select:function v3SelectFn(e,t,r,u){return void 0===u&&(u=new Float32Array(3)),debug.assert(debug.isVec3(t)),debug.assert(debug.isVec3(r)),debug.assert(debug.isMathType(u)&&debug.isVec3(u)),u[0]=e[0]?t[0]:r[0],u[1]=e[1]?t[1]:r[1],u[2]=e[2]?t[2]:r[2],u},v3ScalarBuild:function v3ScalarBuildFn(e,t){return void 0===t&&(t=new Float32Array(3)),debug.assert(debug.isNumber(e)),debug.assert(debug.isMathType(t)&&debug.isVec3(t)),t[0]=e,t[1]=e,t[2]=e,t},v3ScalarMax:function v3ScalarMaxFn(e,t,r){void 0===r&&(r=new Float32Array(3)),debug.assert(debug.isVec3(e)),debug.assert(debug.isNumber(t)),debug.assert(debug.isMathType(r)&&debug.isVec3(r));var u=Math.max;return r[0]=u(e[0],t),r[1]=u(e[1],t),r[2]=u(e[2],t),r},v3ScalarMin:function v3ScalarMinFn(e,t,r){void 0===r&&(r=new Float32Array(3)),debug.assert(debug.isVec3(e)),debug.assert(debug.isNumber(t)),debug.assert(debug.isMathType(r)&&debug.isVec3(r));var u=Math.min;return r[0]=u(e[0],t),r[1]=u(e[1],t),r[2]=u(e[2],t),r},v3ScalarAdd:function v3ScalarAddFn(e,t,r){return void 0===r&&(r=new Float32Array(3)),debug.assert(debug.isVec3(e)),debug.assert(debug.isNumber(t)),debug.assert(debug.isMathType(r)&&debug.isVec3(r)),r[0]=e[0]+t,r[1]=e[1]+t,r[2]=e[2]+t,r},v3ScalarSub:function v3ScalarSubFn(e,t,r){return void 0===r&&(r=new Float32Array(3)),debug.assert(debug.isVec3(e)),debug.assert(debug.isNumber(t)),debug.assert(debug.isMathType(r)&&debug.isVec3(r)),r[0]=e[0]-t,r[1]=e[1]-t,r[2]=e[2]-t,r},v3ScalarMul:function v3ScalarMulFn(e,t,r){var u=r;return void 0===u&&(u=new Float32Array(3)),debug.assert(debug.isVec3(e)),debug.assert(debug.isNumber(t)),debug.assert(debug.isMathType(u)&&debug.isVec3(u)),0===t?(u[0]=0,u[1]=0,u[2]=0):(u[0]=e[0]*t,u[1]=e[1]*t,u[2]=e[2]*t),u},v3AddScalarMul:function v3AddScalarMulFn(e,t,r,u){return void 0===u&&(u=new Float32Array(3)),debug.assert(debug.isVec3(e)),debug.assert(debug.isVec3(t)),debug.assert(debug.isNumber(r)),debug.assert(debug.isMathType(u)&&debug.isVec3(u)),u[0]=e[0]+t[0]*r,u[1]=e[1]+t[1]*r,u[2]=e[2]+t[2]*r,u},v3EqualScalarMask:function v3EqualScalarMaskFn(e,t){debug.assert(debug.isVec3(e)),debug.assert(debug.isNumber(t));var r=Math.abs,u=VMath.precision;return[r(e[0]-t)<=u,r(e[1]-t)<=u,r(e[2]-t)<=u]},v3LessScalarMask:function v3LessScalarMaskFn(e,t){return debug.assert(debug.isVec3(e)),debug.assert(debug.isNumber(t)),[e[0]<t,e[1]<t,e[2]<t]},v3GreaterScalarMask:function v3GreaterScalarMaskFn(e,t){return debug.assert(debug.isVec3(e)),debug.assert(debug.isNumber(t)),[e[0]>t,e[1]>t,e[2]>t]},v3GreaterEqScalarMask:function v3GreaterEqScalarMaskFn(e,t){return debug.assert(debug.isVec3(e)),debug.assert(debug.isNumber(t)),[e[0]>=t,e[1]>=t,e[2]>=t]},v3Lerp:function v3LerpFn(e,t,r,u){var s=u;return void 0===s&&(s=new Float32Array(3)),debug.assert(debug.isVec3(e)),debug.assert(debug.isVec3(t)),debug.assert(debug.isNumber(r)),debug.assert(debug.isMathType(s)&&debug.isVec3(s)),s[0]=e[0]+(t[0]-e[0])*r,s[1]=e[1]+(t[1]-e[1])*r,s[2]=e[2]+(t[2]-e[2])*r,s},v4BuildZero:function v4BuildZeroFn(e){var t=e;return void 0===t&&(t=new Float32Array(4)),debug.assert(debug.isMathType(t)&&debug.isVec4(t)),t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},v4BuildOne:function v4BuildOneFn(e){var t=e;return void 0===t&&(t=new Float32Array(4)),debug.assert(debug.isMathType(t)&&debug.isVec4(t)),t[0]=1,t[1]=1,t[2]=1,t[3]=1,t},v4Build:function v4BuildFn(e,t,r,u,s){var a=s;return void 0===a&&(a=new Float32Array(4)),debug.assert(debug.isNumber(e)),debug.assert(debug.isNumber(t)),debug.assert(debug.isNumber(r)),debug.assert(debug.isNumber(u)),debug.assert(debug.isMathType(a)&&debug.isVec4(a)),a[0]=e,a[1]=t,a[2]=r,a[3]=u,a},v4Copy:function v4CopyFn(e,t){var r=t;return void 0===r&&(r=new Float32Array(4)),debug.assert(debug.isMathType(r)&&debug.isVec4(r)),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r},v4Set:function v4SetFn(e,t){debug.assert(debug.isVec4(e)),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]},v4Neg:function v4NegFn(e,t){return void 0===t&&(t=new Float32Array(4)),debug.assert(debug.isVec4(e)),debug.assert(debug.isMathType(t)&&debug.isVec4(t)),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},v4Add:function v4AddFn(e,t,r){return void 0===r&&(r=new Float32Array(4)),debug.assert(debug.isVec4(e)),debug.assert(debug.isVec4(t)),debug.assert(debug.isMathType(r)&&debug.isVec4(r)),r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r[3]=e[3]+t[3],r},v4Add3:function v4Add3Fn(e,t,r,u){return void 0===u&&(u=new Float32Array(4)),debug.assert(debug.isVec4(e)),debug.assert(debug.isVec4(t)),debug.assert(debug.isVec4(r)),debug.assert(debug.isMathType(u)&&debug.isVec4(u)),u[0]=e[0]+t[0]+r[0],u[1]=e[1]+t[1]+r[1],u[2]=e[2]+t[2]+r[2],u[3]=e[3]+t[3]+r[3],u},v4Add4:function v4Add4Fn(e,t,r,u,s){return void 0===s&&(s=new Float32Array(4)),debug.assert(debug.isVec4(e)),debug.assert(debug.isVec4(t)),debug.assert(debug.isVec4(r)),debug.assert(debug.isVec4(u)),debug.assert(debug.isMathType(s)&&debug.isVec4(s)),s[0]=e[0]+t[0]+r[0]+u[0],s[1]=e[1]+t[1]+r[1]+u[1],s[2]=e[2]+t[2]+r[2]+u[2],s[3]=e[3]+t[3]+r[3]+u[3],s},v4Sub:function v4SubFn(e,t,r){return void 0===r&&(r=new Float32Array(4)),debug.assert(debug.isVec4(e)),debug.assert(debug.isVec4(t)),debug.assert(debug.isMathType(r)&&debug.isVec4(r)),r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r[3]=e[3]-t[3],r},v4Mul:function v4MulFn(e,t,r){return void 0===r&&(r=new Float32Array(4)),debug.assert(debug.isVec4(e)),debug.assert(debug.isVec4(t)),debug.assert(debug.isMathType(r)&&debug.isVec4(r)),r[0]=e[0]*t[0],r[1]=e[1]*t[1],r[2]=e[2]*t[2],r[3]=e[3]*t[3],r},v4MulAdd:function v4MulAddFn(e,t,r,u){return void 0===u&&(u=new Float32Array(4)),debug.assert(debug.isVec4(e)),debug.assert(debug.isVec4(t)),debug.assert(debug.isVec4(r)),debug.assert(debug.isMathType(u)&&debug.isVec4(u)),u[0]=e[0]*t[0]+r[0],u[1]=e[1]*t[1]+r[1],u[2]=e[2]*t[2]+r[2],u[3]=e[3]*t[3]+r[3],u},v4Dot:function v4DotFn(e,t){return debug.assert(debug.isVec4(e)),debug.assert(debug.isVec4(t)),e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},v4LengthSq:function v4LengthSqFn(e){debug.assert(debug.isVec4(e));var t=e[0],r=e[1],u=e[2],s=e[3];return t*t+r*r+u*u+s*s},v4Length:function v4LengthFn(e){debug.assert(debug.isVec4(e));var t=e[0],r=e[1],u=e[2],s=e[3];return Math.sqrt(t*t+r*r+u*u+s*s)},v4DistanceSq:function v4DistanceSqFn(e,t){debug.assert(debug.isVec4(e));var r=t[0]-e[0],u=t[1]-e[1],s=t[2]-e[2],a=t[3]-e[3];return r*r+u*u+s*s+a*a},v4Distance:function v4DistanceFn(e,t){debug.assert(debug.isVec4(e));var r=t[0]-e[0],u=t[1]-e[1],s=t[2]-e[2],a=t[3]-e[3];return Math.sqrt(r*r+u*u+s*s+a*a)},v4Reciprocal:function v4ReciprocalFn(e,t){void 0===t&&(t=new Float32Array(4)),debug.assert(debug.isVec4(e)),debug.assert(debug.isMathType(t)&&debug.isVec4(t));var r=VMath.reciprocal;return t[0]=r(e[0]),t[1]=r(e[1]),t[2]=r(e[2]),t[3]=r(e[3]),t},v4Normalize:function v4NormalizeFn(e,t){void 0===t&&(t=new Float32Array(4)),debug.assert(debug.isVec4(e)),debug.assert(debug.isMathType(t)&&debug.isVec4(t));var r=e[0],u=e[1],s=e[2],a=e[3],n=r*r+u*u+s*s+a*a;if(0<n){var i=1/Math.sqrt(n);t[0]=r*i,t[1]=u*i,t[2]=s*i,t[3]=a*i}else t[0]=0,t[1]=0,t[2]=0,t[3]=0;return t},v4Abs:function v4AbsFn(e,t){void 0===t&&(t=new Float32Array(4)),debug.assert(debug.isVec4(e)),debug.assert(debug.isMathType(t)&&debug.isVec4(t));var r=Math.abs;return t[0]=r(e[0]),t[1]=r(e[1]),t[2]=r(e[2]),t[3]=r(e[3]),t},v4Max:function v4MaxFn(e,t,r){void 0===r&&(r=new Float32Array(4)),debug.assert(debug.isVec4(e)),debug.assert(debug.isVec4(t)),debug.assert(debug.isMathType(r)&&debug.isVec4(r));var u=Math.max;return r[0]=u(e[0],t[0]),r[1]=u(e[1],t[1]),r[2]=u(e[2],t[2]),r[3]=u(e[3],t[3]),r},v4Min:function v4MinFn(e,t,r){void 0===r&&(r=new Float32Array(4)),debug.assert(debug.isVec4(e)),debug.assert(debug.isVec4(t)),debug.assert(debug.isMathType(r)&&debug.isVec4(r));var u=Math.min;return r[0]=u(e[0],t[0]),r[1]=u(e[1],t[1]),r[2]=u(e[2],t[2]),r[3]=u(e[3],t[3]),r},v4Equal:function v4EqualFn(e,t,r){var u=Math.abs;return void 0===r&&(r=this.precision),debug.assert(debug.isVec4(e)),debug.assert(debug.isVec4(t)),debug.assert(debug.isNumber(r)),u(e[0]-t[0])<=r&&u(e[1]-t[1])<=r&&u(e[2]-t[2])<=r&&u(e[3]-t[3])<=r},v4MaskEqual:function v4MaskEqualFn(e,t){debug.assert(debug.isVec4(e)),debug.assert(debug.isVec4(t));var r=Math.abs,u=VMath.precision;return[r(e[0]-t[0])<=u,r(e[1]-t[1])<=u,r(e[2]-t[2])<=u,r(e[3]-t[3])<=u]},v4MaskLess:function v4MaskLessFn(e,t){return debug.assert(debug.isVec4(e)),debug.assert(debug.isVec4(t)),[e[0]<t[0],e[1]<t[1],e[2]<t[2],e[3]<t[3]]},v4MaskGreater:function v4MaskGreaterFn(e,t){return debug.assert(debug.isVec4(e)),debug.assert(debug.isVec4(t)),[e[0]>t[0],e[1]>t[1],e[2]>t[2],e[3]>t[3]]},v4MaskGreaterEq:function v4MaskGreaterEqFn(e,t){return debug.assert(debug.isVec4(e)),debug.assert(debug.isVec4(t)),[e[0]>=t[0],e[1]>=t[1],e[2]>=t[2],e[3]>=t[3]]},v4MaskNot:function v4MaskNotFn(e){return debug.assert(debug.isVec4(e)),[!e[0],!e[1],!e[2],!e[3]]},v4MaskOr:function v4MaskOrFn(e,t){return debug.assert(debug.isVec4(e)),debug.assert(debug.isVec4(t)),[e[0]||t[0],e[1]||t[1],e[2]||t[2],e[3]||t[3]]},v4MaskAnd:function v4MaskAndFn(e,t){return debug.assert(debug.isVec4(e)),debug.assert(debug.isVec4(t)),[e[0]&&t[0],e[1]&&t[1],e[2]&&t[2],e[3]&&t[3]]},v4Many:function v4ManyFn(e){return e[0]||e[1]||e[2]||e[3]},v4MaskAll:function v4MaskAllFn(e){return e[0]&&e[1]&&e[2]&&e[3]},v4Select:function v4SelectFn(e,t,r,u){return void 0===u&&(u=new Float32Array(4)),debug.assert(debug.isVec4(t)),debug.assert(debug.isVec4(r)),debug.assert(debug.isMathType(u)&&debug.isVec4(u)),u[0]=e[0]?t[0]:r[0],u[1]=e[1]?t[1]:r[1],u[2]=e[2]?t[2]:r[2],u[3]=e[3]?t[3]:r[3],u},v4ScalarBuild:function v4ScalarBuildFn(e,t){return void 0===t&&(t=new Float32Array(4)),debug.assert(debug.isNumber(e)),debug.assert(debug.isMathType(t)&&debug.isVec4(t)),t[0]=e,t[1]=e,t[2]=e,t[3]=e,t},v4ScalarMax:function v4ScalarMaxFn(e,t,r){void 0===r&&(r=new Float32Array(4)),debug.assert(debug.isVec4(e)),debug.assert(debug.isNumber(t)),debug.assert(debug.isMathType(r)&&debug.isVec4(r));var u=Math.max;return r[0]=u(e[0],t),r[1]=u(e[1],t),r[2]=u(e[2],t),r[3]=u(e[3],t),r},v4ScalarMin:function v4ScalarMinFn(e,t,r){void 0===r&&(r=new Float32Array(4)),debug.assert(debug.isVec4(e)),debug.assert(debug.isNumber(t)),debug.assert(debug.isMathType(r)&&debug.isVec4(r));var u=Math.min;return r[0]=u(e[0],t),r[1]=u(e[1],t),r[2]=u(e[2],t),r[3]=u(e[3],t),r},v4ScalarAdd:function v4ScalarAddFn(e,t,r){return void 0===r&&(r=new Float32Array(4)),debug.assert(debug.isVec4(e)),debug.assert(debug.isNumber(t)),debug.assert(debug.isMathType(r)&&debug.isVec4(r)),r[0]=e[0]+t,r[1]=e[1]+t,r[2]=e[2]+t,r[3]=e[3]+t,r},v4ScalarSub:function v4ScalarSubFn(e,t,r){return void 0===r&&(r=new Float32Array(4)),debug.assert(debug.isVec4(e)),debug.assert(debug.isNumber(t)),debug.assert(debug.isMathType(r)&&debug.isVec4(r)),r[0]=e[0]-t,r[1]=e[1]-t,r[2]=e[2]-t,r[3]=e[3]-t,r},v4ScalarMul:function v4ScalarMulFn(e,t,r){return debug.assert(debug.isVec4(e)),debug.assert(debug.isNumber(t)),0===t?VMath.v4BuildZero(r):(void 0===r&&(r=new Float32Array(4)),debug.assert(debug.isMathType(r)&&debug.isVec4(r)),r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r)},v4AddScalarMul:function v4AddScalarMulFn(e,t,r,u){return void 0===u&&(u=new Float32Array(4)),debug.assert(debug.isVec4(e)),debug.assert(debug.isVec4(t)),debug.assert(debug.isNumber(r)),debug.assert(debug.isMathType(u)&&debug.isVec4(u)),u[0]=e[0]+t[0]*r,u[1]=e[1]+t[1]*r,u[2]=e[2]+t[2]*r,u[3]=e[3]+t[3]*r,u},v4ScalarEqual:function v4ScalarEqualFn(e,t){debug.assert(debug.isVec4(e)),debug.assert(debug.isNumber(t));var r=Math.abs,u=VMath.precision;return r(e[0]-t)<=u&&r(e[1]-t)<=u&&r(e[2]-t)<=u&&r(e[3]-t)<=u},v4EqualScalarMask:function v4EqualScalarMaskFn(e,t){debug.assert(debug.isVec4(e)),debug.assert(debug.isNumber(t));var r=Math.abs,u=VMath.precision;return[r(e[0]-t)<=u,r(e[1]-t)<=u,r(e[2]-t)<=u,r(e[3]-t)<=u]},v4LessScalarMask:function v4LessScalarMaskFn(e,t){return debug.assert(debug.isVec4(e)),debug.assert(debug.isNumber(t)),[e[0]<t,e[1]<t,e[2]<t,e[3]<t]},v4GreaterScalarMask:function v4GreaterScalarMaskFn(e,t){return debug.assert(debug.isVec4(e)),debug.assert(debug.isNumber(t)),[e[0]>t,e[1]>t,e[2]>t,e[3]>t]},v4GreaterEqScalarMask:function v4GreaterEqScalarMaskFn(e,t){return debug.assert(debug.isVec4(e)),debug.assert(debug.isNumber(t)),[e[0]>=t,e[1]>=t,e[2]>=t,e[3]>=t]},v4Lerp:function v4LerpFn(e,t,r,u){return void 0===u&&(u=new Float32Array(4)),debug.assert(debug.isVec4(e)),debug.assert(debug.isVec4(t)),debug.assert(debug.isNumber(r)),debug.assert(debug.isMathType(u)&&debug.isVec4(u)),u[0]=e[0]+(t[0]-e[0])*r,u[1]=e[1]+(t[1]-e[1])*r,u[2]=e[2]+(t[2]-e[2])*r,u[3]=e[3]+(t[3]-e[3])*r,u},aabbBuild:function aabbBuildFn(e,t,r,u,s,a,n){var i=n;return void 0===i&&(i=new Float32Array(6)),debug.assert(debug.isNumber(e)),debug.assert(debug.isNumber(t)),debug.assert(debug.isNumber(r)),debug.assert(debug.isNumber(u)),debug.assert(debug.isNumber(s)),debug.assert(debug.isNumber(a)),debug.assert(debug.isMathType(i)&&debug.isAABB(i)),i[0]=e,i[1]=t,i[2]=r,i[3]=u,i[4]=s,i[5]=a,i},aabbBuildEmpty:function aabbBuildEmptyFn(e){var t=this.FLOAT_MAX,r=e;return void 0===r&&(r=new Float32Array(6)),debug.assert(debug.isMathType(r)&&debug.isAABB(r)),r[0]=t,r[1]=t,r[2]=t,r[3]=-t,r[4]=-t,r[5]=-t,r},aabbCopy:function aabbCopyFn(e,t){var r=t;return void 0===r&&(r=new Float32Array(6)),debug.assert(debug.isMathType(r)&&debug.isAABB(r)),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r},aabbSet:function aabbSet(e,t){debug.assert(debug.isMathType(e)&&debug.isAABB(e)),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5]},aabbIsEmpty:function aabbIsEmptyFn(e){return e[0]>e[3]},aabbMin:function aabbMinFn(e,t){return debug.assert(debug.isAABB(e)),void 0===t?e.slice(0,3):(debug.assert(debug.isMathType(t)&&debug.isVec3(t)),t[0]=e[0],t[1]=e[1],t[2]=e[2],t)},aabbMax:function aabbMaxFn(e,t){return debug.assert(debug.isAABB(e)),void 0===t?e.slice(3,6):(debug.assert(debug.isMathType(t)&&debug.isVec3(t)),t[0]=e[3],t[1]=e[4],t[2]=e[5],t)},aabbGetCenterAndHalf:function aabbGetCenterAndHalfFn(e,t,r){debug.assert(debug.isAABB(e)),debug.assert(debug.isVec3(t)),debug.assert(debug.isVec3(r));var u=.5*(e[0]+e[3]),s=.5*(e[1]+e[4]),a=.5*(e[2]+e[5]);t[0]=u,t[1]=s,t[2]=a,r[0]=e[3]-u,r[1]=e[4]-s,r[2]=e[5]-a},aabbIsInsidePlanes:function aabbIsInsidePlanesFn(e,t){debug.assert(debug.isAABB(e));var r=t.length,u=0;do{var s=t[u],a=s[0],n=s[1],i=s[2];if(a*(a<0?e[0]:e[3])+n*(n<0?e[1]:e[4])+i*(i<0?e[2]:e[5])<s[3])return!1;u+=1}while(u<r);return!0},aabbIsFullyInsidePlanes:function aabbIsFullyInsidePlanesFn(e,t){debug.assert(debug.isAABB(e));var r=t.length,u=0;do{var s=t[u],a=s[0],n=s[1],i=s[2];if(a*(0<a?e[0]:e[3])+n*(0<n?e[1]:e[4])+i*(0<i?e[2]:e[5])<s[3])return!1;u+=1}while(u<r);return!0},aabbUnion:function aabbUnionFn(e,t,r){return void 0===r&&(r=new Float32Array(6)),debug.assert(debug.isAABB(e)),debug.assert(debug.isAABB(t)),debug.assert(debug.isMathType(r)&&debug.isAABB(r)),r[0]=e[0]<t[0]?e[0]:t[0],r[1]=e[1]<t[1]?e[1]:t[1],r[2]=e[2]<t[2]?e[2]:t[2],r[3]=e[3]>t[3]?e[3]:t[3],r[4]=e[4]>t[4]?e[4]:t[4],r[5]=e[5]>t[5]?e[5]:t[5],r},aabbUnionArray:function aabbUnionArrayFn(e,t){void 0===t&&(t=new Float32Array(6)),debug.assert(debug.isMathType(t)&&debug.isAABB(t)),debug.assert(0<e.length),VMath.aabbCopy(e[0],t);for(var r=e.length,u=1;u<r;u+=1){var s=e[u];debug.assert(debug.isAABB(s)),t[0]=t[0]<s[0]?t[0]:s[0],t[1]=t[1]<s[1]?t[1]:s[1],t[2]=t[2]<s[2]?t[2]:s[2],t[3]=t[3]>s[3]?t[3]:s[3],t[4]=t[4]>s[4]?t[4]:s[4],t[5]=t[5]>s[5]?t[5]:s[5]}return t},aabbAddPoints:function aabbAddPointFn(e,t){var r;debug.assert(debug.isAABB(e));var u,s,a,n,i=t.length,o=e[0],d=e[1],b=e[2],g=e[3],c=e[4],l=e[5];for(r=0;r<i;r+=1)u=t[r],debug.assert(3===u.length),o=o<(s=u[0])?o:s,d=d<(a=u[1])?d:a,b=b<(n=u[2])?b:n,g=s<g?g:s,c=a<c?c:a,l=n<l?l:n;e[0]=o,e[1]=d,e[2]=b,e[3]=g,e[4]=c,e[5]=l},aabbTransform:function aabbTransformFn(e,t,r){void 0===r&&(r=new Float32Array(6)),debug.assert(debug.isAABB(e)),debug.assert(debug.isMtx43(t)),debug.assert(debug.isMathType(r)&&debug.isAABB(r));var u=.5*(e[0]+e[3]),s=.5*(e[1]+e[4]),a=.5*(e[2]+e[5]),n=e[3]-u,i=e[4]-s,o=e[5]-a,d=t[0],b=t[1],g=t[2],c=t[3],l=t[4],v=t[5],p=t[6],f=t[7],h=t[8],y=t[9]+(d*u+c*s+p*a),M=t[10]+(b*u+l*s+f*a),F=t[11]+(g*u+v*s+h*a),m=Math.abs,A=m(d)*n+m(c)*i+m(p)*o,S=m(b)*n+m(l)*i+m(f)*o,V=m(g)*n+m(v)*i+m(h)*o;return r[0]=y-A,r[1]=M-S,r[2]=F-V,r[3]=y+A,r[4]=M+S,r[5]=F+V,r},aabbIntercept:function aabbInterceptFn(e,t,r){return void 0===r&&(r=new Float32Array(6)),debug.assert(debug.isAABB(e)),debug.assert(debug.isAABB(t)),debug.assert(debug.isMathType(r)&&debug.isAABB(r)),r[0]=e[0]>t[0]?e[0]:t[0],r[1]=e[1]>t[1]?e[1]:t[1],r[2]=e[2]>t[2]?e[2]:t[2],r[3]=e[3]<t[3]?e[3]:t[3],r[4]=e[4]<t[4]?e[4]:t[4],r[5]=e[5]<t[5]?e[5]:t[5],r},aabbOverlaps:function aabbOverlapsFn(e,t){return debug.assert(debug.isAABB(e)),debug.assert(debug.isAABB(t)),e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]&&e[3]>=t[0]&&e[4]>=t[1]&&e[5]>=t[2]},aabbSphereOverlaps:function aabbSphereOverlapsFn(e,t,r){debug.assert(debug.isAABB(e)),debug.assert(debug.isVec3(t)),debug.assert(debug.isNumber(r));var u,s=t[0],a=t[1],n=t[2],i=r*r,o=e[0],d=e[1],b=e[2],g=e[3],c=e[4],l=e[5],v=0;return s<o?v+=(u=o-s)*u:g<s&&(v+=(u=s-g)*u),a<d?v+=(u=d-a)*u:c<a&&(v+=(u=a-c)*u),n<b?v+=(u=b-n)*u:l<n&&(v+=(u=n-l)*u),v<=i},aabbIsInside:function aabbIsInsideFn(e,t){return debug.assert(debug.isAABB(e)),debug.assert(debug.isAABB(t)),e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[3]<=t[3]&&e[4]<=t[4]&&e[5]<=t[5]},aabbTestInside:function aabbTestInsideFn(e,t){return debug.assert(debug.isAABB(e)),debug.assert(debug.isAABB(t)),e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]&&e[3]>=t[0]&&e[4]>=t[1]&&e[5]>=t[2]?e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[3]<=t[3]&&e[4]<=t[4]&&e[5]<=t[5]?2:1:0},m33BuildIdentity:function m33BuildIdentityFn(e){var t=e;return void 0===t&&(t=new Float32Array(9)),debug.assert(debug.isMathType(t)&&debug.isMtx33(t)),t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},m33Build:function m33BuildFn(e,t,r,u,s,a,n,i,o,d){var b;return"number"==typeof s?(debug.assert("number"==typeof o),void 0===(b=d)&&(b=new Float32Array(9)),debug.assert(debug.isMathType(b)&&debug.isMtx33(b)),b[0]=e,b[1]=t,b[2]=r,b[3]=u,b[4]=s,b[5]=a,b[6]=n,b[7]=i,b[8]=o):(debug.assert(3<=e.length&&3<=t.length&&3<=r.length),void 0===(b=u)&&(b=new Float32Array(9)),debug.assert(debug.isMathType(b)&&debug.isMtx33(b)),b[0]=e[0],b[1]=e[1],b[2]=e[2],b[3]=t[0],b[4]=t[1],b[5]=t[2],b[6]=r[0],b[7]=r[1],b[8]=r[2]),b},m33Copy:function m33CopyFn(e,t){var r=t;return void 0===r&&(r=new Float32Array(9)),debug.assert(debug.isMathType(r)&&debug.isMtx33(r)),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r},m33FromAxisRotation:function m33FromAxisRotationFn(e,t,r){var u=r;void 0===u&&(u=new Float32Array(9)),debug.assert(debug.isVec3(e)||debug.isVec4(e)),debug.assert(debug.isNumber(t)),debug.assert(debug.isMathType(u)&&debug.isMtx33(u));var s=Math.sin(t),a=Math.cos(t),n=1-a,i=e[0],o=e[1],d=e[2],b=n*i,g=n*o,c=n*d,l=s*i,v=s*o,p=s*d;return u[0]=b*i+a,u[1]=b*o-p,u[2]=b*d+v,u[3]=g*i+p,u[4]=g*o+a,u[5]=g*d-l,u[6]=c*i-v,u[7]=c*o+l,u[8]=c*d+a,u},m33FromQuat:function m33FromQuatFn(e,t){var r=t;void 0===r&&(r=new Float32Array(9)),debug.assert(debug.isQuat(e)),debug.assert(debug.isMathType(r)&&debug.isMtx33(r));var u=e[0],s=e[1],a=e[2],n=e[3],i=2*u*u,o=2*s*s,d=2*a*a,b=2*u*s,g=2*a*n,c=2*u*a,l=2*s*n,v=2*s*a,p=2*u*n;return r[0]=1-o-d,r[1]=b-g,r[2]=c+l,r[3]=b+g,r[4]=1-i-d,r[5]=v-p,r[6]=c-l,r[7]=v+p,r[8]=1-i-o,r},m33Right:function m33RightFn(e,t){var r=t;return void 0===r&&(r=new Float32Array(3)),debug.assert(debug.isMtx33(e)),debug.assert(debug.isMathType(r)&&debug.isVec3(r)),r[0]=e[0],r[1]=e[1],r[2]=e[2],r},m33Up:function m33UpFn(e,t){var r=t;return void 0===r&&(r=new Float32Array(3)),debug.assert(debug.isMtx33(e)),debug.assert(debug.isMathType(r)&&debug.isVec3(r)),r[0]=e[3],r[1]=e[4],r[2]=e[5],r},m33At:function m33AtFn(e,t){var r=t;return void 0===r&&(r=new Float32Array(3)),debug.assert(debug.isMtx33(e)),debug.assert(debug.isMathType(r)&&debug.isVec3(r)),r[0]=e[6],r[1]=e[7],r[2]=e[8],r},m33SetRight:function m33SetRightFn(e,t){debug.assert(debug.isMtx33(e)),debug.assert(debug.isVec3(t)||debug.isVec4(t)),e[0]=t[0],e[1]=t[1],e[2]=t[2]},m33SetUp:function m33SetUpFn(e,t){debug.assert(debug.isMtx33(e)),debug.assert(debug.isVec3(t)||debug.isVec4(t)),e[3]=t[0],e[4]=t[1],e[5]=t[2]},m33SetAt:function m33SetAtFn(e,t){debug.assert(debug.isMtx33(e)),debug.assert(debug.isVec3(t)||debug.isVec4(t)),e[6]=t[0],e[7]=t[1],e[8]=t[2]},m33Transpose:function m33TransposeFn(e,t){void 0===t&&(t=new Float32Array(9)),debug.assert(debug.isMtx33(e)),debug.assert(debug.isMathType(t)&&debug.isMtx33(t));var r=e[0],u=e[1],s=e[2],a=e[3],n=e[4],i=e[5],o=e[6],d=e[7],b=e[8];return t[0]=r,t[1]=a,t[2]=o,t[3]=u,t[4]=n,t[5]=d,t[6]=s,t[7]=i,t[8]=b,t},m33Determinant:function m33DeterminantFn(e){debug.assert(debug.isMtx33(e));var t=e[0],r=e[1],u=e[2],s=e[3],a=e[4],n=e[5],i=e[6],o=e[7],d=e[8];return t*(a*d-n*o)+r*(n*i-s*d)+u*(s*o-a*i)},m33Inverse:function m33InverseFn(e,t){void 0===t&&(t=new Float32Array(9)),debug.assert(debug.isMtx33(e)),debug.assert(debug.isMathType(t)&&debug.isMtx33(t));var r=e[0],u=e[1],s=e[2],a=e[3],n=e[4],i=e[5],o=e[6],d=e[7],b=e[8],g=n*b-i*d,c=i*o-a*b,l=a*d-n*o,v=r*g+u*c+s*l;if(0===v)t[0]=t[1]=t[2]=0,t[3]=t[4]=t[5]=0,t[6]=t[7]=t[8]=0;else{var p=1/v;t[0]=g*p,t[1]=(d*s-b*u)*p,t[2]=(u*i-s*n)*p,t[3]=c*p,t[4]=(b*r-o*s)*p,t[5]=(a*s-r*i)*p,t[6]=l*p,t[7]=(o*u-d*r)*p,t[8]=(r*n-a*u)*p}return t},m33InverseTranspose:function m33InverseTransposeFn(e,t){var r=t;void 0===r&&(r=new Float32Array(9)),debug.assert(debug.isMtx33(e)||debug.isMtx43(e)),debug.assert(debug.isMathType(r)&&(debug.isMtx33(r)||debug.isMtx43(r)));var u=e[0],s=e[1],a=e[2],n=e[3],i=e[4],o=e[5],d=e[6],b=e[7],g=e[8],c=i*g-o*b,l=o*d-n*g,v=n*b-i*d,p=u*c+s*l+a*v;if(0===p)r[0]=r[1]=r[2]=0,r[3]=r[4]=r[5]=0,r[6]=r[7]=r[8]=0;else{var f=1/p;r[0]=c*f,r[3]=(b*a-g*s)*f,r[6]=(s*o-a*i)*f,r[1]=l*f,r[4]=(g*u-d*a)*f,r[7]=(n*a-u*o)*f,r[2]=v*f,r[5]=(d*s-b*u)*f,r[8]=(u*i-n*s)*f}return r},m33Mul:function m33MulFn(e,t,r){var u=e[0],s=e[1],a=e[2],n=e[3],i=e[4],o=e[5],d=e[6],b=e[7],g=e[8],c=t[0],l=t[1],v=t[2],p=t[3],f=t[4],h=t[5],y=t[6],M=t[7],F=t[8];return void 0===r&&(r=new Float32Array(9)),debug.assert(debug.isMathType(r)&&debug.isMtx33(r)),r[0]=c*u+p*s+y*a,r[1]=l*u+f*s+M*a,r[2]=v*u+h*s+F*a,r[3]=c*n+p*i+y*o,r[4]=l*n+f*i+M*o,r[5]=v*n+h*i+F*o,r[6]=c*d+p*b+y*g,r[7]=l*d+f*b+M*g,r[8]=v*d+h*b+F*g,r},m33Transform:function m33TransformFn(e,t,r){void 0===r&&(r=new Float32Array(3)),debug.assert(debug.isMtx33(e)),debug.assert(debug.isVec3(t)||debug.isVec4(t)),debug.assert(debug.isMathType(r)&&debug.isVec3(r));var u=t[0],s=t[1],a=t[2];return r[0]=e[0]*u+e[3]*s+e[6]*a,r[1]=e[1]*u+e[4]*s+e[7]*a,r[2]=e[2]*u+e[5]*s+e[8]*a,r},m33Equal:function m33EqualFn(e,t,r){var u=Math.abs;return void 0===r&&(r=this.precision),debug.assert(debug.isMtx33(e)),debug.assert(debug.isMtx33(t)),debug.assert(debug.isNumber(r)),u(e[0]-t[0])<=r&&u(e[1]-t[1])<=r&&u(e[2]-t[2])<=r&&u(e[3]-t[3])<=r&&u(e[4]-t[4])<=r&&u(e[5]-t[5])<=r&&u(e[6]-t[6])<=r&&u(e[7]-t[7])<=r&&u(e[8]-t[8])<=r},m33MulM43:function m33MulM43Fn(e,t,r){void 0===r&&(r=new Float32Array(12)),debug.assert(debug.isMtx33(e)),debug.assert(debug.isMtx43(t)),debug.assert(debug.isMathType(r)&&debug.isMtx43(r));var u=e[0],s=e[1],a=e[2],n=e[3],i=e[4],o=e[5],d=e[6],b=e[7],g=e[8],c=t[0],l=t[1],v=t[2],p=t[3],f=t[4],h=t[5],y=t[6],M=t[7],F=t[8];return r[0]=c*u+p*s+y*a,r[1]=l*u+f*s+M*a,r[2]=v*u+h*s+F*a,r[3]=c*n+p*i+y*o,r[4]=l*n+f*i+M*o,r[5]=v*n+h*i+F*o,r[6]=c*d+p*b+y*g,r[7]=l*d+f*b+M*g,r[8]=v*d+h*b+F*g,r[9]=t[9],r[10]=t[10],r[11]=t[11],r},m33MulM44:function m33MulM44Fn(e,t,r){void 0===r&&(r=new Float32Array(16)),debug.assert(debug.isMtx33(e)),debug.assert(debug.isMtx44(t)),debug.assert(debug.isMathType(r)&&debug.isMtx44(r));var u=e[0],s=e[1],a=e[2],n=e[3],i=e[4],o=e[5],d=e[6],b=e[7],g=e[8],c=t[0],l=t[1],v=t[2],p=t[3],f=t[4],h=t[5],y=t[6],M=t[7],F=t[8],m=t[9],A=t[10],S=t[11];return r[0]=c*u+f*s+F*a,r[1]=l*u+h*s+m*a,r[2]=v*u+y*s+A*a,r[3]=p*u+M*s+S*a,r[4]=c*n+f*i+F*o,r[5]=l*n+h*i+m*o,r[6]=v*n+y*i+A*o,r[7]=p*n+M*i+S*o,r[8]=c*d+f*b+F*g,r[9]=l*d+h*b+m*g,r[10]=v*d+y*b+A*g,r[11]=p*d+M*b+S*g,r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r},m33ScalarAdd:function m33ScalarAddFn(e,t,r){void 0===r&&(r=new Float32Array(9)),debug.assert(debug.isMtx33(e)),debug.assert(debug.isNumber(t)),debug.assert(debug.isMathType(r)&&debug.isMtx33(r));for(var u=0;u<9;u+=1)r[u]=e[u]+t;return r},m33ScalarSub:function m33ScalarSubFn(e,t,r){void 0===r&&(r=new Float32Array(9)),debug.assert(debug.isMtx33(e)),debug.assert(debug.isNumber(t)),debug.assert(debug.isMathType(r)&&debug.isMtx33(r));for(var u=0;u<9;u+=1)r[u]=e[u]-t;return r},m33ScalarMul:function m33ScalarMulFn(e,t,r){void 0===r&&(r=new Float32Array(9)),debug.assert(debug.isMtx33(e)),debug.assert(debug.isNumber(t)),debug.assert(debug.isMathType(r)&&debug.isMtx33(r));for(var u=0;u<9;u+=1)r[u]=e[u]*t;return r},m34BuildIdentity:function m34BuildIdentityFn(e){var t=e;return void 0===t&&(t=new Float32Array(12)),debug.assert(debug.isMathType(t)&&debug.isMtx34(t)),t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t},m34Pos:function m34PosFn(e,t){return void 0===t&&(t=new Float32Array(3)),debug.assert(debug.isMtx34(e)),debug.assert(debug.isMathType(t)&&debug.isVec3(t)),t[0]=e[3],t[1]=e[7],t[2]=e[11],t},m34Scale:function m34ScaleFn(e,t,r){void 0===r&&(r=new Float32Array(12)),debug.assert(debug.isMtx34(e)),debug.assert(debug.isVec3(t)),debug.assert(debug.isMathType(r)&&debug.isMtx34(r));var u=t[0],s=t[1],a=t[2];return r[0]=e[0]*u,r[1]=e[1]*u,r[2]=e[2]*u,r[3]=e[3],r[4]=e[4]*s,r[5]=e[5]*s,r[6]=e[6]*s,r[7]=e[7],r[8]=e[8]*a,r[9]=e[9]*a,r[10]=e[10]*a,r[11]=e[11],r},m43BuildIdentity:function m43BuildIdentityFn(e){var t=e;return void 0===t&&(t=new Float32Array(12)),debug.assert(debug.isMathType(t)&&debug.isMtx43(t)),t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t[9]=0,t[10]=0,t[11]=0,t},m43Build:function m43BuildFn(e,t,r,u,s,a,n,i,o,d,b,g,c){var l;return"number"==typeof a?(debug.assert("number"==typeof g),void 0===(l=c)&&(l=new Float32Array(12)),debug.assert(debug.isMathType(l)&&debug.isMtx43(l)),l[0]=e,l[1]=t,l[2]=r,l[3]=u,l[4]=s,l[5]=a,l[6]=n,l[7]=i,l[8]=o,l[9]=d,l[10]=b,l[11]=g):(debug.assert(3<=e.length&&3<=t.length&&3<=r.length&&3<=u.length),void 0===(l=s)&&(l=new Float32Array(12)),debug.assert(debug.isMathType(l)&&debug.isMtx43(l)),l[0]=e[0],l[1]=e[1],l[2]=e[2],l[3]=t[0],l[4]=t[1],l[5]=t[2],l[6]=r[0],l[7]=r[1],l[8]=r[2],l[9]=u[0],l[10]=u[1],l[11]=u[2]),l},m43BuildTranslation:function m43BuildTranslationFn(e,t,r,u){var s;return"number"==typeof r?(void 0===(s=u)&&(s=new Float32Array(12)),debug.assert(debug.isMathType(s)&&debug.isMtx43(s)),s[9]=e,s[10]=t,s[11]=r):(debug.assert(debug.isVec3(e)),void 0===(s=t)&&(s=new Float32Array(12)),debug.assert(debug.isMathType(s)&&debug.isMtx43(s)),s[9]=e[0],s[10]=e[1],s[11]=e[2]),s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=1,s[5]=0,s[6]=0,s[7]=0,s[8]=1,s},m43Copy:function m43CopyFn(e,t){var r=t;return void 0===r&&(r=new Float32Array(12)),debug.assert(debug.isMathType(r)&&debug.isMtx43(r)),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r},m43FromM33V3:function m43FromM33V3Fn(e,t,r){var u=r;return void 0===u&&(u=new Float32Array(12)),debug.assert(debug.isMtx33(e)),debug.assert(debug.isVec3(t)),debug.assert(debug.isMathType(u)&&debug.isMtx43(u)),u[0]=e[0],u[1]=e[1],u[2]=e[2],u[3]=e[3],u[4]=e[4],u[5]=e[5],u[6]=e[6],u[7]=e[7],u[8]=e[8],u[9]=t[0],u[10]=t[1],u[11]=t[2],u},m43FromAxisRotation:function m43FromAxisRotationFn(e,t,r){var u=Math.sin(t),s=Math.cos(t),a=1-s,n=e[0],i=e[1],o=e[2],d=a*n,b=a*i,g=a*o,c=u*n,l=u*i,v=u*o,p=r;return void 0===p&&(p=new Float32Array(12)),debug.assert(debug.isVec3(e)||debug.isVec4(e)),debug.assert(debug.isNumber(t)),debug.assert(debug.isMathType(p)&&debug.isMtx43(p)),p[0]=d*n+s,p[1]=d*i-v,p[2]=d*o+l,p[3]=b*n+v,p[4]=b*i+s,p[5]=b*o-c,p[6]=g*n-l,p[7]=g*i+c,p[8]=g*o+s,p[9]=0,p[10]=0,p[11]=0,p},m43FromQuatPos:function m43FromQuatPosFn(e,t){var r=t;void 0===r&&(r=new Float32Array(12)),debug.assert(debug.isQuatPos(e)),debug.assert(debug.isMathType(r)&&debug.isMtx43(r));var u=e[0],s=e[1],a=e[2],n=e[3],i=e[4],o=e[5],d=e[6],b=2*u*u,g=2*s*s,c=2*a*a,l=2*u*s,v=2*a*n,p=2*u*a,f=2*s*n,h=2*s*a,y=2*u*n;return r[0]=1-g-c,r[1]=l-v,r[2]=p+f,r[3]=l+v,r[4]=1-b-c,r[5]=h-y,r[6]=p-f,r[7]=h+y,r[8]=1-b-g,r[9]=i,r[10]=o,r[11]=d,r},m43FromRTS:function m43FromRTSFn(e,t,r,u){var s=e[0],a=e[1],n=e[2],i=e[3],o=2*s*s,d=2*a*a,b=2*n*n,g=2*s*a,c=2*n*i,l=2*s*n,v=2*a*i,p=2*a*n,f=2*s*i,h=r[0],y=r[1],M=r[2],F=u;return void 0===F&&(F=new Float32Array(12)),debug.assert(debug.isQuat(e)),debug.assert(debug.isVec3(t)||debug.isVec4(t)),debug.assert(debug.isVec3(r)),debug.assert(debug.isMathType(F)&&debug.isMtx43(F)),F[0]=h*(1-d-b),F[1]=h*(g-c),F[2]=h*(l+v),F[3]=y*(g+c),F[4]=y*(1-o-b),F[5]=y*(p-f),F[6]=M*(l-v),F[7]=M*(p+f),F[8]=M*(1-o-d),F[9]=t[0],F[10]=t[1],F[11]=t[2],F},m43FromRT:function m43FromRTFn(e,t,r){var u=e[0],s=e[1],a=e[2],n=e[3],i=2*u*u,o=2*s*s,d=2*a*a,b=2*u*s,g=2*a*n,c=2*u*a,l=2*s*n,v=2*s*a,p=2*u*n,f=r;return void 0===f&&(f=new Float32Array(12)),debug.assert(debug.isQuat(e)),debug.assert(debug.isVec3(t)||debug.isVec4(t)),debug.assert(debug.isMathType(f)&&debug.isMtx43(f)),f[0]=1-o-d,f[1]=b-g,f[2]=c+l,f[3]=b+g,f[4]=1-i-d,f[5]=v-p,f[6]=c-l,f[7]=v+p,f[8]=1-i-o,f[9]=t[0],f[10]=t[1],f[11]=t[2],f},m43Right:function m43RightFn(e,t){var r=t;return void 0===r&&(r=new Float32Array(3)),debug.assert(debug.isMtx43(e)),debug.assert(debug.isMathType(r)&&debug.isVec3(r)),r[0]=e[0],r[1]=e[1],r[2]=e[2],r},m43Up:function m43UpFn(e,t){var r=t;return void 0===r&&(r=new Float32Array(3)),debug.assert(debug.isMtx43(e)),debug.assert(debug.isMathType(r)&&debug.isVec3(r)),r[0]=e[3],r[1]=e[4],r[2]=e[5],r},m43At:function m43AtFn(e,t){var r=t;return void 0===r&&(r=new Float32Array(3)),debug.assert(debug.isMtx43(e)),debug.assert(debug.isMathType(r)&&debug.isVec3(r)),r[0]=e[6],r[1]=e[7],r[2]=e[8],r},m43Pos:function m43PosFn(e,t){var r=t;return void 0===r&&(r=new Float32Array(3)),debug.assert(debug.isMtx43(e)),debug.assert(debug.isMathType(r)&&debug.isVec3(r)),r[0]=e[9],r[1]=e[10],r[2]=e[11],r},m43SetRight:function m43SetRightFn(e,t){debug.assert(debug.isMtx43(e)),e[0]=t[0],e[1]=t[1],e[2]=t[2]},m43SetUp:function m43SetUpFn(e,t){debug.assert(debug.isMtx43(e)),e[3]=t[0],e[4]=t[1],e[5]=t[2]},m43SetAt:function m43SetAtFn(e,t){debug.assert(debug.isMtx43(e)),e[6]=t[0],e[7]=t[1],e[8]=t[2]},m43SetPos:function m43SetPosFn(e,t){debug.assert(debug.isMtx43(e)),e[9]=t[0],e[10]=t[1],e[11]=t[2]},m43SetAxisRotation:function m43SetAxisRotationFn(e,t,r){debug.assert(debug.isMtx43(e)),debug.assert(debug.isVec3(t)||debug.isVec4(t)),debug.assert(debug.isNumber(r));var u=Math.sin(r),s=Math.cos(r),a=1-s,n=t[0],i=t[1],o=t[2],d=a*n,b=a*i,g=a*o,c=u*n,l=u*i,v=u*o;e[0]=d*n+s,e[1]=d*i-v,e[2]=d*o+l,e[3]=b*n+v,e[4]=b*i+s,e[5]=b*o-c,e[6]=g*n-l,e[7]=g*i+c,e[8]=g*o+s},m43InverseOrthonormal:function m43InverseOrthonormalFn(e,t){void 0===t&&(t=new Float32Array(12)),debug.assert(debug.isMtx43(e)),debug.assert(debug.isMathType(t)&&debug.isMtx43(t));var r=e[0],u=e[1],s=e[2],a=e[3],n=e[4],i=e[5],o=e[6],d=e[7],b=e[8],g=e[9],c=e[10],l=e[11];return t[0]=r,t[1]=a,t[2]=o,t[3]=u,t[4]=n,t[5]=d,t[6]=s,t[7]=i,t[8]=b,t[9]=-(g*r+c*u+l*s),t[10]=-(g*a+c*n+l*i),t[11]=-(g*o+c*d+l*b),t},m43Orthonormalize:function m43OrthonormalizeFn(e,t){debug.assert(debug.isMtx43(e));var r,u,s,a=VMath.v3Normalize,n=VMath.v3Length,i=VMath.v3Dot,o=VMath.v3Cross,d=Math.abs,b=VMath.m43Right(e),g=VMath.m43Up(e),c=VMath.m43At(e),l=VMath.m43Pos(e),v=n(b),p=n(g),f=n(c);if(a(b,b),a(g,g),a(c,c),0<v)if(0<p)if(0<f){var h=d(i(g,c)),y=d(i(c,b)),M=d(i(b,g));h<y?h<M?(r=g,u=c,s=b):(r=b,u=g,s=c):y<M?(r=c,u=b,s=g):(r=b,u=g,s=c)}else r=b,u=g,s=c;else r=c,u=b,s=g;else r=g,u=c,s=b;return o(r,u,s),a(s,s),o(s,r,u),a(u,u),void 0===t&&(t=new Float32Array(12)),debug.assert(debug.isMathType(t)&&debug.isMtx43(t)),t[0]=b[0],t[1]=b[1],t[2]=b[2],t[3]=g[0],t[4]=g[1],t[5]=g[2],t[6]=c[0],t[7]=c[1],t[8]=c[2],t[9]=l[0],t[10]=l[1],t[11]=l[2],t},m43Determinant:function m43DeterminantFn(e){return debug.assert(debug.isMtx43(e)),e[0]*(e[4]*e[8]-e[5]*e[7])+e[1]*(e[5]*e[6]-e[3]*e[8])+e[2]*(e[3]*e[7]-e[4]*e[6])},m43Inverse:function m43InverseFn(e,t){void 0===t&&(t=new Float32Array(12)),debug.assert(debug.isMtx43(e)),debug.assert(debug.isMathType(t)&&debug.isMtx43(t));var r=e[0],u=e[1],s=e[2],a=e[3],n=e[4],i=e[5],o=e[6],d=e[7],b=e[8],g=e[9],c=e[10],l=e[11],v=n*b-i*d,p=i*o-a*b,f=a*d-n*o,h=r*v+u*p+s*f;if(0===h)return t;void 0===t&&(t=new Float32Array(12));var y=1/h;return t[0]=v*y,t[1]=(d*s-b*u)*y,t[2]=(u*i-s*n)*y,t[3]=p*y,t[4]=(b*r-o*s)*y,t[5]=(a*s-r*i)*y,t[6]=f*y,t[7]=(o*u-d*r)*y,t[8]=(r*n-a*u)*y,t[9]=(a*(c*b-d*l)+n*(o*l-g*b)+i*(g*d-o*c))*y,t[10]=(o*(s*c-u*l)+d*(r*l-g*s)+b*(g*u-r*c))*y,t[11]=(g*(s*n-u*i)+c*(r*i-a*s)+l*(a*u-r*n))*y,t},m43Translate:function m43TranslateFn(e,t){debug.assert(debug.isMtx43(e)),debug.assert(debug.isVec3(t)||debug.isVec4(t)),e[9]+=t[0],e[10]+=t[1],e[11]+=t[2]},m43Scale:function m43ScaleFn(e,t,r){void 0===r&&(r=new Float32Array(12)),debug.assert(debug.isMtx43(e)),debug.assert(debug.isVec3(t)),debug.assert(debug.isMathType(r)&&debug.isMtx43(r));var u=t[0],s=t[1],a=t[2];return r[0]=e[0]*u,r[1]=e[1]*u,r[2]=e[2]*u,r[3]=e[3]*s,r[4]=e[4]*s,r[5]=e[5]*s,r[6]=e[6]*a,r[7]=e[7]*a,r[8]=e[8]*a,r[9]=e[9],r[10]=e[10],r[11]=e[11],r},m43TransformVector:function m43TransformVectorFn(e,t,r){var u=r;void 0===u&&(u=new Float32Array(3)),debug.assert(debug.isMtx43(e)),debug.assert(debug.isVec3(t)||debug.isVec4(t)),debug.assert(debug.isMathType(u)&&debug.isVec3(u));var s=t[0],a=t[1],n=t[2];return u[0]=e[0]*s+e[3]*a+e[6]*n,u[1]=e[1]*s+e[4]*a+e[7]*n,u[2]=e[2]*s+e[5]*a+e[8]*n,u},m43TransformPoint:function m43TransformPointFn(e,t,r){var u=r;void 0===u&&(u=new Float32Array(3)),debug.assert(debug.isMtx43(e)),debug.assert(debug.isVec3(t)||debug.isVec4(t)),debug.assert(debug.isMathType(u)&&debug.isVec3(u));var s=t[0],a=t[1],n=t[2];return u[0]=e[0]*s+e[3]*a+e[6]*n+e[9],u[1]=e[1]*s+e[4]*a+e[7]*n+e[10],u[2]=e[2]*s+e[5]*a+e[8]*n+e[11],u},m43Mul:function m43MulFn(e,t,r){var u=e[0],s=e[1],a=e[2],n=e[3],i=e[4],o=e[5],d=e[6],b=e[7],g=e[8],c=e[9],l=e[10],v=e[11],p=t[0],f=t[1],h=t[2],y=t[3],M=t[4],F=t[5],m=t[6],A=t[7],S=t[8],V=r;return void 0===V&&(V=new Float32Array(12)),debug.assert(debug.isMtx43(e)),debug.assert(debug.isMtx43(t)),debug.assert(debug.isMathType(V)&&debug.isMtx43(V)),V[0]=p*u+y*s+m*a,V[1]=f*u+M*s+A*a,V[2]=h*u+F*s+S*a,V[3]=p*n+y*i+m*o,V[4]=f*n+M*i+A*o,V[5]=h*n+F*i+S*o,V[6]=p*d+y*b+m*g,V[7]=f*d+M*b+A*g,V[8]=h*d+F*b+S*g,V[9]=p*c+y*l+m*v+t[9],V[10]=f*c+M*l+A*v+t[10],V[11]=h*c+F*l+S*v+t[11],V},m43MulM33:function m43MulM33Fn(e,t,r){var u=e[0],s=e[1],a=e[2],n=e[3],i=e[4],o=e[5],d=e[6],b=e[7],g=e[8],c=e[9],l=e[10],v=e[11],p=t[0],f=t[1],h=t[2],y=t[3],M=t[4],F=t[5],m=t[6],A=t[7],S=t[8],V=r;return void 0===V&&(V=new Float32Array(12)),debug.assert(debug.isMtx43(e)),debug.assert(debug.isMtx33(t)),debug.assert(debug.isMathType(V)&&debug.isMtx43(V)),V[0]=p*u+y*s+m*a,V[1]=f*u+M*s+A*a,V[2]=h*u+F*s+S*a,V[3]=p*n+y*i+m*o,V[4]=f*n+M*i+A*o,V[5]=h*n+F*i+S*o,V[6]=p*d+y*b+m*g,V[7]=f*d+M*b+A*g,V[8]=h*d+F*b+S*g,V[9]=p*c+y*l+m*v,V[10]=f*c+M*l+A*v,V[11]=h*c+F*l+S*v,V},m43MulM44:function m43MulM44Fn(e,t,r){var u=e[0],s=e[1],a=e[2],n=e[3],i=e[4],o=e[5],d=e[6],b=e[7],g=e[8],c=e[9],l=e[10],v=e[11],p=t[0],f=t[1],h=t[2],y=t[3],M=t[4],F=t[5],m=t[6],A=t[7],S=t[8],V=t[9],T=t[10],x=t[11],w=r;return void 0===w&&(w=new Float32Array(16)),debug.assert(debug.isMtx43(e)),debug.assert(debug.isMtx44(t)),debug.assert(debug.isMathType(w)&&debug.isMtx44(w)),w[0]=p*u+M*s+S*a,w[1]=f*u+F*s+V*a,w[2]=h*u+m*s+T*a,w[3]=y*u+A*s+x*a,w[4]=p*n+M*i+S*o,w[5]=f*n+F*i+V*o,w[6]=h*n+m*i+T*o,w[7]=y*n+A*i+x*o,w[8]=p*d+M*b+S*g,w[9]=f*d+F*b+V*g,w[10]=h*d+m*b+T*g,w[11]=y*d+A*b+x*g,w[12]=p*c+M*l+S*v+t[12],w[13]=f*c+F*l+V*v+t[13],w[14]=h*c+m*l+T*v+t[14],w[15]=y*c+A*l+x*v+t[15],w},m43Transpose:function m43TransposeFn(e,t){var r=t;void 0===r&&(r=new Float32Array(12)),debug.assert(debug.isMtx43(e)),debug.assert(debug.isMathType(r)&&debug.isMtx43(r));var u=e[0],s=e[1],a=e[2],n=e[3],i=e[4],o=e[5],d=e[6],b=e[7],g=e[8],c=e[9],l=e[10],v=e[11];return r[0]=u,r[1]=n,r[2]=d,r[3]=c,r[4]=s,r[5]=i,r[6]=b,r[7]=l,r[8]=a,r[9]=o,r[10]=g,r[11]=v,r},m43MulTranspose:function m43MulTransposeFn(e,t,r){var u=e[0],s=e[1],a=e[2],n=e[3],i=e[4],o=e[5],d=e[6],b=e[7],g=e[8],c=e[9],l=e[10],v=e[11],p=t[0],f=t[1],h=t[2],y=t[3],M=t[4],F=t[5],m=t[6],A=t[7],S=t[8],V=t[9],T=t[10],x=t[11],w=r;return void 0===w&&(w=new Float32Array(12)),debug.assert(debug.isMtx43(e)),debug.assert(debug.isMtx43(t)),debug.assert(debug.isMathType(w)&&debug.isMtx43(w)),w[0]=p*u+y*s+m*a,w[1]=p*n+y*i+m*o,w[2]=p*d+y*b+m*g,w[3]=p*c+y*l+m*v+V,w[4]=f*u+M*s+A*a,w[5]=f*n+M*i+A*o,w[6]=f*d+M*b+A*g,w[7]=f*c+M*l+A*v+T,w[8]=h*u+F*s+S*a,w[9]=h*n+F*i+S*o,w[10]=h*d+F*b+S*g,w[11]=h*c+F*l+S*v+x,w},m43Offset:function m43OffsetFn(e,t,r){void 0===r&&(r=new Float32Array(12)),debug.assert(debug.isMtx43(e)),debug.assert(debug.isVec3(t)||debug.isVec4(t)),debug.assert(debug.isMathType(r)&&debug.isMtx43(r));var u=e[0],s=e[1],a=e[2],n=e[3],i=e[4],o=e[5],d=e[6],b=e[7],g=e[8],c=e[9],l=e[10],v=e[11],p=t[0],f=t[1],h=t[2];return r[0]=u,r[1]=s,r[2]=a,r[3]=n,r[4]=i,r[5]=o,r[6]=d,r[7]=b,r[8]=g,r[9]=u*p+n*f+d*h+c,r[10]=s*p+i*f+b*h+l,r[11]=a*p+o*f+g*h+v,r},m43NegOffset:function m43NegOffsetFn(e,t,r){void 0===r&&(r=new Float32Array(12)),debug.assert(debug.isMtx43(e)),debug.assert(debug.isVec3(t)||debug.isVec4(t)),debug.assert(debug.isMathType(r)&&debug.isMtx43(r));var u=e[0],s=e[1],a=e[2],n=e[3],i=e[4],o=e[5],d=e[6],b=e[7],g=e[8],c=e[9],l=e[10],v=e[11],p=-t[0],f=-t[1],h=-t[2];return r[0]=u,r[1]=s,r[2]=a,r[3]=n,r[4]=i,r[5]=o,r[6]=d,r[7]=b,r[8]=g,r[9]=u*p+n*f+d*h+c,r[10]=s*p+i*f+b*h+l,r[11]=a*p+o*f+g*h+v,r},m43InverseTransposeProjection:function m43InverseTransposeProjectionFn(e,t,r){void 0===r&&(r=new Float32Array(12)),debug.assert(debug.isMtx43(e)),debug.assert(debug.isVec3(t)),debug.assert(debug.isMathType(r)&&debug.isMtx43(r));var u=.5/t[0],s=.5/t[1],a=.5/t[2],n=e[0]*u,i=e[1]*u,o=e[2]*u,d=e[3]*s,b=e[4]*s,g=e[5]*s,c=e[6]*a,l=e[7]*a,v=e[8]*a,p=e[9],f=e[10],h=e[11];return r[0]=n,r[1]=i,r[2]=o,r[3]=.5-(p*n+f*i+h*o),r[4]=d,r[5]=b,r[6]=g,r[7]=.5-(p*d+f*b+h*g),r[8]=c,r[9]=l,r[10]=v,r[11]=.5-(p*c+f*l+h*v),r},m43ScalarAdd:function m43ScalarAddFn(e,t,r){void 0===r&&(r=new Float32Array(12)),debug.assert(debug.isMtx43(e)),debug.assert(debug.isNumber(t)),debug.assert(debug.isMathType(r)&&debug.isMtx43(r));for(var u=0;u<12;u+=1)r[u]=e[u]+t;return r},m43ScalarSub:function m43ScalarSubFn(e,t,r){void 0===r&&(r=new Float32Array(12)),debug.assert(debug.isMtx43(e)),debug.assert(debug.isNumber(t)),debug.assert(debug.isMathType(r)&&debug.isMtx43(r));for(var u=0;u<12;u+=1)r[u]=e[u]-t;return r},m43ScalarMul:function m43ScalarMulFn(e,t,r){void 0===r&&(r=new Float32Array(12)),debug.assert(debug.isMtx43(e)),debug.assert(debug.isNumber(t)),debug.assert(debug.isMathType(r)&&debug.isMtx43(r));for(var u=0;u<12;u+=1)r[u]=e[u]*t;return r},m44BuildIdentity:function m44BuildIdentityFn(e){var t=e;return void 0===t&&(t=new Float32Array(16)),debug.assert(debug.isMathType(t)&&debug.isMtx44(t)),t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},m44Build:function m44BuildFn(e,t,r,u,s,a,n,i,o,d,b,g,c,l,v,p,f){var h;return"number"==typeof a?(debug.assert("number"==typeof p),void 0===(h=f)&&(h=new Float32Array(16)),debug.assert(debug.isMathType(h)&&debug.isMtx44(h)),h[0]=e,h[1]=t,h[2]=r,h[3]=u,h[4]=s,h[5]=a,h[6]=n,h[7]=i,h[8]=o,h[9]=d,h[10]=b,h[11]=g,h[12]=c,h[13]=l,h[14]=v,h[15]=p):(debug.assert(debug.isVec4(e)&&debug.isVec4(t)&&debug.isVec4(r)&&debug.isVec4(u)),void 0===(h=s)&&(h=new Float32Array(16)),debug.assert(debug.isMathType(h)&&debug.isMtx44(h)),h[0]=e[0],h[1]=e[1],h[2]=e[2],h[3]=e[3],h[4]=t[0],h[5]=t[1],h[6]=t[2],h[7]=t[3],h[8]=r[0],h[9]=r[1],h[10]=r[2],h[11]=r[3],h[12]=u[0],h[13]=u[1],h[14]=u[2],h[15]=u[3]),h},m44Copy:function m44CopyFn(e,t){return void 0===t&&(t=new Float32Array(16)),debug.assert(debug.isMathType(t)&&debug.isMtx44(t)),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},m44Right:function m44RightFn(e,t){return void 0===t?e.slice(0,4):(debug.assert(debug.isMtx44(e)),debug.assert(debug.isMathType(t)&&debug.isVec4(t)),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t)},m44Up:function m44UpFn(e,t){return void 0===t?e.slice(4,8):(debug.assert(debug.isMtx44(e)),debug.assert(debug.isMathType(t)&&debug.isVec4(t)),t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t)},m44At:function m44AtFn(e,t){return void 0===t?e.slice(8,12):(debug.assert(debug.isMtx44(e)),debug.assert(debug.isMathType(t)&&debug.isVec4(t)),t[0]=e[8],t[1]=e[9],t[2]=e[10],t[3]=e[11],t)},m44Pos:function m44PosFn(e,t){return void 0===t?e.slice(12):(debug.assert(debug.isMtx44(e)),debug.assert(debug.isMathType(t)&&debug.isVec4(t)),t[0]=e[12],t[1]=e[13],t[2]=e[14],t[3]=e[15],t)},m44SetRight:function m44SetRightFn(e,t){debug.assert(debug.isMtx44(e)),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]},m44SetUp:function m44SetUpFn(e,t){debug.assert(debug.isMtx44(e)),e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3]},m44SetAt:function m44SetAtFn(e,t){debug.assert(debug.isMtx44(e)),e[8]=t[0],e[9]=t[1],e[10]=t[2],e[11]=t[3]},m44SetPos:function m44SetPosFn(e,t){debug.assert(debug.isMtx44(e)),e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=t[3]},m44Translate:function m44TranslateFn(e,t){debug.assert(debug.isMtx44(e)),e[12]+=t[0],e[13]+=t[1],e[14]+=t[2],e[15]+=t[3]},m44Scale:function m44ScaleFn(e,t,r){return void 0===r&&(r=new Float32Array(16)),debug.assert(debug.isMtx44(e)),debug.assert(debug.isVec3(t)),debug.assert(debug.isMathType(r)&&debug.isMtx44(r)),r[0]=e[0]*t[0],r[1]=e[1]*t[0],r[2]=e[2]*t[0],r[3]=e[3],r[4]=e[4]*t[1],r[5]=e[5]*t[1],r[6]=e[6]*t[1],r[7]=e[7],r[8]=e[8]*t[2],r[9]=e[9]*t[2],r[10]=e[10]*t[2],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},m44Transform:function m44TransformFn(e,t,r){var u=t[0],s=t[1],a=t[2],n=t[3];return void 0===r&&(r=new Float32Array(4)),debug.assert(debug.isMtx44(e)),debug.assert(debug.isVec4(t)),debug.assert(debug.isMathType(r)&&debug.isVec4(r)),1!==n?(r[0]=e[0]*u+e[4]*s+e[8]*a+e[12]*n,r[1]=e[1]*u+e[5]*s+e[9]*a+e[13]*n,r[2]=e[2]*u+e[6]*s+e[10]*a+e[14]*n,r[3]=e[3]*u+e[7]*s+e[11]*a+e[15]*n):(r[0]=e[0]*u+e[4]*s+e[8]*a+e[12],r[1]=e[1]*u+e[5]*s+e[9]*a+e[13],r[2]=e[2]*u+e[6]*s+e[10]*a+e[14],r[3]=e[3]*u+e[7]*s+e[11]*a+e[15]),r},m44Mul:function m44MulFn(e,t,r){var u=e[0],s=e[1],a=e[2],n=e[3],i=e[4],o=e[5],d=e[6],b=e[7],g=e[8],c=e[9],l=e[10],v=e[11],p=e[12],f=e[13],h=e[14],y=e[15],M=t[0],F=t[1],m=t[2],A=t[3],S=t[4],V=t[5],T=t[6],x=t[7],w=t[8],_=t[9],L=t[10],G=t[11],N=t[12],B=t[13],P=t[14],q=t[15];return void 0===r&&(r=new Float32Array(16)),debug.assert(debug.isMtx44(e)),debug.assert(debug.isMtx44(t)),debug.assert(debug.isMathType(r)&&debug.isMtx44(r)),r[0]=M*u+S*s+w*a+N*n,r[1]=F*u+V*s+_*a+B*n,r[2]=m*u+T*s+L*a+P*n,r[3]=A*u+x*s+G*a+q*n,r[4]=M*i+S*o+w*d+N*b,r[5]=F*i+V*o+_*d+B*b,r[6]=m*i+T*o+L*d+P*b,r[7]=A*i+x*o+G*d+q*b,r[8]=M*g+S*c+w*l+N*v,r[9]=F*g+V*c+_*l+B*v,r[10]=m*g+T*c+L*l+P*v,r[11]=A*g+x*c+G*l+q*v,r[12]=M*p+S*f+w*h+N*y,r[13]=F*p+V*f+_*h+B*y,r[14]=m*p+T*f+L*h+P*y,r[15]=A*p+x*f+G*h+q*y,r},m44Inverse:function m44InverseFn(e,t){var r=e[0],u=e[1],s=e[2],a=e[3],n=e[4],i=e[5],o=e[6],d=e[7],b=e[8],g=e[9],c=e[10],l=e[11],v=e[12],p=e[13],f=e[14],h=e[15];void 0===t&&(t=new Float32Array(16)),debug.assert(debug.isMtx44(e)),debug.assert(debug.isMathType(t)&&debug.isMtx44(t));var y=r*i-u*n,M=r*o-s*n,F=r*d-a*n,m=u*o-s*i,A=u*d-a*i,S=s*d-a*o,V=b*p-g*v,T=b*f-c*v,x=b*h-l*v,w=g*f-c*p,_=g*h-l*p,L=c*h-l*f,G=y*L-M*_+F*w+m*x-A*T+S*V;if(0===G)t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=0;else{var N=1/G;t[0]=(+i*L-o*_+d*w)*N,t[4]=(-n*L+o*x-d*T)*N,t[8]=(+n*_-i*x+d*V)*N,t[12]=(-n*w+i*T-o*V)*N,t[1]=(-u*L+s*_-a*w)*N,t[5]=(+r*L-s*x+a*T)*N,t[9]=(-r*_+u*x-a*V)*N,t[13]=(+r*w-u*T+s*V)*N,t[2]=(+p*S-f*A+h*m)*N,t[6]=(-v*S+f*F-h*M)*N,t[10]=(+v*A-p*F+h*y)*N,t[14]=(-v*m+p*M-f*y)*N,t[3]=(-g*S+c*A-l*m)*N,t[7]=(+b*S-c*F+l*M)*N,t[11]=(-b*A+g*F-l*y)*N,t[15]=(+b*m-g*M+c*y)*N}return t},m44Transpose:function m44TransposeFn(e,t){return void 0===t&&(t=new Float32Array(16)),debug.assert(debug.isMtx44(e)),debug.assert(debug.isMathType(t)&&debug.isMtx44(t)),t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t},m44ScalarAdd:function m44ScalarAddFn(e,t,r){void 0===r&&(r=new Float32Array(16)),debug.assert(debug.isMtx44(e)),debug.assert(debug.isNumber(t)),debug.assert(debug.isMathType(r)&&debug.isMtx44(r));for(var u=0;u<16;u+=1)r[u]=e[u]+t;return r},m44ScalarSub:function m44ScalarSubFn(e,t,r){void 0===r&&(r=new Float32Array(16)),debug.assert(debug.isMtx44(e)),debug.assert(debug.isNumber(t)),debug.assert(debug.isMathType(r)&&debug.isMtx44(r));for(var u=0;u<16;u+=1)r[u]=e[u]-t;return r},m44ScalarMul:function m44ScalarMulFn(e,t,r){void 0===r&&(r=new Float32Array(16)),debug.assert(debug.isMtx44(e)),debug.assert(debug.isNumber(t)),debug.assert(debug.isMathType(r)&&debug.isMtx44(r));for(var u=0;u<16;u+=1)r[u]=e[u]*t;return r},quatBuild:function quatBuildFn(e,t,r,u,s){var a=s;return void 0===a&&(a=new Float32Array(4)),debug.assert(debug.isNumber(e)),debug.assert(debug.isNumber(t)),debug.assert(debug.isNumber(r)),debug.assert(debug.isNumber(u)),debug.assert(debug.isMathType(a)&&debug.isQuat(a)),a[0]=e,a[1]=t,a[2]=r,a[3]=u,a},quatCopy:function quatCopyFn(e,t){var r=t;return void 0===r&&(r=new Float32Array(4)),debug.assert(debug.isMathType(r)&&debug.isQuat(r)),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r},quatIsSimilar:function quatIsSimilarFn(e,t,r){void 0===r&&(r=this.precision),debug.assert(debug.isQuat(e)),debug.assert(debug.isQuat(t)),debug.assert(debug.isNumber(r));var u=e;return e[3]*t[3]<0&&(u=VMath.v4Neg(e)),VMath.v4LengthSq(VMath.v4Sub(u,t))<r*r},quatLength:function quatLengthFn(e){return debug.assert(debug.isQuat(e)),VMath.v4Length(e)},quatDot:function quatDotFn(e,t){return debug.assert(debug.isQuat(e)),debug.assert(debug.isQuat(t)),VMath.v4Dot(e,t)},quatMul:function quatMulFn(e,t,r){void 0===r&&(r=new Float32Array(4)),debug.assert(debug.isQuat(e)),debug.assert(debug.isQuat(t)),debug.assert(debug.isMathType(r)&&debug.isQuat(r));var u=e[0],s=e[1],a=e[2],n=e[3],i=t[0],o=t[1],d=t[2],b=t[3],g=d*s-o*a,c=i*a-d*u,l=o*u-i*s;return r[0]=u*b+i*n+g,r[1]=s*b+o*n+c,r[2]=a*b+d*n+l,r[3]=b*n-(i*u+o*s+d*a),r},quatMulTranslate:function quatMulTranslateFn(e,t,r,u,s,a){debug.assert(debug.isQuat(e)),debug.assert(debug.isVec3(t)||debug.isVec4(t)),debug.assert(debug.isQuat(r)),debug.assert(debug.isVec3(u)||debug.isVec4(u)),debug.assert(debug.isQuat(s)),debug.assert(debug.isVec3(a)||debug.isVec4(a));var n=e[0],i=e[1],o=e[2],d=e[3],b=r[0],g=r[1],c=r[2],l=r[3],v=o*g-i*c,p=n*c-o*b,f=i*b-n*g;s[0]=b*d+n*l+v,s[1]=g*d+i*l+p,s[2]=c*d+o*l+f,s[3]=d*l-(n*b+i*g+o*c);var h=t[0],y=t[1],M=t[2],F=u[0],m=u[1],A=u[2],S=d*d-(n*n+i*i+o*o),V=F*S,T=m*S,x=A*S,w=(S=n*F+i*m+o*A)+S;V+=n*w,T+=i*w,x+=o*w;var _=d+d;V+=(v=o*m-i*A)*_,T+=(p=n*A-o*F)*_,x+=(f=i*F-n*m)*_,a[0]=V+h,a[1]=T+y,a[2]=x+M},quatNormalize:function quatNormalizeFn(e,t){debug.assert(debug.isQuat(e));var r=VMath.quatDot(e,e);if(0===r)return VMath.v4BuildZero(t);var u=1/Math.sqrt(r);return VMath.v4ScalarMul(e,u,t)},quatConjugate:function quatConjugateFn(e,t){return void 0===t&&(t=new Float32Array(4)),debug.assert(debug.isQuat(e)),debug.assert(debug.isMathType(t)&&debug.isQuat(t)),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},quatLerp:function quatLerpFn(e,t,r,u){void 0===u&&(u=new Float32Array(4)),debug.assert(debug.isQuat(e)),debug.assert(debug.isQuat(t)),debug.assert(debug.isNumber(r)),debug.assert(debug.isMathType(u)&&debug.isQuat(u));var s=e[0],a=e[1],n=e[2],i=e[3],o=t[0],d=t[1],b=t[2],g=t[3];return u[0]=(o-s)*r+s,u[1]=(d-a)*r+a,u[2]=(b-n)*r+n,u[3]=(g-i)*r+i,u},cosMinSlerpAngle:Math.cos(Math.PI/40),quatSlerp:function quatSlerpFn(e,t,r,u){var s=u;void 0===s&&(s=new Float32Array(4)),debug.assert(debug.isQuat(e)),debug.assert(debug.isQuat(t)),debug.assert(debug.isNumber(r)),debug.assert(debug.isMathType(s)&&debug.isQuat(s));var a=e[0],n=e[1],i=e[2],o=e[3],d=t[0],b=t[1],g=t[2],c=t[3],l=a*d+n*b+i*g+o*c,v=l;if(v<0&&(a=-a,n=-n,i=-i,o=-o,v=-v),v>VMath.cosMinSlerpAngle){if(1-1e-6<v)return s[0]=a,s[1]=n,s[2]=i,s[3]=o,s;var p=r;l<=0&&(p=-r);var f=(d-a)*p+a,h=(b-n)*p+n,y=(g-i)*p+i,M=(c-o)*p+o,F=1/Math.sqrt(f*f+h*h+y*y+M*M);return s[0]=f*F,s[1]=h*F,s[2]=y*F,s[3]=M*F,s}var m=Math.sin,A=Math.acos(v),S=1/m(A),V=m((1-r)*A)*S;return a*=V,n*=V,i*=V,o*=V,d*=V=m(r*A)*S,b*=V,g*=V,c*=V,s[0]=a+d,s[1]=n+b,s[2]=i+g,s[3]=o+c,s},quatFromM43:function quatFromM43Fn(e,t){debug.assert(debug.isMtx43(e));var r,u,s,a,n,i=e[0],o=e[1],d=e[2],b=e[3],g=e[4],c=e[5],l=e[6],v=e[7],p=e[8],f=i+g+p+1;f>VMath.precision?(r=(c-v)/(4*(a=Math.sqrt(f)/2)),u=(l-d)/(4*a),s=(o-b)/(4*a)):g<i&&p<i?(a=(c-v)/(n=2*Math.sqrt(1+i-g-p)),r=.25*n,u=(b+o)/n,s=(l+d)/n):p<g?(a=(l-d)/(n=2*Math.sqrt(1+g-i-p)),r=(b+o)/n,u=.25*n,s=(v+c)/n):(a=(o-b)/(n=2*Math.sqrt(1+p-i-g)),r=(l+d)/n,u=(v+c)/n,s=.25*n);var h=VMath.quatNormalize([r,u,s,a],t);return VMath.quatConjugate(h,t)},quatFromAxisRotation:function quatFromAxisRotationFn(e,t,r){var u=.5*t,s=Math.sin(u),a=Math.cos(u),n=r;return void 0===n&&(n=new Float32Array(4)),debug.assert(debug.isVec3(e)||debug.isVec4(e)),debug.assert(debug.isNumber(t)),debug.assert(debug.isMathType(n)&&debug.isQuat(n)),n[0]=e[0]*s,n[1]=e[1]*s,n[2]=e[2]*s,n[3]=a,VMath.quatNormalize(n,n)},quatToAxisRotation:function quatToAxisRotation(e,t){void 0===t&&(t=new Float32Array(4)),debug.assert(debug.isQuat(e)),debug.assert(debug.isMathType(t)&&debug.isVec4(t));var r=e[3],u=2*Math.acos(r),s=1-r*r;if(s<VMath.precision)t[0]=1,t[1]=0,t[2]=0,t[3]=u;else{var a=1/Math.sqrt(s);t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=u}return t},quatTransformVector:function quatTransformVectorFn(e,t,r){debug.assert(debug.isQuat(e)),debug.assert(debug.isVec3(t)||debug.isVec4(t));var u=e[0],s=e[1],a=e[2],n=e[3],i=t[0],o=t[1],d=t[2],b=n*n-(u*u+s*s+a*a),g=i*b,c=o*b,l=d*b,v=(b=u*i+s*o+a*d)+b;g+=u*v,c+=s*v,l+=a*v;var p=n+n;return g+=(a*o-s*d)*p,c+=(u*d-a*i)*p,l+=(s*i-u*o)*p,void 0===r&&(r=new Float32Array(3)),debug.assert(debug.isMathType(r)&&(debug.isVec3(r)||debug.isVec4(r))),r[0]=g,r[1]=c,r[2]=l,r},quatEqual:function quatEqual(e,t,r){void 0===r&&(r=this.precision),debug.assert(debug.isQuat(e)),debug.assert(debug.isQuat(t)),debug.assert(debug.isNumber(r));var u=Math.abs;return u(e[0]-t[0])<=r&&u(e[1]-t[1])<=r&&u(e[2]-t[2])<=r&&u(e[3]-t[3])<=r},quatPosBuild:function quatPosBuildFn(e,t,r,u,s,a,n,i){var o;return"number"==typeof u?(debug.assert("number"==typeof n),void 0===(o=i)&&(o=new Float32Array(7)),debug.assert(debug.isMathType(o)&&debug.isQuatPos(o)),o[0]=e,o[1]=t,o[2]=r,o[3]=u,o[4]=s,o[5]=a,o[6]=n):(debug.assert(debug.isVec4(e)&&debug.isVec3(t)),void 0===(o=r)&&(o=new Float32Array(7)),debug.assert(debug.isQuat(e)),debug.assert(debug.isVec3(t)||debug.isVec4(t)),debug.assert(debug.isMathType(o)&&debug.isQuatPos(o)),o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=e[3],o[4]=t[0],o[5]=t[1],o[6]=t[2]),o},quatPosTransformVector:function quatPosTransformVectorFn(e,t,r){return debug.assert(debug.isQuatPos(e)),VMath.quatTransformVector(e,t,r)},quatPosTransformPoint:function quatPosTransformPointFn(e,t){debug.assert(debug.isQuatPos(e));var r=e.slice(4,7),u=VMath.quatTransformVector(e,t);return VMath.v3Add(u,r)},quatPosMul:function quatPosMulFn(e,t){debug.assert(debug.isQuatPos(e)),debug.assert(debug.isQuatPos(t));var r=t.slice(4,7),u=VMath.quatMul(e,t),s=VMath.quatPosTransformPoint(e,r);return u[4]=s[0],u[5]=s[1],u[6]=s[2],u},isVisibleBox:function isVisibleBoxFn(e,t,r){var u=Math.abs,s=e[0],a=e[1],n=e[2],i=t[0],o=t[1],d=t[2],b=r[0],g=r[1],c=r[2],l=r[3],v=r[4],p=r[5],f=r[6],h=r[7],y=r[8],M=r[9],F=r[10],m=r[11],A=b*i,S=g*i,V=c*i,T=l*i,x=v*o,w=p*o,_=f*o,L=h*o,G=y*d,N=M*d,B=F*d,P=m*d,q=b*s+v*a+y*n+r[12],W=g*s+p*a+M*n+r[13],D=c*s+f*a+F*n+r[14],I=l*s+h*a+m*n+r[15];return!(q-I>u(A-T)+u(x-L)+u(G-P)||q+I<-(u(A+T)+u(x+L)+u(G+P))||W-I>u(S-T)+u(w-L)+u(N-P)||W+I<-(u(S+T)+u(w+L)+u(N+P))||D-I>u(V-T)+u(_-L)+u(B-P)||D+I<-(u(V+T)+u(_+L)+u(B+P))||I+I<-(u(T+T)+u(L+L)+u(P+P)))},isVisibleBoxOrigin:function isVisibleBoxOriginFn(e,t){var r=Math.abs,u=e[0],s=e[1],a=e[2],n=t[0]*u,i=t[1]*u,o=t[2]*u,d=t[3]*u,b=t[4]*s,g=t[5]*s,c=t[6]*s,l=t[7]*s,v=t[8]*a,p=t[9]*a,f=t[10]*a,h=t[11]*a,y=t[12],M=t[13],F=t[14],m=t[15];return!(y-m>r(n-d)+r(b-l)+r(v-h)||y+m<-(r(n+d)+r(b+l)+r(v+h))||M-m>r(i-d)+r(g-l)+r(p-h)||M+m<-(r(i+d)+r(g+l)+r(p+h))||F-m>r(o-d)+r(c-l)+r(f-h)||F+m<-(r(o+d)+r(c+l)+r(f+h))||m+m<-(r(d+d)+r(l+l)+r(h+h)))},isVisibleSphere:function isVisibleSphereFn(e,t,r){var u=Math.abs,s=e[0],a=e[1],n=e[2],i=r[0],o=r[1],d=r[2],b=r[3],g=r[4],c=r[5],l=r[6],v=r[7],p=r[8],f=r[9],h=r[10],y=r[11],M=i,F=o,m=d,A=b,S=g,V=c,T=l,x=v,w=p,_=f,L=h,G=y,N=i*s+g*a+p*n+r[12],B=o*s+c*a+f*n+r[13],P=d*s+l*a+h*n+r[14],q=b*s+v*a+y*n+r[15],W=-t;return!(N-q>t*(u(M-A)+u(S-x)+u(w-G))||N+q<W*(u(M+A)+u(S+x)+u(w+G))||B-q>t*(u(F-A)+u(V-x)+u(_-G))||B+q<W*(u(F+A)+u(V+x)+u(_+G))||P-q>t*(u(m-A)+u(T-x)+u(L-G))||P+q<W*(u(m+A)+u(T+x)+u(L+G))||q+q<W*(u(A+A)+u(x+x)+u(G+G)))},isVisibleSphereOrigin:function isVisibleSphereOriginFn(e,t){var r=Math.abs,u=t[0],s=t[1],a=t[2],n=t[3],i=t[4],o=t[5],d=t[6],b=t[7],g=t[8],c=t[9],l=t[10],v=t[11],p=t[12],f=t[13],h=t[14],y=t[15],M=-e;return!(p-y>e*(r(u-n)+r(i-b)+r(g-v))||p+y<M*(r(u+n)+r(i+b)+r(g+v))||f-y>e*(r(s-n)+r(o-b)+r(c-v))||f+y<M*(r(s+n)+r(o+b)+r(c+v))||h-y>e*(r(a-n)+r(d-b)+r(l-v))||h+y<M*(r(a+n)+r(d+b)+r(l+v))||y+y<M*(r(n+n)+r(b+b)+r(v+v)))},isVisibleSphereUnit:function isVisibleSphereUnitFn(e){var t=Math.abs,r=e[0],u=e[1],s=e[2],a=e[3],n=e[4],i=e[5],o=e[6],d=e[7],b=e[8],g=e[9],c=e[10],l=e[11],v=e[12],p=e[13],f=e[14],h=e[15];return!(v-h>t(r-a)+t(n-d)+t(b-l)||v+h<-(t(r+a)+t(n+d)+t(b+l))||p-h>t(u-a)+t(i-d)+t(g-l)||p+h<-(t(u+a)+t(i+d)+t(g+l))||f-h>t(s-a)+t(o-d)+t(c-l)||f+h<-(t(s+a)+t(o+d)+t(c+l))||h+h<-(t(a+a)+t(d+d)+t(l+l)))},transformBox:function transformBoxFn(e,t,r){var u=Math.abs,s=r[0],a=r[1],n=r[2],i=r[3],o=r[4],d=r[5],b=r[6],g=r[7],c=r[8],l=e[0],v=e[1],p=e[2],f=t[0],h=t[1],y=t[2],M=new Float32Array(3);M[0]=s*l+i*v+b*p+r[9],M[1]=a*l+o*v+g*p+r[10],M[2]=n*l+d*v+c*p+r[11];var F=new Float32Array(3);return F[0]=u(s)*f+u(i)*h+u(b)*y,F[1]=u(a)*f+u(o)*h+u(g)*y,F[2]=u(n)*f+u(d)*h+u(c)*y,{center:M,halfExtents:M}},planeNormalize:function planeNormalizeFn(e,t){void 0===t&&(t=new Float32Array(4));var r=e[0],u=e[1],s=e[2],a=r*r+u*u+s*s;if(0<a){var n=1/Math.sqrt(a);t[0]=r*n,t[1]=u*n,t[2]=s*n,t[3]=e[3]*n}else t[0]=0,t[1]=0,t[2]=0,t[3]=0;return t},extractFrustumPlanes:function extractFrustumPlanesFn(e,t){var r=VMath.planeNormalize,u=e[0],s=e[1],a=e[2],n=e[3],i=e[4],o=e[5],d=e[6],b=e[7],g=e[8],c=e[9],l=e[10],v=e[11],p=e[12],f=e[13],h=e[14],y=e[15],M=t||[];return M[0]=r([n+u,b+i,v+g,-(y+p)],M[0]),M[1]=r([n-u,b-i,v-g,-(y-p)],M[1]),M[2]=r([n-s,b-o,v-c,-(y-f)],M[2]),M[3]=r([n+s,b+o,v+c,-(y+f)],M[3]),M[4]=r([n+a,b+d,v+l,-(y+h)],M[4]),M[5]=r([n-a,b-d,v-l,-(y-h)],M[5]),M},isInsidePlanesPoint:function isInsidePlanesPointFn(e,t){var r=e[0],u=e[1],s=e[2],a=t.length,n=0;do{var i=t[n];if(i[0]*r+i[1]*u+i[2]*s<i[3])return!1;n+=1}while(n<a);return!0},isInsidePlanesSphere:function isInsidePlanesSphereFn(e,t,r){var u=e[0],s=e[1],a=e[2],n=r.length,i=0;do{var o=r[i];if(o[0]*u+o[1]*s+o[2]*a<o[3]-t)return!1;i+=1}while(i<n);return!0},isInsidePlanesBox:function isInsidePlanesBoxFn(e,t,r){var u=e[0],s=e[1],a=e[2],n=t[0],i=t[1],o=t[2],d=u+n,b=s+i,g=a+o,c=u-n,l=s-i,v=a-o,p=r.length,f=0;do{var h=r[f],y=h[0],M=h[1],F=h[2];if(y*(y<0?c:d)+M*(M<0?l:b)+F*(F<0?v:g)<h[3])return!1;f+=1}while(f<p);return!0},extractIntersectingPlanes:function extractIntersectingPlanesFn(e,t){var r=e[0],u=e[1],s=e[2],a=e[3],n=e[4],i=e[5],o=t.length,d=[],b=0,g=0;do{var c=t[g],l=c[0],v=c[1],p=c[2];l*(0<l?r:a)+v*(0<v?u:n)+p*(0<p?s:i)<c[3]&&(d[b]=c,b+=1),g+=1}while(g<o);return d}};if("undefined"!=typeof Float32Array){var testVector=new Float32Array([1,2,3]);testVector[0]=VMath.FLOAT_MAX,VMath.FLOAT_MAX=testVector[0]}VMath.F32Array=Float32Array;var _tz_techniqueParameterBufferCreate=function techniqueParameterBufferCreateFn(e){var t=this.tpbProto;if(!t){var r=function(){this.map=function techniqueParameterBufferMap(u,e){void 0===u&&(u=0);var s=this;return void 0===e&&(e=this.length),function techniqueParameterBufferWriter(){for(var e=arguments.length,t=0;t<e;t+=1){var r=arguments[t];"number"==typeof r?(s[u]=r,u+=1):(s.setData(r,u,r.length),u+=r.length)}}},this.unmap=function techniqueParameterBufferUnmap(e){},this.setData=function techniqueParameterBufferSetData(e,t,r){void 0===t&&(t=0),void 0===r&&(r=this.length);for(var u=0;u<r;u+=1,t+=1)this[t]=e[u]},Object.defineProperty(this,"data",{get:function techniqueParameterBufferDataGet(){return this},enumerable:!0}),Object.defineProperty(this,"numFloats",{get:function techniqueParameterBufferDataGet(){return this.length},enumerable:!0})};r.prototype=Float32Array.prototype,this.tpbProto=t=new r}var u=new Float32Array(e.numFloats);return u.__proto__=t,u};
//# sourceMappingURL=combined.js.map
